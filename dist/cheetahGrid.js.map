{"version":3,"sources":["cheetahGrid/webpack/universalModuleDefinition","cheetahGrid/webpack/bootstrap","cheetahGrid/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid/../src/js/columns/message/internal/MessageElement.css","cheetahGrid/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid/../src/js/internal/style.css","cheetahGrid/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid/node_modules/css-loader/dist/runtime/api.js","cheetahGrid/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid/node_modules/webpack/buildin/global.js","cheetahGrid/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid/../src/js/internal/style.css*","cheetahGrid/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid/./GridCanvasHelper.js","cheetahGrid/./ListGrid.js","cheetahGrid/./columns.js","cheetahGrid/./columns/action.js","cheetahGrid/./columns/action/Action.js","cheetahGrid/./columns/action/BaseAction.js","cheetahGrid/./columns/action/BaseInputEditor.js","cheetahGrid/./columns/action/ButtonAction.js","cheetahGrid/./columns/action/CheckEditor.js","cheetahGrid/./columns/action/Editor.js","cheetahGrid/./columns/action/InlineInputEditor.js","cheetahGrid/./columns/action/InlineMenuEditor.js","cheetahGrid/./columns/action/RadioEditor.js","cheetahGrid/./columns/action/SmallDialogInputEditor.js","cheetahGrid/./columns/action/action-utils.js","cheetahGrid/./columns/action/actionBind.js","cheetahGrid/./columns/action/internal/InlineInputElement.js","cheetahGrid/./columns/action/internal/InlineMenuElement.js","cheetahGrid/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid/./columns/action/internal/input-value-handler.js","cheetahGrid/./columns/indicator/handlers.js","cheetahGrid/./columns/indicator/triangle.js","cheetahGrid/./columns/message/BaseMessage.js","cheetahGrid/./columns/message/ErrorMessage.js","cheetahGrid/./columns/message/InfoMessage.js","cheetahGrid/./columns/message/MessageHandler.js","cheetahGrid/./columns/message/WarningMessage.js","cheetahGrid/./columns/message/internal/ErrorMessageElement.js","cheetahGrid/./columns/message/internal/MessageElement.js","cheetahGrid/./columns/message/internal/WarningMessageElement.js","cheetahGrid/./columns/message/messageUtils.js","cheetahGrid/./columns/style.js","cheetahGrid/./columns/style/BaseStyle.js","cheetahGrid/./columns/style/BranchGraphStyle.js","cheetahGrid/./columns/style/ButtonStyle.js","cheetahGrid/./columns/style/CheckStyle.js","cheetahGrid/./columns/style/IconStyle.js","cheetahGrid/./columns/style/ImageStyle.js","cheetahGrid/./columns/style/MenuStyle.js","cheetahGrid/./columns/style/MultilineTextStyle.js","cheetahGrid/./columns/style/NumberStyle.js","cheetahGrid/./columns/style/PercentCompleteBarStyle.js","cheetahGrid/./columns/style/RadioStyle.js","cheetahGrid/./columns/style/StdBaseStyle.js","cheetahGrid/./columns/style/Style.js","cheetahGrid/./columns/type.js","cheetahGrid/./columns/type/BaseColumn.js","cheetahGrid/./columns/type/BranchGraphColumn.js","cheetahGrid/./columns/type/ButtonColumn.js","cheetahGrid/./columns/type/CheckColumn.js","cheetahGrid/./columns/type/Column.js","cheetahGrid/./columns/type/IconColumn.js","cheetahGrid/./columns/type/ImageColumn.js","cheetahGrid/./columns/type/MenuColumn.js","cheetahGrid/./columns/type/MultilineTextColumn.js","cheetahGrid/./columns/type/NumberColumn.js","cheetahGrid/./columns/type/PercentCompleteBarColumn.js","cheetahGrid/./columns/type/RadioColumn.js","cheetahGrid/./columns/type/columnUtils.js","cheetahGrid/./columns/utils/index.js","cheetahGrid/./core.js","cheetahGrid/./core/DG_EVENT_TYPE.js","cheetahGrid/./core/DrawGrid.js","cheetahGrid/./core/EventTarget.js","cheetahGrid/./data.js","cheetahGrid/./data/CachedDataSource.js","cheetahGrid/./data/DataSource.js","cheetahGrid/./data/FilterDataSource.js","cheetahGrid/./element/Inline.js","cheetahGrid/./element/InlineDrawer.js","cheetahGrid/./element/InlineIcon.js","cheetahGrid/./element/InlineImage.js","cheetahGrid/./element/InlinePath2D.js","cheetahGrid/./element/InlineSvg.js","cheetahGrid/./element/inlines.js","cheetahGrid/./get-internal.js","cheetahGrid/./header/action.js","cheetahGrid/./header/action/BaseAction.js","cheetahGrid/./header/action/CheckHeaderAction.js","cheetahGrid/./header/action/SortHeaderAction.js","cheetahGrid/./header/action/actionBind.js","cheetahGrid/./header/style.js","cheetahGrid/./header/style/BaseStyle.js","cheetahGrid/./header/style/CheckHeaderStyle.js","cheetahGrid/./header/style/MultilineTextHeaderStyle.js","cheetahGrid/./header/style/SortHeaderStyle.js","cheetahGrid/./header/style/StdBaseStyle.js","cheetahGrid/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid/./header/style/StdTextBaseStyle.js","cheetahGrid/./header/style/Style.js","cheetahGrid/./header/type.js","cheetahGrid/./header/type/BaseHeader.js","cheetahGrid/./header/type/CheckHeader.js","cheetahGrid/./header/type/Header.js","cheetahGrid/./header/type/MultilineTextHeader.js","cheetahGrid/./header/type/SortHeader.js","cheetahGrid/./headers.js","cheetahGrid/./icons.js","cheetahGrid/./internal/EventHandler.js","cheetahGrid/./internal/LRUCache.js","cheetahGrid/./internal/NumberMap.js","cheetahGrid/./internal/Rect.js","cheetahGrid/./internal/Scrollable.js","cheetahGrid/./internal/animate.js","cheetahGrid/./internal/calc.js","cheetahGrid/./internal/canvases.js","cheetahGrid/./internal/color.js","cheetahGrid/./internal/dom.js","cheetahGrid/./internal/fonts.js","cheetahGrid/./internal/hiDPI.js","cheetahGrid/./internal/icons.js","cheetahGrid/./internal/imgs.js","cheetahGrid/./internal/legacy/canvas/Path2DShim.js","cheetahGrid/./internal/legacy/canvas/PathCommands.js","cheetahGrid/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid/./internal/menu-items.js","cheetahGrid/./internal/paste-utils.js","cheetahGrid/./internal/path2DManager.js","cheetahGrid/./internal/sort.js","cheetahGrid/./internal/style.js","cheetahGrid/./internal/symbolManager.js","cheetahGrid/./internal/utils.js","cheetahGrid/./list-grid/LG_EVENT_TYPE.js","cheetahGrid/./list-grid/layout-map/index.js","cheetahGrid/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid/./list-grid/layout-map/internal/utils.js","cheetahGrid/./main.js","cheetahGrid/./plugins/icons.js","cheetahGrid/./plugins/themes.js","cheetahGrid/./register.js","cheetahGrid/./themes.js","cheetahGrid/./themes/BASIC.js","cheetahGrid/./themes/MATERIAL_DESIGN.js","cheetahGrid/./themes/theme.js","cheetahGrid/./tools.js","cheetahGrid/./tools/canvashelper.js","cheetahGrid/./tooltip/BaseTooltip.js","cheetahGrid/./tooltip/Tooltip.js","cheetahGrid/./tooltip/TooltipHandler.js","cheetahGrid/./tooltip/internal/TooltipElement.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","GridCanvasHelper","calc","require","canvashelper","fonts","inlineUtils","themes","canvases_1","utils_1","InlineDrawer_1","Rect_1","color_1","toBoxArray","style","INLINE_ELLIPSIS","of","TEXT_OFFSET","CHECKBOX_OFFSET","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getFont","font","getThemeColor","names","gridThemeColor","getChainSafe","theme","getDefault","defaultThemeColor","args","testFontLoad","check","load","drawInlines","ctx","inlines","rect","offset","offsetTop","offsetBottom","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","restore","onReady","length","inlineWidths","map","width","reduce","a","b","forEach","index","inlineWidth","buildInlines","icons","inlineToString","string","getOverflowInline","textOverflow","isAllowOverflow","trim","Boolean","getOverflowInlinesIndex","maxWidth","lineWidth","i","remWidth","isOverflowInlines","breakWidthInlines","indexData","beforeInlines","overflow","afterInlines","slice","canBreak","before","after","breakWord","breakAll","splitIndex","push","truncateInlines","option","overflowInline","ellipsisWidth","_inlineRect","drawRect","textAlign","textBaseline","trailingIcon","trailingIconInline","iconOf","inlineDrawRect","trailingIconWidth","Rect","left","top","height","truncInlines","setCellOverflowText","sumWidth","baseRect","trailingIconRect","copy","right","_multiInlineRect","multiInlines","lineHeight","autoWrapText","lineClamp","rectHeight","Math","max","floor","buildedMultiInlines","procLineClamp","hasNext","Number","join","concat","procLine","lineRow","buildedInline","paddingTop","paddingBottom","em","getFontSize","pad","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","start","end","diff","ceil","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","positionOpt","boxWidth","measureCheckbox","pos","calcStartPosition","x","y","drawRadioButton","checkColor","radioButton","uncheckBorderColor","checkBorderColor","measureRadioButton","bgColor","ThemeResolver","constructor","_checkbox","_radioButton","_button","_header","_messages","_indicators","_grid","name","underlayBackgroundColor","frozenRowsColor","defaultBgColor","frozenRowsBgColor","selectionBgColor","highlightBgColor","frozenRowsBorderColor","highlightBorderColor","getCheckboxProp","prop","getRadioButtonProp","button","getButtonProp","header","sortArrowColor","messages","infoBgColor","getMessageProp","errorBgColor","warnBgColor","markHeight","indicators","topLeftColor","getIndicatorsProp","topLeftSize","topRightColor","topRightSize","bottomRightColor","bottomRightSize","bottomLeftColor","bottomLeftSize","strokeRect","Array","isArray","strokeStyle","borderColors","strokeColorsRect","_theme","createCalculator","calcWidth","toPx","full","getRect","getContext","calcHeight","obj","toBoxPixelArray","calculator","box","drawWithClip","getDrawRect","beginPath","clip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","paddingNums","multilineText","multilines","fillText","fillCell","fillColor","fill","fillCellWithState","getFillColorState","fillRect","fillRectWithState","sel","getSelection","cellEquals","select","cellInRange","range","border","startOffset","borderWithState","selection","moveTo","lineTo","bottom","stroke","buildCheckBoxInline","self","InlineDrawer","caption","shadow","drawButton","radius","_a","ListGrid","data_1","layout_map_1","MessageHandler_1","style_1","DrawGrid_1","GridCanvasHelper_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","symbolManager_1","paste_utils_1","_","getProtectedSymbol","_getCellRange","layoutMap","getCellRange","_updateRect","setRectFilter","startCol","startRow","endCol","endRow","c","getColWidth","r","getRowHeight","bounds","_getCellValue","headerRowCount","getHeader","field","getBody","_getField","_setCellValue","_getRecordIndexByRow","dataSource","setField","_getCellMessage","message","promises","msg","isPromise","hasMessage","Promise","resolve","reject","p","then","_getCellIcon0","icon","isObject","retIcon","iconOpt","iconPropKeys","f","_hasField","_getCellIcon","headerIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","frozenColCount","frozenRowCount","_borderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","selRecordIndex","getRecordIndexByRow","selId","getCellId","isSelectCell","flagBorder","borderColorCell","records","_refreshHeader","protectedSpace","headerEvents","id","unlisten","layout","MultiLayoutMap","SimpleHeaderLayoutMap","headerObjects","cell","ids","headerType","bindGridEvent","BaseStyle","listen","EVENT_TYPE","CHANGE_STYLE","invalidate","action","columnObjects","columnType","columnWidths","column","minWidth","setColWidth","setMinColWidth","setMaxColWidth","headerRowHeight","setRowHeight","colCount","_refreshRowCount","rowCount","bodyRowCount","_tryWithUpdateDataSource","fn","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","newDataSource","CachedDataSource","ofArray","addDisposable","_setDataSource","EMPTY","_onRangePaste","test","selectionRange","values","parsePasteRangeBoxValues","trimOnPaste","pasteRowCount","min","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","offsetCol","body","editable","getRecordStartRowByRecordIndex","startRowOffset","rejectedDetail","addRejectedDetail","record","define","pasteValue","timeout","processRejected","clearTimeout","setTimeout","fireListeners","LG_EVENT_TYPE","REJECTED_PASTE_VALUES","detail","duplicate","actionRow","valuesRow","offsetRow","valuesCol","getCellValue","oldValue","onPasteCellRangeBox","newEnd","invalidateCellRange","_onRangeDelete","deleteRowCount","deleteColCount","_record","_oldValue","onDeleteCellRangeBox","DrawGrid","options","omit","disabled","readOnly","allowRangePaste","sortState","order","MessageHandler","tooltipHandler","TooltipHandler","window","updateSize","updateScroll","dispose","recordRowCount","oldState","oldField","getHeaderField","newState","newField","setHeaderValue","headerValues","Map","getColumnDefine","getColumnType","getColumnAction","hd","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","find","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","focusCell","invalidateGridRect","makeVisibleGridCell","makeVisibleCell","getGridCanvasHelper","getHeaderCellRange","getCopyCellValue","cellRange","headerData","columnData","onDrawCell","doGetCellValue","valueCallback","doChangeValue","changeValueCallback","BEFORE_CHANGE_VALUE","ret","CHANGED_VALUE","doSetPasteValue","getHeaderValue","newValue","set","CHANGED_HEADER_VALUE","getLayoutCellId","bindEventsInternal","SELECTED_CELL","e","PASTE_CELL","multi","event","cancel","normalizeValue","DELETE_CELL","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getOffsetInvalidateCells","getCopyRangeInternal","type","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action","Editor","BaseAction","ACTIONS","Action_1","BaseAction_1","ButtonAction_1","CheckEditor_1","Editor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","_disabled","_readOnly","ImmutableRadioEditor","ImmutableInputEditor","CHECK","INPUT","RADIO","columnAction","key","toUpperCase","actionBind_1","action_utils_1","_action","clone","getState","cellId","state","isDisabledRecord","extend","bindCellClickAction","mouseOver","mouseActiveCell","mouseOut","bindCellKeyAction","onChangeDisabledInternal","BaseInputEditor","DG_EVENT_TYPE_1","KEY_ENTER","KEY_F2","open","isReadOnlyRecord","onOpenCellInternal","input","onInputCellInternal","isTarget","DG_EVENT_TYPE","INPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","keyCode","stopCellMoving","onChangeSelectCellInternal","selected","SCROLL","onGridScrollInternal","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","getCellRect","rangeRect","getCellRangeRect","parseFloat","toFixed","onSetInputAttrsInternal","isSupportMultilineValue","replace","BUTTON_COLUMN_STATE_ID","getButtonColumnStateId","setReadonly","animate_1","CHECK_COLUMN_STATE_ID","getCheckColumnStateId","_state","block","elapsed","cellKey","toggleValue","onChange","animate","point","selrange","isRejectValue","onChangeReadOnlyInternal","BaseInputEditor_1","InlineInputElement_1","getInlineInputEditorStateId","globalElement","bindGridCount","attachInput","editor","InlineInputElement","element","attach","detachInput","gridFocus","detach","_classList","classList","_type","inputValue","_cell","_selected","setInputAttrs","InlineMenuElement_1","type_1","menu_items_1","getInlineMenuEditorStateId","attachMenu","InlineMenuElement","detachMenu","_options","normalizeToFn","CLICK_CELL","MOUSEOVER_CELL","getElement","cursor","MOUSEMOVE_CELL","MOUSEOUT_CELL","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","hasOptions","normalizePasteValueStr","captionOpt","array","opt","label","MenuColumn","utils_2","RADIO_COLUMN_STATE_ID","getRadioColumnStateId","_group","group","_checkAction","checkAction","toBoolean","targets","actionCell","recordStartRow","girdRecords","getAllRecordsFromGrid","showData","d","targetRow","flag","SmallDialogInputElement_1","getSmallDialogInputEditorStateId","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","getBooleanOptionOfRecord","val","exec","KEY_SPACE","acceptKeys","indexOf","keyboardOptions","moveCellOnEnter","EventHandler_1","dom_1","input_value_handler_1","KEY_TAB","CLASSNAME","createInputElement","createElement","add","_handler","EventHandler","_input","_bindInputEvents","_beforePropEditor","parentElement","removeChild","remove","getAttachCellsArea","appendChild","setInputValue","_activeData","focus","selectionStart","selectionEnd","document","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_attaching","_isActive","stopPropagationOnly","stopPropagation","contains","getKeyCode","_onKeydownEnter","_onKeydownTab","onKeyDownMove","moveCellOnTab","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","target","el","createMenuElement","attachElement","menu","optionToLi","html","item","tabIndex","dataset","valueindex","span","appendHtml","openMenu","empty","emptyItemEl","valueItemEl","focusEl","children","focusIndex","allHeight","offsetHeight","transformOrigin","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_col","_row","disableFocus","_menu","_bindMenuEvents","bodyClickListenerId","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","bind","capture","_doChangeValue","n","findPrevSiblingFocusable","findNextSiblingFocusable","shiftKey","querySelector","isFocusable","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","browser","IE","_beforeValue","_validate","res","onKeyupAndPress","_onInputValueChange","inputOnly","sign","once","getDrawIndicator","triangle_1","indicatorStyle","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","themeSize","drawPath","size","baseLeft","baseTop","baseRight","baseBottom","kind","process","closePath","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","messageElement","moveMessageElement","move","_detach","drawCellMessage","drawCellMessageInternal","ErrorMessage","messageUtils","BaseMessage_1","ErrorMessageElement_1","RED_A100","ErrorMessageElement","_message","_info","hasFocusGrid","drawExclamationMarkBox","InfoMessage","MessageElement_1","GREY_L2","MessageElement","drawInformationMarkBox","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","error","warning","WarningMessage","normalizeMessage","original","toLowerCase","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","_attach","_move","onSelectMessage","setMessageData","newSel","FOCUS_GRID","BLUR_GRID","WarningMessageElement_1","DEEP_ORANGE_A100","WarningMessageElement","MESSAGE_CLASSNAME","_rootElement","createMessageDomElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","boxRect","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","Style","BaseStyle_1","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","Style_1","columnStyle","StyleClassDef","DEFAULT","EventTarget_1","STYLE_EVENT_TYPE","defaultStyle","EventTarget","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","doChangeStyle","indicator","BranchGraphStyle","DEFAULT_BRANCH_COLORS","_name","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","defaults","buttonBgColor","_buttonBgColor","StdBaseStyle_1","StdBaseStyle","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","appearance","_appearance","_lineHeight","_autoWrapText","_lineClamp","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_checkColor","_uncheckBorderColor","_checkBorderColor","_textAlign","_textBaseline","_color","_font","_padding","_textOverflow","MultilineTextColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","Column","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","BaseColumn","styleContents","handlers_1","COLUMN_FADEIN_STATE_ID","getColumnFadeinStateId","isFadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","configure","getFadeinState","cells","_generateFadeinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","fadeinMgr","activeFadeins","margeAnimate","_fadeinWhenCallbackInPromise","StyleClass","promise","Date","now","all","currentContext","toCurrentContext","time","actStyle","convertInternal","drawMessageInternal","drawIndicatorsInternal","_cellId","BaseColumn_1","BranchGraphStyle_1","getBranchGraphColumnStateId","getAllColumnData","callback","allData","data","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","mergeLines","filter","l","froms","tos","t","splice","merge","joinLine","timeline","branchIndex","reverse","j","tl","branch","branches","from","to","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","textWidth","measureText","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","clearCache","has","_value","upLineIndexKey","downLineIndexKey","line","pointIndex","sort","arc","PI","utils","_caption","withCaption","textValue","String","active","loadIcons","blur","offsetY","repeatArray","count","Infinity","_tagName","tagName","_className","className","_content","content","_iconWidth","iconWidth","isNaN","imgs_1","MAX_LRU_CACHE_SIZE","getImage","url","getCacheOrLoad","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","normalize","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","path","console","warn","split","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","MARGIN","_min","_max","_formatter","formatter","str","endsWith","rate","barMaxWidth","barTop","barLeft","barSize","argIcon","iconList","toNormalizeArray","MOUSEDOWN_CELL","MOUSEUP_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","RESIZE_COLUMN","hiDPI","NumberMap_1","Scrollable_1","isTouchEvent","getMouseButtons","cancelEvent","createRootElement","KEY_BS","KEY_END","KEY_HOME","KEY_LEFT","KEY_RIGHT","KEY_DEL","KEY_ALPHA_A","KEY_ALPHA_C","KEY_ALPHA_V","_vibrate","navigator","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candidateRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_getCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","keys","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","cellDrawing","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","put","_storeAutoColWidthExprs","defaultColPxWidth","each","adj","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","setFocusCursor","abs","redrawRect","_onKeyDownMove","ctrlKey","metaKey","hMove","vMove","newCell","_moveFocusCell","selectAllOnCtrlA","vDir","hDir","shiftKeyFlg","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_updatedSelection","focusControl","selCol","selRow","results","editMode","findIndex","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","buttons","resizeCol","_getResizeColAt","columnResizer","cellSelector","hasListeners","doubleTapBefore","longTouchId","useTouch","useTouchStart","timeoutId","useTouchEnd","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","leaveCell","moving","lastMoving","onKeyDown","onScroll","copyRange","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","normalizedValue","normalizePasteValue","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","onBlur","abstractX","abstractY","inPoint","cellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","mousemove","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","afterSize","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_isComposition","_compositionEnd","lastInputValue","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","Edge","isDescendantElement","dummyInput","pasteText","clipboardData","getData","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","attributes","removeNames","attr","_inputStatus","nodeName","removeName","removeAttribute","setAttribute","inputStatus","Selection","_sel","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","list","_level","_list","drawing","_rectFilter","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","rectFilter","_getRectInternal","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","protectedKey","initDocument","Scrollable","transform","alpha","NumberMap","cellTextOverflows","cfg","config","scrollHeight","scrollWidth","setScrollSize","getMaxColWidth","maxwidth","getMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","oldEditMode","cellsRect","invalidateTarget","visibleRowCount","visibleTop","visibleColCount","visibleLeft","topRow","leftCol","_range","getCellOverflowText","overflowText","disposable","Error","disposables","_absoluteY","_startRow","_endRow","nextId","listeners","listenerData","listener","addEventListener","removeEventListener","FilterDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","_setFieldCache","fCache","recCache","source","_rCache","_fCache","getOriginal","getOriginalField","rowCache","setOriginalField","fieldPromiseCallBackInternal","recordPromiseCallBackInternal","isFieldAssessor","UPDATE_LENGTH","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","fieldGet","fieldResult","ss","applyChainSafe","emptyFn","fieldSet","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","hasOriginalField","orderFn","sortPromise","rel","_index","_field","DataSourceIterator","_dataSource","_curIndex","_data","next","_getIndexData","movePrev","nest","FilterData","dc","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","Inline","getWidth","breakWidth","itr","candidateIndex","chars","beforeWidth","charWidth","beforeContent","afterContent","_callback","fillTextRect","genChars","allWidth","candidate","genWords","toString","Inline_1","_draw","_width","_arg","InlineIcon","_icon","letterSpacing","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_height","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","s","_loadImage","img","drawInlineImageRect","InlinePath2D","path2DManager","Path2D","getPath2D","_path","translate","InlineSvg","InlineImage_1","buildSvgDataUrl","svg","XMLSerializer","serializeToString","encodeURIComponent","getSvgElement","parser","DOMParser","parseFromString","svgElem","elmWidth","getAttribute","elmHeight","numElmWidth","numElmHeight","InlineIcon_1","InlinePath2D_1","InlineSvg_1","drawRegisteredIcon","drawWidth","drawHeight","isIconConstructorOption","isInlineImageConstructorOption","isInlineSvgConstructorOption","registeredIcons","registeredIcon","il","getInternal","symbolManager","pasteUtils","ofCell","CheckHeaderAction","SortHeaderAction","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","SORT","headerAction","headerCell","sortMethod","CHECK_HEADER_STATE_ID","getCheckHeaderStateId","checked","_sort","_executeSort","hasTrueField","fieldRow","inMouse","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdTextBaseStyle_1","StdTextBaseStyle","StdMultilineTextBaseStyle_1","StdMultilineTextBaseStyle","_sortArrowColor","_multiline","multiline","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","inlineCheck","contents","arrowSize","icons_1","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","fire","hasListener","clear","LRUCache","cacheSize","_map","_cacheSize","idx","remKey","shift","indexFirst","arr","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","rect1","rect2","_right","_bottom","x0","x1","y0","y1","another","MAX_SCROLL","heightLimit","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","isNode","requestAnimationFrame","duration","easing","startedAt","easingFn","canceledFlg","createAnim","anim","TYPE_PAREN","TYPE_UNIT","TYPE_OPERATOR","TYPE_NUMBER","NODE_TYPE_UNIT","NODE_TYPE_BINARY_EXPRESSION","NODE_TYPE_NUMBER","TABULATION","CARRIAGE_RETURN","LINE_FEED","FORM_FEED","SPACE","PERCENT","FULL_STOP","DIGIT_0","DIGIT_9","LATIN_CAPITAL_A","LATIN_CAPITAL_Z","LATIN_SMALL_A","LATIN_SMALL_Z","isUpperLetter","cp","isLowerLetter","isLetter","isWhitespace","isDigit","isDot","isUnit","createError","tokenize","exp","tokens","len","charCodeAt","parseSign","parseNum","parseUnit","unit","PRECEDENCE","lex","buildBinaryExpNode","stack","op","nodeType","token","deep","closeIndex","beforeOp","parse","calcStr","calcNode","node","toPxInternal","ast","calcBasePosition","fontSizeCache","fontName","bk","paddingLeft","paddingRight","rgbMap","styleColorToRGB","dummy","position","styleColor","defaultView","getComputedStyle","colorToRGB0","hexToNum","hex","parseInt","createRGB","g","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","rgb","enableFocus","toNodeList","innerHTML","dom","firstChild","arg","toNode","childNodes","inner","disableBeforeTabIndex","previousSibling","nextSibling","loads","_testStr","fontFaceSet","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","getIconProps","ICON_PROP_KEYS","quote","quoted","part","doms","props","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","toSimpleArray","iconProps","workData","isIconKey","loadImage","LRUCache_1","allCache","Image","onload","onerror","getCacheOrLoad0","cacheName","Path2DShim","PathCommandsParser_1","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","roundRect","_y","_w","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands","mag","sqrt","pow","dot","u","clamp","angle","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","PathCommands_1","pathTokens","builder","argsProvider","_commands","buildPush","numArgs","ops","subsequentCommand","fst","log","FontRuler","computeStyle","display","el_","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","hasWebKitFallbackBug","callbacks","cb","HAS_WEBKIT_FALLBACK_BUG","match","userAgent","module","JSON","parseValues","adjustCell","char","processQuotedCell","pathModule","ud","upsideDown","offsetX","xrate","yrate","path2d","sortArray","createArray","createArrayPromise","plist","setArrayField","compare","old","dummyPromise","catch","getScrollBarWidth","wrapper","wrapperStyle","pointerEvents","wrapperWidth","innerWidth","SCROLLBAR_SIZE","initDocumentInternal","head","initDocumentVar","Function","Symbol","global","random","cl","mem","getIgnoreCase","arrayFind","arrayFindIndex","predicate","analyzeUserAgent","Chrome","Firefox","Safari","ua","omits","defs","root","searchString","subjectString","isFinite","lastIndex","lastIndexOf","re","which","preventDefault","simple_header_layout_1","multi_layout_1","columns","normalizeLayout","seqId","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","_emptyDataCache","EmptyDataCache","hbLayouut","headerField","_body","colDef","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","prev","newEmptyColumnData","newEmptyHeaderData","headers","rows","register","getIcons","tools","core","_getInternal","ListGrid_1","get_internal_1","default","defaultTheme","setDefault","getChoices","themes_1","registers","__importDefault","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","Theme","builtin","defTheme","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","strokeRectLines","positions","preColor","pos1","pos2","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","leftWidth","rightWidth","leftLeftPos","leftTopPos","checkSize","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","BaseTooltip","detachTooltipElement","_tooltipElement","_getTooltipElement","createTooltipElementInternal","attachTooltipElement","tooltipElement","moveTooltipElement","Tooltip","BaseTooltip_1","TooltipElement_1","TooltipElement","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","getTooltipInstanceInfo","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","_isAttachCell","CONTENT_CLASSNAME","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","winWidth","maxWidthForRight"],"mappings":"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GD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;A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","file":"cheetahGrid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row) &&\r\n        ((typeof helper.theme.highlightBorderColor == \"string\" &&\r\n            helper.theme.highlightBorderColor) ||\r\n            (typeof helper.theme.highlightBorderColor == \"function\" &&\r\n                helper.theme.highlightBorderColor(row, col)))) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        let flagBorder = false;\r\n        if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\r\n            }\r\n            if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" &&\r\n                ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\r\n                borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if ((_j = layoutMap.getHeader(col, row)) === null || _j === void 0 ? void 0 : _j.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_k = layoutMap.getHeader(col, row)) === null || _k === void 0 ? void 0 : _k.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_m = (_l = layoutMap.getHeader(col, row).style) === null || _l === void 0 ? void 0 : _l.borderColor) !== null && _m !== void 0 ? _m : \"\";\r\n            }\r\n            if (typeof ((_o = layoutMap.getHeader(col, row)) === null || _o === void 0 ? void 0 : _o.style) == \"function\" &&\r\n                ((_p = grid[_].records) === null || _p === void 0 ? void 0 : _p.length)) {\r\n                borderColorCell = (_q = layoutMap.getHeader(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _q === void 0 ? void 0 : _q.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if (!flagBorder) {\r\n            helper.border(context, option);\r\n        }\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    grid.frozenRowCount = layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...super.bindGridEvent(grid, cellId),\r\n            grid.listen('click_cell', (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style, col, row) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef, col, row);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n"],"sourceRoot":""}