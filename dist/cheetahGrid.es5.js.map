{"version":3,"sources":["cheetahGrid.es5/cheetahGrid.es5.js","cheetahGrid.es5/webpack/universalModuleDefinition","cheetahGrid.es5/webpack/bootstrap","cheetahGrid.es5/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid.es5/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid.es5/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid.es5/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid.es5/../src/js/columns/message/internal/MessageElement.css","cheetahGrid.es5/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid.es5/../src/js/internal/style.css","cheetahGrid.es5/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid.es5/node_modules/css-loader/dist/runtime/api.js","cheetahGrid.es5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid.es5/node_modules/webpack/buildin/global.js","cheetahGrid.es5/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid.es5/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid.es5/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid.es5/../src/js/internal/style.css*","cheetahGrid.es5/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid.es5/./GridCanvasHelper.js","cheetahGrid.es5/./ListGrid.js","cheetahGrid.es5/./columns.js","cheetahGrid.es5/./columns/action.js","cheetahGrid.es5/./columns/action/Action.js","cheetahGrid.es5/./columns/action/BaseAction.js","cheetahGrid.es5/./columns/action/BaseInputEditor.js","cheetahGrid.es5/./columns/action/ButtonAction.js","cheetahGrid.es5/./columns/action/CheckEditor.js","cheetahGrid.es5/./columns/action/Editor.js","cheetahGrid.es5/./columns/action/InlineInputEditor.js","cheetahGrid.es5/./columns/action/InlineMenuEditor.js","cheetahGrid.es5/./columns/action/RadioEditor.js","cheetahGrid.es5/./columns/action/SmallDialogInputEditor.js","cheetahGrid.es5/./columns/action/action-utils.js","cheetahGrid.es5/./columns/action/actionBind.js","cheetahGrid.es5/./columns/action/internal/InlineInputElement.js","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.js","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.es5/./columns/action/internal/input-value-handler.js","cheetahGrid.es5/./columns/indicator/handlers.js","cheetahGrid.es5/./columns/indicator/triangle.js","cheetahGrid.es5/./columns/message/BaseMessage.js","cheetahGrid.es5/./columns/message/ErrorMessage.js","cheetahGrid.es5/./columns/message/InfoMessage.js","cheetahGrid.es5/./columns/message/MessageHandler.js","cheetahGrid.es5/./columns/message/WarningMessage.js","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.es5/./columns/message/internal/MessageElement.js","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.js","cheetahGrid.es5/./columns/message/messageUtils.js","cheetahGrid.es5/./columns/style.js","cheetahGrid.es5/./columns/style/BaseStyle.js","cheetahGrid.es5/./columns/style/BranchGraphStyle.js","cheetahGrid.es5/./columns/style/ButtonStyle.js","cheetahGrid.es5/./columns/style/CheckStyle.js","cheetahGrid.es5/./columns/style/IconStyle.js","cheetahGrid.es5/./columns/style/ImageStyle.js","cheetahGrid.es5/./columns/style/MenuStyle.js","cheetahGrid.es5/./columns/style/MultilineTextStyle.js","cheetahGrid.es5/./columns/style/NumberStyle.js","cheetahGrid.es5/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.es5/./columns/style/RadioStyle.js","cheetahGrid.es5/./columns/style/StdBaseStyle.js","cheetahGrid.es5/./columns/style/Style.js","cheetahGrid.es5/./columns/type.js","cheetahGrid.es5/./columns/type/BaseColumn.js","cheetahGrid.es5/./columns/type/BranchGraphColumn.js","cheetahGrid.es5/./columns/type/ButtonColumn.js","cheetahGrid.es5/./columns/type/CheckColumn.js","cheetahGrid.es5/./columns/type/Column.js","cheetahGrid.es5/./columns/type/IconColumn.js","cheetahGrid.es5/./columns/type/ImageColumn.js","cheetahGrid.es5/./columns/type/MenuColumn.js","cheetahGrid.es5/./columns/type/MultilineTextColumn.js","cheetahGrid.es5/./columns/type/NumberColumn.js","cheetahGrid.es5/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.es5/./columns/type/RadioColumn.js","cheetahGrid.es5/./columns/type/columnUtils.js","cheetahGrid.es5/./columns/utils/index.js","cheetahGrid.es5/./core.js","cheetahGrid.es5/./core/DG_EVENT_TYPE.js","cheetahGrid.es5/./core/DrawGrid.js","cheetahGrid.es5/./core/EventTarget.js","cheetahGrid.es5/./data.js","cheetahGrid.es5/./data/CachedDataSource.js","cheetahGrid.es5/./data/DataSource.js","cheetahGrid.es5/./data/FilterDataSource.js","cheetahGrid.es5/./element/Inline.js","cheetahGrid.es5/./element/InlineDrawer.js","cheetahGrid.es5/./element/InlineIcon.js","cheetahGrid.es5/./element/InlineImage.js","cheetahGrid.es5/./element/InlinePath2D.js","cheetahGrid.es5/./element/InlineSvg.js","cheetahGrid.es5/./element/inlines.js","cheetahGrid.es5/./get-internal.js","cheetahGrid.es5/./header/action.js","cheetahGrid.es5/./header/action/BaseAction.js","cheetahGrid.es5/./header/action/CheckHeaderAction.js","cheetahGrid.es5/./header/action/SortHeaderAction.js","cheetahGrid.es5/./header/action/actionBind.js","cheetahGrid.es5/./header/style.js","cheetahGrid.es5/./header/style/BaseStyle.js","cheetahGrid.es5/./header/style/CheckHeaderStyle.js","cheetahGrid.es5/./header/style/MultilineTextHeaderStyle.js","cheetahGrid.es5/./header/style/SortHeaderStyle.js","cheetahGrid.es5/./header/style/StdBaseStyle.js","cheetahGrid.es5/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid.es5/./header/style/StdTextBaseStyle.js","cheetahGrid.es5/./header/style/Style.js","cheetahGrid.es5/./header/type.js","cheetahGrid.es5/./header/type/BaseHeader.js","cheetahGrid.es5/./header/type/CheckHeader.js","cheetahGrid.es5/./header/type/Header.js","cheetahGrid.es5/./header/type/MultilineTextHeader.js","cheetahGrid.es5/./header/type/SortHeader.js","cheetahGrid.es5/./headers.js","cheetahGrid.es5/./icons.js","cheetahGrid.es5/./internal/EventHandler.js","cheetahGrid.es5/./internal/LRUCache.js","cheetahGrid.es5/./internal/NumberMap.js","cheetahGrid.es5/./internal/Rect.js","cheetahGrid.es5/./internal/Scrollable.js","cheetahGrid.es5/./internal/animate.js","cheetahGrid.es5/./internal/calc.js","cheetahGrid.es5/./internal/canvases.js","cheetahGrid.es5/./internal/color.js","cheetahGrid.es5/./internal/dom.js","cheetahGrid.es5/./internal/fonts.js","cheetahGrid.es5/./internal/hiDPI.js","cheetahGrid.es5/./internal/icons.js","cheetahGrid.es5/./internal/imgs.js","cheetahGrid.es5/./internal/legacy/canvas/Path2DShim.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommands.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.es5/./internal/menu-items.js","cheetahGrid.es5/./internal/paste-utils.js","cheetahGrid.es5/./internal/path2DManager.js","cheetahGrid.es5/./internal/sort.js","cheetahGrid.es5/./internal/style.js","cheetahGrid.es5/./internal/symbolManager.js","cheetahGrid.es5/./internal/utils.js","cheetahGrid.es5/./list-grid/LG_EVENT_TYPE.js","cheetahGrid.es5/./list-grid/layout-map/index.js","cheetahGrid.es5/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid.es5/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid.es5/./list-grid/layout-map/internal/utils.js","cheetahGrid.es5/./main.js","cheetahGrid.es5/./plugins/icons.js","cheetahGrid.es5/./plugins/themes.js","cheetahGrid.es5/./register.js","cheetahGrid.es5/./themes.js","cheetahGrid.es5/./themes/BASIC.js","cheetahGrid.es5/./themes/MATERIAL_DESIGN.js","cheetahGrid.es5/./themes/theme.js","cheetahGrid.es5/./tools.js","cheetahGrid.es5/./tools/canvashelper.js","cheetahGrid.es5/./tooltip/BaseTooltip.js","cheetahGrid.es5/./tooltip/Tooltip.js","cheetahGrid.es5/./tooltip/TooltipHandler.js","cheetahGrid.es5/./tooltip/internal/TooltipElement.js"],"names":["window","webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","___CSS_LOADER_EXPORT___","push","useSourceMap","list","toString","map","item","content","cssWithMappingToString","concat","join","mediaQuery","dedupe","alreadyImportedModules","length","id","_i","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","isOldIE","memo","memorize","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","index","obj","css","media","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","removeStyleElement","parentNode","removeChild","replaceText","textStore","replace","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","updateStyle","newObj","lastIdentifiers","newList","newLastIdentifiers","_identifier","_index","splice","g","Function","api","default","locals","__createBinding","k","k2","undefined","desc","getOwnPropertyDescriptor","writable","configurable","__setModuleDefault","v","__importStar","mod","GridCanvasHelper","calc","require","canvashelper","fonts","inlineUtils","themes","canvases_1","utils_1","InlineDrawer_1","Rect_1","color_1","toBoxArray","INLINE_ELLIPSIS","of","TEXT_OFFSET","CHECKBOX_OFFSET","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getFont","font","getThemeColor","names","gridThemeColor","getChainSafe","theme","defaultThemeColor","args","testFontLoad","check","load","drawInlines","ctx","inlines","rect","offset","offsetTop","offsetBottom","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","restore","onReady","inlineWidths","width","reduce","a","b","inlineWidth","buildInlines","icons","inlineToString","string","getOverflowInline","textOverflow","isAllowOverflow","trim","getOverflowInlinesIndex","maxWidth","lineWidth","remWidth","isOverflowInlines","breakWidthInlines","indexData","beforeInlines","overflow","afterInlines","slice","canBreak","breakWord","before","after","breakAll","splitIndex","truncateInlines","option","overflowInline","ellipsisWidth","_inlineRect","drawRect","textAlign","textBaseline","trailingIcon","trailingIconInline","iconOf","inlineDrawRect","trailingIconWidth","Rect","left","top","height","truncInlines","setCellOverflowText","sumWidth","baseRect","trailingIconRect","copy","right","_multiInlineRect","multiInlines","lineHeight","autoWrapText","lineClamp","rectHeight","Math","max","floor","buildedMultiInlines","procLineClamp","hasNext","Number","procLine","lineRow","buildedInline","paddingTop","paddingBottom","em","getFontSize","pad","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","start","end","diff","ceil","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","positionOpt","boxWidth","measureCheckbox","pos","calcStartPosition","x","y","drawRadioButton","checkColor","radioButton","uncheckBorderColor","checkBorderColor","measureRadioButton","bgColor","ThemeResolver","constructor","_checkbox","_radioButton","_button","_header","_messages","_indicators","_grid","getCheckboxProp","prop","getRadioButtonProp","getButtonProp","sortArrowColor","infoBgColor","getMessageProp","errorBgColor","warnBgColor","markHeight","topLeftColor","getIndicatorsProp","topLeftSize","topRightColor","topRightSize","bottomRightColor","bottomRightSize","bottomLeftColor","bottomLeftSize","strokeRect","Array","isArray","strokeStyle","borderColors","strokeColorsRect","_theme","createCalculator","calcWidth","toPx","full","getRect","getContext","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","getDrawRect","beginPath","clip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","frozenRowsColor","paddingNums","multilineText","multilines","fillText","fillCell","fillColor","defaultBgColor","fill","fillCellWithState","getFillColorState","fillRect","fillRectWithState","sel","getSelection","cellEquals","select","cellInRange","range","selectionBgColor","highlightBgColor","frozenRowsBgColor","border","startOffset","borderWithState","highlightBorderColor","frozenRowsBorderColor","selection","moveTo","lineTo","bottom","stroke","buildCheckBoxInline","self","InlineDrawer","button","caption","shadow","drawButton","radius","_a","ListGrid","data_1","layout_map_1","MessageHandler_1","style_1","DrawGrid_1","GridCanvasHelper_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","symbolManager_1","paste_utils_1","_","getProtectedSymbol","_getCellRange","layoutMap","getCellRange","_updateRect","setRectFilter","startCol","startRow","endCol","endRow","getColWidth","getRowHeight","bounds","_getCellValue","headerRowCount","getHeader","getBody","field","_getField","_setCellValue","_getRecordIndexByRow","dataSource","setField","_getCellMessage","message","promises","msg","isPromise","hasMessage","Promise","resolve","reject","then","_getCellIcon0","icon","isObject","retIcon","iconOpt","iconPropKeys","f","_hasField","_getCellIcon","headerIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","frozenColCount","frozenRowCount","_borderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","selRecordIndex","getRecordIndexByRow","selId","getCellId","isSelectCell","_refreshHeader","_b","protectedSpace","headerEvents","unlisten","layout","MultiLayoutMap","SimpleHeaderLayoutMap","header","headerObjects","cell","ids","headerType","bindGridEvent","BaseStyle","listen","EVENT_TYPE","CHANGE_STYLE","invalidate","action","columnObjects","columnType","columnWidths","column","minWidth","setColWidth","setMinColWidth","setMaxColWidth","headerRowHeight","setRowHeight","colCount","_refreshRowCount","rowCount","bodyRowCount","_tryWithUpdateDataSource","fn","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","records","newDataSource","CachedDataSource","ofArray","addDisposable","_setDataSource","EMPTY","_onRangePaste","test","selectionRange","values","parsePasteRangeBoxValues","trimOnPaste","pasteRowCount","min","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","offsetCol","body","editable","getRecordStartRowByRecordIndex","startRowOffset","rejectedDetail","addRejectedDetail","record","pasteValue","timeout","processRejected","clearTimeout","setTimeout","fireListeners","LG_EVENT_TYPE","REJECTED_PASTE_VALUES","detail","duplicate","actionRow","valuesRow","offsetRow","valuesCol","getCellValue","oldValue","onPasteCellRangeBox","newEnd","invalidateCellRange","_onRangeDelete","deleteRowCount","deleteColCount","_record","_oldValue","onDeleteCellRangeBox","omit","disabled","readOnly","allowRangePaste","sortState","order","MessageHandler","tooltipHandler","TooltipHandler","updateSize","updateScroll","dispose","underlayBackgroundColor","oldState","oldField","getHeaderField","newState","newField","setHeaderValue","headerValues","Map","getColumnDefine","getColumnType","getColumnAction","hd","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","find","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","focusCell","invalidateGridRect","makeVisibleGridCell","_c","_d","makeVisibleCell","getGridCanvasHelper","getHeaderCellRange","getCopyCellValue","cellRange","headerData","columnData","onDrawCell","doGetCellValue","valueCallback","doChangeValue","changeValueCallback","BEFORE_CHANGE_VALUE","ret","CHANGED_VALUE","doSetPasteValue","getHeaderValue","newValue","set","CHANGED_HEADER_VALUE","getLayoutCellId","bindEventsInternal","SELECTED_CELL","PASTE_CELL","multi","event","cancel","normalizeValue","DELETE_CELL","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getOffsetInvalidateCells","getCopyRangeInternal","type","DrawGrid","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action","Editor","BaseAction","ACTIONS","Action_1","BaseAction_1","ButtonAction_1","CheckEditor_1","Editor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","_disabled","_readOnly","ImmutableRadioEditor","ImmutableInputEditor","CHECK","INPUT","RADIO","columnAction","toUpperCase","actionBind_1","action_utils_1","_action","clone","getState","cellId","state","isDisabledRecord","extend","bindCellClickAction","mouseOver","mouseActiveCell","mouseOut","bindCellKeyAction","onChangeDisabledInternal","BaseInputEditor","DG_EVENT_TYPE_1","KEY_ENTER","KEY_F2","open","isReadOnlyRecord","onOpenCellInternal","input","onInputCellInternal","isTarget","DG_EVENT_TYPE","INPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","keyCode","stopCellMoving","onChangeSelectCellInternal","selected","SCROLL","onGridScrollInternal","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","getCellRect","rangeRect","getCellRangeRect","parseFloat","toFixed","onSetInputAttrsInternal","isSupportMultilineValue","BUTTON_COLUMN_STATE_ID","getButtonColumnStateId","setReadonly","animate_1","CHECK_COLUMN_STATE_ID","getCheckColumnStateId","_state","block","elapsed","cellKey","toggleValue","onChange","animate","point","_e","selrange","isRejectValue","onChangeReadOnlyInternal","BaseInputEditor_1","InlineInputElement_1","getInlineInputEditorStateId","globalElement","bindGridCount","attachInput","editor","InlineInputElement","element","attach","detachInput","gridFocus","detach","_classList","classList","_type","inputValue","_cell","_selected","setInputAttrs","InlineMenuElement_1","type_1","menu_items_1","getInlineMenuEditorStateId","attachMenu","InlineMenuElement","detachMenu","_options","normalizeToFn","CLICK_CELL","MOUSEOVER_CELL","getElement","cursor","MOUSEMOVE_CELL","MOUSEOUT_CELL","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","hasOptions","normalizePasteValueStr","captionOpt","array","opt","label","MenuColumn","utils_2","RADIO_COLUMN_STATE_ID","getRadioColumnStateId","_group","group","_checkAction","checkAction","toBoolean","targets","actionCell","recordStartRow","girdRecords","getAllRecordsFromGrid","showData","recordRowCount","targetRow","flag","SmallDialogInputElement_1","getSmallDialogInputEditorStateId","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","getBooleanOptionOfRecord","val","exec","KEY_SPACE","acceptKeys","indexOf","keyboardOptions","moveCellOnEnter","EventHandler_1","dom_1","input_value_handler_1","KEY_TAB","CLASSNAME","createInputElement","add","_handler","EventHandler","_input","_bindInputEvents","_beforePropEditor","parentElement","getAttachCellsArea","setInputValue","_activeData","focus","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_attaching","_isActive","stopPropagationOnly","stopPropagation","contains","getKeyCode","_onKeydownEnter","_onKeydownTab","onKeyDownMove","moveCellOnTab","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","el","createMenuElement","attachElement","menu","optionToLi","html","tabIndex","dataset","valueindex","span","appendHtml","openMenu","empty","emptyItemEl","valueItemEl","focusEl","children","focusIndex","allHeight","offsetHeight","transformOrigin","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_col","_row","disableFocus","_menu","_bindMenuEvents","bodyClickListenerId","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","capture","_doChangeValue","findPrevSiblingFocusable","findNextSiblingFocusable","shiftKey","isFocusable","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","browser","IE","_beforeValue","_validate","res","onKeyupAndPress","_onInputValueChange","inputOnly","sign","once","getDrawIndicator","triangle_1","indicatorStyle","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","indicators","themeSize","drawPath","size","baseLeft","baseTop","baseRight","baseBottom","kind","process","closePath","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","messageElement","moveMessageElement","move","_detach","drawCellMessage","drawCellMessageInternal","ErrorMessage","messageUtils","BaseMessage_1","ErrorMessageElement_1","RED_A100","ErrorMessageElement","_message","_info","hasFocusGrid","drawExclamationMarkBox","messages","InfoMessage","MessageElement_1","GREY_L2","MessageElement","drawInformationMarkBox","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","error","warning","WarningMessage","normalizeMessage","original","toLowerCase","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","_attach","_move","onSelectMessage","setMessageData","newSel","FOCUS_GRID","BLUR_GRID","WarningMessageElement_1","DEEP_ORANGE_A100","WarningMessageElement","MESSAGE_CLASSNAME","_rootElement","createMessageDomElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","boxRect","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","Style","BaseStyle_1","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","Style_1","columnStyle","StyleClassDef","DEFAULT","EventTarget_1","STYLE_EVENT_TYPE","defaultStyle","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","doChangeStyle","EventTarget","indicator","BranchGraphStyle","DEFAULT_BRANCH_COLORS","_name","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","defaults","buttonBgColor","_buttonBgColor","StdBaseStyle_1","_uncheckBgColor","_checkBgColor","_borderColor","StdBaseStyle","_imageSizing","imageSizing","appearance","_appearance","_lineHeight","_autoWrapText","_lineClamp","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_checkColor","_uncheckBorderColor","_checkBorderColor","_textAlign","_textBaseline","_color","_font","_padding","_textOverflow","MultilineTextColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","Column","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","BaseColumn","styleContents","handlers_1","COLUMN_FADEIN_STATE_ID","getColumnFadeinStateId","isFadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","configure","getFadeinState","cells","_generateFadeinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","fadeinMgr","activeFadeins","margeAnimate","_fadeinWhenCallbackInPromise","promise","Date","now","currentContext","toCurrentContext","time","actStyle","StyleClass","convertInternal","drawMessageInternal","drawIndicatorsInternal","_cellId","BaseColumn_1","BranchGraphStyle_1","getBranchGraphColumnStateId","getAllColumnData","callback","allData","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","j","tl","branch","from","to","branches","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","merge","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","textWidth","measureText","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","clearCache","has","_value","upLineIndexKey","downLineIndexKey","line","pointIndex","sort","arc","PI","utils","_caption","withCaption","textValue","String","active","loadIcons","blur","offsetY","repeatArray","Infinity","_tagName","tagName","_className","className","_content","_iconWidth","iconWidth","isNaN","imgs_1","MAX_LRU_CACHE_SIZE","getImage","url","getCacheOrLoad","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","normalize","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","path","console","warn","split","defaultFotmat","_format","format","withFormat","Intl","NumberFormat","fmt","MARGIN","_min","_max","_formatter","formatter","str","endsWith","rate","barMaxWidth","barTop","barLeft","barSize","argIcon","iconList","toNormalizeArray","MOUSEDOWN_CELL","MOUSEUP_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","RESIZE_COLUMN","hiDPI","NumberMap_1","Scrollable_1","isTouchEvent","getMouseButtons","cancelEvent","createRootElement","KEY_BS","KEY_END","KEY_HOME","KEY_LEFT","KEY_RIGHT","KEY_DEL","KEY_ALPHA_A","KEY_ALPHA_C","KEY_ALPHA_V","_vibrate","navigator","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candidateRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_getCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","cellDrawing","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","put","_storeAutoColWidthExprs","defaultColPxWidth","each","adj","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","setFocusCursor","abs","redrawRect","_onKeyDownMove","ctrlKey","metaKey","hMove","vMove","newCell","_moveFocusCell","selectAllOnCtrlA","vDir","hDir","shiftKeyFlg","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_updatedSelection","focusControl","selCol","selRow","results","editMode","findIndex","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","buttons","resizeCol","_getResizeColAt","columnResizer","cellSelector","hasListeners","doubleTapBefore","longTouchId","useTouch","useTouchStart","timeoutId","useTouchEnd","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","leaveCell","moving","lastMoving","onKeyDown","onScroll","copyRange","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","normalizedValue","normalizePasteValue","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","onBlur","abstractX","abstractY","inPoint","cellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","mousemove","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","afterSize","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_isComposition","_compositionEnd","lastInputValue","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","Edge","isDescendantElement","dummyInput","pasteText","clipboardData","getData","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","removeNames","attr","_inputStatus","nodeName","removeName","inputStatus","Selection","_sel","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","_level","_list","drawing","_rectFilter","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","rectFilter","_getRectInternal","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","protectedKey","initDocument","Scrollable","transform","alpha","NumberMap","cellTextOverflows","cfg","config","scrollHeight","scrollWidth","setScrollSize","getMaxColWidth","maxwidth","getMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","oldEditMode","cellsRect","invalidateTarget","visibleTop","visibleLeft","_range","getCellOverflowText","overflowText","disposable","disposables","_absoluteY","_startRow","_endRow","nextId","listeners","listenerData","listener","addEventListener","removeEventListener","FilterDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","_setFieldCache","fCache","recCache","_rCache","_fCache","getOriginal","getOriginalField","rowCache","setOriginalField","fieldPromiseCallBackInternal","recordPromiseCallBackInternal","isFieldAssessor","UPDATE_LENGTH","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","fieldGet","fieldResult","ss","applyChainSafe","emptyFn","fieldSet","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","hasOriginalField","orderFn","sortPromise","rel","_field","DataSourceIterator","_dataSource","_curIndex","_data","next","_getIndexData","movePrev","nest","FilterData","dc","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","Inline","getWidth","breakWidth","itr","candidateIndex","chars","beforeWidth","charWidth","beforeContent","afterContent","_callback","fillTextRect","genChars","allWidth","candidate","genWords","Inline_1","_draw","_width","_arg","InlineIcon","_icon","letterSpacing","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_height","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","_loadImage","img","drawInlineImageRect","InlinePath2D","path2DManager","Path2D","getPath2D","_path","translate","InlineSvg","InlineImage_1","buildSvgDataUrl","svg","XMLSerializer","serializeToString","getSvgElement","parser","DOMParser","parseFromString","svgElem","elmWidth","getAttribute","elmHeight","numElmWidth","numElmHeight","InlineIcon_1","InlinePath2D_1","InlineSvg_1","drawRegisteredIcon","drawWidth","drawHeight","isIconConstructorOption","isInlineImageConstructorOption","isInlineSvgConstructorOption","registeredIcons","registeredIcon","il","getInternal","symbolManager","pasteUtils","ofCell","CheckHeaderAction","SortHeaderAction","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","SORT","headerAction","headerCell","sortMethod","CHECK_HEADER_STATE_ID","getCheckHeaderStateId","checked","_sort","_executeSort","hasTrueField","fieldRow","inMouse","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdTextBaseStyle_1","StdTextBaseStyle","StdMultilineTextBaseStyle_1","StdMultilineTextBaseStyle","_sortArrowColor","_multiline","multiline","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","inlineCheck","contents","arrowSize","icons_1","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","fire","hasListener","clear","LRUCache","cacheSize","_map","_cacheSize","idx","remKey","shift","indexFirst","arr","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","_right","_bottom","x0","x1","y0","y1","another","rect1","rect2","MAX_SCROLL","heightLimit","_p","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","isNode","requestAnimationFrame","duration","easing","startedAt","easingFn","canceledFlg","createAnim","anim","TYPE_PAREN","TYPE_UNIT","TYPE_OPERATOR","TYPE_NUMBER","NODE_TYPE_UNIT","NODE_TYPE_BINARY_EXPRESSION","NODE_TYPE_NUMBER","TABULATION","CARRIAGE_RETURN","LINE_FEED","FORM_FEED","SPACE","PERCENT","FULL_STOP","DIGIT_0","DIGIT_9","LATIN_CAPITAL_A","LATIN_CAPITAL_Z","LATIN_SMALL_A","LATIN_SMALL_Z","isUpperLetter","cp","isLowerLetter","isLetter","isWhitespace","isDigit","isDot","isUnit","createError","tokenize","exp","tokens","len","charCodeAt","parseSign","parseNum","parseUnit","unit","PRECEDENCE","lex","buildBinaryExpNode","stack","op","nodeType","token","deep","closeIndex","beforeOp","parse","calcStr","calcNode","node","toPxInternal","ast","calcBasePosition","fontSizeCache","fontName","bk","paddingLeft","paddingRight","rgbMap","styleColorToRGB","dummy","position","defaultView","getComputedStyle","styleColor","colorToRGB0","hexToNum","hex","parseInt","createRGB","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","rgb","enableFocus","toNodeList","innerHTML","dom","arg","toNode","inner","disableBeforeTabIndex","previousSibling","nextSibling","loads","_testStr","fontFaceSet","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","getIconProps","ICON_PROP_KEYS","quote","quoted","part","doms","props","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","toSimpleArray","iconProps","workData","isIconKey","loadImage","LRUCache_1","allCache","Image","onload","onerror","getCacheOrLoad0","cacheName","Path2DShim","PathCommandsParser_1","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","roundRect","_y","_w","_h","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands","mag","sqrt","pow","dot","u","clamp","angle","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","PathCommands_1","pathTokens","builder","argsProvider","_commands","buildPush","numArgs","ops","subsequentCommand","fst","log","FontRuler","computeStyle","display","el_","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","activeCallback","inactiveCallback","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","hasWebKitFallbackBug","callbacks","cb","runner","HAS_WEBKIT_FALLBACK_BUG","match","userAgent","parseValues","adjustCell","char","processQuotedCell","pathModule","upsideDown","ud","offsetX","xrate","yrate","path2d","sortArray","createArray","createArrayPromise","plist","setArrayField","compare","old","dummyPromise","catch","getScrollBarWidth","wrapper","wrapperStyle","pointerEvents","wrapperWidth","innerWidth","SCROLLBAR_SIZE","initDocumentInternal","initDocumentVar","global","random","cl","mem","getIgnoreCase","arrayFind","arrayFindIndex","predicate","analyzeUserAgent","Chrome","Firefox","Safari","ua","omits","defs","searchString","subjectString","isFinite","lastIndex","lastIndexOf","re","which","preventDefault","simple_header_layout_1","multi_layout_1","columns","normalizeLayout","seqId","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","_emptyDataCache","EmptyDataCache","hbLayouut","headerField","_body","colDef","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","_f","_g","_j","_k","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","prev","newEmptyColumnData","newEmptyHeaderData","headers","rows","register","getIcons","tools","core","_getInternal","ListGrid_1","get_internal_1","defaultTheme","setDefault","getChoices","themes_1","registers","__importDefault","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","Theme","builtin","defTheme","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","strokeRectLines","positions","preColor","pos1","pos2","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","leftWidth","rightWidth","leftLeftPos","leftTopPos","checkSize","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","BaseTooltip","detachTooltipElement","_tooltipElement","_getTooltipElement","createTooltipElementInternal","attachTooltipElement","tooltipElement","moveTooltipElement","Tooltip","BaseTooltip_1","TooltipElement_1","TooltipElement","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","getTooltipInstanceInfo","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","_isAttachCell","CONTENT_CLASSNAME","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","winWidth","maxWidthForRight"],"mappings":"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","file":"cheetahGrid.es5.js","sourcesContent":["(function(window){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css\":\n/*!**************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/InlineInputElement.css ***!\n  \\**************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css\":\n/*!*************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/InlineMenuElement.css ***!\n  \\*************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css\":\n/*!*******************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/SmallDialogInputElement.css ***!\n  \\*******************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css\":\n/*!****************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/ErrorMessageElement.css ***!\n  \\****************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css\":\n/*!***********************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/MessageElement.css ***!\n  \\***********************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css\":\n/*!******************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/WarningMessageElement.css ***!\n  \\******************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css\":\n/*!**********************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/internal/style.css ***!\n  \\**********************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css\":\n/*!***************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/tooltip/internal/TooltipElement.css ***!\n  \\***************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/runtime/api.js\":\n/*!******************************************************!*\\\n  !*** ../node_modules/css-loader/dist/runtime/api.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}\n\n/***/ }),\n\n/***/ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\":\n/*!*****************************************************************************!*\\\n  !*** ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!\n  \\*****************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : undefined;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n/***/ }),\n\n/***/ \"../node_modules/webpack/buildin/global.js\":\n/*!*************************************************!*\\\n  !*** ../node_modules/webpack/buildin/global.js ***!\n  \\*************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/InlineInputElement.css\":\n/*!****************************************************************!*\\\n  !*** ../src/js/columns/action/internal/InlineInputElement.css ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./InlineInputElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/InlineMenuElement.css\":\n/*!***************************************************************!*\\\n  !*** ../src/js/columns/action/internal/InlineMenuElement.css ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./InlineMenuElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/SmallDialogInputElement.css\":\n/*!*********************************************************************!*\\\n  !*** ../src/js/columns/action/internal/SmallDialogInputElement.css ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./SmallDialogInputElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/ErrorMessageElement.css\":\n/*!******************************************************************!*\\\n  !*** ../src/js/columns/message/internal/ErrorMessageElement.css ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./ErrorMessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/MessageElement.css\":\n/*!*************************************************************!*\\\n  !*** ../src/js/columns/message/internal/MessageElement.css ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./MessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/WarningMessageElement.css\":\n/*!********************************************************************!*\\\n  !*** ../src/js/columns/message/internal/WarningMessageElement.css ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./WarningMessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/internal/style.css\":\n/*!************************************!*\\\n  !*** ../src/js/internal/style.css ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src??ref--5-2!./style.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/tooltip/internal/TooltipElement.css\":\n/*!*****************************************************!*\\\n  !*** ../src/js/tooltip/internal/TooltipElement.css ***!\n  \\*****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src??ref--5-2!./TooltipElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"./GridCanvasHelper.js\":\n/*!*****************************!*\\\n  !*** ./GridCanvasHelper.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GridCanvasHelper = void 0;\n\nconst calc = __importStar(__webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"));\n\nconst canvashelper = __importStar(__webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\"));\n\nconst fonts = __importStar(__webpack_require__(/*! ./internal/fonts */ \"./internal/fonts.js\"));\n\nconst inlineUtils = __importStar(__webpack_require__(/*! ./element/inlines */ \"./element/inlines.js\"));\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nconst canvases_1 = __webpack_require__(/*! ./internal/canvases */ \"./internal/canvases.js\");\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst InlineDrawer_1 = __webpack_require__(/*! ./element/InlineDrawer */ \"./element/InlineDrawer.js\");\n\nconst Rect_1 = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\nconst color_1 = __webpack_require__(/*! ./internal/color */ \"./internal/color.js\");\n\nconst {\n  toBoxArray\n} = utils_1.style;\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\nconst TEXT_OFFSET = 2;\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\n\nfunction invalidateCell(context, grid) {\n  const {\n    col,\n    row\n  } = context;\n  grid.invalidateCell(col, row);\n}\n\nfunction getColor(color, col, row, grid, context) {\n  return (0, utils_1.getOrApply)(color, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getFont(font, col, row, grid, context) {\n  if (font == null) {\n    return undefined;\n  }\n\n  return (0, utils_1.getOrApply)(font, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getThemeColor(grid, ...names) {\n  const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\n\n  if (gridThemeColor == null) {\n    // use default theme\n    return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\n  }\n\n  if (typeof gridThemeColor !== \"function\") {\n    return gridThemeColor;\n  }\n\n  let defaultThemeColor; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  return args => {\n    const color = gridThemeColor(args);\n\n    if (color != null) {\n      // use grid theme\n      return color;\n    } // use default theme\n\n\n    defaultThemeColor = defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\n    return (0, utils_1.getOrApply)(defaultThemeColor, args); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  };\n}\n\nfunction testFontLoad(font, value, context, grid) {\n  if (font) {\n    if (!fonts.check(font, value)) {\n      fonts.load(font, value, () => invalidateCell(context, grid));\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\n  function drawInline(inline, offsetLeft, offsetRight) {\n    if (inline.canDraw()) {\n      ctx.save();\n\n      try {\n        ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n        ctx.font = inline.font() || ctx.font;\n        inline.draw({\n          ctx,\n          canvashelper,\n          rect,\n          offset,\n          offsetLeft,\n          offsetRight,\n          offsetTop,\n          offsetBottom\n        });\n      } finally {\n        ctx.restore();\n      }\n    } else {\n      inline.onReady(() => grid.invalidateCell(col, row)); //noop\n    }\n  }\n\n  if (inlines.length === 1) {\n    //1\n    const inline = inlines[0];\n    drawInline(inline, 0, 0);\n  } else {\n    const inlineWidths = inlines.map(inline => (inline.width({\n      ctx\n    }) || 0) - 0);\n    let offsetRight = inlineWidths.reduce((a, b) => a + b);\n    let offsetLeft = 0;\n    inlines.forEach((inline, index) => {\n      const inlineWidth = inlineWidths[index];\n      offsetRight -= inlineWidth;\n      drawInline(inline, offsetLeft, offsetRight);\n      offsetLeft += inlineWidth;\n    });\n  }\n}\n\nfunction buildInlines(icons, inline) {\n  return inlineUtils.buildInlines(icons, inline || \"\");\n}\n\nfunction inlineToString(inline) {\n  return inlineUtils.string(inline);\n}\n\nfunction getOverflowInline(textOverflow) {\n  if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\n    return INLINE_ELLIPSIS;\n  }\n\n  textOverflow = textOverflow.trim();\n\n  if (textOverflow.length === 1) {\n    return inlineUtils.of(textOverflow[0]);\n  }\n\n  return INLINE_ELLIPSIS;\n}\n\nfunction isAllowOverflow(textOverflow) {\n  return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\n}\n\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\n  const maxWidth = width - 3;\n  /*buffer*/\n\n  let lineWidth = 0;\n\n  for (let i = 0; i < inlines.length; i++) {\n    const inline = inlines[i];\n    const inlineWidth = (inline.width({\n      ctx\n    }) || 0) - 0;\n\n    if (lineWidth + inlineWidth > maxWidth) {\n      return {\n        index: i,\n        lineWidth,\n        remWidth: maxWidth - lineWidth\n      };\n    }\n\n    lineWidth += inlineWidth;\n  }\n\n  return null;\n}\n\nfunction isOverflowInlines(ctx, inlines, width) {\n  return !!getOverflowInlinesIndex(ctx, inlines, width);\n}\n\nfunction breakWidthInlines(ctx, inlines, width) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      beforeInlines: inlines,\n      overflow: false,\n      afterInlines: []\n    };\n  }\n\n  const {\n    index,\n    remWidth\n  } = indexData;\n  const inline = inlines[index];\n  const beforeInlines = inlines.slice(0, index);\n  const afterInlines = [];\n\n  if (inline.canBreak()) {\n    let {\n      before,\n      after\n    } = inline.breakWord(ctx, remWidth);\n\n    if (!before && !beforeInlines.length) {\n      ({\n        before,\n        after\n      } = inline.breakAll(ctx, remWidth));\n    }\n\n    if (!before && !beforeInlines.length) {\n      // Always return one char\n      ({\n        before,\n        after\n      } = inline.splitIndex(1));\n    }\n\n    if (before) {\n      beforeInlines.push(before);\n    }\n\n    if (after) {\n      afterInlines.push(after);\n    }\n\n    afterInlines.push(...inlines.slice(index + 1));\n  } else {\n    if (!beforeInlines.length) {\n      // Always return one char\n      beforeInlines.push(inline);\n    }\n\n    afterInlines.push(...inlines.slice(beforeInlines.length));\n  }\n\n  return {\n    beforeInlines,\n    overflow: true,\n    afterInlines\n  };\n}\n\nfunction truncateInlines(ctx, inlines, width, option) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      inlines,\n      overflow: false\n    };\n  }\n\n  const {\n    index,\n    lineWidth\n  } = indexData;\n  const inline = inlines[index];\n  const overflowInline = getOverflowInline(option);\n  const ellipsisWidth = overflowInline.width({\n    ctx\n  });\n  const remWidth = width - lineWidth - ellipsisWidth;\n  const result = inlines.slice(0, index);\n\n  if (inline.canBreak()) {\n    const {\n      before\n    } = inline.breakAll(ctx, remWidth);\n\n    if (before) {\n      result.push(before);\n    }\n  }\n\n  result.push(overflowInline);\n  return {\n    inlines: result,\n    overflow: true\n  };\n}\n\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  textOverflow,\n  icons,\n  trailingIcon\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n  let inlines = buildInlines(icons, inline);\n  const trailingIconInline = trailingIcon ? inlineUtils.iconOf(trailingIcon) : null;\n  let inlineDrawRect = drawRect;\n  let {\n    width\n  } = drawRect;\n  let trailingIconWidth = 0;\n\n  if (trailingIconInline) {\n    trailingIconWidth = trailingIconInline.width({\n      ctx\n    });\n    width -= trailingIconWidth;\n    inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\n  }\n\n  if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\n    const {\n      inlines: truncInlines,\n      overflow\n    } = truncateInlines(ctx, inlines, width, textOverflow);\n    inlines = truncInlines;\n    grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\n  } else {\n    grid.setCellOverflowText(col, row, false);\n  }\n\n  drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\n\n  if (trailingIconInline) {\n    // Draw trailing icon\n    let sumWidth = 0;\n    inlines.forEach(inline => {\n      sumWidth += inline.width({\n        ctx\n      });\n    });\n    const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n    const trailingIconRect = baseRect.copy();\n\n    if (width < sumWidth) {\n      trailingIconRect.left = trailingIconRect.right - trailingIconWidth - offset;\n    } else {\n      trailingIconRect.left += sumWidth;\n    }\n\n    trailingIconRect.right = baseRect.right;\n    drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\n  }\n} // eslint-disable-next-line complexity\n\n\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  lineHeight,\n  autoWrapText,\n  lineClamp,\n  textOverflow,\n  icons,\n  trailingIcon\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n\n  if (lineClamp === \"auto\") {\n    const rectHeight = drawRect.height - offset * 2 - 2;\n    /*offset added by Inline#draw*/\n\n    lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\n  }\n\n  const trailingIconInline = trailingIcon ? inlineUtils.iconOf(trailingIcon) : null;\n  let {\n    width\n  } = drawRect;\n  let trailingIconWidth = 0;\n\n  if (trailingIconInline) {\n    trailingIconWidth = trailingIconInline.width({\n      ctx\n    });\n    width -= trailingIconWidth;\n  }\n\n  let buildedMultiInlines;\n\n  if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\n    buildedMultiInlines = [];\n    const procLineClamp = lineClamp > 0 ? (inlines, hasNext) => {\n      if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\n        if (inlines.length === 0 && hasNext) {\n          buildedMultiInlines.push([getOverflowInline(textOverflow)]);\n          grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n        } else {\n          const {\n            inlines: truncInlines,\n            overflow\n          } = truncateInlines(ctx, inlines, width, textOverflow);\n          buildedMultiInlines.push(hasNext && !overflow ? truncInlines.concat([getOverflowInline(textOverflow)]) : truncInlines);\n\n          if (overflow || hasNext) {\n            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n          }\n        }\n\n        return false;\n      }\n\n      return true;\n    } : () => true;\n    const procLine = autoWrapText ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      while (inlines.length) {\n        if (!procLineClamp(inlines, hasNext)) {\n          return false;\n        }\n\n        const {\n          beforeInlines,\n          afterInlines\n        } = breakWidthInlines(ctx, inlines, width);\n        buildedMultiInlines.push(beforeInlines);\n        inlines = afterInlines;\n      }\n\n      return true;\n    } : isAllowOverflow(textOverflow) ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      const {\n        inlines: truncInlines,\n        overflow\n      } = truncateInlines(ctx, inlines, width, textOverflow);\n      buildedMultiInlines.push(truncInlines);\n\n      if (overflow) {\n        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n      }\n\n      return true;\n    } : (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      buildedMultiInlines.push(inlines);\n      return true;\n    };\n    grid.setCellOverflowText(col, row, false);\n\n    for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\n      const inline = multiInlines[lineRow];\n      const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\n\n      if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\n        break;\n      }\n    }\n  } else {\n    grid.setCellOverflowText(col, row, false);\n    buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\n  }\n\n  let paddingTop = 0;\n  let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\n\n  if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\n    const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop += pad;\n    paddingBottom -= pad;\n  } else if (ctx.textBaseline === \"bottom\" || ctx.textBaseline === \"alphabetic\" || ctx.textBaseline === \"ideographic\") {\n    const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop -= pad;\n    paddingBottom += pad;\n  }\n\n  buildedMultiInlines.forEach(buildedInline => {\n    drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\n    paddingTop += lineHeight;\n    paddingBottom -= lineHeight;\n  });\n\n  if (trailingIconInline) {\n    // Draw trailing icon\n    let maxWidth = 0;\n    buildedMultiInlines.forEach(buildedInline => {\n      let sumWidth = 0;\n      buildedInline.forEach(inline => {\n        sumWidth += inline.width({\n          ctx\n        });\n      });\n      maxWidth = Math.max(maxWidth, sumWidth);\n    });\n    const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n    const trailingIconRect = baseRect.copy();\n\n    if (width < maxWidth) {\n      trailingIconRect.left = trailingIconRect.right - trailingIconWidth - offset;\n    } else {\n      trailingIconRect.left += maxWidth;\n    }\n\n    trailingIconRect.right = baseRect.right;\n    drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\n  }\n}\n\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\n  const startColorRGB = (0, color_1.colorToRGB)(startColor);\n  const endColorRGB = (0, color_1.colorToRGB)(endColor);\n\n  const getRGB = colorName => {\n    const start = startColorRGB[colorName];\n    const end = endColorRGB[colorName];\n\n    if (elapsedTime >= 1) {\n      return end;\n    }\n\n    if (elapsedTime <= 0) {\n      return start;\n    }\n\n    const diff = start - end;\n    return Math.ceil(start - diff * elapsedTime);\n  };\n\n  return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\n}\n\nfunction drawCheckbox(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  uncheckBgColor = helper.theme.checkbox.uncheckBgColor,\n  checkBgColor = helper.theme.checkbox.checkBgColor,\n  borderColor = helper.theme.checkbox.borderColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureCheckbox(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  borderColor = helper.getColor(borderColor, col, row, ctx);\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    uncheckBgColor = check ? uncheckBgColor : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n    checkBgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : checkBgColor;\n  }\n\n  canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n    uncheckBgColor,\n    checkBgColor,\n    borderColor\n  });\n}\n\nfunction drawRadioButton(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  checkColor = helper.theme.radioButton.checkColor,\n  uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor,\n  checkBorderColor = helper.theme.radioButton.checkBorderColor,\n  uncheckBgColor = helper.theme.radioButton.uncheckBgColor,\n  checkBgColor = helper.theme.radioButton.checkBgColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureRadioButton(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  checkColor = helper.getColor(checkColor, col, row, ctx);\n  uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\n  checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  let borderColor = check ? checkBorderColor : uncheckBorderColor;\n  let bgColor = check ? checkBgColor : uncheckBgColor;\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    borderColor = check ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime) : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\n    bgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n  }\n\n  canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\n    checkColor,\n    borderColor,\n    bgColor\n  });\n}\n\nclass ThemeResolver {\n  constructor(grid) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this._messages = null;\n    this._indicators = null;\n    this._grid = grid;\n  }\n\n  getThemeColor(...name) {\n    return getThemeColor(this._grid, ...name);\n  }\n\n  get font() {\n    return getThemeColor(this._grid, \"font\");\n  }\n\n  get underlayBackgroundColor() {\n    return getThemeColor(this._grid, \"underlayBackgroundColor\");\n  } // color\n\n\n  get color() {\n    return getThemeColor(this._grid, \"color\");\n  }\n\n  get frozenRowsColor() {\n    return getThemeColor(this._grid, \"frozenRowsColor\");\n  } // background\n\n\n  get defaultBgColor() {\n    return getThemeColor(this._grid, \"defaultBgColor\");\n  }\n\n  get frozenRowsBgColor() {\n    return getThemeColor(this._grid, \"frozenRowsBgColor\");\n  }\n\n  get selectionBgColor() {\n    return getThemeColor(this._grid, \"selectionBgColor\");\n  }\n\n  get highlightBgColor() {\n    return getThemeColor(this._grid, \"highlightBgColor\");\n  } // border\n\n\n  get borderColor() {\n    return getThemeColor(this._grid, \"borderColor\");\n  }\n\n  get frozenRowsBorderColor() {\n    return getThemeColor(this._grid, \"frozenRowsBorderColor\");\n  }\n\n  get highlightBorderColor() {\n    return getThemeColor(this._grid, \"highlightBorderColor\");\n  }\n\n  get checkbox() {\n    const grid = this._grid;\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getCheckboxProp(\"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getCheckboxProp(\"checkBgColor\");\n      },\n\n      get borderColor() {\n        return getCheckboxProp(\"borderColor\");\n      }\n\n    });\n\n    function getCheckboxProp(prop) {\n      return getThemeColor(grid, \"checkbox\", prop);\n    }\n  }\n\n  get radioButton() {\n    const grid = this._grid;\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getRadioButtonProp(\"checkColor\");\n      },\n\n      get uncheckBorderColor() {\n        return getRadioButtonProp(\"uncheckBorderColor\");\n      },\n\n      get checkBorderColor() {\n        return getRadioButtonProp(\"checkBorderColor\");\n      },\n\n      get uncheckBgColor() {\n        return getRadioButtonProp(\"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getRadioButtonProp(\"checkBgColor\");\n      }\n\n    });\n\n    function getRadioButtonProp(prop) {\n      return getThemeColor(grid, \"radioButton\", prop);\n    }\n  }\n\n  get button() {\n    const grid = this._grid;\n    return this._button || (this._button = {\n      get color() {\n        return getButtonProp(\"color\");\n      },\n\n      get bgColor() {\n        return getButtonProp(\"bgColor\");\n      }\n\n    });\n\n    function getButtonProp(prop) {\n      return getThemeColor(grid, \"button\", prop);\n    }\n  }\n\n  get header() {\n    const grid = this._grid;\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getThemeColor(grid, \"header\", \"sortArrowColor\");\n      }\n\n    });\n  }\n\n  get messages() {\n    const grid = this._grid;\n    return this._messages || (this._messages = {\n      get infoBgColor() {\n        return getMessageProp(\"infoBgColor\");\n      },\n\n      get errorBgColor() {\n        return getMessageProp(\"errorBgColor\");\n      },\n\n      get warnBgColor() {\n        return getMessageProp(\"warnBgColor\");\n      },\n\n      get boxWidth() {\n        return getMessageProp(\"boxWidth\");\n      },\n\n      get markHeight() {\n        return getMessageProp(\"markHeight\");\n      }\n\n    });\n\n    function getMessageProp(prop) {\n      return getThemeColor(grid, \"messages\", prop);\n    }\n  }\n\n  get indicators() {\n    const grid = this._grid;\n    return this._indicators || (this._indicators = {\n      get topLeftColor() {\n        return getIndicatorsProp(\"topLeftColor\");\n      },\n\n      get topLeftSize() {\n        return getIndicatorsProp(\"topLeftSize\");\n      },\n\n      get topRightColor() {\n        return getIndicatorsProp(\"topRightColor\");\n      },\n\n      get topRightSize() {\n        return getIndicatorsProp(\"topRightSize\");\n      },\n\n      get bottomRightColor() {\n        return getIndicatorsProp(\"bottomRightColor\");\n      },\n\n      get bottomRightSize() {\n        return getIndicatorsProp(\"bottomRightSize\");\n      },\n\n      get bottomLeftColor() {\n        return getIndicatorsProp(\"bottomLeftColor\");\n      },\n\n      get bottomLeftSize() {\n        return getIndicatorsProp(\"bottomLeftSize\");\n      }\n\n    });\n\n    function getIndicatorsProp(prop) {\n      return getThemeColor(grid, \"indicators\", prop);\n    }\n  }\n\n}\n\nfunction strokeRect(ctx, color, left, top, width, height) {\n  if (!Array.isArray(color)) {\n    if (color) {\n      ctx.strokeStyle = color;\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    const borderColors = toBoxArray(color);\n    canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n  }\n}\n\nclass GridCanvasHelper {\n  constructor(grid) {\n    this._grid = grid;\n    this._theme = new ThemeResolver(grid);\n  }\n\n  createCalculator(context, font) {\n    return {\n      calcWidth(width) {\n        return calc.toPx(width, {\n          get full() {\n            const rect = context.getRect();\n            return rect.width;\n          },\n\n          get em() {\n            return (0, canvases_1.getFontSize)(context.getContext(), font).width;\n          }\n\n        });\n      },\n\n      calcHeight(height) {\n        return calc.toPx(height, {\n          get full() {\n            const rect = context.getRect();\n            return rect.height;\n          },\n\n          get em() {\n            return (0, canvases_1.getFontSize)(context.getContext(), font).height;\n          }\n\n        });\n      }\n\n    };\n  }\n\n  getColor(color, col, row, ctx) {\n    return getColor(color, col, row, this._grid, ctx);\n  }\n\n  toBoxArray(obj) {\n    return toBoxArray(obj);\n  }\n\n  toBoxPixelArray(value, context, font) {\n    if (typeof value === \"string\" || Array.isArray(value)) {\n      const calculator = this.createCalculator(context, font);\n      const box = toBoxArray(value);\n      return [calculator.calcHeight(box[0]), calculator.calcWidth(box[1]), calculator.calcHeight(box[2]), calculator.calcWidth(box[3])];\n    }\n\n    return toBoxArray(value);\n  }\n\n  get theme() {\n    return this._theme;\n  }\n\n  drawWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height); //clip\n\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  drawBorderWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const rect = context.getRect();\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      //clip\n      ctx.beginPath();\n      let clipLeft = drawRect.left;\n      let clipWidth = drawRect.width;\n\n      if (drawRect.left === rect.left) {\n        clipLeft += -1;\n        clipWidth += 1;\n      }\n\n      let clipTop = drawRect.top;\n      let clipHeight = drawRect.height;\n\n      if (drawRect.top === rect.top) {\n        clipTop += -1;\n        clipHeight += 1;\n      }\n\n      ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  text(text, context, {\n    padding,\n    offset = TEXT_OFFSET,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    textOverflow = \"clip\",\n    icons,\n    trailingIcon\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      _inlineRect(this._grid, ctx, text, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons,\n        trailingIcon\n      });\n    });\n  }\n\n  multilineText(multilines, context, {\n    padding,\n    offset = TEXT_OFFSET,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    lineHeight = \"1em\",\n    autoWrapText = false,\n    lineClamp = 0,\n    textOverflow = \"clip\",\n    icons,\n    trailingIcon\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      const calculator = this.createCalculator(context, font);\n      lineHeight = calculator.calcHeight(lineHeight);\n\n      _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons,\n        trailingIcon\n      });\n    });\n  }\n\n  fillText(text, x, y, context, {\n    color,\n    textAlign = \"left\",\n    textBaseline = \"top\",\n    font\n  } = {}) {\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\n      ctx.textAlign = textAlign;\n      ctx.textBaseline = textBaseline;\n      ctx.font = font || ctx.font;\n      ctx.fillText(text, x, y);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillCell(context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    });\n  }\n\n  fillCellWithState(context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillCell(context, option);\n  }\n\n  fillRect(rect, context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillRectWithState(rect, context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillRect(rect, context, option);\n  }\n\n  getFillColorState(context, option = {}) {\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\n      return this.theme.selectionBgColor;\n    }\n\n    if (option.fillColor) {\n      return option.fillColor;\n    }\n\n    if ((0, utils_1.cellEquals)(sel.select, context)) {\n      return this.theme.highlightBgColor;\n    }\n\n    const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      return this.theme.frozenRowsBgColor;\n    }\n\n    return this.theme.defaultBgColor;\n  }\n\n  border(context, {\n    borderColor = this.theme.borderColor,\n    lineWidth = 1\n  } = {}) {\n    const rect = context.getRect();\n    this.drawBorderWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      const borderColors = getColor(borderColor, col, row, this._grid, ctx);\n\n      if (lineWidth === 1) {\n        ctx.lineWidth = 1;\n        strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n      } else if (lineWidth === 2) {\n        ctx.lineWidth = 2;\n        strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n      } else {\n        ctx.lineWidth = lineWidth;\n        const startOffset = lineWidth / 2 - 1;\n        strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n      }\n    });\n  } // Unused in main\n\n\n  borderWithState(context, option = {}) {\n    const rect = context.getRect();\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context; //\n\n    if ((0, utils_1.cellEquals)(sel.select, context)) {\n      option.borderColor = this.theme.highlightBorderColor;\n      option.lineWidth = 2;\n      this.border(context, option);\n    } else {\n      // header color\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n        option.borderColor = this.theme.frozenRowsBorderColor;\n      }\n\n      option.lineWidth = 1;\n      this.border(context, option); //\n\n      const sel = this._grid.selection.select;\n\n      if (sel.col + 1 === col && sel.row === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        });\n      } else if (sel.col === col && sel.row + 1 === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        });\n      }\n    }\n  }\n\n  buildCheckBoxInline(check, context, option = {}) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    const ctx = context.getContext();\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\n    return new InlineDrawer_1.InlineDrawer({\n      draw,\n      width: boxWidth + 3,\n      height: boxWidth + 1,\n      color: undefined\n    });\n\n    function draw({\n      ctx,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    }) {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, rect, col, row, check, self, option, {\n        offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\n        padding: {\n          left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\n          right: offsetRight,\n          top: offsetTop,\n          bottom: offsetBottom\n        }\n      });\n    }\n  }\n\n  checkbox(check, context, {\n    animElapsedTime,\n    offset = CHECKBOX_OFFSET,\n    uncheckBgColor,\n    checkBgColor,\n    borderColor,\n    textAlign,\n    textBaseline\n  } = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, context.getRect(), col, row, check, this, {\n        animElapsedTime,\n        uncheckBgColor,\n        checkBgColor,\n        borderColor,\n        textAlign,\n        textBaseline\n      }, {\n        offset,\n        padding: {\n          left: CHECKBOX_OFFSET - TEXT_OFFSET\n        }\n      });\n    });\n  }\n\n  radioButton(check, context, {\n    animElapsedTime,\n    offset = CHECKBOX_OFFSET,\n    checkColor,\n    uncheckBorderColor,\n    checkBorderColor,\n    uncheckBgColor,\n    checkBgColor,\n    textAlign,\n    textBaseline\n  } = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawRadioButton(ctx, context.getRect(), col, row, check, this, {\n        animElapsedTime,\n        checkColor,\n        uncheckBorderColor,\n        checkBorderColor,\n        uncheckBgColor,\n        checkBgColor,\n        textAlign,\n        textBaseline\n      }, {\n        offset,\n        padding: {\n          left: CHECKBOX_OFFSET - TEXT_OFFSET\n        }\n      });\n    });\n  }\n\n  button(caption, context, {\n    bgColor = this.theme.button.bgColor,\n    padding,\n    offset = TEXT_OFFSET,\n    color = this.theme.button.color,\n    textAlign = \"center\",\n    textBaseline = \"middle\",\n    shadow,\n    font,\n    textOverflow = \"clip\",\n    icons\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      const {\n        col,\n        row\n      } = context;\n      const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\n      const left = rect.left + paddingNums[3];\n      const top = rect.top + paddingNums[0];\n      const width = rect.width - paddingNums[1] - paddingNums[3];\n      const height = rect.height - paddingNums[0] - paddingNums[2];\n      bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\n      canvashelper.drawButton(ctx, left, top, width, height, {\n        bgColor,\n        radius: rect.height / 8,\n        // offset,\n        shadow\n      });\n\n      _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n  testFontLoad(font, value, context) {\n    return testFontLoad(font, value, context, this._grid);\n  }\n\n}\n\nexports.GridCanvasHelper = GridCanvasHelper;\n\n/***/ }),\n\n/***/ \"./ListGrid.js\":\n/*!*********************!*\\\n  !*** ./ListGrid.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ListGrid = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ./internal/icons */ \"./internal/icons.js\"));\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nconst data_1 = __webpack_require__(/*! ./data */ \"./data.js\");\n\nconst layout_map_1 = __webpack_require__(/*! ./list-grid/layout-map */ \"./list-grid/layout-map/index.js\");\n\nconst MessageHandler_1 = __webpack_require__(/*! ./columns/message/MessageHandler */ \"./columns/message/MessageHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst style_1 = __webpack_require__(/*! ./columns/style */ \"./columns/style.js\");\n\nconst DrawGrid_1 = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\nconst GridCanvasHelper_1 = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\nconst style_2 = __webpack_require__(/*! ./header/style */ \"./header/style.js\");\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ./list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst Rect_1 = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\nconst TooltipHandler_1 = __webpack_require__(/*! ./tooltip/TooltipHandler */ \"./tooltip/TooltipHandler.js\"); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst paste_utils_1 = __webpack_require__(/*! ./internal/paste-utils */ \"./internal/paste-utils.js\");\n/** @private */\n\n\nconst _ = (0, symbolManager_1.getProtectedSymbol)(); //private methods\n\n/** @private */\n\n\nfunction _getCellRange(grid, col, row) {\n  return grid[_].layoutMap.getCellRange(col, row);\n}\n/** @private */\n\n\nfunction _updateRect(grid, col, row, context) {\n  context.setRectFilter(rect => {\n    let {\n      left,\n      right,\n      top,\n      bottom\n    } = rect;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = _getCellRange(grid, col, row);\n\n    for (let c = col - 1; c >= startCol; c--) {\n      left -= grid.getColWidth(c);\n    }\n\n    for (let c = col + 1; c <= endCol; c++) {\n      right += grid.getColWidth(c);\n    }\n\n    for (let r = row - 1; r >= startRow; r--) {\n      top -= grid.getRowHeight(r);\n    }\n\n    for (let r = row + 1; r <= endRow; r++) {\n      bottom += grid.getRowHeight(r);\n    }\n\n    return Rect_1.Rect.bounds(left, top, right, bottom);\n  });\n}\n/** @private */\n\n\nfunction _getCellValue(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    const {\n      caption\n    } = grid[_].layoutMap.getHeader(col, row);\n\n    return typeof caption === \"function\" ? caption() : caption;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    return _getField(grid, field, row);\n  }\n}\n/** @private */\n\n\nfunction _setCellValue(grid, col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    // nop\n    return false;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (field == null) {\n      return false;\n    }\n\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.setField(index, field, value);\n  }\n}\n/** @private */\n\n\nfunction _getCellMessage(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const {\n      message\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (!message) {\n      return null;\n    }\n\n    if (!Array.isArray(message)) {\n      return _getField(grid, message, row);\n    }\n\n    const promises = [];\n\n    for (let index = 0; index < message.length; index++) {\n      const msg = _getField(grid, message[index], row);\n\n      if ((0, utils_1.isPromise)(msg)) {\n        promises.push(msg);\n      } else if ((0, MessageHandler_1.hasMessage)(msg)) {\n        return msg;\n      }\n    }\n\n    if (!promises.length) {\n      return null;\n    }\n\n    return new Promise((resolve, reject) => {\n      promises.forEach(p => {\n        p.then(msg => {\n          if ((0, MessageHandler_1.hasMessage)(msg)) {\n            resolve(msg);\n          }\n        }, reject);\n      });\n    });\n  }\n}\n\nfunction _getCellIcon0(grid, icon, row) {\n  if (Array.isArray(icon)) {\n    return icon.map(i => _getCellIcon0(grid, i, row));\n  }\n\n  if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\n    return _getField(grid, icon, row);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  const retIcon = {}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  const iconOpt = icon;\n  icons.iconPropKeys.forEach(k => {\n    if (iconOpt[k]) {\n      const f = _getField(grid, iconOpt[k], row);\n\n      if (f != null) {\n        retIcon[k] = f;\n      } else {\n        if (!_hasField(grid, iconOpt[k], row)) {\n          retIcon[k] = iconOpt[k];\n        }\n      }\n    }\n  });\n  return retIcon;\n}\n/** @private */\n\n\nfunction _getCellIcon(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    const {\n      headerIcon\n    } = grid[_].layoutMap.getHeader(col, row);\n\n    if (headerIcon == null) {\n      return null;\n    }\n\n    return headerIcon;\n  } else {\n    const {\n      icon\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (icon == null) {\n      return null;\n    }\n\n    return _getCellIcon0(grid, icon, row);\n  }\n}\n/** @private */\n\n\nfunction _getField(grid, field, row) {\n  if (field == null) {\n    return null;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.getField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _hasField(grid, field, row) {\n  if (field == null) {\n    return false;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return false;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.hasField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _onDrawValue(grid, cellValue, context, {\n  col,\n  row\n}, style, draw) {\n  const helper = grid[_].gridCanvasHelper;\n\n  const drawCellBg = ({\n    bgColor\n  } = {}) => {\n    const fillOpt = {\n      fillColor: bgColor\n    }; //cell\n\n    helper.fillCellWithState(context, fillOpt);\n  };\n\n  const drawCellBorder = () => {\n    if (context.col === grid.frozenColCount - 1) {\n      //\n      const rect = context.getRect();\n      helper.drawWithClip(context, ctx => {\n        const borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor : helper.theme.frozenRowsBorderColor;\n        const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.right - 2.5, rect.top);\n          ctx.lineTo(rect.right - 2.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    }\n\n    _borderWithState(grid, helper, context);\n  };\n\n  const drawCellBase = ({\n    bgColor\n  } = {}) => {\n    drawCellBg({\n      bgColor\n    });\n    drawCellBorder();\n  };\n\n  const info = {\n    getRecord: () => grid.getRowRecord(row),\n    getIcon: () => _getCellIcon(grid, col, row),\n    getMessage: () => _getCellMessage(grid, col, row),\n    messageHandler: grid[_].messageHandler,\n    style,\n    drawCellBase,\n    drawCellBg,\n    drawCellBorder\n  };\n  return draw(cellValue, info, context, grid);\n}\n/** @private */\n\n\nfunction _borderWithState(grid, helper, context) {\n  const {\n    col,\n    row\n  } = context;\n  const sel = grid.selection.select;\n  const {\n    layoutMap\n  } = grid[_];\n  const rect = context.getRect();\n  const option = {};\n  const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\n  const selId = layoutMap.getCellId(sel.col, sel.row);\n\n  function isSelectCell(col, row) {\n    if (col === sel.col && row === sel.row) {\n      return true;\n    }\n\n    return selId != null && layoutMap.getCellId(col, row) === selId && layoutMap.getRecordIndexByRow(row) === selRecordIndex;\n  } //\n\n\n  if (isSelectCell(col, row)) {\n    option.borderColor = helper.theme.highlightBorderColor;\n    option.lineWidth = 2;\n    helper.border(context, option);\n  } else {\n    option.lineWidth = 1; // header color\n\n    const isFrozenCell = grid.isFrozenCell(col, row);\n\n    if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n      option.borderColor = helper.theme.frozenRowsBorderColor;\n    }\n\n    helper.border(context, option); //\n\n    if (col > 0 && isSelectCell(col - 1, row)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    } else if (row > 0 && isSelectCell(col, row - 1)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[0]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0];\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        }\n      });\n    }\n  }\n}\n/** @private */\n\n\nfunction _refreshHeader(grid) {\n  var _b;\n\n  const protectedSpace = grid[_];\n\n  if (protectedSpace.headerEvents) {\n    protectedSpace.headerEvents.forEach(id => grid.unlisten(id));\n  }\n\n  const headerEvents = grid[_].headerEvents = [];\n  headerEvents.forEach(id => grid.unlisten(id));\n  let layoutMap;\n\n  if (protectedSpace.layout && (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\n  } else {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\n  }\n\n  layoutMap.headerObjects.forEach(cell => {\n    const ids = cell.headerType.bindGridEvent(grid, cell.id);\n    headerEvents.push(...ids);\n\n    if (cell.style) {\n      if (cell.style instanceof style_2.BaseStyle) {\n        const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n\n    if (cell.action) {\n      const ids = cell.action.bindGridEvent(grid, cell.id);\n      headerEvents.push(...ids);\n    }\n  });\n  layoutMap.columnObjects.forEach(col => {\n    if (col.action) {\n      const ids = col.action.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.columnType) {\n      const ids = col.columnType.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.style) {\n      if (col.style instanceof style_1.BaseStyle) {\n        const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n  });\n\n  for (let col = 0; col < layoutMap.columnWidths.length; col++) {\n    const column = layoutMap.columnWidths[col];\n    const {\n      width,\n      minWidth,\n      maxWidth\n    } = column;\n\n    if (width && (typeof width === \"string\" || width > 0)) {\n      grid.setColWidth(col, width);\n    } else {\n      grid.setColWidth(col, null);\n    }\n\n    if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\n      grid.setMinColWidth(col, minWidth);\n    } else {\n      grid.setMinColWidth(col, null);\n    }\n\n    if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\n      grid.setMaxColWidth(col, maxWidth);\n    } else {\n      grid.setMaxColWidth(col, null);\n    }\n  }\n\n  const {\n    headerRowHeight\n  } = grid[_];\n\n  for (let row = 0; row < layoutMap.headerRowCount; row++) {\n    const height = Array.isArray(headerRowHeight) ? headerRowHeight[row] : headerRowHeight;\n\n    if (height && height > 0) {\n      grid.setRowHeight(row, height);\n    } else {\n      grid.setRowHeight(row, null);\n    }\n  }\n\n  grid.colCount = layoutMap.colCount;\n\n  _refreshRowCount(grid);\n\n  grid.frozenRowCount = layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _refreshRowCount(grid) {\n  const {\n    layoutMap\n  } = grid[_];\n  grid.rowCount = grid[_].dataSource.length * layoutMap.bodyRowCount + layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _tryWithUpdateDataSource(grid, fn) {\n  const {\n    dataSourceEventIds\n  } = grid[_];\n\n  if (dataSourceEventIds) {\n    dataSourceEventIds.forEach(id => grid[_].handler.off(id));\n  }\n\n  fn(grid);\n  grid[_].dataSourceEventIds = [grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n    _refreshRowCount(grid);\n\n    grid.invalidate();\n  }), grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n    grid.invalidate();\n  })];\n}\n/** @private */\n\n\nfunction _setRecords(grid, records = []) {\n  _tryWithUpdateDataSource(grid, () => {\n    grid[_].records = records;\n    const newDataSource = grid[_].dataSource = data_1.CachedDataSource.ofArray(records);\n    grid.addDisposable(newDataSource);\n  });\n}\n/** @private */\n\n\nfunction _setDataSource(grid, dataSource) {\n  _tryWithUpdateDataSource(grid, () => {\n    if (dataSource) {\n      if (dataSource instanceof data_1.DataSource) {\n        grid[_].dataSource = dataSource;\n      } else {\n        const newDataSource = grid[_].dataSource = new data_1.CachedDataSource(dataSource);\n        grid.addDisposable(newDataSource);\n      }\n    } else {\n      grid[_].dataSource = data_1.DataSource.EMPTY;\n    }\n\n    grid[_].records = null;\n  });\n}\n/** @private */\n\n\nfunction _getRecordIndexByRow(grid, row) {\n  const {\n    layoutMap\n  } = grid[_];\n  return layoutMap.getRecordIndexByRow(row);\n}\n/** @private */\n\n\nfunction _onRangePaste(text, test = () => true) {\n  var _b;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\n    trimOnPaste: this.trimOnPaste\n  });\n  const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\n  const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let rejectedDetail = [];\n\n  const addRejectedDetail = (cell, record, define, pasteValue) => {\n    rejectedDetail.push({\n      col: cell.col,\n      row: cell.row,\n      record,\n      define,\n      pasteValue\n    });\n  };\n\n  let timeout = null;\n\n  const processRejected = () => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      if (rejectedDetail.length > 0) {\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\n          detail: rejectedDetail\n        });\n        rejectedDetail = [];\n      }\n    }, 100);\n  };\n\n  let reject = addRejectedDetail;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n  let valuesRow = 0;\n\n  for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\n    let valuesCol = 0;\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const {\n        action,\n        id,\n        define\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        const cellValue = values.getCellValue(valuesCol, valuesRow);\n        (0, utils_1.then)(this.getRowRecord(row), record => {\n          (0, utils_1.then)(_getCellValue(this, col, row), oldValue => {\n            if (test({\n              grid: this,\n              record: record,\n              col,\n              row,\n              value: cellValue,\n              oldValue\n            })) {\n              action.onPasteCellRangeBox(this, {\n                col,\n                row\n              }, cellValue, {\n                reject() {\n                  reject({\n                    col,\n                    row\n                  }, record, define, cellValue);\n                }\n\n              });\n            }\n          });\n        });\n      }\n\n      valuesCol++;\n\n      if (valuesCol >= values.colCount) {\n        valuesCol = 0;\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n\n    valuesRow++;\n\n    if (valuesRow >= values.rowCount) {\n      valuesRow = 0;\n    }\n  }\n\n  const newEnd = {\n    col: start.col + pasteColCount - 1,\n    row: start.row + pasteRowCount - 1\n  };\n  this.selection.range = {\n    start,\n    end: newEnd\n  };\n  this.invalidateCellRange(this.selection.range);\n  processRejected();\n\n  reject = (cell, record, define, pasteValue) => {\n    addRejectedDetail(cell, record, define, pasteValue);\n    processRejected();\n  };\n}\n/** @private */\n\n\nfunction _onRangeDelete() {\n  var _b;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\n  const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n\n  for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const {\n        action,\n        id\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        (0, utils_1.then)(this.getRowRecord(row), _record => {\n          (0, utils_1.then)(_getCellValue(this, col, row), _oldValue => {\n            action.onDeleteCellRangeBox(this, {\n              col,\n              row\n            });\n          });\n        });\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n  }\n\n  this.invalidateCellRange(selectionRange);\n}\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\n\n\nclass ListGrid extends DrawGrid_1.DrawGrid {\n  static get EVENT_TYPE() {\n    return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\n  }\n  /**\r\n   * constructor\r\n   *\r\n   * @constructor\r\n   * @param options Constructor options\r\n   */\n\n\n  constructor(options = {}) {\n    var _b;\n\n    super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\n    this[_a] = this[_];\n    this.disabled = false;\n    this.readOnly = false;\n    const protectedSpace = this[_];\n    protectedSpace.header = options.header || [];\n    protectedSpace.layout = options.layout || [];\n    protectedSpace.headerRowHeight = options.headerRowHeight || [];\n\n    if (options.dataSource) {\n      _setDataSource(this, options.dataSource);\n    } else {\n      _setRecords(this, options.records);\n    }\n\n    protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\n\n    _refreshHeader(this);\n\n    protectedSpace.sortState = {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\n    protectedSpace.theme = themes.of(options.theme);\n    protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\n    protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\n    this.invalidate();\n    protectedSpace.handler.on(window, \"resize\", () => {\n      this.updateSize();\n      this.updateScroll();\n      this.invalidate();\n    });\n  }\n  /**\r\n   * Dispose the grid instance.\r\n   * @returns {void}\r\n   */\n\n\n  dispose() {\n    const protectedSpace = this[_];\n    protectedSpace.messageHandler.dispose();\n    protectedSpace.tooltipHandler.dispose();\n    super.dispose();\n  }\n  /**\r\n   * Gets the define of the header.\r\n   */\n\n\n  get header() {\n    return this[_].header;\n  }\n  /**\r\n   * Sets the define of the header with the given data.\r\n   * <pre>\r\n   * column options\r\n   * -----\r\n   * caption: header caption\r\n   * field: field name\r\n   * width: column width\r\n   * minWidth: column min width\r\n   * maxWidth: column max width\r\n   * icon: icon definition\r\n   * message: message key name\r\n   * columnType: column type\r\n   * action: column action\r\n   * style: column style\r\n   * headerType: header type\r\n   * headerStyle: header style\r\n   * headerAction: header action\r\n   * headerField: header field name\r\n   * headerIcon: header icon definition\r\n   * sort: define sort setting\r\n   * -----\r\n   *\r\n   * multiline header\r\n   * -----\r\n   * caption: header caption\r\n   * columns: columns define\r\n   * -----\r\n   * </pre>\r\n   */\n\n\n  set header(header) {\n    this[_].header = header;\n\n    _refreshHeader(this);\n  }\n  /**\r\n   * Gets the define of the layout.\r\n   */\n\n\n  get layout() {\n    return this[_].layout;\n  }\n  /**\r\n   * Sets the define of the layout with the given data.\r\n   */\n\n\n  set layout(layout) {\n    this[_].layout = layout;\n\n    _refreshHeader(this);\n  }\n  /**\r\n   * Get the row count per record\r\n   */\n\n\n  get recordRowCount() {\n    return this[_].layoutMap.bodyRowCount;\n  }\n  /**\r\n   * Get the records.\r\n   */\n\n\n  get records() {\n    return this[_].records || null;\n  }\n  /**\r\n   * Set the records from given\r\n   */\n\n\n  set records(records) {\n    if (records == null) {\n      return;\n    }\n\n    _setRecords(this, records);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\r\n   * Get the data source.\r\n   */\n\n\n  get dataSource() {\n    return this[_].dataSource;\n  }\n  /**\r\n   * Set the data source from given\r\n   */\n\n\n  set dataSource(dataSource) {\n    _setDataSource(this, dataSource);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\r\n   * Get the theme.\r\n   */\n\n\n  get theme() {\n    return this[_].theme;\n  }\n  /**\r\n   * Set the theme from given\r\n   */\n\n\n  set theme(theme) {\n    this[_].theme = themes.of(theme);\n    this.invalidate();\n  }\n  /**\r\n   * If set to true to allow pasting of ranges.\r\n   */\n\n\n  get allowRangePaste() {\n    return this[_].allowRangePaste;\n  }\n\n  set allowRangePaste(allowRangePaste) {\n    this[_].allowRangePaste = allowRangePaste;\n  }\n  /**\r\n   * Get the font definition as a string.\r\n   * @override\r\n   */\n\n\n  get font() {\n    return super.font || this[_].gridCanvasHelper.theme.font;\n  }\n  /**\r\n   * Set the font definition with the given string.\r\n   * @override\r\n   */\n\n\n  set font(font) {\n    super.font = font;\n  }\n  /**\r\n   * Get the background color of the underlay.\r\n   * @override\r\n   */\n\n\n  get underlayBackgroundColor() {\n    return super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\n  }\n  /**\r\n   * Set the background color of the underlay.\r\n   * @override\r\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    super.underlayBackgroundColor = underlayBackgroundColor;\n  }\n  /**\r\n   * Get the sort state.\r\n   */\n\n\n  get sortState() {\n    return this[_].sortState;\n  }\n  /**\r\n   * Sets the sort state.\r\n   * If `null` to set, the sort state is initialized.\r\n   */\n\n\n  set sortState(sortState) {\n    const oldState = this.sortState;\n    let oldField;\n\n    if (oldState.col >= 0 && oldState.row >= 0) {\n      oldField = this.getHeaderField(oldState.col, oldState.row);\n    }\n\n    const newState = this[_].sortState = sortState != null ? sortState : {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    let newField;\n\n    if (newState.col >= 0 && newState.row >= 0) {\n      newField = this.getHeaderField(newState.col, newState.row);\n    } // bind header value\n\n\n    if (oldField != null && oldField !== newField) {\n      this.setHeaderValue(oldState.col, oldState.row, undefined);\n    }\n\n    if (newField != null) {\n      this.setHeaderValue(newState.col, newState.row, newState.order);\n    }\n  }\n  /**\r\n   * Get the header values.\r\n   */\n\n\n  get headerValues() {\n    return this[_].headerValues || (this[_].headerValues = new Map());\n  }\n  /**\r\n   * Sets the header values.\r\n   */\n\n\n  set headerValues(headerValues) {\n    this[_].headerValues = headerValues || new Map();\n  }\n  /**\r\n   * Get the field of the given column index.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index.\r\n   * @return {*} The field object.\r\n   */\n\n\n  getField(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\n  }\n  /**\r\n   * Get the column define of the given column index.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index.\r\n   * @return {*} The column define object.\r\n   */\n\n\n  getColumnDefine(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\n  }\n\n  getColumnType(col, row) {\n    return this[_].layoutMap.getBody(col, row).columnType;\n  }\n\n  getColumnAction(col, row) {\n    return this[_].layoutMap.getBody(col, row).action;\n  }\n  /**\r\n   * Get the header field of the given header cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The header row index.\r\n   * @return {*} The field object.\r\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderField(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.field;\n  }\n  /**\r\n   * Get the header define of the given header cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The header row index.\r\n   * @return {*} The header define object.\r\n   */\n\n\n  getHeaderDefine(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.define;\n  }\n  /**\r\n   * Get the record of the given row index.\r\n   * @param  {number} row The row index.\r\n   * @return {object} The record.\r\n   */\n\n\n  getRowRecord(row) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return undefined;\n    } else {\n      return this[_].dataSource.get(_getRecordIndexByRow(this, row));\n    }\n  }\n  /**\r\n   * Get the record index of the given row index.\r\n   * @param  {number} row The row index.\r\n   */\n\n\n  getRecordIndexByRow(row) {\n    return _getRecordIndexByRow(this, row);\n  }\n  /**\r\n   * Gets the row index starting at the given record index.\r\n   * @param  {number} index The record index.\r\n   */\n\n\n  getRecordStartRowByRecordIndex(index) {\n    return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\n  }\n  /**\r\n   * Get the column index of the given field.\r\n   * @param  {*} field The field.\r\n   * @return {number} The column index.\r\n   * @deprecated use `getCellRangeByField` instead\r\n   */\n\n\n  getColumnIndexByField(field) {\n    var _b;\n\n    const range = this.getCellRangeByField(field, 0);\n    return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\n  }\n  /**\r\n   * Get the column index of the given field.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {number} The column index.\r\n   */\n\n\n  getCellRangeByField(field, index) {\n    const {\n      layoutMap\n    } = this[_];\n    const colObj = layoutMap.columnObjects.find(col => col.field === field);\n\n    if (colObj) {\n      const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\n      const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\n      return {\n        start: {\n          col: layoutRange.start.col,\n          row: startRow + layoutRange.start.row\n        },\n        end: {\n          col: layoutRange.end.col,\n          row: startRow + layoutRange.end.row\n        }\n      };\n    }\n\n    return null;\n  }\n  /**\r\n   * Focus the cell.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {void}\r\n   */\n\n\n  focusGridCell(field, index) {\n    var _b;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = this.selection.range;\n    const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\n\n    if (newFocus == null) {\n      return;\n    }\n\n    this.focusCell(newFocus.col, newFocus.row);\n    this.selection.select = newFocus;\n    this.invalidateGridRect(startCol, startRow, endCol, endRow);\n    this.invalidateCell(newFocus.col, newFocus.row);\n  }\n  /**\r\n   * Scroll to where cell is visible.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {void}\r\n   */\n\n\n  makeVisibleGridCell(field, index) {\n    var _b, _c, _d;\n\n    const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\n    this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\n  }\n\n  getGridCanvasHelper() {\n    return this[_].gridCanvasHelper;\n  }\n  /**\r\n   * Get cell range information for a given cell.\r\n   * @param {number} col column index of the cell\r\n   * @param {number} row row index of the cell\r\n   * @returns {object} cell range info\r\n   */\n\n\n  getCellRange(col, row) {\n    return _getCellRange(this, col, row);\n  }\n  /**\r\n   * Get header range information for a given cell.\r\n   * @param {number} col column index of the cell\r\n   * @param {number} row row index of the cell\r\n   * @returns {object} cell range info\r\n   * @deprecated use `getCellRange` instead\r\n   */\n\n\n  getHeaderCellRange(col, row) {\n    return this.getCellRange(col, row);\n  }\n\n  getCopyCellValue(col, row, range) {\n    const cellRange = _getCellRange(this, col, row);\n\n    const startCol = range ? Math.max(range.start.col, cellRange.start.col) : cellRange.start.col;\n    const startRow = range ? Math.max(range.start.row, cellRange.start.row) : cellRange.start.row;\n\n    if (startCol !== col || startRow !== row) {\n      return \"\";\n    }\n\n    const value = _getCellValue(this, col, row);\n\n    if (row < this[_].layoutMap.headerRowCount) {\n      const headerData = this[_].layoutMap.getHeader(col, row);\n\n      return headerData.headerType.getCopyCellValue(value, this, {\n        col,\n        row\n      });\n    }\n\n    const columnData = this[_].layoutMap.getBody(col, row);\n\n    return columnData.columnType.getCopyCellValue(value, this, {\n      col,\n      row\n    });\n  }\n\n  onDrawCell(col, row, context) {\n    const {\n      layoutMap\n    } = this[_];\n    let draw;\n    let style;\n\n    if (row < layoutMap.headerRowCount) {\n      const hd = layoutMap.getHeader(col, row);\n      draw = hd.headerType.onDrawCell;\n      ({\n        style\n      } = hd);\n\n      _updateRect(this, col, row, context);\n    } else {\n      const column = layoutMap.getBody(col, row);\n      draw = column.columnType.onDrawCell;\n      ({\n        style\n      } = column);\n\n      _updateRect(this, col, row, context);\n    }\n\n    const cellValue = _getCellValue(this, col, row);\n\n    if (this.rowCount <= row) {\n      // Depending on the FilterDataSource, the rowCount may be reduced.\n      return undefined;\n    }\n\n    return _onDrawValue(this, cellValue, context, {\n      col,\n      row\n    }, style, draw);\n  }\n\n  doGetCellValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  valueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const value = _getCellValue(this, col, row);\n\n      if ((0, utils_1.isPromise)(value)) {\n        //\n        return false;\n      }\n\n      valueCallback(value);\n    }\n\n    return true;\n  }\n\n  doChangeValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  changeValueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const record = this.getRowRecord(row);\n\n      if ((0, utils_1.isPromise)(record)) {\n        //\n        return false;\n      }\n\n      const before = _getCellValue(this, col, row);\n\n      if ((0, utils_1.isPromise)(before)) {\n        //\n        return false;\n      }\n\n      const after = changeValueCallback(before);\n\n      if (after === undefined) {\n        return false;\n      }\n\n      const {\n        field\n      } = this[_].layoutMap.getBody(col, row);\n\n      this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\n        col,\n        row,\n        record: record,\n        field: field,\n        value: after,\n        oldValue: before\n      });\n      return (0, utils_1.then)(_setCellValue(this, col, row, after), ret => {\n        if (ret) {\n          const {\n            field\n          } = this[_].layoutMap.getBody(col, row);\n\n          this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\n            col,\n            row,\n            record: record,\n            field: field,\n            value: after,\n            oldValue: before\n          });\n        }\n\n        return ret;\n      });\n    }\n  }\n\n  doSetPasteValue(text, test) {\n    _onRangePaste.call(this, text, test);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderValue(col, row) {\n    const field = this.getHeaderField(col, row);\n    return this.headerValues.get(field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  setHeaderValue(col, row, newValue) {\n    const field = this.getHeaderField(col, row);\n    const oldValue = this.headerValues.get(field);\n    this.headerValues.set(field, newValue);\n    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\n      col,\n      row,\n      field,\n      value: newValue,\n      oldValue\n    });\n  }\n\n  getLayoutCellId(col, row) {\n    return this[_].layoutMap.getCellId(col, row);\n  }\n\n  bindEventsInternal() {\n    const grid = this;\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      const range = _getCellRange(this, e.col, e.row);\n\n      const {\n        start: {\n          col: startCol,\n          row: startRow\n        },\n        end: {\n          col: endCol,\n          row: endRow\n        }\n      } = range;\n\n      if (startCol !== endCol || startRow !== endRow) {\n        this.invalidateCellRange(range);\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, e => {\n      if (!this[_].allowRangePaste) {\n        return;\n      }\n\n      const {\n        start,\n        end\n      } = this.selection.range;\n\n      if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\n        return;\n      }\n\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangePaste.call(this, e.normalizeValue);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, e => {\n      const {\n        start\n      } = this.selection.range;\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangeDelete.call(this);\n    });\n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        col: startCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = startCol;\n    return super.getMoveLeftColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        col: endCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = endCol;\n    return super.getMoveRightColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        row: startRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = startRow;\n    return super.getMoveUpRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        row: endRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = endRow;\n    return super.getMoveDownRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getOffsetInvalidateCells() {\n    return 1;\n  }\n\n  getCopyRangeInternal(range) {\n    const {\n      start\n    } = this.getCellRange(range.start.col, range.start.row);\n    const {\n      end\n    } = this.getCellRange(range.end.col, range.end.row);\n    return {\n      start,\n      end\n    };\n  }\n\n  fireListeners(type, ...event) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.ListGrid = ListGrid;\n_a = _;\n\n/***/ }),\n\n/***/ \"./columns.js\":\n/*!********************!*\\\n  !*** ./columns.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.style = exports.type = exports.action = void 0;\n\nconst action = __importStar(__webpack_require__(/*! ./columns/action */ \"./columns/action.js\"));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(/*! ./columns/style */ \"./columns/style.js\"));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(/*! ./columns/type */ \"./columns/type.js\"));\n\nexports.type = type;\n\n/***/ }),\n\n/***/ \"./columns/action.js\":\n/*!***************************!*\\\n  !*** ./columns/action.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\n\nconst Action_1 = __webpack_require__(/*! ./action/Action */ \"./columns/action/Action.js\");\n\nObject.defineProperty(exports, \"Action\", {\n  enumerable: true,\n  get: function () {\n    return Action_1.Action;\n  }\n});\n\nconst BaseAction_1 = __webpack_require__(/*! ./action/BaseAction */ \"./columns/action/BaseAction.js\");\n\nObject.defineProperty(exports, \"BaseAction\", {\n  enumerable: true,\n  get: function () {\n    return BaseAction_1.BaseAction;\n  }\n});\n\nconst ButtonAction_1 = __webpack_require__(/*! ./action/ButtonAction */ \"./columns/action/ButtonAction.js\");\n\nObject.defineProperty(exports, \"ButtonAction\", {\n  enumerable: true,\n  get: function () {\n    return ButtonAction_1.ButtonAction;\n  }\n});\n\nconst CheckEditor_1 = __webpack_require__(/*! ./action/CheckEditor */ \"./columns/action/CheckEditor.js\");\n\nObject.defineProperty(exports, \"CheckEditor\", {\n  enumerable: true,\n  get: function () {\n    return CheckEditor_1.CheckEditor;\n  }\n});\n\nconst Editor_1 = __webpack_require__(/*! ./action/Editor */ \"./columns/action/Editor.js\");\n\nObject.defineProperty(exports, \"Editor\", {\n  enumerable: true,\n  get: function () {\n    return Editor_1.Editor;\n  }\n});\n\nconst InlineInputEditor_1 = __webpack_require__(/*! ./action/InlineInputEditor */ \"./columns/action/InlineInputEditor.js\");\n\nObject.defineProperty(exports, \"InlineInputEditor\", {\n  enumerable: true,\n  get: function () {\n    return InlineInputEditor_1.InlineInputEditor;\n  }\n});\n\nconst InlineMenuEditor_1 = __webpack_require__(/*! ./action/InlineMenuEditor */ \"./columns/action/InlineMenuEditor.js\");\n\nObject.defineProperty(exports, \"InlineMenuEditor\", {\n  enumerable: true,\n  get: function () {\n    return InlineMenuEditor_1.InlineMenuEditor;\n  }\n});\n\nconst RadioEditor_1 = __webpack_require__(/*! ./action/RadioEditor */ \"./columns/action/RadioEditor.js\");\n\nObject.defineProperty(exports, \"RadioEditor\", {\n  enumerable: true,\n  get: function () {\n    return RadioEditor_1.RadioEditor;\n  }\n});\n\nconst SmallDialogInputEditor_1 = __webpack_require__(/*! ./action/SmallDialogInputEditor */ \"./columns/action/SmallDialogInputEditor.js\");\n\nObject.defineProperty(exports, \"SmallDialogInputEditor\", {\n  enumerable: true,\n  get: function () {\n    return SmallDialogInputEditor_1.SmallDialogInputEditor;\n  }\n}); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n}\n\nexports.ACTIONS = {\n  CHECK: new ImmutableCheckEditor(),\n  INPUT: new ImmutableInputEditor(),\n  RADIO: new ImmutableRadioEditor()\n};\n\nfunction of(columnAction) {\n  if (!columnAction) {\n    return undefined;\n  } else if (typeof columnAction === \"string\") {\n    const key = columnAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return columnAction;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/action/Action.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Action.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Action = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nclass Action extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n\n    this._action = option.action || (() => {});\n  }\n\n  get editable() {\n    return false;\n  }\n\n  get action() {\n    return this._action;\n  }\n\n  set action(action) {\n    this._action = action;\n  }\n\n  clone() {\n    return new Action(this);\n  }\n\n  getState(_grid) {\n    return {};\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = this.getState(grid);\n\n    const action = cell => {\n      if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(cell.row);\n\n      this._action(record, (0, utils_1.extend)(cell, {\n        grid\n      }));\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    })];\n  }\n\n  onPasteCellRangeBox() {// noop\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.Action = Action;\n\n/***/ }),\n\n/***/ \"./columns/action/BaseAction.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/BaseAction.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseAction = void 0;\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  onChangeDisabledInternal() {// abstract\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n\n/***/ \"./columns/action/BaseInputEditor.js\":\n/*!*******************************************!*\\\n  !*** ./columns/action/BaseInputEditor.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseInputEditor = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass BaseInputEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      this.onOpenCellInternal(grid, cell);\n      return true;\n    };\n\n    const input = (cell, value) => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      this.onInputCellInternal(grid, cell, value);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      input({\n        col: e.col,\n        row: e.row\n      }, e.value);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      input({\n        col: e.col,\n        row: e.row\n      }, e.normalizeValue);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      open({\n        col: e.col,\n        row: e.row\n      });\n      utils_1.event.cancel(e.event);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, e => {\n      this.onChangeSelectCellInternal(grid, {\n        col: e.col,\n        row: e.row\n      }, e.selected);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      this.onGridScrollInternal(grid);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return false;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      return true;\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (range.start.col !== range.end.col || range.start.row !== range.end.row) {\n        const {\n          input\n        } = cell;\n        const baseRect = grid.getCellRect(cell.col, cell.row);\n        const rangeRect = grid.getCellRangeRect(range);\n        input.style.top = `${(parseFloat(input.style.top) + (rangeRect.top - baseRect.top)).toFixed()}px`;\n        input.style.left = `${(parseFloat(input.style.left) + (rangeRect.left - baseRect.left)).toFixed()}px`;\n        input.style.width = `${rangeRect.width.toFixed()}px`;\n        input.style.height = `${rangeRect.height.toFixed()}px`;\n      }\n\n      this.onSetInputAttrsInternal(grid, {\n        col: cell.col,\n        row: cell.row\n      }, cell.input);\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => {\n      if (this.isSupportMultilineValue()) {\n        return value;\n      }\n\n      return value.replace(/\\r?\\n/g, \" \");\n    });\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => \"\");\n  }\n\n  isSupportMultilineValue() {\n    return false;\n  }\n\n}\n\nexports.BaseInputEditor = BaseInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/ButtonAction.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/ButtonAction.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonAction = void 0;\n\nconst Action_1 = __webpack_require__(/*! ./Action */ \"./columns/action/Action.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\n\nclass ButtonAction extends Action_1.Action {\n  getState(grid) {\n    let state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (!state) {\n      state = {};\n      utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\n    }\n\n    return state;\n  }\n\n}\n\nexports.ButtonAction = ButtonAction;\n\n/***/ }),\n\n/***/ \"./columns/action/CheckEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/CheckEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckEditor = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\n\nclass CheckEditor extends Editor_1.Editor {\n  clone() {\n    return new CheckEditor(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[CHECK_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      const range = grid.getCellRange(cell.col, cell.row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n        return;\n      }\n\n      const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n\n      if (ret) {\n        const onChange = () => {\n          // checkbox animation\n          (0, animate_1.animate)(200, point => {\n            if (point === 1) {\n              delete state.elapsed[cellKey];\n            } else {\n              state.elapsed[cellKey] = point;\n            }\n\n            grid.invalidateCellRange(range);\n          });\n        };\n\n        if ((0, utils_1.isPromise)(ret)) {\n          state.block[cellKey] = true;\n          ret.then(() => {\n            delete state.block[cellKey];\n            onChange();\n          });\n        } else {\n          onChange();\n        }\n      }\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action: _e => {\n        const selrange = grid.selection.range;\n        const {\n          col\n        } = grid.selection.select;\n\n        for (let {\n          row\n        } = selrange.start; row <= selrange.end.row; row++) {\n          if (!isTarget(col, row)) {\n            continue;\n          }\n\n          action({\n            col,\n            row\n          });\n        }\n      }\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      const pasteValue = e.normalizeValue.trim();\n      grid.doGetCellValue(e.col, e.row, value => {\n        const newValue = (0, action_utils_1.toggleValue)(value);\n\n        if (`${newValue}`.trim() === pasteValue) {\n          action({\n            col: e.col,\n            row: e.row\n          });\n        } else if (isRejectValue(value, pasteValue)) {\n          const record = grid.getRowRecord(e.row);\n\n          if (!(0, utils_1.isPromise)(record)) {\n            grid.fireListeners(\"rejected_paste_values\", {\n              detail: [{\n                col: e.col,\n                row: e.row,\n                record,\n                define: grid.getColumnDefine(e.col, e.row),\n                pasteValue\n              }]\n            });\n          }\n        }\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      const newValue = (0, action_utils_1.toggleValue)(value);\n\n      if (`${newValue}`.trim() === pasteValue) {\n        grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n      } else if (isRejectValue(value, pasteValue)) {\n        context.reject();\n      }\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.CheckEditor = CheckEditor;\n\nfunction isRejectValue(oldValue, pasteValue) {\n  if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\n    return false;\n  }\n\n  const newValue = (0, action_utils_1.toggleValue)(oldValue);\n  return `${newValue}`.trim() !== pasteValue && `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Editor.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Editor.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Editor = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\nclass Editor extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n    this._readOnly = option.readOnly || false;\n  }\n\n  get editable() {\n    return true;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n  set readOnly(readOnly) {\n    this._readOnly = readOnly;\n    this.onChangeReadOnlyInternal();\n  }\n\n  onChangeReadOnlyInternal() {// abstruct\n  }\n\n}\n\nexports.Editor = Editor;\n\n/***/ }),\n\n/***/ \"./columns/action/InlineInputEditor.js\":\n/*!*********************************************!*\\\n  !*** ./columns/action/InlineInputEditor.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineInputEditor = void 0;\n\nconst BaseInputEditor_1 = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\n\nconst InlineInputElement_1 = __webpack_require__(/*! ./internal/InlineInputElement */ \"./columns/action/internal/InlineInputElement.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineInputElement_1.InlineInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nfunction doChangeValue(_grid) {\n  if (globalElement) {\n    globalElement.doChangeValue();\n  }\n}\n\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  clone() {\n    return new InlineInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(grid, _cell, _selected) {\n    doChangeValue(grid);\n    detachInput();\n  }\n\n  onGridScrollInternal(grid) {\n    doChangeValue(grid);\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\n  }\n\n}\n\nexports.InlineInputEditor = InlineInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/InlineMenuEditor.js\":\n/*!********************************************!*\\\n  !*** ./columns/action/InlineMenuEditor.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineMenuEditor = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst InlineMenuElement_1 = __webpack_require__(/*! ./internal/InlineMenuElement */ \"./columns/action/internal/InlineMenuElement.js\");\n\nconst type_1 = __webpack_require__(/*! ../type */ \"./columns/type.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst menu_items_1 = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachMenu(grid, cell, editor, value, record) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineMenuElement_1.InlineMenuElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value, record);\n}\n\nfunction detachMenu(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass InlineMenuEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._options = (0, menu_items_1.normalizeToFn)(option.options);\n  }\n\n  dispose() {// noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this._options = (0, menu_items_1.normalizeToFn)(options);\n  }\n\n  clone() {\n    return new InlineMenuEditor(this);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      grid.doGetCellValue(cell.col, cell.row, value => {\n        const record = grid.getRowRecord(cell.row);\n\n        if ((0, utils_1.isPromise)(record)) {\n          return;\n        }\n\n        attachMenu(grid, cell, this, value, record);\n      });\n      return true;\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, _e => {\n      detachMenu();\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      detachMenu(true);\n    }), // mouse move\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"pointer\";\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      if (!grid.getElement().style.cursor) {\n        grid.getElement().style.cursor = \"pointer\";\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"\";\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(e.row);\n\n      if ((0, utils_1.isPromise)(record)) {\n        return;\n      }\n\n      const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\n\n      if (pasteOpt) {\n        utils_1.event.cancel(e.event);\n        (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\n          const range = grid.getCellRange(e.col, e.row);\n          grid.invalidateCellRange(range);\n        });\n      } else {\n        grid.fireListeners(\"rejected_paste_values\", {\n          detail: [{\n            col: e.col,\n            row: e.row,\n            record,\n            define: grid.getColumnDefine(e.col, e.row),\n            pasteValue: e.normalizeValue\n          }]\n        });\n      }\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    } else {\n      // unknown\n      context.reject();\n    }\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    }\n  }\n\n  _pasteDataToOptionValue(value, grid, cell, record) {\n    const options = this._options(record);\n\n    const pasteOpt = _textToOptionValue(value, options);\n\n    if (pasteOpt) {\n      return pasteOpt;\n    }\n\n    const columnType = grid.getColumnType(cell.col, cell.row);\n\n    if (hasOptions(columnType)) {\n      // Find with caption.\n      const pasteValue = normalizePasteValueStr(value);\n      const captionOpt = utils_1.array.find(columnType.options, opt => normalizePasteValueStr(opt.label) === pasteValue);\n\n      if (captionOpt) {\n        return _textToOptionValue(captionOpt.value, options);\n      }\n    }\n\n    return undefined;\n  }\n\n}\n\nexports.InlineMenuEditor = InlineMenuEditor;\n\nfunction _textToOptionValue(value, options) {\n  const pasteValue = normalizePasteValueStr(value);\n  const pasteOpt = utils_1.array.find(options, opt => normalizePasteValueStr(opt.value) === pasteValue);\n\n  if (pasteOpt) {\n    return pasteOpt;\n  }\n\n  return undefined;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction normalizePasteValueStr(value) {\n  if (value == null) {\n    return \"\";\n  }\n\n  return `${value}`.trim();\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction hasOptions(columnType) {\n  if (columnType instanceof type_1.MenuColumn) {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  if (Array.isArray(columnType.options)) {\n    return true;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/RadioEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/RadioEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioEditor = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_2 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\n\nclass RadioEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._group = option.group;\n    this._checkAction = option.checkAction;\n  }\n\n  clone() {\n    return new RadioEditor(this);\n  }\n  /** @deprecated Use checkAction instead. */\n\n\n  get group() {\n    return this._group;\n  }\n  /** @deprecated Use checkAction instead. */\n\n\n  set group(group) {\n    this._group = group;\n  }\n\n  get checkAction() {\n    return this._checkAction;\n  }\n\n  set checkAction(checkAction) {\n    this._checkAction = checkAction;\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[RADIO_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      this._action(grid, cell);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      const pasteValue = e.normalizeValue.trim();\n\n      if (isRejectValue(pasteValue)) {\n        // Not a boolean\n        const record = grid.getRowRecord(e.row);\n\n        if (!(0, utils_1.isPromise)(record)) {\n          grid.fireListeners(\"rejected_paste_values\", {\n            detail: [{\n              col: e.col,\n              row: e.row,\n              record,\n              define: grid.getColumnDefine(e.col, e.row),\n              pasteValue\n            }]\n          });\n        }\n\n        return;\n      }\n\n      if (!(0, utils_2.toBoolean)(pasteValue)) {\n        return;\n      }\n\n      action({\n        col: e.col,\n        row: e.row\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n\n    if (isRejectValue(pasteValue)) {\n      // Not a boolean\n      context.reject();\n      return;\n    }\n\n    if (!(0, utils_2.toBoolean)(pasteValue)) {\n      return;\n    }\n\n    this._action(grid, {\n      col: cell.col,\n      row: cell.row\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n  _action(grid, cell) {\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(cell.col, cell.row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n      return;\n    }\n\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      if ((0, utils_2.toBoolean)(value)) {\n        return;\n      }\n\n      if (this._checkAction) {\n        // User behavior\n        const record = grid.getRowRecord(cell.row);\n\n        this._checkAction(record, (0, utils_1.extend)(cell, {\n          grid\n        }));\n\n        return;\n      }\n\n      if (this._group) {\n        // Backward compatibility\n        const state = grid[RADIO_COLUMN_STATE_ID];\n\n        const targets = this._group({\n          grid,\n          col: cell.col,\n          row: cell.row\n        });\n\n        targets.forEach(({\n          col,\n          row\n        }) => {\n          const range = grid.getCellRange(col, row);\n          const cellKey = `${range.start.col}:${range.start.row}`;\n\n          if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n            return;\n          }\n\n          actionCell(grid, col, row, col === cell.col && row === cell.row);\n        });\n        return;\n      } // default behavior\n\n\n      const field = grid.getField(cell.col, cell.row);\n      const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\n      /** Original DataSource */\n\n      const {\n        dataSource\n      } = grid.dataSource;\n      const girdRecords = getAllRecordsFromGrid(grid);\n\n      for (let index = 0; index < dataSource.length; index++) {\n        const record = dataSource.get(index);\n        const showData = girdRecords.find(d => d.record === record);\n\n        if (showData) {\n          actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\n        } else {\n          // Hidden record\n          (0, utils_1.then)(dataSource.getField(index, field), value => {\n            if (!(0, utils_2.toBoolean)(value)) {\n              return;\n            }\n\n            dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\n          });\n        }\n      }\n    });\n  }\n\n}\n\nexports.RadioEditor = RadioEditor;\n\nfunction getAllRecordsFromGrid(grid) {\n  const result = [];\n  const {\n    rowCount,\n    recordRowCount\n  } = grid;\n\n  for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\n    const record = grid.getRowRecord(targetRow);\n    result.push({\n      row: targetRow,\n      record\n    });\n  }\n\n  return result;\n}\n\nfunction actionCell(grid, col, row, flag) {\n  grid.doGetCellValue(col, row, value => {\n    if ((0, utils_2.toBoolean)(value) === flag) {\n      return;\n    }\n\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\n\n    if (ret) {\n      const onChange = () => {\n        // checkbox animation\n        (0, animate_1.animate)(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      if ((0, utils_1.isPromise)(ret)) {\n        state.block[cellKey] = true;\n        ret.then(() => {\n          delete state.block[cellKey];\n          onChange();\n        });\n      } else {\n        onChange();\n      }\n    }\n  });\n}\n\nfunction isRejectValue(pasteValue) {\n  return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/SmallDialogInputEditor.js\":\n/*!**************************************************!*\\\n  !*** ./columns/action/SmallDialogInputEditor.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SmallDialogInputEditor = void 0;\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseInputEditor_1 = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst SmallDialogInputElement_1 = __webpack_require__(/*! ./internal/SmallDialogInputElement */ \"./columns/action/internal/SmallDialogInputElement.js\");\n\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._helperText = option.helperText;\n    this._inputValidator = option.inputValidator;\n    this._validator = option.validator;\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  dispose() {//noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  get helperText() {\n    return this._helperText;\n  }\n\n  get inputValidator() {\n    return this._inputValidator;\n  }\n\n  get validator() {\n    return this._validator;\n  }\n\n  clone() {\n    return new SmallDialogInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(_grid, _cell, _selected) {\n    // cancel input\n    detachInput();\n  }\n\n  onGridScrollInternal(_grid) {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      this.onOpenCellInternal(grid, cell);\n      return true;\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...super.bindGridEvent(grid, cellId), grid.listen('click_cell', cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    })];\n  }\n\n}\n\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/action-utils.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/action-utils.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nfunction isDisabledRecord(option, grid, row) {\n  if (grid.disabled) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isDisabledRecord = isDisabledRecord;\n\nfunction isReadOnlyRecord(option, grid, row) {\n  if (grid.readOnly) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isReadOnlyRecord = isReadOnlyRecord;\n\nfunction toggleValue(val) {\n  if (typeof val === \"number\") {\n    if (val === 0) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return \"true\";\n    } else if (val === \"off\") {\n      return \"on\";\n    } else if (/^0+$/.exec(val)) {\n      return val.replace(/^(0*)0$/, \"$11\");\n    } else if (val === \"true\") {\n      return \"false\";\n    } else if (val === \"on\") {\n      return \"off\";\n    } else if (/^0*1$/.exec(val)) {\n      return val.replace(/^(0*)1$/, \"$10\");\n    }\n  }\n\n  return !val;\n}\n\nexports.toggleValue = toggleValue;\n\nfunction getBooleanOptionOfRecord(option, grid, row) {\n  if (typeof option === \"function\") {\n    const record = grid.getRowRecord(row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return true;\n    }\n\n    return !!option(record);\n  }\n\n  return !!option;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/actionBind.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/actionBind.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.js\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineInputElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst input_value_handler_1 = __webpack_require__(/*! ./input-value-handler */ \"./columns/action/internal/input-value-handler.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst CLASSNAME = \"cheetah-grid__inline-input\";\n\nfunction createInputElement() {\n  __webpack_require__(/*! @/columns/action/internal/InlineInputElement.css */ \"../src/js/columns/action/internal/InlineInputElement.css\");\n\n  return (0, dom_1.createElement)(\"input\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    classList,\n    type\n  } = editor;\n\n  if (classList) {\n    input.classList.add(...classList);\n  }\n\n  input.type = type || \"\";\n}\n\nclass InlineInputElement {\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._input = createInputElement();\n\n    this._bindInputEvents();\n  }\n\n  dispose() {\n    var _a;\n\n    const input = this._input;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._input;\n    this._beforePropEditor = null;\n    (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n  }\n\n  attach(grid, editor, col, row, value) {\n    const input = this._input;\n    const handler = this._handler;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        input.classList.remove(...classList);\n      }\n    }\n\n    input.style.font = grid.font || \"16px sans-serif\";\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    input.style.top = `${rect.top.toFixed()}px`;\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(input);\n    setInputAttrs(editor, grid, input);\n    (0, input_value_handler_1.setInputValue)(input, value);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n    this._beforePropEditor = editor;\n\n    const focus = () => {\n      input.focus();\n      const end = input.value.length;\n\n      try {\n        if (typeof input.selectionStart !== \"undefined\") {\n          input.selectionStart = end;\n          input.selectionEnd = end;\n          return;\n        }\n      } catch (e) {//ignore\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      if (document.selection) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const range = input.createTextRange();\n        range.collapse();\n        range.moveEnd(\"character\", end);\n        range.moveStart(\"character\", end);\n        range.select();\n      }\n    };\n\n    handler.tryWithOffEvents(input, \"blur\", () => {\n      focus();\n    });\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const input = this._input;\n\n      this._handler.tryWithOffEvents(input, \"blur\", () => {\n        var _a;\n\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      });\n\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n  }\n\n  doChangeValue() {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    const {\n      grid,\n      col,\n      row\n    } = this._activeData;\n    grid.doChangeValue(col, row, () => value);\n  }\n\n  _isActive() {\n    const input = this._input;\n\n    if (!input || !input.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindInputEvents() {\n    const handler = this._handler;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(input, \"click\", stopPropagationOnly);\n    handler.on(input, \"mousedown\", stopPropagationOnly);\n    handler.on(input, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"dblclick\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n    });\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(e);\n      }\n    });\n    handler.on(input, \"blur\", _e => {\n      this.doChangeValue();\n      this.detach();\n    });\n  }\n\n  _onKeydownEnter(e) {\n    var _a;\n\n    if (!this._isActive() || this._attaching) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n    this.doChangeValue();\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n      grid.onKeyDownMove(e);\n    }\n  }\n\n  _onKeydownTab(e) {\n    var _a;\n\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n\n    if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\n      return;\n    }\n\n    this.doChangeValue();\n    this.detach(true);\n    grid.onKeyDownMove(e);\n  }\n\n}\n\nexports.InlineInputElement = InlineInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.js\":\n/*!******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineMenuElement = void 0;\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\n\nfunction findItemParents(target) {\n  let el = target;\n\n  while (el && !el.classList.contains(ITEM_CLASSNAME)) {\n    el = el.parentElement;\n\n    if (!el || el.classList.contains(CLASSNAME)) {\n      return null;\n    }\n  }\n\n  return el;\n}\n\nfunction createMenuElement() {\n  __webpack_require__(/*! @/columns/action/internal/InlineMenuElement.css */ \"../src/js/columns/action/internal/InlineMenuElement.css\");\n\n  return (0, dom_1.createElement)(\"ul\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction attachElement(element, rect, menu) {\n  menu.style.top = `${rect.top.toFixed()}px`;\n  menu.style.left = `${rect.left.toFixed()}px`;\n  menu.style.width = `${rect.width.toFixed()}px`;\n  menu.style.lineHeight = `${rect.height.toFixed()}px`;\n  element.appendChild(menu);\n}\n\nfunction optionToLi({\n  classList,\n  label,\n  value,\n  html\n}, index) {\n  const item = (0, dom_1.createElement)(\"li\", {\n    classList: ITEM_CLASSNAME\n  });\n  item.tabIndex = 0;\n  item.dataset.valueindex = `${index}`;\n\n  if (classList) {\n    item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\n  }\n\n  if (label) {\n    const span = (0, dom_1.createElement)(\"span\", {\n      text: label\n    });\n    item.appendChild(span);\n  } else if (html) {\n    (0, dom_1.appendHtml)(item, html);\n  }\n\n  if (value === \"\" || value == null) {\n    item.classList.add(EMPTY_ITEM_CLASSNAME);\n  }\n\n  return item;\n}\n\nfunction openMenu(grid, editor, col, row, value, options, menu) {\n  const {\n    classList\n  } = editor;\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  (0, dom_1.empty)(menu);\n  menu.style.font = grid.font || \"16px sans-serif\";\n  let emptyItemEl = null;\n  let valueItemEl = null;\n  options.forEach((option, i) => {\n    const item = optionToLi(option, i);\n    menu.appendChild(item);\n\n    if (option.value === value) {\n      valueItemEl = item;\n      item.dataset.select = \"select\";\n    }\n\n    if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n      emptyItemEl = item;\n    }\n  });\n  const focusEl = valueItemEl || emptyItemEl || menu.children[0];\n\n  if (classList) {\n    menu.classList.add(...classList);\n  }\n\n  const children = Array.prototype.slice.call(menu.children, 0);\n  const focusIndex = children.indexOf(focusEl);\n  const {\n    element,\n    rect\n  } = grid.getAttachCellsArea(grid.getCellRange(col, row)); // Cover the right line\n\n  rect.width++; // append for calculation\n\n  attachElement(element, rect, menu); // Make the selection item at the middle\n\n  let offset = 0;\n  let allHeight = 0;\n\n  for (let i = 0; i < children.length; i++) {\n    const {\n      offsetHeight\n    } = children[i];\n\n    if (i < focusIndex) {\n      offset += offsetHeight;\n    }\n\n    allHeight += offsetHeight;\n  }\n\n  rect.offsetTop(-offset);\n  menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n  attachElement(element, rect, menu); // Control not to overflow the screen range\n\n  const menuClientRect = menu.getBoundingClientRect();\n  const scaleDiff = (allHeight - menuClientRect.height) / 2;\n  const orgMenuTop = menuClientRect.top - scaleDiff;\n  let menuTop = orgMenuTop;\n  const menuBottom = menuTop + allHeight;\n  const winBottom = window.innerHeight;\n  const winMargin = 20;\n\n  if (menuBottom > winBottom - winMargin) {\n    const diff = menuBottom - winBottom + winMargin;\n    menuTop -= diff;\n  }\n\n  if (menuTop < 0\n  /*winTop*/\n  + winMargin) {\n    menuTop = winMargin;\n  }\n\n  if (menuTop !== orgMenuTop) {\n    rect.offsetTop(-(orgMenuTop - menuTop)); // re update\n\n    attachElement(element, rect, menu);\n  }\n\n  if (focusEl) {\n    focusEl.focus();\n  }\n\n  menu.classList.remove(HIDDEN_CLASSNAME);\n  menu.classList.add(SHOWN_CLASSNAME);\n}\n\nfunction closeMenu(_grid, _col, _row, menu) {\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  (0, dom_1.disableFocus)(menu);\n}\n\nclass InlineMenuElement {\n  constructor() {\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    this._menu = createMenuElement();\n\n    this._bindMenuEvents();\n\n    let bodyClickListenerId;\n\n    const deregisterBodyClickListener = this._deregisterBodyClickListener = () => handler.off(bodyClickListenerId);\n\n    this._registerBodyClickListener = () => {\n      deregisterBodyClickListener();\n      bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), {\n        capture: true\n      });\n    };\n  }\n\n  dispose() {\n    var _a;\n\n    const menu = this._menu;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._menu;\n    this._beforePropEditor = null;\n    (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\n  }\n\n  attach(grid, editor, col, row, value, record) {\n    const menu = this._menu;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        menu.classList.remove(...classList);\n      }\n    }\n\n    const options = editor.options(record);\n    openMenu(grid, editor, col, row, value, options, menu);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor,\n      options\n    };\n    this._beforePropEditor = editor;\n\n    this._registerBodyClickListener();\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const menu = this._menu;\n      closeMenu(grid, col, row, menu);\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n\n    this._deregisterBodyClickListener();\n  }\n\n  _doChangeValue(valueindex) {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid,\n      col,\n      row,\n      options\n    } = this._activeData;\n    const option = options[Number(valueindex)];\n\n    if (option) {\n      const {\n        value\n      } = option;\n      grid.doChangeValue(col, row, () => value);\n    }\n  }\n\n  _isActive() {\n    const menu = this._menu;\n\n    if (!menu || !menu.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindMenuEvents() {\n    const handler = this._handler;\n    const menu = this._menu;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(menu, \"mousedown\", stopPropagationOnly);\n    handler.on(menu, \"touchstart\", stopPropagationOnly);\n    handler.on(menu, \"dblclick\", stopPropagationOnly);\n    handler.on(menu, \"click\", e => {\n      e.stopPropagation();\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const {\n        valueindex\n      } = item.dataset;\n\n      this._doChangeValue(valueindex || \"\");\n\n      this.detach(true);\n    });\n    handler.on(menu, \"keydown\", e => {\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(menu, item, e);\n      } else if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_UP) {\n        const n = (0, dom_1.findPrevSiblingFocusable)(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_DOWN) {\n        const n = (0, dom_1.findNextSiblingFocusable)(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(menu, item, e);\n      }\n    });\n  }\n\n  _onBodyClick(e) {\n    const el = e.target;\n\n    if (!el) {\n      return;\n    }\n\n    if (this._menu.contains(el)) {\n      return;\n    }\n\n    if (this._isActive()) {\n      const {\n        grid\n      } = this._activeData;\n\n      if (grid.getElement().contains(el)) {\n        return;\n      }\n    }\n\n    this.detach();\n  }\n\n  _onKeydownEnter(_menu, item, e) {\n    var _a;\n\n    const grid = this._isActive() ? this._activeData.grid : null;\n    const {\n      valueindex\n    } = item.dataset;\n\n    this._doChangeValue(valueindex || \"\");\n\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if (grid) {\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n        grid.onKeyDownMove(e);\n      }\n    }\n  }\n\n  _onKeydownTab(menu, item, e) {\n    var _a;\n\n    if (this._isActive()) {\n      const {\n        grid\n      } = this._activeData;\n\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\n        const {\n          valueindex\n        } = item.dataset;\n\n        this._doChangeValue(valueindex || \"\");\n\n        this.detach(true);\n        grid.onKeyDownMove(e);\n        return;\n      }\n    }\n\n    if (!e.shiftKey) {\n      if (!(0, dom_1.findNextSiblingFocusable)(item)) {\n        let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\n\n        if (!(0, dom_1.isFocusable)(n)) {\n          n = (0, dom_1.findNextSiblingFocusable)(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    } else {\n      if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\n        const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\n        let n = items[items.length - 1];\n\n        if (!(0, dom_1.isFocusable)(n)) {\n          n = (0, dom_1.findPrevSiblingFocusable)(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    }\n  }\n\n}\n\nexports.InlineMenuElement = InlineMenuElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.js\":\n/*!************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SmallDialogInputElement = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst input_value_handler_1 = __webpack_require__(/*! ./input-value-handler */ \"./columns/action/internal/input-value-handler.js\");\n\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\n\nfunction _focus(input, handler) {\n  const focus = () => {\n    input.focus();\n    const end = input.value.length;\n\n    try {\n      if (typeof input.selectionStart !== \"undefined\") {\n        input.selectionStart = end;\n        input.selectionEnd = end;\n        return;\n      }\n    } catch (e) {//ignore\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (document.selection) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const range = input.createTextRange();\n      range.collapse();\n      range.moveEnd(\"character\", end);\n      range.moveStart(\"character\", end);\n      range.select();\n    }\n  };\n\n  handler.tryWithOffEvents(input, \"blur\", () => {\n    focus();\n  });\n}\n\nfunction createDialogElement() {\n  __webpack_require__(/*! @/columns/action/internal/SmallDialogInputElement.css */ \"../src/js/columns/action/internal/SmallDialogInputElement.css\");\n\n  const element = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const input = (0, dom_1.createElement)(\"input\", {\n    classList: INPUT_CLASSNAME\n  });\n  input.readOnly = true;\n  input.tabIndex = -1;\n  element.appendChild(input);\n  return element;\n}\n\nfunction bindProps(grid, dialog, input, editor) {\n  const {\n    classList,\n    helperText\n  } = editor;\n\n  if (classList) {\n    dialog.classList.add(...classList);\n  }\n\n  if (helperText && typeof helperText !== \"function\") {\n    dialog.dataset.helperText = helperText;\n  }\n\n  setInputAttrs(editor, grid, input);\n}\n\nfunction unbindProps(_grid, dialog, input, editor) {\n  const {\n    classList\n  } = editor;\n\n  if (classList) {\n    dialog.classList.remove(...classList);\n  }\n\n  delete dialog.dataset.helperText;\n  input.type = \"\";\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    type\n  } = editor;\n  input.type = type || \"\";\n}\n\nclass SmallDialogInputElement {\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._dialog = createDialogElement();\n    this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\n\n    this._bindDialogEvents();\n  }\n\n  dispose() {\n    const dialog = this._dialog;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._dialog; // @ts-expect-error -- ignore\n\n    delete this._input;\n    this._beforePropEditor = null;\n\n    if (dialog.parentElement) {\n      dialog.parentElement.removeChild(dialog);\n    }\n  }\n\n  attach(grid, editor, col, row, value) {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    if (this._beforePropEditor) {\n      unbindProps(grid, dialog, input, this._beforePropEditor);\n    }\n\n    delete dialog.dataset.errorMessage;\n    dialog.classList.remove(SHOWN_CLASSNAME);\n    dialog.classList.add(HIDDEN_CLASSNAME);\n    input.readOnly = true;\n    input.tabIndex = 0;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    dialog.style.top = `${rect.top.toFixed()}px`;\n    dialog.style.left = `${rect.left.toFixed()}px`;\n    dialog.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(dialog);\n    (0, input_value_handler_1.setInputValue)(input, value);\n    input.style.font = grid.font || \"16px sans-serif\";\n    const activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n\n    this._onInputValue(input, activeData);\n\n    if (!utils_1.browser.IE) {\n      _focus(input, handler);\n    } else {\n      // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\n      setTimeout(() => _focus(input, handler));\n    }\n\n    dialog.classList.add(SHOWN_CLASSNAME);\n    dialog.classList.remove(HIDDEN_CLASSNAME);\n    input.readOnly = false;\n    bindProps(grid, dialog, input, editor);\n    this._activeData = activeData;\n    this._beforePropEditor = editor;\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const dialog = this._dialog;\n      const input = this._input;\n      dialog.classList.remove(SHOWN_CLASSNAME);\n      dialog.classList.add(HIDDEN_CLASSNAME);\n      input.readOnly = true;\n      input.tabIndex = -1;\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n    this._beforeValue = null;\n  }\n\n  _doChangeValue() {\n    if (!this._isActive()) {\n      return false;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    return (0, utils_1.then)(this._validate(value), res => {\n      if (res && value === input.value) {\n        const {\n          grid,\n          col,\n          row\n        } = this._activeData;\n        grid.doChangeValue(col, row, () => value);\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  _isActive() {\n    const dialog = this._dialog;\n\n    if (!dialog || !dialog.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindDialogEvents() {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(dialog, \"click\", stopPropagationOnly);\n    handler.on(dialog, \"dblclick\", stopPropagationOnly);\n    handler.on(dialog, \"mousedown\", stopPropagationOnly);\n    handler.on(dialog, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n\n      this._onInputValue(input);\n    });\n\n    const onKeyupAndPress = _e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      this._onInputValue(input);\n    };\n\n    handler.on(input, \"keyup\", onKeyupAndPress);\n    handler.on(input, \"keypress\", onKeyupAndPress);\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else {\n        this._onInputValue(input);\n      }\n    });\n  }\n\n  _onKeydownEnter(e) {\n    if (this._attaching) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    (0, utils_1.then)(this._doChangeValue(), r => {\n      var _a;\n\n      if (r && value === input.value) {\n        const grid = this._isActive() ? this._activeData.grid : null;\n        this.detach(true);\n\n        if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n          grid.onKeyDownMove(e);\n        }\n      }\n    });\n    utils_1.event.cancel(e);\n  }\n\n  _onInputValue(input, activeData) {\n    const before = this._beforeValue;\n    const {\n      value\n    } = input;\n\n    if (before !== value) {\n      this._onInputValueChange(value, activeData);\n    }\n\n    this._beforeValue = value;\n  }\n\n  _onInputValueChange(after, activeData) {\n    activeData = activeData || this._activeData;\n    const dialog = this._dialog;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = activeData;\n\n    if (typeof editor.helperText === \"function\") {\n      const helperText = editor.helperText(after, {\n        grid,\n        col,\n        row\n      });\n\n      if (helperText) {\n        dialog.dataset.helperText = helperText;\n      } else {\n        delete dialog.dataset.helperText;\n      }\n    }\n\n    if (\"errorMessage\" in dialog.dataset) {\n      this._validate(after, true);\n    }\n  }\n\n  _validate(value, inputOnly) {\n    const dialog = this._dialog;\n    const input = this._input;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = this._activeData;\n    let message = \"\";\n\n    if (editor.inputValidator) {\n      message = editor.inputValidator(value, {\n        grid,\n        col,\n        row\n      });\n    }\n\n    return (0, utils_1.then)(message, message => {\n      if (!message && editor.validator && !inputOnly) {\n        message = editor.validator(value, {\n          grid,\n          col,\n          row\n        });\n      }\n\n      return (0, utils_1.then)(message, message => {\n        if (message && value === input.value) {\n          dialog.dataset.errorMessage = message;\n        } else {\n          delete dialog.dataset.errorMessage;\n        }\n\n        return !message;\n      });\n    });\n  }\n\n}\n\nexports.SmallDialogInputElement = SmallDialogInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/input-value-handler.js\":\n/*!********************************************************!*\\\n  !*** ./columns/action/internal/input-value-handler.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setInputValue = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nfunction setInputValue(input, value) {\n  const sign = input.type === \"number\" && value === \"-\";\n\n  if (sign) {\n    // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\n    input.type = \"\";\n    let handler = new EventHandler_1.EventHandler();\n\n    const dispose = () => {\n      if (handler) {\n        handler.dispose();\n        handler = null;\n      }\n    };\n\n    handler.once(input, \"input\", _e => {\n      input.type = \"number\";\n      dispose();\n    });\n    handler.once(input, \"blur\", _e => {\n      dispose();\n    });\n  }\n\n  input.value = value !== null && value !== void 0 ? value : \"\";\n}\n\nexports.setInputValue = setInputValue;\n\n/***/ }),\n\n/***/ \"./columns/indicator/handlers.js\":\n/*!***************************************!*\\\n  !*** ./columns/indicator/handlers.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDrawIndicator = void 0;\n\nconst triangle_1 = __webpack_require__(/*! ./triangle */ \"./columns/indicator/triangle.js\");\n\nfunction getDrawIndicator(indicatorStyle) {\n  const {\n    style\n  } = indicatorStyle;\n\n  if (style === \"triangle\") {\n    return triangle_1.drawTriangleIndicator;\n  }\n\n  return null;\n}\n\nexports.getDrawIndicator = getDrawIndicator;\n\n/***/ }),\n\n/***/ \"./columns/indicator/triangle.js\":\n/*!***************************************!*\\\n  !*** ./columns/indicator/triangle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawTriangleIndicator = void 0;\nconst KIND_PROCESS_MAP = {\n  [0\n  /* DrawIndicatorKind.topLeft */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.topLeftColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.topLeftSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseLeft = rect.left + 1;\n      const baseTop = rect.top + 1;\n      ctx.moveTo(baseLeft, baseTop);\n      ctx.lineTo(baseLeft + size, baseTop);\n      ctx.lineTo(baseLeft, baseTop + size);\n    }\n\n  },\n  [1\n  /* DrawIndicatorKind.topRight */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.topRightColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.topRightSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseRight = rect.right - 2;\n      const baseTop = rect.top + 1;\n      ctx.moveTo(baseRight, baseTop);\n      ctx.lineTo(baseRight - size, baseTop);\n      ctx.lineTo(baseRight, baseTop + size);\n    }\n\n  },\n  [2\n  /* DrawIndicatorKind.bottomRight */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.bottomRightColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.bottomRightSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseRight = rect.right - 2;\n      const baseBottom = rect.bottom - 2;\n      ctx.moveTo(baseRight, baseBottom);\n      ctx.lineTo(baseRight - size, baseBottom);\n      ctx.lineTo(baseRight, baseBottom - size);\n    }\n\n  },\n  [3\n  /* DrawIndicatorKind.bottomLeft */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.bottomLeftColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.bottomLeftSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseLeft = rect.left + 1;\n      const baseBottom = rect.bottom - 2;\n      ctx.moveTo(baseLeft, baseBottom);\n      ctx.lineTo(baseLeft + size, baseBottom);\n      ctx.lineTo(baseLeft, baseBottom - size);\n    }\n\n  }\n};\n\nfunction drawTriangleIndicator(context, style, kind, helper) {\n  const process = KIND_PROCESS_MAP[kind];\n\n  if (!process) {\n    return;\n  }\n\n  helper.drawBorderWithClip(context, ctx => {\n    const rect = context.getRect();\n    const color = style.color || helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\n    const size = style.size && Number(style.size) || process.themeSize(helper) || rect.height / 6; // draw triangle\n\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    process.drawPath(ctx, rect, size);\n    ctx.closePath();\n    ctx.fill();\n  });\n}\n\nexports.drawTriangleIndicator = drawTriangleIndicator;\n\n/***/ }),\n\n/***/ \"./columns/message/BaseMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/BaseMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseMessage = void 0;\n\nclass BaseMessage {\n  constructor(grid) {\n    this._messageElement = null;\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachMessageElement();\n\n    if (this._messageElement) {\n      this._messageElement.dispose();\n    }\n\n    this._messageElement = null;\n  }\n\n  _getMessageElement() {\n    return this._messageElement || (this._messageElement = this.createMessageElementInternal());\n  }\n\n  attachMessageElement(col, row, message) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.attach(this._grid, col, row, message);\n  }\n\n  moveMessageElement(col, row) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.move(this._grid, col, row);\n  }\n\n  detachMessageElement() {\n    const messageElement = this._getMessageElement();\n\n    messageElement._detach();\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    this.drawCellMessageInternal(message, context, style, helper, grid, info);\n  }\n\n}\n\nexports.BaseMessage = BaseMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/ErrorMessage.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/ErrorMessage.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst ErrorMessageElement_1 = __webpack_require__(/*! ./internal/ErrorMessageElement */ \"./columns/message/internal/ErrorMessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst RED_A100 = \"#ff8a80\";\n\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new ErrorMessageElement_1.ErrorMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.ErrorMessage = ErrorMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/InfoMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/InfoMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InfoMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst MessageElement_1 = __webpack_require__(/*! ./internal/MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst GREY_L2 = \"#e0e0e0\";\n\nclass InfoMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new MessageElement_1.MessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawInformationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.InfoMessage = InfoMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/MessageHandler.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/MessageHandler.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageHandler = exports.hasMessage = void 0;\n\nconst ErrorMessage_1 = __webpack_require__(/*! ./ErrorMessage */ \"./columns/message/ErrorMessage.js\");\n\nconst InfoMessage_1 = __webpack_require__(/*! ./InfoMessage */ \"./columns/message/InfoMessage.js\");\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ../../list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst WarningMessage_1 = __webpack_require__(/*! ./WarningMessage */ \"./columns/message/WarningMessage.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst EMPTY_MESSAGE = {\n  type: \"error\",\n  message: null\n};\nconst MESSAGE_INSTANCE_FACTORY = {\n  error(grid) {\n    return new ErrorMessage_1.ErrorMessage(grid);\n  },\n\n  info(grid) {\n    return new InfoMessage_1.InfoMessage(grid);\n  },\n\n  warning(grid) {\n    return new WarningMessage_1.WarningMessage(grid);\n  }\n\n};\n\nfunction normalizeMessage(message) {\n  if (!message || (0, utils_1.isPromise)(message)) {\n    return EMPTY_MESSAGE;\n  }\n\n  if (typeof message === \"string\") {\n    return {\n      type: \"error\",\n      message,\n      original: message\n    };\n  }\n\n  const type = message.type || \"error\";\n\n  if (type && type in MESSAGE_INSTANCE_FACTORY) {\n    return {\n      type: type.toLowerCase(),\n      message: message.message,\n      original: message\n    };\n  }\n\n  return {\n    type: \"error\",\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    message: `${message}`,\n    original: message\n  };\n}\n\nfunction hasMessage(message) {\n  return !!normalizeMessage(message).message;\n}\n\nexports.hasMessage = hasMessage;\n\nclass MessageHandler {\n  constructor(grid, getMessage) {\n    this._attachInfo = null;\n    this._grid = grid;\n    this._messageInstances = {};\n\n    this._bindGridEvent(grid, getMessage);\n  }\n\n  dispose() {\n    var _a;\n\n    const messageInstances = this._messageInstances;\n\n    for (const k in messageInstances) {\n      (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\n    } // @ts-expect-error -- ignore\n\n\n    delete this._messageInstances; // @ts-expect-error -- ignore\n\n    delete this._attachInfo;\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    if (!hasMessage(message)) {\n      return;\n    }\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\n  }\n\n  _attach(col, row, message) {\n    const info = this._attachInfo;\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    if (info && info.instance !== instance) {\n      info.instance.detachMessageElement();\n    }\n\n    instance.attachMessageElement(col, row, normalizeMessage(message));\n    this._attachInfo = {\n      col,\n      row,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || info.col !== col || info.row !== row) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveMessageElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachMessageElement();\n    this._attachInfo = null;\n  }\n\n  _bindGridEvent(grid, getMessage) {\n    const onSelectMessage = sel => {\n      const setMessageData = msg => {\n        if (!hasMessage(msg)) {\n          this._detach();\n        } else {\n          this._attach(sel.col, sel.row, msg);\n        }\n      };\n\n      const message = getMessage(sel.col, sel.row);\n\n      if ((0, utils_1.isPromise)(message)) {\n        this._detach();\n\n        message.then(msg => {\n          const newSel = grid.selection.select;\n\n          if (newSel.col !== sel.col || newSel.row !== sel.row) {\n            return;\n          }\n\n          setMessageData(msg);\n        });\n        return;\n      }\n\n      setMessageData(message);\n    };\n\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (!e.selected) {\n        return;\n      }\n\n      if (e.before.col === e.col && e.before.row === e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const sel = grid.selection.select;\n\n      this._move(sel.col, sel.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      if (!grid.hasFocusGrid()) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (sel.col !== e.col || sel.row !== e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, _e => {\n      const sel = grid.selection.select;\n      onSelectMessage(sel);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, _e => {\n      this._detach();\n    });\n  }\n\n  _getMessageInstanceOfMessage(message) {\n    const messageInstances = this._messageInstances;\n    const {\n      type\n    } = normalizeMessage(message);\n    return messageInstances[type] || (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid));\n  }\n\n}\n\nexports.MessageHandler = MessageHandler;\n\n/***/ }),\n\n/***/ \"./columns/message/WarningMessage.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/WarningMessage.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WarningMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst WarningMessageElement_1 = __webpack_require__(/*! ./internal/WarningMessageElement */ \"./columns/message/internal/WarningMessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\n\nclass WarningMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new WarningMessageElement_1.WarningMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.WarningMessage = WarningMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/ErrorMessageElement.js\":\n/*!*********************************************************!*\\\n  !*** ./columns/message/internal/ErrorMessageElement.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorMessageElement = void 0;\n\nconst MessageElement_1 = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(/*! @/columns/message/internal/ErrorMessageElement.css */ \"../src/js/columns/message/internal/ErrorMessageElement.css\");\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.ErrorMessageElement = ErrorMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/MessageElement.js\":\n/*!****************************************************!*\\\n  !*** ./columns/message/internal/MessageElement.js ***!\n  \\****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = \"cheetah-grid__message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createMessageDomElement() {\n  __webpack_require__(/*! @/columns/message/internal/MessageElement.css */ \"../src/js/columns/message/internal/MessageElement.css\");\n\n  const rootElement = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = (0, dom_1.createElement)(\"span\", {\n    classList: [MESSAGE_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass MessageElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createMessageDomElement();\n    this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._rootElement; // @ts-expect-error -- ignore\n\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, message) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = message.message;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      offsetHeight,\n      offsetWidth\n    } = element;\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${left.toFixed()}px`;\n    rootElement.style.width = `${width.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.MessageElement = MessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/WarningMessageElement.js\":\n/*!***********************************************************!*\\\n  !*** ./columns/message/internal/WarningMessageElement.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WarningMessageElement = void 0;\n\nconst MessageElement_1 = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass WarningMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(/*! @/columns/message/internal/WarningMessageElement.css */ \"../src/js/columns/message/internal/WarningMessageElement.css\");\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.WarningMessageElement = WarningMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/messageUtils.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/messageUtils.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\n\nconst Rect_1 = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\n\nfunction drawExclamationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color,\n    boxWidth,\n    markHeight\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - (Number(boxWidth) || 24);\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw exclamation mark\n\n  const fillColor = color;\n  const height = Number(markHeight) || 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5 * 3), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 4, width, height / 5), context, {\n    fillColor\n  });\n}\n\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\n\nfunction drawInformationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color,\n    boxWidth,\n    markHeight\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - (Number(boxWidth) || 24);\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw i mark\n\n  const fillColor = color;\n  const height = Number(markHeight) || 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 2, width, height / 5 * 3), context, {\n    fillColor\n  });\n}\n\nexports.drawInformationMarkBox = drawInformationMarkBox;\n\n/***/ }),\n\n/***/ \"./columns/style.js\":\n/*!**************************!*\\\n  !*** ./columns/style.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nObject.defineProperty(exports, \"BaseStyle\", {\n  enumerable: true,\n  get: function () {\n    return BaseStyle_1.BaseStyle;\n  }\n});\n\nconst ButtonStyle_1 = __webpack_require__(/*! ./style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\nObject.defineProperty(exports, \"ButtonStyle\", {\n  enumerable: true,\n  get: function () {\n    return ButtonStyle_1.ButtonStyle;\n  }\n});\n\nconst CheckStyle_1 = __webpack_require__(/*! ./style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\nObject.defineProperty(exports, \"CheckStyle\", {\n  enumerable: true,\n  get: function () {\n    return CheckStyle_1.CheckStyle;\n  }\n});\n\nconst IconStyle_1 = __webpack_require__(/*! ./style/IconStyle */ \"./columns/style/IconStyle.js\");\n\nObject.defineProperty(exports, \"IconStyle\", {\n  enumerable: true,\n  get: function () {\n    return IconStyle_1.IconStyle;\n  }\n});\n\nconst ImageStyle_1 = __webpack_require__(/*! ./style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\nObject.defineProperty(exports, \"ImageStyle\", {\n  enumerable: true,\n  get: function () {\n    return ImageStyle_1.ImageStyle;\n  }\n});\n\nconst MenuStyle_1 = __webpack_require__(/*! ./style/MenuStyle */ \"./columns/style/MenuStyle.js\");\n\nObject.defineProperty(exports, \"MenuStyle\", {\n  enumerable: true,\n  get: function () {\n    return MenuStyle_1.MenuStyle;\n  }\n});\n\nconst MultilineTextStyle_1 = __webpack_require__(/*! ./style/MultilineTextStyle */ \"./columns/style/MultilineTextStyle.js\");\n\nObject.defineProperty(exports, \"MultilineTextStyle\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextStyle_1.MultilineTextStyle;\n  }\n});\n\nconst NumberStyle_1 = __webpack_require__(/*! ./style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\nObject.defineProperty(exports, \"NumberStyle\", {\n  enumerable: true,\n  get: function () {\n    return NumberStyle_1.NumberStyle;\n  }\n});\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(/*! ./style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", {\n  enumerable: true,\n  get: function () {\n    return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n  }\n});\n\nconst RadioStyle_1 = __webpack_require__(/*! ./style/RadioStyle */ \"./columns/style/RadioStyle.js\");\n\nObject.defineProperty(exports, \"RadioStyle\", {\n  enumerable: true,\n  get: function () {\n    return RadioStyle_1.RadioStyle;\n  }\n});\n\nconst Style_1 = __webpack_require__(/*! ./style/Style */ \"./columns/style/Style.js\");\n\nObject.defineProperty(exports, \"Style\", {\n  enumerable: true,\n  get: function () {\n    return Style_1.Style;\n  }\n});\nconst {\n  EVENT_TYPE\n} = BaseStyle_1.BaseStyle;\nexports.EVENT_TYPE = EVENT_TYPE;\n\nfunction of(columnStyle, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nrecord, StyleClassDef = Style_1.Style) {\n  if (columnStyle) {\n    if (columnStyle instanceof BaseStyle_1.BaseStyle) {\n      return columnStyle;\n    } else if (typeof columnStyle === \"function\") {\n      return of(columnStyle(record), record, StyleClassDef);\n    } else if (record && columnStyle in record) {\n      return of(record[columnStyle], record, StyleClassDef);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return new StyleClassDef(columnStyle);\n  } else {\n    return StyleClassDef.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/style/BaseStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/BaseStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseStyle = void 0;\n\nconst EventTarget_1 = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\nconst STYLE_EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return STYLE_EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  constructor({\n    bgColor,\n    indicatorTopLeft,\n    indicatorTopRight,\n    indicatorBottomRight,\n    indicatorBottomLeft\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n    this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\n    this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\n    this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\n    this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  get indicatorTopLeft() {\n    return this._indicatorTopLeft;\n  }\n\n  set indicatorTopLeft(indicatorTopLeft) {\n    this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\n    this.doChangeStyle();\n  }\n\n  get indicatorTopRight() {\n    return this._indicatorTopRight;\n  }\n\n  set indicatorTopRight(indicatorTopRight) {\n    this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\n    this.doChangeStyle();\n  }\n\n  get indicatorBottomRight() {\n    return this._indicatorBottomRight;\n  }\n\n  set indicatorBottomRight(indicatorBottomRight) {\n    this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\n    this.doChangeStyle();\n  }\n\n  get indicatorBottomLeft() {\n    return this._indicatorBottomLeft;\n  }\n\n  set indicatorBottomLeft(indicatorBottomLeft) {\n    this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\nfunction normalizeIndicator(indicator) {\n  if (typeof indicator === \"string\") {\n    return {\n      style: indicator\n    };\n  }\n\n  return indicator;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BranchGraphStyle.js\":\n/*!*******************************************!*\\\n  !*** ./columns/style/BranchGraphStyle.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BranchGraphStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\n  switch (index % 3) {\n    case 0:\n      return \"#979797\";\n\n    case 1:\n      return \"#008fb5\";\n\n    case 2:\n      return \"#f1c109\";\n\n    default:\n  }\n\n  return \"#979797\";\n};\n\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BranchGraphStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n    this._margin = style.margin || 4;\n    this._circleSize = style.circleSize || 16;\n    this._branchLineWidth = style.branchLineWidth || 4;\n    this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\n  }\n\n  get branchColors() {\n    return this._branchColors;\n  }\n\n  set branchColors(branchColors) {\n    this._branchColors = branchColors;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  get circleSize() {\n    return this._circleSize;\n  }\n\n  set circleSize(circleSize) {\n    this._circleSize = circleSize;\n    this.doChangeStyle();\n  }\n\n  get branchLineWidth() {\n    return this._branchLineWidth;\n  }\n\n  set branchLineWidth(branchLineWidth) {\n    this._branchLineWidth = branchLineWidth;\n    this.doChangeStyle();\n  }\n\n  get mergeStyle() {\n    return this._mergeStyle;\n  }\n\n  set mergeStyle(mergeStyle) {\n    this._mergeStyle = mergeStyle;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new BranchGraphStyle(this);\n  }\n\n}\n\nexports.BranchGraphStyle = BranchGraphStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ButtonStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/ButtonStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass ButtonStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ButtonStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      buttonBgColor\n    } = style;\n    this._buttonBgColor = buttonBgColor;\n  }\n\n  get buttonBgColor() {\n    return this._buttonBgColor;\n  }\n\n  set buttonBgColor(buttonBgColor) {\n    this._buttonBgColor = buttonBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ButtonStyle(this);\n  }\n\n}\n\nexports.ButtonStyle = ButtonStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/CheckStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/CheckStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckStyle(this);\n  }\n\n}\n\nexports.CheckStyle = CheckStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/IconStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/IconStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IconStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass IconStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new IconStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n  }\n\n  clone() {\n    return new IconStyle(this);\n  }\n\n}\n\nexports.IconStyle = IconStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ImageStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/ImageStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ImageStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    this._imageSizing = style.imageSizing;\n    this._margin = style.margin || 4;\n  }\n\n  get imageSizing() {\n    return this._imageSizing;\n  }\n\n  set imageSizing(imageSizing) {\n    this._imageSizing = imageSizing;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ImageStyle(this);\n  }\n\n}\n\nexports.ImageStyle = ImageStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/MenuStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/MenuStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MenuStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nlet defaultStyle;\n\nclass MenuStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MenuStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    const {\n      appearance\n    } = style;\n    this._appearance = appearance;\n  }\n\n  get appearance() {\n    return this._appearance || \"menulist-button\";\n  }\n\n  set appearance(appearance) {\n    this._appearance = appearance;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new MenuStyle(this);\n  }\n\n}\n\nexports.MenuStyle = MenuStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/MultilineTextStyle.js\":\n/*!*********************************************!*\\\n  !*** ./columns/style/MultilineTextStyle.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass MultilineTextStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textBaseline: \"top\"\n    }));\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  clone() {\n    return new MultilineTextStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.MultilineTextStyle = MultilineTextStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/NumberStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/NumberStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass NumberStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new NumberStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"right\"\n    }));\n  }\n\n  clone() {\n    return new NumberStyle(this);\n  }\n\n}\n\nexports.NumberStyle = NumberStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/PercentCompleteBarStyle.js\":\n/*!**************************************************!*\\\n  !*** ./columns/style/PercentCompleteBarStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PercentCompleteBarStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nlet defaultStyle;\n\nconst DEFAULT_BAR_COLOR = num => {\n  if (num > 80) {\n    return \"#20a8d8\";\n  }\n\n  if (num > 50) {\n    return \"#4dbd74\";\n  }\n\n  if (num > 20) {\n    return \"#ffc107\";\n  }\n\n  return \"#f86c6b\";\n};\n\nclass PercentCompleteBarStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new PercentCompleteBarStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._barColor = style.barColor || DEFAULT_BAR_COLOR;\n    this._barBgColor = style.barBgColor || \"#f0f3f5\";\n    this._barHeight = style.barHeight || 3;\n  }\n\n  get barColor() {\n    return this._barColor;\n  }\n\n  set barColor(barColor) {\n    this._barColor = barColor;\n    this.doChangeStyle();\n  }\n\n  get barBgColor() {\n    return this._barBgColor;\n  }\n\n  set barBgColor(barBgColor) {\n    this._barBgColor = barBgColor;\n    this.doChangeStyle();\n  }\n\n  get barHeight() {\n    return this._barHeight;\n  }\n\n  set barHeight(barHeight) {\n    this._barHeight = barHeight;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new PercentCompleteBarStyle(this);\n  }\n\n}\n\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/RadioStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/RadioStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new RadioStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    } = style;\n    this._checkColor = checkColor;\n    this._uncheckBorderColor = uncheckBorderColor;\n    this._checkBorderColor = checkBorderColor;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n  }\n\n  get checkColor() {\n    return this._checkColor;\n  }\n\n  set checkColor(checkColor) {\n    this._checkColor = checkColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBorderColor() {\n    return this._uncheckBorderColor;\n  }\n\n  set uncheckBorderColor(uncheckBorderColor) {\n    this._uncheckBorderColor = uncheckBorderColor;\n    this.doChangeStyle();\n  }\n\n  get checkBorderColor() {\n    return this._checkBorderColor;\n  }\n\n  set checkBorderColor(checkBorderColor) {\n    this._checkBorderColor = checkBorderColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new RadioStyle(this);\n  }\n\n}\n\nexports.RadioStyle = RadioStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/StdBaseStyle.js\":\n/*!***************************************!*\\\n  !*** ./columns/style/StdBaseStyle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdBaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/Style.js\":\n/*!********************************!*\\\n  !*** ./columns/style/Style.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Style = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nlet defaultStyle;\n\nclass Style extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._padding = style.padding;\n    this._textOverflow = style.textOverflow || \"clip\";\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get padding() {\n    return this._padding;\n  }\n\n  set padding(padding) {\n    this._padding = padding;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n\n/***/ \"./columns/type.js\":\n/*!*************************!*\\\n  !*** ./columns/type.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\n\nconst BranchGraphColumn_1 = __webpack_require__(/*! ./type/BranchGraphColumn */ \"./columns/type/BranchGraphColumn.js\");\n\nObject.defineProperty(exports, \"BranchGraphColumn\", {\n  enumerable: true,\n  get: function () {\n    return BranchGraphColumn_1.BranchGraphColumn;\n  }\n});\n\nconst ButtonColumn_1 = __webpack_require__(/*! ./type/ButtonColumn */ \"./columns/type/ButtonColumn.js\");\n\nObject.defineProperty(exports, \"ButtonColumn\", {\n  enumerable: true,\n  get: function () {\n    return ButtonColumn_1.ButtonColumn;\n  }\n});\n\nconst CheckColumn_1 = __webpack_require__(/*! ./type/CheckColumn */ \"./columns/type/CheckColumn.js\");\n\nObject.defineProperty(exports, \"CheckColumn\", {\n  enumerable: true,\n  get: function () {\n    return CheckColumn_1.CheckColumn;\n  }\n});\n\nconst Column_1 = __webpack_require__(/*! ./type/Column */ \"./columns/type/Column.js\");\n\nObject.defineProperty(exports, \"Column\", {\n  enumerable: true,\n  get: function () {\n    return Column_1.Column;\n  }\n});\n\nconst IconColumn_1 = __webpack_require__(/*! ./type/IconColumn */ \"./columns/type/IconColumn.js\");\n\nObject.defineProperty(exports, \"IconColumn\", {\n  enumerable: true,\n  get: function () {\n    return IconColumn_1.IconColumn;\n  }\n});\n\nconst ImageColumn_1 = __webpack_require__(/*! ./type/ImageColumn */ \"./columns/type/ImageColumn.js\");\n\nObject.defineProperty(exports, \"ImageColumn\", {\n  enumerable: true,\n  get: function () {\n    return ImageColumn_1.ImageColumn;\n  }\n});\n\nconst MenuColumn_1 = __webpack_require__(/*! ./type/MenuColumn */ \"./columns/type/MenuColumn.js\");\n\nObject.defineProperty(exports, \"MenuColumn\", {\n  enumerable: true,\n  get: function () {\n    return MenuColumn_1.MenuColumn;\n  }\n});\n\nconst MultilineTextColumn_1 = __webpack_require__(/*! ./type/MultilineTextColumn */ \"./columns/type/MultilineTextColumn.js\");\n\nObject.defineProperty(exports, \"MultilineTextColumn\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextColumn_1.MultilineTextColumn;\n  }\n});\n\nconst NumberColumn_1 = __webpack_require__(/*! ./type/NumberColumn */ \"./columns/type/NumberColumn.js\");\n\nObject.defineProperty(exports, \"NumberColumn\", {\n  enumerable: true,\n  get: function () {\n    return NumberColumn_1.NumberColumn;\n  }\n});\n\nconst PercentCompleteBarColumn_1 = __webpack_require__(/*! ./type/PercentCompleteBarColumn */ \"./columns/type/PercentCompleteBarColumn.js\");\n\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", {\n  enumerable: true,\n  get: function () {\n    return PercentCompleteBarColumn_1.PercentCompleteBarColumn;\n  }\n});\n\nconst RadioColumn_1 = __webpack_require__(/*! ./type/RadioColumn */ \"./columns/type/RadioColumn.js\");\n\nObject.defineProperty(exports, \"RadioColumn\", {\n  enumerable: true,\n  get: function () {\n    return RadioColumn_1.RadioColumn;\n  }\n});\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Column_1.Column(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  NUMBER: new NumberColumn_1.NumberColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckColumn_1.CheckColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  RADIO: new RadioColumn_1.RadioColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  BUTTON: new ButtonColumn_1.ButtonColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  IMAGE: new ImageColumn_1.ImageColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn()\n};\n\nfunction of(columnType) {\n  if (!columnType) {\n    return TYPES.DEFAULT;\n  } else if (typeof columnType === \"string\") {\n    const key = columnType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return columnType;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/type/BaseColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/BaseColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseColumn = void 0;\n\nconst styleContents = __importStar(__webpack_require__(/*! ../style */ \"./columns/style.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseStyle_1 = __webpack_require__(/*! ../style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst handlers_1 = __webpack_require__(/*! ../indicator/handlers */ \"./columns/indicator/handlers.js\");\n\nconst {\n  setReadonly\n} = utils_1.obj;\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\n\nfunction isFadeinWhenCallbackInPromise(column, grid) {\n  if (column.fadeinWhenCallbackInPromise != null) {\n    return column.fadeinWhenCallbackInPromise;\n  }\n\n  return !!grid.configure(\"fadeinWhenCallbackInPromise\");\n}\n\nfunction getFadeinState(grid) {\n  let state = grid[COLUMN_FADEIN_STATE_ID];\n\n  if (!state) {\n    state = {\n      cells: {}\n    };\n    setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\n  }\n\n  return state;\n}\n\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n  return point => {\n    const state = getFadeinState(grid);\n    const stateKey = `${row}:${col}`;\n\n    if (point === 1) {\n      delete state.cells[stateKey];\n    } else {\n      state.cells[stateKey] = {\n        opacity: point\n      };\n    }\n\n    drawCellBase();\n    drawInternal();\n    const cellState = state.cells[stateKey];\n\n    if (cellState) {\n      //\n      const ctx = context.getContext();\n      ctx.globalAlpha = 1 - cellState.opacity;\n\n      try {\n        drawCellBase();\n      } finally {\n        ctx.globalAlpha = 1;\n      }\n    }\n  };\n}\n\nconst fadeinMgr = {\n  animate(grid, col, row, context, drawInternal, drawCellBase) {\n    // fadein animation\n    const state = getFadeinState(grid);\n    const activeFadeins = [_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase)];\n    state.activeFadeins = activeFadeins;\n    (0, animate_1.animate)(500, point => {\n      activeFadeins.forEach(f => f(point));\n\n      if (point === 1) {\n        delete state.activeFadeins;\n      }\n    });\n  },\n\n  margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n    const state = getFadeinState(grid);\n\n    if (state.activeFadeins) {\n      state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n    } else {\n      drawInternal();\n    }\n  }\n\n};\n\nclass BaseColumn {\n  constructor(option) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n    //Promisecallback\n\n    this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\n  }\n\n  get fadeinWhenCallbackInPromise() {\n    return this._fadeinWhenCallbackInPromise;\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    var _a;\n\n    const {\n      style,\n      getRecord,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase();\n    const record = getRecord();\n    let promise;\n\n    if ((0, utils_1.isPromise)(record)) {\n      promise = record;\n    } else if ((0, utils_1.isPromise)(cellValue)) {\n      promise = cellValue;\n    } else {\n      const msg = info.getMessage();\n\n      if ((0, utils_1.isPromise)(msg)) {\n        promise = msg;\n      }\n    } //\n\n\n    if (promise) {\n      const start = Date.now();\n      return Promise.all([record, cellValue, promise.then(() => cellValue).then(() => info.getMessage())]).then(({\n        0: record,\n        1: val,\n        2: message\n      }) => {\n        const currentContext = context.toCurrentContext();\n        const drawRect = currentContext.getDrawRect();\n\n        if (!drawRect) {\n          return;\n        }\n\n        const time = Date.now() - start;\n\n        const drawInternal = () => {\n          const currentContext = context.toCurrentContext();\n          const drawRect = currentContext.getDrawRect();\n\n          if (!drawRect) {\n            return;\n          }\n\n          const actStyle = styleContents.of(style, record, this.StyleClass);\n          this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\n          this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\n          this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\n        };\n\n        if (!isFadeinWhenCallbackInPromise(this, grid)) {\n          drawInternal(); //\n        } else {\n          const {\n            col,\n            row\n          } = context;\n\n          if (time < 80) {\n            //80msPromiseCallback\n            fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n          } else {\n            //\n            fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n          }\n        }\n      });\n    } else {\n      const actStyle = styleContents.of(style, record, this.StyleClass);\n      this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\n      this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n      this.drawIndicatorsInternal(context, actStyle, helper, grid, info); //\n\n      const {\n        col,\n        row\n      } = context;\n      const stateKey = `${col}:${row}`;\n      const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\n\n      if (cellState) {\n        const ctx = context.getContext();\n        ctx.globalAlpha = 1 - cellState.opacity;\n\n        try {\n          drawCellBase();\n        } finally {\n          ctx.globalAlpha = 1;\n        }\n      }\n\n      return undefined;\n    }\n  }\n\n  convertInternal(value) {\n    return value != null ? value : \"\";\n  }\n\n  drawMessageInternal(message, context, style, helper, grid, info) {\n    info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\n  }\n\n  drawIndicatorsInternal(context, style, helper, grid, info) {\n    var _a;\n\n    const {\n      indicatorTopLeft,\n      indicatorTopRight,\n      indicatorBottomRight,\n      indicatorBottomLeft\n    } = style;\n\n    for (const [indicatorStyle, kind] of [[indicatorTopLeft, 0\n    /* DrawIndicatorKind.topLeft */\n    ], [indicatorTopRight, 1\n    /* DrawIndicatorKind.topRight */\n    ], [indicatorBottomRight, 2\n    /* DrawIndicatorKind.bottomRight */\n    ], [indicatorBottomLeft, 3\n    /* DrawIndicatorKind.bottomLeft */\n    ]]) {\n      if (indicatorStyle) {\n        (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\n      }\n    }\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  getCopyCellValue(value, _grid, _cell) {\n    return value;\n  }\n\n}\n\nexports.BaseColumn = BaseColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/BranchGraphColumn.js\":\n/*!*******************************************!*\\\n  !*** ./columns/type/BranchGraphColumn.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BranchGraphColumn = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst BranchGraphStyle_1 = __webpack_require__(/*! ../style/BranchGraphStyle */ \"./columns/style/BranchGraphStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\n\nfunction getAllColumnData(grid, field, callback) {\n  const {\n    dataSource\n  } = grid;\n  const allData = [];\n  let promise;\n\n  for (let index = 0; index < dataSource.length; index++) {\n    const data = dataSource.getField(index, field);\n\n    if ((0, utils_1.isPromise)(data)) {\n      const dataIndex = allData.length;\n      allData.push(undefined);\n\n      if (!promise) {\n        promise = data.then(d => {\n          allData[dataIndex] = d;\n        });\n      } else {\n        promise = promise.then(() => data).then(d => {\n          allData[dataIndex] = d;\n        });\n      }\n    } else {\n      allData.push(data);\n    }\n  }\n\n  if (promise) {\n    promise.then(() => callback(allData));\n  } else {\n    callback(allData);\n  }\n}\n\nclass BranchLine {\n  constructor({\n    fromIndex,\n    toIndex,\n    colorIndex,\n    point\n  }) {\n    this.fromIndex = fromIndex;\n    this.toIndex = toIndex;\n    this.colorIndex = colorIndex;\n    this.point = point;\n  }\n\n}\n\nclass BranchPoint {\n  constructor({\n    index,\n    commit = false,\n    lines = [],\n    tag\n  }) {\n    this.index = index;\n    this.commit = commit;\n    this.lines = lines;\n    this.tag = tag;\n  }\n\n  static mergeLines(lines) {\n    const result = lines.filter(l => l.fromIndex != null && l.toIndex != null);\n    const froms = lines.filter(l => l.fromIndex != null && l.toIndex == null);\n    const tos = lines.filter(l => l.fromIndex == null && l.toIndex != null);\n    froms.forEach(f => {\n      for (let i = 0; i < tos.length; i++) {\n        const t = tos[i];\n\n        if (t.point) {\n          continue;\n        }\n\n        if (f.colorIndex === t.colorIndex) {\n          f.toIndex = t.toIndex;\n          tos.splice(i, 1);\n          break;\n        }\n      }\n\n      result.push(f);\n    });\n    return result.concat(tos);\n  }\n\n  static merge(a, b) {\n    if (!a) {\n      return b;\n    }\n\n    return new BranchPoint({\n      index: a.index,\n      commit: a.commit || b.commit,\n      lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n      tag: a.tag || b.tag\n    });\n  }\n\n}\n\nfunction joinLine(timeline, branchIndex) {\n  const reverse = [...timeline].reverse();\n\n  for (let i = 0; i < reverse.length; i++) {\n    const f = reverse[i][branchIndex];\n\n    if (f) {\n      f.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\n        toIndex: branchIndex,\n        colorIndex: branchIndex\n      })]));\n\n      for (let j = 0; j < i; j++) {\n        const tl = reverse[j];\n        tl[branchIndex] = new BranchPoint({\n          index: branchIndex,\n          lines: [new BranchLine({\n            fromIndex: branchIndex,\n            toIndex: branchIndex,\n            colorIndex: branchIndex\n          })]\n        });\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction branch({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = from != null ? branches.indexOf(from) : -1;\n  let toIndex = branches.indexOf(to);\n\n  if (toIndex < 0) {\n    toIndex = branches.length;\n    branches.push(to);\n  }\n\n  function findBranchRootIndex() {\n    for (let index = timeline.length - 1; index >= 0; index--) {\n      const tl = timeline[index];\n      const from = tl[fromIndex];\n\n      if (from && from.commit) {\n        return index;\n      }\n    }\n\n    return -1;\n  }\n\n  if (fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex\n    });\n  } else {\n    const fromTargetIndex = findBranchRootIndex();\n\n    if (fromTargetIndex === -1) {\n      return null;\n    }\n\n    const branchTargetFromIndex = fromTargetIndex + 1;\n    const branchPoint = new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        fromIndex,\n        colorIndex: toIndex\n      })]\n    });\n    let point;\n    let result = null;\n\n    if (branchTargetFromIndex < timeline.length) {\n      const targetLine = timeline[branchTargetFromIndex];\n      point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n    } else {\n      point = branchPoint;\n      result = branchPoint;\n    }\n\n    const from = timeline[fromTargetIndex][fromIndex];\n    from.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\n      toIndex,\n      colorIndex: toIndex,\n      point\n    })]));\n    return result;\n  }\n}\n\nfunction commit({\n  timeline,\n  branches\n}, name) {\n  const index = branches.indexOf(name);\n\n  if (index < 0) {\n    return null;\n  }\n\n  const result = new BranchPoint({\n    index,\n    commit: true\n  });\n\n  if (joinLine(timeline, index)) {\n    result.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\n      fromIndex: index,\n      colorIndex: index\n    })]));\n  }\n\n  return result;\n}\n\nfunction commitTag({\n  branches\n}, name, tag) {\n  let index = branches.indexOf(name);\n\n  if (index < 0) {\n    index = branches.length;\n    branches.push(name);\n  }\n\n  return new BranchPoint({\n    index,\n    tag\n  });\n}\n\nfunction commitMerge({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = branches.indexOf(from);\n  const toIndex = branches.indexOf(to);\n\n  if (toIndex < 0 || fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex,\n      commit: true\n    });\n  }\n\n  const result = new BranchPoint({\n    index: toIndex,\n    commit: true,\n    lines: [new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    }), new BranchLine({\n      fromIndex: toIndex,\n      colorIndex: toIndex\n    })]\n  });\n  const froms = [...timeline];\n  const fromTargetLine = froms.pop();\n\n  if (fromTargetLine) {\n    fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        toIndex,\n        colorIndex: fromIndex\n      })]\n    }));\n  }\n\n  if (joinLine(froms, fromIndex) && fromTargetLine) {\n    fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    })]));\n  }\n\n  joinLine(timeline, toIndex);\n  return result;\n}\n\nfunction calcCommand(info, command) {\n  const {\n    timeline\n  } = info;\n  const timelineData = []; // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n\n  const commands = Array.isArray(command) ? command : [command];\n  commands.forEach(cmd => {\n    if (!cmd) {\n      return;\n    }\n\n    let point;\n\n    if (cmd.command === \"branch\") {\n      const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\n      const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n      point = branch(info, from, to);\n    } else if (cmd.command === \"commit\") {\n      const {\n        branch\n      } = cmd;\n      point = commit(info, branch);\n    } else if (cmd.command === \"merge\") {\n      const {\n        from,\n        to\n      } = cmd.branch;\n      point = commitMerge(info, from, to);\n    } else if (cmd.command === \"tag\") {\n      const {\n        branch,\n        tag\n      } = cmd;\n      point = commitTag(info, branch, tag);\n    }\n\n    if (point && point.index > -1) {\n      timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n    }\n  });\n  timeline.push(timelineData);\n}\n\nfunction calcBranchesInfo(start, grid, field) {\n  const result = {\n    branches: [],\n    timeline: []\n  };\n  getAllColumnData(grid, field, data => {\n    if (start !== \"top\") {\n      data = [...data].reverse();\n    }\n\n    data.forEach(command => {\n      calcCommand(result, command);\n    });\n  });\n  return result;\n}\n\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n  let w = Math.max(width / branches.length + 1, 5);\n  timeline.forEach(tl => {\n    tl.forEach((p, index) => {\n      if (index <= 0) {\n        // \n        return;\n      }\n\n      if (p.tag) {\n        const textWidth = ctx.measureText(p.tag).width;\n\n        if (w * index + radius * 2 + 4 + textWidth > width) {\n          w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n        }\n      }\n    });\n  });\n  const result = [];\n  let x = left;\n  branches.forEach(() => {\n    result.push(Math.ceil(x + radius));\n    x += w;\n  });\n  return result;\n}\n\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\n  branchXPoints,\n  // margin,\n  branchColors,\n  branchLineWidth,\n  mergeStyle\n}, {\n  // width,\n  col,\n  row,\n  branches\n}) {\n  if (upLineIndex != null || downLineIndex != null) {\n    ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\n    ctx.lineWidth = branchLineWidth;\n    ctx.lineCap = \"round\";\n    ctx.beginPath();\n\n    if (upLineIndex != null) {\n      const upX = branchXPoints[upLineIndex];\n      const upRect = grid.getCellRelativeRect(col, row - 1);\n      const upY = upRect.top + upRect.height / 2;\n      ctx.moveTo(upX, upY);\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    } else {\n      ctx.moveTo(x, y);\n    }\n\n    if (downLineIndex != null) {\n      const downX = branchXPoints[downLineIndex];\n      const downRect = grid.getCellRelativeRect(col, row + 1);\n      const downY = downRect.top + downRect.height / 2;\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n      } else {\n        ctx.lineTo(downX, downY);\n      }\n    }\n\n    ctx.stroke();\n  }\n}\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\n\n\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._start = option.start || \"bottom\";\n    this._cache = option.cache != null ? option.cache : false;\n  }\n\n  get StyleClass() {\n    return BranchGraphStyle_1.BranchGraphStyle;\n  }\n\n  clearCache(grid) {\n    delete grid[_];\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    if (this._cache) {\n      const state = grid[_] || (grid[_] = new Map());\n      const {\n        col,\n        row\n      } = context;\n      const field = grid.getField(col, row);\n\n      if (!state.has(field)) {\n        state.set(field, calcBranchesInfo(this._start, grid, field));\n      }\n    }\n\n    return super.onDrawCell(cellValue, info, context, grid);\n  }\n\n  clone() {\n    return new BranchGraphColumn(this);\n  }\n\n  drawInternal(_value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a, _b;\n\n    const {\n      col,\n      row\n    } = context;\n    const field = grid.getField(col, row);\n    const {\n      timeline,\n      branches\n    } = (_b = this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\n    const {\n      upLineIndexKey,\n      downLineIndexKey\n    } = this._start !== \"top\" ? {\n      upLineIndexKey: \"toIndex\",\n      downLineIndexKey: \"fromIndex\"\n    } : {\n      upLineIndexKey: \"fromIndex\",\n      downLineIndexKey: \"toIndex\"\n    };\n    const data = this._start !== \"top\" ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\n    const {\n      branchColors,\n      branchLineWidth,\n      circleSize,\n      mergeStyle,\n      margin,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const rect = context.getRect();\n    const radius = circleSize / 2;\n    const width = rect.width - margin * 2;\n    helper.drawWithClip(context, ctx => {\n      ctx.textAlign = \"left\";\n      ctx.textBaseline = \"middle\";\n      const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n      const y = rect.top + rect.height / 2; // draw join lines\n\n      data.map((point, index) => point ? point.lines.map(line => ({\n        colorIndex: line.colorIndex,\n        upLineIndex: line[upLineIndexKey],\n        downLineIndex: line[downLineIndexKey],\n        pointIndex: index\n      })) : []).reduce((p, c) => p.concat(c), []) // flatMap\n      // order of overlap\n      .sort((a, b) => b.colorIndex - a.colorIndex).forEach(line => {\n        const x = branchXPoints[line.pointIndex];\n        renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n          margin,\n          branchXPoints,\n          branchLineWidth,\n          branchColors,\n          mergeStyle\n        }, {\n          width,\n          col,\n          row,\n          branches\n        });\n      }); // draw commit points\n\n      data.forEach((p, index) => {\n        if (p && p.commit) {\n          const x = branchXPoints[index];\n          ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\n          ctx.beginPath();\n          ctx.arc(x, y, radius, 0, Math.PI * 2, true);\n          ctx.fill();\n          ctx.closePath();\n        }\n      }); // draw tags\n\n      data.forEach((p, index) => {\n        if (p && p.tag) {\n          ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\n          ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n        }\n      });\n    });\n  }\n\n}\n\nexports.BranchGraphColumn = BranchGraphColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/ButtonColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/ButtonColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst ButtonStyle_1 = __webpack_require__(/*! ../style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\n\nclass ButtonColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._caption = option.caption;\n  }\n\n  get StyleClass() {\n    return ButtonStyle_1.ButtonStyle;\n  }\n\n  get caption() {\n    return this._caption;\n  }\n\n  withCaption(caption) {\n    const c = this.clone();\n    c._caption = caption;\n    return c;\n  }\n\n  clone() {\n    return new ButtonColumn(this);\n  }\n\n  convertInternal(value) {\n    return this._caption || super.convertInternal(value);\n  }\n\n  getCopyCellValue(value) {\n    return this._caption || value;\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      bgColor,\n      color,\n      buttonBgColor,\n      font,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    let active = false;\n    const state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (state) {\n      if (state.mouseActiveCell && (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\n        active = true;\n      } else {\n        const {\n          select\n        } = context.getSelection();\n\n        if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\n          active = true;\n        }\n      }\n    }\n\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.button(textValue, context, {\n        textAlign,\n        textBaseline,\n        bgColor: buttonBgColor,\n        color,\n        font,\n        padding,\n        shadow: active ? {\n          color: \"rgba(0, 0, 0, 0.48)\",\n          blur: 6,\n          offsetY: 3\n        } : {},\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.ButtonColumn = ButtonColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/CheckColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/CheckColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst CheckStyle_1 = __webpack_require__(/*! ../style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\n\nclass CheckColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return CheckStyle_1.CheckStyle;\n  }\n\n  clone() {\n    return new CheckColumn(this);\n  }\n\n  convertInternal(value) {\n    return (0, utils_1.toBoolean)(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.checkbox(value, context, opt);\n  }\n\n}\n\nexports.CheckColumn = CheckColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/Column.js\":\n/*!********************************!*\\\n  !*** ./columns/type/Column.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Column = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst Style_1 = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\nclass Column extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  clone() {\n    return new Column(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.text(textValue, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.Column = Column;\n\n/***/ }),\n\n/***/ \"./columns/type/IconColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/IconColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IconColumn = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\"));\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst IconStyle_1 = __webpack_require__(/*! ../style/IconStyle */ \"./columns/style/IconStyle.js\");\n\nfunction repeatArray(val, count) {\n  if (count === Infinity) {\n    count = 0;\n  }\n\n  const a = [];\n\n  for (let i = 0; i < count; i++) {\n    a.push(val);\n  }\n\n  return a;\n}\n\nclass IconColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._tagName = option.tagName || \"i\";\n    this._className = option.className;\n    this._content = option.content;\n    this._name = option.name;\n    this._iconWidth = option.iconWidth;\n  }\n\n  get StyleClass() {\n    return IconStyle_1.IconStyle;\n  }\n\n  clone() {\n    return new IconColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    const num = Number(value);\n\n    if (!isNaN(num)) {\n      const icon = {};\n      icons.iconPropKeys.forEach(k => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        icon[k] = style[k];\n      });\n      icon.className = this._className;\n      icon.tagName = this._tagName;\n\n      if (this._content) {\n        icon.content = this._content;\n      }\n\n      icon.name = this._name;\n\n      if (this._iconWidth) {\n        icon.width = this._iconWidth;\n      }\n\n      info.getIcon = () => repeatArray(icon, num);\n    } else {\n      info.getIcon = () => null;\n    }\n\n    super.drawInternal(\"\", context, style, helper, grid, info);\n  }\n\n}\n\nexports.IconColumn = IconColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/ImageColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/ImageColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst ImageStyle_1 = __webpack_require__(/*! ../style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\nconst imgs_1 = __webpack_require__(/*! ../../internal/imgs */ \"./internal/imgs.js\");\n\nconst MAX_LRU_CACHE_SIZE = 50;\n\nfunction getImage(url) {\n  return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\n}\n\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n  let newWidth = width;\n  let newHeight = height;\n\n  if (newWidth > maxWidth) {\n    newWidth = maxWidth;\n    newHeight = newWidth * height / width;\n  }\n\n  if (newHeight > maxHeight) {\n    newHeight = maxHeight;\n    newWidth = newHeight * width / height;\n  }\n\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n}\n\nclass ImageColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return ImageStyle_1.ImageStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    return super.onDrawCell(getImage(cellValue), info, context, grid);\n  }\n\n  clone() {\n    return new ImageColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase\n  }) {\n    if (value) {\n      const {\n        textAlign,\n        textBaseline,\n        margin,\n        bgColor\n      } = style;\n\n      if (bgColor) {\n        drawCellBase({\n          bgColor\n        });\n      }\n\n      helper.drawWithClip(context, ctx => {\n        ctx.textAlign = textAlign;\n        ctx.textBaseline = textBaseline;\n        const rect = context.getRect();\n\n        if (style.imageSizing === \"keep-aspect-ratio\") {\n          const {\n            width,\n            height\n          } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n          const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\n            offset: margin\n          });\n          ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n        } else {\n          ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n        }\n      });\n    }\n  }\n\n}\n\nexports.ImageColumn = ImageColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/MenuColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/MenuColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MenuColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst MenuStyle_1 = __webpack_require__(/*! ../style/MenuStyle */ \"./columns/style/MenuStyle.js\");\n\nconst menu_items_1 = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nclass MenuColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._options = (0, menu_items_1.normalize)(option.options);\n  }\n\n  get StyleClass() {\n    return MenuStyle_1.MenuStyle;\n  }\n\n  clone() {\n    return new MenuColumn(this);\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  withOptions(options) {\n    const c = this.clone();\n    c._options = (0, menu_items_1.normalize)(options);\n    return c;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      font,\n      bgColor,\n      padding,\n      textOverflow,\n      appearance\n    } = style;\n    let {\n      color\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const convertedValue = this._convertInternal(value);\n\n    const text = convertedValue != null ? String(convertedValue) : \"\";\n    helper.testFontLoad(font, text, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\n      const textPadding = basePadding.slice(0);\n      textPadding[1] += 26; // icon padding\n\n      const iconPadding = basePadding.slice(0);\n      iconPadding[1] += 8;\n\n      if (color == null && (value == null || value === \"\")) {\n        color = \"rgba(0, 0, 0, .38)\";\n      }\n\n      helper.text(text, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding: textPadding,\n        textOverflow,\n        icons\n      });\n\n      if (appearance === \"menulist-button\") {\n        // draw dropdown arrow icon\n        helper.text(\"\", context, {\n          textAlign: \"right\",\n          textBaseline,\n          color,\n          font,\n          icons: [{\n            path: \"M0 2 5 7 10 2z\",\n            width: 10,\n            color: \"rgba(0, 0, 0, .54)\"\n          }],\n          padding: iconPadding\n        });\n      } else if (appearance !== \"none\") {\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        console.warn(`unsupported appearance:${appearance}`);\n      }\n    });\n  }\n\n  convertInternal(value) {\n    return value;\n  }\n\n  _convertInternal(value) {\n    const options = this._options;\n\n    for (let i = 0; i < options.length; i++) {\n      const option = options[i];\n\n      if (option.value === value) {\n        value = option.label;\n        break;\n      }\n    }\n\n    return super.convertInternal(value);\n  }\n\n  getCopyCellValue(value) {\n    return this._convertInternal(value);\n  }\n\n}\n\nexports.MenuColumn = MenuColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/MultilineTextColumn.js\":\n/*!*********************************************!*\\\n  !*** ./columns/type/MultilineTextColumn.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst MultilineTextStyle_1 = __webpack_require__(/*! ../style/MultilineTextStyle */ \"./columns/style/MultilineTextStyle.js\");\n\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  get StyleClass() {\n    return MultilineTextStyle_1.MultilineTextStyle;\n  }\n\n  clone() {\n    return new MultilineTextColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.multilineText(multilines, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.MultilineTextColumn = MultilineTextColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/NumberColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/NumberColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberColumn = void 0;\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst NumberStyle_1 = __webpack_require__(/*! ../style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\nlet defaultFotmat;\n\nclass NumberColumn extends Column_1.Column {\n  static get defaultFotmat() {\n    return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n  }\n\n  static set defaultFotmat(fmt) {\n    defaultFotmat = fmt;\n  }\n\n  constructor(option = {}) {\n    super(option);\n    this._format = option.format;\n  }\n\n  get StyleClass() {\n    return NumberStyle_1.NumberStyle;\n  }\n\n  clone() {\n    return new NumberColumn(this);\n  }\n\n  get format() {\n    return this._format;\n  }\n\n  withFormat(format) {\n    const c = this.clone();\n    c._format = format;\n    return c;\n  }\n\n  convertInternal(value) {\n    const num = Number(value);\n\n    if (isNaN(num)) {\n      const convertedValue = super.convertInternal(value);\n      return convertedValue != null ? String(convertedValue) : \"\";\n    }\n\n    const format = this._format || NumberColumn.defaultFotmat;\n    return format.format(num);\n  }\n\n}\n\nexports.NumberColumn = NumberColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/PercentCompleteBarColumn.js\":\n/*!**************************************************!*\\\n  !*** ./columns/type/PercentCompleteBarColumn.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PercentCompleteBarColumn = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(/*! ../style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\nconst MARGIN = 2;\n\nclass PercentCompleteBarColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._min = option.min || 0;\n    this._max = option.max || this._min + 100;\n\n    this._formatter = option.formatter || (v => v);\n  }\n\n  get StyleClass() {\n    return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n  }\n\n  clone() {\n    return new PercentCompleteBarColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    super.drawInternal(this._formatter(value), context, style, helper, grid, info);\n    const {\n      barColor,\n      barBgColor,\n      barHeight\n    } = style;\n    let textValue = value != null ? String(value) : \"\";\n\n    if (utils_1.str.endsWith(textValue, \"%\")) {\n      textValue = textValue.slice(0, -1);\n    }\n\n    const num = Number(textValue);\n\n    if (isNaN(num)) {\n      return;\n    }\n\n    const rate = num < this._min ? 0 : num > this._max ? 1 : (num - this._min) / (this._max - this._min);\n    helper.drawWithClip(context, ctx => {\n      const rect = context.getRect();\n      const barMaxWidth = rect.width - MARGIN * 2 - 1;\n      /**/\n\n      const barTop = rect.bottom - MARGIN - barHeight - 1;\n      /**/\n\n      const barLeft = rect.left + MARGIN;\n      ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n      ctx.fill();\n      const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n      ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barSize, barHeight);\n      ctx.fill();\n    });\n  }\n\n}\n\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/RadioColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/RadioColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst RadioStyle_1 = __webpack_require__(/*! ../style/RadioStyle */ \"./columns/style/RadioStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\n\nclass RadioColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return RadioStyle_1.RadioStyle;\n  }\n\n  clone() {\n    return new RadioColumn(this);\n  }\n\n  convertInternal(value) {\n    return (0, utils_1.toBoolean)(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.radioButton(value, context, opt);\n  }\n\n}\n\nexports.RadioColumn = RadioColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/columnUtils.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/columnUtils.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadIcons = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nfunction loadIcons(icon, context, helper, callback) {\n  let argIcon = undefined;\n\n  if (icon) {\n    if ((0, utils_1.isPromise)(icon)) {\n      icon.then(i => {\n        loadIcons(i, context.toCurrentContext(), helper, callback);\n      });\n    } else {\n      const iconList = icons.toNormalizeArray(icon);\n      iconList.forEach(i => {\n        if (i.font && i.content) {\n          helper.testFontLoad(i.font, i.content, context);\n        }\n      });\n      argIcon = iconList;\n    }\n  }\n\n  callback(argIcon, context);\n}\n\nexports.loadIcons = loadIcons;\n\n/***/ }),\n\n/***/ \"./columns/utils/index.js\":\n/*!********************************!*\\\n  !*** ./columns/utils/index.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toBoolean = void 0;\n\nfunction toBoolean(val) {\n  if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return false;\n    } else if (val === \"off\") {\n      return false;\n    } else if (/^0+$/.exec(val)) {\n      return false;\n    }\n  }\n\n  return Boolean(val);\n}\n\nexports.toBoolean = toBoolean;\n\n/***/ }),\n\n/***/ \"./core.js\":\n/*!*****************!*\\\n  !*** ./core.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\n\nconst DrawGrid_1 = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\nObject.defineProperty(exports, \"DrawGrid\", {\n  enumerable: true,\n  get: function () {\n    return DrawGrid_1.DrawGrid;\n  }\n});\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ./core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nObject.defineProperty(exports, \"EVENT_TYPE\", {\n  enumerable: true,\n  get: function () {\n    return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n  }\n});\n\n/***/ }),\n\n/***/ \"./core/DG_EVENT_TYPE.js\":\n/*!*******************************!*\\\n  !*** ./core/DG_EVENT_TYPE.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DG_EVENT_TYPE = void 0;\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\n\nexports.DG_EVENT_TYPE = {\n  CLICK_CELL: \"click_cell\",\n  DBLCLICK_CELL: \"dblclick_cell\",\n  DBLTAP_CELL: \"dbltap_cell\",\n  MOUSEDOWN_CELL: \"mousedown_cell\",\n  MOUSEUP_CELL: \"mouseup_cell\",\n  SELECTED_CELL: \"selected_cell\",\n  KEYDOWN: \"keydown\",\n  MOUSEMOVE_CELL: \"mousemove_cell\",\n  MOUSEENTER_CELL: \"mouseenter_cell\",\n  MOUSELEAVE_CELL: \"mouseleave_cell\",\n  MOUSEOVER_CELL: \"mouseover_cell\",\n  MOUSEOUT_CELL: \"mouseout_cell\",\n  TOUCHSTART_CELL: \"touchstart_cell\",\n  CONTEXTMENU_CELL: \"contextmenu_cell\",\n  INPUT_CELL: \"input_cell\",\n  PASTE_CELL: \"paste_cell\",\n  DELETE_CELL: \"delete_cell\",\n  EDITABLEINPUT_CELL: \"editableinput_cell\",\n  MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\n  RESIZE_COLUMN: \"resize_column\",\n  SCROLL: \"scroll\",\n  FOCUS_GRID: \"focus_grid\",\n  BLUR_GRID: \"blur_grid\"\n};\n\n/***/ }),\n\n/***/ \"./core/DrawGrid.js\":\n/*!**************************!*\\\n  !*** ./core/DrawGrid.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DrawGrid = void 0;\n\nconst calc = __importStar(__webpack_require__(/*! ../internal/calc */ \"./internal/calc.js\"));\n\nconst hiDPI = __importStar(__webpack_require__(/*! ../internal/hiDPI */ \"./internal/hiDPI.js\"));\n\nconst style = __importStar(__webpack_require__(/*! ../internal/style */ \"./internal/style.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst paste_utils_1 = __webpack_require__(/*! ../internal/paste-utils */ \"./internal/paste-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ./DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst EventTarget_1 = __webpack_require__(/*! ./EventTarget */ \"./core/EventTarget.js\");\n\nconst NumberMap_1 = __webpack_require__(/*! ../internal/NumberMap */ \"./internal/NumberMap.js\");\n\nconst Rect_1 = __webpack_require__(/*! ../internal/Rect */ \"./internal/Rect.js\");\n\nconst Scrollable_1 = __webpack_require__(/*! ../internal/Scrollable */ \"./internal/Scrollable.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\"); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst {\n  /** @private */\n  isTouchEvent,\n\n  /** @private */\n  getMouseButtons,\n\n  /** @private */\n  getKeyCode,\n\n  /** @private */\n  cancel: cancelEvent\n} = utils_1.event;\n/** @private */\n\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\n/** @private */\n\n\nfunction createRootElement() {\n  const element = document.createElement(\"div\");\n  element.classList.add(\"cheetah-grid\");\n  return element;\n}\n/** @private */\n\n\nconst KEY_BS = 8;\n/** @private */\n\nconst KEY_TAB = 9;\n/** @private */\n\nconst KEY_ENTER = 13;\n/** @private */\n\nconst KEY_END = 35;\n/** @private */\n\nconst KEY_HOME = 36;\n/** @private */\n\nconst KEY_LEFT = 37;\n/** @private */\n\nconst KEY_UP = 38;\n/** @private */\n\nconst KEY_RIGHT = 39;\n/** @private */\n\nconst KEY_DOWN = 40;\n/** @private */\n\nconst KEY_DEL = 46;\n/** @private */\n\nconst KEY_ALPHA_A = 65;\n/** @private */\n\nconst KEY_ALPHA_C = 67;\n/** @private */\n\nconst KEY_ALPHA_V = 86; //private methods\n\n/** @private */\n\nfunction _vibrate(e) {\n  if (navigator.vibrate && isTouchEvent(e)) {\n    navigator.vibrate(50);\n  }\n}\n/** @private */\n\n\nfunction _getTargetRowAt(absoluteY) {\n  const internal = this.getTargetRowAtInternal(absoluteY);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const findBefore = (startRow, startBottom) => {\n    let bottom = startBottom;\n\n    for (let row = startRow; row >= 0; row--) {\n      const height = _getRowHeight.call(this, row);\n\n      const top = bottom - height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      bottom = top;\n    }\n\n    return null;\n  };\n\n  const findAfter = (startRow, startBottom) => {\n    let top = startBottom - _getRowHeight.call(this, startRow);\n\n    const {\n      rowCount\n    } = this[_];\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = top + height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      top = bottom;\n    }\n\n    return null;\n  };\n\n  const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\n\n  const bottom = _getRowsHeight.call(this, 0, candidateRow);\n\n  if (absoluteY >= bottom) {\n    return findAfter(candidateRow, bottom);\n  } else {\n    return findBefore(candidateRow, bottom);\n  }\n}\n/** @private */\n\n\nfunction _getTargetColAt(grid, absoluteX) {\n  let left = 0;\n  const {\n    colCount\n  } = grid[_];\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  let {\n    top\n  } = grid[_].scroll;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row);\n\n    const bottom = top + height;\n\n    if (bottom > absoluteY) {\n      return {\n        top,\n        row\n      };\n    }\n\n    top = bottom;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenColAt(grid, absoluteX) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  let {\n    left\n  } = grid[_].scroll;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getFrozenRowsRect(grid) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  const {\n    top\n  } = grid[_].scroll;\n  let height = 0;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    height += _getRowHeight.call(grid, row);\n  }\n\n  return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n}\n/** @private */\n\n\nfunction _getFrozenColsRect(grid) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  const {\n    left\n  } = grid[_].scroll;\n  let width = 0;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    width += _getColWidth(grid, col);\n  }\n\n  return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n}\n/** @private */\n\n\nfunction _getCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return null;\n  }\n\n  return grid[_].drawCells[row][col];\n}\n/** @private */\n\n\nfunction _putCellDrawing(grid, col, row, context) {\n  if (!grid[_].drawCells[row]) {\n    grid[_].drawCells[row] = {};\n  }\n\n  grid[_].drawCells[row][col] = context;\n}\n/** @private */\n\n\nfunction _removeCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return;\n  }\n\n  delete grid[_].drawCells[row][col];\n\n  if (Object.keys(grid[_].drawCells[row]).length === 0) {\n    delete grid[_].drawCells[row];\n  }\n}\n/** @private */\n\n\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\n  const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n  const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n\n  if (drawRect.height > 0 && drawRect.width > 0) {\n    ctx.save();\n\n    try {\n      const cellDrawing = _getCellDrawing(this, col, row);\n\n      if (cellDrawing) {\n        cellDrawing.cancel();\n      }\n\n      const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\n      const p = this.onDrawCell(col, row, dcContext);\n\n      if ((0, utils_1.isPromise)(p)) {\n        //\n        _putCellDrawing(this, col, row, dcContext);\n\n        const pCol = col;\n\n        dcContext._delayMode(this, () => {\n          _removeCellDrawing(this, pCol, row);\n        });\n\n        p.then(() => {\n          dcContext.terminate();\n        });\n      }\n    } finally {\n      ctx.restore();\n    }\n  }\n}\n/** @private */\n\n\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\n  const {\n    colCount\n  } = grid[_];\n\n  const drawOuter = (col, absoluteLeft) => {\n    //\n    if (col >= colCount - 1 && grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n      const outerLeft = absoluteLeft - visibleRect.left;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteLeft = 0;\n\n  if (initFrozenCol) {\n    let absoluteLeft = initFrozenCol.left;\n    const count = grid[_].frozenColCount;\n\n    for (let {\n      col\n    } = initFrozenCol; col < count; col++) {\n      const width = _getColWidth(grid, col);\n\n      _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\n\n      absoluteLeft += width;\n\n      if (drawRight <= absoluteLeft) {\n        //\n        drawOuter(col, absoluteLeft);\n        return;\n      }\n    }\n\n    skipAbsoluteLeft = absoluteLeft;\n  }\n\n  let absoluteLeft = initCol.left;\n\n  for (let {\n    col\n  } = initCol; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\n\n    absoluteLeft += width;\n\n    if (drawRight <= absoluteLeft) {\n      //\n      drawOuter(col, absoluteLeft);\n      return;\n    }\n  }\n\n  drawOuter(colCount - 1, absoluteLeft);\n}\n/** @private */\n\n\nfunction _getInitContext() {\n  return this._getInitContext();\n}\n/** @private */\n\n\nfunction _invalidateRect(grid, drawRect) {\n  const visibleRect = _getVisibleRect(grid);\n\n  const {\n    rowCount\n  } = grid[_];\n\n  const ctx = _getInitContext.call(grid);\n\n  const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\n    top: _getRowsHeight.call(grid, 0, rowCount - 1),\n    row: rowCount\n  };\n  const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n    left: _getColsWidth(grid, 0, grid[_].colCount - 1),\n    col: grid[_].colCount\n  };\n  const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n  const drawRight = Math.min(visibleRect.right, drawRect.right);\n\n  const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n\n  const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n\n  const drawLayers = new DrawLayers();\n\n  const drawOuter = (row, absoluteTop) => {\n    //\n    if (row >= rowCount - 1 && grid[_].canvas.height > absoluteTop - visibleRect.top) {\n      const outerTop = absoluteTop - visibleRect.top;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteTop = 0;\n\n  if (initFrozenRow) {\n    let absoluteTop = initFrozenRow.top;\n    const count = grid[_].frozenRowCount;\n\n    for (let {\n      row\n    } = initFrozenRow; row < count; row++) {\n      const height = _getRowHeight.call(grid, row);\n\n      _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\n\n      absoluteTop += height;\n\n      if (drawBottom <= absoluteTop) {\n        //\n        drawOuter(row, absoluteTop);\n        drawLayers.draw(ctx);\n        return;\n      }\n    }\n\n    skipAbsoluteTop = absoluteTop;\n  }\n\n  let absoluteTop = initRow.top;\n\n  for (let {\n    row\n  } = initRow; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row); //\n\n\n    _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\n\n    absoluteTop += height;\n\n    if (drawBottom <= absoluteTop) {\n      //\n      drawOuter(row, absoluteTop);\n      drawLayers.draw(ctx);\n      return;\n    }\n  }\n\n  drawOuter(rowCount - 1, absoluteTop);\n  drawLayers.draw(ctx);\n}\n/** @private */\n\n\nfunction _toPxWidth(grid, width) {\n  return Math.round(calc.toPx(width, grid[_].calcWidthContext));\n}\n/** @private */\n\n\nfunction _adjustColWidth(grid, col, orgWidth) {\n  const limits = _getColWidthLimits(grid, col);\n\n  return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\n}\n/** @private */\n\n\nfunction _applyColWidthLimits(limits, orgWidth) {\n  if (!limits) {\n    return orgWidth;\n  }\n\n  if (limits.min) {\n    if (limits.min > orgWidth) {\n      return limits.min;\n    }\n  }\n\n  if (limits.max) {\n    if (limits.max < orgWidth) {\n      return limits.max;\n    }\n  }\n\n  return orgWidth;\n}\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\n\n\nfunction _getColWidthDefine(grid, col) {\n  const width = grid[_].colWidthsMap.get(col);\n\n  if (width) {\n    return width;\n  }\n\n  return grid.defaultColWidth;\n}\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\n\n\nfunction _getColWidthLimits(grid, col) {\n  const limit = grid[_].colWidthsLimit[col];\n\n  if (!limit) {\n    return null;\n  }\n\n  const result = {};\n\n  if (limit.min) {\n    result.min = _toPxWidth(grid, limit.min);\n    result.minDef = limit.min;\n  }\n\n  if (limit.max) {\n    result.max = _toPxWidth(grid, limit.max);\n    result.maxDef = limit.max;\n  }\n\n  return result;\n}\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\n\n\nfunction isAutoDefine(width) {\n  return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\n}\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\n\n\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\n  const fullWidth = grid[_].calcWidthContext.full;\n  let sumMin = 0;\n  const others = [];\n  let autoCount = 0;\n  const hasLimitsOnAuto = [];\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    const limits = _getColWidthLimits(grid, col);\n\n    if (isAutoDefine(def)) {\n      if (limits) {\n        hasLimitsOnAuto.push(limits);\n\n        if (limits.min) {\n          sumMin += limits.min;\n        }\n      }\n\n      autoCount++;\n    } else {\n      let expr = def;\n\n      if (limits) {\n        const orgWidth = _toPxWidth(grid, expr);\n\n        const newWidth = _applyColWidthLimits(limits, orgWidth);\n\n        if (orgWidth !== newWidth) {\n          expr = `${newWidth}px`;\n        }\n\n        sumMin += newWidth;\n      }\n\n      others.push(expr);\n    }\n\n    if (shortCircuit && sumMin > fullWidth) {\n      // Returns 0px because it has consumed the full width.\n      return \"0px\";\n    }\n  }\n\n  if (hasLimitsOnAuto.length && others.length) {\n    const autoPx = (fullWidth - _toPxWidth(grid, `calc(${others.map(c => typeof c === \"number\" ? `${c}px` : c).join(\" + \")})`)) / autoCount;\n    hasLimitsOnAuto.forEach(limits => {\n      if (limits.min && autoPx < limits.min) {\n        others.push(limits.minDef);\n        autoCount--;\n      } else if (limits.max && limits.max < autoPx) {\n        others.push(limits.maxDef);\n        autoCount--;\n      }\n    });\n\n    if (shortCircuit && autoCount <= 0) {\n      return `${autoPx}px`;\n    }\n  }\n\n  if (others.length) {\n    const strDefs = [];\n    let num = 0;\n    others.forEach(c => {\n      if (typeof c === \"number\") {\n        num += c;\n      } else {\n        strDefs.push(c);\n      }\n    });\n    strDefs.push(`${num}px`);\n    return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\n  } else {\n    return `${100 / autoCount}%`;\n  }\n}\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\n\n\nfunction _colWidthDefineToPxWidth(grid, width) {\n  if (isAutoDefine(width)) {\n    return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\n  }\n\n  return _toPxWidth(grid, width);\n}\n/** @private */\n\n\nfunction _getColWidth(grid, col) {\n  const width = _getColWidthDefine(grid, col);\n\n  return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\n}\n/** @private */\n\n\nfunction _setColWidth(grid, col, width) {\n  if (width != null) {\n    grid[_].colWidthsMap.put(col, width);\n  } else {\n    grid[_].colWidthsMap.remove(col);\n  }\n}\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\n\n\nfunction _storeAutoColWidthExprs(grid) {\n  let expr = null;\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    if (isAutoDefine(def)) {\n      _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\n    }\n  }\n}\n/** @private */\n\n\nfunction _getColsWidth(grid, startCol, endCol) {\n  const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\n\n  const colCount = endCol - startCol + 1;\n  let w = defaultColPxWidth * colCount;\n\n  grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n    w += _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) - defaultColPxWidth;\n  });\n\n  for (let col = startCol; col <= endCol; col++) {\n    if (grid[_].colWidthsMap.has(col)) {\n      continue;\n    }\n\n    const adj = _adjustColWidth(grid, col, defaultColPxWidth);\n\n    if (adj !== defaultColPxWidth) {\n      w += adj - defaultColPxWidth;\n    }\n  }\n\n  return w;\n}\n/** @private */\n\n\nfunction _getRowHeight(row) {\n  const internal = this.getRowHeightInternal(row);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const height = this[_].rowHeightsMap.get(row);\n\n  if (height) {\n    return height;\n  }\n\n  return this[_].defaultRowHeight;\n}\n/** @private */\n\n\nfunction _setRowHeight(grid, row, height) {\n  if (height != null) {\n    grid[_].rowHeightsMap.put(row, height);\n  } else {\n    grid[_].rowHeightsMap.remove(row);\n  }\n}\n/** @private */\n\n\nfunction _getRowsHeight(startRow, endRow) {\n  const internal = this.getRowsHeightInternal(startRow, endRow);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const rowCount = endRow - startRow + 1;\n  let h = this[_].defaultRowHeight * rowCount;\n\n  this[_].rowHeightsMap.each(startRow, endRow, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _getScrollWidth(grid) {\n  return _getColsWidth(grid, 0, grid[_].colCount - 1);\n}\n/** @private */\n\n\nfunction _getScrollHeight(row) {\n  const internal = this.getScrollHeightInternal(row);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  let h = this[_].defaultRowHeight * this[_].rowCount;\n\n  this[_].rowHeightsMap.each(0, this[_].rowCount - 1, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _onScroll(grid, _e) {\n  const lastLeft = grid[_].scroll.left;\n  const lastTop = grid[_].scroll.top;\n  const moveX = grid[_].scrollable.scrollLeft - lastLeft;\n  const moveY = grid[_].scrollable.scrollTop - lastTop; //\n\n  grid[_].scroll = {\n    left: grid[_].scrollable.scrollLeft,\n    top: grid[_].scrollable.scrollTop\n  }; // If the focus is on the header, recalculate and move the focus position.\n\n  const {\n    focus\n  } = grid[_].selection;\n  const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\n\n  if (isFrozenCell && ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX || (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY)) {\n    grid.setFocusCursor(focus.col, focus.row);\n  }\n\n  const visibleRect = _getVisibleRect(grid);\n\n  if (Math.abs(moveX) >= visibleRect.width || Math.abs(moveY) >= visibleRect.height) {\n    //\n    _invalidateRect(grid, visibleRect);\n  } else {\n    //\n    grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n\n    if (moveX !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveX < 0) {\n        redrawRect.width = -moveX;\n\n        if (grid[_].frozenColCount > 0) {\n          //\n          const frozenRect = _getFrozenColsRect(grid);\n\n          redrawRect.width += frozenRect.width;\n        }\n      } else if (moveX > 0) {\n        redrawRect.left = redrawRect.right - moveX;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveX > 0) {\n        if (grid[_].frozenColCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenColsRect(grid));\n        }\n      }\n    }\n\n    if (moveY !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveY < 0) {\n        redrawRect.height = -moveY;\n\n        if (grid[_].frozenRowCount > 0) {\n          //\n          const frozenRect = _getFrozenRowsRect(grid);\n\n          redrawRect.height += frozenRect.height;\n        }\n      } else if (moveY > 0) {\n        redrawRect.top = redrawRect.bottom - moveY;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveY > 0) {\n        if (grid[_].frozenRowCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenRowsRect(grid));\n        }\n      }\n    }\n  }\n}\n/** @private */\n// eslint-disable-next-line complexity\n\n\nfunction _onKeyDownMove(e) {\n  var _a, _b, _c;\n\n  const {\n    shiftKey\n  } = e;\n  const keyCode = getKeyCode(e);\n  const focusCell = shiftKey ? this.selection.focus : this.selection.select;\n\n  if (keyCode === KEY_LEFT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"W\");\n    } else {\n      if (!hMove.call(this, \"W\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_UP) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", null);\n    } else {\n      if (!vMove.call(this, \"N\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_RIGHT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"E\");\n    } else {\n      if (!hMove.call(this, \"E\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_DOWN) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", null);\n    } else {\n      if (!vMove.call(this, \"S\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_HOME) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", \"W\");\n    } else {\n      move(this, null, \"W\");\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_END) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", \"E\");\n    } else {\n      move(this, null, \"E\");\n    }\n\n    cancelEvent(e);\n  } else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n    let newCell = null;\n\n    if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\n      newCell = this.keyboardOptions.moveCellOnTab({\n        cell: focusCell,\n        grid: this,\n        event: e\n      });\n    }\n\n    if (newCell) {\n      _moveFocusCell.call(this, newCell.col, newCell.row, false);\n    } else if (shiftKey) {\n      if (!hMove.call(this, \"W\", false)) {\n        const row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n        if (0 > row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, this.colCount - 1, row, false);\n      }\n    } else {\n      if (!hMove.call(this, \"E\", false)) {\n        const row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n        if (this.rowCount <= row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, 0, row, false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n    let newCell = null;\n\n    if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\n      newCell = this.keyboardOptions.moveCellOnEnter({\n        cell: focusCell,\n        grid: this,\n        event: e\n      });\n    }\n\n    if (newCell) {\n      _moveFocusCell.call(this, newCell.col, newCell.row, false);\n    } else if (shiftKey) {\n      if (!vMove.call(this, \"N\", false)) {\n        const col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n        if (0 > col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, this.rowCount - 1, false);\n      }\n    } else {\n      if (!vMove.call(this, \"S\", false)) {\n        const col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n        if (this.colCount <= col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n    this.selection.range = {\n      start: {\n        col: 0,\n        row: 0\n      },\n      end: {\n        col: this.colCount - 1,\n        row: this.rowCount - 1\n      }\n    };\n    this.invalidate();\n    cancelEvent(e);\n  }\n\n  function move(grid, vDir, hDir) {\n    const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\n    const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\n\n    _moveFocusCell.call(grid, col, row, shiftKey);\n  }\n\n  function vMove(vDir, shiftKeyFlg = shiftKey) {\n    const {\n      col\n    } = focusCell;\n    let row;\n\n    if (vDir === \"S\") {\n      row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n      if (this.rowCount <= row) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(col, this.rowCount - 1);\n        return false;\n      }\n    } else {\n      row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n      if (row < 0) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(col, 0);\n        return false;\n      }\n    }\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n\n  function hMove(hDir, shiftKeyFlg = shiftKey) {\n    const {\n      row\n    } = focusCell;\n    let col;\n\n    if (hDir === \"E\") {\n      col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n      if (this.colCount <= col) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(this.colCount - 1, row);\n        return false;\n      }\n    } else {\n      col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n      if (col < 0) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(0, row);\n        return false;\n      }\n    }\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n}\n/** @private */\n\n\nfunction _moveFocusCell(col, row, shiftKey) {\n  const offset = this.getOffsetInvalidateCells();\n\n  function extendRange(range) {\n    if (offset > 0) {\n      range.start.col -= offset;\n      range.start.row -= offset;\n      range.end.col += offset;\n      range.end.row += offset;\n    }\n\n    return range;\n  }\n\n  const beforeRange = extendRange(this.selection.range);\n  const beforeRect = this.getCellRangeRect(beforeRange);\n\n  this.selection._setFocusCell(col, row, shiftKey);\n\n  this.makeVisibleCell(col, row);\n  this.focusCell(col, row);\n  const afterRange = extendRange(this.selection.range);\n  const afterRect = this.getCellRangeRect(afterRange);\n\n  if (afterRect.intersection(beforeRect)) {\n    const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\n\n    _invalidateRect(this, invalidateRect);\n  } else {\n    _invalidateRect(this, beforeRect);\n\n    _invalidateRect(this, afterRect);\n  }\n}\n/** @private */\n\n\nfunction _updatedSelection() {\n  const {\n    focusControl\n  } = this[_];\n  const {\n    col: selCol,\n    row: selRow\n  } = this[_].selection.select;\n  const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\n    col: selCol,\n    row: selRow\n  });\n  const editMode = utils_1.array.findIndex(results, v => !!v) >= 0;\n  focusControl.editMode = editMode;\n\n  if (editMode) {\n    focusControl.storeInputStatus();\n    focusControl.setDefaultInputStatus();\n    this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\n      col: selCol,\n      row: selRow,\n      input: focusControl.input\n    });\n  }\n}\n/** @private */\n\n\nfunction _getMouseAbstractPoint(grid, evt) {\n  let e;\n\n  if (isTouchEvent(evt)) {\n    e = evt.changedTouches[0];\n  } else {\n    e = evt;\n  }\n\n  const clientX = e.clientX || e.pageX + window.scrollX;\n  const clientY = e.clientY || e.pageY + window.scrollY;\n\n  const rect = grid[_].canvas.getBoundingClientRect();\n\n  if (rect.right <= clientX) {\n    return null;\n  }\n\n  if (rect.bottom <= clientY) {\n    return null;\n  }\n\n  const x = clientX - rect.left + grid[_].scroll.left;\n  const y = clientY - rect.top + grid[_].scroll.top;\n  return {\n    x,\n    y\n  };\n}\n/** @private */\n\n\nfunction _bindEvents() {\n  // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\n  const grid = this;\n  const {\n    handler,\n    element,\n    scrollable\n  } = grid[_];\n\n  const getCellEventArgsSet = e => {\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return {};\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return {\n        abstractPos,\n        cell\n      };\n    }\n\n    const eventArgs = {\n      col: cell.col,\n      row: cell.row,\n      event: e\n    };\n    return {\n      abstractPos,\n      cell,\n      eventArgs\n    };\n  };\n\n  const canResizeColumn = col => {\n    if (grid[_].disableColumnResize) {\n      return false;\n    }\n\n    const limit = grid[_].colWidthsLimit[col];\n\n    if (!limit || !limit.min || !limit.max) {\n      return true;\n    }\n\n    return limit.max !== limit.min;\n  };\n\n  handler.on(element, \"mousedown\", e => {\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (!abstractPos) {\n      return;\n    }\n\n    if (eventArgs) {\n      const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n\n      if (utils_1.array.findIndex(results, v => !v) >= 0) {\n        return;\n      }\n    }\n\n    if (getMouseButtons(e) !== 1 && // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\n    e.buttons !== 0) {\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      //\n      grid[_].columnResizer.start(resizeCol, e);\n    } else {\n      //\n      grid[_].cellSelector.start(e);\n    }\n  });\n  handler.on(element, \"mouseup\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (eventArgs) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\n    }\n  });\n  let doubleTapBefore = null;\n  let longTouchId = null;\n  let useTouch = null;\n\n  function useTouchStart() {\n    if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null) clearTimeout(useTouch.timeoutId);\n    useTouch = {};\n  }\n\n  function useTouchEnd() {\n    if (useTouch) {\n      if (useTouch.timeoutId != null) clearTimeout(useTouch.timeoutId);\n      useTouch.timeoutId = setTimeout(() => {\n        useTouch = null;\n      }, 350);\n    }\n  }\n\n  handler.on(element, \"touchstart\", e => {\n    // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\n    useTouchStart();\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (eventArgs) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\n    }\n\n    if (!doubleTapBefore) {\n      doubleTapBefore = eventArgs;\n      setTimeout(() => {\n        doubleTapBefore = null;\n      }, 350);\n    } else {\n      if (eventArgs && eventArgs.col === doubleTapBefore.col && eventArgs.row === doubleTapBefore.row) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\n      }\n\n      doubleTapBefore = null;\n\n      if (e.defaultPrevented) {\n        return;\n      }\n    }\n\n    if (e.targetTouches.length > 1) {\n      // If touchstart with multiple fingers,\n      // it is not considered as an operation event.\n      return;\n    }\n\n    longTouchId = setTimeout(() => {\n      //\n      longTouchId = null;\n\n      const abstractPos = _getMouseAbstractPoint(grid, e);\n\n      if (!abstractPos) {\n        return;\n      }\n\n      const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n\n      if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n        //\n        grid[_].columnResizer.start(resizeCol, e);\n      } else {\n        //\n        grid[_].cellSelector.start(e);\n      }\n    }, 500);\n  });\n\n  function cancel(_e) {\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n      longTouchId = null;\n    }\n  }\n\n  handler.on(element, \"touchcancel\", e => {\n    cancel(e);\n    useTouchEnd();\n  });\n  handler.on(element, \"touchmove\", cancel);\n  handler.on(element, \"touchend\", e => {\n    useTouchEnd();\n\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n\n      grid[_].cellSelector.select(e);\n\n      longTouchId = null;\n    }\n  });\n  let isMouseover = false;\n  let mouseEnterCell = null;\n  let mouseOverCell = null;\n\n  function onMouseenterCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseEnterCell = cell;\n  }\n\n  function onMouseleaveCell(related) {\n    const beforeMouseCell = mouseEnterCell;\n    mouseEnterCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  function onMouseoverCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseOverCell = cell;\n  }\n\n  function onMouseoutCell(related) {\n    const beforeMouseCell = mouseOverCell;\n    mouseOverCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  const scrollElement = scrollable.getElement();\n  handler.on(scrollElement, \"mouseover\", _e => {\n    isMouseover = true;\n  });\n  handler.on(scrollElement, \"mouseout\", _e => {\n    isMouseover = false;\n    onMouseoutCell();\n  });\n  handler.on(element, \"mouseleave\", _e => {\n    onMouseleaveCell();\n  });\n  handler.on(element, \"mousemove\", e => {\n    if (useTouch) {\n      // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\n      return;\n    }\n\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (eventArgs) {\n      const beforeMouseCell = mouseEnterCell;\n\n      if (beforeMouseCell) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\n        if (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\n          const enterCell = {\n            col: eventArgs.col,\n            row: eventArgs.row\n          };\n          const outCell = onMouseoutCell(enterCell);\n          const leaveCell = onMouseleaveCell(enterCell);\n          onMouseenterCell(enterCell, leaveCell);\n\n          if (isMouseover) {\n            onMouseoverCell(enterCell, outCell);\n          }\n        } else if (isMouseover && !mouseOverCell) {\n          onMouseoverCell({\n            col: eventArgs.col,\n            row: eventArgs.row\n          });\n        }\n      } else {\n        const enterCell = {\n          col: eventArgs.col,\n          row: eventArgs.row\n        };\n        onMouseenterCell(enterCell);\n\n        if (isMouseover) {\n          onMouseoverCell(enterCell);\n        }\n\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n      }\n    } else {\n      onMouseoutCell();\n      onMouseleaveCell();\n    }\n\n    if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n      return;\n    }\n\n    const {\n      style\n    } = element;\n\n    if (!abstractPos) {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      style.cursor = \"col-resize\";\n    } else {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n    }\n  });\n  handler.on(element, \"click\", e => {\n    if (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\n      return;\n    }\n\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\n  });\n  handler.on(element, \"contextmenu\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\n  });\n  handler.on(element, \"dblclick\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n  });\n\n  grid[_].focusControl.onKeyDown(evt => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\n  });\n\n  grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\n  });\n\n  scrollable.onScroll(e => {\n    _onScroll(grid, e);\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, {\n      event: e\n    });\n  });\n\n  grid[_].focusControl.onKeyDownMove(e => {\n    _onKeyDownMove.call(grid, e);\n  });\n\n  grid.listen(\"copydata\", range => {\n    const copyRange = grid.getCopyRangeInternal(range);\n    const copyLines = [];\n\n    for (let {\n      row\n    } = copyRange.start; row <= copyRange.end.row; row++) {\n      let copyLine = \"\";\n\n      for (let {\n        col\n      } = copyRange.start; col <= copyRange.end.col; col++) {\n        const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\n        let strCellValue;\n\n        if (typeof copyCellValue === \"string\") {\n          strCellValue = copyCellValue;\n        } else if (copyCellValue == null || // Asynchronous data is treated as empty.\n        typeof Promise !== \"undefined\" && copyCellValue instanceof Promise) {\n          strCellValue = \"\";\n        } else {\n          // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n          strCellValue = `${copyCellValue}`;\n\n          if (/^\\[object .*\\]$/.exec(strCellValue)) {\n            // Ignore maybe object\n            strCellValue = \"\";\n          }\n        }\n\n        copyLine += /[\\t\\n]/.test(strCellValue) ? // Need quote\n        `\"${strCellValue.replace(/\"/g, '\"\"')}\"` : strCellValue;\n\n        if (col < copyRange.end.col) {\n          copyLine += \"\\t\";\n        }\n      }\n\n      copyLines.push(copyLine);\n    }\n\n    return copyLines.join(\"\\n\");\n  });\n\n  grid[_].focusControl.onCopy(_e => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), r => r != null));\n\n  grid[_].focusControl.onPaste(({\n    value,\n    event\n  }) => {\n    const {\n      trimOnPaste\n    } = grid;\n    const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\n\n    let rangeBoxValues = null;\n    const pasteCellEvent = {\n      col,\n      row,\n      value,\n      normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\n      multi,\n\n      get rangeBoxValues() {\n        return rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\n          trimOnPaste\n        });\n      },\n\n      event\n    };\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\n  });\n\n  grid[_].focusControl.onInput(value => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, {\n      col,\n      row,\n      value\n    });\n  });\n\n  grid[_].focusControl.onDelete(event => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, {\n      col,\n      row,\n      event\n    });\n  });\n\n  grid[_].focusControl.onFocus(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\n    grid[_].focusedGrid = true;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n\n  grid[_].focusControl.onBlur(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\n    grid[_].focusedGrid = false;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n}\n/** @private */\n\n\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n  if (grid[_].frozenRowCount <= 0) {\n    return -1;\n  }\n\n  const frozenRect = _getFrozenRowsRect(grid);\n\n  if (!frozenRect.inPoint(abstractX, abstractY)) {\n    return -1;\n  }\n\n  const cell = grid.getCellAt(abstractX, abstractY);\n  const cellRect = grid.getCellRect(cell.col, cell.row);\n\n  if (abstractX < cellRect.left + offset) {\n    return cell.col - 1;\n  }\n\n  if (cellRect.right - offset < abstractX) {\n    return cell.col;\n  }\n\n  return -1;\n}\n/** @private */\n\n\nfunction _getVisibleRect(grid) {\n  const {\n    scroll: {\n      left,\n      top\n    },\n    canvas: {\n      width,\n      height\n    }\n  } = grid[_];\n  return new Rect_1.Rect(left, top, width, height);\n}\n/** @private */\n\n\nfunction _getScrollableVisibleRect(grid) {\n  let frozenColsWidth = 0;\n\n  if (grid[_].frozenColCount > 0) {\n    //\n    const frozenRect = _getFrozenColsRect(grid);\n\n    frozenColsWidth = frozenRect.width;\n  }\n\n  let frozenRowsHeight = 0;\n\n  if (grid[_].frozenRowCount > 0) {\n    //\n    const frozenRect = _getFrozenRowsRect(grid);\n\n    frozenRowsHeight = frozenRect.height;\n  }\n\n  return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n}\n/** @private */\n\n\nfunction _toRelativeRect(grid, absoluteRect) {\n  const rect = absoluteRect.copy();\n\n  const visibleRect = _getVisibleRect(grid);\n\n  rect.offsetLeft(-visibleRect.left);\n  rect.offsetTop(-visibleRect.top);\n  return rect;\n} //end private methods\n//\n//\n//\n//\n\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\n\n\nclass BaseMouseDownMover {\n  constructor(grid) {\n    this._grid = grid;\n    this._handler = new EventHandler_1.EventHandler();\n    this._events = {};\n    this._started = false;\n    this._moved = false;\n  }\n\n  moving(_e) {\n    return !!this._started;\n  }\n\n  lastMoving(e) {\n    // mouseupclick\n    if (this.moving(e)) {\n      return true;\n    }\n\n    const last = this._mouseEndPoint;\n\n    if (!last) {\n      return false;\n    }\n\n    const pt = _getMouseAbstractPoint(this._grid, e);\n\n    return pt != null && pt.x === last.x && pt.y === last.y;\n  }\n\n  _bindMoveAndUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n\n    if (!isTouchEvent(e)) {\n      events.mousemove = handler.on(document.body, \"mousemove\", e => this._mouseMove(e));\n      events.mouseup = handler.on(document.body, \"mouseup\", e => this._mouseUp(e));\n    } else {\n      events.touchmove = handler.on(document.body, \"touchmove\", e => this._mouseMove(e), {\n        passive: false\n      });\n      events.touchend = handler.on(document.body, \"touchend\", e => this._mouseUp(e));\n      events.touchcancel = handler.on(document.body, \"touchcancel\", e => this._mouseUp(e));\n    }\n\n    this._started = true;\n    this._moved = false;\n  }\n\n  _mouseMove(e) {\n    if (!isTouchEvent(e)) {\n      if (getMouseButtons(e) !== 1) {\n        this._mouseUp(e);\n\n        return;\n      }\n    }\n\n    this._moved = this._moveInternal(e) || this._moved\n    /*calculation on after*/\n    ;\n    cancelEvent(e);\n  }\n\n  _moveInternal(_e) {\n    //protected\n    return false;\n  }\n\n  _mouseUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n    handler.off(events.mousemove);\n    handler.off(events.touchmove);\n    handler.off(events.mouseup);\n    handler.off(events.touchend); // handler.off(this._events.mouseleave);\n\n    handler.off(events.touchcancel);\n    this._started = false;\n\n    this._upInternal(e); // mouseupclick\n\n\n    if (this._moved) {\n      //\n      this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n      setTimeout(() => {\n        this._mouseEndPoint = null;\n      }, 10);\n    }\n  }\n\n  _upInternal(_e) {//protected\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n}\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\n\n\nclass CellSelector extends BaseMouseDownMover {\n  start(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._bindMoveAndUp(e);\n\n    this._cell = cell;\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  select(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._cell = cell;\n  }\n\n  _moveInternal(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return false;\n    }\n\n    const {\n      col: oldCol,\n      row: oldRow\n    } = this._cell;\n    const {\n      col: newCol,\n      row: newRow\n    } = cell;\n\n    if (oldCol === newCol && oldRow === newRow) {\n      return false;\n    }\n\n    const grid = this._grid;\n\n    _moveFocusCell.call(grid, newCol, newRow, true); //make visible\n\n\n    const makeVisibleCol = (() => {\n      if (newCol < oldCol && 0 < newCol) {\n        // move left\n        return newCol - 1;\n      } else if (oldCol < newCol && newCol + 1 < grid.colCount) {\n        // move right\n        return newCol + 1;\n      }\n\n      return newCol;\n    })();\n\n    const makeVisibleRow = (() => {\n      if (newRow < oldRow && 0 < newRow) {\n        // move up\n        return newRow - 1;\n      } else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\n        // move down\n        return newRow + 1;\n      }\n\n      return newRow;\n    })();\n\n    if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\n      grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n    }\n\n    this._cell = cell;\n    return true;\n  }\n\n  _getTargetCell(e) {\n    const grid = this._grid;\n\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return null;\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return null;\n    }\n\n    return cell;\n  }\n\n}\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\n\n\nclass ColumnResizer extends BaseMouseDownMover {\n  constructor(grid) {\n    super(grid);\n    this._x = -1;\n    this._preX = -1;\n    this._invalidateAbsoluteLeft = -1;\n    this._targetCol = -1;\n  }\n\n  start(col, e) {\n    let pageX;\n\n    if (!isTouchEvent(e)) {\n      ({\n        pageX\n      } = e);\n    } else {\n      ({\n        pageX\n      } = e.changedTouches[0]);\n    }\n\n    this._x = pageX;\n    this._preX = 0;\n\n    this._bindMoveAndUp(e);\n\n    this._targetCol = col;\n    this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  _moveInternal(e) {\n    const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n    const x = pageX - this._x;\n    const moveX = x - this._preX;\n    this._preX = x;\n\n    const pre = this._grid.getColWidth(this._targetCol);\n\n    let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n\n    if (afterSize < 10 && moveX < 0) {\n      afterSize = 10;\n    }\n\n    _storeAutoColWidthExprs(this._grid);\n\n    _setColWidth(this._grid, this._targetCol, afterSize);\n\n    const rect = _getVisibleRect(this._grid);\n\n    rect.left = this._invalidateAbsoluteLeft;\n\n    _invalidateRect(this._grid, rect);\n\n    this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\n      col: this._targetCol\n    });\n\n    return true;\n  }\n\n  _upInternal(_e) {\n    const grid = this._grid;\n\n    if (grid.updateScroll()) {\n      grid.invalidate();\n    }\n  }\n\n}\n/** @private */\n\n\nfunction setSafeInputValue(input, value) {\n  const {\n    type\n  } = input;\n  input.type = \"\";\n  input.value = value;\n\n  if (type) {\n    input.type = type;\n  }\n}\n\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\n/**\r\n * Manage focus\r\n * @private\r\n */\n\nclass FocusControl extends EventTarget_1.EventTarget {\n  constructor(grid, parentElement, scrollable, selection) {\n    super();\n    this._grid = grid;\n    this._scrollable = scrollable;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    const input = this._input = document.createElement(\"input\");\n    input.classList.add(\"grid-focus-control\");\n    input.readOnly = true;\n    parentElement.appendChild(input);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n      input.style.font = grid.font || \"16px sans-serif\";\n      this._isComposition = true;\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n\n      grid.focus();\n    });\n    let lastInputValue;\n\n    const inputClear = storeLastInputValue => {\n      lastInputValue = input.value;\n\n      if (this._isComposition) {\n        return;\n      }\n\n      if (lastInputValue !== \"\") {\n        setSafeInputValue(input, \"\");\n      }\n\n      if (!storeLastInputValue) {\n        lastInputValue = \"\";\n      }\n    };\n\n    const handleCompositionEnd = () => {\n      this._isComposition = false;\n      input.classList.remove(\"composition\");\n      input.style.font = \"\";\n      const {\n        value\n      } = input;\n      inputClear(false);\n\n      if (!input.readOnly) {\n        this.fireListeners(\"input\", value);\n      }\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n    };\n\n    handler.on(input, \"compositionend\", _e => {\n      this._compositionEnd = setTimeout(handleCompositionEnd, 1);\n    });\n    selection.listen(\"before_hook\", () => {\n      if (this._compositionEnd) {\n        handleCompositionEnd();\n      }\n    });\n    handler.on(input, \"keypress\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!input.readOnly && e.key && e.key.length === 1) {\n        if (e.ctrlKey || e.metaKey) {\n          if (e.key === \"c\") {//copy! for Firefox & Safari\n          } else if (e.key === \"v\") {//paste! for Firefox & Safari\n          }\n        } else {\n          if (e.key === \" \") {\n            // Since the full-width space cannot be determined, it is processed by \"input\".\n            return;\n          }\n\n          this.fireListeners(\"input\", e.key);\n          cancelEvent(e);\n        }\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"keydown\", e => {\n      var _a;\n\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n          cancelEvent(e);\n        }\n\n        return;\n      }\n\n      const keyCode = getKeyCode(e);\n      let stopCellMove = false;\n      const evt = {\n        keyCode,\n        event: e,\n\n        stopCellMoving() {\n          stopCellMove = true;\n        }\n\n      };\n      this.fireListeners(\"keydown\", evt);\n\n      if (!input.readOnly && lastInputValue) {\n        // for Safari\n        this.fireListeners(\"input\", lastInputValue);\n      }\n\n      if (!stopCellMove) this.fireKeyDownMove(keyCode, e);\n\n      if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) && (keyCode === KEY_DEL || keyCode === KEY_BS)) {\n        this.fireListeners(\"delete\", e);\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"keyup\", _e => {\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n        }\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"input\", e => {\n      if (e.data === \" \" || e.data === \"\") {\n        // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\n        this.fireListeners(\"input\", e.data);\n      }\n\n      inputClear(true);\n    });\n\n    if (utils_1.browser.IE) {\n      handler.on(document, \"keydown\", e => {\n        if (e.target !== input) {\n          return;\n        }\n\n        const keyCode = getKeyCode(e);\n\n        if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n          // When text is not selected copy-event is not emit, on IE.\n          setSafeInputValue(input, \"dummy\");\n          input.select();\n          setTimeout(() => {\n            setSafeInputValue(input, \"\");\n          }, 100);\n        } else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\n          // When input is read-only paste-event is not emit, on IE.\n          if (input.readOnly) {\n            input.readOnly = false;\n            setTimeout(() => {\n              input.readOnly = true;\n              setSafeInputValue(input, \"\");\n            }, 10);\n          }\n        }\n      });\n    }\n\n    if (utils_1.browser.Edge) {\n      handler.once(document, \"keydown\", e => {\n        var _a;\n\n        if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n          return;\n        } // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\n\n\n        const dummyInput = document.createElement(\"input\");\n        grid.getElement().appendChild(dummyInput);\n        dummyInput.focus();\n        input.focus();\n        (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\n      });\n    }\n\n    handler.on(document, \"paste\", e => {\n      if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n        return;\n      }\n\n      let pasteText = undefined;\n\n      if (utils_1.browser.IE) {\n        // IE\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        pasteText = window.clipboardData.getData(\"Text\");\n      } else {\n        const clipboardData = e.clipboardData;\n\n        if (clipboardData.items) {\n          // Chrome & Firefox & Edge\n          pasteText = clipboardData.getData(\"text/plain\");\n        } else {\n          // Safari\n          if (-1 !== Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\n            pasteText = clipboardData.getData(\"Text\");\n          }\n        }\n      }\n\n      if (pasteText != null && pasteText.length) {\n        this.fireListeners(\"paste\", {\n          value: pasteText,\n          event: e\n        });\n      }\n    });\n    handler.on(document, \"copy\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n        return;\n      }\n\n      setSafeInputValue(input, \"\");\n      const data = utils_1.array.find(this.fireListeners(\"copy\"), r => r != null);\n\n      if (data != null) {\n        cancelEvent(e);\n\n        if (utils_1.browser.IE) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          window.clipboardData.setData(\"Text\", data); // IE\n        } else {\n          e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\n        }\n      }\n    });\n    handler.on(input, \"focus\", e => {\n      this.fireListeners(\"focus\", e);\n    });\n    handler.on(input, \"blur\", e => {\n      this.fireListeners(\"blur\", e);\n    });\n  }\n\n  fireKeyDownMove(keyCode, e) {\n    var _a, _b, _c;\n\n    const fn = this._keyDownMoveCallback;\n\n    if (!fn) {\n      return;\n    }\n\n    if (this._isComposition) {\n      return;\n    }\n\n    if (keyCode === KEY_LEFT || keyCode === KEY_UP || keyCode === KEY_RIGHT || keyCode === KEY_DOWN || keyCode === KEY_HOME || keyCode === KEY_END) {\n      fn(e);\n    } else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n      fn(e);\n    } else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n      fn(e);\n    } else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n      fn(e);\n    }\n  }\n\n  onKeyDownMove(fn) {\n    this._keyDownMoveCallback = fn;\n  }\n\n  onKeyDown(fn) {\n    return this.listen(\"keydown\", fn);\n  }\n\n  onInput(fn) {\n    return this.listen(\"input\", fn);\n  }\n\n  onDelete(fn) {\n    return this.listen(\"delete\", fn);\n  }\n\n  onCopy(fn) {\n    return this.listen(\"copy\", fn);\n  }\n\n  onPaste(fn) {\n    return this.listen(\"paste\", fn);\n  }\n\n  onFocus(fn) {\n    return this.listen(\"focus\", fn);\n  }\n\n  onBlur(fn) {\n    return this.listen(\"blur\", fn);\n  }\n\n  focus() {\n    // this._input.value = '';\n    this._input.focus();\n  }\n\n  setFocusRect(rect) {\n    const input = this._input;\n\n    const top = this._scrollable.calcTop(rect.top);\n\n    input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\n\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n  }\n\n  get editMode() {\n    return !this._input.readOnly;\n  }\n\n  set editMode(editMode) {\n    this._input.readOnly = !editMode;\n  }\n\n  resetInputStatus() {\n    var _a;\n\n    const el = this._input;\n\n    if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const composition = el.classList.contains(\"composition\");\n    const attrs = el.attributes;\n    const removeNames = [];\n\n    for (let i = 0, n = attrs.length; i < n; i++) {\n      const attr = attrs[i];\n      if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0) continue;\n\n      if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\n        removeNames.push(attr.name);\n      }\n    }\n\n    removeNames.forEach(removeName => {\n      el.removeAttribute(removeName);\n    });\n\n    for (const name in this._inputStatus) {\n      el.setAttribute(name, this._inputStatus[name]);\n    }\n\n    if (composition) {\n      el.classList.add(\"composition\");\n      el.style.font = this._grid.font || \"16px sans-serif\";\n    } else {\n      el.classList.remove(\"composition\");\n    }\n\n    el.classList.remove(\"grid-focus-control--stored-status\");\n  }\n\n  storeInputStatus() {\n    const el = this._input;\n\n    if (el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const inputStatus = this._inputStatus = {};\n    const attrs = el.attributes;\n\n    for (let i = 0, n = attrs.length; i < n; i++) {\n      const attr = attrs[i];\n      if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0) continue;\n      inputStatus[attr.name] = attr.value;\n    }\n\n    el.classList.add(\"grid-focus-control--stored-status\");\n  }\n\n  setDefaultInputStatus() {// \n    // this._input.style.font = this._grid.font || '16px sans-serif';\n  }\n\n  get input() {\n    return this._input;\n  }\n\n  dispose() {\n    super.dispose();\n\n    this._handler.dispose();\n  }\n\n}\n/**\r\n * Selected area management\r\n */\n\n\nclass Selection extends EventTarget_1.EventTarget {\n  constructor(grid) {\n    super();\n    this._grid = grid;\n    this._sel = {\n      col: 0,\n      row: 0\n    };\n    this._focus = {\n      col: 0,\n      row: 0\n    };\n    this._start = {\n      col: 0,\n      row: 0\n    };\n    this._end = {\n      col: 0,\n      row: 0\n    };\n  }\n\n  get range() {\n    const start = this._start;\n    const end = this._end;\n    const startCol = Math.min(start.col, end.col);\n    const startRow = Math.min(start.row, end.row);\n    const endCol = Math.max(start.col, end.col);\n    const endRow = Math.max(start.row, end.row);\n    return {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    };\n  }\n\n  set range(range) {\n    this._callBeforeHooks();\n\n    const startCol = Math.min(range.start.col, range.end.col);\n    const startRow = Math.min(range.start.row, range.end.row);\n    const endCol = Math.max(range.start.col, range.end.col);\n    const endRow = Math.max(range.start.row, range.end.row);\n\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col: startCol,\n        row: startRow\n      };\n      this._focus = {\n        col: startCol,\n        row: startRow\n      };\n      this._start = {\n        col: startCol,\n        row: startRow\n      };\n      this._end = {\n        col: endCol,\n        row: endRow\n      };\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  get focus() {\n    const {\n      col,\n      row\n    } = this._focus;\n    return {\n      col,\n      row\n    };\n  }\n\n  get select() {\n    const {\n      col,\n      row\n    } = this._sel;\n    return {\n      col,\n      row\n    };\n  }\n\n  set select(cell) {\n    this._callBeforeHooks();\n\n    this._wrapFireSelectedEvent(() => {\n      const {\n        col = 0,\n        row = 0\n      } = cell;\n\n      this._setSelectCell(col, row);\n\n      this._setFocusCell(col, row, true, true);\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  _setSelectCell(col, row) {\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col,\n        row\n      };\n      this._start = {\n        col,\n        row\n      };\n    });\n  }\n\n  _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\n    if (!ignoreBeforeHook) this._callBeforeHooks();\n\n    this._wrapFireSelectedEvent(() => {\n      if (!keepSelect) {\n        this._setSelectCell(col, row);\n      }\n\n      this._focus = {\n        col,\n        row\n      };\n      this._end = {\n        col,\n        row\n      };\n    });\n  }\n\n  _wrapFireSelectedEvent(callback) {\n    if (this._isWrapped) {\n      callback();\n    } else {\n      this._isWrapped = true;\n\n      try {\n        const before = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: false,\n          after: null\n        };\n        callback();\n        const after = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: true,\n          before: {\n            col: before.col,\n            row: before.row\n          }\n        };\n        before.after = {\n          col: after.col,\n          row: after.row\n        };\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\n      } finally {\n        this._isWrapped = false;\n      }\n    }\n  }\n\n  _updateGridRange() {\n    const {\n      rowCount,\n      colCount\n    } = this._grid;\n    const points = [this._sel, this._focus, this._start, this._end];\n    let needChange = false;\n\n    for (let i = 0; i < points.length; i++) {\n      if (colCount <= points[i].col || rowCount <= points[i].row) {\n        needChange = true;\n        break;\n      }\n    }\n\n    if (!needChange) {\n      return false;\n    }\n\n    this._wrapFireSelectedEvent(() => {\n      points.forEach(p => {\n        p.col = Math.min(colCount - 1, p.col);\n        p.row = Math.min(rowCount - 1, p.row);\n      });\n    });\n\n    return true;\n  }\n\n  _callBeforeHooks() {\n    this.fireListeners(\"before_hook\");\n  }\n\n}\n/**\r\n * This class manages the drawing process for each layer\r\n */\n\n/** @private */\n\n\nclass DrawLayers {\n  constructor() {\n    this._layers = {};\n  }\n\n  addDraw(level, fn) {\n    const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\n    l.addDraw(fn);\n  }\n\n  draw(ctx) {\n    const list = [];\n\n    for (const k in this._layers) {\n      list.push(this._layers[k]);\n    }\n\n    list.sort((a, b) => a.level - b.level);\n    list.forEach(l => l.draw(ctx));\n  }\n\n}\n/** @private */\n\n\nclass DrawLayer {\n  constructor(level) {\n    this._level = level;\n    this._list = [];\n  }\n\n  get level() {\n    return this._level;\n  }\n\n  addDraw(fn) {\n    this._list.push(fn);\n  }\n\n  draw(ctx) {\n    this._list.forEach(fn => {\n      ctx.save();\n\n      try {\n        fn(ctx);\n      } finally {\n        ctx.restore();\n      }\n    });\n  }\n\n}\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\n\n\nclass DrawCellContext {\n  //  private _grid: any;\n  //  private _onTerminate: any;\n\n  /**\r\n   * constructor\r\n   * @param {number} col index of column\r\n   * @param {number} row index of row\r\n   * @param {CanvasRenderingContext2D} ctx context\r\n   * @param {Rect} rect rect of cell area\r\n   * @param {Rect} drawRect rect of drawing area\r\n   * @param {boolean} drawing `true` if drawing is in progress\r\n   * @param {object} selection the selection\r\n   * @param {Array} drawLayers array of draw layers\r\n   * @private\r\n   */\n  constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\n    this._rectFilter = null;\n    this._col = col;\n    this._row = row;\n    this._mode = 0;\n    this._ctx = ctx;\n    this._rect = rect;\n    this._drawRect = drawRect;\n    this._drawing = drawing;\n    this._selection = selection;\n    this._drawLayers = drawLayers;\n    this._childContexts = [];\n  }\n\n  get drawing() {\n    if (this._mode === 0) {\n      return this._drawing;\n    } else {\n      return true;\n    }\n  }\n\n  get row() {\n    return this._row;\n  }\n\n  get col() {\n    return this._col;\n  }\n\n  cancel() {\n    this._cancel = true;\n\n    this._childContexts.forEach(ctx => {\n      ctx.cancel();\n    });\n  }\n  /**\r\n   * select status.\r\n   * @return {object} select status\r\n   */\n\n\n  getSelection() {\n    return {\n      select: this._selection.select,\n      range: this._selection.range\n    };\n  }\n  /**\r\n   * Canvas context.\r\n   * @return {CanvasRenderingContext2D} Canvas context.\r\n   */\n\n\n  getContext() {\n    if (this._mode === 0) {\n      return this._ctx;\n    } else {\n      return _getInitContext.call(this._grid);\n    }\n  }\n  /**\r\n   * Rectangle of cell.\r\n   * @return {Rect} rect Rectangle of cell.\r\n   */\n\n\n  getRect() {\n    const rectFilter = this._rectFilter;\n    return rectFilter ? rectFilter(this._getRectInternal()) : this._getRectInternal();\n  }\n\n  setRectFilter(rectFilter) {\n    this._rectFilter = rectFilter;\n  }\n  /**\r\n   * Rectangle of Drawing range.\r\n   * @return {Rect} Rectangle of Drawing range.\r\n   */\n\n\n  getDrawRect() {\n    if (this._cancel) {\n      return null;\n    }\n\n    if (this._mode === 0) {\n      return this._drawRect;\n    } else {\n      if (this._isOutOfRange()) {\n        return null;\n      }\n\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      return this._toRelativeDrawRect(absoluteRect);\n    }\n  }\n\n  _isOutOfRange() {\n    const {\n      colCount,\n      rowCount\n    } = this._grid;\n    return colCount <= this._col || rowCount <= this._row;\n  }\n  /**\r\n   * get Context of current state\r\n   * @return {DrawCellContext} current DrawCellContext.\r\n   */\n\n\n  toCurrentContext() {\n    if (this._mode === 0) {\n      return this;\n    } else {\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      const rect = _toRelativeRect(this._grid, absoluteRect);\n\n      const drawRect = this._isOutOfRange() ? null : this._toRelativeDrawRect(absoluteRect);\n      const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers); // toCurrentContext  toCurrentContext\n\n      context.toCurrentContext = this.toCurrentContext.bind(this);\n\n      this._childContexts.push(context);\n\n      if (this._cancel) {\n        context.cancel();\n      }\n\n      context._rectFilter = this._rectFilter;\n      return context;\n    }\n  }\n\n  addLayerDraw(level, fn) {\n    this._drawLayers.addDraw(level, fn);\n  }\n\n  _toRelativeDrawRect(absoluteRect) {\n    const visibleRect = _getVisibleRect(this._grid);\n\n    let rect = absoluteRect.copy();\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    const grid = this._grid;\n    const isFrozenCell = grid.isFrozenCell(this._col, this._row);\n\n    if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n      const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\n      rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n    }\n\n    if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n      const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\n      rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n    }\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    rect.offsetLeft(-visibleRect.left);\n    rect.offsetTop(-visibleRect.top);\n    return rect;\n  }\n\n  _delayMode(grid, onTerminate) {\n    this._mode = 1;\n    this._ctx = null;\n    this._rect = null;\n    this._drawRect = null;\n    this._grid = grid;\n    this._onTerminate = onTerminate;\n  }\n  /**\r\n   * terminate\r\n   * @return {void}\r\n   */\n\n\n  terminate() {\n    var _a;\n\n    if (this._mode !== 0) {\n      (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n  }\n\n  _getRectInternal() {\n    if (this._mode === 0) {\n      return this._rect;\n    } else {\n      if (this._rect) {\n        return this._rect;\n      }\n\n      return this._grid.getCellRelativeRect(this._col, this._row);\n    }\n  }\n\n}\n/** @private */\n\n\nconst protectedKey = _;\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\n\nclass DrawGrid extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n  }\n\n  constructor(options = {}) {\n    super();\n    const {\n      rowCount = 10,\n      colCount = 10,\n      frozenColCount = 0,\n      frozenRowCount = 0,\n      defaultRowHeight = 40,\n      defaultColWidth = 80,\n      font,\n      underlayBackgroundColor,\n      keyboardOptions,\n      parentElement,\n      disableColumnResize,\n      trimOnPaste\n    } = options;\n    const protectedSpace = this[_] = {};\n    style.initDocument();\n    protectedSpace.element = createRootElement();\n    protectedSpace.scrollable = new Scrollable_1.Scrollable();\n    protectedSpace.handler = new EventHandler_1.EventHandler();\n    protectedSpace.selection = new Selection(this);\n    protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\n    protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\n    protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    protectedSpace.rowCount = rowCount;\n    protectedSpace.colCount = colCount;\n    protectedSpace.frozenColCount = frozenColCount;\n    protectedSpace.frozenRowCount = frozenRowCount;\n    protectedSpace.defaultRowHeight = defaultRowHeight;\n    protectedSpace.defaultColWidth = defaultColWidth;\n    protectedSpace.font = font;\n    protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\n    protectedSpace.keyboardOptions = keyboardOptions;\n    protectedSpace.disableColumnResize = disableColumnResize;\n    protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false; /////\n\n    protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsLimit = {};\n    protectedSpace.calcWidthContext = {\n      _: protectedSpace,\n\n      get full() {\n        return this._.canvas.width;\n      },\n\n      get em() {\n        return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\n      }\n\n    };\n    protectedSpace.columnResizer = new ColumnResizer(this);\n    protectedSpace.cellSelector = new CellSelector(this);\n    protectedSpace.drawCells = {};\n    protectedSpace.cellTextOverflows = {};\n    protectedSpace.focusedGrid = false;\n    protectedSpace.element.appendChild(protectedSpace.canvas);\n    protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\n    protectedSpace.scroll = {\n      left: 0,\n      top: 0\n    };\n    this.updateScroll();\n\n    if (parentElement) {\n      parentElement.appendChild(protectedSpace.element);\n      this.updateSize();\n    } else {\n      this.updateSize();\n    }\n\n    _bindEvents.call(this);\n\n    this.bindEventsInternal();\n  }\n  /**\r\n   * Get root element.\r\n   * @returns {HTMLElement} root element\r\n   */\n\n\n  getElement() {\n    return this[_].element;\n  }\n  /**\r\n   * Get canvas element.\r\n   */\n\n\n  get canvas() {\n    return this[_].canvas;\n  }\n  /**\r\n   * Focus the grid.\r\n   * @return {void}\r\n   */\n\n\n  focus() {\n    const {\n      col,\n      row\n    } = this[_].selection.select;\n    this.focusCell(col, row);\n  }\n\n  hasFocusGrid() {\n    return this[_].focusedGrid;\n  }\n  /**\r\n   * Get the selection instance.\r\n   */\n\n\n  get selection() {\n    return this[_].selection;\n  }\n  /**\r\n   * Get the number of rows.\r\n   */\n\n\n  get rowCount() {\n    return this[_].rowCount;\n  }\n  /**\r\n   * Set the number of rows.\r\n   */\n\n\n  set rowCount(rowCount) {\n    this[_].rowCount = rowCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\r\n   * Get the number of columns.\r\n   */\n\n\n  get colCount() {\n    return this[_].colCount;\n  }\n  /**\r\n   * Set the number of columns.\r\n   */\n\n\n  set colCount(colCount) {\n    this[_].colCount = colCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\r\n   * Get the number of frozen columns.\r\n   */\n\n\n  get frozenColCount() {\n    return this[_].frozenColCount;\n  }\n  /**\r\n   * Set the number of frozen columns.\r\n   */\n\n\n  set frozenColCount(frozenColCount) {\n    this[_].frozenColCount = frozenColCount;\n  }\n  /**\r\n   * Get the number of frozen rows.\r\n   */\n\n\n  get frozenRowCount() {\n    return this[_].frozenRowCount;\n  }\n  /**\r\n   * Set the number of frozen rows.\r\n   */\n\n\n  set frozenRowCount(frozenRowCount) {\n    this[_].frozenRowCount = frozenRowCount;\n  }\n  /**\r\n   * Get the default row height.\r\n   *\r\n   */\n\n\n  get defaultRowHeight() {\n    return this[_].defaultRowHeight;\n  }\n  /**\r\n   * Set the default row height.\r\n   */\n\n\n  set defaultRowHeight(defaultRowHeight) {\n    this[_].defaultRowHeight = defaultRowHeight;\n  }\n  /**\r\n   * Get the default column width.\r\n   */\n\n\n  get defaultColWidth() {\n    return this[_].defaultColWidth;\n  }\n  /**\r\n   * Set the default column width.\r\n   */\n\n\n  set defaultColWidth(defaultColWidth) {\n    this[_].defaultColWidth = defaultColWidth;\n  }\n  /**\r\n   * Get the font definition as a string.\r\n   */\n\n\n  get font() {\n    return this[_].font;\n  }\n  /**\r\n   * Set the font definition with the given string.\r\n   */\n\n\n  set font(font) {\n    this[_].font = font;\n  }\n  /**\r\n   * Get the background color of the underlay.\r\n   */\n\n\n  get underlayBackgroundColor() {\n    return this[_].underlayBackgroundColor;\n  }\n  /**\r\n   * Set the background color of the underlay.\r\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    this[_].underlayBackgroundColor = underlayBackgroundColor;\n  }\n  /**\r\n   * If set to true, trim the pasted text on pasting.\r\n   */\n\n\n  get trimOnPaste() {\n    return this[_].trimOnPaste;\n  }\n\n  set trimOnPaste(trimOnPaste) {\n    this[_].trimOnPaste = trimOnPaste;\n  }\n\n  get keyboardOptions() {\n    var _a;\n\n    return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\n  }\n\n  set keyboardOptions(keyboardOptions) {\n    this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  configure(name, value) {\n    const cfg = this[_].config || (this[_].config = {});\n\n    if (value != null) {\n      cfg[name] = value;\n    }\n\n    return cfg[name];\n  }\n  /**\r\n   * Apply the changed size.\r\n   * @return {void}\r\n   */\n\n\n  updateSize() {\n    //\n    const {\n      canvas\n    } = this[_];\n    canvas.style.width = \"\";\n    canvas.style.height = \"\";\n    const width = Math.floor(canvas.offsetWidth || canvas.parentElement.offsetWidth - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    const height = Math.floor(canvas.offsetHeight || canvas.parentElement.offsetHeight - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    canvas.width = width;\n    canvas.height = height; //style\n\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    const {\n      focus\n    } = this[_].selection;\n\n    this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\n  }\n  /**\r\n   * Apply the changed scroll size.\r\n   * @return {boolean} `true` if there was a change in the scroll size\r\n   */\n\n\n  updateScroll() {\n    const {\n      scrollable\n    } = this[_];\n\n    const newHeight = _getScrollHeight.call(this);\n\n    const newWidth = _getScrollWidth(this);\n\n    if (newHeight === scrollable.scrollHeight && newWidth === scrollable.scrollWidth) {\n      return false;\n    }\n\n    scrollable.setScrollSize(newWidth, newHeight);\n    this[_].scroll = {\n      left: scrollable.scrollLeft,\n      top: scrollable.scrollTop\n    };\n    const {\n      focus\n    } = this[_].selection;\n\n    this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\n\n    return true;\n  }\n  /**\r\n   * Get the row height of the given the row index.\r\n   * @param  {number} row The row index\r\n   * @return {number} The row height\r\n   */\n\n\n  getRowHeight(row) {\n    return _getRowHeight.call(this, row);\n  }\n  /**\r\n   * Set the row height of the given the row index.\r\n   * @param  {number} row The row index\r\n   * @param  {number} height The row height\r\n   * @return {void}\r\n   */\n\n\n  setRowHeight(row, height) {\n    _setRowHeight(this, row, height);\n  }\n  /**\r\n   * Get the column width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column width\r\n   */\n\n\n  getColWidth(col) {\n    return _getColWidth(this, col);\n  }\n  /**\r\n   * Set the column width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} width The column width\r\n   * @return {void}\r\n   */\n\n\n  setColWidth(col, width) {\n    _setColWidth(this, col, width);\n  }\n  /**\r\n   * Get the column max width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column max width\r\n   */\n\n\n  getMaxColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.max || undefined;\n  }\n  /**\r\n   * Set the column max width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} maxwidth The column max width\r\n   * @return {void}\r\n   */\n\n\n  setMaxColWidth(col, maxwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\n    if (maxwidth != null) {\n      obj.max = maxwidth;\n    } else {\n      delete obj.max;\n    }\n  }\n  /**\r\n   * Get the column min width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column min width\r\n   */\n\n\n  getMinColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.min || undefined;\n  }\n  /**\r\n   * Set the column min width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} minwidth The column min width\r\n   * @return {void}\r\n   */\n\n\n  setMinColWidth(col, minwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\n    if (minwidth != null) {\n      obj.min = minwidth;\n    } else {\n      delete obj.min;\n    }\n  }\n  /**\r\n   * Get the rect of the cell.\r\n   * @param {number} col index of column, of the cell\r\n   * @param {number} row index of row, of the cell\r\n   * @returns {Rect} the rect of the cell.\r\n   */\n\n\n  getCellRect(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    let absoluteLeft = _getColsWidth(this, 0, col - 1);\n\n    const width = _getColWidth(this, col);\n\n    if (isFrozenCell && isFrozenCell.col) {\n      absoluteLeft += this[_].scroll.left;\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\n\n    const height = _getRowHeight.call(this, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      absoluteTop += this[_].scroll.top;\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n  /**\r\n   * Get the relative rectangle of the cell.\r\n   * @param {number} col index of column, of the cell\r\n   * @param {number} row index of row, of the cell\r\n   * @returns {Rect} the rect of the cell.\r\n   */\n\n\n  getCellRelativeRect(col, row) {\n    return _toRelativeRect(this, this.getCellRect(col, row));\n  }\n  /**\r\n   * Get the rectangle of the cells area.\r\n   * @param {number} startCol index of the starting column, of the cell\r\n   * @param {number} startRow index of the starting row, of the cell\r\n   * @param {number} endCol index of the ending column, of the cell\r\n   * @param {number} endRow index of the ending row, of the cell\r\n   * @returns {Rect} the rect of the cells.\r\n   */\n\n\n  getCellsRect(startCol, startRow, endCol, endRow) {\n    const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n    const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let width = _getColsWidth(this, startCol, endCol);\n\n    if (isFrozenStartCell && isFrozenStartCell.col) {\n      const scrollLeft = this[_].scroll.left;\n      absoluteLeft += scrollLeft;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.col) {\n        width -= scrollLeft;\n        width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n      }\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let height = _getRowsHeight.call(this, startRow, endRow);\n\n    if (isFrozenStartCell && isFrozenStartCell.row) {\n      const scrollTop = this[_].scroll.top;\n      absoluteTop += scrollTop;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.row) {\n        height -= scrollTop;\n        height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n      }\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n\n  getCellRangeRect(range) {\n    return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n\n  isFrozenCell(col, row) {\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = this[_];\n    const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\n    const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\n\n    if (isFrozenRow || isFrozenCol) {\n      return {\n        row: isFrozenRow,\n        col: isFrozenCol\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getRowAt(absoluteY) {\n    const frozen = _getTargetFrozenRowAt(this, absoluteY);\n\n    if (frozen) {\n      return frozen.row;\n    }\n\n    const row = _getTargetRowAt.call(this, absoluteY);\n\n    return row ? row.row : -1;\n  }\n\n  getColAt(absoluteX) {\n    const frozen = _getTargetFrozenColAt(this, absoluteX);\n\n    if (frozen) {\n      return frozen.col;\n    }\n\n    const col = _getTargetColAt(this, absoluteX);\n\n    return col ? col.col : -1;\n  }\n\n  getCellAt(absoluteX, absoluteY) {\n    return {\n      row: this.getRowAt(absoluteY),\n      col: this.getColAt(absoluteX)\n    };\n  }\n  /**\r\n   * Scroll to where cell is visible.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  makeVisibleCell(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n      return;\n    }\n\n    const rect = this.getCellRect(col, row);\n\n    const visibleRect = _getScrollableVisibleRect(this);\n\n    if (visibleRect.contains(rect)) {\n      return;\n    }\n\n    const {\n      scrollable\n    } = this[_];\n\n    if (!isFrozenCell || !isFrozenCell.col) {\n      if (rect.left < visibleRect.left) {\n        scrollable.scrollLeft -= visibleRect.left - rect.left;\n      } else if (visibleRect.right < rect.right) {\n        scrollable.scrollLeft -= visibleRect.right - rect.right;\n      }\n    }\n\n    if (!isFrozenCell || !isFrozenCell.row) {\n      if (rect.top < visibleRect.top) {\n        scrollable.scrollTop -= visibleRect.top - rect.top;\n      } else if (visibleRect.bottom < rect.bottom) {\n        scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n      }\n    }\n  }\n  /**\r\n   * Moves the focus cursor to the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  setFocusCursor(col, row) {\n    const {\n      focusControl\n    } = this[_];\n    const oldEditMode = focusControl.editMode;\n    focusControl.setFocusRect(this.getCellRect(col, row));\n\n    _updatedSelection.call(this);\n\n    if (oldEditMode && !focusControl.editMode) {\n      focusControl.resetInputStatus();\n    }\n  }\n  /**\r\n   * Focus the cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  focusCell(col, row) {\n    this.setFocusCursor(col, row); // Failure occurs in IE if focus is not last\n\n    this[_].focusControl.focus();\n  }\n  /**\r\n   * Redraws the range of the given cell.\r\n   * @param  {number} col The column index of cell.\r\n   * @param  {number} row The row index of cell.\r\n   * @return {void}\r\n   */\n\n\n  invalidateCell(col, row) {\n    this.invalidateGridRect(col, row);\n  }\n  /**\r\n   * Redraws the range of the given cells.\r\n   * @param {number} startCol index of the starting column, of the cell\r\n   * @param {number} startRow index of the starting row, of the cell\r\n   * @param {number} endCol index of the ending column, of the cell\r\n   * @param {number} endRow index of the ending row, of the cell\r\n   * @return {void}\r\n   */\n\n\n  invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n    const offset = this.getOffsetInvalidateCells();\n\n    if (offset > 0) {\n      startCol -= offset;\n      startRow -= offset;\n      endCol += offset;\n      endRow += offset;\n    }\n\n    const visibleRect = _getVisibleRect(this);\n\n    const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n    const invalidateTarget = visibleRect.intersection(cellsRect);\n\n    if (invalidateTarget) {\n      const {\n        frozenColCount,\n        frozenRowCount\n      } = this[_];\n\n      if (frozenColCount > 0 && endCol >= frozenColCount) {\n        const frozenRect = _getFrozenColsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\n        }\n      }\n\n      if (frozenRowCount > 0 && endRow >= frozenRowCount) {\n        const frozenRect = _getFrozenRowsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n        }\n      }\n\n      _invalidateRect(this, invalidateTarget);\n    }\n  }\n\n  invalidateCellRange(range) {\n    this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n  /**\r\n   * Redraws the whole grid.\r\n   * @return {void}\r\n   */\n\n\n  invalidate() {\n    const visibleRect = _getVisibleRect(this);\n\n    _invalidateRect(this, visibleRect);\n  }\n  /**\r\n   * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n   * @returns {number}\r\n   */\n\n\n  get visibleRowCount() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let count = 0;\n    const {\n      rowCount\n    } = this;\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = absoluteTop + height;\n\n      if (visibleRect.bottom < bottom) {\n        break;\n      }\n\n      count++;\n      absoluteTop = bottom;\n    }\n\n    return count;\n  }\n  /**\r\n   * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n   * @returns {number}\r\n   */\n\n\n  get visibleColCount() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let count = 0;\n    const {\n      colCount\n    } = this;\n\n    for (let col = startCol; col < colCount; col++) {\n      const width = _getColWidth(this, col);\n\n      const right = absoluteLeft + width;\n\n      if (visibleRect.right < right) {\n        break;\n      }\n\n      count++;\n      absoluteLeft = right;\n    }\n\n    return count;\n  }\n  /**\r\n   * Get the index of the first row in the scrollable region that is visible.\r\n   * @returns {number}\r\n   */\n\n\n  get topRow() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n  }\n  /**\r\n   * Get the index of the first column in the scrollable region that is visible.\r\n   * @returns {number}\r\n   */\n\n\n  get leftCol() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n  }\n  /**\r\n   * gets or sets the number of pixels that an element's content is scrolled vertically\r\n   */\n\n\n  get scrollTop() {\n    return this[_].scrollable.scrollTop;\n  }\n\n  set scrollTop(scrollTop) {\n    this[_].scrollable.scrollTop = scrollTop;\n  }\n  /**\r\n   * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n   */\n\n\n  get scrollLeft() {\n    return this[_].scrollable.scrollLeft;\n  }\n\n  set scrollLeft(scrollLeft) {\n    this[_].scrollable.scrollLeft = scrollLeft;\n  }\n  /**\r\n   * Get the value of cell with the copy action.\r\n   * <p>\r\n   * Please implement\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param col Column index of cell.\r\n   * @param row Row index of cell.\r\n   * @param range Copy range.\r\n   * @return {string} the value of cell\r\n   */\n\n\n  getCopyCellValue(_col, _row, _range) {\n    //Please implement get cell value!!\n    return undefined;\n  }\n  /**\r\n   * Get the overflowed text in the cell rectangle, from the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {string | null} The text overflowing the cell rect.\r\n   */\n\n\n  getCellOverflowText(col, row) {\n    const key = `${col}:${row}`;\n    return this[_].cellTextOverflows[key] || null;\n  }\n  /**\r\n   * Set the overflowed text in the cell rectangle, to the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n   * @return {void}\r\n   */\n\n\n  setCellOverflowText(col, row, overflowText) {\n    const key = `${col}:${row}`;\n\n    if (overflowText) {\n      this[_].cellTextOverflows[key] = typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\n    } else {\n      delete this[_].cellTextOverflows[key];\n    }\n  }\n\n  addDisposable(disposable) {\n    if (!disposable || !disposable.dispose || typeof disposable.dispose !== \"function\") {\n      throw new Error(\"not disposable!\");\n    }\n\n    const disposables = this[_].disposables = this[_].disposables || [];\n    disposables.push(disposable);\n  }\n  /**\r\n   * Dispose the grid instance.\r\n   * @returns {void}\r\n   */\n\n\n  dispose() {\n    super.dispose();\n    const protectedSpace = this[_];\n    protectedSpace.handler.dispose();\n    protectedSpace.scrollable.dispose();\n    protectedSpace.focusControl.dispose();\n    protectedSpace.columnResizer.dispose();\n    protectedSpace.cellSelector.dispose();\n\n    if (protectedSpace.disposables) {\n      protectedSpace.disposables.forEach(disposable => disposable.dispose());\n      protectedSpace.disposables = null;\n    }\n\n    const {\n      parentElement\n    } = protectedSpace.element;\n\n    if (parentElement) {\n      parentElement.removeChild(protectedSpace.element);\n    }\n  }\n\n  getAttachCellsArea(range) {\n    return {\n      element: this.getElement(),\n      rect: _toRelativeRect(this, this.getCellRangeRect(range))\n    };\n  }\n\n  onKeyDownMove(evt) {\n    _onKeyDownMove.call(this, evt);\n  }\n\n  bindEventsInternal() {//nop\n  }\n\n  getTargetRowAtInternal(_absoluteY) {// \n  }\n\n  getRowsHeightInternal(_startRow, _endRow) {// \n  }\n\n  getRowHeightInternal(_row) {// \n  }\n\n  getScrollHeightInternal(_row) {// \n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col\n  }) {\n    return col - 1;\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col\n  }) {\n    return col + 1;\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    row\n  }) {\n    return row - 1;\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    row\n  }) {\n    return row + 1;\n  }\n\n  getOffsetInvalidateCells() {\n    return 0;\n  }\n\n  getCopyRangeInternal(range) {\n    return range;\n  }\n\n  _getInitContext() {\n    const ctx = this[_].context; //\n\n    ctx.fillStyle = \"white\";\n    ctx.strokeStyle = \"black\";\n    ctx.textAlign = \"left\";\n    ctx.textBaseline = \"top\";\n    ctx.lineWidth = 1;\n    ctx.font = this.font || \"16px sans-serif\";\n    return ctx;\n  }\n\n  fireListeners(type, ...event) {\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.DrawGrid = DrawGrid;\n\n/***/ }),\n\n/***/ \"./core/EventTarget.js\":\n/*!*****************************!*\\\n  !*** ./core/EventTarget.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventTarget = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\"); //private symbol\n\n/** @private */\n\n\nconst _ = (0, symbolManager_1.get)();\n/** @private */\n\n\nlet nextId = 1;\n/**\r\n * event target.\r\n */\n\nclass EventTarget {\n  constructor() {\n    this[_a] = {\n      listeners: {},\n      listenerData: {}\n    };\n  }\n  /**\r\n   * Adds an event listener.\r\n   * @param  {string} type The event type id.\r\n   * @param  {function} listener Callback method.\r\n   * @return {number} unique id for the listener.\r\n   */\n\n\n  listen(type, listener) {\n    const list = this[_].listeners[type] || (this[_].listeners[type] = []);\n    list.push(listener);\n    const id = nextId++;\n    this[_].listenerData[id] = {\n      type,\n      listener,\n      remove: () => {\n        delete this[_].listenerData[id];\n        const index = list.indexOf(listener);\n        list.splice(index, 1);\n\n        if (!this[_].listeners[type].length) {\n          delete this[_].listeners[type];\n        }\n      }\n    };\n    return id;\n  }\n  /**\r\n   * Removes an event listener which was added with listen() by the id returned by listen().\r\n   * @param  {number} id the id returned by listen().\r\n   * @return {void}\r\n   */\n\n\n  unlisten(id) {\n    if (!this[_]) {\n      return;\n    }\n\n    this[_].listenerData[id].remove();\n  }\n\n  addEventListener(type, listener) {\n    this.listen(type, listener);\n  }\n\n  removeEventListener(type, listener) {\n    if (!this[_]) {\n      return;\n    }\n\n    (0, utils_1.each)(this[_].listenerData, (obj, id) => {\n      if (obj.type === type && obj.listener === listener) {\n        this.unlisten(id);\n      }\n    });\n  }\n\n  hasListeners(type) {\n    if (!this[_]) {\n      return false;\n    }\n\n    return !!this[_].listeners[type];\n  }\n  /**\r\n   * Fires all registered listeners\r\n   * @param  {string}    type The type of the listeners to fire.\r\n   * @param  {...*} args fire arguments\r\n   * @return {*} the result of the last listener\r\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fireListeners(type, ...args) {\n    if (!this[_]) {\n      return [];\n    }\n\n    const list = this[_].listeners[type];\n\n    if (!list) {\n      return [];\n    }\n\n    return list.map(listener => listener.call(this, ...args)).filter(r => r != null);\n  }\n\n  dispose() {\n    // @ts-expect-error -- ignore\n    delete this[_];\n  }\n\n}\n\nexports.EventTarget = EventTarget;\n_a = _;\n\n/***/ }),\n\n/***/ \"./data.js\":\n/*!*****************!*\\\n  !*** ./data.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\n\nconst DataSource_1 = __webpack_require__(/*! ./data/DataSource */ \"./data/DataSource.js\");\n\nObject.defineProperty(exports, \"DataSource\", {\n  enumerable: true,\n  get: function () {\n    return DataSource_1.DataSource;\n  }\n});\n\nconst CachedDataSource_1 = __webpack_require__(/*! ./data/CachedDataSource */ \"./data/CachedDataSource.js\");\n\nObject.defineProperty(exports, \"CachedDataSource\", {\n  enumerable: true,\n  get: function () {\n    return CachedDataSource_1.CachedDataSource;\n  }\n});\n\nconst FilterDataSource_1 = __webpack_require__(/*! ./data/FilterDataSource */ \"./data/FilterDataSource.js\");\n\nObject.defineProperty(exports, \"FilterDataSource\", {\n  enumerable: true,\n  get: function () {\n    return FilterDataSource_1.FilterDataSource;\n  }\n});\n\n/***/ }),\n\n/***/ \"./data/CachedDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/CachedDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CachedDataSource = void 0;\n\nconst DataSource_1 = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n/** @private */\n\n\nfunction _setFieldCache( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfCache, index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  const recCache = fCache[index] || (fCache[index] = new Map());\n  recCache.set(field, value);\n}\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass CachedDataSource extends DataSource_1.DataSource {\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new CachedDataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  }\n\n  constructor(opt) {\n    super(opt);\n    this._rCache = {};\n    this._fCache = {};\n  }\n\n  getOriginal(index) {\n    if (this._rCache && this._rCache[index]) {\n      return this._rCache[index];\n    }\n\n    return super.getOriginal(index);\n  }\n\n  getOriginalField(index, field) {\n    const rowCache = this._fCache && this._fCache[index];\n\n    if (rowCache) {\n      const cache = rowCache.get(field);\n\n      if (cache) {\n        return cache;\n      }\n    }\n\n    return super.getOriginalField(index, field);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    const fCache = this._fCache;\n\n    if (fCache && fCache[index]) {\n      delete fCache[index]; // clear row cache\n    }\n\n    return super.setOriginalField(index, field, value);\n  }\n\n  clearCache() {\n    if (this._rCache) {\n      this._rCache = {};\n    }\n\n    if (this._fCache) {\n      this._fCache = {};\n    }\n  }\n\n  fieldPromiseCallBackInternal(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    _setFieldCache(this._fCache, index, field, value);\n  }\n\n  recordPromiseCallBackInternal(index, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  record) {\n    this._rCache[index] = record;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n}\n\nexports.CachedDataSource = CachedDataSource;\n\n/***/ }),\n\n/***/ \"./data/DataSource.js\":\n/*!****************************!*\\\n  !*** ./data/DataSource.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataSource = void 0;\n\nconst sort = __importStar(__webpack_require__(/*! ../internal/sort */ \"./internal/sort.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst EventTarget_1 = __webpack_require__(/*! ../core/EventTarget */ \"./core/EventTarget.js\");\n/** @private */\n\n\nfunction isFieldAssessor(field) {\n  if (utils_1.obj.isObject(field)) {\n    if (field.get && field.set) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/** @private */\n\n\nconst EVENT_TYPE = {\n  UPDATE_LENGTH: \"update_length\",\n  UPDATED_LENGTH: \"updated_length\",\n  UPDATED_ORDER: \"updated_order\"\n};\n/** @private */\n\nfunction ascOrderFn(v1, v2) {\n  if (v1 === v2) {\n    return 0;\n  }\n\n  if (v1 == null) {\n    return v2 == null ? // If both are nullish, consider a match.\n    0 : // Nulls first\n    -1;\n  }\n\n  if (v2 == null) {\n    // Nulls first\n    return 1;\n  }\n\n  return v1 > v2 ? 1 : -1;\n}\n\nfunction descOrderFn(v1, v2) {\n  return ascOrderFn(v1, v2) * -1;\n}\n/** @private */\n\n\nfunction getValue(value, setPromiseBack) {\n  const maybePromiseValue = (0, utils_1.getOrApply)(value);\n\n  if ((0, utils_1.isPromise)(maybePromiseValue)) {\n    const promiseValue = maybePromiseValue.then(r => {\n      setPromiseBack(r);\n      return r;\n    }); //\n\n    setPromiseBack(promiseValue);\n    return promiseValue;\n  } else {\n    return maybePromiseValue;\n  }\n}\n/** @private */\n\n\nfunction getField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nsetPromiseBack) {\n  if (record == null) {\n    return undefined;\n  }\n\n  if ((0, utils_1.isPromise)(record)) {\n    return record.then(r => getField(r, field, setPromiseBack));\n  }\n\n  const fieldGet = isFieldAssessor(field) ? field.get : field;\n\n  if (fieldGet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  if (typeof fieldGet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = fieldGet(record);\n    return getValue(fieldResult, setPromiseBack);\n  } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n  const ss = String(fieldGet).split(\".\");\n\n  if (ss.length <= 1) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet];\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  const fieldResult = (0, utils_1.applyChainSafe)(record, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\n  return getValue(fieldResult, setPromiseBack);\n}\n/** @private */\n\n\nfunction setField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (record == null) {\n    return false;\n  }\n\n  const fieldSet = isFieldAssessor(field) ? field.set : field;\n\n  if (fieldSet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  } else if (typeof fieldSet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return fieldSet(record, value);\n  } else if (typeof fieldSet === \"string\") {\n    const ss = `${fieldSet}`.split(\".\"); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    let obj = record;\n    const {\n      length\n    } = ss;\n\n    for (let i = 0; i < length; i++) {\n      const f = ss[i];\n\n      if (i === length - 1) {\n        obj[f] = value;\n      } else {\n        obj = obj[f] || (obj[f] = {});\n      }\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  }\n\n  return true;\n}\n/** @private */\n\n\nfunction _getIndex(sortedIndexMap, index) {\n  if (!sortedIndexMap) {\n    return index;\n  }\n\n  const mapIndex = sortedIndexMap[index];\n  return mapIndex != null ? mapIndex : index;\n}\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass DataSource extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new DataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  }\n\n  constructor(obj) {\n    var _a;\n\n    super();\n    this._sortedIndexMap = null; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\n    this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\n    this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._source;\n  }\n\n  get(index) {\n    return this.getOriginal(_getIndex(this._sortedIndexMap, index));\n  }\n\n  getField(index, field) {\n    return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  hasField(index, field) {\n    return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  }\n\n  setField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\n  }\n\n  sort(field, order) {\n    const sortedIndexMap = new Array(this._length);\n    const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\n    return sort.sortPromise(index => sortedIndexMap[index] != null ? sortedIndexMap[index] : sortedIndexMap[index] = index, (index, rel) => {\n      sortedIndexMap[index] = rel;\n    }, this._length, orderFn, index => this.getOriginalField(index, field)).then(() => {\n      this._sortedIndexMap = sortedIndexMap;\n      this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n    });\n  }\n\n  get length() {\n    return this._length;\n  }\n\n  set length(length) {\n    if (this._length === length) {\n      return;\n    }\n\n    const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n\n    if (utils_1.array.findIndex(results, v => !v) >= 0) {\n      return;\n    }\n\n    this._length = length;\n    this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n  }\n\n  get dataSource() {\n    return this;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  getOriginal(index) {\n    return getValue(this._get(index), val => {\n      this.recordPromiseCallBackInternal(index, val);\n    });\n  }\n\n  getOriginalField(index, field) {\n    if (field == null) {\n      return undefined;\n    }\n\n    const record = this.getOriginal(index);\n    return getField(record, field, val => {\n      this.fieldPromiseCallBackInternal(index, field, val);\n    });\n  }\n\n  hasOriginalField(index, field) {\n    if (field == null) {\n      return false;\n    }\n\n    if (typeof field === \"function\") {\n      return true;\n    }\n\n    const record = this.getOriginal(index);\n    return Boolean(record && field in record);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    if (field == null) {\n      return false;\n    }\n\n    const record = this.getOriginal(index);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return record.then(r => setField(r, field, value));\n    }\n\n    return setField(record, field, value);\n  }\n\n  fieldPromiseCallBackInternal(_index, _field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _value) {//\n  }\n\n  recordPromiseCallBackInternal(_index, _record) {//\n  }\n\n}\n\nexports.DataSource = DataSource; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nDataSource.EMPTY = new DataSource({\n  get() {\n    /*noop */\n  },\n\n  length: 0\n});\n\n/***/ }),\n\n/***/ \"./data/FilterDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/FilterDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterDataSource = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst DataSource_1 = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n/** @private */\n\n\nclass DataSourceIterator {\n  constructor(dataSource) {\n    this._dataSource = dataSource;\n    this._curIndex = -1;\n    this._data = [];\n  }\n\n  hasNext() {\n    const next = this._curIndex + 1;\n    return this._dataSource.length > next;\n  }\n\n  next() {\n    const next = this._curIndex + 1;\n\n    const data = this._getIndexData(next);\n\n    this._curIndex = next;\n    return data;\n  }\n\n  movePrev() {\n    this._curIndex--;\n  }\n\n  _getIndexData(index, nest) {\n    const dataSource = this._dataSource;\n    const data = this._data;\n\n    if (index < data.length) {\n      return data[index];\n    }\n\n    if (dataSource.length <= index) {\n      return undefined;\n    }\n\n    const record = this._dataSource.get(index);\n\n    data[index] = record;\n\n    if ((0, utils_1.isPromise)(record)) {\n      record.then(val => {\n        data[index] = val;\n      });\n\n      if (!nest) {\n        for (let i = 1; i <= 100; i++) {\n          this._getIndexData(index + i, true);\n        }\n      }\n    }\n\n    return record;\n  }\n\n}\n/** @private */\n\n\nclass FilterData {\n  constructor(dc, original, filter) {\n    this._cancel = false;\n    this._owner = dc;\n    this._dataSourceItr = new DataSourceIterator(original);\n    this._filter = filter;\n    this._filteredList = [];\n    this._queues = [];\n  }\n\n  get(index) {\n    if (this._cancel) {\n      return undefined;\n    }\n\n    const filteredList = this._filteredList;\n\n    if (index < filteredList.length) {\n      return filteredList[index];\n    }\n\n    const queues = this._queues;\n    const indexQueue = queues[index];\n\n    if (indexQueue) {\n      return indexQueue;\n    }\n\n    return queues[index] || this._findIndex(index);\n  }\n\n  cancel() {\n    this._cancel = true;\n  }\n\n  _findIndex(index) {\n    if (window.Promise) {\n      const timeout = Date.now() + 100;\n      let count = 0;\n      return this._findIndexWithTimeout(index, () => {\n        count++;\n\n        if (count >= 100) {\n          count = 0;\n          return timeout < Date.now();\n        }\n\n        return false;\n      });\n    }\n\n    return this._findIndexWithTimeout(index, () => false);\n  }\n\n  _findIndexWithTimeout(index, testTimeout) {\n    const filteredList = this._filteredList;\n    const filter = this._filter;\n    const dataSourceItr = this._dataSourceItr;\n    const queues = this._queues;\n\n    while (dataSourceItr.hasNext()) {\n      if (this._cancel) {\n        return undefined;\n      }\n\n      const record = dataSourceItr.next();\n\n      if ((0, utils_1.isPromise)(record)) {\n        dataSourceItr.movePrev();\n        const queue = record.then(_value => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n\n      if (filter(record)) {\n        filteredList.push(record);\n\n        if (index < filteredList.length) {\n          return filteredList[index];\n        }\n      }\n\n      if (testTimeout()) {\n        const promise = new Promise(resolve => {\n          setTimeout(() => {\n            resolve();\n          }, 300);\n        });\n        const queue = promise.then(() => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n    }\n\n    const dc = this._owner;\n    dc.length = filteredList.length;\n    return undefined;\n  }\n\n}\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass FilterDataSource extends DataSource_1.DataSource {\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  constructor(dataSource, filter) {\n    super(dataSource);\n    this._filterData = null;\n    this._dataSource = dataSource;\n    this.filter = filter;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n      // reset\n      // eslint-disable-next-line no-self-assign\n      this.filter = this.filter;\n    });\n    (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, type => {\n      handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\n    });\n  }\n\n  get filter() {\n    var _a;\n\n    return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\n  }\n\n  set filter(filter) {\n    if (this._filterData) {\n      this._filterData.cancel();\n    }\n\n    this._filterData = filter ? new FilterData(this, this._dataSource, filter) : null;\n    this.length = this._dataSource.length;\n  }\n\n  getOriginal(index) {\n    if (!this._filterData) {\n      return super.getOriginal(index);\n    }\n\n    return this._filterData.get(index);\n  }\n\n  sort(field, order) {\n    return this._dataSource.sort(field, order);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._dataSource.source;\n  }\n\n  get dataSource() {\n    return this._dataSource;\n  }\n\n  dispose() {\n    this._handler.dispose();\n\n    super.dispose();\n  }\n\n}\n\nexports.FilterDataSource = FilterDataSource;\n\n/***/ }),\n\n/***/ \"./element/Inline.js\":\n/*!***************************!*\\\n  !*** ./element/Inline.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Inline = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nfunction getWidth(ctx, content) {\n  return ctx.measureText(content).width;\n}\n\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\n  const chars = [];\n  let ret = itr.next();\n\n  for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\n    chars.push(ret);\n  }\n\n  let beforeWidth = getWidth(ctx, chars.join(\"\"));\n\n  if (beforeWidth > width) {\n    while (chars.length) {\n      const c = chars.pop();\n      beforeWidth -= getWidth(ctx, c || \"\");\n\n      if (beforeWidth <= width) {\n        break;\n      }\n    }\n  } else if (beforeWidth < width) {\n    while (ret !== null) {\n      const charWidth = getWidth(ctx, ret);\n\n      if (beforeWidth + charWidth > width) {\n        break;\n      }\n\n      chars.push(ret);\n      beforeWidth += charWidth;\n      ret = itr.next();\n    }\n  }\n\n  const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\n  const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\n  return {\n    before: beforeContent ? new Inline(beforeContent) : null,\n    after: afterContent ? new Inline(afterContent) : null\n  };\n}\n\nclass Inline {\n  constructor(content) {\n    this._content = content != null ? content : \"\";\n  }\n\n  width({\n    ctx\n  }) {\n    return getWidth(ctx, this._content);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft,\n        right: offsetRight,\n        top: offsetTop,\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return !!this._content;\n  }\n\n  splitIndex(index) {\n    const content = this._content;\n    const itr = utils_1.str.genChars(content);\n    const chars = [];\n    let ret = itr.next();\n\n    for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\n      chars.push(ret);\n    }\n\n    const beforeContent = chars.join(\"\");\n    const afterContent = content.slice(beforeContent.length);\n    return {\n      before: beforeContent ? new Inline(beforeContent) : null,\n      after: afterContent ? new Inline(afterContent) : null\n    };\n  }\n\n  breakWord(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genWords(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  breakAll(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genChars(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  toString() {\n    return this._content;\n  }\n\n}\n\nexports.Inline = Inline;\n\n/***/ }),\n\n/***/ \"./element/InlineDrawer.js\":\n/*!*********************************!*\\\n  !*** ./element/InlineDrawer.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineDrawer = void 0;\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineDrawer extends Inline_1.Inline {\n  constructor({\n    draw,\n    width,\n    // height,\n    color\n  }) {\n    super();\n    this._draw = draw;\n    this._width = width; // this._height = height;\n\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    this._draw({\n      ctx,\n      canvashelper,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineDrawer = InlineDrawer;\n\n/***/ }),\n\n/***/ \"./element/InlineIcon.js\":\n/*!*******************************!*\\\n  !*** ./element/InlineIcon.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineIcon = void 0;\n\nconst fonts = __importStar(__webpack_require__(/*! ../internal/fonts */ \"./internal/fonts.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineIcon extends Inline_1.Inline {\n  constructor(icon) {\n    super();\n    this._icon = icon || {};\n  }\n\n  width({\n    ctx\n  }) {\n    const icon = this._icon;\n\n    if (icon.width) {\n      return icon.width;\n    }\n\n    if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\n      ctx.save();\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        ctx.font = icon.font || ctx.font;\n        return ctx.measureText(icon.content || \"\").width;\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n        ctx.restore();\n      }\n    }\n\n    return 0; //unknown\n  }\n\n  font() {\n    var _a;\n\n    return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    const icon = this._icon;\n    return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\n  }\n\n  onReady(callback) {\n    const icon = this._icon;\n\n    if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\n      fonts.load(icon.font, icon.content || \"\", callback);\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    const icon = this._icon;\n\n    if (icon.content) {\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        // eslint-disable-next-line no-self-assign\n        ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\n\n        canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft + (this._icon.offsetLeft || 0),\n            right: offsetRight,\n            top: offsetTop + (this._icon.offsetTop || 0),\n            bottom: offsetBottom\n          }\n        });\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n      }\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineIcon = InlineIcon;\n\n/***/ }),\n\n/***/ \"./element/InlineImage.js\":\n/*!********************************!*\\\n  !*** ./element/InlineImage.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineImage = void 0;\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst imgs_1 = __webpack_require__(/*! ../internal/imgs */ \"./internal/imgs.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nclass InlineImage extends Inline_1.Inline {\n  constructor({\n    src,\n    width,\n    height,\n    imageLeft,\n    imageTop,\n    imageWidth,\n    imageHeight,\n    offsetTop,\n    offsetLeft\n  }) {\n    super();\n    this._inlineImgPromise = null;\n    this._inlineImg = null;\n    this._src = src;\n    this._width = width;\n    this._height = height;\n    this._imageLeft = imageLeft;\n    this._imageTop = imageTop;\n    this._imageWidth = imageWidth;\n    this._imageHeight = imageHeight;\n    this._offsetTop = offsetTop;\n    this._offsetLeft = offsetLeft;\n    this._onloaded = [];\n\n    if ((0, utils_1.isPromise)(src)) {\n      src.then(s => {\n        this._src = s;\n\n        this._loadImage(s);\n      });\n    } else {\n      this._loadImage(src);\n    }\n  }\n\n  _loadImage(src) {\n    const img = this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src);\n\n    if ((0, utils_1.isPromise)(img)) {\n      img.then(i => {\n        this._inlineImg = i;\n\n        this._onloaded.forEach(fn => fn());\n      });\n    } else {\n      this._inlineImg = img;\n    }\n  }\n\n  width(_arg) {\n    var _a, _b;\n\n    return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return !!this._inlineImg;\n  }\n\n  onReady(callback) {\n    if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\n      this._onloaded.push(() => callback());\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    var _a, _b;\n\n    const img = this._inlineImg;\n    canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\n        right: offsetRight,\n        top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineImage = InlineImage;\n\n/***/ }),\n\n/***/ \"./element/InlinePath2D.js\":\n/*!*********************************!*\\\n  !*** ./element/InlinePath2D.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlinePath2D = void 0;\n\nconst path2DManager = __importStar(__webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nclass InlinePath2D extends Inline_1.Inline {\n  constructor({\n    path,\n    width,\n    height,\n    color\n  }) {\n    super(); // IEPath2Dpolyfill\n\n    const Path2D = path2DManager.getPath2D();\n    this._path = new Path2D(path);\n    this._width = width;\n    this._height = height;\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    offset++;\n    const padding = {\n      left: offsetLeft,\n      right: offsetRight,\n      top: offsetTop,\n      bottom: offsetBottom\n    };\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n      ctx.clip(); //\n\n      const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\n        offset,\n        padding\n      });\n      ctx.translate(pos.x, pos.y);\n      ctx.fill(this._path);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlinePath2D = InlinePath2D;\n\n/***/ }),\n\n/***/ \"./element/InlineSvg.js\":\n/*!******************************!*\\\n  !*** ./element/InlineSvg.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineSvg = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst InlineImage_1 = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\n\nfunction buildSvgDataUrl(svg) {\n  const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\n  const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\n\n  return url;\n}\n\nfunction getSvgElement(svg) {\n  if (typeof svg === \"string\") {\n    const parser = new DOMParser();\n    return parser.parseFromString(svg, \"image/svg+xml\").children[0];\n  } else {\n    return svg;\n  }\n}\n\nclass InlineSvg extends InlineImage_1.InlineImage {\n  constructor({\n    svg,\n    width,\n    height\n  }) {\n    var _a, _b;\n\n    const svgElem = (0, utils_1.then)(svg, getSvgElement);\n    const elmWidth = !(0, utils_1.isPromise)(svgElem) ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined : undefined;\n    const elmHeight = !(0, utils_1.isPromise)(svgElem) ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined : undefined;\n    const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\n    const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\n    super({\n      src: (0, utils_1.then)(svg, buildSvgDataUrl),\n      width: width || numElmWidth,\n      height: height || numElmHeight,\n      imageWidth: numElmWidth,\n      imageHeight: numElmHeight\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineSvg = InlineSvg;\n\n/***/ }),\n\n/***/ \"./element/inlines.js\":\n/*!****************************!*\\\n  !*** ./element/inlines.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../icons */ \"./icons.js\"));\n\nconst path2DManager = __importStar(__webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst InlineDrawer_1 = __webpack_require__(/*! ./InlineDrawer */ \"./element/InlineDrawer.js\");\n\nconst InlineIcon_1 = __webpack_require__(/*! ./InlineIcon */ \"./element/InlineIcon.js\");\n\nconst InlineImage_1 = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\n\nconst InlinePath2D_1 = __webpack_require__(/*! ./InlinePath2D */ \"./element/InlinePath2D.js\");\n\nconst InlineSvg_1 = __webpack_require__(/*! ./InlineSvg */ \"./element/InlineSvg.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\n      offset,\n      padding\n    });\n    path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nfunction isIconConstructorOption(icon) {\n  if (icon.font && icon.content) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineImageConstructorOption(icon) {\n  if (icon.src) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineSvgConstructorOption(icon) {\n  if (icon.path) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction iconOf(icon) {\n  if (icon instanceof Inline_1.Inline) {\n    return icon;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  if (isIconConstructorOption(icon)) {\n    return new InlineIcon_1.InlineIcon(icon);\n  }\n\n  if (isInlineImageConstructorOption(icon)) {\n    return new InlineImage_1.InlineImage({\n      src: icon.src,\n      width: icon.width,\n      height: icon.width,\n      offsetTop: icon.offsetTop,\n      offsetLeft: icon.offsetLeft\n    });\n  }\n\n  if (icon.svg) {\n    return new InlineSvg_1.InlineSvg({\n      svg: icon.svg,\n      width: icon.width,\n      height: icon.width\n    });\n  }\n\n  if (isInlineSvgConstructorOption(icon)) {\n    return new InlinePath2D_1.InlinePath2D({\n      path: icon.path,\n      width: icon.width,\n      height: icon.width,\n      color: icon.color\n    });\n  }\n\n  const registeredIcons = icons.get();\n\n  if (icon.name && registeredIcons[icon.name]) {\n    const registeredIcon = registeredIcons[icon.name];\n    const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\n    return new InlineDrawer_1.InlineDrawer({\n      draw({\n        ctx,\n        rect,\n        offset,\n        offsetLeft,\n        offsetRight,\n        offsetTop,\n        offsetBottom\n      }) {\n        drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft,\n            right: offsetRight,\n            top: offsetTop,\n            bottom: offsetBottom\n          }\n        });\n      },\n\n      width,\n      height: width,\n      color: icon.color\n    });\n  }\n\n  return new InlineIcon_1.InlineIcon(icon);\n}\n\nexports.iconOf = iconOf;\n\nfunction of(content) {\n  if (content == null) {\n    return null;\n  }\n\n  if (content instanceof Inline_1.Inline) {\n    return content;\n  }\n\n  return new Inline_1.Inline(content);\n}\n\nexports.of = of;\n\nfunction buildInlines(icons, inline) {\n  const result = [];\n\n  if (icons) {\n    result.push(...icons.map(icon => iconOf(icon)).filter(i => i != null));\n  }\n\n  if (Array.isArray(inline) // && inline.filter(il => il instanceof Inline).length <- ?\n  ) {\n      result.push(...inline.map(il => of(il)).filter(i => i != null));\n    } else {\n    const il = of(inline);\n\n    if (il) {\n      result.push(il);\n    }\n  }\n\n  return result;\n}\n\nexports.buildInlines = buildInlines;\n\nfunction string(inline) {\n  return buildInlines(undefined, inline).join(\"\");\n}\n\nexports.string = string;\n\n/***/ }),\n\n/***/ \"./get-internal.js\":\n/*!*************************!*\\\n  !*** ./get-internal.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getInternal = void 0;\n\nfunction getInternal() {\n  console.warn(\"use internal!!\");\n  return {\n    color: __webpack_require__(/*! ./internal/color */ \"./internal/color.js\"),\n    sort: __webpack_require__(/*! ./internal/sort */ \"./internal/sort.js\"),\n    calc: __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"),\n    symbolManager: __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\"),\n    path2DManager: __webpack_require__(/*! ./internal/path2DManager */ \"./internal/path2DManager.js\"),\n    pasteUtils: __webpack_require__(/*! ./internal/paste-utils */ \"./internal/paste-utils.js\")\n  };\n}\n\nexports.getInternal = getInternal;\n\n/***/ }),\n\n/***/ \"./header/action.js\":\n/*!**************************!*\\\n  !*** ./header/action.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./action/BaseAction */ \"./header/action/BaseAction.js\");\n\nObject.defineProperty(exports, \"BaseAction\", {\n  enumerable: true,\n  get: function () {\n    return BaseAction_1.BaseAction;\n  }\n});\n\nconst CheckHeaderAction_1 = __webpack_require__(/*! ./action/CheckHeaderAction */ \"./header/action/CheckHeaderAction.js\");\n\nObject.defineProperty(exports, \"CheckHeaderAction\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeaderAction_1.CheckHeaderAction;\n  }\n});\n\nconst SortHeaderAction_1 = __webpack_require__(/*! ./action/SortHeaderAction */ \"./header/action/SortHeaderAction.js\");\n\nObject.defineProperty(exports, \"SortHeaderAction\", {\n  enumerable: true,\n  get: function () {\n    return SortHeaderAction_1.SortHeaderAction;\n  }\n});\n\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nexports.ACTIONS = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new ImmutableSortHeaderAction(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new ImmutableCheckHeaderAction()\n};\n\nfunction of(headerAction) {\n  if (!headerAction) {\n    return undefined;\n  } else if (typeof headerAction === \"string\") {\n    const key = headerAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return headerAction;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    if (typeof headerCell.sort === \"function\") {\n      const sortMethod = headerCell.sort; // 0.9.0 Backward compatibility\n\n      const sort = ({\n        order,\n        col,\n        grid\n      }) => sortMethod.call(headerCell, order, col, grid);\n\n      return new ImmutableSortHeaderAction({\n        sort\n      });\n    }\n\n    if (typeof headerCell.sort === \"string\") {\n      return new ImmutableSortHeaderAction({\n        sort: headerCell.sort\n      });\n    }\n\n    return exports.ACTIONS.SORT;\n  }\n\n  return of(headerCell.headerAction);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n\n/***/ \"./header/action/BaseAction.js\":\n/*!*************************************!*\\\n  !*** ./header/action/BaseAction.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseAction = void 0;\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = !!option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new BaseAction(this);\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  onChangeDisabledInternal() {// impl\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n\n/***/ \"./header/action/CheckHeaderAction.js\":\n/*!********************************************!*\\\n  !*** ./header/action/CheckHeaderAction.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeaderAction = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./header/action/actionBind.js\");\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./header/action/BaseAction.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\n  clone() {\n    return new CheckHeaderAction(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = getState(grid);\n\n    const action = ({\n      col,\n      row\n    }) => {\n      const range = grid.getCellRange(col, row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if (this.disabled || state.block[cellKey]) {\n        return;\n      }\n\n      const checked = grid.getHeaderValue(range.start.col, range.start.row);\n      grid.setHeaderValue(range.start.col, range.start.row, !checked);\n\n      const onChange = () => {\n        // checkbox animation\n        (0, animate_1.animate)(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      onChange();\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    })];\n  }\n\n}\n\nexports.CheckHeaderAction = CheckHeaderAction;\n\n/***/ }),\n\n/***/ \"./header/action/SortHeaderAction.js\":\n/*!*******************************************!*\\\n  !*** ./header/action/SortHeaderAction.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeaderAction = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./header/action/BaseAction.js\");\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./header/action/actionBind.js\");\n\nclass SortHeaderAction extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    var _a;\n\n    super(option);\n    this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\n  }\n\n  get sort() {\n    return this._sort;\n  }\n\n  set sort(sort) {\n    this._sort = sort;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new SortHeaderAction(this);\n  }\n\n  _executeSort(newState, grid) {\n    if (typeof this._sort === \"function\") {\n      this._sort({\n        order: newState.order || \"asc\",\n        col: newState.col,\n        row: newState.row,\n        grid\n      });\n    } else if (typeof this._sort === \"string\" && ( // v1.6.3 Backward compatibility\n    this._sort !== \"true\" || hasTrueField(grid))) {\n      const field = this._sort;\n      grid.dataSource.sort(field, newState.order || \"asc\");\n    } else {\n      const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\n      const field = grid.getField(newState.col, fieldRow);\n\n      if (field == null) {\n        return;\n      }\n\n      grid.dataSource.sort(field, newState.order || \"asc\");\n    }\n  }\n\n  bindGridEvent(grid, cellId) {\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    const action = cell => {\n      if (this.disabled) {\n        return;\n      }\n\n      const state = grid.sortState;\n      let newState;\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (isTarget(state.col, cell.row)) {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: state.order === \"asc\" ? \"desc\" : \"asc\"\n        };\n      } else {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: \"asc\"\n        };\n      }\n\n      grid.sortState = newState;\n\n      this._executeSort(newState, grid);\n\n      grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: _e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        return true;\n      }\n    })];\n  }\n\n}\n\nexports.SortHeaderAction = SortHeaderAction;\n\nfunction hasTrueField(grid) {\n  if (grid.dataSource.length > 0) {\n    const record = grid.dataSource.get(0);\n    return record != null && \"true\" in record;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"./header/action/actionBind.js\":\n/*!*************************************!*\\\n  !*** ./header/action/actionBind.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  let inMouse;\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n    inMouse = true;\n  }), //MOUSEENTER'col-resize'move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (inMouse && !grid.getElement().style.cursor) {\n      grid.getElement().style.cursor = \"pointer\";\n    }\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n    inMouse = false;\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n\n/***/ \"./header/style.js\":\n/*!*************************!*\\\n  !*** ./header/style.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\nObject.defineProperty(exports, \"BaseStyle\", {\n  enumerable: true,\n  get: function () {\n    return BaseStyle_1.BaseStyle;\n  }\n});\n\nconst CheckHeaderStyle_1 = __webpack_require__(/*! ./style/CheckHeaderStyle */ \"./header/style/CheckHeaderStyle.js\");\n\nObject.defineProperty(exports, \"CheckHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeaderStyle_1.CheckHeaderStyle;\n  }\n});\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(/*! ./style/MultilineTextHeaderStyle */ \"./header/style/MultilineTextHeaderStyle.js\");\n\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n  }\n});\n\nconst SortHeaderStyle_1 = __webpack_require__(/*! ./style/SortHeaderStyle */ \"./header/style/SortHeaderStyle.js\");\n\nObject.defineProperty(exports, \"SortHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return SortHeaderStyle_1.SortHeaderStyle;\n  }\n});\n\nconst Style_1 = __webpack_require__(/*! ./style/Style */ \"./header/style/Style.js\");\n\nObject.defineProperty(exports, \"Style\", {\n  enumerable: true,\n  get: function () {\n    return Style_1.Style;\n  }\n});\n\nfunction of(headerStyle, StyleClass) {\n  if (headerStyle) {\n    if (headerStyle instanceof Style_1.Style) {\n      return headerStyle;\n    } else if (typeof headerStyle === \"function\") {\n      return of(headerStyle(), StyleClass);\n    }\n\n    return new StyleClass(headerStyle);\n  } else {\n    return StyleClass.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./header/style/BaseStyle.js\":\n/*!***********************************!*\\\n  !*** ./header/style/BaseStyle.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseStyle = void 0;\n\nconst EventTarget_1 = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\nconst EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  constructor({\n    bgColor\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/CheckHeaderStyle.js\":\n/*!******************************************!*\\\n  !*** ./header/style/CheckHeaderStyle.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeaderStyle = void 0;\n\nconst StdTextBaseStyle_1 = __webpack_require__(/*! ./StdTextBaseStyle */ \"./header/style/StdTextBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckHeaderStyle(this);\n  }\n\n}\n\nexports.CheckHeaderStyle = CheckHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/MultilineTextHeaderStyle.js\":\n/*!**************************************************!*\\\n  !*** ./header/style/MultilineTextHeaderStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextHeaderStyle = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n  }\n\n  clone() {\n    return new MultilineTextHeaderStyle(this);\n  }\n\n}\n\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/SortHeaderStyle.js\":\n/*!*****************************************!*\\\n  !*** ./header/style/SortHeaderStyle.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeaderStyle = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new SortHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._sortArrowColor = style.sortArrowColor;\n    this._multiline = style.multiline;\n  }\n\n  get sortArrowColor() {\n    return this._sortArrowColor;\n  }\n\n  set sortArrowColor(sortArrowColor) {\n    this._sortArrowColor = sortArrowColor;\n    this.doChangeStyle();\n  }\n\n  get multiline() {\n    return !!this._multiline;\n  }\n\n  set multiline(multiline) {\n    this._multiline = multiline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new SortHeaderStyle(this);\n  }\n\n}\n\nexports.SortHeaderStyle = SortHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdBaseStyle.js\":\n/*!**************************************!*\\\n  !*** ./header/style/StdBaseStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdBaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./header/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdMultilineTextBaseStyle.js\":\n/*!***************************************************!*\\\n  !*** ./header/style/StdMultilineTextBaseStyle.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdMultilineTextBaseStyle = void 0;\n\nconst StdTextBaseStyle_1 = __webpack_require__(/*! ./StdTextBaseStyle */ \"./header/style/StdTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdMultilineTextBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  clone() {\n    return new StdMultilineTextBaseStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdTextBaseStyle.js\":\n/*!******************************************!*\\\n  !*** ./header/style/StdTextBaseStyle.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdTextBaseStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./header/style/StdBaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdTextBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._padding = style.padding;\n    this._textOverflow = style.textOverflow || \"ellipsis\";\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get padding() {\n    return this._padding;\n  }\n\n  set padding(padding) {\n    this._padding = padding;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdTextBaseStyle(this);\n  }\n\n}\n\nexports.StdTextBaseStyle = StdTextBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/Style.js\":\n/*!*******************************!*\\\n  !*** ./header/style/Style.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Style = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._multiline = style.multiline;\n  }\n\n  get multiline() {\n    return !!this._multiline;\n  }\n\n  set multiline(multiline) {\n    this._multiline = multiline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n\n/***/ \"./header/type.js\":\n/*!************************!*\\\n  !*** ./header/type.js ***!\n  \\************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\n\nconst BaseHeader_1 = __webpack_require__(/*! ./type/BaseHeader */ \"./header/type/BaseHeader.js\");\n\nObject.defineProperty(exports, \"BaseHeader\", {\n  enumerable: true,\n  get: function () {\n    return BaseHeader_1.BaseHeader;\n  }\n});\n\nconst CheckHeader_1 = __webpack_require__(/*! ./type/CheckHeader */ \"./header/type/CheckHeader.js\");\n\nObject.defineProperty(exports, \"CheckHeader\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeader_1.CheckHeader;\n  }\n});\n\nconst Header_1 = __webpack_require__(/*! ./type/Header */ \"./header/type/Header.js\");\n\nObject.defineProperty(exports, \"Header\", {\n  enumerable: true,\n  get: function () {\n    return Header_1.Header;\n  }\n});\n\nconst MultilineTextHeader_1 = __webpack_require__(/*! ./type/MultilineTextHeader */ \"./header/type/MultilineTextHeader.js\");\n\nObject.defineProperty(exports, \"MultilineTextHeader\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextHeader_1.MultilineTextHeader;\n  }\n});\n\nconst SortHeader_1 = __webpack_require__(/*! ./type/SortHeader */ \"./header/type/SortHeader.js\");\n\nObject.defineProperty(exports, \"SortHeader\", {\n  enumerable: true,\n  get: function () {\n    return SortHeader_1.SortHeader;\n  }\n});\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Header_1.Header(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new SortHeader_1.SortHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckHeader_1.CheckHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader()\n};\n\nfunction of(headerType) {\n  if (!headerType) {\n    return TYPES.DEFAULT;\n  } else if (typeof headerType === \"string\") {\n    const key = headerType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return headerType;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    return TYPES.SORT;\n  }\n\n  return of(headerCell.headerType);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n\n/***/ \"./header/type/BaseHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/BaseHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseHeader = void 0;\n\nconst styleContents = __importStar(__webpack_require__(/*! ../style */ \"./header/style.js\"));\n\nconst BaseStyle_1 = __webpack_require__(/*! ../style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\nclass BaseHeader {\n  constructor(_options = {}) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    const {\n      style,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase(); //\n\n    this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\n  }\n\n  convertInternal(value) {\n    if (typeof value === \"function\") {\n      value = value();\n    } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n    return value != null ? `${value}` : \"\";\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  getCopyCellValue(value, _grid, _cell) {\n    if (typeof value === \"function\") {\n      value = value();\n    }\n\n    return value != null ? value : \"\";\n  }\n\n}\n\nexports.BaseHeader = BaseHeader;\n\n/***/ }),\n\n/***/ \"./header/type/CheckHeader.js\":\n/*!************************************!*\\\n  !*** ./header/type/CheckHeader.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeader = void 0;\n\nconst inlineUtils = __importStar(__webpack_require__(/*! ../../element/inlines */ \"./element/inlines.js\"));\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst CheckHeaderStyle_1 = __webpack_require__(/*! ../style/CheckHeaderStyle */ \"./header/style/CheckHeaderStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return CheckHeaderStyle_1.CheckHeaderStyle;\n  }\n\n  clone() {\n    return new CheckHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor,\n      padding,\n      color,\n      font,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const {\n      elapsed: {\n        [cellKey]: elapsed\n      }\n    } = getState(grid);\n    const checked = grid.getHeaderValue(range.start.col, range.start.row);\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      let contents = [inlineCheck];\n      contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\n      helper.text(contents, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        textOverflow\n      });\n    });\n  }\n\n}\n\nexports.CheckHeader = CheckHeader;\n\n/***/ }),\n\n/***/ \"./header/type/Header.js\":\n/*!*******************************!*\\\n  !*** ./header/type/Header.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Header = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst Style_1 = __webpack_require__(/*! ../style/Style */ \"./header/style/Style.js\");\n\nclass Header extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      textOverflow,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      multiline\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      if (multiline) {\n        const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n        helper.multilineText(multilines, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          lineHeight,\n          autoWrapText,\n          lineClamp,\n          textOverflow,\n          icons\n        });\n      } else {\n        helper.text(textValue, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          textOverflow,\n          icons\n        });\n      }\n    });\n  }\n\n}\n\nexports.Header = Header;\n\n/***/ }),\n\n/***/ \"./header/type/MultilineTextHeader.js\":\n/*!********************************************!*\\\n  !*** ./header/type/MultilineTextHeader.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextHeader = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(/*! ../style/MultilineTextHeaderStyle */ \"./header/style/MultilineTextHeaderStyle.js\");\n\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n  }\n\n  clone() {\n    return new MultilineTextHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.multilineText(multilines, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.MultilineTextHeader = MultilineTextHeader;\n\n/***/ }),\n\n/***/ \"./header/type/SortHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/SortHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeader = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst SortHeaderStyle_1 = __webpack_require__(/*! ../style/SortHeaderStyle */ \"./header/style/SortHeaderStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\nclass SortHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return SortHeaderStyle_1.SortHeaderStyle;\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline = \"middle\",\n      color,\n      bgColor,\n      font,\n      padding,\n      textOverflow,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      sortArrowColor,\n      multiline\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      const state = grid.sortState;\n      let order = undefined;\n      const {\n        col,\n        row\n      } = context;\n      const range = grid.getCellRange(col, row);\n\n      if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\n        ({\n          order\n        } = state);\n      }\n\n      const ctx = context.getContext();\n      const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\n      const trailingIcon = {\n        name: order != null ? order === \"asc\" ? \"arrow_downward\" : \"arrow_upward\" : undefined,\n        width: arrowSize,\n        color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\"\n      };\n\n      if (multiline) {\n        const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n        helper.multilineText(multilines, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          lineHeight,\n          autoWrapText,\n          lineClamp,\n          textOverflow,\n          icons,\n          trailingIcon\n        });\n      } else {\n        helper.text(textValue, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          textOverflow,\n          icons,\n          trailingIcon\n        });\n      }\n    });\n  }\n\n}\n\nexports.SortHeader = SortHeader;\n\n/***/ }),\n\n/***/ \"./headers.js\":\n/*!********************!*\\\n  !*** ./headers.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.style = exports.type = exports.action = void 0;\n\nconst action = __importStar(__webpack_require__(/*! ./header/action */ \"./header/action.js\"));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(/*! ./header/style */ \"./header/style.js\"));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(/*! ./header/type */ \"./header/type.js\"));\n\nexports.type = type;\n\n/***/ }),\n\n/***/ \"./icons.js\":\n/*!******************!*\\\n  !*** ./icons.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint-disable camelcase*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst icons_1 = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nconst builtins = {\n  get arrow_upward() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\n    return {\n      d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get arrow_downward() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\n    return {\n      d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get edit() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\n    return {\n      d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get add() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\n    return {\n      d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get star() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\n    return {\n      d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\n      width: 24,\n      height: 24\n    };\n  },\n\n  get star_border() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\n    return {\n      d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\n      width: 24,\n      height: 24\n    };\n  },\n\n  get star_half() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\n    return {\n      d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\n      width: 24,\n      height: 24\n    };\n  }\n\n};\n\nfunction get() {\n  return (0, utils_1.extend)(builtins, icons_1.icons);\n}\n\nexports.get = get;\n\n/***/ }),\n\n/***/ \"./internal/EventHandler.js\":\n/*!**********************************!*\\\n  !*** ./internal/EventHandler.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventHandler = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n/** @private */\n\n\nlet nextId = 1;\n\nclass EventHandler {\n  constructor() {\n    this._listeners = {};\n  }\n\n  on(target, type, listener, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ...options) {\n    if (target.addEventListener) {\n      target.addEventListener(type, listener, ...options);\n    }\n\n    const obj = {\n      target,\n      type,\n      listener,\n      options\n    };\n    const id = nextId++;\n    this._listeners[id] = obj;\n    return id;\n  }\n\n  once(target, type, listener, ...options) {\n    const id = this.on(target, type, (...args) => {\n      this.off(id);\n      listener(...args);\n    }, ...options);\n    return id;\n  }\n\n  tryWithOffEvents(target, type, call) {\n    const list = [];\n\n    try {\n      (0, utils_1.each)(this._listeners, obj => {\n        if (obj.target === target && obj.type === type) {\n          if (obj.target.removeEventListener) {\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n          }\n\n          list.push(obj);\n        }\n      });\n      call();\n    } finally {\n      list.forEach(obj => {\n        if (obj.target.addEventListener) {\n          obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n        }\n      });\n    }\n  }\n\n  off(id) {\n    if (id == null) {\n      return;\n    }\n\n    const obj = this._listeners[id];\n\n    if (!obj) {\n      return;\n    }\n\n    delete this._listeners[id];\n\n    if (obj.target.removeEventListener) {\n      obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fire(target, type, ...args) {\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        obj.listener.call(obj.target, ...args);\n      }\n    });\n  }\n\n  hasListener(target, type) {\n    let result = false;\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        result = true;\n      }\n    });\n    return result;\n  }\n\n  clear() {\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target.removeEventListener) {\n        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n      }\n    });\n    this._listeners = {};\n  }\n\n  dispose() {\n    this.clear(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._listeners = null;\n  }\n\n}\n\nexports.EventHandler = EventHandler;\n\n/***/ }),\n\n/***/ \"./internal/LRUCache.js\":\n/*!******************************!*\\\n  !*** ./internal/LRUCache.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LRUCache = void 0;\n\nclass LRUCache {\n  constructor(cacheSize) {\n    this._list = [];\n    this._map = {};\n    this._cacheSize = cacheSize || 50;\n  }\n\n  get(key) {\n    const val = this._map[key];\n\n    if (val) {\n      const list = this._list;\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n      list.push(key);\n    }\n\n    return val;\n  }\n\n  put(key, value) {\n    const list = this._list;\n    const map = this._map;\n\n    if (map[key]) {\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n    }\n\n    map[key] = value;\n    list.push(key);\n\n    if (list.length > this._cacheSize) {\n      const remKey = list.shift() || \"\";\n      delete map[remKey];\n    }\n  }\n\n}\n\nexports.LRUCache = LRUCache;\n\n/***/ }),\n\n/***/ \"./internal/NumberMap.js\":\n/*!*******************************!*\\\n  !*** ./internal/NumberMap.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberMap = void 0;\n\nconst indexFirst = (arr, elm) => {\n  let low = 0;\n  let high = arr.length - 1;\n\n  while (low <= high) {\n    const i = Math.floor((low + high) / 2);\n\n    if (arr[i] === elm) {\n      return i;\n    } else if (arr[i] > elm) {\n      high = i - 1;\n    } else {\n      low = i + 1;\n    }\n  }\n\n  return high < 0 ? 0 : high;\n};\n\nclass NumberMap {\n  constructor() {\n    this._keys = [];\n    this._vals = {};\n    this._sorted = false;\n  }\n\n  put(key, value) {\n    if (!(key in this._vals)) {\n      this._keys.push(key);\n\n      this._sorted = false;\n    }\n\n    this._vals[key] = value;\n  }\n\n  remove(key) {\n    delete this._vals[key];\n\n    const index = this._keys.indexOf(key);\n\n    if (index < 0) {\n      return;\n    }\n\n    this._keys.splice(index, 1);\n\n    this._sorted = false;\n  }\n\n  get(key) {\n    return this._vals[key];\n  }\n\n  has(key) {\n    return this._vals[key] != null;\n  }\n\n  each(keyFrom, keyTo, fn) {\n    const {\n      _keys: keys\n    } = this;\n    const {\n      length\n    } = keys;\n\n    if (!this._sorted) {\n      keys.sort((a, b) => {\n        if (a < b) {\n          return -1;\n        }\n\n        if (a > b) {\n          return 1;\n        }\n\n        return 0;\n      });\n      this._sorted = true;\n    }\n\n    for (let i = indexFirst(keys, keyFrom); i < length; i++) {\n      const key = keys[i];\n\n      if (keyFrom <= key && key <= keyTo) {\n        fn(this.get(key), key);\n      } else if (keyTo < key) {\n        return;\n      }\n    }\n  }\n\n}\n\nexports.NumberMap = NumberMap;\n\n/***/ }),\n\n/***/ \"./internal/Rect.js\":\n/*!**************************!*\\\n  !*** ./internal/Rect.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Rect = void 0;\n\nclass Rect {\n  constructor(left, top, width, height) {\n    this._left = left;\n    this._top = top;\n    this._width = width;\n    this._height = height;\n  }\n\n  static bounds(left, top, right, bottom) {\n    return new Rect(left, top, right - left, bottom - top);\n  }\n\n  static max(rect1, rect2) {\n    return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n  }\n\n  get left() {\n    return this._left;\n  }\n\n  set left(left) {\n    const {\n      right\n    } = this;\n    this._left = left;\n    this.right = right;\n  }\n\n  get top() {\n    return this._top;\n  }\n\n  set top(top) {\n    const {\n      bottom\n    } = this;\n    this._top = top;\n    this.bottom = bottom;\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  set width(width) {\n    this._width = width;\n    this._right = undefined;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  set height(height) {\n    this._height = height;\n    this._bottom = undefined;\n  }\n\n  get right() {\n    return this._right !== undefined ? this._right : this._right = this.left + this.width;\n  }\n\n  set right(right) {\n    this._right = right;\n    this.width = right - this.left;\n  }\n\n  get bottom() {\n    return this._bottom !== undefined ? this._bottom : this._bottom = this.top + this.height;\n  }\n\n  set bottom(bottom) {\n    this._bottom = bottom;\n    this.height = bottom - this.top;\n  }\n\n  offsetLeft(offset) {\n    this._left += offset;\n    this._right = undefined;\n  }\n\n  offsetTop(offset) {\n    this._top += offset;\n    this._bottom = undefined;\n  }\n\n  copy() {\n    return new Rect(this.left, this.top, this.width, this.height);\n  }\n\n  intersection(rect) {\n    const x0 = Math.max(this.left, rect.left);\n    const x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\n    if (x0 <= x1) {\n      const y0 = Math.max(this.top, rect.top);\n      const y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\n      if (y0 <= y1) {\n        return Rect.bounds(x0, y0, x1, y1);\n      }\n    }\n\n    return null;\n  }\n\n  contains(another) {\n    return this.left <= another.left && this.left + this.width >= another.left + another.width && this.top <= another.top && this.top + this.height >= another.top + another.height;\n  }\n\n  inPoint(x, y) {\n    return this.left <= x && this.left + this.width >= x && this.top <= y && this.top + this.height >= y;\n  }\n\n}\n\nexports.Rect = Rect;\n\n/***/ }),\n\n/***/ \"./internal/Scrollable.js\":\n/*!********************************!*\\\n  !*** ./internal/Scrollable.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scrollable = void 0;\n\nconst style = __importStar(__webpack_require__(/*! ./style */ \"./internal/style.js\"));\n\nconst EventHandler_1 = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\n\nclass Scrollable {\n  constructor() {\n    this._p = 1;\n    this._handler = new EventHandler_1.EventHandler();\n    this._scrollable = document.createElement(\"div\");\n\n    this._scrollable.classList.add(\"grid-scrollable\");\n\n    this._height = 0;\n    this._width = 0;\n    this._endPointElement = document.createElement(\"div\");\n\n    this._endPointElement.classList.add(\"grid-scroll-end-point\");\n\n    this._update();\n\n    this._scrollable.appendChild(this._endPointElement); // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n    // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n    // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n    // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n    // this.scrollTop += delta < 0 ? point : -point;\n    // });\n\n  }\n\n  calcTop(top) {\n    const relativeTop = top - this.scrollTop;\n    return this._scrollable.scrollTop + relativeTop;\n  }\n\n  getElement() {\n    return this._scrollable;\n  }\n\n  setScrollSize(width, height) {\n    this._width = width;\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollWidth() {\n    return this._width;\n  }\n\n  set scrollWidth(width) {\n    this._width = width;\n\n    this._update();\n  }\n\n  get scrollHeight() {\n    return this._height;\n  }\n\n  set scrollHeight(height) {\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollLeft() {\n    return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\n  }\n\n  set scrollLeft(scrollLeft) {\n    this._scrollable.scrollLeft = scrollLeft;\n  }\n\n  get scrollTop() {\n    return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\n  }\n\n  set scrollTop(scrollTop) {\n    this._scrollable.scrollTop = scrollTop * this._p;\n  }\n\n  onScroll(fn) {\n    this._handler.on(this._scrollable, \"scroll\", fn);\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n  _update() {\n    let domHeight;\n    const {\n      offsetHeight,\n      offsetWidth\n    } = this._scrollable;\n\n    if (this._height > MAX_SCROLL) {\n      const sbSize = style.getScrollBarSize();\n      const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n      const rScrollRange = this._height - offsetHeight + sbSize;\n      this._p = vScrollRange / rScrollRange;\n      domHeight = MAX_SCROLL;\n    } else {\n      this._p = 1;\n      domHeight = this._height;\n    }\n\n    this._endPointElement.style.top = `${domHeight.toFixed()}px`;\n    this._endPointElement.style.left = `${this._width.toFixed()}px`; // Sets the maximum value to the scroll position\n    // if the current scroll position exceeds the maximum value.\n\n    if (this.scrollTop > this.scrollHeight - offsetHeight) {\n      this.scrollTop = this.scrollHeight - offsetHeight;\n    }\n\n    if (this.scrollLeft > this.scrollWidth - offsetWidth) {\n      this.scrollLeft = this.scrollWidth - offsetWidth;\n    }\n  }\n\n}\n\nexports.Scrollable = Scrollable;\n\n/***/ }),\n\n/***/ \"./internal/animate.js\":\n/*!*****************************!*\\\n  !*** ./internal/animate.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animate = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction cubicBezier(x2, y2, x3, y3) {\n  let step;\n  const err = 0.0001;\n  x2 *= 3;\n  y2 *= 3;\n  x3 *= 3;\n  y3 *= 3;\n  return function (t) {\n    let p, a, b, c, d, x, s;\n\n    if (t < 0 || 1 < t) {\n      throw new Error(`${t}`);\n    }\n\n    p = step || t;\n\n    do {\n      a = 1 - p;\n      b = a * a;\n      c = p * p;\n      d = c * p;\n      x = x2 * b * p + x3 * a * c + d;\n      s = t - x;\n      p += s * 0.5;\n    } while (err < Math.abs(s));\n\n    step = p;\n    return y2 * b * p + y3 * a * c + d;\n  };\n}\n\nconst EASINGS = {\n  linear(p) {\n    return p;\n  },\n\n  easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\n  easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\n  easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0)\n};\nconst raf = utils_1.isNode ? () => {} : window.requestAnimationFrame || ( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfn => setTimeout(fn, 1));\n\nfunction now() {\n  return Date.now();\n}\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\n\n\nfunction animate(duration, step, easing) {\n  const startedAt = now();\n  const easingFn = easing == null ? EASINGS.easeInOut : typeof easing === \"string\" ? EASINGS[easing] : easing;\n  let canceledFlg = false;\n\n  const createAnim = (resolve, reject) => {\n    const anim = () => {\n      const point = now() - startedAt;\n\n      if (canceledFlg) {\n        //cancel\n        if (reject) {\n          reject();\n        }\n      } else if (point >= duration) {\n        //end\n        step(1);\n\n        if (resolve) {\n          resolve();\n        }\n      } else {\n        step(easingFn(point / duration));\n        raf(anim);\n      }\n    };\n\n    return anim;\n  };\n\n  const cancel = () => {\n    canceledFlg = true;\n  };\n\n  if (typeof Promise !== \"undefined\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = new Promise((resolve, reject) => {\n      const anim = createAnim(resolve, reject);\n      step(0);\n      anim();\n    });\n    result.cancel = cancel;\n    return result;\n  } else {\n    const anim = createAnim(() => {}, () => {});\n    step(0);\n    anim();\n    return {\n      cancel\n    };\n  }\n}\n\nexports.animate = animate;\n\n/***/ }),\n\n/***/ \"./internal/calc.js\":\n/*!**************************!*\\\n  !*** ./internal/calc.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toPx = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst TYPE_PAREN = 0;\nconst TYPE_UNIT = 1;\nconst TYPE_OPERATOR = 2;\nconst TYPE_NUMBER = 3;\nconst NODE_TYPE_UNIT = 10;\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\nconst NODE_TYPE_NUMBER = 12;\nconst TABULATION = 0x09;\nconst CARRIAGE_RETURN = 0x0d;\nconst LINE_FEED = 0x0a;\nconst FORM_FEED = 0x0c;\nconst SPACE = 0x20;\nconst PERCENT = 0x25;\nconst FULL_STOP = 0x2e;\nconst DIGIT_0 = 0x30;\nconst DIGIT_9 = 0x39;\nconst LATIN_CAPITAL_A = 0x41;\nconst LATIN_CAPITAL_Z = 0x5a;\nconst LATIN_SMALL_A = 0x61;\nconst LATIN_SMALL_Z = 0x7a;\n\nfunction isUpperLetter(cp) {\n  return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\n}\n\nfunction isLowerLetter(cp) {\n  return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\n}\n\nfunction isLetter(cp) {\n  return isLowerLetter(cp) || isUpperLetter(cp);\n}\n\nfunction isWhitespace(cp) {\n  return cp === TABULATION || cp === LINE_FEED || cp === FORM_FEED || cp === CARRIAGE_RETURN || cp === SPACE;\n}\n\nfunction isDigit(cp) {\n  return cp >= DIGIT_0 && cp <= DIGIT_9;\n}\n\nfunction isDot(cp) {\n  return cp === FULL_STOP;\n}\n\nfunction isUnit(cp) {\n  return isLetter(cp) || cp === PERCENT;\n}\n\nfunction createError(calc) {\n  return new Error(`calc parse error: ${calc}`);\n}\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\n\n\nfunction tokenize(calc) {\n  const exp = calc.replace(/calc\\(/g, \"(\").trim();\n  const tokens = [];\n  const len = exp.length;\n\n  for (let index = 0; index < len; index++) {\n    const c = exp[index];\n    const cp = c.charCodeAt(0);\n\n    if (c === \"(\" || c === \")\") {\n      tokens.push({\n        value: c,\n        type: TYPE_PAREN\n      });\n    } else if (c === \"*\" || c === \"/\") {\n      tokens.push({\n        value: c,\n        type: TYPE_OPERATOR\n      });\n    } else if (c === \"+\" || c === \"-\") {\n      index = parseSign(c, index + 1) - 1;\n    } else if (isDigit(cp) || isDot(cp)) {\n      index = parseNum(c, index + 1) - 1;\n    } else if (isWhitespace(cp)) {// skip\n    } else {\n      throw createError(calc);\n    }\n  }\n\n  function parseSign(sign, start) {\n    if (start < len) {\n      const c = exp[start];\n      const cp = c.charCodeAt(0);\n\n      if (isDigit(cp) || isDot(cp)) {\n        return parseNum(sign + c, start + 1);\n      }\n    }\n\n    tokens.push({\n      value: sign,\n      type: TYPE_OPERATOR\n    });\n    return start;\n  }\n\n  function parseNum(num, start) {\n    let index = start;\n\n    for (; index < len; index++) {\n      const c = exp[index];\n      const cp = c.charCodeAt(0);\n\n      if (isDigit(cp)) {\n        num += c;\n      } else if (c === \".\") {\n        if (num.indexOf(\".\") >= 0) {\n          throw createError(calc);\n        }\n\n        num += c;\n      } else if (isUnit(cp)) {\n        return parseUnit(num, c, index + 1);\n      } else {\n        break;\n      }\n    }\n\n    if (num === \".\") {\n      throw createError(calc);\n    }\n\n    tokens.push({\n      value: parseFloat(num),\n      type: TYPE_NUMBER\n    });\n    return index;\n  }\n\n  function parseUnit(num, unit, start) {\n    let index = start;\n\n    for (; index < len; index++) {\n      const c = exp[index];\n      const cp = c.charCodeAt(0);\n\n      if (isUnit(cp)) {\n        unit += c;\n      } else {\n        break;\n      }\n    }\n\n    tokens.push({\n      value: parseFloat(num),\n      unit,\n      type: TYPE_UNIT\n    });\n    return index;\n  }\n\n  return tokens;\n}\n\nconst PRECEDENCE = {\n  \"*\": 3,\n  \"/\": 3,\n  \"+\": 2,\n  \"-\": 2\n};\n\nfunction lex(tokens, calc) {\n  function buildBinaryExpNode(stack) {\n    const right = stack.pop();\n    const op = stack.pop();\n    const left = stack.pop();\n\n    if (!left || !left.nodeType || !op || op.type !== TYPE_OPERATOR || !right || !right.nodeType) {\n      throw createError(calc);\n    }\n\n    return {\n      nodeType: NODE_TYPE_BINARY_EXPRESSION,\n      left,\n      op,\n      right\n    };\n  }\n\n  const stack = [];\n\n  while (tokens.length) {\n    const token = tokens.shift();\n\n    if (token.type === TYPE_PAREN && token.value === \"(\") {\n      let deep = 0;\n      const closeIndex = utils_1.array.findIndex(tokens, t => {\n        if (t.type === TYPE_PAREN && t.value === \"(\") {\n          deep++;\n        } else if (t.type === TYPE_PAREN && t.value === \")\") {\n          if (!deep) {\n            return true;\n          }\n\n          deep--;\n        }\n\n        return false;\n      });\n\n      if (closeIndex === -1) {\n        throw createError(calc);\n      }\n\n      stack.push(lex(tokens.splice(0, closeIndex), calc));\n      tokens.shift();\n    } else if (token.type === TYPE_OPERATOR) {\n      if (stack.length >= 3) {\n        const beforeOp = stack[stack.length - 2].value;\n\n        if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\n          stack.push(buildBinaryExpNode(stack));\n        }\n      }\n\n      stack.push(token);\n    } else if (token.type === TYPE_UNIT) {\n      const {\n        value: num,\n        unit\n      } = token;\n      stack.push({\n        nodeType: NODE_TYPE_UNIT,\n        value: num,\n        unit\n      });\n    } else if (token.type === TYPE_NUMBER) {\n      stack.push({\n        nodeType: NODE_TYPE_NUMBER,\n        value: token.value\n      });\n    }\n  }\n\n  while (stack.length > 1) {\n    stack.push(buildBinaryExpNode(stack));\n  }\n\n  return stack[0];\n}\n\nfunction parse(calcStr) {\n  const tokens = tokenize(calcStr);\n  return lex(tokens, calcStr);\n}\n\nfunction calcNode(node, context) {\n  if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\n    const left = calcNode(node.left, context);\n    const right = calcNode(node.right, context);\n\n    switch (node.op.value) {\n      case \"+\":\n        return left + right;\n\n      case \"-\":\n        return left - right;\n\n      case \"*\":\n        return left * right;\n\n      case \"/\":\n        return left / right;\n\n      default:\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        throw new Error(`calc error. unknown operator: ${node.op.value}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_UNIT) {\n    switch (node.unit) {\n      case \"%\":\n        return node.value * context.full / 100;\n\n      case \"em\":\n        return node.value * context.em;\n\n      case \"px\":\n        return node.value;\n\n      default:\n        throw new Error(`calc error. unknown unit: ${node.unit}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_NUMBER) {\n    return node.value;\n  }\n\n  throw new Error(\"calc error.\");\n}\n\nfunction toPxInternal(value, context) {\n  const ast = parse(value);\n  return calcNode(ast, context);\n}\n\nfunction toPx(value, context) {\n  if (typeof value === \"string\") {\n    return toPxInternal(value.trim(), context);\n  }\n\n  return value - 0;\n}\n\nexports.toPx = toPx;\n\n/***/ }),\n\n/***/ \"./internal/canvases.js\":\n/*!******************************!*\\\n  !*** ./internal/canvases.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\nconst fontSizeCache = {};\n\nfunction getFontSize(ctx, font) {\n  const fontName = font || ctx.font;\n\n  if (fontSizeCache[fontName]) {\n    return fontSizeCache[fontName];\n  }\n\n  const bk = ctx.font;\n\n  try {\n    ctx.font = fontName;\n    const em = ctx.measureText(\"\").width;\n    return fontSizeCache[fontName] = {\n      width: em,\n      height: em\n    };\n  } finally {\n    ctx.font = bk;\n  }\n}\n\nexports.getFontSize = getFontSize;\n\nfunction calcBasePosition(ctx, rect, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  return calcStartPosition(ctx, rect, 0, 0, {\n    offset,\n    padding: {\n      left: paddingLeft,\n      right: paddingRight,\n      top: paddingTop,\n      bottom: paddingBottom\n    }\n  });\n}\n\nexports.calcBasePosition = calcBasePosition;\n\nfunction calcStartPosition(ctx, rect, width, height, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  const textAlign = ctx.textAlign || \"left\";\n  const textBaseline = ctx.textBaseline || \"middle\";\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  let x = rect.left + offset + paddingLeft;\n\n  if (textAlign === \"right\" || textAlign === \"end\") {\n    x = rect.right - width - offset - paddingRight;\n  } else if (textAlign === \"center\") {\n    x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n  }\n\n  let y = rect.top + offset + paddingTop;\n\n  if (textBaseline === \"bottom\" || textBaseline === \"alphabetic\" || textBaseline === \"ideographic\") {\n    y = rect.bottom - height - offset - paddingBottom;\n  } else if (textBaseline === \"middle\") {\n    y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\n  }\n\n  return {\n    x,\n    y\n  };\n}\n\nexports.calcStartPosition = calcStartPosition;\n\n/***/ }),\n\n/***/ \"./internal/color.js\":\n/*!***************************!*\\\n  !*** ./internal/color.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.colorToRGB = void 0;\nconst rgbMap = {};\n\nfunction styleColorToRGB(color) {\n  const dummy = document.createElement(\"div\");\n  const {\n    style\n  } = dummy;\n  style.color = color;\n  style.position = \"fixed\";\n  style.height = \"1px\";\n  style.width = \"1px\";\n  style.opacity = \"0\";\n  document.body.appendChild(dummy);\n  const {\n    color: styleColor\n  } = (document.defaultView || window).getComputedStyle(dummy, \"\");\n  document.body.removeChild(dummy);\n  return colorToRGB0(styleColor || \"\");\n}\n\nfunction hexToNum(hex) {\n  return parseInt(hex, 16);\n}\n\nfunction createRGB(r, g, b, a = 1) {\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\n\nfunction tripleHexToRGB({\n  1: r,\n  2: g,\n  3: b\n}) {\n  return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n}\n\nfunction sextupleHexToRGB({\n  1: r1,\n  2: r2,\n  3: g1,\n  4: g2,\n  5: b1,\n  6: b2\n}) {\n  return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n}\n\nfunction testRGB({\n  r,\n  g,\n  b,\n  a\n}) {\n  return 0 <= r && r <= 255 && 0 <= g && g <= 255 && 0 <= b && b <= 255 && 0 <= a && a <= 1;\n}\n\nfunction rateToByte(r) {\n  return Math.ceil(r * 255 / 100);\n}\n\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\nconst percentPattern = `${numberPattern}%`;\nconst maybePercentPattern = `${numberPattern}(%?)`;\n\nfunction buildRgbWithCommaRegExp(bytePattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbLv4RegExp(bytePattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction colorToRGB0(color) {\n  if (/^#[0-9a-f]{3}$/i.exec(color)) {\n    return tripleHexToRGB(color);\n  }\n\n  if (/^#[0-9a-f]{6}$/i.exec(color)) {\n    return sextupleHexToRGB(color);\n  }\n\n  let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) || buildRgbLv4RegExp(numberPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbWithCommaRegExp(percentPattern).exec(color) || buildRgbLv4RegExp(percentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) || buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5]\n    /* % */\n    ? 100 : 1));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) || buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5]\n    /* % */\n    ? 100 : 1));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  return null;\n}\n\nfunction colorToRGB(color) {\n  if (typeof color !== \"string\") {\n    return createRGB(0, 0, 0, 0);\n  }\n\n  color = color.toLowerCase().trim();\n\n  if (rgbMap[color]) {\n    return rgbMap[color];\n  }\n\n  return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n}\n\nexports.colorToRGB = colorToRGB;\n\n/***/ }),\n\n/***/ \"./internal/dom.js\":\n/*!*************************!*\\\n  !*** ./internal/dom.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\n\nfunction createElement(tagName, {\n  classList,\n  text,\n  html\n} = {}) {\n  const element = document.createElement(tagName);\n\n  if (classList) {\n    if (Array.isArray(classList)) {\n      element.classList.add(...classList);\n    } else {\n      element.classList.add(classList);\n    }\n  }\n\n  if (text) {\n    element.textContent = text;\n  } else if (html) {\n    element.innerHTML = html;\n  }\n\n  return element;\n}\n\nexports.createElement = createElement;\n\nfunction empty(dom) {\n  let c;\n\n  while (c = dom.firstChild) {\n    dom.removeChild(c);\n  }\n}\n\nexports.empty = empty;\n\nfunction isNode(arg) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return !!(arg.nodeType && arg.nodeName);\n}\n\nfunction toNode(arg) {\n  if (isNode(arg)) {\n    return arg;\n  }\n\n  const dom = createElement(\"div\", {\n    html: arg\n  });\n  return Array.prototype.slice.call(dom.childNodes);\n}\n\nfunction toNodeList(arg) {\n  if (Array.isArray(arg)) {\n    const result = [];\n    arg.forEach(e => {\n      result.push(...toNodeList(e));\n    });\n    return result;\n  }\n\n  const node = toNode(arg);\n  return Array.isArray(node) ? node : [node];\n}\n\nexports.toNodeList = toNodeList;\n\nfunction appendHtml(dom, inner) {\n  toNodeList(inner).forEach(node => {\n    dom.appendChild(node);\n  });\n}\n\nexports.appendHtml = appendHtml;\n\nfunction disableFocus(el) {\n  el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\n  el.tabIndex = -1;\n  Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\n\nexports.disableFocus = disableFocus;\n\nfunction enableFocus(el) {\n  if (\"disableBeforeTabIndex\" in el.dataset) {\n    el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\n  }\n\n  Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\n\nexports.enableFocus = enableFocus;\n\nfunction isFocusable(el) {\n  return el.tabIndex != null && el.tabIndex > -1;\n}\n\nexports.isFocusable = isFocusable;\n\nfunction findPrevSiblingFocusable(el) {\n  let n = el.previousSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.previousSibling;\n  }\n\n  return n;\n}\n\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\n\nfunction findNextSiblingFocusable(el) {\n  let n = el.nextSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.nextSibling;\n  }\n\n  return n;\n}\n\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\n\n/***/ }),\n\n/***/ \"./internal/fonts.js\":\n/*!***************************!*\\\n  !*** ./internal/fonts.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.load = exports.check = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst loads = {};\nlet load;\nexports.load = load;\nlet check;\nexports.check = check;\n\nif (utils_1.isNode) {\n  exports.load = load = function (_font, _testStr, callback) {\n    callback();\n  };\n\n  exports.check = check = function () {\n    return false;\n  };\n} else {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const fontFaceSet = document.fonts;\n  const legacy = !fontFaceSet;\n  exports.load = load = legacy ? function (font, testStr, callback) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      callback();\n      return;\n    } // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\n    __webpack_require__(/*! ./legacy/fontwatch/FontWatchRunner */ \"./internal/legacy/fontwatch/FontWatchRunner.js\").load(font, testStr, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    }, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    });\n  } : function (font, _testStr, callback) {\n    if (loads.all || loads[font]) {\n      callback();\n      return;\n    }\n\n    fontFaceSet.ready.then(() => {\n      loads.all = true;\n    });\n    fontFaceSet.load(font).then(() => {\n      loads[font] = true;\n      callback();\n    });\n  };\n  exports.check = check = legacy ? function (font, testStr) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      return true;\n    }\n\n    load(font, testStr, () => {});\n    return false;\n  } : function (font, testStr) {\n    if (loads.all || loads[font]) {\n      return true;\n    }\n\n    if (!fontFaceSet.check(font)) {\n      load(font, testStr, () => {});\n      return false;\n    }\n\n    return true;\n  };\n}\n\n/***/ }),\n\n/***/ \"./internal/hiDPI.js\":\n/*!***************************!*\\\n  !*** ./internal/hiDPI.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transform = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst handler = new EventHandler_1.EventHandler();\nlet ratio = 1;\n\nfunction setRatio() {\n  if (utils_1.isNode) {\n    ratio = 1;\n  } else {\n    ratio = Math.ceil(window.devicePixelRatio || 1);\n\n    if (ratio > 1 && ratio % 2 !== 0) {\n      ratio += 1;\n    }\n  }\n}\n\nsetRatio();\n\nif (!utils_1.isNode) {\n  handler.on(window, \"resize\", setRatio);\n}\n\nfunction transform(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const {\n    getAttribute,\n    setAttribute\n  } = canvas;\n\n  canvas.getAttribute = function (name) {\n    let result = getAttribute.call(this, name);\n\n    if (name === \"width\" || name === \"height\") {\n      result = `${Number(result) / ratio}`;\n    }\n\n    return result;\n  };\n\n  canvas.setAttribute = function (name, val) {\n    const wh = name === \"width\" || name === \"height\";\n\n    if (wh) {\n      val = `${Number(val) * ratio}`;\n    }\n\n    const result = setAttribute.call(this, name, val);\n\n    if (wh) {\n      ctx.scale(ratio, ratio);\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(canvas, \"width\", {\n    get() {\n      return Number(canvas.getAttribute(\"width\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"width\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  Object.defineProperty(canvas, \"height\", {\n    get() {\n      return Number(canvas.getAttribute(\"height\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"height\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  const {\n    drawImage\n  } = ctx; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  ctx.drawImage = function (img, ...args) {\n    if (img !== canvas || ratio === 1) {\n      return drawImage.call(this, img, ...args);\n    }\n\n    this.save();\n\n    try {\n      this.scale(1 / ratio, 1 / ratio);\n\n      if (args.length > 4) {\n        args[4] *= ratio;\n        args[5] *= ratio;\n      } else {\n        args[0] *= ratio;\n        args[1] *= ratio;\n      }\n\n      return drawImage.call(this, img, ...args);\n    } finally {\n      this.restore();\n    }\n  };\n\n  return canvas;\n}\n\nexports.transform = transform;\n\n/***/ }),\n\n/***/ \"./internal/icons.js\":\n/*!***************************!*\\\n  !*** ./internal/icons.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\nconst ICON_PROP_KEYS = [\"content\", \"font\", \"color\", \"className\", \"tagName\", \"isLiga\", \"width\", \"src\", \"svg\", \"name\", \"path\", \"offsetTop\", \"offsetLeft\"];\n\nfunction quote(name) {\n  const quoted = [];\n  const split = name.split(/,\\s*/);\n\n  for (let i = 0; i < split.length; i++) {\n    const part = split[i].replace(/['\"]/g, \"\");\n\n    if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\n      quoted.push(part);\n    } else {\n      quoted.push(`'${part}'`);\n    }\n  }\n\n  return quoted.join(\",\");\n}\n\nconst doms = {};\nconst props = {};\n\nfunction getIconProps(tagName, className) {\n  const tagProps = props[tagName] || (props[tagName] = {});\n\n  if (tagProps[className]) {\n    return tagProps[className];\n  }\n\n  const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName)); // `classList.add()` cannot be used because it may be separated by spaces.\n\n  dom.className = className;\n  dom.classList.add(\"cheetah-grid-icon\");\n  document.body.appendChild(dom);\n\n  try {\n    const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\n    let content = beforeStyle.getPropertyValue(\"content\");\n\n    if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\n      if (content[0] === content[content.length - 1]) {\n        content = content.slice(1, -1);\n      }\n    }\n\n    let font = beforeStyle.getPropertyValue(\"font\");\n\n    if (!font) {\n      font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\n    }\n\n    const color = beforeStyle.getPropertyValue(\"color\");\n    const width = dom.clientWidth;\n    const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\n    return tagProps[className] = {\n      content,\n      font,\n      color,\n      width,\n      isLiga\n    };\n  } finally {\n    document.body.removeChild(dom);\n  }\n}\n\nexports.getIconProps = getIconProps;\n\nfunction toPropArray(prop, count) {\n  const result = [];\n\n  if (Array.isArray(prop)) {\n    result.push(...prop);\n\n    for (let i = prop.length; i < count; i++) {\n      result.push(null);\n    }\n  } else {\n    for (let i = 0; i < count; i++) {\n      result.push(prop);\n    }\n  }\n\n  return result;\n}\n\nfunction toSimpleArray(iconProps) {\n  if (!iconProps) {\n    return iconProps;\n  } else if (Array.isArray(iconProps)) {\n    return iconProps;\n  }\n\n  const workData = {};\n  let count = 0;\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const prop = iconProps[k];\n\n    if (prop) {\n      if (Array.isArray(prop)) {\n        count = Math.max(count, prop.length);\n      } else {\n        count = Math.max(count, 1);\n      }\n    }\n  });\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const arr = toPropArray(iconProps[k], count); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    workData[k] = arr;\n  });\n  const result = [];\n\n  for (let i = 0; i < count; i++) {\n    const data = {};\n    ICON_PROP_KEYS.forEach(k => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const val = workData[k][i]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      data[k] = val;\n    });\n    result.push(data);\n  }\n\n  return result;\n}\n\nfunction normalize(iconProps) {\n  const data = {};\n\n  for (const k in iconProps) {\n    if (k === \"className\") {\n      continue;\n    }\n\n    if (isIconKey(k)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      data[k] = iconProps[k];\n    }\n  }\n\n  if (iconProps.className) {\n    const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\n\n    for (const k in prop) {\n      if (isIconKey(k)) {\n        if (iconProps[k] == null) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          data[k] = prop[k];\n        }\n      }\n    }\n  }\n\n  return data;\n}\n\nfunction toNormalizeArray(iconProps) {\n  const icons = toSimpleArray(iconProps);\n\n  if (!icons) {\n    return icons;\n  }\n\n  return icons.map(icon => normalize(icon));\n}\n\nexports.toNormalizeArray = toNormalizeArray;\nexports.iconPropKeys = ICON_PROP_KEYS;\n\nfunction isIconKey(k) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return ICON_PROP_KEYS.indexOf(k) >= 0;\n}\n\n/***/ }),\n\n/***/ \"./internal/imgs.js\":\n/*!**************************!*\\\n  !*** ./internal/imgs.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCacheOrLoad = exports.loadImage = void 0;\n\nconst LRUCache_1 = __webpack_require__(/*! ./LRUCache */ \"./internal/LRUCache.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst allCache = {};\n\nfunction loadImage(src) {\n  if (typeof Promise === \"undefined\") {\n    console.error(\"Promise is not loaded. load Promise before this process.\");\n    return {\n      then() {\n        return this;\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    };\n  }\n\n  const img = new Image();\n  const result = new Promise(resolve => {\n    img.onload = () => {\n      resolve(img);\n    };\n  });\n\n  img.onerror = () => {\n    const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\n    console.warn(`cannot load: ${url}`);\n    throw new Error(`IMAGE LOAD ERROR: ${url}`);\n  };\n\n  img.src = src;\n  return result;\n}\n\nexports.loadImage = loadImage;\n\nfunction getCacheOrLoad0(cache, src) {\n  return (0, utils_1.then)(src, src => {\n    const c = cache.get(src);\n\n    if (c) {\n      return c;\n    }\n\n    const result = loadImage(src).then(img => {\n      cache.put(src, img);\n      return img;\n    });\n    cache.put(src, result);\n    return result;\n  });\n}\n\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n  const cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\n  return getCacheOrLoad0(cache, src);\n}\n\nexports.getCacheOrLoad = getCacheOrLoad;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/Path2DShim.js\":\n/*!**********************************************!*\\\n  !*** ./internal/legacy/canvas/Path2DShim.js ***!\n  \\**********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Path2DShim = void 0;\n\nconst PathCommandsParser_1 = __webpack_require__(/*! ./PathCommandsParser */ \"./internal/legacy/canvas/PathCommandsParser.js\");\n\nconst parser = new PathCommandsParser_1.PathCommandsParser();\n\nclass Path2DShim {\n  arc(...args) {\n    this._ops.push({\n      op: \"arc\",\n      args\n    });\n  }\n\n  arcTo(...args) {\n    this._ops.push({\n      op: \"arcTo\",\n      args\n    });\n  }\n\n  bezierCurveTo(...args) {\n    this._ops.push({\n      op: \"bezierCurveTo\",\n      args\n    });\n  }\n\n  closePath(...args) {\n    this._ops.push({\n      op: \"closePath\",\n      args\n    });\n  }\n\n  ellipse(...args) {\n    this._ops.push({\n      op: \"ellipse\",\n      args\n    });\n  }\n\n  lineTo(...args) {\n    this._ops.push({\n      op: \"lineTo\",\n      args\n    });\n  }\n\n  moveTo(...args) {\n    this._ops.push({\n      op: \"moveTo\",\n      args\n    });\n  }\n\n  quadraticCurveTo(...args) {\n    this._ops.push({\n      op: \"quadraticCurveTo\",\n      args\n    });\n  }\n\n  rect(...args) {\n    this._ops.push({\n      op: \"rect\",\n      args\n    });\n  }\n\n  constructor(arg) {\n    this._ops = [];\n\n    if (arg === undefined) {\n      return;\n    }\n\n    if (typeof arg === \"string\") {\n      // try {\n      this._ops = parser.parse(arg); // } catch (e) {\n      // \tthrow e;\n      // }\n    } else if (arg.hasOwnProperty(\"_ops\")) {\n      this._ops = [...arg._ops];\n    } else {\n      throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n    }\n  }\n\n  roundRect(_x, _y, _w, _h, _radii) {\n    throw new Error(\"Method not implemented.\");\n  }\n\n}\n\nexports.Path2DShim = Path2DShim;\nconst {\n  CanvasRenderingContext2D\n} = window;\nconst originalFill = CanvasRenderingContext2D.prototype.fill; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n  if (args[0] instanceof Path2DShim) {\n    const path = args[0];\n    this.beginPath();\n\n    path._ops.forEach(op => {\n      const fn = this[op.op];\n      fn.apply(this, op.args);\n    });\n\n    originalFill.apply(this, Array.prototype.slice.call(args, 1));\n  } else {\n    originalFill.apply(this, args);\n  }\n};\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommands.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommands.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathCommands = void 0;\n/*eslint new-cap: \"off\"*/\n\nfunction mag(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n\nfunction dot(u, v) {\n  return u[0] * v[0] + u[1] * v[1];\n}\n\nfunction ratio(u, v) {\n  return dot(u, v) / (mag(u) * mag(v));\n}\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction angle(u, v) {\n  let sign = 1.0;\n\n  if (u[0] * v[1] - u[1] * v[0] < 0) {\n    sign = -1.0;\n  }\n\n  return sign * Math.acos(clamp(ratio(u, v), -1, 1));\n}\n\nfunction rotClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\n\nfunction rotCounterClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\n\nfunction midPoint(u, v) {\n  return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\n\nfunction meanVec(u, v) {\n  return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\n\nfunction pointMul(u, v) {\n  return [u[0] * v[0], u[1] * v[1]];\n}\n\nfunction scale(c, v) {\n  return [c * v[0], c * v[1]];\n}\n\nfunction sum(u, v) {\n  return [u[0] + v[0], u[1] + v[1]];\n} // Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\n\n\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n  // Convert from endpoint to center parametrization, as detailed in:\n  //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n  if (rx === 0 || ry === 0) {\n    ctx.lineTo(x2, x1);\n    return;\n  }\n\n  phi *= Math.PI / 180.0;\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\n\n  const xPrime2 = pointMul(xPrime, xPrime);\n  let rx2 = Math.pow(rx, 2);\n  let ry2 = Math.pow(ry, 2);\n  const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n\n  if (lambda > 1) {\n    rx *= lambda;\n    ry *= lambda;\n    rx2 = Math.pow(rx, 2);\n    ry2 = Math.pow(ry, 2);\n  }\n\n  let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) / (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n\n  if (fA === fS) {\n    factor *= -1.0;\n  }\n\n  const cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\n\n  const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\n\n  const x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\n  const x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\n  const theta = angle([1, 0], x1UnitVector); // F.6.5.5\n\n  const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n\n  const start = theta;\n  const end = theta + deltaTheta;\n  ctx.save();\n  ctx.translate(c[0], c[1]);\n  ctx.rotate(phi);\n  ctx.scale(rx, ry);\n  ctx.arc(0, 0, 1, start, end, !fS);\n  ctx.restore();\n}\n\nclass PathCommands {\n  constructor(ctx) {\n    let lMx;\n    let lMy;\n    let lx = 0;\n    let ly = 0;\n    let reflected;\n    let lastCommand = \"\";\n\n    function makeReflected() {\n      if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\n        return {\n          x: lx,\n          y: ly\n        };\n      }\n\n      return reflected;\n    }\n\n    this.M = (px, py) => {\n      ctx.moveTo(px, py);\n      lMx = px;\n      lMy = py;\n      lx = px;\n      ly = py;\n      lastCommand = \"M\";\n      return this;\n    };\n\n    this.m = (px, py) => this.M(px + lx, py + ly);\n\n    this.L = (px, py) => {\n      ctx.lineTo(px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"L\";\n      return this;\n    };\n\n    this.l = (px, py) => this.L(px + lx, py + ly);\n\n    this.H = px => this.L(px, ly);\n\n    this.h = px => this.H(px + lx);\n\n    this.V = py => this.L(lx, py);\n\n    this.v = py => this.V(py + ly);\n\n    this.Z = () => {\n      ctx.closePath();\n      lx = lMx;\n      ly = lMy;\n      lastCommand = \"Z\";\n      return this;\n    };\n\n    this.z = () => this.Z(); //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n\n\n    this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n      ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cp2x,\n        y: 2 * py - cp2y\n      };\n      lastCommand = \"C\";\n      return this;\n    };\n\n    this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly); //S x2 y2, x y (or s dx2 dy2, dx dy)\n\n\n    this.S = (cpx, cpy, px, py) => {\n      const {\n        x: cp1x,\n        y: cp1y\n      } = makeReflected();\n      return this.C(cp1x, cp1y, cpx, cpy, px, py);\n    };\n\n    this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly); //Q x1 y1, x y (or q dx1 dy1, dx dy)\n\n\n    this.Q = (cpx, cpy, px, py) => {\n      ctx.quadraticCurveTo(cpx, cpy, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cpx,\n        y: 2 * py - cpy\n      };\n      lastCommand = \"Q\";\n      return this;\n    };\n\n    this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly); //T x y (or t dx dy)\n\n\n    this.T = (px, py) => {\n      const {\n        x: cpx,\n        y: cpy\n      } = makeReflected();\n      return this.Q(cpx, cpy, px, py);\n    };\n\n    this.t = (px, py) => this.T(px + lx, py + ly); //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\n\n    this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n      const x1 = lx;\n      const y1 = ly;\n      ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"A\";\n      return this;\n    }; //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n\n\n    this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n  }\n\n}\n\nexports.PathCommands = PathCommands;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommandsParser.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommandsParser.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathCommandsParser = void 0;\n\nconst PathCommands_1 = __webpack_require__(/*! ./PathCommands */ \"./internal/legacy/canvas/PathCommands.js\");\n\nfunction pathTokens(d) {\n  let idx = 0;\n  return {\n    next() {\n      let s = \"\";\n\n      while (d.length > idx) {\n        const c = d[idx];\n        idx++;\n\n        if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\n          if (s) {\n            return s;\n          }\n        } else {\n          const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\n\n          if (type === \"str\") {\n            if (s) {\n              idx--;\n              return s;\n            }\n\n            return c;\n          }\n\n          if (\"-+\".indexOf(c) > -1) {\n            if (s) {\n              idx--;\n              return s;\n            }\n          }\n\n          if (c === \".\") {\n            if (s.indexOf(\".\") > -1) {\n              idx--;\n              return s;\n            }\n          }\n\n          s += c;\n        }\n      }\n\n      return s || null;\n    }\n\n  };\n}\n\nfunction command(builder, cmd, argsProvider) {\n  if (cmd.toUpperCase() === \"M\" || cmd.toUpperCase() === \"L\" || cmd.toUpperCase() === \"T\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next());\n    return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\n  } else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\n    builder.command(cmd, argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"Z\") {\n    builder.command(cmd);\n    return cmd;\n  } else if (cmd.toUpperCase() === \"C\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"A\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else {\n    // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n    console.warn(`unsupported:${cmd}`);\n  }\n\n  return null;\n}\n\nclass PathCommandsParser {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._ops = [];\n    this._commands = new PathCommands_1.PathCommands(this);\n\n    const buildPush = op => // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (...args) => {\n      this._ops.push({\n        op,\n        args\n      });\n    };\n\n    this.moveTo = buildPush(\"moveTo\");\n    this.lineTo = buildPush(\"lineTo\");\n    this.closePath = buildPush(\"closePath\");\n    this.bezierCurveTo = buildPush(\"bezierCurveTo\");\n    this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\n    this.save = buildPush(\"save\");\n    this.translate = buildPush(\"translate\");\n    this.rotate = buildPush(\"rotate\");\n    this.scale = buildPush(\"scale\");\n    this.arc = buildPush(\"arc\");\n    this.restore = buildPush(\"restore\");\n    this.arcTo = buildPush(\"arcTo\");\n    this.ellipse = buildPush(\"ellipse\");\n    this.rect = buildPush(\"rect\");\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  command(name, ...args) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const numArgs = args || [];\n\n    for (let i = 0; i < args.length; i++) {\n      numArgs[i] -= 0;\n    }\n\n    const command = this._commands[name]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    command.apply(this, numArgs);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  parse(d) {\n    const ops = this._ops = [];\n    const tokens = pathTokens(d);\n\n    try {\n      let cmd;\n      let subsequentCommand = \"Z\";\n\n      while (cmd = tokens.next()) {\n        if (!isNaN(Number(cmd))) {\n          let fst = true;\n          const argsProvider = {\n            next() {\n              if (fst) {\n                fst = false;\n                return cmd;\n              }\n\n              return tokens.next();\n            }\n\n          };\n          subsequentCommand = command(this, subsequentCommand, argsProvider) || \"Z\";\n        } else {\n          subsequentCommand = command(this, cmd, tokens) || \"Z\";\n        }\n      }\n    } catch (e) {\n      console.log(`Error: ${d}`);\n      throw e;\n    }\n\n    return ops;\n  }\n\n}\n\nexports.PathCommandsParser = PathCommandsParser;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontRuler.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontRuler.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FontRuler = void 0;\n\nfunction computeStyle(font) {\n  return [{\n    display: \"block\",\n    position: \"absolute\",\n    top: \"-9999px\",\n    left: \"-9999px\",\n    width: \"auto\",\n    height: \"auto\",\n    margin: \"0\",\n    padding: \"0\",\n    \"white-space\": \"nowrap\",\n    font\n  }, {\n    \"font-variant\": \"normal\",\n    \"font-size\": \"300px\",\n    \"font-style\": \"normal\",\n    \"font-weight\": \"400\",\n    \"line-height\": \"normal\"\n  }];\n}\n\nclass FontRuler {\n  constructor(font, testStr) {\n    const e = document.createElement(\"span\");\n    e.setAttribute(\"aria-hidden\", \"true\");\n    e.textContent = testStr || \"BESbswy\";\n    computeStyle(font).forEach(style => {\n      for (const k in style) {\n        const key = k; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        e.style[key] = style[key];\n      }\n    });\n    document.body.appendChild(e);\n    this.el_ = e;\n  }\n\n  getWidth() {\n    return this.el_.offsetWidth;\n  }\n\n  remove() {\n    document.body.removeChild(this.el_);\n  }\n\n}\n\nexports.FontRuler = FontRuler;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontWatchRunner.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontWatchRunner.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\n\nconst FontRuler_1 = __webpack_require__(/*! ./FontRuler */ \"./internal/legacy/fontwatch/FontRuler.js\");\n\nconst LastResortFonts = {\n  SERIF: \"serif\",\n  SANS_SERIF: \"sans-serif\"\n};\nconst watchRunners = {};\n\nclass FontWatchRunner {\n  static load(font, testStr, activeCallback, inactiveCallback) {\n    const c = watchRunners[font] || (watchRunners[font] = {});\n    testStr += \"\";\n    let runner;\n\n    if (c[testStr]) {\n      runner = c[testStr];\n    } else {\n      runner = c[testStr] = new FontWatchRunner(font, testStr);\n    }\n\n    runner.then(activeCallback, inactiveCallback);\n  }\n\n  constructor(font, testStr) {\n    this.activeCallbacks = [];\n    this.inactiveCallbacks = [];\n    this.status = null;\n    this.lastResortWidths_ = {};\n    this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\n    this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\n    const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\n    const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr); //start\n\n    this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n    this.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n    lastResortRulerA.remove();\n    lastResortRulerB.remove();\n    this.started_ = Date.now();\n    this.check_();\n  }\n\n  then(activeCallback, inactiveCallback) {\n    if (this.status) {\n      if (this.status !== \"ng\") {\n        activeCallback();\n      } else {\n        inactiveCallback();\n      }\n    } else {\n      this.activeCallbacks.push(activeCallback);\n      this.inactiveCallbacks.push(inactiveCallback);\n    }\n  }\n\n  check_() {\n    const widthA = this.fontRulerA_.getWidth();\n    const widthB = this.fontRulerB_.getWidth();\n\n    if (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\n      if (Date.now() - this.started_ >= 3000) {\n        // timeout\n        if (this.isLastResortFont_(widthA, widthB)) {\n          this.finish_(this.activeCallbacks);\n          this.status = \"ok\";\n        } else {\n          this.finish_(this.inactiveCallbacks);\n          this.status = \"ng\";\n        }\n      } else {\n        setTimeout(() => {\n          this.check_();\n        }, 50);\n      }\n    } else {\n      this.finish_(this.activeCallbacks);\n      this.status = \"ok\";\n    }\n  }\n\n  isFallbackFont_(a, b) {\n    return this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\n  }\n\n  widthsMatchLastResortWidths_(a, b) {\n    for (const font in LastResortFonts) {\n      if (LastResortFonts.hasOwnProperty(font)) {\n        if (this.widthMatches_(a, LastResortFonts[font]) && this.widthMatches_(b, LastResortFonts[font])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  widthMatches_(width, lastResortFont) {\n    return width === this.lastResortWidths_[lastResortFont];\n  }\n\n  isLastResortFont_(a, b) {\n    return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n  }\n\n  finish_(callbacks) {\n    setTimeout(() => {\n      this.fontRulerA_.remove();\n      this.fontRulerB_.remove();\n      callbacks.forEach(cb => cb());\n    }, 0);\n  }\n\n}\n\nlet HAS_WEBKIT_FALLBACK_BUG = null;\n\nfunction hasWebKitFallbackBug() {\n  if (HAS_WEBKIT_FALLBACK_BUG === null) {\n    const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n    HAS_WEBKIT_FALLBACK_BUG = !!match && (parseInt(match[1], 10) < 536 || parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11);\n  }\n\n  return HAS_WEBKIT_FALLBACK_BUG;\n}\n\nmodule.exports = FontWatchRunner;\n\n/***/ }),\n\n/***/ \"./internal/menu-items.js\":\n/*!********************************!*\\\n  !*** ./internal/menu-items.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeToFn = exports.normalize = void 0;\n/** @private */\n\nfunction extend(a, b) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const o = {};\n\n  for (const k in a) {\n    o[k] = a[k];\n  }\n\n  for (const k in b) {\n    o[k] = b[k];\n  }\n\n  return o;\n}\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\n\n\nfunction normalize(options) {\n  if (!options) {\n    return [];\n  }\n\n  if (Array.isArray(options)) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return options.map( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    e => extend(e, {\n      label: e.caption || e.label\n    }));\n  }\n\n  if (typeof options === \"string\") {\n    return normalize(JSON.parse(options));\n  }\n\n  const result = [];\n\n  for (const k in options) {\n    result.push({\n      value: k,\n      label: options[k]\n    });\n  }\n\n  return result;\n}\n\nexports.normalize = normalize;\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\n\nfunction normalizeToFn(options) {\n  if (typeof options === \"function\") {\n    return record => normalize(options(record));\n  }\n\n  return () => normalize(options);\n}\n\nexports.normalizeToFn = normalizeToFn;\n\n/***/ }),\n\n/***/ \"./internal/paste-utils.js\":\n/*!*********************************!*\\\n  !*** ./internal/paste-utils.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\n\nfunction normalizePasteValue(text) {\n  return text[text.length - 1] !== \"\\n\" ? text : text[text.length - 2] === \"\\r\" ? text.slice(0, -2) : text.slice(0, -1);\n}\n\nexports.normalizePasteValue = normalizePasteValue;\n\nfunction parsePasteRangeBoxValues(value, option) {\n  const normalizedValue = normalizePasteValue(value);\n  const {\n    values,\n    colCount\n  } = parseValues(normalizedValue, option);\n  return {\n    colCount,\n    rowCount: values.length,\n\n    getCellValue(offsetCol, offsetRow) {\n      var _a, _b;\n\n      return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\n    }\n\n  };\n}\n\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\n\nfunction parseValues(text, {\n  trimOnPaste\n}) {\n  const len = text.length;\n  const adjustCell = trimOnPaste ? cell => cell.trim() : cell => cell;\n  let colCount = 1;\n  let line = [];\n  const values = [line];\n  let cell = \"\";\n\n  for (let index = 0; index < len; index++) {\n    const char = text[index];\n\n    if (char === \"\\t\") {\n      line.push(adjustCell(cell));\n      cell = \"\";\n      continue;\n    }\n\n    if (char === \"\\n\") {\n      // End of line\n      cell = adjustCell(cell);\n\n      if (cell[cell.length - 1] === \"\\r\") {\n        cell = cell.slice(0, -1);\n      }\n\n      line.push(cell);\n      colCount = Math.max(colCount, line.length);\n      line = [];\n      values.push(line);\n      cell = \"\";\n      continue;\n    }\n\n    if (char === '\"' && !cell.trim()) {\n      const quoted = processQuotedCell(index + 1);\n\n      if (quoted) {\n        ({\n          cell\n        } = quoted);\n        index = quoted.next - 1;\n        continue;\n      }\n    }\n\n    cell += char;\n  } // End of text\n\n\n  line.push(adjustCell(cell));\n  colCount = Math.max(colCount, line.length);\n  return {\n    values,\n    colCount\n  };\n\n  function processQuotedCell(start) {\n    let cell = \"\";\n    let index = start;\n\n    while (index < len) {\n      const char = text[index];\n\n      if (char !== '\"') {\n        cell += char;\n        index++;\n        continue;\n      }\n\n      if (text[index + 1] === '\"') {\n        // Escape\n        cell += '\"';\n        index += 2;\n        continue;\n      } // Maybe end quote\n\n\n      let next = index + 1;\n\n      while (next < len) {\n        const c = text[next];\n\n        if (c.trim()) {\n          // Not quoted. e.g. \"A\"B\n          return null;\n        }\n\n        if (c === \"\\t\" || c === \"\\n\") {\n          break;\n        } // Allow spaces\n\n\n        next++;\n      } // End quote\n\n\n      return {\n        cell,\n        next\n      };\n    }\n\n    return null;\n  }\n}\n\n/***/ }),\n\n/***/ \"./internal/path2DManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/path2DManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fill = exports.getPath2D = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction getPath2D() {\n  if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\n    return Path2D;\n  } // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\n  return __webpack_require__(/*! ./legacy/canvas/Path2DShim */ \"./internal/legacy/canvas/Path2DShim.js\").Path2DShim;\n}\n\nexports.getPath2D = getPath2D;\n\nfunction fill(pathModule, ctx, x, y, w, h) {\n  ctx.save();\n\n  try {\n    const {\n      width,\n      height\n    } = pathModule;\n    const {\n      ud: upsideDown,\n      x: offsetX = 0,\n      y: offsetY = 0\n    } = pathModule;\n    w = w || width;\n    h = h || height;\n    const xrate = w / width;\n    const yrate = h / (upsideDown ? -height : height);\n    x = x || 0;\n    y = upsideDown ? (y || 0) + -height * yrate : y || 0;\n    ctx.translate(x, y);\n    ctx.scale(xrate, yrate);\n\n    if (offsetX !== 0 || offsetY !== 0) {\n      ctx.translate(offsetX, offsetY);\n    }\n\n    const Path2D = getPath2D();\n    const path2d = pathModule.path2d = pathModule.path2d || new Path2D(pathModule.d);\n    ctx.fill(path2d);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fill = fill;\n\n/***/ }),\n\n/***/ \"./internal/sort.js\":\n/*!**************************!*\\\n  !*** ./internal/sort.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction createArray(get, length) {\n  const array = new Array(length);\n\n  for (let i = 0; i < length; i++) {\n    array[i] = get(i);\n  }\n\n  return array;\n}\n\nfunction createArrayPromise(get, getField, length // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  return new Promise(resolve => {\n    const plist = [];\n    const array = new Array(length);\n\n    for (let i = 0; i < length; i++) {\n      const data = get(i);\n      const record = {\n        v: data,\n        f: data\n      };\n      array[i] = record;\n\n      if ((0, utils_1.isPromise)(data)) {\n        plist.push(data.then(v => {\n          record.v = v;\n          record.f = v;\n        }));\n      }\n    }\n\n    Promise.all(plist).then(() => getField == null ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    array : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setArrayField(array, getField)).then(resolve);\n  });\n}\n\nfunction setArrayField(array, getField) {\n  return new Promise(resolve => {\n    const {\n      length\n    } = array;\n    const plist = [];\n\n    for (let i = 0; i < length; i++) {\n      const record = array[i];\n      const f = getField(record.v);\n\n      if ((0, utils_1.isPromise)(f)) {\n        plist.push(f.then(v => {\n          record.f = v;\n        }));\n      } else {\n        record.f = f;\n      }\n    }\n\n    Promise.all(plist).then(() => resolve(array));\n  });\n}\n\nfunction sortArray(array, compare) {\n  Array.prototype.sort.call(array, compare);\n}\n\nexports.sortArray = sortArray;\n\nfunction sort(get, set, length, compare, getField) {\n  const old = createArray(get, length);\n\n  if (getField != null) {\n    old.sort((r1, r2) => compare(getField(r1), getField(r2)));\n  } else {\n    old.sort(compare);\n  }\n\n  for (let i = 0; i < length; i++) {\n    set(i, old[i]);\n  }\n}\n\nexports.sort = sort;\n\nfunction sortPromise(get, set, length, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ncompare, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngetField) {\n  if (typeof Promise !== \"undefined\") {\n    return createArrayPromise(get, getField, length).then(array => {\n      array.sort((r1, r2) => compare(r1.f, r2.f));\n\n      for (let i = 0; i < length; i++) {\n        set(i, array[i].v);\n      }\n    });\n  } else {\n    sort(get, set, length, compare, getField);\n    const dummyPromise = {\n      then(fn) {\n        fn();\n        return dummyPromise;\n      },\n\n      catch() {\n        return dummyPromise;\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    };\n    return dummyPromise;\n  }\n}\n\nexports.sortPromise = sortPromise;\n\n/***/ }),\n\n/***/ \"./internal/style.js\":\n/*!***************************!*\\\n  !*** ./internal/style.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getScrollBarSize = exports.initDocument = void 0;\n\nfunction getScrollBarWidth() {\n  const wrapper = document.createElement(\"div\");\n  const inner = document.createElement(\"div\");\n  const {\n    style: wrapperStyle\n  } = wrapper;\n  wrapperStyle.position = \"fixed\";\n  wrapperStyle.height = \"50px\";\n  wrapperStyle.width = \"50px\";\n  wrapperStyle.overflow = \"scroll\";\n  wrapperStyle.opacity = \"0\";\n  wrapperStyle.pointerEvents = \"none\";\n  const {\n    style\n  } = inner;\n  style.height = \"100%\";\n  style.width = \"100%\";\n  inner.textContent = \"x\";\n  wrapper.appendChild(inner);\n  document.body.appendChild(wrapper);\n  const wrapperWidth = wrapper.getBoundingClientRect().width;\n  const innerWidth = inner.getBoundingClientRect().width;\n  document.body.removeChild(wrapper);\n  return Math.ceil(wrapperWidth - innerWidth);\n}\n\nlet SCROLLBAR_SIZE;\n\nfunction initDocumentInternal() {\n  __webpack_require__(/*! @/internal/style.css */ \"../src/js/internal/style.css\");\n\n  SCROLLBAR_SIZE = getScrollBarWidth() || 10;\n  const style = document.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-name\", \"cheetah-grid\");\n  style.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n  document.head.appendChild(style);\n}\n\nlet initDocumentVar = initDocumentInternal;\n\nfunction initDocument() {\n  initDocumentVar();\n  initDocumentVar = Function.prototype;\n}\n\nexports.initDocument = initDocument;\n\nfunction getScrollBarSize() {\n  return SCROLLBAR_SIZE;\n}\n\nexports.getScrollBarSize = getScrollBarSize;\n\n/***/ }),\n\n/***/ \"./internal/symbolManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/symbolManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst Symbol = utils_1.isNode ? global.Symbol : window.Symbol ? window.Symbol : (() => {\n  function random() {\n    const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n    const cl = c.length;\n    let r = \"\";\n\n    for (let i = 0; i < 10; i++) {\n      r += c[Math.floor(Math.random() * cl)];\n    }\n\n    return r;\n  }\n\n  return name => {\n    if (name) {\n      return `#${name}_${random()}`;\n    } else {\n      return `#_${random()}`;\n    }\n  };\n})();\nconst mem = {};\n\nfunction get(name) {\n  if (name) {\n    return mem[name] ? mem[name] : mem[name] = Symbol(name);\n  } else {\n    return Symbol();\n  }\n}\n\nexports.get = get;\n\nfunction getProtectedSymbol() {\n  return get(\"protected\");\n}\n\nexports.getProtectedSymbol = getProtectedSymbol;\n\nfunction getCheckColumnStateId() {\n  return get(\"chkcol.stateID\");\n}\n\nexports.getCheckColumnStateId = getCheckColumnStateId;\n\nfunction getRadioColumnStateId() {\n  return get(\"rdcol.stateID\");\n}\n\nexports.getRadioColumnStateId = getRadioColumnStateId;\n\nfunction getButtonColumnStateId() {\n  return get(\"btncol.stateID\");\n}\n\nexports.getButtonColumnStateId = getButtonColumnStateId;\n\nfunction getColumnFadeinStateId() {\n  return get(\"col.fadein_stateID\");\n}\n\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\n\nfunction getBranchGraphColumnStateId() {\n  return get(\"branch_graph_col.stateID\");\n}\n\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\n\nfunction getSmallDialogInputEditorStateId() {\n  return get(\"small_dialog_input_editor.stateID\");\n}\n\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\n\nfunction getInlineInputEditorStateId() {\n  return get(\"inline_input_editor.stateID\");\n}\n\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\n\nfunction getInlineMenuEditorStateId() {\n  return get(\"inline_menu_editor.stateID\");\n}\n\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\n\nfunction getCheckHeaderStateId() {\n  return get(\"check_header.stateID\");\n}\n\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"../node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./internal/utils.js\":\n/*!***************************!*\\\n  !*** ./internal/utils.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\nexports.isNode = isNode;\nlet arrayFind;\nlet arrayFindIndex;\nconst array = {\n  get find() {\n    if (arrayFind) {\n      return arrayFind;\n    }\n\n    if (Array.prototype.find) {\n      arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n    } else {\n      arrayFind = (arr, predicate) => {\n        const index = array.findIndex(arr, predicate);\n        return index >= 0 ? arr[index] : undefined;\n      };\n    }\n\n    return arrayFind;\n  },\n\n  get findIndex() {\n    if (arrayFindIndex) {\n      return arrayFindIndex;\n    }\n\n    if (Array.prototype.findIndex) {\n      arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n    } else {\n      arrayFindIndex = (arr, predicate) => {\n        const {\n          length\n        } = arr;\n\n        for (let i = 0; i < length; i++) {\n          const value = arr[i];\n\n          if (predicate(value, i, arr)) {\n            return i;\n          }\n        }\n\n        return -1;\n      };\n    }\n\n    return arrayFindIndex;\n  }\n\n};\nexports.array = array;\n\nfunction analyzeUserAgent() {\n  if (isNode) {\n    return {\n      IE: false,\n      Edge: false,\n      Chrome: false,\n      Firefox: false,\n      Safari: false\n    };\n  } else {\n    const ua = window.navigator.userAgent.toLowerCase();\n    return {\n      IE: !!/(msie|trident)/.exec(ua),\n      Edge: ua.indexOf(\"edge\") > -1,\n      Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\n      Firefox: ua.indexOf(\"firefox\") > -1,\n      Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1\n    };\n  }\n}\n\nconst {\n  IE,\n  Chrome,\n  Firefox,\n  Edge,\n  Safari\n} = analyzeUserAgent();\n\nfunction setReadonly(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    enumerable: false,\n    configurable: true,\n    value\n  });\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction each(obj, fn) {\n  for (const key in obj) {\n    fn(obj[key], key, obj);\n  }\n}\n\nexports.each = each; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nfunction omit(source, omits) {\n  const result = {};\n\n  for (const key in source) {\n    if (omits.indexOf(key) >= 0) {\n      continue;\n    }\n\n    Object.defineProperty(result, key, {\n      get() {\n        return source[key];\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return result;\n}\n\nexports.omit = omit;\n\nfunction defaults(source, defs) {\n  const keys = [];\n  const result = {};\n\n  for (const key in source) {\n    keys.push(key);\n    Object.defineProperty(result, key, {\n      get() {\n        const val = source[key];\n        return val === undefined ? defs[key] : val;\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  for (const key in defs) {\n    if (keys.indexOf(key) >= 0) {\n      continue;\n    }\n\n    Object.defineProperty(result, key, {\n      get() {\n        const val = source[key];\n        return val === undefined ? defs[key] : val;\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return result;\n}\n\nexports.defaults = defaults;\n\nfunction extend(...args) {\n  const result = {};\n  args.forEach(source => {\n    for (const key in source) {\n      Object.defineProperty(result, key, {\n        get() {\n          return source[key];\n        },\n\n        set(val) {\n          source[key] = val;\n        },\n\n        configurable: true,\n        enumerable: true\n      });\n    }\n  });\n  return result;\n}\n\nexports.extend = extend;\n\nfunction isDescendantElement(root, target) {\n  while (target.parentElement) {\n    const p = target.parentElement;\n\n    if (root === p) {\n      return true;\n    }\n\n    target = p;\n  }\n\n  return false;\n}\n\nexports.isDescendantElement = isDescendantElement;\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nfunction applyChainSafe(obj, fn, ...names) {\n  let value = obj;\n\n  for (let i = 0; i < names.length && value != null; i++) {\n    value = fn(value, names[i]);\n  }\n\n  return value;\n}\n\nexports.applyChainSafe = applyChainSafe;\n\nfunction getChainSafe(obj, ...names) {\n  return applyChainSafe(obj, (val, name) => val[name], ...names);\n}\n\nexports.getChainSafe = getChainSafe;\n\nfunction getOrApply(value, ...args) {\n  if (typeof value === \"function\") {\n    return value(...args);\n  } else {\n    return value;\n  }\n}\n\nexports.getOrApply = getOrApply;\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nfunction endsWith(str, searchString, position) {\n  const subjectString = str.toString();\n\n  if (typeof position !== \"number\" || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n    position = subjectString.length;\n  }\n\n  position -= searchString.length;\n  const lastIndex = subjectString.lastIndexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\nfunction genChars(s) {\n  // Surrogate Code Point\n  // [\\uD800-\\uDBFF]\n  // Variation Selectors\n  // FVS [\\u180B-\\u180D]\n  // VS1VS16 [\\uFE00-\\uFE0F]\n  // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\n  const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction genWords(s) {\n  const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction isPromise(data) {\n  return Boolean(data && typeof data.then === \"function\");\n}\n\nexports.isPromise = isPromise;\n\nfunction then(result, callback) {\n  return isPromise(result) ? result.then(r => callback(r)) : callback(result);\n}\n\nexports.then = then;\n\nfunction getMouseButtons(e) {\n  if (e.buttons != null) {\n    return e.buttons;\n  }\n  /*for legacy*/\n\n\n  if (e.which != null) {\n    if (e.which === 3) {\n      //right?\n      return 4;\n    }\n\n    if (e.which === 2) {\n      //middle?\n      return 4;\n    }\n\n    return e.which; //left or no\n  }\n\n  if (e.button === 0 || e.button === 1) {\n    return 1; //candidate left\n  }\n\n  if (e.button === 2) {\n    return 2; // right\n  }\n\n  return 0; //no or middle?\n}\n\nfunction getKeyCode(e) {\n  return e.keyCode || e.which;\n}\n\nfunction isTouchEvent(e) {\n  return !!e.changedTouches;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction getIgnoreCase(obj, name) {\n  if (obj[name]) {\n    return obj[name];\n  }\n\n  const l = name.toLowerCase();\n\n  if (obj[l]) {\n    return obj[l];\n  }\n\n  const u = name.toLowerCase();\n\n  if (obj[u]) {\n    return obj[u];\n  }\n\n  for (const k in obj) {\n    if (k.toLowerCase() === l) {\n      return obj[k];\n    }\n  }\n\n  return undefined;\n}\n\nexports.getIgnoreCase = getIgnoreCase;\n\nfunction cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nfunction toBoxArray(obj) {\n  if (!Array.isArray(obj)) {\n    return [obj\n    /*top*/\n    , obj\n    /*right*/\n    , obj\n    /*bottom*/\n    , obj\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 3) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[2]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 2) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 1) {\n    return [obj[0]\n    /*top*/\n    , obj[0]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[0]\n    /*left*/\n    ];\n  }\n\n  return obj;\n}\n\nfunction cellEquals(a, b) {\n  return a.col === b.col && a.row === b.row;\n}\n\nexports.cellEquals = cellEquals;\n\nfunction cellInRange(range, col, row) {\n  return range.start.col <= col && col <= range.end.col && range.start.row <= row && row <= range.end.row;\n}\n\nexports.cellInRange = cellInRange;\nexports.browser = {\n  IE,\n  Edge,\n  Chrome,\n  Firefox,\n  Safari,\n  // Chrome 16777216 (onl Chrome 33554431)\n  // FireFox 17895588\n  // IE 10737433\n  heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433 // default IE limit\n\n};\nexports.obj = {\n  setReadonly,\n  isObject\n};\nexports.str = {\n  endsWith,\n  genChars,\n  genWords\n};\nexports.event = {\n  getMouseButtons,\n  getKeyCode,\n  isTouchEvent,\n  cancel\n};\nexports.style = {\n  toBoxArray\n};\nexports.emptyFn = Function.prototype;\n\n/***/ }),\n\n/***/ \"./list-grid/LG_EVENT_TYPE.js\":\n/*!************************************!*\\\n  !*** ./list-grid/LG_EVENT_TYPE.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LG_EVENT_TYPE = void 0;\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\n  BEFORE_CHANGE_VALUE: \"before_change_value\",\n  CHANGED_VALUE: \"changed_value\",\n  CHANGED_HEADER_VALUE: \"changed_header_value\",\n  REJECTED_PASTE_VALUES: \"rejected_paste_values\"\n});\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/index.js\":\n/*!***************************************!*\\\n  !*** ./list-grid/layout-map/index.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\n\nvar simple_header_layout_1 = __webpack_require__(/*! ./internal/simple-header-layout */ \"./list-grid/layout-map/internal/simple-header-layout.js\");\n\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", {\n  enumerable: true,\n  get: function () {\n    return simple_header_layout_1.SimpleHeaderLayoutMap;\n  }\n});\n\nvar multi_layout_1 = __webpack_require__(/*! ./internal/multi-layout */ \"./list-grid/layout-map/internal/multi-layout.js\");\n\nObject.defineProperty(exports, \"MultiLayoutMap\", {\n  enumerable: true,\n  get: function () {\n    return multi_layout_1.MultiLayoutMap;\n  }\n});\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/multi-layout.js\":\n/*!*******************************************************!*\\\n  !*** ./list-grid/layout-map/internal/multi-layout.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiLayoutMap = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerAction = __importStar(__webpack_require__(/*! ../../../header/action */ \"./header/action.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./list-grid/layout-map/internal/utils.js\");\n\nfunction normalizeLayout(layout) {\n  if (Array.isArray(layout)) {\n    return {\n      header: layout,\n      body: layout\n    };\n  }\n\n  return layout;\n}\n\nlet seqId = 0;\n\nclass LayoutObjectGrid {\n  constructor(layout, transform) {\n    this.objects = [];\n    this.objectGrid = [];\n    this.objectMap = {};\n    this.columnCount = 0;\n    this.columnWidths = [];\n    layout.forEach((rowLayout, row) => {\n      let col = 0;\n      rowLayout.forEach(cell => {\n        var _a, _b;\n\n        const id = seqId++;\n        const obj = transform(cell, id);\n        this.objects.push(obj);\n        this.objectMap[id] = obj;\n        col = this._findStartCell(col, row);\n        const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\n        const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\n        const endRow = row + rowSpan;\n        const endCol = col + colSpan;\n\n        for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\n          const objectGridRow = this._getObjectGridRow(rowIndex);\n\n          for (let colIndex = col; colIndex < endCol; colIndex++) {\n            objectGridRow[colIndex] = obj;\n          }\n        }\n\n        if (colSpan === 1) {\n          this._setWidthDataIfAbsent(col, cell);\n        }\n\n        this._useColumnIndex(endCol - 1);\n\n        col = endCol;\n      });\n    });\n  }\n\n  get rowCount() {\n    return this.objectGrid.length;\n  }\n\n  _findStartCell(col, row) {\n    const objectGridRow = this._getObjectGridRow(row);\n\n    for (let index = col; index < objectGridRow.length; index++) {\n      if (!objectGridRow[index]) {\n        return index;\n      }\n    }\n\n    return objectGridRow.length;\n  }\n\n  _getObjectGridRow(row) {\n    return this.objectGrid[row] || (this.objectGrid[row] = []);\n  }\n\n  _useColumnIndex(col) {\n    if (this.columnCount > col) {\n      return;\n    }\n\n    this.columnCount = col + 1;\n  }\n\n  _setWidthDataIfAbsent(col, cell) {\n    if (!this.columnWidths[col]) {\n      if (cell.width != null || cell.maxWidth != null || cell.minWidth != null) {\n        this.columnWidths[col] = {\n          width: cell.width,\n          maxWidth: cell.maxWidth,\n          minWidth: cell.minWidth\n        };\n      }\n    }\n  }\n\n}\n\nclass MultiLayoutMap {\n  constructor(layout) {\n    this._columnWidths = [];\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    const hbLayouut = normalizeLayout(layout);\n    const header = this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\n      return {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        headerIcon: hd.headerIcon,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n    });\n    const body = this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\n      return {\n        id,\n        field: colDef.field,\n        width: colDef.width,\n        minWidth: colDef.minWidth,\n        maxWidth: colDef.maxWidth,\n        icon: colDef.icon,\n        message: colDef.message,\n        columnType: columns.type.of(colDef.columnType),\n        action: columns.action.of(colDef.action),\n        style: colDef.style,\n        define: colDef\n      };\n    });\n    const columnCount = this._columnCount = Math.max(header.columnCount, body.columnCount);\n\n    for (let col = 0; col < columnCount; col++) {\n      const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\n      this._columnWidths[col] = widthDef;\n    }\n  }\n\n  get columnWidths() {\n    return this._columnWidths;\n  }\n\n  get headerRowCount() {\n    return this._header.rowCount;\n  }\n\n  get bodyRowCount() {\n    return this._body.rowCount;\n  }\n\n  get colCount() {\n    return this._columnCount;\n  }\n\n  get headerObjects() {\n    return this._header.objects;\n  }\n\n  get columnObjects() {\n    return this._body.objects;\n  }\n\n  getCellId(col, row) {\n    var _a, _b, _c, _d;\n\n    if (this.headerRowCount <= row) {\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n    } //in header\n\n\n    return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._header.objectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, row) {\n    const id = this.getCellId(col, row);\n    return this._body.objectMap[id] || this._emptyDataCache.getBody(col, row);\n  }\n\n  getBodyLayoutRangeById(id) {\n    var _a;\n\n    for (let row = 0; row < this.bodyRowCount; row++) {\n      const objectGridRow = this._body.objectGrid[row];\n\n      if (!objectGridRow) {\n        continue;\n      }\n\n      for (let col = 0; col < this.colCount; col++) {\n        if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\n          return this._getCellRange(this._body, col, row, 0);\n        }\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    if (this.headerRowCount <= row) {\n      const recordIndex = this.getRecordIndexByRow(row);\n      const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\n    } //in header\n\n\n    return this._getCellRange(this._header, col, row, 0);\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      const bodyRow = row - this.headerRowCount;\n      return Math.floor(bodyRow / this.bodyRowCount);\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index * this.bodyRowCount;\n  }\n\n  _getCellRange( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layout, col, layoutRow, offsetRow) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n    const result = {\n      start: {\n        col,\n        row: layoutRow + offsetRow\n      },\n      end: {\n        col,\n        row: layoutRow + offsetRow\n      }\n    };\n    const {\n      objectGrid\n    } = layout;\n    const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n\n    if (id == null) {\n      return result;\n    }\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < layout.columnCount; c++) {\n      if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = layoutRow - 1; r >= 0; r--) {\n      if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\n        break;\n      }\n\n      result.start.row = r + offsetRow;\n    }\n\n    for (let r = layoutRow + 1; r < layout.rowCount; r++) {\n      if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\n        break;\n      }\n\n      result.end.row = r + offsetRow;\n    }\n\n    return result;\n  }\n\n}\n\nexports.MultiLayoutMap = MultiLayoutMap;\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/simple-header-layout.js\":\n/*!***************************************************************!*\\\n  !*** ./list-grid/layout-map/internal/simple-header-layout.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleHeaderLayoutMap = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerAction = __importStar(__webpack_require__(/*! ../../../header/action */ \"./header/action.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./list-grid/layout-map/internal/utils.js\");\n\nlet seqId = 0;\n\nclass SimpleHeaderLayoutMap {\n  constructor(header) {\n    this.bodyRowCount = 1;\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    this._columns = [];\n    this._headerCellIds = [];\n    this._headerObjects = this._addHeaders(0, header, []);\n    this._headerObjectMap = this._headerObjects.reduce((o, e) => {\n      o[e.id] = e;\n      return o;\n    }, {});\n  }\n\n  get columnWidths() {\n    return this._columns;\n  }\n\n  get headerRowCount() {\n    return this._headerCellIds.length;\n  }\n\n  get colCount() {\n    return this._columns.length;\n  }\n\n  get headerObjects() {\n    return this._headerObjects;\n  }\n\n  get columnObjects() {\n    return this._columns;\n  }\n\n  getCellId(col, row) {\n    if (this.headerRowCount <= row) {\n      return this._columns[col].id;\n    } //in header\n\n\n    return this._headerCellIds[row][col];\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._headerObjectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, _row) {\n    return this._columns[col] || this._emptyDataCache.getBody(col, 0);\n  }\n\n  getBodyLayoutRangeById(id) {\n    for (let col = 0; col < this.colCount; col++) {\n      if (id === this._columns[col].id) {\n        return {\n          start: {\n            col,\n            row: 0\n          },\n          end: {\n            col,\n            row: 0\n          }\n        };\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    const result = {\n      start: {\n        col,\n        row\n      },\n      end: {\n        col,\n        row\n      }\n    };\n\n    if (this.headerRowCount <= row) {\n      return result;\n    } //in header\n\n\n    const id = this.getCellId(col, row);\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < this.colCount; c++) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = row - 1; r >= 0; r--) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.start.row = r;\n    }\n\n    for (let r = row + 1; r < this.headerRowCount; r++) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.end.row = r;\n    }\n\n    return result;\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      return row - this.headerRowCount;\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index;\n  }\n\n  _addHeaders(row, header, roots) {\n    const results = [];\n\n    const rowCells = this._headerCellIds[row] || this._newRow(row);\n\n    header.forEach(hd => {\n      const col = this._columns.length;\n      const id = seqId++;\n      const cell = {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        headerIcon: hd.headerIcon,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n      results[id] = cell;\n      rowCells[col] = id;\n\n      for (let r = row - 1; r >= 0; r--) {\n        this._headerCellIds[r][col] = roots[r];\n      }\n\n      if (hd.columns) {\n        this._addHeaders(row + 1, hd.columns, [...roots, id]).forEach(c => results.push(c));\n      } else {\n        const colDef = hd;\n\n        this._columns.push({\n          id: seqId++,\n          field: colDef.field,\n          width: colDef.width,\n          minWidth: colDef.minWidth,\n          maxWidth: colDef.maxWidth,\n          icon: colDef.icon,\n          message: colDef.message,\n          columnType: columns.type.of(colDef.columnType),\n          action: columns.action.of(colDef.action),\n          style: colDef.style,\n          define: colDef\n        });\n\n        for (let r = row + 1; r < this._headerCellIds.length; r++) {\n          this._headerCellIds[r][col] = id;\n        }\n      }\n    });\n    return results;\n  }\n\n  _newRow(row) {\n    const newRow = this._headerCellIds[row] = [];\n\n    if (!this._columns.length) {\n      return newRow;\n    }\n\n    const prev = this._headerCellIds[row - 1];\n\n    for (let col = 0; col < prev.length; col++) {\n      newRow[col] = prev[col];\n    }\n\n    return newRow;\n  }\n\n}\n\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/utils.js\":\n/*!************************************************!*\\\n  !*** ./list-grid/layout-map/internal/utils.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nlet seqId = -1; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyHeaderData() {\n  return {\n    id: seqId--,\n    define: {},\n    headerType: headerType.of(null) // default\n\n  };\n}\n\nexports.newEmptyHeaderData = newEmptyHeaderData; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyColumnData() {\n  return {\n    id: seqId--,\n    define: {},\n    columnType: columns.type.of(null),\n    style: null\n  };\n}\n\nexports.newEmptyColumnData = newEmptyColumnData;\n\nclass EmptyDataCache {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.headers = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.columns = [];\n  }\n\n  getHeader(col, row) {\n    const rows = this.headers[row] || (this.headers[row] = []);\n    return rows[col] || (rows[col] = newEmptyHeaderData());\n  }\n\n  getBody(col, row) {\n    const rows = this.columns[row] || (this.columns[row] = []);\n    return rows[col] || (rows[col] = newEmptyColumnData());\n  }\n\n}\n\nexports.EmptyDataCache = EmptyDataCache;\n\n/***/ }),\n\n/***/ \"./main.js\":\n/*!*****************!*\\\n  !*** ./main.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ./columns */ \"./columns.js\"));\n\nexports.columns = columns;\n\nconst core = __importStar(__webpack_require__(/*! ./core */ \"./core.js\"));\n\nexports.core = core;\n\nconst data = __importStar(__webpack_require__(/*! ./data */ \"./data.js\"));\n\nexports.data = data;\n\nconst headers = __importStar(__webpack_require__(/*! ./headers */ \"./headers.js\"));\n\nexports.headers = headers;\n\nconst icons = __importStar(__webpack_require__(/*! ./icons */ \"./icons.js\"));\n\nconst register = __importStar(__webpack_require__(/*! ./register */ \"./register.js\"));\n\nexports.register = register;\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nexports.themes = themes;\n\nconst tools = __importStar(__webpack_require__(/*! ./tools */ \"./tools.js\"));\n\nexports.tools = tools;\n\nconst ListGrid_1 = __webpack_require__(/*! ./ListGrid */ \"./ListGrid.js\");\n\nObject.defineProperty(exports, \"ListGrid\", {\n  enumerable: true,\n  get: function () {\n    return ListGrid_1.ListGrid;\n  }\n});\n\nconst GridCanvasHelper_1 = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\nObject.defineProperty(exports, \"GridCanvasHelper\", {\n  enumerable: true,\n  get: function () {\n    return GridCanvasHelper_1.GridCanvasHelper;\n  }\n});\n\nvar get_internal_1 = __webpack_require__(/*! ./get-internal */ \"./get-internal.js\");\n\nObject.defineProperty(exports, \"_getInternal\", {\n  enumerable: true,\n  get: function () {\n    return get_internal_1.getInternal;\n  }\n});\n/** @private */\n\nfunction getIcons() {\n  return icons.get();\n}\n\nexports.getIcons = getIcons; // backward compatibility\n\nexports.default = {\n  core,\n  tools,\n  // impl Grids\n  ListGrid: ListGrid_1.ListGrid,\n  // objects\n  columns,\n  headers,\n  themes,\n  data,\n  // helper\n  GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\n  //plugin registers\n  register,\n\n  get icons() {\n    return getIcons();\n  }\n\n}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"default\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getDefault();\n  },\n\n  set(defaultTheme) {\n    themes.setDefault(defaultTheme);\n  }\n\n}); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"choices\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getChoices();\n  }\n\n});\n\n/***/ }),\n\n/***/ \"./plugins/icons.js\":\n/*!**************************!*\\\n  !*** ./plugins/icons.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.icons = void 0;\nexports.icons = {};\n\n/***/ }),\n\n/***/ \"./plugins/themes.js\":\n/*!***************************!*\\\n  !*** ./plugins/themes.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.themes = void 0;\nexports.themes = {};\n\n/***/ }),\n\n/***/ \"./register.js\":\n/*!*********************!*\\\n  !*** ./register.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.icons = exports.icon = exports.theme = void 0;\n\nconst icons_1 = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nconst themes_1 = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\nfunction register(obj, name, value) {\n  const old = obj[name];\n  obj[name] = value;\n  return old;\n}\n\nfunction registers(obj, values) {\n  for (const k in values) {\n    obj[k] = values[k];\n  }\n}\n\nfunction theme(name, theme) {\n  if (theme != null) {\n    return register(themes_1.themes, name, theme);\n  } else {\n    return themes_1.themes[name];\n  }\n}\n\nexports.theme = theme;\n\nfunction icon(name, icon) {\n  if (icon != null) {\n    return register(icons_1.icons, name, icon);\n  } else {\n    return icons_1.icons[name];\n  }\n}\n\nexports.icon = icon;\n\nfunction icons(icons) {\n  return registers(icons_1.icons, icons);\n}\n\nexports.icons = icons;\n\n/***/ }),\n\n/***/ \"./themes.js\":\n/*!*******************!*\\\n  !*** ./themes.js ***!\n  \\*******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst theme_1 = __webpack_require__(/*! ./themes/theme */ \"./themes/theme.js\");\n\nconst BASIC_1 = __importDefault(__webpack_require__(/*! ./themes/BASIC */ \"./themes/BASIC.js\"));\n\nconst MATERIAL_DESIGN_1 = __importDefault(__webpack_require__(/*! ./themes/MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\"));\n\nconst themes_1 = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\nconst builtin = {\n  BASIC: exports.BASIC,\n  MATERIAL_DESIGN: exports.MATERIAL_DESIGN\n};\nlet defTheme = exports.MATERIAL_DESIGN;\nexports.theme = {\n  Theme: theme_1.Theme\n};\n\nfunction of(value) {\n  if (!value) {\n    return null;\n  }\n\n  if (typeof value === \"string\") {\n    const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\n\n    if (t) {\n      return t;\n    }\n\n    return null;\n  }\n\n  if (value instanceof theme_1.Theme) {\n    return value;\n  }\n\n  return new theme_1.Theme(value);\n}\n\nexports.of = of;\n\nfunction getDefault() {\n  return defTheme;\n}\n\nexports.getDefault = getDefault;\n\nfunction setDefault(defaultTheme) {\n  defTheme = of(defaultTheme) || defTheme;\n}\n\nexports.setDefault = setDefault;\n\nfunction getChoices() {\n  return (0, utils_1.extend)(builtin, themes_1.themes);\n}\n\nexports.getChoices = getChoices;\n\n/***/ }),\n\n/***/ \"./themes/BASIC.js\":\n/*!*************************!*\\\n  !*** ./themes/BASIC.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction DEFAULT_BG_COLOR(args) {\n  const {\n    row,\n    grid\n  } = args;\n\n  if (row < grid.frozenRowCount) {\n    return \"#FFF\";\n  }\n\n  const index = grid.getRecordIndexByRow(row);\n\n  if (!(index & 1)) {\n    return \"#FFF\";\n  } else {\n    return \"#F6F6F6\";\n  }\n}\n\nconst cacheLinearGradient = {};\n\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n  let stop;\n  const stopsKey = [];\n\n  for (stop in colorStops) {\n    stopsKey.push(`${stop}@${colorStops[stop]}`);\n  }\n\n  const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\n  const ret = cacheLinearGradient[key];\n\n  if (ret) {\n    return ret;\n  }\n\n  const grad = context.createLinearGradient(left, top, left, bottom);\n\n  for (stop in colorStops) {\n    grad.addColorStop(Number(stop), colorStops[stop]);\n  }\n\n  return cacheLinearGradient[key] = grad;\n}\n\nfunction FROZEN_ROWS_BG_COLOR(args) {\n  const {\n    col,\n    grid,\n    grid: {\n      frozenRowCount\n    },\n    context\n  } = args;\n  const {\n    left,\n    top\n  } = grid.getCellRelativeRect(col, 0);\n  const {\n    bottom\n  } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n  return getLinearGradient(context, left, top, left, bottom, {\n    0: \"#FFF\",\n    1: \"#D3D3D3\"\n  });\n}\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\n\n\nexports.default = {\n  color: \"#000\",\n  // frozenRowsColor: '#000',\n  defaultBgColor: DEFAULT_BG_COLOR,\n  frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: \"#000\",\n  // frozenRowsBorderColor: '#000',\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"#000\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"#000\",\n    uncheckBorderColor: \"#000\",\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"#FFF\"\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  indicators: {\n    topLeftColor: \"#000\"\n  },\n  underlayBackgroundColor: \"#F6F6F6\"\n};\n\n/***/ }),\n\n/***/ \"./themes/MATERIAL_DESIGN.js\":\n/*!***********************************!*\\\n  !*** ./themes/MATERIAL_DESIGN.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n  const {\n    row,\n    grid: {\n      frozenRowCount\n    }\n  } = args;\n\n  if (frozenRowCount - 1 === row) {\n    return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\n  } else {\n    return [\"#f2f2f2\"];\n  }\n}\n\nfunction BORDER_COLOR(args) {\n  const {\n    col,\n    row,\n    grid\n  } = args;\n  const {\n    colCount,\n    frozenColCount,\n    recordRowCount\n  } = grid;\n  let top = \"#ccc7c7\";\n  let bottom = \"#ccc7c7\";\n\n  if (recordRowCount > 1) {\n    const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\n    const endRow = startRow + recordRowCount - 1;\n\n    if (startRow !== row) {\n      top = null;\n    }\n\n    if (endRow !== row) {\n      bottom = null;\n    }\n  }\n\n  if (frozenColCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  if (colCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  return [top, null, bottom, null];\n}\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\n\n\nexports.default = {\n  color: \"rgba(0, 0, 0, 0.87)\",\n  frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\n  defaultBgColor: \"#FFF\",\n  // frozenRowsBgColor: '#FFF',\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: BORDER_COLOR,\n  frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    // uncheckBgColor: '#FFF',\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"rgba(0, 0, 0, 0.26)\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"rgb(76, 73, 72)\",\n    uncheckBorderColor: \"rgb(189, 189, 189)\" // uncheckBgColor: \"#FFF\",\n    // checkBgColor: \"#FFF\",\n\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  indicators: {\n    topLeftColor: \"#ccc7c7\"\n  },\n  underlayBackgroundColor: \"#FFF\"\n};\n\n/***/ }),\n\n/***/ \"./themes/theme.js\":\n/*!*************************!*\\\n  !*** ./themes/theme.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Theme = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\"); //private symbol\n\n\nconst _ = (0, symbolManager_1.get)();\n\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\n  const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\n\n  if (value) {\n    return value;\n  }\n\n  if (!defNames) {\n    return value || defaultValue;\n  }\n\n  const getChainSafeWithConvert = convertForSuper ? (obj, ...names) => {\n    const value = (0, utils_1.getChainSafe)(obj, ...names);\n\n    if (!value) {\n      return value;\n    }\n\n    return convertForSuper(value);\n  } : utils_1.getChainSafe;\n  return getChainSafeWithConvert(obj, ...defNames) || getChainSafeWithConvert(superObj, ...defNames) || defaultValue;\n}\n\nclass Theme {\n  constructor(obj, superTheme) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this._messages = null;\n    this._indicators = null;\n    this[_] = {\n      obj,\n      superTheme: superTheme\n    };\n  }\n\n  get font() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"font\"]);\n  }\n\n  get underlayBackgroundColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\n  } // color\n\n\n  get color() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"color\"]);\n  }\n\n  get frozenRowsColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\n  } // background\n\n\n  get defaultBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"defaultBgColor\"]);\n  }\n\n  get frozenRowsBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get selectionBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get highlightBgColor() {\n    if (this.hasProperty([\"highlightBgColor\"])) {\n      const {\n        obj,\n        superTheme\n      } = this[_];\n      return getProp(obj, superTheme, [\"highlightBgColor\"]);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return args => {\n      const color = args.row < args.grid.frozenRowCount ? this.frozenRowsBgColor : this.defaultBgColor;\n\n      if (typeof color === \"function\") {\n        return color(args);\n      }\n\n      return color;\n    };\n  } // border\n\n\n  get borderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"borderColor\"]);\n  }\n\n  get frozenRowsBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\n  }\n\n  get highlightBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\n  }\n\n  get checkbox() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get borderColor() {\n        return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      }\n\n    });\n\n    function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  get radioButton() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getRadioButtonProp(\"checkColor\", [\"color\"]);\n      },\n\n      get uncheckBorderColor() {\n        return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get checkBorderColor() {\n        return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get uncheckBgColor() {\n        return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\n      }\n\n    });\n\n    function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  get button() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._button || (this._button = {\n      get color() {\n        return getButtonProp(\"color\", [\"color\"]);\n      },\n\n      get bgColor() {\n        return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\n      }\n\n    });\n\n    function getButtonProp(prop, defNames) {\n      return getProp(obj, superTheme, [\"button\", prop], defNames);\n    }\n  }\n\n  get header() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\n      }\n\n    });\n  }\n\n  get messages() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._messages || (this._messages = {\n      get infoBgColor() {\n        return getMessageProp(\"infoBgColor\");\n      },\n\n      get errorBgColor() {\n        return getMessageProp(\"errorBgColor\");\n      },\n\n      get warnBgColor() {\n        return getMessageProp(\"warnBgColor\");\n      },\n\n      get boxWidth() {\n        return getMessageProp(\"boxWidth\");\n      },\n\n      get markHeight() {\n        return getMessageProp(\"markHeight\");\n      }\n\n    });\n\n    function getMessageProp(prop) {\n      return getProp(obj, superTheme, [\"messages\", prop]);\n    }\n  }\n\n  get indicators() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._indicators || (this._indicators = {\n      get topLeftColor() {\n        return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get topLeftSize() {\n        return getIndicatorsProp(\"topLeftSize\");\n      },\n\n      get topRightColor() {\n        return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get topRightSize() {\n        return getIndicatorsProp(\"topRightSize\");\n      },\n\n      get bottomRightColor() {\n        return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get bottomRightSize() {\n        return getIndicatorsProp(\"bottomRightSize\");\n      },\n\n      get bottomLeftColor() {\n        return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get bottomLeftSize() {\n        return getIndicatorsProp(\"bottomLeftSize\");\n      }\n\n    });\n\n    function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  hasProperty(names) {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\n  }\n\n  extends(obj) {\n    return new Theme(obj, this);\n  }\n\n}\n\nexports.Theme = Theme;\n\nfunction hasThemeProperty(obj, names) {\n  if (obj instanceof Theme) {\n    return obj.hasProperty(names);\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let o = obj;\n\n    if (!o) {\n      return false;\n    }\n\n    for (let index = 0; index < names.length; index++) {\n      const name = names[index];\n      o = o[name];\n\n      if (!o) {\n        return false;\n      }\n    }\n\n    return !!o;\n  }\n}\n\nfunction colorsToColor(colors) {\n  if (typeof colors === \"function\") {\n    return arg => {\n      const val = colors(arg);\n      return val ? colorsArrayToColor(val) : val;\n    };\n  }\n\n  return colorsArrayToColor(colors);\n\n  function colorsArrayToColor( // eslint-disable-next-line @typescript-eslint/ban-types\n  colors) {\n    if (!Array.isArray(colors)) {\n      return colors;\n    }\n\n    return colors.find(Boolean) || undefined;\n  }\n}\n\n/***/ }),\n\n/***/ \"./tools.js\":\n/*!******************!*\\\n  !*** ./tools.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canvashelper = void 0;\n\nconst canvashelper = __importStar(__webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\"));\n\nexports.canvashelper = canvashelper;\n\n/***/ }),\n\n/***/ \"./tools/canvashelper.js\":\n/*!*******************************!*\\\n  !*** ./tools/canvashelper.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nconst {\n  ceil,\n  PI\n} = Math;\n\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n  function strokeRectLines(positions) {\n    for (let i = 0; i < borderColors.length; i++) {\n      const color = borderColors[i];\n      const preColor = borderColors[i - 1];\n\n      if (color) {\n        if (preColor !== color) {\n          if (preColor) {\n            ctx.strokeStyle = preColor;\n            ctx.stroke();\n          }\n\n          const pos1 = positions[i];\n          ctx.beginPath();\n          ctx.moveTo(pos1.x, pos1.y);\n        }\n\n        const pos2 = positions[i + 1];\n        ctx.lineTo(pos2.x, pos2.y);\n      } else {\n        if (preColor) {\n          ctx.strokeStyle = preColor;\n          ctx.stroke();\n        }\n      }\n    }\n\n    const preColor = borderColors[borderColors.length - 1];\n\n    if (preColor) {\n      ctx.strokeStyle = preColor;\n      ctx.stroke();\n    }\n  }\n\n  if (borderColors[0] === borderColors[1] && borderColors[0] === borderColors[2] && borderColors[0] === borderColors[3]) {\n    if (borderColors[0]) {\n      ctx.strokeStyle = borderColors[0];\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    strokeRectLines([{\n      x: left,\n      y: top\n    }, {\n      x: left + width,\n      y: top\n    }, {\n      x: left + width,\n      y: top + height\n    }, {\n      x: left,\n      y: top + height\n    }, {\n      x: left,\n      y: top\n    }]);\n  }\n}\n\nexports.strokeColorsRect = strokeColorsRect;\n\nfunction roundRect(ctx, left, top, width, height, radius) {\n  ctx.beginPath();\n  ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n  ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n  ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n  ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n  ctx.closePath();\n}\n\nexports.roundRect = roundRect;\n\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.fill();\n}\n\nexports.fillRoundRect = fillRoundRect;\n\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.stroke();\n}\n\nexports.strokeRoundRect = strokeRoundRect;\n\nfunction fillCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.fill();\n}\n\nexports.fillCircle = fillCircle;\n\nfunction strokeCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.stroke();\n}\n\nexports.strokeCircle = strokeCircle;\n\nfunction fillTextRect(ctx, text, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\n      offset,\n      padding\n    });\n    ctx.fillText(text, pos.x, pos.y);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fillTextRect = fillTextRect;\n\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\n      offset,\n      padding\n    });\n    ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawInlineImageRect = drawInlineImageRect;\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction measureCheckbox(ctx) {\n  return {\n    width: (0, canvases_1.getFontSize)(ctx, null).width\n  };\n}\n\nexports.measureCheckbox = measureCheckbox;\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction measureRadioButton(ctx) {\n  return {\n    width: (0, canvases_1.getFontSize)(ctx, null).width\n  };\n}\n\nexports.measureRadioButton = measureRadioButton;\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction drawCheckbox(ctx, x, y, check, {\n  uncheckBgColor = \"#FFF\",\n  checkBgColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  boxSize = measureCheckbox(ctx).width\n} = {}) {\n  const checkPoint = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\n\n    if (check) {\n      ctx.lineWidth = ceil(boxSize / 10);\n      ctx.strokeStyle = uncheckBgColor;\n      let leftWidth = boxSize / 4;\n      let rightWidth = boxSize / 2 * 0.9;\n      const leftLeftPos = x + boxSize * 0.2;\n      const leftTopPos = y + boxSize / 2;\n\n      if (checkPoint < 0.5) {\n        leftWidth *= checkPoint * 2;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(leftLeftPos, leftTopPos);\n      ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n\n      if (checkPoint > 0.5) {\n        if (checkPoint < 1) {\n          rightWidth *= (checkPoint - 0.5) * 2;\n        }\n\n        ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n      }\n\n      ctx.stroke();\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawCheckbox = drawCheckbox;\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction drawRadioButton(ctx, x, y, check, {\n  checkColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  bgColor = \"#FFF\",\n  boxSize = measureRadioButton(ctx).width\n} = {}) {\n  const ratio = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\n\n    if (check) {\n      const checkSize = size * ratio / 2;\n      const padding = (size - checkSize) / 2;\n      ctx.fillStyle = checkColor;\n      fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawRadioButton = drawRadioButton;\n/**\r\n * draw Button\r\n */\n\nfunction drawButton(ctx, left, top, width, height, option = {}) {\n  const {\n    backgroundColor = \"#FFF\",\n    bgColor = backgroundColor,\n    radius = 4,\n    shadow = {}\n  } = option;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n\n    if (shadow) {\n      const {\n        color = \"rgba(0, 0, 0, 0.24)\",\n        blur = 1,\n        offsetX = 0,\n        offsetY = 2,\n        offset: {\n          x: ox = offsetX,\n          y: oy = offsetY\n        } = {}\n      } = shadow;\n      ctx.shadowColor = color;\n      ctx.shadowBlur = blur; //\n\n      ctx.shadowOffsetX = ox;\n      ctx.shadowOffsetY = oy;\n    }\n\n    fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawButton = drawButton;\n\n/***/ }),\n\n/***/ \"./tooltip/BaseTooltip.js\":\n/*!********************************!*\\\n  !*** ./tooltip/BaseTooltip.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseTooltip = void 0;\n\nclass BaseTooltip {\n  constructor(grid) {\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachTooltipElement();\n\n    if (this._tooltipElement) {\n      this._tooltipElement.dispose();\n    }\n\n    this._tooltipElement = undefined;\n  }\n\n  _getTooltipElement() {\n    if (this._tooltipElement) {\n      return this._tooltipElement;\n    }\n\n    return this._tooltipElement = this.createTooltipElementInternal();\n  }\n\n  attachTooltipElement(col, row, content) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.attach(this._grid, col, row, content);\n  }\n\n  moveTooltipElement(col, row) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.move(this._grid, col, row);\n  }\n\n  detachTooltipElement() {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement._detach();\n  }\n\n}\n\nexports.BaseTooltip = BaseTooltip;\n\n/***/ }),\n\n/***/ \"./tooltip/Tooltip.js\":\n/*!****************************!*\\\n  !*** ./tooltip/Tooltip.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tooltip = void 0;\n\nconst BaseTooltip_1 = __webpack_require__(/*! ./BaseTooltip */ \"./tooltip/BaseTooltip.js\");\n\nconst TooltipElement_1 = __webpack_require__(/*! ./internal/TooltipElement */ \"./tooltip/internal/TooltipElement.js\");\n\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\n  createTooltipElementInternal() {\n    return new TooltipElement_1.TooltipElement();\n  }\n\n}\n\nexports.Tooltip = Tooltip;\n\n/***/ }),\n\n/***/ \"./tooltip/TooltipHandler.js\":\n/*!***********************************!*\\\n  !*** ./tooltip/TooltipHandler.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TooltipHandler = void 0;\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ../list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst Tooltip_1 = __webpack_require__(/*! ./Tooltip */ \"./tooltip/Tooltip.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst TOOLTIP_INSTANCE_FACTORY = {\n  \"overflow-text\"(grid) {\n    return new Tooltip_1.Tooltip(grid);\n  }\n\n};\n\nfunction getTooltipInstanceInfo( // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngrid, col, row) {\n  //\n  // overflow text tooltip\n  const overflowText = grid.getCellOverflowText(col, row);\n\n  if (overflowText) {\n    return {\n      type: \"overflow-text\",\n      content: overflowText\n    };\n  }\n\n  return null;\n}\n\nclass TooltipHandler {\n  constructor(grid) {\n    this._grid = grid;\n    this._tooltipInstances = {};\n\n    this._bindGridEvent(grid);\n  }\n\n  dispose() {\n    const tooltipInstances = this._tooltipInstances;\n\n    for (const k in tooltipInstances) {\n      tooltipInstances[k].dispose();\n    } // @ts-expect-error -- ignore\n\n\n    delete this._tooltipInstances;\n    this._attachInfo = null;\n  }\n\n  _attach(col, row) {\n    const info = this._attachInfo;\n\n    const instanceInfo = this._getTooltipInstanceInfo(col, row);\n\n    if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\n      info.instance.detachTooltipElement();\n      this._attachInfo = null;\n    }\n\n    if (!instanceInfo) {\n      return;\n    }\n\n    const {\n      instance\n    } = instanceInfo;\n    instance.attachTooltipElement(col, row, instanceInfo.content);\n\n    const range = this._grid.getCellRange(col, row);\n\n    this._attachInfo = {\n      range,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveTooltipElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachTooltipElement();\n    this._attachInfo = null;\n  }\n\n  _isAttachCell(col, row) {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return false;\n    }\n\n    return (0, utils_1.cellInRange)(info.range, col, row);\n  }\n\n  _bindGridEvent(grid) {\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.col, e.row)) {\n          return;\n        }\n      }\n\n      this._attach(e.col, e.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.related.col, e.related.row)) {\n          return;\n        }\n      }\n\n      this._detach();\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const info = this._attachInfo;\n\n      if (!info) {\n        return;\n      }\n\n      this._move(info.range.start.col, info.range.start.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n\n        this._attach(e.col, e.row);\n      }\n    });\n  }\n\n  _getTooltipInstanceInfo(col, row) {\n    const grid = this._grid;\n    const tooltipInstances = this._tooltipInstances;\n    const info = getTooltipInstanceInfo(grid, col, row);\n\n    if (!info) {\n      return null;\n    }\n\n    const {\n      type\n    } = info;\n    const instance = tooltipInstances[type] || (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\n    return {\n      instance,\n      type,\n      content: info.content\n    };\n  }\n\n}\n\nexports.TooltipHandler = TooltipHandler;\n\n/***/ }),\n\n/***/ \"./tooltip/internal/TooltipElement.js\":\n/*!********************************************!*\\\n  !*** ./tooltip/internal/TooltipElement.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TooltipElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createTooltipDomElement() {\n  __webpack_require__(/*! @/tooltip/internal/TooltipElement.css */ \"../src/js/tooltip/internal/TooltipElement.css\");\n\n  const rootElement = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = (0, dom_1.createElement)(\"pre\", {\n    classList: [CONTENT_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass TooltipElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createTooltipDomElement();\n    this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n    }\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._rootElement; // @ts-expect-error -- ignore\n\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, content) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = content;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      // rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      height: offsetHeight,\n      width: offsetWidth,\n      left: elementLeft,\n      right: elementRight\n    } = element.getBoundingClientRect();\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    const cellCenter = left + width / 2;\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${cellCenter.toFixed()}px`;\n    rootElement.style.minWidth = `${width.toFixed()}px`;\n    const maxWidthForLeft = (elementLeft + cellCenter) * 2;\n    const winWidth = window.innerWidth;\n    const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\n    const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\n    rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.TooltipElement = TooltipElement;\n\n/***/ })\n\n/******/ });\n});\n}).call(typeof global !== \"undefined\" ? global : window, typeof global !== \"undefined\" ? global : window);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row)) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        helper.border(context, option);\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    grid.frozenRowCount = layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...super.bindGridEvent(grid, cellId),\r\n            grid.listen('click_cell', (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record), record, StyleClassDef);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n"],"sourceRoot":""}