{"version":3,"sources":["cheetahGrid.es5/cheetahGrid.es5.js","cheetahGrid.es5/webpack/universalModuleDefinition","cheetahGrid.es5/webpack/bootstrap","cheetahGrid.es5/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid.es5/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid.es5/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid.es5/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid.es5/../src/js/columns/message/internal/MessageElement.css","cheetahGrid.es5/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid.es5/../src/js/internal/style.css","cheetahGrid.es5/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid.es5/node_modules/css-loader/dist/runtime/api.js","cheetahGrid.es5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid.es5/node_modules/webpack/buildin/global.js","cheetahGrid.es5/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid.es5/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid.es5/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid.es5/../src/js/internal/style.css*","cheetahGrid.es5/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid.es5/./GridCanvasHelper.js","cheetahGrid.es5/./ListGrid.js","cheetahGrid.es5/./columns.js","cheetahGrid.es5/./columns/action.js","cheetahGrid.es5/./columns/action/Action.js","cheetahGrid.es5/./columns/action/BaseAction.js","cheetahGrid.es5/./columns/action/BaseInputEditor.js","cheetahGrid.es5/./columns/action/ButtonAction.js","cheetahGrid.es5/./columns/action/CheckEditor.js","cheetahGrid.es5/./columns/action/Editor.js","cheetahGrid.es5/./columns/action/InlineInputEditor.js","cheetahGrid.es5/./columns/action/InlineMenuEditor.js","cheetahGrid.es5/./columns/action/RadioEditor.js","cheetahGrid.es5/./columns/action/SmallDialogInputEditor.js","cheetahGrid.es5/./columns/action/action-utils.js","cheetahGrid.es5/./columns/action/actionBind.js","cheetahGrid.es5/./columns/action/internal/InlineInputElement.js","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.js","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.es5/./columns/action/internal/input-value-handler.js","cheetahGrid.es5/./columns/indicator/handlers.js","cheetahGrid.es5/./columns/indicator/triangle.js","cheetahGrid.es5/./columns/message/BaseMessage.js","cheetahGrid.es5/./columns/message/ErrorMessage.js","cheetahGrid.es5/./columns/message/InfoMessage.js","cheetahGrid.es5/./columns/message/MessageHandler.js","cheetahGrid.es5/./columns/message/WarningMessage.js","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.es5/./columns/message/internal/MessageElement.js","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.js","cheetahGrid.es5/./columns/message/messageUtils.js","cheetahGrid.es5/./columns/style.js","cheetahGrid.es5/./columns/style/BaseStyle.js","cheetahGrid.es5/./columns/style/BranchGraphStyle.js","cheetahGrid.es5/./columns/style/ButtonStyle.js","cheetahGrid.es5/./columns/style/CheckStyle.js","cheetahGrid.es5/./columns/style/IconStyle.js","cheetahGrid.es5/./columns/style/ImageStyle.js","cheetahGrid.es5/./columns/style/MenuStyle.js","cheetahGrid.es5/./columns/style/MultilineTextStyle.js","cheetahGrid.es5/./columns/style/NumberStyle.js","cheetahGrid.es5/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.es5/./columns/style/RadioStyle.js","cheetahGrid.es5/./columns/style/StdBaseStyle.js","cheetahGrid.es5/./columns/style/Style.js","cheetahGrid.es5/./columns/type.js","cheetahGrid.es5/./columns/type/BaseColumn.js","cheetahGrid.es5/./columns/type/BranchGraphColumn.js","cheetahGrid.es5/./columns/type/ButtonColumn.js","cheetahGrid.es5/./columns/type/CheckColumn.js","cheetahGrid.es5/./columns/type/Column.js","cheetahGrid.es5/./columns/type/IconColumn.js","cheetahGrid.es5/./columns/type/ImageColumn.js","cheetahGrid.es5/./columns/type/MenuColumn.js","cheetahGrid.es5/./columns/type/MultilineTextColumn.js","cheetahGrid.es5/./columns/type/NumberColumn.js","cheetahGrid.es5/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.es5/./columns/type/RadioColumn.js","cheetahGrid.es5/./columns/type/columnUtils.js","cheetahGrid.es5/./columns/utils/index.js","cheetahGrid.es5/./core.js","cheetahGrid.es5/./core/DG_EVENT_TYPE.js","cheetahGrid.es5/./core/DrawGrid.js","cheetahGrid.es5/./core/EventTarget.js","cheetahGrid.es5/./data.js","cheetahGrid.es5/./data/CachedDataSource.js","cheetahGrid.es5/./data/DataSource.js","cheetahGrid.es5/./data/FilterDataSource.js","cheetahGrid.es5/./element/Inline.js","cheetahGrid.es5/./element/InlineDrawer.js","cheetahGrid.es5/./element/InlineIcon.js","cheetahGrid.es5/./element/InlineImage.js","cheetahGrid.es5/./element/InlinePath2D.js","cheetahGrid.es5/./element/InlineSvg.js","cheetahGrid.es5/./element/inlines.js","cheetahGrid.es5/./get-internal.js","cheetahGrid.es5/./header/action.js","cheetahGrid.es5/./header/action/BaseAction.js","cheetahGrid.es5/./header/action/CheckHeaderAction.js","cheetahGrid.es5/./header/action/SortHeaderAction.js","cheetahGrid.es5/./header/action/actionBind.js","cheetahGrid.es5/./header/style.js","cheetahGrid.es5/./header/style/BaseStyle.js","cheetahGrid.es5/./header/style/CheckHeaderStyle.js","cheetahGrid.es5/./header/style/MultilineTextHeaderStyle.js","cheetahGrid.es5/./header/style/SortHeaderStyle.js","cheetahGrid.es5/./header/style/StdBaseStyle.js","cheetahGrid.es5/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid.es5/./header/style/StdTextBaseStyle.js","cheetahGrid.es5/./header/style/Style.js","cheetahGrid.es5/./header/type.js","cheetahGrid.es5/./header/type/BaseHeader.js","cheetahGrid.es5/./header/type/CheckHeader.js","cheetahGrid.es5/./header/type/Header.js","cheetahGrid.es5/./header/type/MultilineTextHeader.js","cheetahGrid.es5/./header/type/SortHeader.js","cheetahGrid.es5/./headers.js","cheetahGrid.es5/./icons.js","cheetahGrid.es5/./internal/EventHandler.js","cheetahGrid.es5/./internal/LRUCache.js","cheetahGrid.es5/./internal/NumberMap.js","cheetahGrid.es5/./internal/Rect.js","cheetahGrid.es5/./internal/Scrollable.js","cheetahGrid.es5/./internal/animate.js","cheetahGrid.es5/./internal/calc.js","cheetahGrid.es5/./internal/canvases.js","cheetahGrid.es5/./internal/color.js","cheetahGrid.es5/./internal/dom.js","cheetahGrid.es5/./internal/fonts.js","cheetahGrid.es5/./internal/hiDPI.js","cheetahGrid.es5/./internal/icons.js","cheetahGrid.es5/./internal/imgs.js","cheetahGrid.es5/./internal/legacy/canvas/Path2DShim.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommands.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.es5/./internal/menu-items.js","cheetahGrid.es5/./internal/paste-utils.js","cheetahGrid.es5/./internal/path2DManager.js","cheetahGrid.es5/./internal/sort.js","cheetahGrid.es5/./internal/style.js","cheetahGrid.es5/./internal/symbolManager.js","cheetahGrid.es5/./internal/utils.js","cheetahGrid.es5/./list-grid/LG_EVENT_TYPE.js","cheetahGrid.es5/./list-grid/layout-map/index.js","cheetahGrid.es5/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid.es5/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid.es5/./list-grid/layout-map/internal/utils.js","cheetahGrid.es5/./main.js","cheetahGrid.es5/./plugins/icons.js","cheetahGrid.es5/./plugins/themes.js","cheetahGrid.es5/./register.js","cheetahGrid.es5/./themes.js","cheetahGrid.es5/./themes/BASIC.js","cheetahGrid.es5/./themes/MATERIAL_DESIGN.js","cheetahGrid.es5/./themes/theme.js","cheetahGrid.es5/./tools.js","cheetahGrid.es5/./tools/canvashelper.js","cheetahGrid.es5/./tooltip/BaseTooltip.js","cheetahGrid.es5/./tooltip/Tooltip.js","cheetahGrid.es5/./tooltip/TooltipHandler.js","cheetahGrid.es5/./tooltip/internal/TooltipElement.js"],"names":["window","webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","___CSS_LOADER_EXPORT___","push","useSourceMap","list","toString","map","item","content","cssWithMappingToString","concat","join","mediaQuery","dedupe","alreadyImportedModules","length","id","_i","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","isOldIE","memo","memorize","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","index","obj","css","media","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","removeStyleElement","parentNode","removeChild","replaceText","textStore","replace","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","updateStyle","newObj","lastIdentifiers","newList","newLastIdentifiers","_identifier","_index","splice","g","Function","api","default","locals","__createBinding","k","k2","undefined","desc","getOwnPropertyDescriptor","writable","configurable","__setModuleDefault","v","__importStar","mod","GridCanvasHelper","calc","require","canvashelper","fonts","inlineUtils","themes","canvases_1","utils_1","InlineDrawer_1","Rect_1","color_1","toBoxArray","INLINE_ELLIPSIS","of","TEXT_OFFSET","CHECKBOX_OFFSET","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getFont","font","getThemeColor","names","gridThemeColor","getChainSafe","theme","defaultThemeColor","args","testFontLoad","check","load","drawInlines","ctx","inlines","rect","offset","offsetTop","offsetBottom","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","restore","onReady","inlineWidths","width","reduce","a","b","inlineWidth","buildInlines","icons","inlineToString","string","getOverflowInline","textOverflow","isAllowOverflow","trim","getOverflowInlinesIndex","maxWidth","lineWidth","remWidth","isOverflowInlines","breakWidthInlines","indexData","beforeInlines","overflow","afterInlines","slice","canBreak","breakWord","before","after","breakAll","splitIndex","truncateInlines","option","overflowInline","ellipsisWidth","_inlineRect","drawRect","textAlign","textBaseline","trailingIcon","trailingIconInline","iconOf","inlineDrawRect","trailingIconWidth","Rect","left","top","height","truncInlines","setCellOverflowText","sumWidth","baseRect","trailingIconRect","copy","right","_multiInlineRect","multiInlines","lineHeight","autoWrapText","lineClamp","rectHeight","Math","max","floor","buildedMultiInlines","procLineClamp","hasNext","Number","procLine","lineRow","buildedInline","paddingTop","paddingBottom","em","getFontSize","pad","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","start","end","diff","ceil","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","positionOpt","boxWidth","measureCheckbox","pos","calcStartPosition","x","y","drawRadioButton","checkColor","radioButton","uncheckBorderColor","checkBorderColor","measureRadioButton","bgColor","ThemeResolver","constructor","_checkbox","_radioButton","_button","_header","_messages","_indicators","_grid","getCheckboxProp","prop","getRadioButtonProp","getButtonProp","sortArrowColor","infoBgColor","getMessageProp","errorBgColor","warnBgColor","markHeight","topLeftColor","getIndicatorsProp","topLeftSize","topRightColor","topRightSize","bottomRightColor","bottomRightSize","bottomLeftColor","bottomLeftSize","strokeRect","Array","isArray","strokeStyle","borderColors","strokeColorsRect","_theme","createCalculator","calcWidth","toPx","full","getRect","getContext","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","getDrawRect","beginPath","clip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","frozenRowsColor","paddingNums","multilineText","multilines","fillText","fillCell","fillColor","defaultBgColor","fill","fillCellWithState","getFillColorState","fillRect","fillRectWithState","sel","getSelection","cellEquals","select","cellInRange","range","selectionBgColor","highlightBgColor","frozenRowsBgColor","border","startOffset","borderWithState","highlightBorderColor","frozenRowsBorderColor","selection","moveTo","lineTo","bottom","stroke","buildCheckBoxInline","self","InlineDrawer","button","caption","shadow","drawButton","radius","_a","ListGrid","data_1","layout_map_1","MessageHandler_1","style_1","DrawGrid_1","GridCanvasHelper_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","symbolManager_1","paste_utils_1","_","getProtectedSymbol","_getCellRange","layoutMap","getCellRange","_updateRect","setRectFilter","startCol","startRow","endCol","endRow","getColWidth","getRowHeight","bounds","_getCellValue","headerRowCount","getHeader","getBody","field","_getField","_setCellValue","_getRecordIndexByRow","dataSource","setField","_getCellMessage","message","promises","msg","isPromise","hasMessage","Promise","resolve","reject","then","_getCellIcon0","icon","isObject","retIcon","iconOpt","iconPropKeys","f","_hasField","_getCellIcon","headerIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","frozenColCount","frozenRowCount","_borderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","selRecordIndex","getRecordIndexByRow","selId","getCellId","isSelectCell","flagBorder","borderColorCell","records","_refreshHeader","protectedSpace","headerEvents","unlisten","layout","MultiLayoutMap","SimpleHeaderLayoutMap","header","headerObjects","cell","ids","headerType","bindGridEvent","BaseStyle","listen","EVENT_TYPE","CHANGE_STYLE","invalidate","action","columnObjects","columnType","columnWidths","column","minWidth","setColWidth","setMinColWidth","setMaxColWidth","headerRowHeight","setRowHeight","colCount","_refreshRowCount","rowCount","bodyRowCount","_tryWithUpdateDataSource","fn","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","newDataSource","CachedDataSource","ofArray","addDisposable","_setDataSource","EMPTY","_onRangePaste","test","selectionRange","values","parsePasteRangeBoxValues","trimOnPaste","pasteRowCount","min","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","offsetCol","body","editable","getRecordStartRowByRecordIndex","startRowOffset","rejectedDetail","addRejectedDetail","record","pasteValue","timeout","processRejected","clearTimeout","setTimeout","fireListeners","LG_EVENT_TYPE","REJECTED_PASTE_VALUES","detail","duplicate","actionRow","valuesRow","offsetRow","valuesCol","getCellValue","oldValue","onPasteCellRangeBox","newEnd","invalidateCellRange","_onRangeDelete","deleteRowCount","deleteColCount","_record","_oldValue","onDeleteCellRangeBox","omit","disabled","readOnly","allowRangePaste","sortState","order","MessageHandler","tooltipHandler","TooltipHandler","updateSize","updateScroll","dispose","underlayBackgroundColor","oldState","oldField","getHeaderField","newState","newField","setHeaderValue","headerValues","Map","getColumnDefine","getColumnType","getColumnAction","hd","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","find","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","focusCell","invalidateGridRect","makeVisibleGridCell","makeVisibleCell","getGridCanvasHelper","getHeaderCellRange","getCopyCellValue","cellRange","headerData","columnData","onDrawCell","doGetCellValue","valueCallback","doChangeValue","changeValueCallback","BEFORE_CHANGE_VALUE","ret","CHANGED_VALUE","doSetPasteValue","getHeaderValue","newValue","set","CHANGED_HEADER_VALUE","getLayoutCellId","bindEventsInternal","SELECTED_CELL","PASTE_CELL","multi","event","cancel","normalizeValue","DELETE_CELL","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getOffsetInvalidateCells","getCopyRangeInternal","type","DrawGrid","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action","Editor","BaseAction","ACTIONS","Action_1","BaseAction_1","ButtonAction_1","CheckEditor_1","Editor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","_disabled","_readOnly","ImmutableRadioEditor","ImmutableInputEditor","CHECK","INPUT","RADIO","columnAction","toUpperCase","actionBind_1","action_utils_1","_action","clone","getState","cellId","state","isDisabledRecord","extend","bindCellClickAction","mouseOver","mouseActiveCell","mouseOut","bindCellKeyAction","onChangeDisabledInternal","BaseInputEditor","DG_EVENT_TYPE_1","KEY_ENTER","KEY_F2","open","isReadOnlyRecord","onOpenCellInternal","input","onInputCellInternal","isTarget","DG_EVENT_TYPE","INPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","keyCode","stopCellMoving","onChangeSelectCellInternal","selected","SCROLL","onGridScrollInternal","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","getCellRect","rangeRect","getCellRangeRect","parseFloat","toFixed","onSetInputAttrsInternal","isSupportMultilineValue","BUTTON_COLUMN_STATE_ID","getButtonColumnStateId","setReadonly","animate_1","CHECK_COLUMN_STATE_ID","getCheckColumnStateId","_state","block","elapsed","cellKey","toggleValue","onChange","animate","point","selrange","isRejectValue","onChangeReadOnlyInternal","BaseInputEditor_1","InlineInputElement_1","getInlineInputEditorStateId","globalElement","bindGridCount","attachInput","editor","InlineInputElement","element","attach","detachInput","gridFocus","detach","_classList","classList","_type","inputValue","_cell","_selected","setInputAttrs","InlineMenuElement_1","type_1","menu_items_1","getInlineMenuEditorStateId","attachMenu","InlineMenuElement","detachMenu","_options","normalizeToFn","CLICK_CELL","MOUSEOVER_CELL","getElement","cursor","MOUSEMOVE_CELL","MOUSEOUT_CELL","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","hasOptions","normalizePasteValueStr","captionOpt","array","opt","label","MenuColumn","utils_2","RADIO_COLUMN_STATE_ID","getRadioColumnStateId","_group","group","_checkAction","checkAction","toBoolean","targets","actionCell","recordStartRow","girdRecords","getAllRecordsFromGrid","showData","recordRowCount","targetRow","flag","SmallDialogInputElement_1","getSmallDialogInputEditorStateId","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","getBooleanOptionOfRecord","val","exec","KEY_SPACE","acceptKeys","indexOf","keyboardOptions","moveCellOnEnter","EventHandler_1","dom_1","input_value_handler_1","KEY_TAB","CLASSNAME","createInputElement","add","_handler","EventHandler","_input","_bindInputEvents","_beforePropEditor","parentElement","getAttachCellsArea","setInputValue","_activeData","focus","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_attaching","_isActive","stopPropagationOnly","stopPropagation","contains","getKeyCode","_onKeydownEnter","_onKeydownTab","onKeyDownMove","moveCellOnTab","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","el","createMenuElement","attachElement","menu","optionToLi","html","tabIndex","dataset","valueindex","span","appendHtml","openMenu","empty","emptyItemEl","valueItemEl","focusEl","children","focusIndex","allHeight","offsetHeight","transformOrigin","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_col","_row","disableFocus","_menu","_bindMenuEvents","bodyClickListenerId","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","capture","_doChangeValue","findPrevSiblingFocusable","findNextSiblingFocusable","shiftKey","isFocusable","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","browser","IE","_beforeValue","_validate","res","onKeyupAndPress","_onInputValueChange","inputOnly","sign","once","getDrawIndicator","triangle_1","indicatorStyle","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","indicators","themeSize","drawPath","size","baseLeft","baseTop","baseRight","baseBottom","kind","process","closePath","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","messageElement","moveMessageElement","move","_detach","drawCellMessage","drawCellMessageInternal","ErrorMessage","messageUtils","BaseMessage_1","ErrorMessageElement_1","RED_A100","ErrorMessageElement","_message","_info","hasFocusGrid","drawExclamationMarkBox","messages","InfoMessage","MessageElement_1","GREY_L2","MessageElement","drawInformationMarkBox","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","error","warning","WarningMessage","normalizeMessage","original","toLowerCase","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","_attach","_move","onSelectMessage","setMessageData","newSel","FOCUS_GRID","BLUR_GRID","WarningMessageElement_1","DEEP_ORANGE_A100","WarningMessageElement","MESSAGE_CLASSNAME","_rootElement","createMessageDomElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","boxRect","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","Style","BaseStyle_1","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","Style_1","columnStyle","StyleClassDef","DEFAULT","EventTarget_1","STYLE_EVENT_TYPE","defaultStyle","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","doChangeStyle","EventTarget","indicator","BranchGraphStyle","DEFAULT_BRANCH_COLORS","_name","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","defaults","buttonBgColor","_buttonBgColor","StdBaseStyle_1","_uncheckBgColor","_checkBgColor","_borderColor","StdBaseStyle","_imageSizing","imageSizing","appearance","_appearance","_lineHeight","_autoWrapText","_lineClamp","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_checkColor","_uncheckBorderColor","_checkBorderColor","_textAlign","_textBaseline","_color","_font","_padding","_textOverflow","MultilineTextColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","Column","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","BaseColumn","styleContents","handlers_1","COLUMN_FADEIN_STATE_ID","getColumnFadeinStateId","isFadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","configure","getFadeinState","cells","_generateFadeinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","fadeinMgr","activeFadeins","margeAnimate","_fadeinWhenCallbackInPromise","promise","Date","now","currentContext","toCurrentContext","time","actStyle","StyleClass","convertInternal","drawMessageInternal","drawIndicatorsInternal","_cellId","BaseColumn_1","BranchGraphStyle_1","getBranchGraphColumnStateId","getAllColumnData","callback","allData","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","j","tl","branch","from","to","branches","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","merge","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","textWidth","measureText","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","clearCache","has","_value","upLineIndexKey","downLineIndexKey","line","pointIndex","sort","arc","PI","utils","_caption","withCaption","textValue","String","active","loadIcons","blur","offsetY","repeatArray","Infinity","_tagName","tagName","_className","className","_content","_iconWidth","iconWidth","isNaN","imgs_1","MAX_LRU_CACHE_SIZE","getImage","url","getCacheOrLoad","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","normalize","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","path","console","warn","split","defaultFotmat","_format","format","withFormat","Intl","NumberFormat","fmt","MARGIN","_min","_max","_formatter","formatter","str","endsWith","rate","barMaxWidth","barTop","barLeft","barSize","argIcon","iconList","toNormalizeArray","MOUSEDOWN_CELL","MOUSEUP_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","RESIZE_COLUMN","hiDPI","NumberMap_1","Scrollable_1","isTouchEvent","getMouseButtons","cancelEvent","createRootElement","KEY_BS","KEY_END","KEY_HOME","KEY_LEFT","KEY_RIGHT","KEY_DEL","KEY_ALPHA_A","KEY_ALPHA_C","KEY_ALPHA_V","_vibrate","navigator","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candidateRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_getCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","cellDrawing","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","put","_storeAutoColWidthExprs","defaultColPxWidth","each","adj","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","setFocusCursor","abs","redrawRect","_onKeyDownMove","ctrlKey","metaKey","hMove","vMove","newCell","_moveFocusCell","selectAllOnCtrlA","vDir","hDir","shiftKeyFlg","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_updatedSelection","focusControl","selCol","selRow","results","editMode","findIndex","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","buttons","resizeCol","_getResizeColAt","columnResizer","cellSelector","hasListeners","doubleTapBefore","longTouchId","useTouch","useTouchStart","timeoutId","useTouchEnd","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","leaveCell","moving","lastMoving","onKeyDown","onScroll","copyRange","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","normalizedValue","normalizePasteValue","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","onBlur","abstractX","abstractY","inPoint","cellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","mousemove","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","afterSize","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_isComposition","_compositionEnd","lastInputValue","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","Edge","isDescendantElement","dummyInput","pasteText","clipboardData","getData","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","removeNames","attr","_inputStatus","nodeName","removeName","inputStatus","Selection","_sel","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","_level","_list","drawing","_rectFilter","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","rectFilter","_getRectInternal","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","protectedKey","initDocument","Scrollable","transform","alpha","NumberMap","cellTextOverflows","cfg","config","scrollHeight","scrollWidth","setScrollSize","getMaxColWidth","maxwidth","getMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","oldEditMode","cellsRect","invalidateTarget","visibleTop","visibleLeft","_range","getCellOverflowText","overflowText","disposable","disposables","_absoluteY","_startRow","_endRow","nextId","listeners","listenerData","listener","addEventListener","removeEventListener","FilterDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","_setFieldCache","fCache","recCache","_rCache","_fCache","getOriginal","getOriginalField","rowCache","setOriginalField","fieldPromiseCallBackInternal","recordPromiseCallBackInternal","isFieldAssessor","UPDATE_LENGTH","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","fieldGet","fieldResult","ss","applyChainSafe","emptyFn","fieldSet","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","hasOriginalField","orderFn","sortPromise","rel","_field","DataSourceIterator","_dataSource","_curIndex","_data","next","_getIndexData","movePrev","nest","FilterData","dc","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","Inline","getWidth","breakWidth","itr","candidateIndex","chars","beforeWidth","charWidth","beforeContent","afterContent","_callback","fillTextRect","genChars","allWidth","candidate","genWords","Inline_1","_draw","_width","_arg","InlineIcon","_icon","letterSpacing","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_height","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","_loadImage","img","drawInlineImageRect","InlinePath2D","path2DManager","Path2D","getPath2D","_path","translate","InlineSvg","InlineImage_1","buildSvgDataUrl","svg","XMLSerializer","serializeToString","getSvgElement","parser","DOMParser","parseFromString","svgElem","elmWidth","getAttribute","elmHeight","numElmWidth","numElmHeight","InlineIcon_1","InlinePath2D_1","InlineSvg_1","drawRegisteredIcon","drawWidth","drawHeight","isIconConstructorOption","isInlineImageConstructorOption","isInlineSvgConstructorOption","registeredIcons","registeredIcon","il","getInternal","symbolManager","pasteUtils","ofCell","CheckHeaderAction","SortHeaderAction","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","SORT","headerAction","headerCell","sortMethod","CHECK_HEADER_STATE_ID","getCheckHeaderStateId","checked","_sort","_executeSort","hasTrueField","fieldRow","inMouse","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdTextBaseStyle_1","StdTextBaseStyle","StdMultilineTextBaseStyle_1","StdMultilineTextBaseStyle","_sortArrowColor","_multiline","multiline","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","inlineCheck","contents","arrowSize","icons_1","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","fire","hasListener","clear","LRUCache","cacheSize","_map","_cacheSize","idx","remKey","shift","indexFirst","arr","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","_right","_bottom","x0","x1","y0","y1","another","rect1","rect2","MAX_SCROLL","heightLimit","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","isNode","requestAnimationFrame","duration","easing","startedAt","easingFn","canceledFlg","createAnim","anim","TYPE_PAREN","TYPE_UNIT","TYPE_OPERATOR","TYPE_NUMBER","NODE_TYPE_UNIT","NODE_TYPE_BINARY_EXPRESSION","NODE_TYPE_NUMBER","TABULATION","CARRIAGE_RETURN","LINE_FEED","FORM_FEED","SPACE","PERCENT","FULL_STOP","DIGIT_0","DIGIT_9","LATIN_CAPITAL_A","LATIN_CAPITAL_Z","LATIN_SMALL_A","LATIN_SMALL_Z","isUpperLetter","cp","isLowerLetter","isLetter","isWhitespace","isDigit","isDot","isUnit","createError","tokenize","exp","tokens","len","charCodeAt","parseSign","parseNum","parseUnit","unit","PRECEDENCE","lex","buildBinaryExpNode","stack","op","nodeType","token","deep","closeIndex","beforeOp","parse","calcStr","calcNode","node","toPxInternal","ast","calcBasePosition","fontSizeCache","fontName","bk","paddingLeft","paddingRight","rgbMap","styleColorToRGB","dummy","position","defaultView","getComputedStyle","styleColor","colorToRGB0","hexToNum","hex","parseInt","createRGB","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","rgb","enableFocus","toNodeList","innerHTML","dom","arg","toNode","inner","disableBeforeTabIndex","previousSibling","nextSibling","loads","_testStr","fontFaceSet","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","getIconProps","ICON_PROP_KEYS","quote","quoted","part","doms","props","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","toSimpleArray","iconProps","workData","isIconKey","loadImage","LRUCache_1","allCache","Image","onload","onerror","getCacheOrLoad0","cacheName","Path2DShim","PathCommandsParser_1","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","roundRect","_y","_w","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands","mag","sqrt","pow","dot","u","clamp","angle","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","PathCommands_1","pathTokens","builder","argsProvider","_commands","buildPush","numArgs","ops","subsequentCommand","fst","log","FontRuler","computeStyle","display","el_","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","activeCallback","inactiveCallback","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","hasWebKitFallbackBug","callbacks","cb","runner","HAS_WEBKIT_FALLBACK_BUG","match","userAgent","parseValues","adjustCell","char","processQuotedCell","pathModule","upsideDown","ud","offsetX","xrate","yrate","path2d","sortArray","createArray","createArrayPromise","plist","setArrayField","compare","old","dummyPromise","catch","getScrollBarWidth","wrapper","wrapperStyle","pointerEvents","wrapperWidth","innerWidth","SCROLLBAR_SIZE","initDocumentInternal","initDocumentVar","global","random","cl","mem","getIgnoreCase","arrayFind","arrayFindIndex","predicate","analyzeUserAgent","Chrome","Firefox","Safari","ua","omits","defs","searchString","subjectString","isFinite","lastIndex","lastIndexOf","re","which","preventDefault","simple_header_layout_1","multi_layout_1","columns","normalizeLayout","seqId","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","_emptyDataCache","EmptyDataCache","hbLayouut","headerField","_body","colDef","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","prev","newEmptyColumnData","newEmptyHeaderData","headers","rows","register","getIcons","tools","core","_getInternal","ListGrid_1","get_internal_1","defaultTheme","setDefault","getChoices","themes_1","registers","__importDefault","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","Theme","builtin","defTheme","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","strokeRectLines","positions","preColor","pos1","pos2","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","leftWidth","rightWidth","leftLeftPos","leftTopPos","checkSize","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","BaseTooltip","detachTooltipElement","_tooltipElement","_getTooltipElement","createTooltipElementInternal","attachTooltipElement","tooltipElement","moveTooltipElement","Tooltip","BaseTooltip_1","TooltipElement_1","TooltipElement","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","getTooltipInstanceInfo","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","_isAttachCell","CONTENT_CLASSNAME","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","winWidth","maxWidthForRight"],"mappings":"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","file":"cheetahGrid.es5.js","sourcesContent":["(function(window){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css\":\n/*!**************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/InlineInputElement.css ***!\n  \\**************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css\":\n/*!*************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/InlineMenuElement.css ***!\n  \\*************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css\":\n/*!*******************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/SmallDialogInputElement.css ***!\n  \\*******************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css\":\n/*!****************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/ErrorMessageElement.css ***!\n  \\****************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css\":\n/*!***********************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/MessageElement.css ***!\n  \\***********************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css\":\n/*!******************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/WarningMessageElement.css ***!\n  \\******************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css\":\n/*!**********************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/internal/style.css ***!\n  \\**********************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css\":\n/*!***************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/tooltip/internal/TooltipElement.css ***!\n  \\***************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/runtime/api.js\":\n/*!******************************************************!*\\\n  !*** ../node_modules/css-loader/dist/runtime/api.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}\n\n/***/ }),\n\n/***/ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\":\n/*!*****************************************************************************!*\\\n  !*** ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!\n  \\*****************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : undefined;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n/***/ }),\n\n/***/ \"../node_modules/webpack/buildin/global.js\":\n/*!*************************************************!*\\\n  !*** ../node_modules/webpack/buildin/global.js ***!\n  \\*************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/InlineInputElement.css\":\n/*!****************************************************************!*\\\n  !*** ../src/js/columns/action/internal/InlineInputElement.css ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./InlineInputElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/InlineMenuElement.css\":\n/*!***************************************************************!*\\\n  !*** ../src/js/columns/action/internal/InlineMenuElement.css ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./InlineMenuElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/SmallDialogInputElement.css\":\n/*!*********************************************************************!*\\\n  !*** ../src/js/columns/action/internal/SmallDialogInputElement.css ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./SmallDialogInputElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/ErrorMessageElement.css\":\n/*!******************************************************************!*\\\n  !*** ../src/js/columns/message/internal/ErrorMessageElement.css ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./ErrorMessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/MessageElement.css\":\n/*!*************************************************************!*\\\n  !*** ../src/js/columns/message/internal/MessageElement.css ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./MessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/WarningMessageElement.css\":\n/*!********************************************************************!*\\\n  !*** ../src/js/columns/message/internal/WarningMessageElement.css ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./WarningMessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/internal/style.css\":\n/*!************************************!*\\\n  !*** ../src/js/internal/style.css ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src??ref--5-2!./style.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/tooltip/internal/TooltipElement.css\":\n/*!*****************************************************!*\\\n  !*** ../src/js/tooltip/internal/TooltipElement.css ***!\n  \\*****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src??ref--5-2!./TooltipElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"./GridCanvasHelper.js\":\n/*!*****************************!*\\\n  !*** ./GridCanvasHelper.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GridCanvasHelper = void 0;\n\nconst calc = __importStar(__webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"));\n\nconst canvashelper = __importStar(__webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\"));\n\nconst fonts = __importStar(__webpack_require__(/*! ./internal/fonts */ \"./internal/fonts.js\"));\n\nconst inlineUtils = __importStar(__webpack_require__(/*! ./element/inlines */ \"./element/inlines.js\"));\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nconst canvases_1 = __webpack_require__(/*! ./internal/canvases */ \"./internal/canvases.js\");\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst InlineDrawer_1 = __webpack_require__(/*! ./element/InlineDrawer */ \"./element/InlineDrawer.js\");\n\nconst Rect_1 = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\nconst color_1 = __webpack_require__(/*! ./internal/color */ \"./internal/color.js\");\n\nconst {\n  toBoxArray\n} = utils_1.style;\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\nconst TEXT_OFFSET = 2;\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\n\nfunction invalidateCell(context, grid) {\n  const {\n    col,\n    row\n  } = context;\n  grid.invalidateCell(col, row);\n}\n\nfunction getColor(color, col, row, grid, context) {\n  return (0, utils_1.getOrApply)(color, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getFont(font, col, row, grid, context) {\n  if (font == null) {\n    return undefined;\n  }\n\n  return (0, utils_1.getOrApply)(font, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getThemeColor(grid, ...names) {\n  const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\n\n  if (gridThemeColor == null) {\n    // use default theme\n    return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\n  }\n\n  if (typeof gridThemeColor !== \"function\") {\n    return gridThemeColor;\n  }\n\n  let defaultThemeColor; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  return args => {\n    const color = gridThemeColor(args);\n\n    if (color != null) {\n      // use grid theme\n      return color;\n    } // use default theme\n\n\n    defaultThemeColor = defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\n    return (0, utils_1.getOrApply)(defaultThemeColor, args); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  };\n}\n\nfunction testFontLoad(font, value, context, grid) {\n  if (font) {\n    if (!fonts.check(font, value)) {\n      fonts.load(font, value, () => invalidateCell(context, grid));\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\n  function drawInline(inline, offsetLeft, offsetRight) {\n    if (inline.canDraw()) {\n      ctx.save();\n\n      try {\n        ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n        ctx.font = inline.font() || ctx.font;\n        inline.draw({\n          ctx,\n          canvashelper,\n          rect,\n          offset,\n          offsetLeft,\n          offsetRight,\n          offsetTop,\n          offsetBottom\n        });\n      } finally {\n        ctx.restore();\n      }\n    } else {\n      inline.onReady(() => grid.invalidateCell(col, row)); //noop\n    }\n  }\n\n  if (inlines.length === 1) {\n    //1\n    const inline = inlines[0];\n    drawInline(inline, 0, 0);\n  } else {\n    const inlineWidths = inlines.map(inline => (inline.width({\n      ctx\n    }) || 0) - 0);\n    let offsetRight = inlineWidths.reduce((a, b) => a + b);\n    let offsetLeft = 0;\n    inlines.forEach((inline, index) => {\n      const inlineWidth = inlineWidths[index];\n      offsetRight -= inlineWidth;\n      drawInline(inline, offsetLeft, offsetRight);\n      offsetLeft += inlineWidth;\n    });\n  }\n}\n\nfunction buildInlines(icons, inline) {\n  return inlineUtils.buildInlines(icons, inline || \"\");\n}\n\nfunction inlineToString(inline) {\n  return inlineUtils.string(inline);\n}\n\nfunction getOverflowInline(textOverflow) {\n  if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\n    return INLINE_ELLIPSIS;\n  }\n\n  textOverflow = textOverflow.trim();\n\n  if (textOverflow.length === 1) {\n    return inlineUtils.of(textOverflow[0]);\n  }\n\n  return INLINE_ELLIPSIS;\n}\n\nfunction isAllowOverflow(textOverflow) {\n  return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\n}\n\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\n  const maxWidth = width - 3;\n  /*buffer*/\n\n  let lineWidth = 0;\n\n  for (let i = 0; i < inlines.length; i++) {\n    const inline = inlines[i];\n    const inlineWidth = (inline.width({\n      ctx\n    }) || 0) - 0;\n\n    if (lineWidth + inlineWidth > maxWidth) {\n      return {\n        index: i,\n        lineWidth,\n        remWidth: maxWidth - lineWidth\n      };\n    }\n\n    lineWidth += inlineWidth;\n  }\n\n  return null;\n}\n\nfunction isOverflowInlines(ctx, inlines, width) {\n  return !!getOverflowInlinesIndex(ctx, inlines, width);\n}\n\nfunction breakWidthInlines(ctx, inlines, width) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      beforeInlines: inlines,\n      overflow: false,\n      afterInlines: []\n    };\n  }\n\n  const {\n    index,\n    remWidth\n  } = indexData;\n  const inline = inlines[index];\n  const beforeInlines = inlines.slice(0, index);\n  const afterInlines = [];\n\n  if (inline.canBreak()) {\n    let {\n      before,\n      after\n    } = inline.breakWord(ctx, remWidth);\n\n    if (!before && !beforeInlines.length) {\n      ({\n        before,\n        after\n      } = inline.breakAll(ctx, remWidth));\n    }\n\n    if (!before && !beforeInlines.length) {\n      // Always return one char\n      ({\n        before,\n        after\n      } = inline.splitIndex(1));\n    }\n\n    if (before) {\n      beforeInlines.push(before);\n    }\n\n    if (after) {\n      afterInlines.push(after);\n    }\n\n    afterInlines.push(...inlines.slice(index + 1));\n  } else {\n    if (!beforeInlines.length) {\n      // Always return one char\n      beforeInlines.push(inline);\n    }\n\n    afterInlines.push(...inlines.slice(beforeInlines.length));\n  }\n\n  return {\n    beforeInlines,\n    overflow: true,\n    afterInlines\n  };\n}\n\nfunction truncateInlines(ctx, inlines, width, option) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      inlines,\n      overflow: false\n    };\n  }\n\n  const {\n    index,\n    lineWidth\n  } = indexData;\n  const inline = inlines[index];\n  const overflowInline = getOverflowInline(option);\n  const ellipsisWidth = overflowInline.width({\n    ctx\n  });\n  const remWidth = width - lineWidth - ellipsisWidth;\n  const result = inlines.slice(0, index);\n\n  if (inline.canBreak()) {\n    const {\n      before\n    } = inline.breakAll(ctx, remWidth);\n\n    if (before) {\n      result.push(before);\n    }\n  }\n\n  result.push(overflowInline);\n  return {\n    inlines: result,\n    overflow: true\n  };\n}\n\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  textOverflow,\n  icons,\n  trailingIcon\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n  let inlines = buildInlines(icons, inline);\n  const trailingIconInline = trailingIcon ? inlineUtils.iconOf(trailingIcon) : null;\n  let inlineDrawRect = drawRect;\n  let {\n    width\n  } = drawRect;\n  let trailingIconWidth = 0;\n\n  if (trailingIconInline) {\n    trailingIconWidth = trailingIconInline.width({\n      ctx\n    });\n    width -= trailingIconWidth;\n    inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\n  }\n\n  if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\n    const {\n      inlines: truncInlines,\n      overflow\n    } = truncateInlines(ctx, inlines, width, textOverflow);\n    inlines = truncInlines;\n    grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\n  } else {\n    grid.setCellOverflowText(col, row, false);\n  }\n\n  drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\n\n  if (trailingIconInline) {\n    // Draw trailing icon\n    let sumWidth = 0;\n    inlines.forEach(inline => {\n      sumWidth += inline.width({\n        ctx\n      });\n    });\n    const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n    const trailingIconRect = baseRect.copy();\n\n    if (width < sumWidth) {\n      trailingIconRect.left = trailingIconRect.right - trailingIconWidth - offset;\n    } else {\n      trailingIconRect.left += sumWidth;\n    }\n\n    trailingIconRect.right = baseRect.right;\n    drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\n  }\n} // eslint-disable-next-line complexity\n\n\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  lineHeight,\n  autoWrapText,\n  lineClamp,\n  textOverflow,\n  icons,\n  trailingIcon\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n\n  if (lineClamp === \"auto\") {\n    const rectHeight = drawRect.height - offset * 2 - 2;\n    /*offset added by Inline#draw*/\n\n    lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\n  }\n\n  const trailingIconInline = trailingIcon ? inlineUtils.iconOf(trailingIcon) : null;\n  let {\n    width\n  } = drawRect;\n  let trailingIconWidth = 0;\n\n  if (trailingIconInline) {\n    trailingIconWidth = trailingIconInline.width({\n      ctx\n    });\n    width -= trailingIconWidth;\n  }\n\n  let buildedMultiInlines;\n\n  if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\n    buildedMultiInlines = [];\n    const procLineClamp = lineClamp > 0 ? (inlines, hasNext) => {\n      if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\n        if (inlines.length === 0 && hasNext) {\n          buildedMultiInlines.push([getOverflowInline(textOverflow)]);\n          grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n        } else {\n          const {\n            inlines: truncInlines,\n            overflow\n          } = truncateInlines(ctx, inlines, width, textOverflow);\n          buildedMultiInlines.push(hasNext && !overflow ? truncInlines.concat([getOverflowInline(textOverflow)]) : truncInlines);\n\n          if (overflow || hasNext) {\n            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n          }\n        }\n\n        return false;\n      }\n\n      return true;\n    } : () => true;\n    const procLine = autoWrapText ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      while (inlines.length) {\n        if (!procLineClamp(inlines, hasNext)) {\n          return false;\n        }\n\n        const {\n          beforeInlines,\n          afterInlines\n        } = breakWidthInlines(ctx, inlines, width);\n        buildedMultiInlines.push(beforeInlines);\n        inlines = afterInlines;\n      }\n\n      return true;\n    } : isAllowOverflow(textOverflow) ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      const {\n        inlines: truncInlines,\n        overflow\n      } = truncateInlines(ctx, inlines, width, textOverflow);\n      buildedMultiInlines.push(truncInlines);\n\n      if (overflow) {\n        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n      }\n\n      return true;\n    } : (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      buildedMultiInlines.push(inlines);\n      return true;\n    };\n    grid.setCellOverflowText(col, row, false);\n\n    for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\n      const inline = multiInlines[lineRow];\n      const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\n\n      if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\n        break;\n      }\n    }\n  } else {\n    grid.setCellOverflowText(col, row, false);\n    buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\n  }\n\n  let paddingTop = 0;\n  let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\n\n  if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\n    const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop += pad;\n    paddingBottom -= pad;\n  } else if (ctx.textBaseline === \"bottom\" || ctx.textBaseline === \"alphabetic\" || ctx.textBaseline === \"ideographic\") {\n    const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop -= pad;\n    paddingBottom += pad;\n  }\n\n  buildedMultiInlines.forEach(buildedInline => {\n    drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\n    paddingTop += lineHeight;\n    paddingBottom -= lineHeight;\n  });\n\n  if (trailingIconInline) {\n    // Draw trailing icon\n    let maxWidth = 0;\n    buildedMultiInlines.forEach(buildedInline => {\n      let sumWidth = 0;\n      buildedInline.forEach(inline => {\n        sumWidth += inline.width({\n          ctx\n        });\n      });\n      maxWidth = Math.max(maxWidth, sumWidth);\n    });\n    const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n    const trailingIconRect = baseRect.copy();\n\n    if (width < maxWidth) {\n      trailingIconRect.left = trailingIconRect.right - trailingIconWidth - offset;\n    } else {\n      trailingIconRect.left += maxWidth;\n    }\n\n    trailingIconRect.right = baseRect.right;\n    drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\n  }\n}\n\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\n  const startColorRGB = (0, color_1.colorToRGB)(startColor);\n  const endColorRGB = (0, color_1.colorToRGB)(endColor);\n\n  const getRGB = colorName => {\n    const start = startColorRGB[colorName];\n    const end = endColorRGB[colorName];\n\n    if (elapsedTime >= 1) {\n      return end;\n    }\n\n    if (elapsedTime <= 0) {\n      return start;\n    }\n\n    const diff = start - end;\n    return Math.ceil(start - diff * elapsedTime);\n  };\n\n  return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\n}\n\nfunction drawCheckbox(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  uncheckBgColor = helper.theme.checkbox.uncheckBgColor,\n  checkBgColor = helper.theme.checkbox.checkBgColor,\n  borderColor = helper.theme.checkbox.borderColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureCheckbox(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  borderColor = helper.getColor(borderColor, col, row, ctx);\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    uncheckBgColor = check ? uncheckBgColor : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n    checkBgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : checkBgColor;\n  }\n\n  canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n    uncheckBgColor,\n    checkBgColor,\n    borderColor\n  });\n}\n\nfunction drawRadioButton(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  checkColor = helper.theme.radioButton.checkColor,\n  uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor,\n  checkBorderColor = helper.theme.radioButton.checkBorderColor,\n  uncheckBgColor = helper.theme.radioButton.uncheckBgColor,\n  checkBgColor = helper.theme.radioButton.checkBgColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureRadioButton(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  checkColor = helper.getColor(checkColor, col, row, ctx);\n  uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\n  checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  let borderColor = check ? checkBorderColor : uncheckBorderColor;\n  let bgColor = check ? checkBgColor : uncheckBgColor;\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    borderColor = check ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime) : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\n    bgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n  }\n\n  canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\n    checkColor,\n    borderColor,\n    bgColor\n  });\n}\n\nclass ThemeResolver {\n  constructor(grid) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this._messages = null;\n    this._indicators = null;\n    this._grid = grid;\n  }\n\n  getThemeColor(...name) {\n    return getThemeColor(this._grid, ...name);\n  }\n\n  get font() {\n    return getThemeColor(this._grid, \"font\");\n  }\n\n  get underlayBackgroundColor() {\n    return getThemeColor(this._grid, \"underlayBackgroundColor\");\n  } // color\n\n\n  get color() {\n    return getThemeColor(this._grid, \"color\");\n  }\n\n  get frozenRowsColor() {\n    return getThemeColor(this._grid, \"frozenRowsColor\");\n  } // background\n\n\n  get defaultBgColor() {\n    return getThemeColor(this._grid, \"defaultBgColor\");\n  }\n\n  get frozenRowsBgColor() {\n    return getThemeColor(this._grid, \"frozenRowsBgColor\");\n  }\n\n  get selectionBgColor() {\n    return getThemeColor(this._grid, \"selectionBgColor\");\n  }\n\n  get highlightBgColor() {\n    return getThemeColor(this._grid, \"highlightBgColor\");\n  } // border\n\n\n  get borderColor() {\n    return getThemeColor(this._grid, \"borderColor\");\n  }\n\n  get frozenRowsBorderColor() {\n    return getThemeColor(this._grid, \"frozenRowsBorderColor\");\n  }\n\n  get highlightBorderColor() {\n    return getThemeColor(this._grid, \"highlightBorderColor\");\n  }\n\n  get checkbox() {\n    const grid = this._grid;\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getCheckboxProp(\"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getCheckboxProp(\"checkBgColor\");\n      },\n\n      get borderColor() {\n        return getCheckboxProp(\"borderColor\");\n      }\n\n    });\n\n    function getCheckboxProp(prop) {\n      return getThemeColor(grid, \"checkbox\", prop);\n    }\n  }\n\n  get radioButton() {\n    const grid = this._grid;\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getRadioButtonProp(\"checkColor\");\n      },\n\n      get uncheckBorderColor() {\n        return getRadioButtonProp(\"uncheckBorderColor\");\n      },\n\n      get checkBorderColor() {\n        return getRadioButtonProp(\"checkBorderColor\");\n      },\n\n      get uncheckBgColor() {\n        return getRadioButtonProp(\"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getRadioButtonProp(\"checkBgColor\");\n      }\n\n    });\n\n    function getRadioButtonProp(prop) {\n      return getThemeColor(grid, \"radioButton\", prop);\n    }\n  }\n\n  get button() {\n    const grid = this._grid;\n    return this._button || (this._button = {\n      get color() {\n        return getButtonProp(\"color\");\n      },\n\n      get bgColor() {\n        return getButtonProp(\"bgColor\");\n      }\n\n    });\n\n    function getButtonProp(prop) {\n      return getThemeColor(grid, \"button\", prop);\n    }\n  }\n\n  get header() {\n    const grid = this._grid;\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getThemeColor(grid, \"header\", \"sortArrowColor\");\n      }\n\n    });\n  }\n\n  get messages() {\n    const grid = this._grid;\n    return this._messages || (this._messages = {\n      get infoBgColor() {\n        return getMessageProp(\"infoBgColor\");\n      },\n\n      get errorBgColor() {\n        return getMessageProp(\"errorBgColor\");\n      },\n\n      get warnBgColor() {\n        return getMessageProp(\"warnBgColor\");\n      },\n\n      get boxWidth() {\n        return getMessageProp(\"boxWidth\");\n      },\n\n      get markHeight() {\n        return getMessageProp(\"markHeight\");\n      }\n\n    });\n\n    function getMessageProp(prop) {\n      return getThemeColor(grid, \"messages\", prop);\n    }\n  }\n\n  get indicators() {\n    const grid = this._grid;\n    return this._indicators || (this._indicators = {\n      get topLeftColor() {\n        return getIndicatorsProp(\"topLeftColor\");\n      },\n\n      get topLeftSize() {\n        return getIndicatorsProp(\"topLeftSize\");\n      },\n\n      get topRightColor() {\n        return getIndicatorsProp(\"topRightColor\");\n      },\n\n      get topRightSize() {\n        return getIndicatorsProp(\"topRightSize\");\n      },\n\n      get bottomRightColor() {\n        return getIndicatorsProp(\"bottomRightColor\");\n      },\n\n      get bottomRightSize() {\n        return getIndicatorsProp(\"bottomRightSize\");\n      },\n\n      get bottomLeftColor() {\n        return getIndicatorsProp(\"bottomLeftColor\");\n      },\n\n      get bottomLeftSize() {\n        return getIndicatorsProp(\"bottomLeftSize\");\n      }\n\n    });\n\n    function getIndicatorsProp(prop) {\n      return getThemeColor(grid, \"indicators\", prop);\n    }\n  }\n\n}\n\nfunction strokeRect(ctx, color, left, top, width, height) {\n  if (!Array.isArray(color)) {\n    if (color) {\n      ctx.strokeStyle = color;\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    const borderColors = toBoxArray(color);\n    canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n  }\n}\n\nclass GridCanvasHelper {\n  constructor(grid) {\n    this._grid = grid;\n    this._theme = new ThemeResolver(grid);\n  }\n\n  createCalculator(context, font) {\n    return {\n      calcWidth(width) {\n        return calc.toPx(width, {\n          get full() {\n            const rect = context.getRect();\n            return rect.width;\n          },\n\n          get em() {\n            return (0, canvases_1.getFontSize)(context.getContext(), font).width;\n          }\n\n        });\n      },\n\n      calcHeight(height) {\n        return calc.toPx(height, {\n          get full() {\n            const rect = context.getRect();\n            return rect.height;\n          },\n\n          get em() {\n            return (0, canvases_1.getFontSize)(context.getContext(), font).height;\n          }\n\n        });\n      }\n\n    };\n  }\n\n  getColor(color, col, row, ctx) {\n    return getColor(color, col, row, this._grid, ctx);\n  }\n\n  toBoxArray(obj) {\n    return toBoxArray(obj);\n  }\n\n  toBoxPixelArray(value, context, font) {\n    if (typeof value === \"string\" || Array.isArray(value)) {\n      const calculator = this.createCalculator(context, font);\n      const box = toBoxArray(value);\n      return [calculator.calcHeight(box[0]), calculator.calcWidth(box[1]), calculator.calcHeight(box[2]), calculator.calcWidth(box[3])];\n    }\n\n    return toBoxArray(value);\n  }\n\n  get theme() {\n    return this._theme;\n  }\n\n  drawWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height); //clip\n\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  drawBorderWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const rect = context.getRect();\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      //clip\n      ctx.beginPath();\n      let clipLeft = drawRect.left;\n      let clipWidth = drawRect.width;\n\n      if (drawRect.left === rect.left) {\n        clipLeft += -1;\n        clipWidth += 1;\n      }\n\n      let clipTop = drawRect.top;\n      let clipHeight = drawRect.height;\n\n      if (drawRect.top === rect.top) {\n        clipTop += -1;\n        clipHeight += 1;\n      }\n\n      ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  text(text, context, {\n    padding,\n    offset = TEXT_OFFSET,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    textOverflow = \"clip\",\n    icons,\n    trailingIcon\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      _inlineRect(this._grid, ctx, text, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons,\n        trailingIcon\n      });\n    });\n  }\n\n  multilineText(multilines, context, {\n    padding,\n    offset = TEXT_OFFSET,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    lineHeight = \"1em\",\n    autoWrapText = false,\n    lineClamp = 0,\n    textOverflow = \"clip\",\n    icons,\n    trailingIcon\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      const calculator = this.createCalculator(context, font);\n      lineHeight = calculator.calcHeight(lineHeight);\n\n      _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons,\n        trailingIcon\n      });\n    });\n  }\n\n  fillText(text, x, y, context, {\n    color,\n    textAlign = \"left\",\n    textBaseline = \"top\",\n    font\n  } = {}) {\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\n      ctx.textAlign = textAlign;\n      ctx.textBaseline = textBaseline;\n      ctx.font = font || ctx.font;\n      ctx.fillText(text, x, y);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillCell(context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    });\n  }\n\n  fillCellWithState(context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillCell(context, option);\n  }\n\n  fillRect(rect, context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillRectWithState(rect, context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillRect(rect, context, option);\n  }\n\n  getFillColorState(context, option = {}) {\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\n      return this.theme.selectionBgColor;\n    }\n\n    if (option.fillColor) {\n      return option.fillColor;\n    }\n\n    if ((0, utils_1.cellEquals)(sel.select, context)) {\n      return this.theme.highlightBgColor;\n    }\n\n    const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      return this.theme.frozenRowsBgColor;\n    }\n\n    return this.theme.defaultBgColor;\n  }\n\n  border(context, {\n    borderColor = this.theme.borderColor,\n    lineWidth = 1\n  } = {}) {\n    const rect = context.getRect();\n    this.drawBorderWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      const borderColors = getColor(borderColor, col, row, this._grid, ctx);\n\n      if (lineWidth === 1) {\n        ctx.lineWidth = 1;\n        strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n      } else if (lineWidth === 2) {\n        ctx.lineWidth = 2;\n        strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n      } else {\n        ctx.lineWidth = lineWidth;\n        const startOffset = lineWidth / 2 - 1;\n        strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n      }\n    });\n  } // Unused in main\n\n\n  borderWithState(context, option = {}) {\n    const rect = context.getRect();\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context; //\n\n    if ((0, utils_1.cellEquals)(sel.select, context)) {\n      option.borderColor = this.theme.highlightBorderColor;\n      option.lineWidth = 2;\n      this.border(context, option);\n    } else {\n      // header color\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n        option.borderColor = this.theme.frozenRowsBorderColor;\n      }\n\n      option.lineWidth = 1;\n      this.border(context, option); //\n\n      const sel = this._grid.selection.select;\n\n      if (sel.col + 1 === col && sel.row === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        });\n      } else if (sel.col === col && sel.row + 1 === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        });\n      }\n    }\n  }\n\n  buildCheckBoxInline(check, context, option = {}) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    const ctx = context.getContext();\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\n    return new InlineDrawer_1.InlineDrawer({\n      draw,\n      width: boxWidth + 3,\n      height: boxWidth + 1,\n      color: undefined\n    });\n\n    function draw({\n      ctx,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    }) {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, rect, col, row, check, self, option, {\n        offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\n        padding: {\n          left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\n          right: offsetRight,\n          top: offsetTop,\n          bottom: offsetBottom\n        }\n      });\n    }\n  }\n\n  checkbox(check, context, {\n    animElapsedTime,\n    offset = CHECKBOX_OFFSET,\n    uncheckBgColor,\n    checkBgColor,\n    borderColor,\n    textAlign,\n    textBaseline\n  } = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, context.getRect(), col, row, check, this, {\n        animElapsedTime,\n        uncheckBgColor,\n        checkBgColor,\n        borderColor,\n        textAlign,\n        textBaseline\n      }, {\n        offset,\n        padding: {\n          left: CHECKBOX_OFFSET - TEXT_OFFSET\n        }\n      });\n    });\n  }\n\n  radioButton(check, context, {\n    animElapsedTime,\n    offset = CHECKBOX_OFFSET,\n    checkColor,\n    uncheckBorderColor,\n    checkBorderColor,\n    uncheckBgColor,\n    checkBgColor,\n    textAlign,\n    textBaseline\n  } = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawRadioButton(ctx, context.getRect(), col, row, check, this, {\n        animElapsedTime,\n        checkColor,\n        uncheckBorderColor,\n        checkBorderColor,\n        uncheckBgColor,\n        checkBgColor,\n        textAlign,\n        textBaseline\n      }, {\n        offset,\n        padding: {\n          left: CHECKBOX_OFFSET - TEXT_OFFSET\n        }\n      });\n    });\n  }\n\n  button(caption, context, {\n    bgColor = this.theme.button.bgColor,\n    padding,\n    offset = TEXT_OFFSET,\n    color = this.theme.button.color,\n    textAlign = \"center\",\n    textBaseline = \"middle\",\n    shadow,\n    font,\n    textOverflow = \"clip\",\n    icons\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      const {\n        col,\n        row\n      } = context;\n      const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\n      const left = rect.left + paddingNums[3];\n      const top = rect.top + paddingNums[0];\n      const width = rect.width - paddingNums[1] - paddingNums[3];\n      const height = rect.height - paddingNums[0] - paddingNums[2];\n      bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\n      canvashelper.drawButton(ctx, left, top, width, height, {\n        bgColor,\n        radius: rect.height / 8,\n        // offset,\n        shadow\n      });\n\n      _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n  testFontLoad(font, value, context) {\n    return testFontLoad(font, value, context, this._grid);\n  }\n\n}\n\nexports.GridCanvasHelper = GridCanvasHelper;\n\n/***/ }),\n\n/***/ \"./ListGrid.js\":\n/*!*********************!*\\\n  !*** ./ListGrid.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ListGrid = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ./internal/icons */ \"./internal/icons.js\"));\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nconst data_1 = __webpack_require__(/*! ./data */ \"./data.js\");\n\nconst layout_map_1 = __webpack_require__(/*! ./list-grid/layout-map */ \"./list-grid/layout-map/index.js\");\n\nconst MessageHandler_1 = __webpack_require__(/*! ./columns/message/MessageHandler */ \"./columns/message/MessageHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst style_1 = __webpack_require__(/*! ./columns/style */ \"./columns/style.js\");\n\nconst DrawGrid_1 = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\nconst GridCanvasHelper_1 = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\nconst style_2 = __webpack_require__(/*! ./header/style */ \"./header/style.js\");\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ./list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst Rect_1 = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\nconst TooltipHandler_1 = __webpack_require__(/*! ./tooltip/TooltipHandler */ \"./tooltip/TooltipHandler.js\"); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst paste_utils_1 = __webpack_require__(/*! ./internal/paste-utils */ \"./internal/paste-utils.js\");\n/** @private */\n\n\nconst _ = (0, symbolManager_1.getProtectedSymbol)(); //private methods\n\n/** @private */\n\n\nfunction _getCellRange(grid, col, row) {\n  return grid[_].layoutMap.getCellRange(col, row);\n}\n/** @private */\n\n\nfunction _updateRect(grid, col, row, context) {\n  context.setRectFilter(rect => {\n    let {\n      left,\n      right,\n      top,\n      bottom\n    } = rect;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = _getCellRange(grid, col, row);\n\n    for (let c = col - 1; c >= startCol; c--) {\n      left -= grid.getColWidth(c);\n    }\n\n    for (let c = col + 1; c <= endCol; c++) {\n      right += grid.getColWidth(c);\n    }\n\n    for (let r = row - 1; r >= startRow; r--) {\n      top -= grid.getRowHeight(r);\n    }\n\n    for (let r = row + 1; r <= endRow; r++) {\n      bottom += grid.getRowHeight(r);\n    }\n\n    return Rect_1.Rect.bounds(left, top, right, bottom);\n  });\n}\n/** @private */\n\n\nfunction _getCellValue(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    const {\n      caption\n    } = grid[_].layoutMap.getHeader(col, row);\n\n    return typeof caption === \"function\" ? caption() : caption;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    return _getField(grid, field, row);\n  }\n}\n/** @private */\n\n\nfunction _setCellValue(grid, col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    // nop\n    return false;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (field == null) {\n      return false;\n    }\n\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.setField(index, field, value);\n  }\n}\n/** @private */\n\n\nfunction _getCellMessage(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const {\n      message\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (!message) {\n      return null;\n    }\n\n    if (!Array.isArray(message)) {\n      return _getField(grid, message, row);\n    }\n\n    const promises = [];\n\n    for (let index = 0; index < message.length; index++) {\n      const msg = _getField(grid, message[index], row);\n\n      if ((0, utils_1.isPromise)(msg)) {\n        promises.push(msg);\n      } else if ((0, MessageHandler_1.hasMessage)(msg)) {\n        return msg;\n      }\n    }\n\n    if (!promises.length) {\n      return null;\n    }\n\n    return new Promise((resolve, reject) => {\n      promises.forEach(p => {\n        p.then(msg => {\n          if ((0, MessageHandler_1.hasMessage)(msg)) {\n            resolve(msg);\n          }\n        }, reject);\n      });\n    });\n  }\n}\n\nfunction _getCellIcon0(grid, icon, row) {\n  if (Array.isArray(icon)) {\n    return icon.map(i => _getCellIcon0(grid, i, row));\n  }\n\n  if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\n    return _getField(grid, icon, row);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  const retIcon = {}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  const iconOpt = icon;\n  icons.iconPropKeys.forEach(k => {\n    if (iconOpt[k]) {\n      const f = _getField(grid, iconOpt[k], row);\n\n      if (f != null) {\n        retIcon[k] = f;\n      } else {\n        if (!_hasField(grid, iconOpt[k], row)) {\n          retIcon[k] = iconOpt[k];\n        }\n      }\n    }\n  });\n  return retIcon;\n}\n/** @private */\n\n\nfunction _getCellIcon(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    const {\n      headerIcon\n    } = grid[_].layoutMap.getHeader(col, row);\n\n    if (headerIcon == null) {\n      return null;\n    }\n\n    return headerIcon;\n  } else {\n    const {\n      icon\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (icon == null) {\n      return null;\n    }\n\n    return _getCellIcon0(grid, icon, row);\n  }\n}\n/** @private */\n\n\nfunction _getField(grid, field, row) {\n  if (field == null) {\n    return null;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.getField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _hasField(grid, field, row) {\n  if (field == null) {\n    return false;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return false;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.hasField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _onDrawValue(grid, cellValue, context, {\n  col,\n  row\n}, style, draw) {\n  const helper = grid[_].gridCanvasHelper;\n\n  const drawCellBg = ({\n    bgColor\n  } = {}) => {\n    const fillOpt = {\n      fillColor: bgColor\n    }; //cell\n\n    helper.fillCellWithState(context, fillOpt);\n  };\n\n  const drawCellBorder = () => {\n    if (context.col === grid.frozenColCount - 1) {\n      //\n      const rect = context.getRect();\n      helper.drawWithClip(context, ctx => {\n        const borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor : helper.theme.frozenRowsBorderColor;\n        const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.right - 2.5, rect.top);\n          ctx.lineTo(rect.right - 2.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    }\n\n    _borderWithState(grid, helper, context);\n  };\n\n  const drawCellBase = ({\n    bgColor\n  } = {}) => {\n    drawCellBg({\n      bgColor\n    });\n    drawCellBorder();\n  };\n\n  const info = {\n    getRecord: () => grid.getRowRecord(row),\n    getIcon: () => _getCellIcon(grid, col, row),\n    getMessage: () => _getCellMessage(grid, col, row),\n    messageHandler: grid[_].messageHandler,\n    style,\n    drawCellBase,\n    drawCellBg,\n    drawCellBorder\n  };\n  return draw(cellValue, info, context, grid);\n}\n/** @private */\n\n\nfunction _borderWithState(grid, helper, context) {\n  var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n\n  const {\n    col,\n    row\n  } = context;\n  const sel = grid.selection.select;\n  const {\n    layoutMap\n  } = grid[_];\n  const rect = context.getRect();\n  const option = {};\n  const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\n  const selId = layoutMap.getCellId(sel.col, sel.row);\n\n  function isSelectCell(col, row) {\n    if (col === sel.col && row === sel.row) {\n      return true;\n    }\n\n    return selId != null && layoutMap.getCellId(col, row) === selId && layoutMap.getRecordIndexByRow(row) === selRecordIndex;\n  } //\n\n\n  if (isSelectCell(col, row) && (helper.theme.highlightBorderColor || typeof helper.theme.highlightBorderColor == \"function\" && helper.theme.highlightBorderColor(row, col))) {\n    option.borderColor = helper.theme.highlightBorderColor;\n    option.lineWidth = 2;\n    helper.border(context, option);\n  } else {\n    option.lineWidth = 1; // header color\n\n    const isFrozenCell = grid.isFrozenCell(col, row);\n\n    if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n      option.borderColor = helper.theme.frozenRowsBorderColor;\n    }\n\n    let flagBorder = false;\n\n    if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\n      let borderColorCell = \"\";\n\n      if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\n        borderColorCell = (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\n      }\n\n      if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" && ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\n        borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\n      }\n\n      if (borderColorCell) {\n        option.borderColor = borderColorCell;\n        helper.border(context, option);\n        flagBorder = true;\n      }\n    }\n\n    if ((_j = layoutMap.getHeader(col, row)) === null || _j === void 0 ? void 0 : _j.style) {\n      let borderColorCell = \"\";\n\n      if (typeof ((_k = layoutMap.getHeader(col, row)) === null || _k === void 0 ? void 0 : _k.style) == \"object\") {\n        borderColorCell = (_m = (_l = layoutMap.getHeader(col, row).style) === null || _l === void 0 ? void 0 : _l.borderColor) !== null && _m !== void 0 ? _m : \"\";\n      }\n\n      if (typeof ((_o = layoutMap.getHeader(col, row)) === null || _o === void 0 ? void 0 : _o.style) == \"function\" && ((_p = grid[_].records) === null || _p === void 0 ? void 0 : _p.length)) {\n        borderColorCell = (_q = layoutMap.getHeader(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _q === void 0 ? void 0 : _q.borderColor;\n      }\n\n      if (borderColorCell) {\n        option.borderColor = borderColorCell;\n        helper.border(context, option);\n        flagBorder = true;\n      }\n    }\n\n    if (!flagBorder) {\n      helper.border(context, option);\n    } //\n\n\n    if (col > 0 && isSelectCell(col - 1, row)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    } else if (row > 0 && isSelectCell(col, row - 1)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[0]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0];\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        }\n      });\n    }\n  }\n}\n/** @private */\n\n\nfunction _refreshHeader(grid) {\n  var _b;\n\n  const protectedSpace = grid[_];\n\n  if (protectedSpace.headerEvents) {\n    protectedSpace.headerEvents.forEach(id => grid.unlisten(id));\n  }\n\n  const headerEvents = grid[_].headerEvents = [];\n  headerEvents.forEach(id => grid.unlisten(id));\n  let layoutMap;\n\n  if (protectedSpace.layout && (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\n  } else {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\n  }\n\n  layoutMap.headerObjects.forEach(cell => {\n    const ids = cell.headerType.bindGridEvent(grid, cell.id);\n    headerEvents.push(...ids);\n\n    if (cell.style) {\n      if (cell.style instanceof style_2.BaseStyle) {\n        const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n\n    if (cell.action) {\n      const ids = cell.action.bindGridEvent(grid, cell.id);\n      headerEvents.push(...ids);\n    }\n  });\n  layoutMap.columnObjects.forEach(col => {\n    if (col.action) {\n      const ids = col.action.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.columnType) {\n      const ids = col.columnType.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.style) {\n      if (col.style instanceof style_1.BaseStyle) {\n        const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n  });\n\n  for (let col = 0; col < layoutMap.columnWidths.length; col++) {\n    const column = layoutMap.columnWidths[col];\n    const {\n      width,\n      minWidth,\n      maxWidth\n    } = column;\n\n    if (width && (typeof width === \"string\" || width > 0)) {\n      grid.setColWidth(col, width);\n    } else {\n      grid.setColWidth(col, null);\n    }\n\n    if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\n      grid.setMinColWidth(col, minWidth);\n    } else {\n      grid.setMinColWidth(col, null);\n    }\n\n    if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\n      grid.setMaxColWidth(col, maxWidth);\n    } else {\n      grid.setMaxColWidth(col, null);\n    }\n  }\n\n  const {\n    headerRowHeight\n  } = grid[_];\n\n  for (let row = 0; row < layoutMap.headerRowCount; row++) {\n    const height = Array.isArray(headerRowHeight) ? headerRowHeight[row] : headerRowHeight;\n\n    if (height && height > 0) {\n      grid.setRowHeight(row, height);\n    } else {\n      grid.setRowHeight(row, null);\n    }\n  }\n\n  grid.colCount = layoutMap.colCount;\n\n  _refreshRowCount(grid);\n\n  grid.frozenRowCount = layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _refreshRowCount(grid) {\n  const {\n    layoutMap\n  } = grid[_];\n  grid.rowCount = grid[_].dataSource.length * layoutMap.bodyRowCount + layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _tryWithUpdateDataSource(grid, fn) {\n  const {\n    dataSourceEventIds\n  } = grid[_];\n\n  if (dataSourceEventIds) {\n    dataSourceEventIds.forEach(id => grid[_].handler.off(id));\n  }\n\n  fn(grid);\n  grid[_].dataSourceEventIds = [grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n    _refreshRowCount(grid);\n\n    grid.invalidate();\n  }), grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n    grid.invalidate();\n  })];\n}\n/** @private */\n\n\nfunction _setRecords(grid, records = []) {\n  _tryWithUpdateDataSource(grid, () => {\n    grid[_].records = records;\n    const newDataSource = grid[_].dataSource = data_1.CachedDataSource.ofArray(records);\n    grid.addDisposable(newDataSource);\n  });\n}\n/** @private */\n\n\nfunction _setDataSource(grid, dataSource) {\n  _tryWithUpdateDataSource(grid, () => {\n    if (dataSource) {\n      if (dataSource instanceof data_1.DataSource) {\n        grid[_].dataSource = dataSource;\n      } else {\n        const newDataSource = grid[_].dataSource = new data_1.CachedDataSource(dataSource);\n        grid.addDisposable(newDataSource);\n      }\n    } else {\n      grid[_].dataSource = data_1.DataSource.EMPTY;\n    }\n\n    grid[_].records = null;\n  });\n}\n/** @private */\n\n\nfunction _getRecordIndexByRow(grid, row) {\n  const {\n    layoutMap\n  } = grid[_];\n  return layoutMap.getRecordIndexByRow(row);\n}\n/** @private */\n\n\nfunction _onRangePaste(text, test = () => true) {\n  var _b;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\n    trimOnPaste: this.trimOnPaste\n  });\n  const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\n  const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let rejectedDetail = [];\n\n  const addRejectedDetail = (cell, record, define, pasteValue) => {\n    rejectedDetail.push({\n      col: cell.col,\n      row: cell.row,\n      record,\n      define,\n      pasteValue\n    });\n  };\n\n  let timeout = null;\n\n  const processRejected = () => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      if (rejectedDetail.length > 0) {\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\n          detail: rejectedDetail\n        });\n        rejectedDetail = [];\n      }\n    }, 100);\n  };\n\n  let reject = addRejectedDetail;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n  let valuesRow = 0;\n\n  for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\n    let valuesCol = 0;\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const {\n        action,\n        id,\n        define\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        const cellValue = values.getCellValue(valuesCol, valuesRow);\n        (0, utils_1.then)(this.getRowRecord(row), record => {\n          (0, utils_1.then)(_getCellValue(this, col, row), oldValue => {\n            if (test({\n              grid: this,\n              record: record,\n              col,\n              row,\n              value: cellValue,\n              oldValue\n            })) {\n              action.onPasteCellRangeBox(this, {\n                col,\n                row\n              }, cellValue, {\n                reject() {\n                  reject({\n                    col,\n                    row\n                  }, record, define, cellValue);\n                }\n\n              });\n            }\n          });\n        });\n      }\n\n      valuesCol++;\n\n      if (valuesCol >= values.colCount) {\n        valuesCol = 0;\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n\n    valuesRow++;\n\n    if (valuesRow >= values.rowCount) {\n      valuesRow = 0;\n    }\n  }\n\n  const newEnd = {\n    col: start.col + pasteColCount - 1,\n    row: start.row + pasteRowCount - 1\n  };\n  this.selection.range = {\n    start,\n    end: newEnd\n  };\n  this.invalidateCellRange(this.selection.range);\n  processRejected();\n\n  reject = (cell, record, define, pasteValue) => {\n    addRejectedDetail(cell, record, define, pasteValue);\n    processRejected();\n  };\n}\n/** @private */\n\n\nfunction _onRangeDelete() {\n  var _b;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\n  const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n\n  for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const {\n        action,\n        id\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        (0, utils_1.then)(this.getRowRecord(row), _record => {\n          (0, utils_1.then)(_getCellValue(this, col, row), _oldValue => {\n            action.onDeleteCellRangeBox(this, {\n              col,\n              row\n            });\n          });\n        });\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n  }\n\n  this.invalidateCellRange(selectionRange);\n}\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\n\n\nclass ListGrid extends DrawGrid_1.DrawGrid {\n  static get EVENT_TYPE() {\n    return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\n  }\n  /**\r\n   * constructor\r\n   *\r\n   * @constructor\r\n   * @param options Constructor options\r\n   */\n\n\n  constructor(options = {}) {\n    var _b;\n\n    super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\n    this[_a] = this[_];\n    this.disabled = false;\n    this.readOnly = false;\n    const protectedSpace = this[_];\n    protectedSpace.header = options.header || [];\n    protectedSpace.layout = options.layout || [];\n    protectedSpace.headerRowHeight = options.headerRowHeight || [];\n\n    if (options.dataSource) {\n      _setDataSource(this, options.dataSource);\n    } else {\n      _setRecords(this, options.records);\n    }\n\n    protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\n\n    _refreshHeader(this);\n\n    protectedSpace.sortState = {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\n    protectedSpace.theme = themes.of(options.theme);\n    protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\n    protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\n    this.invalidate();\n    protectedSpace.handler.on(window, \"resize\", () => {\n      this.updateSize();\n      this.updateScroll();\n      this.invalidate();\n    });\n  }\n  /**\r\n   * Dispose the grid instance.\r\n   * @returns {void}\r\n   */\n\n\n  dispose() {\n    const protectedSpace = this[_];\n    protectedSpace.messageHandler.dispose();\n    protectedSpace.tooltipHandler.dispose();\n    super.dispose();\n  }\n  /**\r\n   * Gets the define of the header.\r\n   */\n\n\n  get header() {\n    return this[_].header;\n  }\n  /**\r\n   * Sets the define of the header with the given data.\r\n   * <pre>\r\n   * column options\r\n   * -----\r\n   * caption: header caption\r\n   * field: field name\r\n   * width: column width\r\n   * minWidth: column min width\r\n   * maxWidth: column max width\r\n   * icon: icon definition\r\n   * message: message key name\r\n   * columnType: column type\r\n   * action: column action\r\n   * style: column style\r\n   * headerType: header type\r\n   * headerStyle: header style\r\n   * headerAction: header action\r\n   * headerField: header field name\r\n   * headerIcon: header icon definition\r\n   * sort: define sort setting\r\n   * -----\r\n   *\r\n   * multiline header\r\n   * -----\r\n   * caption: header caption\r\n   * columns: columns define\r\n   * -----\r\n   * </pre>\r\n   */\n\n\n  set header(header) {\n    this[_].header = header;\n\n    _refreshHeader(this);\n  }\n  /**\r\n   * Gets the define of the layout.\r\n   */\n\n\n  get layout() {\n    return this[_].layout;\n  }\n  /**\r\n   * Sets the define of the layout with the given data.\r\n   */\n\n\n  set layout(layout) {\n    this[_].layout = layout;\n\n    _refreshHeader(this);\n  }\n  /**\r\n   * Get the row count per record\r\n   */\n\n\n  get recordRowCount() {\n    return this[_].layoutMap.bodyRowCount;\n  }\n  /**\r\n   * Get the records.\r\n   */\n\n\n  get records() {\n    return this[_].records || null;\n  }\n  /**\r\n   * Set the records from given\r\n   */\n\n\n  set records(records) {\n    if (records == null) {\n      return;\n    }\n\n    _setRecords(this, records);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\r\n   * Get the data source.\r\n   */\n\n\n  get dataSource() {\n    return this[_].dataSource;\n  }\n  /**\r\n   * Set the data source from given\r\n   */\n\n\n  set dataSource(dataSource) {\n    _setDataSource(this, dataSource);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\r\n   * Get the theme.\r\n   */\n\n\n  get theme() {\n    return this[_].theme;\n  }\n  /**\r\n   * Set the theme from given\r\n   */\n\n\n  set theme(theme) {\n    this[_].theme = themes.of(theme);\n    this.invalidate();\n  }\n  /**\r\n   * If set to true to allow pasting of ranges.\r\n   */\n\n\n  get allowRangePaste() {\n    return this[_].allowRangePaste;\n  }\n\n  set allowRangePaste(allowRangePaste) {\n    this[_].allowRangePaste = allowRangePaste;\n  }\n  /**\r\n   * Get the font definition as a string.\r\n   * @override\r\n   */\n\n\n  get font() {\n    return super.font || this[_].gridCanvasHelper.theme.font;\n  }\n  /**\r\n   * Set the font definition with the given string.\r\n   * @override\r\n   */\n\n\n  set font(font) {\n    super.font = font;\n  }\n  /**\r\n   * Get the background color of the underlay.\r\n   * @override\r\n   */\n\n\n  get underlayBackgroundColor() {\n    return super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\n  }\n  /**\r\n   * Set the background color of the underlay.\r\n   * @override\r\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    super.underlayBackgroundColor = underlayBackgroundColor;\n  }\n  /**\r\n   * Get the sort state.\r\n   */\n\n\n  get sortState() {\n    return this[_].sortState;\n  }\n  /**\r\n   * Sets the sort state.\r\n   * If `null` to set, the sort state is initialized.\r\n   */\n\n\n  set sortState(sortState) {\n    const oldState = this.sortState;\n    let oldField;\n\n    if (oldState.col >= 0 && oldState.row >= 0) {\n      oldField = this.getHeaderField(oldState.col, oldState.row);\n    }\n\n    const newState = this[_].sortState = sortState != null ? sortState : {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    let newField;\n\n    if (newState.col >= 0 && newState.row >= 0) {\n      newField = this.getHeaderField(newState.col, newState.row);\n    } // bind header value\n\n\n    if (oldField != null && oldField !== newField) {\n      this.setHeaderValue(oldState.col, oldState.row, undefined);\n    }\n\n    if (newField != null) {\n      this.setHeaderValue(newState.col, newState.row, newState.order);\n    }\n  }\n  /**\r\n   * Get the header values.\r\n   */\n\n\n  get headerValues() {\n    return this[_].headerValues || (this[_].headerValues = new Map());\n  }\n  /**\r\n   * Sets the header values.\r\n   */\n\n\n  set headerValues(headerValues) {\n    this[_].headerValues = headerValues || new Map();\n  }\n  /**\r\n   * Get the field of the given column index.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index.\r\n   * @return {*} The field object.\r\n   */\n\n\n  getField(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\n  }\n  /**\r\n   * Get the column define of the given column index.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index.\r\n   * @return {*} The column define object.\r\n   */\n\n\n  getColumnDefine(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\n  }\n\n  getColumnType(col, row) {\n    return this[_].layoutMap.getBody(col, row).columnType;\n  }\n\n  getColumnAction(col, row) {\n    return this[_].layoutMap.getBody(col, row).action;\n  }\n  /**\r\n   * Get the header field of the given header cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The header row index.\r\n   * @return {*} The field object.\r\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderField(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.field;\n  }\n  /**\r\n   * Get the header define of the given header cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The header row index.\r\n   * @return {*} The header define object.\r\n   */\n\n\n  getHeaderDefine(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.define;\n  }\n  /**\r\n   * Get the record of the given row index.\r\n   * @param  {number} row The row index.\r\n   * @return {object} The record.\r\n   */\n\n\n  getRowRecord(row) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return undefined;\n    } else {\n      return this[_].dataSource.get(_getRecordIndexByRow(this, row));\n    }\n  }\n  /**\r\n   * Get the record index of the given row index.\r\n   * @param  {number} row The row index.\r\n   */\n\n\n  getRecordIndexByRow(row) {\n    return _getRecordIndexByRow(this, row);\n  }\n  /**\r\n   * Gets the row index starting at the given record index.\r\n   * @param  {number} index The record index.\r\n   */\n\n\n  getRecordStartRowByRecordIndex(index) {\n    return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\n  }\n  /**\r\n   * Get the column index of the given field.\r\n   * @param  {*} field The field.\r\n   * @return {number} The column index.\r\n   * @deprecated use `getCellRangeByField` instead\r\n   */\n\n\n  getColumnIndexByField(field) {\n    var _b;\n\n    const range = this.getCellRangeByField(field, 0);\n    return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\n  }\n  /**\r\n   * Get the column index of the given field.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {number} The column index.\r\n   */\n\n\n  getCellRangeByField(field, index) {\n    const {\n      layoutMap\n    } = this[_];\n    const colObj = layoutMap.columnObjects.find(col => col.field === field);\n\n    if (colObj) {\n      const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\n      const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\n      return {\n        start: {\n          col: layoutRange.start.col,\n          row: startRow + layoutRange.start.row\n        },\n        end: {\n          col: layoutRange.end.col,\n          row: startRow + layoutRange.end.row\n        }\n      };\n    }\n\n    return null;\n  }\n  /**\r\n   * Focus the cell.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {void}\r\n   */\n\n\n  focusGridCell(field, index) {\n    var _b;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = this.selection.range;\n    const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\n\n    if (newFocus == null) {\n      return;\n    }\n\n    this.focusCell(newFocus.col, newFocus.row);\n    this.selection.select = newFocus;\n    this.invalidateGridRect(startCol, startRow, endCol, endRow);\n    this.invalidateCell(newFocus.col, newFocus.row);\n  }\n  /**\r\n   * Scroll to where cell is visible.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {void}\r\n   */\n\n\n  makeVisibleGridCell(field, index) {\n    var _b, _c, _d;\n\n    const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\n    this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\n  }\n\n  getGridCanvasHelper() {\n    return this[_].gridCanvasHelper;\n  }\n  /**\r\n   * Get cell range information for a given cell.\r\n   * @param {number} col column index of the cell\r\n   * @param {number} row row index of the cell\r\n   * @returns {object} cell range info\r\n   */\n\n\n  getCellRange(col, row) {\n    return _getCellRange(this, col, row);\n  }\n  /**\r\n   * Get header range information for a given cell.\r\n   * @param {number} col column index of the cell\r\n   * @param {number} row row index of the cell\r\n   * @returns {object} cell range info\r\n   * @deprecated use `getCellRange` instead\r\n   */\n\n\n  getHeaderCellRange(col, row) {\n    return this.getCellRange(col, row);\n  }\n\n  getCopyCellValue(col, row, range) {\n    const cellRange = _getCellRange(this, col, row);\n\n    const startCol = range ? Math.max(range.start.col, cellRange.start.col) : cellRange.start.col;\n    const startRow = range ? Math.max(range.start.row, cellRange.start.row) : cellRange.start.row;\n\n    if (startCol !== col || startRow !== row) {\n      return \"\";\n    }\n\n    const value = _getCellValue(this, col, row);\n\n    if (row < this[_].layoutMap.headerRowCount) {\n      const headerData = this[_].layoutMap.getHeader(col, row);\n\n      return headerData.headerType.getCopyCellValue(value, this, {\n        col,\n        row\n      });\n    }\n\n    const columnData = this[_].layoutMap.getBody(col, row);\n\n    return columnData.columnType.getCopyCellValue(value, this, {\n      col,\n      row\n    });\n  }\n\n  onDrawCell(col, row, context) {\n    const {\n      layoutMap\n    } = this[_];\n    let draw;\n    let style;\n\n    if (row < layoutMap.headerRowCount) {\n      const hd = layoutMap.getHeader(col, row);\n      draw = hd.headerType.onDrawCell;\n      ({\n        style\n      } = hd);\n\n      _updateRect(this, col, row, context);\n    } else {\n      const column = layoutMap.getBody(col, row);\n      draw = column.columnType.onDrawCell;\n      ({\n        style\n      } = column);\n\n      _updateRect(this, col, row, context);\n    }\n\n    const cellValue = _getCellValue(this, col, row);\n\n    if (this.rowCount <= row) {\n      // Depending on the FilterDataSource, the rowCount may be reduced.\n      return undefined;\n    }\n\n    return _onDrawValue(this, cellValue, context, {\n      col,\n      row\n    }, style, draw);\n  }\n\n  doGetCellValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  valueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const value = _getCellValue(this, col, row);\n\n      if ((0, utils_1.isPromise)(value)) {\n        //\n        return false;\n      }\n\n      valueCallback(value);\n    }\n\n    return true;\n  }\n\n  doChangeValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  changeValueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const record = this.getRowRecord(row);\n\n      if ((0, utils_1.isPromise)(record)) {\n        //\n        return false;\n      }\n\n      const before = _getCellValue(this, col, row);\n\n      if ((0, utils_1.isPromise)(before)) {\n        //\n        return false;\n      }\n\n      const after = changeValueCallback(before);\n\n      if (after === undefined) {\n        return false;\n      }\n\n      const {\n        field\n      } = this[_].layoutMap.getBody(col, row);\n\n      this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\n        col,\n        row,\n        record: record,\n        field: field,\n        value: after,\n        oldValue: before\n      });\n      return (0, utils_1.then)(_setCellValue(this, col, row, after), ret => {\n        if (ret) {\n          const {\n            field\n          } = this[_].layoutMap.getBody(col, row);\n\n          this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\n            col,\n            row,\n            record: record,\n            field: field,\n            value: after,\n            oldValue: before\n          });\n        }\n\n        return ret;\n      });\n    }\n  }\n\n  doSetPasteValue(text, test) {\n    _onRangePaste.call(this, text, test);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderValue(col, row) {\n    const field = this.getHeaderField(col, row);\n    return this.headerValues.get(field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  setHeaderValue(col, row, newValue) {\n    const field = this.getHeaderField(col, row);\n    const oldValue = this.headerValues.get(field);\n    this.headerValues.set(field, newValue);\n    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\n      col,\n      row,\n      field,\n      value: newValue,\n      oldValue\n    });\n  }\n\n  getLayoutCellId(col, row) {\n    return this[_].layoutMap.getCellId(col, row);\n  }\n\n  bindEventsInternal() {\n    const grid = this;\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      const range = _getCellRange(this, e.col, e.row);\n\n      const {\n        start: {\n          col: startCol,\n          row: startRow\n        },\n        end: {\n          col: endCol,\n          row: endRow\n        }\n      } = range;\n\n      if (startCol !== endCol || startRow !== endRow) {\n        this.invalidateCellRange(range);\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, e => {\n      if (!this[_].allowRangePaste) {\n        return;\n      }\n\n      const {\n        start,\n        end\n      } = this.selection.range;\n\n      if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\n        return;\n      }\n\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangePaste.call(this, e.normalizeValue);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, e => {\n      const {\n        start\n      } = this.selection.range;\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangeDelete.call(this);\n    });\n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        col: startCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = startCol;\n    return super.getMoveLeftColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        col: endCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = endCol;\n    return super.getMoveRightColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        row: startRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = startRow;\n    return super.getMoveUpRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        row: endRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = endRow;\n    return super.getMoveDownRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getOffsetInvalidateCells() {\n    return 1;\n  }\n\n  getCopyRangeInternal(range) {\n    const {\n      start\n    } = this.getCellRange(range.start.col, range.start.row);\n    const {\n      end\n    } = this.getCellRange(range.end.col, range.end.row);\n    return {\n      start,\n      end\n    };\n  }\n\n  fireListeners(type, ...event) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.ListGrid = ListGrid;\n_a = _;\n\n/***/ }),\n\n/***/ \"./columns.js\":\n/*!********************!*\\\n  !*** ./columns.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.style = exports.type = exports.action = void 0;\n\nconst action = __importStar(__webpack_require__(/*! ./columns/action */ \"./columns/action.js\"));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(/*! ./columns/style */ \"./columns/style.js\"));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(/*! ./columns/type */ \"./columns/type.js\"));\n\nexports.type = type;\n\n/***/ }),\n\n/***/ \"./columns/action.js\":\n/*!***************************!*\\\n  !*** ./columns/action.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\n\nconst Action_1 = __webpack_require__(/*! ./action/Action */ \"./columns/action/Action.js\");\n\nObject.defineProperty(exports, \"Action\", {\n  enumerable: true,\n  get: function () {\n    return Action_1.Action;\n  }\n});\n\nconst BaseAction_1 = __webpack_require__(/*! ./action/BaseAction */ \"./columns/action/BaseAction.js\");\n\nObject.defineProperty(exports, \"BaseAction\", {\n  enumerable: true,\n  get: function () {\n    return BaseAction_1.BaseAction;\n  }\n});\n\nconst ButtonAction_1 = __webpack_require__(/*! ./action/ButtonAction */ \"./columns/action/ButtonAction.js\");\n\nObject.defineProperty(exports, \"ButtonAction\", {\n  enumerable: true,\n  get: function () {\n    return ButtonAction_1.ButtonAction;\n  }\n});\n\nconst CheckEditor_1 = __webpack_require__(/*! ./action/CheckEditor */ \"./columns/action/CheckEditor.js\");\n\nObject.defineProperty(exports, \"CheckEditor\", {\n  enumerable: true,\n  get: function () {\n    return CheckEditor_1.CheckEditor;\n  }\n});\n\nconst Editor_1 = __webpack_require__(/*! ./action/Editor */ \"./columns/action/Editor.js\");\n\nObject.defineProperty(exports, \"Editor\", {\n  enumerable: true,\n  get: function () {\n    return Editor_1.Editor;\n  }\n});\n\nconst InlineInputEditor_1 = __webpack_require__(/*! ./action/InlineInputEditor */ \"./columns/action/InlineInputEditor.js\");\n\nObject.defineProperty(exports, \"InlineInputEditor\", {\n  enumerable: true,\n  get: function () {\n    return InlineInputEditor_1.InlineInputEditor;\n  }\n});\n\nconst InlineMenuEditor_1 = __webpack_require__(/*! ./action/InlineMenuEditor */ \"./columns/action/InlineMenuEditor.js\");\n\nObject.defineProperty(exports, \"InlineMenuEditor\", {\n  enumerable: true,\n  get: function () {\n    return InlineMenuEditor_1.InlineMenuEditor;\n  }\n});\n\nconst RadioEditor_1 = __webpack_require__(/*! ./action/RadioEditor */ \"./columns/action/RadioEditor.js\");\n\nObject.defineProperty(exports, \"RadioEditor\", {\n  enumerable: true,\n  get: function () {\n    return RadioEditor_1.RadioEditor;\n  }\n});\n\nconst SmallDialogInputEditor_1 = __webpack_require__(/*! ./action/SmallDialogInputEditor */ \"./columns/action/SmallDialogInputEditor.js\");\n\nObject.defineProperty(exports, \"SmallDialogInputEditor\", {\n  enumerable: true,\n  get: function () {\n    return SmallDialogInputEditor_1.SmallDialogInputEditor;\n  }\n}); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n}\n\nexports.ACTIONS = {\n  CHECK: new ImmutableCheckEditor(),\n  INPUT: new ImmutableInputEditor(),\n  RADIO: new ImmutableRadioEditor()\n};\n\nfunction of(columnAction) {\n  if (!columnAction) {\n    return undefined;\n  } else if (typeof columnAction === \"string\") {\n    const key = columnAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return columnAction;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/action/Action.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Action.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Action = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nclass Action extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n\n    this._action = option.action || (() => {});\n  }\n\n  get editable() {\n    return false;\n  }\n\n  get action() {\n    return this._action;\n  }\n\n  set action(action) {\n    this._action = action;\n  }\n\n  clone() {\n    return new Action(this);\n  }\n\n  getState(_grid) {\n    return {};\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = this.getState(grid);\n\n    const action = cell => {\n      if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(cell.row);\n\n      this._action(record, (0, utils_1.extend)(cell, {\n        grid\n      }));\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    })];\n  }\n\n  onPasteCellRangeBox() {// noop\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.Action = Action;\n\n/***/ }),\n\n/***/ \"./columns/action/BaseAction.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/BaseAction.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseAction = void 0;\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  onChangeDisabledInternal() {// abstract\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n\n/***/ \"./columns/action/BaseInputEditor.js\":\n/*!*******************************************!*\\\n  !*** ./columns/action/BaseInputEditor.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseInputEditor = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass BaseInputEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      this.onOpenCellInternal(grid, cell);\n      return true;\n    };\n\n    const input = (cell, value) => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      this.onInputCellInternal(grid, cell, value);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      input({\n        col: e.col,\n        row: e.row\n      }, e.value);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      input({\n        col: e.col,\n        row: e.row\n      }, e.normalizeValue);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      open({\n        col: e.col,\n        row: e.row\n      });\n      utils_1.event.cancel(e.event);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, e => {\n      this.onChangeSelectCellInternal(grid, {\n        col: e.col,\n        row: e.row\n      }, e.selected);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      this.onGridScrollInternal(grid);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return false;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      return true;\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (range.start.col !== range.end.col || range.start.row !== range.end.row) {\n        const {\n          input\n        } = cell;\n        const baseRect = grid.getCellRect(cell.col, cell.row);\n        const rangeRect = grid.getCellRangeRect(range);\n        input.style.top = `${(parseFloat(input.style.top) + (rangeRect.top - baseRect.top)).toFixed()}px`;\n        input.style.left = `${(parseFloat(input.style.left) + (rangeRect.left - baseRect.left)).toFixed()}px`;\n        input.style.width = `${rangeRect.width.toFixed()}px`;\n        input.style.height = `${rangeRect.height.toFixed()}px`;\n      }\n\n      this.onSetInputAttrsInternal(grid, {\n        col: cell.col,\n        row: cell.row\n      }, cell.input);\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => {\n      if (this.isSupportMultilineValue()) {\n        return value;\n      }\n\n      return value.replace(/\\r?\\n/g, \" \");\n    });\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => \"\");\n  }\n\n  isSupportMultilineValue() {\n    return false;\n  }\n\n}\n\nexports.BaseInputEditor = BaseInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/ButtonAction.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/ButtonAction.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonAction = void 0;\n\nconst Action_1 = __webpack_require__(/*! ./Action */ \"./columns/action/Action.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\n\nclass ButtonAction extends Action_1.Action {\n  getState(grid) {\n    let state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (!state) {\n      state = {};\n      utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\n    }\n\n    return state;\n  }\n\n}\n\nexports.ButtonAction = ButtonAction;\n\n/***/ }),\n\n/***/ \"./columns/action/CheckEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/CheckEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckEditor = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\n\nclass CheckEditor extends Editor_1.Editor {\n  clone() {\n    return new CheckEditor(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[CHECK_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      const range = grid.getCellRange(cell.col, cell.row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n        return;\n      }\n\n      const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n\n      if (ret) {\n        const onChange = () => {\n          // checkbox animation\n          (0, animate_1.animate)(200, point => {\n            if (point === 1) {\n              delete state.elapsed[cellKey];\n            } else {\n              state.elapsed[cellKey] = point;\n            }\n\n            grid.invalidateCellRange(range);\n          });\n        };\n\n        if ((0, utils_1.isPromise)(ret)) {\n          state.block[cellKey] = true;\n          ret.then(() => {\n            delete state.block[cellKey];\n            onChange();\n          });\n        } else {\n          onChange();\n        }\n      }\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action: _e => {\n        const selrange = grid.selection.range;\n        const {\n          col\n        } = grid.selection.select;\n\n        for (let {\n          row\n        } = selrange.start; row <= selrange.end.row; row++) {\n          if (!isTarget(col, row)) {\n            continue;\n          }\n\n          action({\n            col,\n            row\n          });\n        }\n      }\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      const pasteValue = e.normalizeValue.trim();\n      grid.doGetCellValue(e.col, e.row, value => {\n        const newValue = (0, action_utils_1.toggleValue)(value);\n\n        if (`${newValue}`.trim() === pasteValue) {\n          action({\n            col: e.col,\n            row: e.row\n          });\n        } else if (isRejectValue(value, pasteValue)) {\n          const record = grid.getRowRecord(e.row);\n\n          if (!(0, utils_1.isPromise)(record)) {\n            grid.fireListeners(\"rejected_paste_values\", {\n              detail: [{\n                col: e.col,\n                row: e.row,\n                record,\n                define: grid.getColumnDefine(e.col, e.row),\n                pasteValue\n              }]\n            });\n          }\n        }\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      const newValue = (0, action_utils_1.toggleValue)(value);\n\n      if (`${newValue}`.trim() === pasteValue) {\n        grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n      } else if (isRejectValue(value, pasteValue)) {\n        context.reject();\n      }\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.CheckEditor = CheckEditor;\n\nfunction isRejectValue(oldValue, pasteValue) {\n  if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\n    return false;\n  }\n\n  const newValue = (0, action_utils_1.toggleValue)(oldValue);\n  return `${newValue}`.trim() !== pasteValue && `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Editor.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Editor.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Editor = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\nclass Editor extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n    this._readOnly = option.readOnly || false;\n  }\n\n  get editable() {\n    return true;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n  set readOnly(readOnly) {\n    this._readOnly = readOnly;\n    this.onChangeReadOnlyInternal();\n  }\n\n  onChangeReadOnlyInternal() {// abstruct\n  }\n\n}\n\nexports.Editor = Editor;\n\n/***/ }),\n\n/***/ \"./columns/action/InlineInputEditor.js\":\n/*!*********************************************!*\\\n  !*** ./columns/action/InlineInputEditor.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineInputEditor = void 0;\n\nconst BaseInputEditor_1 = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\n\nconst InlineInputElement_1 = __webpack_require__(/*! ./internal/InlineInputElement */ \"./columns/action/internal/InlineInputElement.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineInputElement_1.InlineInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nfunction doChangeValue(_grid) {\n  if (globalElement) {\n    globalElement.doChangeValue();\n  }\n}\n\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  clone() {\n    return new InlineInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(grid, _cell, _selected) {\n    doChangeValue(grid);\n    detachInput();\n  }\n\n  onGridScrollInternal(grid) {\n    doChangeValue(grid);\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\n  }\n\n}\n\nexports.InlineInputEditor = InlineInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/InlineMenuEditor.js\":\n/*!********************************************!*\\\n  !*** ./columns/action/InlineMenuEditor.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineMenuEditor = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst InlineMenuElement_1 = __webpack_require__(/*! ./internal/InlineMenuElement */ \"./columns/action/internal/InlineMenuElement.js\");\n\nconst type_1 = __webpack_require__(/*! ../type */ \"./columns/type.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst menu_items_1 = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachMenu(grid, cell, editor, value, record) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineMenuElement_1.InlineMenuElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value, record);\n}\n\nfunction detachMenu(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass InlineMenuEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._options = (0, menu_items_1.normalizeToFn)(option.options);\n  }\n\n  dispose() {// noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this._options = (0, menu_items_1.normalizeToFn)(options);\n  }\n\n  clone() {\n    return new InlineMenuEditor(this);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      grid.doGetCellValue(cell.col, cell.row, value => {\n        const record = grid.getRowRecord(cell.row);\n\n        if ((0, utils_1.isPromise)(record)) {\n          return;\n        }\n\n        attachMenu(grid, cell, this, value, record);\n      });\n      return true;\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, _e => {\n      detachMenu();\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      detachMenu(true);\n    }), // mouse move\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"pointer\";\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      if (!grid.getElement().style.cursor) {\n        grid.getElement().style.cursor = \"pointer\";\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"\";\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(e.row);\n\n      if ((0, utils_1.isPromise)(record)) {\n        return;\n      }\n\n      const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\n\n      if (pasteOpt) {\n        utils_1.event.cancel(e.event);\n        (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\n          const range = grid.getCellRange(e.col, e.row);\n          grid.invalidateCellRange(range);\n        });\n      } else {\n        grid.fireListeners(\"rejected_paste_values\", {\n          detail: [{\n            col: e.col,\n            row: e.row,\n            record,\n            define: grid.getColumnDefine(e.col, e.row),\n            pasteValue: e.normalizeValue\n          }]\n        });\n      }\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    } else {\n      // unknown\n      context.reject();\n    }\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    }\n  }\n\n  _pasteDataToOptionValue(value, grid, cell, record) {\n    const options = this._options(record);\n\n    const pasteOpt = _textToOptionValue(value, options);\n\n    if (pasteOpt) {\n      return pasteOpt;\n    }\n\n    const columnType = grid.getColumnType(cell.col, cell.row);\n\n    if (hasOptions(columnType)) {\n      // Find with caption.\n      const pasteValue = normalizePasteValueStr(value);\n      const captionOpt = utils_1.array.find(columnType.options, opt => normalizePasteValueStr(opt.label) === pasteValue);\n\n      if (captionOpt) {\n        return _textToOptionValue(captionOpt.value, options);\n      }\n    }\n\n    return undefined;\n  }\n\n}\n\nexports.InlineMenuEditor = InlineMenuEditor;\n\nfunction _textToOptionValue(value, options) {\n  const pasteValue = normalizePasteValueStr(value);\n  const pasteOpt = utils_1.array.find(options, opt => normalizePasteValueStr(opt.value) === pasteValue);\n\n  if (pasteOpt) {\n    return pasteOpt;\n  }\n\n  return undefined;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction normalizePasteValueStr(value) {\n  if (value == null) {\n    return \"\";\n  }\n\n  return `${value}`.trim();\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction hasOptions(columnType) {\n  if (columnType instanceof type_1.MenuColumn) {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  if (Array.isArray(columnType.options)) {\n    return true;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/RadioEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/RadioEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioEditor = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_2 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\n\nclass RadioEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._group = option.group;\n    this._checkAction = option.checkAction;\n  }\n\n  clone() {\n    return new RadioEditor(this);\n  }\n  /** @deprecated Use checkAction instead. */\n\n\n  get group() {\n    return this._group;\n  }\n  /** @deprecated Use checkAction instead. */\n\n\n  set group(group) {\n    this._group = group;\n  }\n\n  get checkAction() {\n    return this._checkAction;\n  }\n\n  set checkAction(checkAction) {\n    this._checkAction = checkAction;\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[RADIO_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      this._action(grid, cell);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      const pasteValue = e.normalizeValue.trim();\n\n      if (isRejectValue(pasteValue)) {\n        // Not a boolean\n        const record = grid.getRowRecord(e.row);\n\n        if (!(0, utils_1.isPromise)(record)) {\n          grid.fireListeners(\"rejected_paste_values\", {\n            detail: [{\n              col: e.col,\n              row: e.row,\n              record,\n              define: grid.getColumnDefine(e.col, e.row),\n              pasteValue\n            }]\n          });\n        }\n\n        return;\n      }\n\n      if (!(0, utils_2.toBoolean)(pasteValue)) {\n        return;\n      }\n\n      action({\n        col: e.col,\n        row: e.row\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n\n    if (isRejectValue(pasteValue)) {\n      // Not a boolean\n      context.reject();\n      return;\n    }\n\n    if (!(0, utils_2.toBoolean)(pasteValue)) {\n      return;\n    }\n\n    this._action(grid, {\n      col: cell.col,\n      row: cell.row\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n  _action(grid, cell) {\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(cell.col, cell.row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n      return;\n    }\n\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      if ((0, utils_2.toBoolean)(value)) {\n        return;\n      }\n\n      if (this._checkAction) {\n        // User behavior\n        const record = grid.getRowRecord(cell.row);\n\n        this._checkAction(record, (0, utils_1.extend)(cell, {\n          grid\n        }));\n\n        return;\n      }\n\n      if (this._group) {\n        // Backward compatibility\n        const state = grid[RADIO_COLUMN_STATE_ID];\n\n        const targets = this._group({\n          grid,\n          col: cell.col,\n          row: cell.row\n        });\n\n        targets.forEach(({\n          col,\n          row\n        }) => {\n          const range = grid.getCellRange(col, row);\n          const cellKey = `${range.start.col}:${range.start.row}`;\n\n          if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n            return;\n          }\n\n          actionCell(grid, col, row, col === cell.col && row === cell.row);\n        });\n        return;\n      } // default behavior\n\n\n      const field = grid.getField(cell.col, cell.row);\n      const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\n      /** Original DataSource */\n\n      const {\n        dataSource\n      } = grid.dataSource;\n      const girdRecords = getAllRecordsFromGrid(grid);\n\n      for (let index = 0; index < dataSource.length; index++) {\n        const record = dataSource.get(index);\n        const showData = girdRecords.find(d => d.record === record);\n\n        if (showData) {\n          actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\n        } else {\n          // Hidden record\n          (0, utils_1.then)(dataSource.getField(index, field), value => {\n            if (!(0, utils_2.toBoolean)(value)) {\n              return;\n            }\n\n            dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\n          });\n        }\n      }\n    });\n  }\n\n}\n\nexports.RadioEditor = RadioEditor;\n\nfunction getAllRecordsFromGrid(grid) {\n  const result = [];\n  const {\n    rowCount,\n    recordRowCount\n  } = grid;\n\n  for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\n    const record = grid.getRowRecord(targetRow);\n    result.push({\n      row: targetRow,\n      record\n    });\n  }\n\n  return result;\n}\n\nfunction actionCell(grid, col, row, flag) {\n  grid.doGetCellValue(col, row, value => {\n    if ((0, utils_2.toBoolean)(value) === flag) {\n      return;\n    }\n\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\n\n    if (ret) {\n      const onChange = () => {\n        // checkbox animation\n        (0, animate_1.animate)(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      if ((0, utils_1.isPromise)(ret)) {\n        state.block[cellKey] = true;\n        ret.then(() => {\n          delete state.block[cellKey];\n          onChange();\n        });\n      } else {\n        onChange();\n      }\n    }\n  });\n}\n\nfunction isRejectValue(pasteValue) {\n  return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/SmallDialogInputEditor.js\":\n/*!**************************************************!*\\\n  !*** ./columns/action/SmallDialogInputEditor.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SmallDialogInputEditor = void 0;\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseInputEditor_1 = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst SmallDialogInputElement_1 = __webpack_require__(/*! ./internal/SmallDialogInputElement */ \"./columns/action/internal/SmallDialogInputElement.js\");\n\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._helperText = option.helperText;\n    this._inputValidator = option.inputValidator;\n    this._validator = option.validator;\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  dispose() {//noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  get helperText() {\n    return this._helperText;\n  }\n\n  get inputValidator() {\n    return this._inputValidator;\n  }\n\n  get validator() {\n    return this._validator;\n  }\n\n  clone() {\n    return new SmallDialogInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(_grid, _cell, _selected) {\n    // cancel input\n    detachInput();\n  }\n\n  onGridScrollInternal(_grid) {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      this.onOpenCellInternal(grid, cell);\n      return true;\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...super.bindGridEvent(grid, cellId), grid.listen('click_cell', cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    })];\n  }\n\n}\n\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/action-utils.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/action-utils.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nfunction isDisabledRecord(option, grid, row) {\n  if (grid.disabled) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isDisabledRecord = isDisabledRecord;\n\nfunction isReadOnlyRecord(option, grid, row) {\n  if (grid.readOnly) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isReadOnlyRecord = isReadOnlyRecord;\n\nfunction toggleValue(val) {\n  if (typeof val === \"number\") {\n    if (val === 0) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return \"true\";\n    } else if (val === \"off\") {\n      return \"on\";\n    } else if (/^0+$/.exec(val)) {\n      return val.replace(/^(0*)0$/, \"$11\");\n    } else if (val === \"true\") {\n      return \"false\";\n    } else if (val === \"on\") {\n      return \"off\";\n    } else if (/^0*1$/.exec(val)) {\n      return val.replace(/^(0*)1$/, \"$10\");\n    }\n  }\n\n  return !val;\n}\n\nexports.toggleValue = toggleValue;\n\nfunction getBooleanOptionOfRecord(option, grid, row) {\n  if (typeof option === \"function\") {\n    const record = grid.getRowRecord(row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return true;\n    }\n\n    return !!option(record);\n  }\n\n  return !!option;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/actionBind.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/actionBind.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.js\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineInputElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst input_value_handler_1 = __webpack_require__(/*! ./input-value-handler */ \"./columns/action/internal/input-value-handler.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst CLASSNAME = \"cheetah-grid__inline-input\";\n\nfunction createInputElement() {\n  __webpack_require__(/*! @/columns/action/internal/InlineInputElement.css */ \"../src/js/columns/action/internal/InlineInputElement.css\");\n\n  return (0, dom_1.createElement)(\"input\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    classList,\n    type\n  } = editor;\n\n  if (classList) {\n    input.classList.add(...classList);\n  }\n\n  input.type = type || \"\";\n}\n\nclass InlineInputElement {\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._input = createInputElement();\n\n    this._bindInputEvents();\n  }\n\n  dispose() {\n    var _a;\n\n    const input = this._input;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._input;\n    this._beforePropEditor = null;\n    (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n  }\n\n  attach(grid, editor, col, row, value) {\n    const input = this._input;\n    const handler = this._handler;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        input.classList.remove(...classList);\n      }\n    }\n\n    input.style.font = grid.font || \"16px sans-serif\";\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    input.style.top = `${rect.top.toFixed()}px`;\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(input);\n    setInputAttrs(editor, grid, input);\n    (0, input_value_handler_1.setInputValue)(input, value);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n    this._beforePropEditor = editor;\n\n    const focus = () => {\n      input.focus();\n      const end = input.value.length;\n\n      try {\n        if (typeof input.selectionStart !== \"undefined\") {\n          input.selectionStart = end;\n          input.selectionEnd = end;\n          return;\n        }\n      } catch (e) {//ignore\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      if (document.selection) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const range = input.createTextRange();\n        range.collapse();\n        range.moveEnd(\"character\", end);\n        range.moveStart(\"character\", end);\n        range.select();\n      }\n    };\n\n    handler.tryWithOffEvents(input, \"blur\", () => {\n      focus();\n    });\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const input = this._input;\n\n      this._handler.tryWithOffEvents(input, \"blur\", () => {\n        var _a;\n\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      });\n\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n  }\n\n  doChangeValue() {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    const {\n      grid,\n      col,\n      row\n    } = this._activeData;\n    grid.doChangeValue(col, row, () => value);\n  }\n\n  _isActive() {\n    const input = this._input;\n\n    if (!input || !input.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindInputEvents() {\n    const handler = this._handler;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(input, \"click\", stopPropagationOnly);\n    handler.on(input, \"mousedown\", stopPropagationOnly);\n    handler.on(input, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"dblclick\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n    });\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(e);\n      }\n    });\n    handler.on(input, \"blur\", _e => {\n      this.doChangeValue();\n      this.detach();\n    });\n  }\n\n  _onKeydownEnter(e) {\n    var _a;\n\n    if (!this._isActive() || this._attaching) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n    this.doChangeValue();\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n      grid.onKeyDownMove(e);\n    }\n  }\n\n  _onKeydownTab(e) {\n    var _a;\n\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n\n    if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\n      return;\n    }\n\n    this.doChangeValue();\n    this.detach(true);\n    grid.onKeyDownMove(e);\n  }\n\n}\n\nexports.InlineInputElement = InlineInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.js\":\n/*!******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineMenuElement = void 0;\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\n\nfunction findItemParents(target) {\n  let el = target;\n\n  while (el && !el.classList.contains(ITEM_CLASSNAME)) {\n    el = el.parentElement;\n\n    if (!el || el.classList.contains(CLASSNAME)) {\n      return null;\n    }\n  }\n\n  return el;\n}\n\nfunction createMenuElement() {\n  __webpack_require__(/*! @/columns/action/internal/InlineMenuElement.css */ \"../src/js/columns/action/internal/InlineMenuElement.css\");\n\n  return (0, dom_1.createElement)(\"ul\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction attachElement(element, rect, menu) {\n  menu.style.top = `${rect.top.toFixed()}px`;\n  menu.style.left = `${rect.left.toFixed()}px`;\n  menu.style.width = `${rect.width.toFixed()}px`;\n  menu.style.lineHeight = `${rect.height.toFixed()}px`;\n  element.appendChild(menu);\n}\n\nfunction optionToLi({\n  classList,\n  label,\n  value,\n  html\n}, index) {\n  const item = (0, dom_1.createElement)(\"li\", {\n    classList: ITEM_CLASSNAME\n  });\n  item.tabIndex = 0;\n  item.dataset.valueindex = `${index}`;\n\n  if (classList) {\n    item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\n  }\n\n  if (label) {\n    const span = (0, dom_1.createElement)(\"span\", {\n      text: label\n    });\n    item.appendChild(span);\n  } else if (html) {\n    (0, dom_1.appendHtml)(item, html);\n  }\n\n  if (value === \"\" || value == null) {\n    item.classList.add(EMPTY_ITEM_CLASSNAME);\n  }\n\n  return item;\n}\n\nfunction openMenu(grid, editor, col, row, value, options, menu) {\n  const {\n    classList\n  } = editor;\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  (0, dom_1.empty)(menu);\n  menu.style.font = grid.font || \"16px sans-serif\";\n  let emptyItemEl = null;\n  let valueItemEl = null;\n  options.forEach((option, i) => {\n    const item = optionToLi(option, i);\n    menu.appendChild(item);\n\n    if (option.value === value) {\n      valueItemEl = item;\n      item.dataset.select = \"select\";\n    }\n\n    if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n      emptyItemEl = item;\n    }\n  });\n  const focusEl = valueItemEl || emptyItemEl || menu.children[0];\n\n  if (classList) {\n    menu.classList.add(...classList);\n  }\n\n  const children = Array.prototype.slice.call(menu.children, 0);\n  const focusIndex = children.indexOf(focusEl);\n  const {\n    element,\n    rect\n  } = grid.getAttachCellsArea(grid.getCellRange(col, row)); // Cover the right line\n\n  rect.width++; // append for calculation\n\n  attachElement(element, rect, menu); // Make the selection item at the middle\n\n  let offset = 0;\n  let allHeight = 0;\n\n  for (let i = 0; i < children.length; i++) {\n    const {\n      offsetHeight\n    } = children[i];\n\n    if (i < focusIndex) {\n      offset += offsetHeight;\n    }\n\n    allHeight += offsetHeight;\n  }\n\n  rect.offsetTop(-offset);\n  menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n  attachElement(element, rect, menu); // Control not to overflow the screen range\n\n  const menuClientRect = menu.getBoundingClientRect();\n  const scaleDiff = (allHeight - menuClientRect.height) / 2;\n  const orgMenuTop = menuClientRect.top - scaleDiff;\n  let menuTop = orgMenuTop;\n  const menuBottom = menuTop + allHeight;\n  const winBottom = window.innerHeight;\n  const winMargin = 20;\n\n  if (menuBottom > winBottom - winMargin) {\n    const diff = menuBottom - winBottom + winMargin;\n    menuTop -= diff;\n  }\n\n  if (menuTop < 0\n  /*winTop*/\n  + winMargin) {\n    menuTop = winMargin;\n  }\n\n  if (menuTop !== orgMenuTop) {\n    rect.offsetTop(-(orgMenuTop - menuTop)); // re update\n\n    attachElement(element, rect, menu);\n  }\n\n  if (focusEl) {\n    focusEl.focus();\n  }\n\n  menu.classList.remove(HIDDEN_CLASSNAME);\n  menu.classList.add(SHOWN_CLASSNAME);\n}\n\nfunction closeMenu(_grid, _col, _row, menu) {\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  (0, dom_1.disableFocus)(menu);\n}\n\nclass InlineMenuElement {\n  constructor() {\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    this._menu = createMenuElement();\n\n    this._bindMenuEvents();\n\n    let bodyClickListenerId;\n\n    const deregisterBodyClickListener = this._deregisterBodyClickListener = () => handler.off(bodyClickListenerId);\n\n    this._registerBodyClickListener = () => {\n      deregisterBodyClickListener();\n      bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), {\n        capture: true\n      });\n    };\n  }\n\n  dispose() {\n    var _a;\n\n    const menu = this._menu;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._menu;\n    this._beforePropEditor = null;\n    (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\n  }\n\n  attach(grid, editor, col, row, value, record) {\n    const menu = this._menu;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        menu.classList.remove(...classList);\n      }\n    }\n\n    const options = editor.options(record);\n    openMenu(grid, editor, col, row, value, options, menu);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor,\n      options\n    };\n    this._beforePropEditor = editor;\n\n    this._registerBodyClickListener();\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const menu = this._menu;\n      closeMenu(grid, col, row, menu);\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n\n    this._deregisterBodyClickListener();\n  }\n\n  _doChangeValue(valueindex) {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid,\n      col,\n      row,\n      options\n    } = this._activeData;\n    const option = options[Number(valueindex)];\n\n    if (option) {\n      const {\n        value\n      } = option;\n      grid.doChangeValue(col, row, () => value);\n    }\n  }\n\n  _isActive() {\n    const menu = this._menu;\n\n    if (!menu || !menu.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindMenuEvents() {\n    const handler = this._handler;\n    const menu = this._menu;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(menu, \"mousedown\", stopPropagationOnly);\n    handler.on(menu, \"touchstart\", stopPropagationOnly);\n    handler.on(menu, \"dblclick\", stopPropagationOnly);\n    handler.on(menu, \"click\", e => {\n      e.stopPropagation();\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const {\n        valueindex\n      } = item.dataset;\n\n      this._doChangeValue(valueindex || \"\");\n\n      this.detach(true);\n    });\n    handler.on(menu, \"keydown\", e => {\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(menu, item, e);\n      } else if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_UP) {\n        const n = (0, dom_1.findPrevSiblingFocusable)(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_DOWN) {\n        const n = (0, dom_1.findNextSiblingFocusable)(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(menu, item, e);\n      }\n    });\n  }\n\n  _onBodyClick(e) {\n    const el = e.target;\n\n    if (!el) {\n      return;\n    }\n\n    if (this._menu.contains(el)) {\n      return;\n    }\n\n    if (this._isActive()) {\n      const {\n        grid\n      } = this._activeData;\n\n      if (grid.getElement().contains(el)) {\n        return;\n      }\n    }\n\n    this.detach();\n  }\n\n  _onKeydownEnter(_menu, item, e) {\n    var _a;\n\n    const grid = this._isActive() ? this._activeData.grid : null;\n    const {\n      valueindex\n    } = item.dataset;\n\n    this._doChangeValue(valueindex || \"\");\n\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if (grid) {\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n        grid.onKeyDownMove(e);\n      }\n    }\n  }\n\n  _onKeydownTab(menu, item, e) {\n    var _a;\n\n    if (this._isActive()) {\n      const {\n        grid\n      } = this._activeData;\n\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\n        const {\n          valueindex\n        } = item.dataset;\n\n        this._doChangeValue(valueindex || \"\");\n\n        this.detach(true);\n        grid.onKeyDownMove(e);\n        return;\n      }\n    }\n\n    if (!e.shiftKey) {\n      if (!(0, dom_1.findNextSiblingFocusable)(item)) {\n        let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\n\n        if (!(0, dom_1.isFocusable)(n)) {\n          n = (0, dom_1.findNextSiblingFocusable)(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    } else {\n      if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\n        const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\n        let n = items[items.length - 1];\n\n        if (!(0, dom_1.isFocusable)(n)) {\n          n = (0, dom_1.findPrevSiblingFocusable)(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    }\n  }\n\n}\n\nexports.InlineMenuElement = InlineMenuElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.js\":\n/*!************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SmallDialogInputElement = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst input_value_handler_1 = __webpack_require__(/*! ./input-value-handler */ \"./columns/action/internal/input-value-handler.js\");\n\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\n\nfunction _focus(input, handler) {\n  const focus = () => {\n    input.focus();\n    const end = input.value.length;\n\n    try {\n      if (typeof input.selectionStart !== \"undefined\") {\n        input.selectionStart = end;\n        input.selectionEnd = end;\n        return;\n      }\n    } catch (e) {//ignore\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (document.selection) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const range = input.createTextRange();\n      range.collapse();\n      range.moveEnd(\"character\", end);\n      range.moveStart(\"character\", end);\n      range.select();\n    }\n  };\n\n  handler.tryWithOffEvents(input, \"blur\", () => {\n    focus();\n  });\n}\n\nfunction createDialogElement() {\n  __webpack_require__(/*! @/columns/action/internal/SmallDialogInputElement.css */ \"../src/js/columns/action/internal/SmallDialogInputElement.css\");\n\n  const element = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const input = (0, dom_1.createElement)(\"input\", {\n    classList: INPUT_CLASSNAME\n  });\n  input.readOnly = true;\n  input.tabIndex = -1;\n  element.appendChild(input);\n  return element;\n}\n\nfunction bindProps(grid, dialog, input, editor) {\n  const {\n    classList,\n    helperText\n  } = editor;\n\n  if (classList) {\n    dialog.classList.add(...classList);\n  }\n\n  if (helperText && typeof helperText !== \"function\") {\n    dialog.dataset.helperText = helperText;\n  }\n\n  setInputAttrs(editor, grid, input);\n}\n\nfunction unbindProps(_grid, dialog, input, editor) {\n  const {\n    classList\n  } = editor;\n\n  if (classList) {\n    dialog.classList.remove(...classList);\n  }\n\n  delete dialog.dataset.helperText;\n  input.type = \"\";\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    type\n  } = editor;\n  input.type = type || \"\";\n}\n\nclass SmallDialogInputElement {\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._dialog = createDialogElement();\n    this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\n\n    this._bindDialogEvents();\n  }\n\n  dispose() {\n    const dialog = this._dialog;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._dialog; // @ts-expect-error -- ignore\n\n    delete this._input;\n    this._beforePropEditor = null;\n\n    if (dialog.parentElement) {\n      dialog.parentElement.removeChild(dialog);\n    }\n  }\n\n  attach(grid, editor, col, row, value) {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    if (this._beforePropEditor) {\n      unbindProps(grid, dialog, input, this._beforePropEditor);\n    }\n\n    delete dialog.dataset.errorMessage;\n    dialog.classList.remove(SHOWN_CLASSNAME);\n    dialog.classList.add(HIDDEN_CLASSNAME);\n    input.readOnly = true;\n    input.tabIndex = 0;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    dialog.style.top = `${rect.top.toFixed()}px`;\n    dialog.style.left = `${rect.left.toFixed()}px`;\n    dialog.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(dialog);\n    (0, input_value_handler_1.setInputValue)(input, value);\n    input.style.font = grid.font || \"16px sans-serif\";\n    const activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n\n    this._onInputValue(input, activeData);\n\n    if (!utils_1.browser.IE) {\n      _focus(input, handler);\n    } else {\n      // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\n      setTimeout(() => _focus(input, handler));\n    }\n\n    dialog.classList.add(SHOWN_CLASSNAME);\n    dialog.classList.remove(HIDDEN_CLASSNAME);\n    input.readOnly = false;\n    bindProps(grid, dialog, input, editor);\n    this._activeData = activeData;\n    this._beforePropEditor = editor;\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const dialog = this._dialog;\n      const input = this._input;\n      dialog.classList.remove(SHOWN_CLASSNAME);\n      dialog.classList.add(HIDDEN_CLASSNAME);\n      input.readOnly = true;\n      input.tabIndex = -1;\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n    this._beforeValue = null;\n  }\n\n  _doChangeValue() {\n    if (!this._isActive()) {\n      return false;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    return (0, utils_1.then)(this._validate(value), res => {\n      if (res && value === input.value) {\n        const {\n          grid,\n          col,\n          row\n        } = this._activeData;\n        grid.doChangeValue(col, row, () => value);\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  _isActive() {\n    const dialog = this._dialog;\n\n    if (!dialog || !dialog.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindDialogEvents() {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(dialog, \"click\", stopPropagationOnly);\n    handler.on(dialog, \"dblclick\", stopPropagationOnly);\n    handler.on(dialog, \"mousedown\", stopPropagationOnly);\n    handler.on(dialog, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n\n      this._onInputValue(input);\n    });\n\n    const onKeyupAndPress = _e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      this._onInputValue(input);\n    };\n\n    handler.on(input, \"keyup\", onKeyupAndPress);\n    handler.on(input, \"keypress\", onKeyupAndPress);\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else {\n        this._onInputValue(input);\n      }\n    });\n  }\n\n  _onKeydownEnter(e) {\n    if (this._attaching) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    (0, utils_1.then)(this._doChangeValue(), r => {\n      var _a;\n\n      if (r && value === input.value) {\n        const grid = this._isActive() ? this._activeData.grid : null;\n        this.detach(true);\n\n        if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n          grid.onKeyDownMove(e);\n        }\n      }\n    });\n    utils_1.event.cancel(e);\n  }\n\n  _onInputValue(input, activeData) {\n    const before = this._beforeValue;\n    const {\n      value\n    } = input;\n\n    if (before !== value) {\n      this._onInputValueChange(value, activeData);\n    }\n\n    this._beforeValue = value;\n  }\n\n  _onInputValueChange(after, activeData) {\n    activeData = activeData || this._activeData;\n    const dialog = this._dialog;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = activeData;\n\n    if (typeof editor.helperText === \"function\") {\n      const helperText = editor.helperText(after, {\n        grid,\n        col,\n        row\n      });\n\n      if (helperText) {\n        dialog.dataset.helperText = helperText;\n      } else {\n        delete dialog.dataset.helperText;\n      }\n    }\n\n    if (\"errorMessage\" in dialog.dataset) {\n      this._validate(after, true);\n    }\n  }\n\n  _validate(value, inputOnly) {\n    const dialog = this._dialog;\n    const input = this._input;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = this._activeData;\n    let message = \"\";\n\n    if (editor.inputValidator) {\n      message = editor.inputValidator(value, {\n        grid,\n        col,\n        row\n      });\n    }\n\n    return (0, utils_1.then)(message, message => {\n      if (!message && editor.validator && !inputOnly) {\n        message = editor.validator(value, {\n          grid,\n          col,\n          row\n        });\n      }\n\n      return (0, utils_1.then)(message, message => {\n        if (message && value === input.value) {\n          dialog.dataset.errorMessage = message;\n        } else {\n          delete dialog.dataset.errorMessage;\n        }\n\n        return !message;\n      });\n    });\n  }\n\n}\n\nexports.SmallDialogInputElement = SmallDialogInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/input-value-handler.js\":\n/*!********************************************************!*\\\n  !*** ./columns/action/internal/input-value-handler.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setInputValue = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nfunction setInputValue(input, value) {\n  const sign = input.type === \"number\" && value === \"-\";\n\n  if (sign) {\n    // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\n    input.type = \"\";\n    let handler = new EventHandler_1.EventHandler();\n\n    const dispose = () => {\n      if (handler) {\n        handler.dispose();\n        handler = null;\n      }\n    };\n\n    handler.once(input, \"input\", _e => {\n      input.type = \"number\";\n      dispose();\n    });\n    handler.once(input, \"blur\", _e => {\n      dispose();\n    });\n  }\n\n  input.value = value !== null && value !== void 0 ? value : \"\";\n}\n\nexports.setInputValue = setInputValue;\n\n/***/ }),\n\n/***/ \"./columns/indicator/handlers.js\":\n/*!***************************************!*\\\n  !*** ./columns/indicator/handlers.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDrawIndicator = void 0;\n\nconst triangle_1 = __webpack_require__(/*! ./triangle */ \"./columns/indicator/triangle.js\");\n\nfunction getDrawIndicator(indicatorStyle) {\n  const {\n    style\n  } = indicatorStyle;\n\n  if (style === \"triangle\") {\n    return triangle_1.drawTriangleIndicator;\n  }\n\n  return null;\n}\n\nexports.getDrawIndicator = getDrawIndicator;\n\n/***/ }),\n\n/***/ \"./columns/indicator/triangle.js\":\n/*!***************************************!*\\\n  !*** ./columns/indicator/triangle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawTriangleIndicator = void 0;\nconst KIND_PROCESS_MAP = {\n  [0\n  /* DrawIndicatorKind.topLeft */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.topLeftColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.topLeftSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseLeft = rect.left + 1;\n      const baseTop = rect.top + 1;\n      ctx.moveTo(baseLeft, baseTop);\n      ctx.lineTo(baseLeft + size, baseTop);\n      ctx.lineTo(baseLeft, baseTop + size);\n    }\n\n  },\n  [1\n  /* DrawIndicatorKind.topRight */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.topRightColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.topRightSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseRight = rect.right - 2;\n      const baseTop = rect.top + 1;\n      ctx.moveTo(baseRight, baseTop);\n      ctx.lineTo(baseRight - size, baseTop);\n      ctx.lineTo(baseRight, baseTop + size);\n    }\n\n  },\n  [2\n  /* DrawIndicatorKind.bottomRight */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.bottomRightColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.bottomRightSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseRight = rect.right - 2;\n      const baseBottom = rect.bottom - 2;\n      ctx.moveTo(baseRight, baseBottom);\n      ctx.lineTo(baseRight - size, baseBottom);\n      ctx.lineTo(baseRight, baseBottom - size);\n    }\n\n  },\n  [3\n  /* DrawIndicatorKind.bottomLeft */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.bottomLeftColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.bottomLeftSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseLeft = rect.left + 1;\n      const baseBottom = rect.bottom - 2;\n      ctx.moveTo(baseLeft, baseBottom);\n      ctx.lineTo(baseLeft + size, baseBottom);\n      ctx.lineTo(baseLeft, baseBottom - size);\n    }\n\n  }\n};\n\nfunction drawTriangleIndicator(context, style, kind, helper) {\n  const process = KIND_PROCESS_MAP[kind];\n\n  if (!process) {\n    return;\n  }\n\n  helper.drawBorderWithClip(context, ctx => {\n    const rect = context.getRect();\n    const color = style.color || helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\n    const size = style.size && Number(style.size) || process.themeSize(helper) || rect.height / 6; // draw triangle\n\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    process.drawPath(ctx, rect, size);\n    ctx.closePath();\n    ctx.fill();\n  });\n}\n\nexports.drawTriangleIndicator = drawTriangleIndicator;\n\n/***/ }),\n\n/***/ \"./columns/message/BaseMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/BaseMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseMessage = void 0;\n\nclass BaseMessage {\n  constructor(grid) {\n    this._messageElement = null;\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachMessageElement();\n\n    if (this._messageElement) {\n      this._messageElement.dispose();\n    }\n\n    this._messageElement = null;\n  }\n\n  _getMessageElement() {\n    return this._messageElement || (this._messageElement = this.createMessageElementInternal());\n  }\n\n  attachMessageElement(col, row, message) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.attach(this._grid, col, row, message);\n  }\n\n  moveMessageElement(col, row) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.move(this._grid, col, row);\n  }\n\n  detachMessageElement() {\n    const messageElement = this._getMessageElement();\n\n    messageElement._detach();\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    this.drawCellMessageInternal(message, context, style, helper, grid, info);\n  }\n\n}\n\nexports.BaseMessage = BaseMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/ErrorMessage.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/ErrorMessage.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst ErrorMessageElement_1 = __webpack_require__(/*! ./internal/ErrorMessageElement */ \"./columns/message/internal/ErrorMessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst RED_A100 = \"#ff8a80\";\n\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new ErrorMessageElement_1.ErrorMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.ErrorMessage = ErrorMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/InfoMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/InfoMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InfoMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst MessageElement_1 = __webpack_require__(/*! ./internal/MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst GREY_L2 = \"#e0e0e0\";\n\nclass InfoMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new MessageElement_1.MessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawInformationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.InfoMessage = InfoMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/MessageHandler.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/MessageHandler.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageHandler = exports.hasMessage = void 0;\n\nconst ErrorMessage_1 = __webpack_require__(/*! ./ErrorMessage */ \"./columns/message/ErrorMessage.js\");\n\nconst InfoMessage_1 = __webpack_require__(/*! ./InfoMessage */ \"./columns/message/InfoMessage.js\");\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ../../list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst WarningMessage_1 = __webpack_require__(/*! ./WarningMessage */ \"./columns/message/WarningMessage.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst EMPTY_MESSAGE = {\n  type: \"error\",\n  message: null\n};\nconst MESSAGE_INSTANCE_FACTORY = {\n  error(grid) {\n    return new ErrorMessage_1.ErrorMessage(grid);\n  },\n\n  info(grid) {\n    return new InfoMessage_1.InfoMessage(grid);\n  },\n\n  warning(grid) {\n    return new WarningMessage_1.WarningMessage(grid);\n  }\n\n};\n\nfunction normalizeMessage(message) {\n  if (!message || (0, utils_1.isPromise)(message)) {\n    return EMPTY_MESSAGE;\n  }\n\n  if (typeof message === \"string\") {\n    return {\n      type: \"error\",\n      message,\n      original: message\n    };\n  }\n\n  const type = message.type || \"error\";\n\n  if (type && type in MESSAGE_INSTANCE_FACTORY) {\n    return {\n      type: type.toLowerCase(),\n      message: message.message,\n      original: message\n    };\n  }\n\n  return {\n    type: \"error\",\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    message: `${message}`,\n    original: message\n  };\n}\n\nfunction hasMessage(message) {\n  return !!normalizeMessage(message).message;\n}\n\nexports.hasMessage = hasMessage;\n\nclass MessageHandler {\n  constructor(grid, getMessage) {\n    this._attachInfo = null;\n    this._grid = grid;\n    this._messageInstances = {};\n\n    this._bindGridEvent(grid, getMessage);\n  }\n\n  dispose() {\n    var _a;\n\n    const messageInstances = this._messageInstances;\n\n    for (const k in messageInstances) {\n      (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\n    } // @ts-expect-error -- ignore\n\n\n    delete this._messageInstances; // @ts-expect-error -- ignore\n\n    delete this._attachInfo;\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    if (!hasMessage(message)) {\n      return;\n    }\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\n  }\n\n  _attach(col, row, message) {\n    const info = this._attachInfo;\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    if (info && info.instance !== instance) {\n      info.instance.detachMessageElement();\n    }\n\n    instance.attachMessageElement(col, row, normalizeMessage(message));\n    this._attachInfo = {\n      col,\n      row,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || info.col !== col || info.row !== row) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveMessageElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachMessageElement();\n    this._attachInfo = null;\n  }\n\n  _bindGridEvent(grid, getMessage) {\n    const onSelectMessage = sel => {\n      const setMessageData = msg => {\n        if (!hasMessage(msg)) {\n          this._detach();\n        } else {\n          this._attach(sel.col, sel.row, msg);\n        }\n      };\n\n      const message = getMessage(sel.col, sel.row);\n\n      if ((0, utils_1.isPromise)(message)) {\n        this._detach();\n\n        message.then(msg => {\n          const newSel = grid.selection.select;\n\n          if (newSel.col !== sel.col || newSel.row !== sel.row) {\n            return;\n          }\n\n          setMessageData(msg);\n        });\n        return;\n      }\n\n      setMessageData(message);\n    };\n\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (!e.selected) {\n        return;\n      }\n\n      if (e.before.col === e.col && e.before.row === e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const sel = grid.selection.select;\n\n      this._move(sel.col, sel.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      if (!grid.hasFocusGrid()) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (sel.col !== e.col || sel.row !== e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, _e => {\n      const sel = grid.selection.select;\n      onSelectMessage(sel);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, _e => {\n      this._detach();\n    });\n  }\n\n  _getMessageInstanceOfMessage(message) {\n    const messageInstances = this._messageInstances;\n    const {\n      type\n    } = normalizeMessage(message);\n    return messageInstances[type] || (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid));\n  }\n\n}\n\nexports.MessageHandler = MessageHandler;\n\n/***/ }),\n\n/***/ \"./columns/message/WarningMessage.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/WarningMessage.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WarningMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst WarningMessageElement_1 = __webpack_require__(/*! ./internal/WarningMessageElement */ \"./columns/message/internal/WarningMessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\n\nclass WarningMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new WarningMessageElement_1.WarningMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.WarningMessage = WarningMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/ErrorMessageElement.js\":\n/*!*********************************************************!*\\\n  !*** ./columns/message/internal/ErrorMessageElement.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorMessageElement = void 0;\n\nconst MessageElement_1 = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(/*! @/columns/message/internal/ErrorMessageElement.css */ \"../src/js/columns/message/internal/ErrorMessageElement.css\");\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.ErrorMessageElement = ErrorMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/MessageElement.js\":\n/*!****************************************************!*\\\n  !*** ./columns/message/internal/MessageElement.js ***!\n  \\****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = \"cheetah-grid__message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createMessageDomElement() {\n  __webpack_require__(/*! @/columns/message/internal/MessageElement.css */ \"../src/js/columns/message/internal/MessageElement.css\");\n\n  const rootElement = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = (0, dom_1.createElement)(\"span\", {\n    classList: [MESSAGE_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass MessageElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createMessageDomElement();\n    this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._rootElement; // @ts-expect-error -- ignore\n\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, message) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = message.message;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      offsetHeight,\n      offsetWidth\n    } = element;\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${left.toFixed()}px`;\n    rootElement.style.width = `${width.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.MessageElement = MessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/WarningMessageElement.js\":\n/*!***********************************************************!*\\\n  !*** ./columns/message/internal/WarningMessageElement.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WarningMessageElement = void 0;\n\nconst MessageElement_1 = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass WarningMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(/*! @/columns/message/internal/WarningMessageElement.css */ \"../src/js/columns/message/internal/WarningMessageElement.css\");\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.WarningMessageElement = WarningMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/messageUtils.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/messageUtils.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\n\nconst Rect_1 = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\n\nfunction drawExclamationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color,\n    boxWidth,\n    markHeight\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - (Number(boxWidth) || 24);\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw exclamation mark\n\n  const fillColor = color;\n  const height = Number(markHeight) || 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5 * 3), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 4, width, height / 5), context, {\n    fillColor\n  });\n}\n\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\n\nfunction drawInformationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color,\n    boxWidth,\n    markHeight\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - (Number(boxWidth) || 24);\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw i mark\n\n  const fillColor = color;\n  const height = Number(markHeight) || 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 2, width, height / 5 * 3), context, {\n    fillColor\n  });\n}\n\nexports.drawInformationMarkBox = drawInformationMarkBox;\n\n/***/ }),\n\n/***/ \"./columns/style.js\":\n/*!**************************!*\\\n  !*** ./columns/style.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nObject.defineProperty(exports, \"BaseStyle\", {\n  enumerable: true,\n  get: function () {\n    return BaseStyle_1.BaseStyle;\n  }\n});\n\nconst ButtonStyle_1 = __webpack_require__(/*! ./style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\nObject.defineProperty(exports, \"ButtonStyle\", {\n  enumerable: true,\n  get: function () {\n    return ButtonStyle_1.ButtonStyle;\n  }\n});\n\nconst CheckStyle_1 = __webpack_require__(/*! ./style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\nObject.defineProperty(exports, \"CheckStyle\", {\n  enumerable: true,\n  get: function () {\n    return CheckStyle_1.CheckStyle;\n  }\n});\n\nconst IconStyle_1 = __webpack_require__(/*! ./style/IconStyle */ \"./columns/style/IconStyle.js\");\n\nObject.defineProperty(exports, \"IconStyle\", {\n  enumerable: true,\n  get: function () {\n    return IconStyle_1.IconStyle;\n  }\n});\n\nconst ImageStyle_1 = __webpack_require__(/*! ./style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\nObject.defineProperty(exports, \"ImageStyle\", {\n  enumerable: true,\n  get: function () {\n    return ImageStyle_1.ImageStyle;\n  }\n});\n\nconst MenuStyle_1 = __webpack_require__(/*! ./style/MenuStyle */ \"./columns/style/MenuStyle.js\");\n\nObject.defineProperty(exports, \"MenuStyle\", {\n  enumerable: true,\n  get: function () {\n    return MenuStyle_1.MenuStyle;\n  }\n});\n\nconst MultilineTextStyle_1 = __webpack_require__(/*! ./style/MultilineTextStyle */ \"./columns/style/MultilineTextStyle.js\");\n\nObject.defineProperty(exports, \"MultilineTextStyle\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextStyle_1.MultilineTextStyle;\n  }\n});\n\nconst NumberStyle_1 = __webpack_require__(/*! ./style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\nObject.defineProperty(exports, \"NumberStyle\", {\n  enumerable: true,\n  get: function () {\n    return NumberStyle_1.NumberStyle;\n  }\n});\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(/*! ./style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", {\n  enumerable: true,\n  get: function () {\n    return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n  }\n});\n\nconst RadioStyle_1 = __webpack_require__(/*! ./style/RadioStyle */ \"./columns/style/RadioStyle.js\");\n\nObject.defineProperty(exports, \"RadioStyle\", {\n  enumerable: true,\n  get: function () {\n    return RadioStyle_1.RadioStyle;\n  }\n});\n\nconst Style_1 = __webpack_require__(/*! ./style/Style */ \"./columns/style/Style.js\");\n\nObject.defineProperty(exports, \"Style\", {\n  enumerable: true,\n  get: function () {\n    return Style_1.Style;\n  }\n});\nconst {\n  EVENT_TYPE\n} = BaseStyle_1.BaseStyle;\nexports.EVENT_TYPE = EVENT_TYPE;\n\nfunction of(columnStyle, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nrecord, StyleClassDef = Style_1.Style, col, row) {\n  if (columnStyle) {\n    if (columnStyle instanceof BaseStyle_1.BaseStyle) {\n      return columnStyle;\n    } else if (typeof columnStyle === \"function\") {\n      return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\n    } else if (record && columnStyle in record) {\n      return of(record[columnStyle], record, StyleClassDef, col, row);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return new StyleClassDef(columnStyle);\n  } else {\n    return StyleClassDef.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/style/BaseStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/BaseStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseStyle = void 0;\n\nconst EventTarget_1 = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\nconst STYLE_EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return STYLE_EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  constructor({\n    bgColor,\n    indicatorTopLeft,\n    indicatorTopRight,\n    indicatorBottomRight,\n    indicatorBottomLeft\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n    this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\n    this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\n    this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\n    this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  get indicatorTopLeft() {\n    return this._indicatorTopLeft;\n  }\n\n  set indicatorTopLeft(indicatorTopLeft) {\n    this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\n    this.doChangeStyle();\n  }\n\n  get indicatorTopRight() {\n    return this._indicatorTopRight;\n  }\n\n  set indicatorTopRight(indicatorTopRight) {\n    this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\n    this.doChangeStyle();\n  }\n\n  get indicatorBottomRight() {\n    return this._indicatorBottomRight;\n  }\n\n  set indicatorBottomRight(indicatorBottomRight) {\n    this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\n    this.doChangeStyle();\n  }\n\n  get indicatorBottomLeft() {\n    return this._indicatorBottomLeft;\n  }\n\n  set indicatorBottomLeft(indicatorBottomLeft) {\n    this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\nfunction normalizeIndicator(indicator) {\n  if (typeof indicator === \"string\") {\n    return {\n      style: indicator\n    };\n  }\n\n  return indicator;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BranchGraphStyle.js\":\n/*!*******************************************!*\\\n  !*** ./columns/style/BranchGraphStyle.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BranchGraphStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\n  switch (index % 3) {\n    case 0:\n      return \"#979797\";\n\n    case 1:\n      return \"#008fb5\";\n\n    case 2:\n      return \"#f1c109\";\n\n    default:\n  }\n\n  return \"#979797\";\n};\n\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BranchGraphStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n    this._margin = style.margin || 4;\n    this._circleSize = style.circleSize || 16;\n    this._branchLineWidth = style.branchLineWidth || 4;\n    this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\n  }\n\n  get branchColors() {\n    return this._branchColors;\n  }\n\n  set branchColors(branchColors) {\n    this._branchColors = branchColors;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  get circleSize() {\n    return this._circleSize;\n  }\n\n  set circleSize(circleSize) {\n    this._circleSize = circleSize;\n    this.doChangeStyle();\n  }\n\n  get branchLineWidth() {\n    return this._branchLineWidth;\n  }\n\n  set branchLineWidth(branchLineWidth) {\n    this._branchLineWidth = branchLineWidth;\n    this.doChangeStyle();\n  }\n\n  get mergeStyle() {\n    return this._mergeStyle;\n  }\n\n  set mergeStyle(mergeStyle) {\n    this._mergeStyle = mergeStyle;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new BranchGraphStyle(this);\n  }\n\n}\n\nexports.BranchGraphStyle = BranchGraphStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ButtonStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/ButtonStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass ButtonStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ButtonStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      buttonBgColor\n    } = style;\n    this._buttonBgColor = buttonBgColor;\n  }\n\n  get buttonBgColor() {\n    return this._buttonBgColor;\n  }\n\n  set buttonBgColor(buttonBgColor) {\n    this._buttonBgColor = buttonBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ButtonStyle(this);\n  }\n\n}\n\nexports.ButtonStyle = ButtonStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/CheckStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/CheckStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckStyle(this);\n  }\n\n}\n\nexports.CheckStyle = CheckStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/IconStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/IconStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IconStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass IconStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new IconStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n  }\n\n  clone() {\n    return new IconStyle(this);\n  }\n\n}\n\nexports.IconStyle = IconStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ImageStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/ImageStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ImageStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    this._imageSizing = style.imageSizing;\n    this._margin = style.margin || 4;\n  }\n\n  get imageSizing() {\n    return this._imageSizing;\n  }\n\n  set imageSizing(imageSizing) {\n    this._imageSizing = imageSizing;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ImageStyle(this);\n  }\n\n}\n\nexports.ImageStyle = ImageStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/MenuStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/MenuStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MenuStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nlet defaultStyle;\n\nclass MenuStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MenuStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    const {\n      appearance\n    } = style;\n    this._appearance = appearance;\n  }\n\n  get appearance() {\n    return this._appearance || \"menulist-button\";\n  }\n\n  set appearance(appearance) {\n    this._appearance = appearance;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new MenuStyle(this);\n  }\n\n}\n\nexports.MenuStyle = MenuStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/MultilineTextStyle.js\":\n/*!*********************************************!*\\\n  !*** ./columns/style/MultilineTextStyle.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass MultilineTextStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textBaseline: \"top\"\n    }));\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  clone() {\n    return new MultilineTextStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.MultilineTextStyle = MultilineTextStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/NumberStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/NumberStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass NumberStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new NumberStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"right\"\n    }));\n  }\n\n  clone() {\n    return new NumberStyle(this);\n  }\n\n}\n\nexports.NumberStyle = NumberStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/PercentCompleteBarStyle.js\":\n/*!**************************************************!*\\\n  !*** ./columns/style/PercentCompleteBarStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PercentCompleteBarStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nlet defaultStyle;\n\nconst DEFAULT_BAR_COLOR = num => {\n  if (num > 80) {\n    return \"#20a8d8\";\n  }\n\n  if (num > 50) {\n    return \"#4dbd74\";\n  }\n\n  if (num > 20) {\n    return \"#ffc107\";\n  }\n\n  return \"#f86c6b\";\n};\n\nclass PercentCompleteBarStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new PercentCompleteBarStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._barColor = style.barColor || DEFAULT_BAR_COLOR;\n    this._barBgColor = style.barBgColor || \"#f0f3f5\";\n    this._barHeight = style.barHeight || 3;\n  }\n\n  get barColor() {\n    return this._barColor;\n  }\n\n  set barColor(barColor) {\n    this._barColor = barColor;\n    this.doChangeStyle();\n  }\n\n  get barBgColor() {\n    return this._barBgColor;\n  }\n\n  set barBgColor(barBgColor) {\n    this._barBgColor = barBgColor;\n    this.doChangeStyle();\n  }\n\n  get barHeight() {\n    return this._barHeight;\n  }\n\n  set barHeight(barHeight) {\n    this._barHeight = barHeight;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new PercentCompleteBarStyle(this);\n  }\n\n}\n\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/RadioStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/RadioStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new RadioStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    } = style;\n    this._checkColor = checkColor;\n    this._uncheckBorderColor = uncheckBorderColor;\n    this._checkBorderColor = checkBorderColor;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n  }\n\n  get checkColor() {\n    return this._checkColor;\n  }\n\n  set checkColor(checkColor) {\n    this._checkColor = checkColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBorderColor() {\n    return this._uncheckBorderColor;\n  }\n\n  set uncheckBorderColor(uncheckBorderColor) {\n    this._uncheckBorderColor = uncheckBorderColor;\n    this.doChangeStyle();\n  }\n\n  get checkBorderColor() {\n    return this._checkBorderColor;\n  }\n\n  set checkBorderColor(checkBorderColor) {\n    this._checkBorderColor = checkBorderColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new RadioStyle(this);\n  }\n\n}\n\nexports.RadioStyle = RadioStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/StdBaseStyle.js\":\n/*!***************************************!*\\\n  !*** ./columns/style/StdBaseStyle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdBaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/Style.js\":\n/*!********************************!*\\\n  !*** ./columns/style/Style.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Style = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nlet defaultStyle;\n\nclass Style extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._padding = style.padding;\n    this._textOverflow = style.textOverflow || \"clip\";\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get padding() {\n    return this._padding;\n  }\n\n  set padding(padding) {\n    this._padding = padding;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n\n/***/ \"./columns/type.js\":\n/*!*************************!*\\\n  !*** ./columns/type.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\n\nconst BranchGraphColumn_1 = __webpack_require__(/*! ./type/BranchGraphColumn */ \"./columns/type/BranchGraphColumn.js\");\n\nObject.defineProperty(exports, \"BranchGraphColumn\", {\n  enumerable: true,\n  get: function () {\n    return BranchGraphColumn_1.BranchGraphColumn;\n  }\n});\n\nconst ButtonColumn_1 = __webpack_require__(/*! ./type/ButtonColumn */ \"./columns/type/ButtonColumn.js\");\n\nObject.defineProperty(exports, \"ButtonColumn\", {\n  enumerable: true,\n  get: function () {\n    return ButtonColumn_1.ButtonColumn;\n  }\n});\n\nconst CheckColumn_1 = __webpack_require__(/*! ./type/CheckColumn */ \"./columns/type/CheckColumn.js\");\n\nObject.defineProperty(exports, \"CheckColumn\", {\n  enumerable: true,\n  get: function () {\n    return CheckColumn_1.CheckColumn;\n  }\n});\n\nconst Column_1 = __webpack_require__(/*! ./type/Column */ \"./columns/type/Column.js\");\n\nObject.defineProperty(exports, \"Column\", {\n  enumerable: true,\n  get: function () {\n    return Column_1.Column;\n  }\n});\n\nconst IconColumn_1 = __webpack_require__(/*! ./type/IconColumn */ \"./columns/type/IconColumn.js\");\n\nObject.defineProperty(exports, \"IconColumn\", {\n  enumerable: true,\n  get: function () {\n    return IconColumn_1.IconColumn;\n  }\n});\n\nconst ImageColumn_1 = __webpack_require__(/*! ./type/ImageColumn */ \"./columns/type/ImageColumn.js\");\n\nObject.defineProperty(exports, \"ImageColumn\", {\n  enumerable: true,\n  get: function () {\n    return ImageColumn_1.ImageColumn;\n  }\n});\n\nconst MenuColumn_1 = __webpack_require__(/*! ./type/MenuColumn */ \"./columns/type/MenuColumn.js\");\n\nObject.defineProperty(exports, \"MenuColumn\", {\n  enumerable: true,\n  get: function () {\n    return MenuColumn_1.MenuColumn;\n  }\n});\n\nconst MultilineTextColumn_1 = __webpack_require__(/*! ./type/MultilineTextColumn */ \"./columns/type/MultilineTextColumn.js\");\n\nObject.defineProperty(exports, \"MultilineTextColumn\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextColumn_1.MultilineTextColumn;\n  }\n});\n\nconst NumberColumn_1 = __webpack_require__(/*! ./type/NumberColumn */ \"./columns/type/NumberColumn.js\");\n\nObject.defineProperty(exports, \"NumberColumn\", {\n  enumerable: true,\n  get: function () {\n    return NumberColumn_1.NumberColumn;\n  }\n});\n\nconst PercentCompleteBarColumn_1 = __webpack_require__(/*! ./type/PercentCompleteBarColumn */ \"./columns/type/PercentCompleteBarColumn.js\");\n\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", {\n  enumerable: true,\n  get: function () {\n    return PercentCompleteBarColumn_1.PercentCompleteBarColumn;\n  }\n});\n\nconst RadioColumn_1 = __webpack_require__(/*! ./type/RadioColumn */ \"./columns/type/RadioColumn.js\");\n\nObject.defineProperty(exports, \"RadioColumn\", {\n  enumerable: true,\n  get: function () {\n    return RadioColumn_1.RadioColumn;\n  }\n});\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Column_1.Column(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  NUMBER: new NumberColumn_1.NumberColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckColumn_1.CheckColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  RADIO: new RadioColumn_1.RadioColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  BUTTON: new ButtonColumn_1.ButtonColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  IMAGE: new ImageColumn_1.ImageColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn()\n};\n\nfunction of(columnType) {\n  if (!columnType) {\n    return TYPES.DEFAULT;\n  } else if (typeof columnType === \"string\") {\n    const key = columnType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return columnType;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/type/BaseColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/BaseColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseColumn = void 0;\n\nconst styleContents = __importStar(__webpack_require__(/*! ../style */ \"./columns/style.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseStyle_1 = __webpack_require__(/*! ../style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst handlers_1 = __webpack_require__(/*! ../indicator/handlers */ \"./columns/indicator/handlers.js\");\n\nconst {\n  setReadonly\n} = utils_1.obj;\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\n\nfunction isFadeinWhenCallbackInPromise(column, grid) {\n  if (column.fadeinWhenCallbackInPromise != null) {\n    return column.fadeinWhenCallbackInPromise;\n  }\n\n  return !!grid.configure(\"fadeinWhenCallbackInPromise\");\n}\n\nfunction getFadeinState(grid) {\n  let state = grid[COLUMN_FADEIN_STATE_ID];\n\n  if (!state) {\n    state = {\n      cells: {}\n    };\n    setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\n  }\n\n  return state;\n}\n\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n  return point => {\n    const state = getFadeinState(grid);\n    const stateKey = `${row}:${col}`;\n\n    if (point === 1) {\n      delete state.cells[stateKey];\n    } else {\n      state.cells[stateKey] = {\n        opacity: point\n      };\n    }\n\n    drawCellBase();\n    drawInternal();\n    const cellState = state.cells[stateKey];\n\n    if (cellState) {\n      //\n      const ctx = context.getContext();\n      ctx.globalAlpha = 1 - cellState.opacity;\n\n      try {\n        drawCellBase();\n      } finally {\n        ctx.globalAlpha = 1;\n      }\n    }\n  };\n}\n\nconst fadeinMgr = {\n  animate(grid, col, row, context, drawInternal, drawCellBase) {\n    // fadein animation\n    const state = getFadeinState(grid);\n    const activeFadeins = [_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase)];\n    state.activeFadeins = activeFadeins;\n    (0, animate_1.animate)(500, point => {\n      activeFadeins.forEach(f => f(point));\n\n      if (point === 1) {\n        delete state.activeFadeins;\n      }\n    });\n  },\n\n  margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n    const state = getFadeinState(grid);\n\n    if (state.activeFadeins) {\n      state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n    } else {\n      drawInternal();\n    }\n  }\n\n};\n\nclass BaseColumn {\n  constructor(option) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n    //Promisecallback\n\n    this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\n  }\n\n  get fadeinWhenCallbackInPromise() {\n    return this._fadeinWhenCallbackInPromise;\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    var _a;\n\n    const {\n      style,\n      getRecord,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase();\n    const record = getRecord();\n    let promise;\n\n    if ((0, utils_1.isPromise)(record)) {\n      promise = record;\n    } else if ((0, utils_1.isPromise)(cellValue)) {\n      promise = cellValue;\n    } else {\n      const msg = info.getMessage();\n\n      if ((0, utils_1.isPromise)(msg)) {\n        promise = msg;\n      }\n    } //\n\n\n    if (promise) {\n      const start = Date.now();\n      return Promise.all([record, cellValue, promise.then(() => cellValue).then(() => info.getMessage())]).then(({\n        0: record,\n        1: val,\n        2: message\n      }) => {\n        const currentContext = context.toCurrentContext();\n        const drawRect = currentContext.getDrawRect();\n\n        if (!drawRect) {\n          return;\n        }\n\n        const time = Date.now() - start;\n\n        const drawInternal = () => {\n          const currentContext = context.toCurrentContext();\n          const drawRect = currentContext.getDrawRect();\n\n          if (!drawRect) {\n            return;\n          }\n\n          const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\n          this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\n          this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\n          this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\n        };\n\n        if (!isFadeinWhenCallbackInPromise(this, grid)) {\n          drawInternal(); //\n        } else {\n          const {\n            col,\n            row\n          } = context;\n\n          if (time < 80) {\n            //80msPromiseCallback\n            fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n          } else {\n            //\n            fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n          }\n        }\n      });\n    } else {\n      const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\n      this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\n      this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n      this.drawIndicatorsInternal(context, actStyle, helper, grid, info); //\n\n      const {\n        col,\n        row\n      } = context;\n      const stateKey = `${col}:${row}`;\n      const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\n\n      if (cellState) {\n        const ctx = context.getContext();\n        ctx.globalAlpha = 1 - cellState.opacity;\n\n        try {\n          drawCellBase();\n        } finally {\n          ctx.globalAlpha = 1;\n        }\n      }\n\n      return undefined;\n    }\n  }\n\n  convertInternal(value) {\n    return value != null ? value : \"\";\n  }\n\n  drawMessageInternal(message, context, style, helper, grid, info) {\n    info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\n  }\n\n  drawIndicatorsInternal(context, style, helper, grid, info) {\n    var _a;\n\n    const {\n      indicatorTopLeft,\n      indicatorTopRight,\n      indicatorBottomRight,\n      indicatorBottomLeft\n    } = style;\n\n    for (const [indicatorStyle, kind] of [[indicatorTopLeft, 0\n    /* DrawIndicatorKind.topLeft */\n    ], [indicatorTopRight, 1\n    /* DrawIndicatorKind.topRight */\n    ], [indicatorBottomRight, 2\n    /* DrawIndicatorKind.bottomRight */\n    ], [indicatorBottomLeft, 3\n    /* DrawIndicatorKind.bottomLeft */\n    ]]) {\n      if (indicatorStyle) {\n        (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\n      }\n    }\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  getCopyCellValue(value, _grid, _cell) {\n    return value;\n  }\n\n}\n\nexports.BaseColumn = BaseColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/BranchGraphColumn.js\":\n/*!*******************************************!*\\\n  !*** ./columns/type/BranchGraphColumn.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BranchGraphColumn = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst BranchGraphStyle_1 = __webpack_require__(/*! ../style/BranchGraphStyle */ \"./columns/style/BranchGraphStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\n\nfunction getAllColumnData(grid, field, callback) {\n  const {\n    dataSource\n  } = grid;\n  const allData = [];\n  let promise;\n\n  for (let index = 0; index < dataSource.length; index++) {\n    const data = dataSource.getField(index, field);\n\n    if ((0, utils_1.isPromise)(data)) {\n      const dataIndex = allData.length;\n      allData.push(undefined);\n\n      if (!promise) {\n        promise = data.then(d => {\n          allData[dataIndex] = d;\n        });\n      } else {\n        promise = promise.then(() => data).then(d => {\n          allData[dataIndex] = d;\n        });\n      }\n    } else {\n      allData.push(data);\n    }\n  }\n\n  if (promise) {\n    promise.then(() => callback(allData));\n  } else {\n    callback(allData);\n  }\n}\n\nclass BranchLine {\n  constructor({\n    fromIndex,\n    toIndex,\n    colorIndex,\n    point\n  }) {\n    this.fromIndex = fromIndex;\n    this.toIndex = toIndex;\n    this.colorIndex = colorIndex;\n    this.point = point;\n  }\n\n}\n\nclass BranchPoint {\n  constructor({\n    index,\n    commit = false,\n    lines = [],\n    tag\n  }) {\n    this.index = index;\n    this.commit = commit;\n    this.lines = lines;\n    this.tag = tag;\n  }\n\n  static mergeLines(lines) {\n    const result = lines.filter(l => l.fromIndex != null && l.toIndex != null);\n    const froms = lines.filter(l => l.fromIndex != null && l.toIndex == null);\n    const tos = lines.filter(l => l.fromIndex == null && l.toIndex != null);\n    froms.forEach(f => {\n      for (let i = 0; i < tos.length; i++) {\n        const t = tos[i];\n\n        if (t.point) {\n          continue;\n        }\n\n        if (f.colorIndex === t.colorIndex) {\n          f.toIndex = t.toIndex;\n          tos.splice(i, 1);\n          break;\n        }\n      }\n\n      result.push(f);\n    });\n    return result.concat(tos);\n  }\n\n  static merge(a, b) {\n    if (!a) {\n      return b;\n    }\n\n    return new BranchPoint({\n      index: a.index,\n      commit: a.commit || b.commit,\n      lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n      tag: a.tag || b.tag\n    });\n  }\n\n}\n\nfunction joinLine(timeline, branchIndex) {\n  const reverse = [...timeline].reverse();\n\n  for (let i = 0; i < reverse.length; i++) {\n    const f = reverse[i][branchIndex];\n\n    if (f) {\n      f.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\n        toIndex: branchIndex,\n        colorIndex: branchIndex\n      })]));\n\n      for (let j = 0; j < i; j++) {\n        const tl = reverse[j];\n        tl[branchIndex] = new BranchPoint({\n          index: branchIndex,\n          lines: [new BranchLine({\n            fromIndex: branchIndex,\n            toIndex: branchIndex,\n            colorIndex: branchIndex\n          })]\n        });\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction branch({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = from != null ? branches.indexOf(from) : -1;\n  let toIndex = branches.indexOf(to);\n\n  if (toIndex < 0) {\n    toIndex = branches.length;\n    branches.push(to);\n  }\n\n  function findBranchRootIndex() {\n    for (let index = timeline.length - 1; index >= 0; index--) {\n      const tl = timeline[index];\n      const from = tl[fromIndex];\n\n      if (from && from.commit) {\n        return index;\n      }\n    }\n\n    return -1;\n  }\n\n  if (fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex\n    });\n  } else {\n    const fromTargetIndex = findBranchRootIndex();\n\n    if (fromTargetIndex === -1) {\n      return null;\n    }\n\n    const branchTargetFromIndex = fromTargetIndex + 1;\n    const branchPoint = new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        fromIndex,\n        colorIndex: toIndex\n      })]\n    });\n    let point;\n    let result = null;\n\n    if (branchTargetFromIndex < timeline.length) {\n      const targetLine = timeline[branchTargetFromIndex];\n      point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n    } else {\n      point = branchPoint;\n      result = branchPoint;\n    }\n\n    const from = timeline[fromTargetIndex][fromIndex];\n    from.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\n      toIndex,\n      colorIndex: toIndex,\n      point\n    })]));\n    return result;\n  }\n}\n\nfunction commit({\n  timeline,\n  branches\n}, name) {\n  const index = branches.indexOf(name);\n\n  if (index < 0) {\n    return null;\n  }\n\n  const result = new BranchPoint({\n    index,\n    commit: true\n  });\n\n  if (joinLine(timeline, index)) {\n    result.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\n      fromIndex: index,\n      colorIndex: index\n    })]));\n  }\n\n  return result;\n}\n\nfunction commitTag({\n  branches\n}, name, tag) {\n  let index = branches.indexOf(name);\n\n  if (index < 0) {\n    index = branches.length;\n    branches.push(name);\n  }\n\n  return new BranchPoint({\n    index,\n    tag\n  });\n}\n\nfunction commitMerge({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = branches.indexOf(from);\n  const toIndex = branches.indexOf(to);\n\n  if (toIndex < 0 || fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex,\n      commit: true\n    });\n  }\n\n  const result = new BranchPoint({\n    index: toIndex,\n    commit: true,\n    lines: [new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    }), new BranchLine({\n      fromIndex: toIndex,\n      colorIndex: toIndex\n    })]\n  });\n  const froms = [...timeline];\n  const fromTargetLine = froms.pop();\n\n  if (fromTargetLine) {\n    fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        toIndex,\n        colorIndex: fromIndex\n      })]\n    }));\n  }\n\n  if (joinLine(froms, fromIndex) && fromTargetLine) {\n    fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    })]));\n  }\n\n  joinLine(timeline, toIndex);\n  return result;\n}\n\nfunction calcCommand(info, command) {\n  const {\n    timeline\n  } = info;\n  const timelineData = []; // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n\n  const commands = Array.isArray(command) ? command : [command];\n  commands.forEach(cmd => {\n    if (!cmd) {\n      return;\n    }\n\n    let point;\n\n    if (cmd.command === \"branch\") {\n      const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\n      const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n      point = branch(info, from, to);\n    } else if (cmd.command === \"commit\") {\n      const {\n        branch\n      } = cmd;\n      point = commit(info, branch);\n    } else if (cmd.command === \"merge\") {\n      const {\n        from,\n        to\n      } = cmd.branch;\n      point = commitMerge(info, from, to);\n    } else if (cmd.command === \"tag\") {\n      const {\n        branch,\n        tag\n      } = cmd;\n      point = commitTag(info, branch, tag);\n    }\n\n    if (point && point.index > -1) {\n      timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n    }\n  });\n  timeline.push(timelineData);\n}\n\nfunction calcBranchesInfo(start, grid, field) {\n  const result = {\n    branches: [],\n    timeline: []\n  };\n  getAllColumnData(grid, field, data => {\n    if (start !== \"top\") {\n      data = [...data].reverse();\n    }\n\n    data.forEach(command => {\n      calcCommand(result, command);\n    });\n  });\n  return result;\n}\n\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n  let w = Math.max(width / branches.length + 1, 5);\n  timeline.forEach(tl => {\n    tl.forEach((p, index) => {\n      if (index <= 0) {\n        // \n        return;\n      }\n\n      if (p.tag) {\n        const textWidth = ctx.measureText(p.tag).width;\n\n        if (w * index + radius * 2 + 4 + textWidth > width) {\n          w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n        }\n      }\n    });\n  });\n  const result = [];\n  let x = left;\n  branches.forEach(() => {\n    result.push(Math.ceil(x + radius));\n    x += w;\n  });\n  return result;\n}\n\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\n  branchXPoints,\n  // margin,\n  branchColors,\n  branchLineWidth,\n  mergeStyle\n}, {\n  // width,\n  col,\n  row,\n  branches\n}) {\n  if (upLineIndex != null || downLineIndex != null) {\n    ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\n    ctx.lineWidth = branchLineWidth;\n    ctx.lineCap = \"round\";\n    ctx.beginPath();\n\n    if (upLineIndex != null) {\n      const upX = branchXPoints[upLineIndex];\n      const upRect = grid.getCellRelativeRect(col, row - 1);\n      const upY = upRect.top + upRect.height / 2;\n      ctx.moveTo(upX, upY);\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    } else {\n      ctx.moveTo(x, y);\n    }\n\n    if (downLineIndex != null) {\n      const downX = branchXPoints[downLineIndex];\n      const downRect = grid.getCellRelativeRect(col, row + 1);\n      const downY = downRect.top + downRect.height / 2;\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n      } else {\n        ctx.lineTo(downX, downY);\n      }\n    }\n\n    ctx.stroke();\n  }\n}\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\n\n\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._start = option.start || \"bottom\";\n    this._cache = option.cache != null ? option.cache : false;\n  }\n\n  get StyleClass() {\n    return BranchGraphStyle_1.BranchGraphStyle;\n  }\n\n  clearCache(grid) {\n    delete grid[_];\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    if (this._cache) {\n      const state = grid[_] || (grid[_] = new Map());\n      const {\n        col,\n        row\n      } = context;\n      const field = grid.getField(col, row);\n\n      if (!state.has(field)) {\n        state.set(field, calcBranchesInfo(this._start, grid, field));\n      }\n    }\n\n    return super.onDrawCell(cellValue, info, context, grid);\n  }\n\n  clone() {\n    return new BranchGraphColumn(this);\n  }\n\n  drawInternal(_value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a, _b;\n\n    const {\n      col,\n      row\n    } = context;\n    const field = grid.getField(col, row);\n    const {\n      timeline,\n      branches\n    } = (_b = this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\n    const {\n      upLineIndexKey,\n      downLineIndexKey\n    } = this._start !== \"top\" ? {\n      upLineIndexKey: \"toIndex\",\n      downLineIndexKey: \"fromIndex\"\n    } : {\n      upLineIndexKey: \"fromIndex\",\n      downLineIndexKey: \"toIndex\"\n    };\n    const data = this._start !== \"top\" ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\n    const {\n      branchColors,\n      branchLineWidth,\n      circleSize,\n      mergeStyle,\n      margin,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const rect = context.getRect();\n    const radius = circleSize / 2;\n    const width = rect.width - margin * 2;\n    helper.drawWithClip(context, ctx => {\n      ctx.textAlign = \"left\";\n      ctx.textBaseline = \"middle\";\n      const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n      const y = rect.top + rect.height / 2; // draw join lines\n\n      data.map((point, index) => point ? point.lines.map(line => ({\n        colorIndex: line.colorIndex,\n        upLineIndex: line[upLineIndexKey],\n        downLineIndex: line[downLineIndexKey],\n        pointIndex: index\n      })) : []).reduce((p, c) => p.concat(c), []) // flatMap\n      // order of overlap\n      .sort((a, b) => b.colorIndex - a.colorIndex).forEach(line => {\n        const x = branchXPoints[line.pointIndex];\n        renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n          margin,\n          branchXPoints,\n          branchLineWidth,\n          branchColors,\n          mergeStyle\n        }, {\n          width,\n          col,\n          row,\n          branches\n        });\n      }); // draw commit points\n\n      data.forEach((p, index) => {\n        if (p && p.commit) {\n          const x = branchXPoints[index];\n          ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\n          ctx.beginPath();\n          ctx.arc(x, y, radius, 0, Math.PI * 2, true);\n          ctx.fill();\n          ctx.closePath();\n        }\n      }); // draw tags\n\n      data.forEach((p, index) => {\n        if (p && p.tag) {\n          ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\n          ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n        }\n      });\n    });\n  }\n\n}\n\nexports.BranchGraphColumn = BranchGraphColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/ButtonColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/ButtonColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst ButtonStyle_1 = __webpack_require__(/*! ../style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\n\nclass ButtonColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._caption = option.caption;\n  }\n\n  get StyleClass() {\n    return ButtonStyle_1.ButtonStyle;\n  }\n\n  get caption() {\n    return this._caption;\n  }\n\n  withCaption(caption) {\n    const c = this.clone();\n    c._caption = caption;\n    return c;\n  }\n\n  clone() {\n    return new ButtonColumn(this);\n  }\n\n  convertInternal(value) {\n    return this._caption || super.convertInternal(value);\n  }\n\n  getCopyCellValue(value) {\n    return this._caption || value;\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      bgColor,\n      color,\n      buttonBgColor,\n      font,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    let active = false;\n    const state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (state) {\n      if (state.mouseActiveCell && (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\n        active = true;\n      } else {\n        const {\n          select\n        } = context.getSelection();\n\n        if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\n          active = true;\n        }\n      }\n    }\n\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.button(textValue, context, {\n        textAlign,\n        textBaseline,\n        bgColor: buttonBgColor,\n        color,\n        font,\n        padding,\n        shadow: active ? {\n          color: \"rgba(0, 0, 0, 0.48)\",\n          blur: 6,\n          offsetY: 3\n        } : {},\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.ButtonColumn = ButtonColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/CheckColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/CheckColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst CheckStyle_1 = __webpack_require__(/*! ../style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\n\nclass CheckColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return CheckStyle_1.CheckStyle;\n  }\n\n  clone() {\n    return new CheckColumn(this);\n  }\n\n  convertInternal(value) {\n    return (0, utils_1.toBoolean)(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.checkbox(value, context, opt);\n  }\n\n}\n\nexports.CheckColumn = CheckColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/Column.js\":\n/*!********************************!*\\\n  !*** ./columns/type/Column.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Column = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst Style_1 = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\nclass Column extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  clone() {\n    return new Column(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.text(textValue, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.Column = Column;\n\n/***/ }),\n\n/***/ \"./columns/type/IconColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/IconColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IconColumn = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\"));\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst IconStyle_1 = __webpack_require__(/*! ../style/IconStyle */ \"./columns/style/IconStyle.js\");\n\nfunction repeatArray(val, count) {\n  if (count === Infinity) {\n    count = 0;\n  }\n\n  const a = [];\n\n  for (let i = 0; i < count; i++) {\n    a.push(val);\n  }\n\n  return a;\n}\n\nclass IconColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._tagName = option.tagName || \"i\";\n    this._className = option.className;\n    this._content = option.content;\n    this._name = option.name;\n    this._iconWidth = option.iconWidth;\n  }\n\n  get StyleClass() {\n    return IconStyle_1.IconStyle;\n  }\n\n  clone() {\n    return new IconColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    const num = Number(value);\n\n    if (!isNaN(num)) {\n      const icon = {};\n      icons.iconPropKeys.forEach(k => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        icon[k] = style[k];\n      });\n      icon.className = this._className;\n      icon.tagName = this._tagName;\n\n      if (this._content) {\n        icon.content = this._content;\n      }\n\n      icon.name = this._name;\n\n      if (this._iconWidth) {\n        icon.width = this._iconWidth;\n      }\n\n      info.getIcon = () => repeatArray(icon, num);\n    } else {\n      info.getIcon = () => null;\n    }\n\n    super.drawInternal(\"\", context, style, helper, grid, info);\n  }\n\n}\n\nexports.IconColumn = IconColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/ImageColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/ImageColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst ImageStyle_1 = __webpack_require__(/*! ../style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\nconst imgs_1 = __webpack_require__(/*! ../../internal/imgs */ \"./internal/imgs.js\");\n\nconst MAX_LRU_CACHE_SIZE = 50;\n\nfunction getImage(url) {\n  return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\n}\n\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n  let newWidth = width;\n  let newHeight = height;\n\n  if (newWidth > maxWidth) {\n    newWidth = maxWidth;\n    newHeight = newWidth * height / width;\n  }\n\n  if (newHeight > maxHeight) {\n    newHeight = maxHeight;\n    newWidth = newHeight * width / height;\n  }\n\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n}\n\nclass ImageColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return ImageStyle_1.ImageStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    return super.onDrawCell(getImage(cellValue), info, context, grid);\n  }\n\n  clone() {\n    return new ImageColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase\n  }) {\n    if (value) {\n      const {\n        textAlign,\n        textBaseline,\n        margin,\n        bgColor\n      } = style;\n\n      if (bgColor) {\n        drawCellBase({\n          bgColor\n        });\n      }\n\n      helper.drawWithClip(context, ctx => {\n        ctx.textAlign = textAlign;\n        ctx.textBaseline = textBaseline;\n        const rect = context.getRect();\n\n        if (style.imageSizing === \"keep-aspect-ratio\") {\n          const {\n            width,\n            height\n          } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n          const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\n            offset: margin\n          });\n          ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n        } else {\n          ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n        }\n      });\n    }\n  }\n\n}\n\nexports.ImageColumn = ImageColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/MenuColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/MenuColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MenuColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst MenuStyle_1 = __webpack_require__(/*! ../style/MenuStyle */ \"./columns/style/MenuStyle.js\");\n\nconst menu_items_1 = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nclass MenuColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._options = (0, menu_items_1.normalize)(option.options);\n  }\n\n  get StyleClass() {\n    return MenuStyle_1.MenuStyle;\n  }\n\n  clone() {\n    return new MenuColumn(this);\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  withOptions(options) {\n    const c = this.clone();\n    c._options = (0, menu_items_1.normalize)(options);\n    return c;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      font,\n      bgColor,\n      padding,\n      textOverflow,\n      appearance\n    } = style;\n    let {\n      color\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const convertedValue = this._convertInternal(value);\n\n    const text = convertedValue != null ? String(convertedValue) : \"\";\n    helper.testFontLoad(font, text, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\n      const textPadding = basePadding.slice(0);\n      textPadding[1] += 26; // icon padding\n\n      const iconPadding = basePadding.slice(0);\n      iconPadding[1] += 8;\n\n      if (color == null && (value == null || value === \"\")) {\n        color = \"rgba(0, 0, 0, .38)\";\n      }\n\n      helper.text(text, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding: textPadding,\n        textOverflow,\n        icons\n      });\n\n      if (appearance === \"menulist-button\") {\n        // draw dropdown arrow icon\n        helper.text(\"\", context, {\n          textAlign: \"right\",\n          textBaseline,\n          color,\n          font,\n          icons: [{\n            path: \"M0 2 5 7 10 2z\",\n            width: 10,\n            color: \"rgba(0, 0, 0, .54)\"\n          }],\n          padding: iconPadding\n        });\n      } else if (appearance !== \"none\") {\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        console.warn(`unsupported appearance:${appearance}`);\n      }\n    });\n  }\n\n  convertInternal(value) {\n    return value;\n  }\n\n  _convertInternal(value) {\n    const options = this._options;\n\n    for (let i = 0; i < options.length; i++) {\n      const option = options[i];\n\n      if (option.value === value) {\n        value = option.label;\n        break;\n      }\n    }\n\n    return super.convertInternal(value);\n  }\n\n  getCopyCellValue(value) {\n    return this._convertInternal(value);\n  }\n\n}\n\nexports.MenuColumn = MenuColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/MultilineTextColumn.js\":\n/*!*********************************************!*\\\n  !*** ./columns/type/MultilineTextColumn.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst MultilineTextStyle_1 = __webpack_require__(/*! ../style/MultilineTextStyle */ \"./columns/style/MultilineTextStyle.js\");\n\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  get StyleClass() {\n    return MultilineTextStyle_1.MultilineTextStyle;\n  }\n\n  clone() {\n    return new MultilineTextColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.multilineText(multilines, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.MultilineTextColumn = MultilineTextColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/NumberColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/NumberColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberColumn = void 0;\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst NumberStyle_1 = __webpack_require__(/*! ../style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\nlet defaultFotmat;\n\nclass NumberColumn extends Column_1.Column {\n  static get defaultFotmat() {\n    return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n  }\n\n  static set defaultFotmat(fmt) {\n    defaultFotmat = fmt;\n  }\n\n  constructor(option = {}) {\n    super(option);\n    this._format = option.format;\n  }\n\n  get StyleClass() {\n    return NumberStyle_1.NumberStyle;\n  }\n\n  clone() {\n    return new NumberColumn(this);\n  }\n\n  get format() {\n    return this._format;\n  }\n\n  withFormat(format) {\n    const c = this.clone();\n    c._format = format;\n    return c;\n  }\n\n  convertInternal(value) {\n    const num = Number(value);\n\n    if (isNaN(num)) {\n      const convertedValue = super.convertInternal(value);\n      return convertedValue != null ? String(convertedValue) : \"\";\n    }\n\n    const format = this._format || NumberColumn.defaultFotmat;\n    return format.format(num);\n  }\n\n}\n\nexports.NumberColumn = NumberColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/PercentCompleteBarColumn.js\":\n/*!**************************************************!*\\\n  !*** ./columns/type/PercentCompleteBarColumn.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PercentCompleteBarColumn = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(/*! ../style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\nconst MARGIN = 2;\n\nclass PercentCompleteBarColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._min = option.min || 0;\n    this._max = option.max || this._min + 100;\n\n    this._formatter = option.formatter || (v => v);\n  }\n\n  get StyleClass() {\n    return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n  }\n\n  clone() {\n    return new PercentCompleteBarColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    super.drawInternal(this._formatter(value), context, style, helper, grid, info);\n    const {\n      barColor,\n      barBgColor,\n      barHeight\n    } = style;\n    let textValue = value != null ? String(value) : \"\";\n\n    if (utils_1.str.endsWith(textValue, \"%\")) {\n      textValue = textValue.slice(0, -1);\n    }\n\n    const num = Number(textValue);\n\n    if (isNaN(num)) {\n      return;\n    }\n\n    const rate = num < this._min ? 0 : num > this._max ? 1 : (num - this._min) / (this._max - this._min);\n    helper.drawWithClip(context, ctx => {\n      const rect = context.getRect();\n      const barMaxWidth = rect.width - MARGIN * 2 - 1;\n      /**/\n\n      const barTop = rect.bottom - MARGIN - barHeight - 1;\n      /**/\n\n      const barLeft = rect.left + MARGIN;\n      ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n      ctx.fill();\n      const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n      ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barSize, barHeight);\n      ctx.fill();\n    });\n  }\n\n}\n\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/RadioColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/RadioColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst RadioStyle_1 = __webpack_require__(/*! ../style/RadioStyle */ \"./columns/style/RadioStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\n\nclass RadioColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return RadioStyle_1.RadioStyle;\n  }\n\n  clone() {\n    return new RadioColumn(this);\n  }\n\n  convertInternal(value) {\n    return (0, utils_1.toBoolean)(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.radioButton(value, context, opt);\n  }\n\n}\n\nexports.RadioColumn = RadioColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/columnUtils.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/columnUtils.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadIcons = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nfunction loadIcons(icon, context, helper, callback) {\n  let argIcon = undefined;\n\n  if (icon) {\n    if ((0, utils_1.isPromise)(icon)) {\n      icon.then(i => {\n        loadIcons(i, context.toCurrentContext(), helper, callback);\n      });\n    } else {\n      const iconList = icons.toNormalizeArray(icon);\n      iconList.forEach(i => {\n        if (i.font && i.content) {\n          helper.testFontLoad(i.font, i.content, context);\n        }\n      });\n      argIcon = iconList;\n    }\n  }\n\n  callback(argIcon, context);\n}\n\nexports.loadIcons = loadIcons;\n\n/***/ }),\n\n/***/ \"./columns/utils/index.js\":\n/*!********************************!*\\\n  !*** ./columns/utils/index.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toBoolean = void 0;\n\nfunction toBoolean(val) {\n  if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return false;\n    } else if (val === \"off\") {\n      return false;\n    } else if (/^0+$/.exec(val)) {\n      return false;\n    }\n  }\n\n  return Boolean(val);\n}\n\nexports.toBoolean = toBoolean;\n\n/***/ }),\n\n/***/ \"./core.js\":\n/*!*****************!*\\\n  !*** ./core.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\n\nconst DrawGrid_1 = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\nObject.defineProperty(exports, \"DrawGrid\", {\n  enumerable: true,\n  get: function () {\n    return DrawGrid_1.DrawGrid;\n  }\n});\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ./core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nObject.defineProperty(exports, \"EVENT_TYPE\", {\n  enumerable: true,\n  get: function () {\n    return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n  }\n});\n\n/***/ }),\n\n/***/ \"./core/DG_EVENT_TYPE.js\":\n/*!*******************************!*\\\n  !*** ./core/DG_EVENT_TYPE.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DG_EVENT_TYPE = void 0;\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\n\nexports.DG_EVENT_TYPE = {\n  CLICK_CELL: \"click_cell\",\n  DBLCLICK_CELL: \"dblclick_cell\",\n  DBLTAP_CELL: \"dbltap_cell\",\n  MOUSEDOWN_CELL: \"mousedown_cell\",\n  MOUSEUP_CELL: \"mouseup_cell\",\n  SELECTED_CELL: \"selected_cell\",\n  KEYDOWN: \"keydown\",\n  MOUSEMOVE_CELL: \"mousemove_cell\",\n  MOUSEENTER_CELL: \"mouseenter_cell\",\n  MOUSELEAVE_CELL: \"mouseleave_cell\",\n  MOUSEOVER_CELL: \"mouseover_cell\",\n  MOUSEOUT_CELL: \"mouseout_cell\",\n  TOUCHSTART_CELL: \"touchstart_cell\",\n  CONTEXTMENU_CELL: \"contextmenu_cell\",\n  INPUT_CELL: \"input_cell\",\n  PASTE_CELL: \"paste_cell\",\n  DELETE_CELL: \"delete_cell\",\n  EDITABLEINPUT_CELL: \"editableinput_cell\",\n  MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\n  RESIZE_COLUMN: \"resize_column\",\n  SCROLL: \"scroll\",\n  FOCUS_GRID: \"focus_grid\",\n  BLUR_GRID: \"blur_grid\"\n};\n\n/***/ }),\n\n/***/ \"./core/DrawGrid.js\":\n/*!**************************!*\\\n  !*** ./core/DrawGrid.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DrawGrid = void 0;\n\nconst calc = __importStar(__webpack_require__(/*! ../internal/calc */ \"./internal/calc.js\"));\n\nconst hiDPI = __importStar(__webpack_require__(/*! ../internal/hiDPI */ \"./internal/hiDPI.js\"));\n\nconst style = __importStar(__webpack_require__(/*! ../internal/style */ \"./internal/style.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst paste_utils_1 = __webpack_require__(/*! ../internal/paste-utils */ \"./internal/paste-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ./DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst EventTarget_1 = __webpack_require__(/*! ./EventTarget */ \"./core/EventTarget.js\");\n\nconst NumberMap_1 = __webpack_require__(/*! ../internal/NumberMap */ \"./internal/NumberMap.js\");\n\nconst Rect_1 = __webpack_require__(/*! ../internal/Rect */ \"./internal/Rect.js\");\n\nconst Scrollable_1 = __webpack_require__(/*! ../internal/Scrollable */ \"./internal/Scrollable.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\"); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst {\n  /** @private */\n  isTouchEvent,\n\n  /** @private */\n  getMouseButtons,\n\n  /** @private */\n  getKeyCode,\n\n  /** @private */\n  cancel: cancelEvent\n} = utils_1.event;\n/** @private */\n\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\n/** @private */\n\n\nfunction createRootElement() {\n  const element = document.createElement(\"div\");\n  element.classList.add(\"cheetah-grid\");\n  return element;\n}\n/** @private */\n\n\nconst KEY_BS = 8;\n/** @private */\n\nconst KEY_TAB = 9;\n/** @private */\n\nconst KEY_ENTER = 13;\n/** @private */\n\nconst KEY_END = 35;\n/** @private */\n\nconst KEY_HOME = 36;\n/** @private */\n\nconst KEY_LEFT = 37;\n/** @private */\n\nconst KEY_UP = 38;\n/** @private */\n\nconst KEY_RIGHT = 39;\n/** @private */\n\nconst KEY_DOWN = 40;\n/** @private */\n\nconst KEY_DEL = 46;\n/** @private */\n\nconst KEY_ALPHA_A = 65;\n/** @private */\n\nconst KEY_ALPHA_C = 67;\n/** @private */\n\nconst KEY_ALPHA_V = 86; //private methods\n\n/** @private */\n\nfunction _vibrate(e) {\n  if (navigator.vibrate && isTouchEvent(e)) {\n    navigator.vibrate(50);\n  }\n}\n/** @private */\n\n\nfunction _getTargetRowAt(absoluteY) {\n  const internal = this.getTargetRowAtInternal(absoluteY);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const findBefore = (startRow, startBottom) => {\n    let bottom = startBottom;\n\n    for (let row = startRow; row >= 0; row--) {\n      const height = _getRowHeight.call(this, row);\n\n      const top = bottom - height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      bottom = top;\n    }\n\n    return null;\n  };\n\n  const findAfter = (startRow, startBottom) => {\n    let top = startBottom - _getRowHeight.call(this, startRow);\n\n    const {\n      rowCount\n    } = this[_];\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = top + height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      top = bottom;\n    }\n\n    return null;\n  };\n\n  const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\n\n  const bottom = _getRowsHeight.call(this, 0, candidateRow);\n\n  if (absoluteY >= bottom) {\n    return findAfter(candidateRow, bottom);\n  } else {\n    return findBefore(candidateRow, bottom);\n  }\n}\n/** @private */\n\n\nfunction _getTargetColAt(grid, absoluteX) {\n  let left = 0;\n  const {\n    colCount\n  } = grid[_];\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  let {\n    top\n  } = grid[_].scroll;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row);\n\n    const bottom = top + height;\n\n    if (bottom > absoluteY) {\n      return {\n        top,\n        row\n      };\n    }\n\n    top = bottom;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenColAt(grid, absoluteX) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  let {\n    left\n  } = grid[_].scroll;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getFrozenRowsRect(grid) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  const {\n    top\n  } = grid[_].scroll;\n  let height = 0;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    height += _getRowHeight.call(grid, row);\n  }\n\n  return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n}\n/** @private */\n\n\nfunction _getFrozenColsRect(grid) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  const {\n    left\n  } = grid[_].scroll;\n  let width = 0;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    width += _getColWidth(grid, col);\n  }\n\n  return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n}\n/** @private */\n\n\nfunction _getCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return null;\n  }\n\n  return grid[_].drawCells[row][col];\n}\n/** @private */\n\n\nfunction _putCellDrawing(grid, col, row, context) {\n  if (!grid[_].drawCells[row]) {\n    grid[_].drawCells[row] = {};\n  }\n\n  grid[_].drawCells[row][col] = context;\n}\n/** @private */\n\n\nfunction _removeCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return;\n  }\n\n  delete grid[_].drawCells[row][col];\n\n  if (Object.keys(grid[_].drawCells[row]).length === 0) {\n    delete grid[_].drawCells[row];\n  }\n}\n/** @private */\n\n\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\n  const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n  const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n\n  if (drawRect.height > 0 && drawRect.width > 0) {\n    ctx.save();\n\n    try {\n      const cellDrawing = _getCellDrawing(this, col, row);\n\n      if (cellDrawing) {\n        cellDrawing.cancel();\n      }\n\n      const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\n      const p = this.onDrawCell(col, row, dcContext);\n\n      if ((0, utils_1.isPromise)(p)) {\n        //\n        _putCellDrawing(this, col, row, dcContext);\n\n        const pCol = col;\n\n        dcContext._delayMode(this, () => {\n          _removeCellDrawing(this, pCol, row);\n        });\n\n        p.then(() => {\n          dcContext.terminate();\n        });\n      }\n    } finally {\n      ctx.restore();\n    }\n  }\n}\n/** @private */\n\n\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\n  const {\n    colCount\n  } = grid[_];\n\n  const drawOuter = (col, absoluteLeft) => {\n    //\n    if (col >= colCount - 1 && grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n      const outerLeft = absoluteLeft - visibleRect.left;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteLeft = 0;\n\n  if (initFrozenCol) {\n    let absoluteLeft = initFrozenCol.left;\n    const count = grid[_].frozenColCount;\n\n    for (let {\n      col\n    } = initFrozenCol; col < count; col++) {\n      const width = _getColWidth(grid, col);\n\n      _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\n\n      absoluteLeft += width;\n\n      if (drawRight <= absoluteLeft) {\n        //\n        drawOuter(col, absoluteLeft);\n        return;\n      }\n    }\n\n    skipAbsoluteLeft = absoluteLeft;\n  }\n\n  let absoluteLeft = initCol.left;\n\n  for (let {\n    col\n  } = initCol; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\n\n    absoluteLeft += width;\n\n    if (drawRight <= absoluteLeft) {\n      //\n      drawOuter(col, absoluteLeft);\n      return;\n    }\n  }\n\n  drawOuter(colCount - 1, absoluteLeft);\n}\n/** @private */\n\n\nfunction _getInitContext() {\n  return this._getInitContext();\n}\n/** @private */\n\n\nfunction _invalidateRect(grid, drawRect) {\n  const visibleRect = _getVisibleRect(grid);\n\n  const {\n    rowCount\n  } = grid[_];\n\n  const ctx = _getInitContext.call(grid);\n\n  const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\n    top: _getRowsHeight.call(grid, 0, rowCount - 1),\n    row: rowCount\n  };\n  const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n    left: _getColsWidth(grid, 0, grid[_].colCount - 1),\n    col: grid[_].colCount\n  };\n  const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n  const drawRight = Math.min(visibleRect.right, drawRect.right);\n\n  const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n\n  const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n\n  const drawLayers = new DrawLayers();\n\n  const drawOuter = (row, absoluteTop) => {\n    //\n    if (row >= rowCount - 1 && grid[_].canvas.height > absoluteTop - visibleRect.top) {\n      const outerTop = absoluteTop - visibleRect.top;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteTop = 0;\n\n  if (initFrozenRow) {\n    let absoluteTop = initFrozenRow.top;\n    const count = grid[_].frozenRowCount;\n\n    for (let {\n      row\n    } = initFrozenRow; row < count; row++) {\n      const height = _getRowHeight.call(grid, row);\n\n      _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\n\n      absoluteTop += height;\n\n      if (drawBottom <= absoluteTop) {\n        //\n        drawOuter(row, absoluteTop);\n        drawLayers.draw(ctx);\n        return;\n      }\n    }\n\n    skipAbsoluteTop = absoluteTop;\n  }\n\n  let absoluteTop = initRow.top;\n\n  for (let {\n    row\n  } = initRow; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row); //\n\n\n    _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\n\n    absoluteTop += height;\n\n    if (drawBottom <= absoluteTop) {\n      //\n      drawOuter(row, absoluteTop);\n      drawLayers.draw(ctx);\n      return;\n    }\n  }\n\n  drawOuter(rowCount - 1, absoluteTop);\n  drawLayers.draw(ctx);\n}\n/** @private */\n\n\nfunction _toPxWidth(grid, width) {\n  return Math.round(calc.toPx(width, grid[_].calcWidthContext));\n}\n/** @private */\n\n\nfunction _adjustColWidth(grid, col, orgWidth) {\n  const limits = _getColWidthLimits(grid, col);\n\n  return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\n}\n/** @private */\n\n\nfunction _applyColWidthLimits(limits, orgWidth) {\n  if (!limits) {\n    return orgWidth;\n  }\n\n  if (limits.min) {\n    if (limits.min > orgWidth) {\n      return limits.min;\n    }\n  }\n\n  if (limits.max) {\n    if (limits.max < orgWidth) {\n      return limits.max;\n    }\n  }\n\n  return orgWidth;\n}\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\n\n\nfunction _getColWidthDefine(grid, col) {\n  const width = grid[_].colWidthsMap.get(col);\n\n  if (width) {\n    return width;\n  }\n\n  return grid.defaultColWidth;\n}\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\n\n\nfunction _getColWidthLimits(grid, col) {\n  const limit = grid[_].colWidthsLimit[col];\n\n  if (!limit) {\n    return null;\n  }\n\n  const result = {};\n\n  if (limit.min) {\n    result.min = _toPxWidth(grid, limit.min);\n    result.minDef = limit.min;\n  }\n\n  if (limit.max) {\n    result.max = _toPxWidth(grid, limit.max);\n    result.maxDef = limit.max;\n  }\n\n  return result;\n}\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\n\n\nfunction isAutoDefine(width) {\n  return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\n}\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\n\n\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\n  const fullWidth = grid[_].calcWidthContext.full;\n  let sumMin = 0;\n  const others = [];\n  let autoCount = 0;\n  const hasLimitsOnAuto = [];\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    const limits = _getColWidthLimits(grid, col);\n\n    if (isAutoDefine(def)) {\n      if (limits) {\n        hasLimitsOnAuto.push(limits);\n\n        if (limits.min) {\n          sumMin += limits.min;\n        }\n      }\n\n      autoCount++;\n    } else {\n      let expr = def;\n\n      if (limits) {\n        const orgWidth = _toPxWidth(grid, expr);\n\n        const newWidth = _applyColWidthLimits(limits, orgWidth);\n\n        if (orgWidth !== newWidth) {\n          expr = `${newWidth}px`;\n        }\n\n        sumMin += newWidth;\n      }\n\n      others.push(expr);\n    }\n\n    if (shortCircuit && sumMin > fullWidth) {\n      // Returns 0px because it has consumed the full width.\n      return \"0px\";\n    }\n  }\n\n  if (hasLimitsOnAuto.length && others.length) {\n    const autoPx = (fullWidth - _toPxWidth(grid, `calc(${others.map(c => typeof c === \"number\" ? `${c}px` : c).join(\" + \")})`)) / autoCount;\n    hasLimitsOnAuto.forEach(limits => {\n      if (limits.min && autoPx < limits.min) {\n        others.push(limits.minDef);\n        autoCount--;\n      } else if (limits.max && limits.max < autoPx) {\n        others.push(limits.maxDef);\n        autoCount--;\n      }\n    });\n\n    if (shortCircuit && autoCount <= 0) {\n      return `${autoPx}px`;\n    }\n  }\n\n  if (others.length) {\n    const strDefs = [];\n    let num = 0;\n    others.forEach(c => {\n      if (typeof c === \"number\") {\n        num += c;\n      } else {\n        strDefs.push(c);\n      }\n    });\n    strDefs.push(`${num}px`);\n    return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\n  } else {\n    return `${100 / autoCount}%`;\n  }\n}\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\n\n\nfunction _colWidthDefineToPxWidth(grid, width) {\n  if (isAutoDefine(width)) {\n    return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\n  }\n\n  return _toPxWidth(grid, width);\n}\n/** @private */\n\n\nfunction _getColWidth(grid, col) {\n  const width = _getColWidthDefine(grid, col);\n\n  return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\n}\n/** @private */\n\n\nfunction _setColWidth(grid, col, width) {\n  if (width != null) {\n    grid[_].colWidthsMap.put(col, width);\n  } else {\n    grid[_].colWidthsMap.remove(col);\n  }\n}\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\n\n\nfunction _storeAutoColWidthExprs(grid) {\n  let expr = null;\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    if (isAutoDefine(def)) {\n      _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\n    }\n  }\n}\n/** @private */\n\n\nfunction _getColsWidth(grid, startCol, endCol) {\n  const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\n\n  const colCount = endCol - startCol + 1;\n  let w = defaultColPxWidth * colCount;\n\n  grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n    w += _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) - defaultColPxWidth;\n  });\n\n  for (let col = startCol; col <= endCol; col++) {\n    if (grid[_].colWidthsMap.has(col)) {\n      continue;\n    }\n\n    const adj = _adjustColWidth(grid, col, defaultColPxWidth);\n\n    if (adj !== defaultColPxWidth) {\n      w += adj - defaultColPxWidth;\n    }\n  }\n\n  return w;\n}\n/** @private */\n\n\nfunction _getRowHeight(row) {\n  const internal = this.getRowHeightInternal(row);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const height = this[_].rowHeightsMap.get(row);\n\n  if (height) {\n    return height;\n  }\n\n  return this[_].defaultRowHeight;\n}\n/** @private */\n\n\nfunction _setRowHeight(grid, row, height) {\n  if (height != null) {\n    grid[_].rowHeightsMap.put(row, height);\n  } else {\n    grid[_].rowHeightsMap.remove(row);\n  }\n}\n/** @private */\n\n\nfunction _getRowsHeight(startRow, endRow) {\n  const internal = this.getRowsHeightInternal(startRow, endRow);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const rowCount = endRow - startRow + 1;\n  let h = this[_].defaultRowHeight * rowCount;\n\n  this[_].rowHeightsMap.each(startRow, endRow, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _getScrollWidth(grid) {\n  return _getColsWidth(grid, 0, grid[_].colCount - 1);\n}\n/** @private */\n\n\nfunction _getScrollHeight(row) {\n  const internal = this.getScrollHeightInternal(row);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  let h = this[_].defaultRowHeight * this[_].rowCount;\n\n  this[_].rowHeightsMap.each(0, this[_].rowCount - 1, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _onScroll(grid, _e) {\n  const lastLeft = grid[_].scroll.left;\n  const lastTop = grid[_].scroll.top;\n  const moveX = grid[_].scrollable.scrollLeft - lastLeft;\n  const moveY = grid[_].scrollable.scrollTop - lastTop; //\n\n  grid[_].scroll = {\n    left: grid[_].scrollable.scrollLeft,\n    top: grid[_].scrollable.scrollTop\n  }; // If the focus is on the header, recalculate and move the focus position.\n\n  const {\n    focus\n  } = grid[_].selection;\n  const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\n\n  if (isFrozenCell && ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX || (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY)) {\n    grid.setFocusCursor(focus.col, focus.row);\n  }\n\n  const visibleRect = _getVisibleRect(grid);\n\n  if (Math.abs(moveX) >= visibleRect.width || Math.abs(moveY) >= visibleRect.height) {\n    //\n    _invalidateRect(grid, visibleRect);\n  } else {\n    //\n    grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n\n    if (moveX !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveX < 0) {\n        redrawRect.width = -moveX;\n\n        if (grid[_].frozenColCount > 0) {\n          //\n          const frozenRect = _getFrozenColsRect(grid);\n\n          redrawRect.width += frozenRect.width;\n        }\n      } else if (moveX > 0) {\n        redrawRect.left = redrawRect.right - moveX;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveX > 0) {\n        if (grid[_].frozenColCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenColsRect(grid));\n        }\n      }\n    }\n\n    if (moveY !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveY < 0) {\n        redrawRect.height = -moveY;\n\n        if (grid[_].frozenRowCount > 0) {\n          //\n          const frozenRect = _getFrozenRowsRect(grid);\n\n          redrawRect.height += frozenRect.height;\n        }\n      } else if (moveY > 0) {\n        redrawRect.top = redrawRect.bottom - moveY;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveY > 0) {\n        if (grid[_].frozenRowCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenRowsRect(grid));\n        }\n      }\n    }\n  }\n}\n/** @private */\n// eslint-disable-next-line complexity\n\n\nfunction _onKeyDownMove(e) {\n  var _a, _b, _c;\n\n  const {\n    shiftKey\n  } = e;\n  const keyCode = getKeyCode(e);\n  const focusCell = shiftKey ? this.selection.focus : this.selection.select;\n\n  if (keyCode === KEY_LEFT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"W\");\n    } else {\n      if (!hMove.call(this, \"W\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_UP) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", null);\n    } else {\n      if (!vMove.call(this, \"N\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_RIGHT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"E\");\n    } else {\n      if (!hMove.call(this, \"E\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_DOWN) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", null);\n    } else {\n      if (!vMove.call(this, \"S\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_HOME) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", \"W\");\n    } else {\n      move(this, null, \"W\");\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_END) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", \"E\");\n    } else {\n      move(this, null, \"E\");\n    }\n\n    cancelEvent(e);\n  } else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n    let newCell = null;\n\n    if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\n      newCell = this.keyboardOptions.moveCellOnTab({\n        cell: focusCell,\n        grid: this,\n        event: e\n      });\n    }\n\n    if (newCell) {\n      _moveFocusCell.call(this, newCell.col, newCell.row, false);\n    } else if (shiftKey) {\n      if (!hMove.call(this, \"W\", false)) {\n        const row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n        if (0 > row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, this.colCount - 1, row, false);\n      }\n    } else {\n      if (!hMove.call(this, \"E\", false)) {\n        const row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n        if (this.rowCount <= row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, 0, row, false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n    let newCell = null;\n\n    if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\n      newCell = this.keyboardOptions.moveCellOnEnter({\n        cell: focusCell,\n        grid: this,\n        event: e\n      });\n    }\n\n    if (newCell) {\n      _moveFocusCell.call(this, newCell.col, newCell.row, false);\n    } else if (shiftKey) {\n      if (!vMove.call(this, \"N\", false)) {\n        const col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n        if (0 > col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, this.rowCount - 1, false);\n      }\n    } else {\n      if (!vMove.call(this, \"S\", false)) {\n        const col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n        if (this.colCount <= col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n    this.selection.range = {\n      start: {\n        col: 0,\n        row: 0\n      },\n      end: {\n        col: this.colCount - 1,\n        row: this.rowCount - 1\n      }\n    };\n    this.invalidate();\n    cancelEvent(e);\n  }\n\n  function move(grid, vDir, hDir) {\n    const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\n    const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\n\n    _moveFocusCell.call(grid, col, row, shiftKey);\n  }\n\n  function vMove(vDir, shiftKeyFlg = shiftKey) {\n    const {\n      col\n    } = focusCell;\n    let row;\n\n    if (vDir === \"S\") {\n      row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n      if (this.rowCount <= row) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(col, this.rowCount - 1);\n        return false;\n      }\n    } else {\n      row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n      if (row < 0) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(col, 0);\n        return false;\n      }\n    }\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n\n  function hMove(hDir, shiftKeyFlg = shiftKey) {\n    const {\n      row\n    } = focusCell;\n    let col;\n\n    if (hDir === \"E\") {\n      col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n      if (this.colCount <= col) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(this.colCount - 1, row);\n        return false;\n      }\n    } else {\n      col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n      if (col < 0) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(0, row);\n        return false;\n      }\n    }\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n}\n/** @private */\n\n\nfunction _moveFocusCell(col, row, shiftKey) {\n  const offset = this.getOffsetInvalidateCells();\n\n  function extendRange(range) {\n    if (offset > 0) {\n      range.start.col -= offset;\n      range.start.row -= offset;\n      range.end.col += offset;\n      range.end.row += offset;\n    }\n\n    return range;\n  }\n\n  const beforeRange = extendRange(this.selection.range);\n  const beforeRect = this.getCellRangeRect(beforeRange);\n\n  this.selection._setFocusCell(col, row, shiftKey);\n\n  this.makeVisibleCell(col, row);\n  this.focusCell(col, row);\n  const afterRange = extendRange(this.selection.range);\n  const afterRect = this.getCellRangeRect(afterRange);\n\n  if (afterRect.intersection(beforeRect)) {\n    const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\n\n    _invalidateRect(this, invalidateRect);\n  } else {\n    _invalidateRect(this, beforeRect);\n\n    _invalidateRect(this, afterRect);\n  }\n}\n/** @private */\n\n\nfunction _updatedSelection() {\n  const {\n    focusControl\n  } = this[_];\n  const {\n    col: selCol,\n    row: selRow\n  } = this[_].selection.select;\n  const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\n    col: selCol,\n    row: selRow\n  });\n  const editMode = utils_1.array.findIndex(results, v => !!v) >= 0;\n  focusControl.editMode = editMode;\n\n  if (editMode) {\n    focusControl.storeInputStatus();\n    focusControl.setDefaultInputStatus();\n    this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\n      col: selCol,\n      row: selRow,\n      input: focusControl.input\n    });\n  }\n}\n/** @private */\n\n\nfunction _getMouseAbstractPoint(grid, evt) {\n  let e;\n\n  if (isTouchEvent(evt)) {\n    e = evt.changedTouches[0];\n  } else {\n    e = evt;\n  }\n\n  const clientX = e.clientX || e.pageX + window.scrollX;\n  const clientY = e.clientY || e.pageY + window.scrollY;\n\n  const rect = grid[_].canvas.getBoundingClientRect();\n\n  if (rect.right <= clientX) {\n    return null;\n  }\n\n  if (rect.bottom <= clientY) {\n    return null;\n  }\n\n  const x = clientX - rect.left + grid[_].scroll.left;\n  const y = clientY - rect.top + grid[_].scroll.top;\n  return {\n    x,\n    y\n  };\n}\n/** @private */\n\n\nfunction _bindEvents() {\n  // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\n  const grid = this;\n  const {\n    handler,\n    element,\n    scrollable\n  } = grid[_];\n\n  const getCellEventArgsSet = e => {\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return {};\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return {\n        abstractPos,\n        cell\n      };\n    }\n\n    const eventArgs = {\n      col: cell.col,\n      row: cell.row,\n      event: e\n    };\n    return {\n      abstractPos,\n      cell,\n      eventArgs\n    };\n  };\n\n  const canResizeColumn = col => {\n    if (grid[_].disableColumnResize) {\n      return false;\n    }\n\n    const limit = grid[_].colWidthsLimit[col];\n\n    if (!limit || !limit.min || !limit.max) {\n      return true;\n    }\n\n    return limit.max !== limit.min;\n  };\n\n  handler.on(element, \"mousedown\", e => {\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (!abstractPos) {\n      return;\n    }\n\n    if (eventArgs) {\n      const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n\n      if (utils_1.array.findIndex(results, v => !v) >= 0) {\n        return;\n      }\n    }\n\n    if (getMouseButtons(e) !== 1 && // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\n    e.buttons !== 0) {\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      //\n      grid[_].columnResizer.start(resizeCol, e);\n    } else {\n      //\n      grid[_].cellSelector.start(e);\n    }\n  });\n  handler.on(element, \"mouseup\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (eventArgs) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\n    }\n  });\n  let doubleTapBefore = null;\n  let longTouchId = null;\n  let useTouch = null;\n\n  function useTouchStart() {\n    if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null) clearTimeout(useTouch.timeoutId);\n    useTouch = {};\n  }\n\n  function useTouchEnd() {\n    if (useTouch) {\n      if (useTouch.timeoutId != null) clearTimeout(useTouch.timeoutId);\n      useTouch.timeoutId = setTimeout(() => {\n        useTouch = null;\n      }, 350);\n    }\n  }\n\n  handler.on(element, \"touchstart\", e => {\n    // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\n    useTouchStart();\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (eventArgs) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\n    }\n\n    if (!doubleTapBefore) {\n      doubleTapBefore = eventArgs;\n      setTimeout(() => {\n        doubleTapBefore = null;\n      }, 350);\n    } else {\n      if (eventArgs && eventArgs.col === doubleTapBefore.col && eventArgs.row === doubleTapBefore.row) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\n      }\n\n      doubleTapBefore = null;\n\n      if (e.defaultPrevented) {\n        return;\n      }\n    }\n\n    if (e.targetTouches.length > 1) {\n      // If touchstart with multiple fingers,\n      // it is not considered as an operation event.\n      return;\n    }\n\n    longTouchId = setTimeout(() => {\n      //\n      longTouchId = null;\n\n      const abstractPos = _getMouseAbstractPoint(grid, e);\n\n      if (!abstractPos) {\n        return;\n      }\n\n      const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n\n      if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n        //\n        grid[_].columnResizer.start(resizeCol, e);\n      } else {\n        //\n        grid[_].cellSelector.start(e);\n      }\n    }, 500);\n  });\n\n  function cancel(_e) {\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n      longTouchId = null;\n    }\n  }\n\n  handler.on(element, \"touchcancel\", e => {\n    cancel(e);\n    useTouchEnd();\n  });\n  handler.on(element, \"touchmove\", cancel);\n  handler.on(element, \"touchend\", e => {\n    useTouchEnd();\n\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n\n      grid[_].cellSelector.select(e);\n\n      longTouchId = null;\n    }\n  });\n  let isMouseover = false;\n  let mouseEnterCell = null;\n  let mouseOverCell = null;\n\n  function onMouseenterCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseEnterCell = cell;\n  }\n\n  function onMouseleaveCell(related) {\n    const beforeMouseCell = mouseEnterCell;\n    mouseEnterCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  function onMouseoverCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseOverCell = cell;\n  }\n\n  function onMouseoutCell(related) {\n    const beforeMouseCell = mouseOverCell;\n    mouseOverCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  const scrollElement = scrollable.getElement();\n  handler.on(scrollElement, \"mouseover\", _e => {\n    isMouseover = true;\n  });\n  handler.on(scrollElement, \"mouseout\", _e => {\n    isMouseover = false;\n    onMouseoutCell();\n  });\n  handler.on(element, \"mouseleave\", _e => {\n    onMouseleaveCell();\n  });\n  handler.on(element, \"mousemove\", e => {\n    if (useTouch) {\n      // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\n      return;\n    }\n\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (eventArgs) {\n      const beforeMouseCell = mouseEnterCell;\n\n      if (beforeMouseCell) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\n        if (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\n          const enterCell = {\n            col: eventArgs.col,\n            row: eventArgs.row\n          };\n          const outCell = onMouseoutCell(enterCell);\n          const leaveCell = onMouseleaveCell(enterCell);\n          onMouseenterCell(enterCell, leaveCell);\n\n          if (isMouseover) {\n            onMouseoverCell(enterCell, outCell);\n          }\n        } else if (isMouseover && !mouseOverCell) {\n          onMouseoverCell({\n            col: eventArgs.col,\n            row: eventArgs.row\n          });\n        }\n      } else {\n        const enterCell = {\n          col: eventArgs.col,\n          row: eventArgs.row\n        };\n        onMouseenterCell(enterCell);\n\n        if (isMouseover) {\n          onMouseoverCell(enterCell);\n        }\n\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n      }\n    } else {\n      onMouseoutCell();\n      onMouseleaveCell();\n    }\n\n    if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n      return;\n    }\n\n    const {\n      style\n    } = element;\n\n    if (!abstractPos) {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      style.cursor = \"col-resize\";\n    } else {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n    }\n  });\n  handler.on(element, \"click\", e => {\n    if (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\n      return;\n    }\n\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\n  });\n  handler.on(element, \"contextmenu\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\n  });\n  handler.on(element, \"dblclick\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n  });\n\n  grid[_].focusControl.onKeyDown(evt => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\n  });\n\n  grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\n  });\n\n  scrollable.onScroll(e => {\n    _onScroll(grid, e);\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, {\n      event: e\n    });\n  });\n\n  grid[_].focusControl.onKeyDownMove(e => {\n    _onKeyDownMove.call(grid, e);\n  });\n\n  grid.listen(\"copydata\", range => {\n    const copyRange = grid.getCopyRangeInternal(range);\n    const copyLines = [];\n\n    for (let {\n      row\n    } = copyRange.start; row <= copyRange.end.row; row++) {\n      let copyLine = \"\";\n\n      for (let {\n        col\n      } = copyRange.start; col <= copyRange.end.col; col++) {\n        const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\n        let strCellValue;\n\n        if (typeof copyCellValue === \"string\") {\n          strCellValue = copyCellValue;\n        } else if (copyCellValue == null || // Asynchronous data is treated as empty.\n        typeof Promise !== \"undefined\" && copyCellValue instanceof Promise) {\n          strCellValue = \"\";\n        } else {\n          // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n          strCellValue = `${copyCellValue}`;\n\n          if (/^\\[object .*\\]$/.exec(strCellValue)) {\n            // Ignore maybe object\n            strCellValue = \"\";\n          }\n        }\n\n        copyLine += /[\\t\\n]/.test(strCellValue) ? // Need quote\n        `\"${strCellValue.replace(/\"/g, '\"\"')}\"` : strCellValue;\n\n        if (col < copyRange.end.col) {\n          copyLine += \"\\t\";\n        }\n      }\n\n      copyLines.push(copyLine);\n    }\n\n    return copyLines.join(\"\\n\");\n  });\n\n  grid[_].focusControl.onCopy(_e => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), r => r != null));\n\n  grid[_].focusControl.onPaste(({\n    value,\n    event\n  }) => {\n    const {\n      trimOnPaste\n    } = grid;\n    const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\n\n    let rangeBoxValues = null;\n    const pasteCellEvent = {\n      col,\n      row,\n      value,\n      normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\n      multi,\n\n      get rangeBoxValues() {\n        return rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\n          trimOnPaste\n        });\n      },\n\n      event\n    };\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\n  });\n\n  grid[_].focusControl.onInput(value => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, {\n      col,\n      row,\n      value\n    });\n  });\n\n  grid[_].focusControl.onDelete(event => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, {\n      col,\n      row,\n      event\n    });\n  });\n\n  grid[_].focusControl.onFocus(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\n    grid[_].focusedGrid = true;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n\n  grid[_].focusControl.onBlur(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\n    grid[_].focusedGrid = false;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n}\n/** @private */\n\n\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n  if (grid[_].frozenRowCount <= 0) {\n    return -1;\n  }\n\n  const frozenRect = _getFrozenRowsRect(grid);\n\n  if (!frozenRect.inPoint(abstractX, abstractY)) {\n    return -1;\n  }\n\n  const cell = grid.getCellAt(abstractX, abstractY);\n  const cellRect = grid.getCellRect(cell.col, cell.row);\n\n  if (abstractX < cellRect.left + offset) {\n    return cell.col - 1;\n  }\n\n  if (cellRect.right - offset < abstractX) {\n    return cell.col;\n  }\n\n  return -1;\n}\n/** @private */\n\n\nfunction _getVisibleRect(grid) {\n  const {\n    scroll: {\n      left,\n      top\n    },\n    canvas: {\n      width,\n      height\n    }\n  } = grid[_];\n  return new Rect_1.Rect(left, top, width, height);\n}\n/** @private */\n\n\nfunction _getScrollableVisibleRect(grid) {\n  let frozenColsWidth = 0;\n\n  if (grid[_].frozenColCount > 0) {\n    //\n    const frozenRect = _getFrozenColsRect(grid);\n\n    frozenColsWidth = frozenRect.width;\n  }\n\n  let frozenRowsHeight = 0;\n\n  if (grid[_].frozenRowCount > 0) {\n    //\n    const frozenRect = _getFrozenRowsRect(grid);\n\n    frozenRowsHeight = frozenRect.height;\n  }\n\n  return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n}\n/** @private */\n\n\nfunction _toRelativeRect(grid, absoluteRect) {\n  const rect = absoluteRect.copy();\n\n  const visibleRect = _getVisibleRect(grid);\n\n  rect.offsetLeft(-visibleRect.left);\n  rect.offsetTop(-visibleRect.top);\n  return rect;\n} //end private methods\n//\n//\n//\n//\n\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\n\n\nclass BaseMouseDownMover {\n  constructor(grid) {\n    this._grid = grid;\n    this._handler = new EventHandler_1.EventHandler();\n    this._events = {};\n    this._started = false;\n    this._moved = false;\n  }\n\n  moving(_e) {\n    return !!this._started;\n  }\n\n  lastMoving(e) {\n    // mouseupclick\n    if (this.moving(e)) {\n      return true;\n    }\n\n    const last = this._mouseEndPoint;\n\n    if (!last) {\n      return false;\n    }\n\n    const pt = _getMouseAbstractPoint(this._grid, e);\n\n    return pt != null && pt.x === last.x && pt.y === last.y;\n  }\n\n  _bindMoveAndUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n\n    if (!isTouchEvent(e)) {\n      events.mousemove = handler.on(document.body, \"mousemove\", e => this._mouseMove(e));\n      events.mouseup = handler.on(document.body, \"mouseup\", e => this._mouseUp(e));\n    } else {\n      events.touchmove = handler.on(document.body, \"touchmove\", e => this._mouseMove(e), {\n        passive: false\n      });\n      events.touchend = handler.on(document.body, \"touchend\", e => this._mouseUp(e));\n      events.touchcancel = handler.on(document.body, \"touchcancel\", e => this._mouseUp(e));\n    }\n\n    this._started = true;\n    this._moved = false;\n  }\n\n  _mouseMove(e) {\n    if (!isTouchEvent(e)) {\n      if (getMouseButtons(e) !== 1) {\n        this._mouseUp(e);\n\n        return;\n      }\n    }\n\n    this._moved = this._moveInternal(e) || this._moved\n    /*calculation on after*/\n    ;\n    cancelEvent(e);\n  }\n\n  _moveInternal(_e) {\n    //protected\n    return false;\n  }\n\n  _mouseUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n    handler.off(events.mousemove);\n    handler.off(events.touchmove);\n    handler.off(events.mouseup);\n    handler.off(events.touchend); // handler.off(this._events.mouseleave);\n\n    handler.off(events.touchcancel);\n    this._started = false;\n\n    this._upInternal(e); // mouseupclick\n\n\n    if (this._moved) {\n      //\n      this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n      setTimeout(() => {\n        this._mouseEndPoint = null;\n      }, 10);\n    }\n  }\n\n  _upInternal(_e) {//protected\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n}\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\n\n\nclass CellSelector extends BaseMouseDownMover {\n  start(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._bindMoveAndUp(e);\n\n    this._cell = cell;\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  select(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._cell = cell;\n  }\n\n  _moveInternal(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return false;\n    }\n\n    const {\n      col: oldCol,\n      row: oldRow\n    } = this._cell;\n    const {\n      col: newCol,\n      row: newRow\n    } = cell;\n\n    if (oldCol === newCol && oldRow === newRow) {\n      return false;\n    }\n\n    const grid = this._grid;\n\n    _moveFocusCell.call(grid, newCol, newRow, true); //make visible\n\n\n    const makeVisibleCol = (() => {\n      if (newCol < oldCol && 0 < newCol) {\n        // move left\n        return newCol - 1;\n      } else if (oldCol < newCol && newCol + 1 < grid.colCount) {\n        // move right\n        return newCol + 1;\n      }\n\n      return newCol;\n    })();\n\n    const makeVisibleRow = (() => {\n      if (newRow < oldRow && 0 < newRow) {\n        // move up\n        return newRow - 1;\n      } else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\n        // move down\n        return newRow + 1;\n      }\n\n      return newRow;\n    })();\n\n    if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\n      grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n    }\n\n    this._cell = cell;\n    return true;\n  }\n\n  _getTargetCell(e) {\n    const grid = this._grid;\n\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return null;\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return null;\n    }\n\n    return cell;\n  }\n\n}\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\n\n\nclass ColumnResizer extends BaseMouseDownMover {\n  constructor(grid) {\n    super(grid);\n    this._x = -1;\n    this._preX = -1;\n    this._invalidateAbsoluteLeft = -1;\n    this._targetCol = -1;\n  }\n\n  start(col, e) {\n    let pageX;\n\n    if (!isTouchEvent(e)) {\n      ({\n        pageX\n      } = e);\n    } else {\n      ({\n        pageX\n      } = e.changedTouches[0]);\n    }\n\n    this._x = pageX;\n    this._preX = 0;\n\n    this._bindMoveAndUp(e);\n\n    this._targetCol = col;\n    this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  _moveInternal(e) {\n    const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n    const x = pageX - this._x;\n    const moveX = x - this._preX;\n    this._preX = x;\n\n    const pre = this._grid.getColWidth(this._targetCol);\n\n    let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n\n    if (afterSize < 10 && moveX < 0) {\n      afterSize = 10;\n    }\n\n    _storeAutoColWidthExprs(this._grid);\n\n    _setColWidth(this._grid, this._targetCol, afterSize);\n\n    const rect = _getVisibleRect(this._grid);\n\n    rect.left = this._invalidateAbsoluteLeft;\n\n    _invalidateRect(this._grid, rect);\n\n    this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\n      col: this._targetCol\n    });\n\n    return true;\n  }\n\n  _upInternal(_e) {\n    const grid = this._grid;\n\n    if (grid.updateScroll()) {\n      grid.invalidate();\n    }\n  }\n\n}\n/** @private */\n\n\nfunction setSafeInputValue(input, value) {\n  const {\n    type\n  } = input;\n  input.type = \"\";\n  input.value = value;\n\n  if (type) {\n    input.type = type;\n  }\n}\n\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\n/**\r\n * Manage focus\r\n * @private\r\n */\n\nclass FocusControl extends EventTarget_1.EventTarget {\n  constructor(grid, parentElement, scrollable, selection) {\n    super();\n    this._grid = grid;\n    this._scrollable = scrollable;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    const input = this._input = document.createElement(\"input\");\n    input.classList.add(\"grid-focus-control\");\n    input.readOnly = true;\n    parentElement.appendChild(input);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n      input.style.font = grid.font || \"16px sans-serif\";\n      this._isComposition = true;\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n\n      grid.focus();\n    });\n    let lastInputValue;\n\n    const inputClear = storeLastInputValue => {\n      lastInputValue = input.value;\n\n      if (this._isComposition) {\n        return;\n      }\n\n      if (lastInputValue !== \"\") {\n        setSafeInputValue(input, \"\");\n      }\n\n      if (!storeLastInputValue) {\n        lastInputValue = \"\";\n      }\n    };\n\n    const handleCompositionEnd = () => {\n      this._isComposition = false;\n      input.classList.remove(\"composition\");\n      input.style.font = \"\";\n      const {\n        value\n      } = input;\n      inputClear(false);\n\n      if (!input.readOnly) {\n        this.fireListeners(\"input\", value);\n      }\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n    };\n\n    handler.on(input, \"compositionend\", _e => {\n      this._compositionEnd = setTimeout(handleCompositionEnd, 1);\n    });\n    selection.listen(\"before_hook\", () => {\n      if (this._compositionEnd) {\n        handleCompositionEnd();\n      }\n    });\n    handler.on(input, \"keypress\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!input.readOnly && e.key && e.key.length === 1) {\n        if (e.ctrlKey || e.metaKey) {\n          if (e.key === \"c\") {//copy! for Firefox & Safari\n          } else if (e.key === \"v\") {//paste! for Firefox & Safari\n          }\n        } else {\n          if (e.key === \" \") {\n            // Since the full-width space cannot be determined, it is processed by \"input\".\n            return;\n          }\n\n          this.fireListeners(\"input\", e.key);\n          cancelEvent(e);\n        }\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"keydown\", e => {\n      var _a;\n\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n          cancelEvent(e);\n        }\n\n        return;\n      }\n\n      const keyCode = getKeyCode(e);\n      let stopCellMove = false;\n      const evt = {\n        keyCode,\n        event: e,\n\n        stopCellMoving() {\n          stopCellMove = true;\n        }\n\n      };\n      this.fireListeners(\"keydown\", evt);\n\n      if (!input.readOnly && lastInputValue) {\n        // for Safari\n        this.fireListeners(\"input\", lastInputValue);\n      }\n\n      if (!stopCellMove) this.fireKeyDownMove(keyCode, e);\n\n      if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) && (keyCode === KEY_DEL || keyCode === KEY_BS)) {\n        this.fireListeners(\"delete\", e);\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"keyup\", _e => {\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n        }\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"input\", e => {\n      if (e.data === \" \" || e.data === \"\") {\n        // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\n        this.fireListeners(\"input\", e.data);\n      }\n\n      inputClear(true);\n    });\n\n    if (utils_1.browser.IE) {\n      handler.on(document, \"keydown\", e => {\n        if (e.target !== input) {\n          return;\n        }\n\n        const keyCode = getKeyCode(e);\n\n        if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n          // When text is not selected copy-event is not emit, on IE.\n          setSafeInputValue(input, \"dummy\");\n          input.select();\n          setTimeout(() => {\n            setSafeInputValue(input, \"\");\n          }, 100);\n        } else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\n          // When input is read-only paste-event is not emit, on IE.\n          if (input.readOnly) {\n            input.readOnly = false;\n            setTimeout(() => {\n              input.readOnly = true;\n              setSafeInputValue(input, \"\");\n            }, 10);\n          }\n        }\n      });\n    }\n\n    if (utils_1.browser.Edge) {\n      handler.once(document, \"keydown\", e => {\n        var _a;\n\n        if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n          return;\n        } // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\n\n\n        const dummyInput = document.createElement(\"input\");\n        grid.getElement().appendChild(dummyInput);\n        dummyInput.focus();\n        input.focus();\n        (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\n      });\n    }\n\n    handler.on(document, \"paste\", e => {\n      if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n        return;\n      }\n\n      let pasteText = undefined;\n\n      if (utils_1.browser.IE) {\n        // IE\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        pasteText = window.clipboardData.getData(\"Text\");\n      } else {\n        const clipboardData = e.clipboardData;\n\n        if (clipboardData.items) {\n          // Chrome & Firefox & Edge\n          pasteText = clipboardData.getData(\"text/plain\");\n        } else {\n          // Safari\n          if (-1 !== Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\n            pasteText = clipboardData.getData(\"Text\");\n          }\n        }\n      }\n\n      if (pasteText != null && pasteText.length) {\n        this.fireListeners(\"paste\", {\n          value: pasteText,\n          event: e\n        });\n      }\n    });\n    handler.on(document, \"copy\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n        return;\n      }\n\n      setSafeInputValue(input, \"\");\n      const data = utils_1.array.find(this.fireListeners(\"copy\"), r => r != null);\n\n      if (data != null) {\n        cancelEvent(e);\n\n        if (utils_1.browser.IE) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          window.clipboardData.setData(\"Text\", data); // IE\n        } else {\n          e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\n        }\n      }\n    });\n    handler.on(input, \"focus\", e => {\n      this.fireListeners(\"focus\", e);\n    });\n    handler.on(input, \"blur\", e => {\n      this.fireListeners(\"blur\", e);\n    });\n  }\n\n  fireKeyDownMove(keyCode, e) {\n    var _a, _b, _c;\n\n    const fn = this._keyDownMoveCallback;\n\n    if (!fn) {\n      return;\n    }\n\n    if (this._isComposition) {\n      return;\n    }\n\n    if (keyCode === KEY_LEFT || keyCode === KEY_UP || keyCode === KEY_RIGHT || keyCode === KEY_DOWN || keyCode === KEY_HOME || keyCode === KEY_END) {\n      fn(e);\n    } else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n      fn(e);\n    } else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n      fn(e);\n    } else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n      fn(e);\n    }\n  }\n\n  onKeyDownMove(fn) {\n    this._keyDownMoveCallback = fn;\n  }\n\n  onKeyDown(fn) {\n    return this.listen(\"keydown\", fn);\n  }\n\n  onInput(fn) {\n    return this.listen(\"input\", fn);\n  }\n\n  onDelete(fn) {\n    return this.listen(\"delete\", fn);\n  }\n\n  onCopy(fn) {\n    return this.listen(\"copy\", fn);\n  }\n\n  onPaste(fn) {\n    return this.listen(\"paste\", fn);\n  }\n\n  onFocus(fn) {\n    return this.listen(\"focus\", fn);\n  }\n\n  onBlur(fn) {\n    return this.listen(\"blur\", fn);\n  }\n\n  focus() {\n    // this._input.value = '';\n    this._input.focus();\n  }\n\n  setFocusRect(rect) {\n    const input = this._input;\n\n    const top = this._scrollable.calcTop(rect.top);\n\n    input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\n\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n  }\n\n  get editMode() {\n    return !this._input.readOnly;\n  }\n\n  set editMode(editMode) {\n    this._input.readOnly = !editMode;\n  }\n\n  resetInputStatus() {\n    var _a;\n\n    const el = this._input;\n\n    if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const composition = el.classList.contains(\"composition\");\n    const attrs = el.attributes;\n    const removeNames = [];\n\n    for (let i = 0, n = attrs.length; i < n; i++) {\n      const attr = attrs[i];\n      if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0) continue;\n\n      if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\n        removeNames.push(attr.name);\n      }\n    }\n\n    removeNames.forEach(removeName => {\n      el.removeAttribute(removeName);\n    });\n\n    for (const name in this._inputStatus) {\n      el.setAttribute(name, this._inputStatus[name]);\n    }\n\n    if (composition) {\n      el.classList.add(\"composition\");\n      el.style.font = this._grid.font || \"16px sans-serif\";\n    } else {\n      el.classList.remove(\"composition\");\n    }\n\n    el.classList.remove(\"grid-focus-control--stored-status\");\n  }\n\n  storeInputStatus() {\n    const el = this._input;\n\n    if (el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const inputStatus = this._inputStatus = {};\n    const attrs = el.attributes;\n\n    for (let i = 0, n = attrs.length; i < n; i++) {\n      const attr = attrs[i];\n      if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0) continue;\n      inputStatus[attr.name] = attr.value;\n    }\n\n    el.classList.add(\"grid-focus-control--stored-status\");\n  }\n\n  setDefaultInputStatus() {// \n    // this._input.style.font = this._grid.font || '16px sans-serif';\n  }\n\n  get input() {\n    return this._input;\n  }\n\n  dispose() {\n    super.dispose();\n\n    this._handler.dispose();\n  }\n\n}\n/**\r\n * Selected area management\r\n */\n\n\nclass Selection extends EventTarget_1.EventTarget {\n  constructor(grid) {\n    super();\n    this._grid = grid;\n    this._sel = {\n      col: 0,\n      row: 0\n    };\n    this._focus = {\n      col: 0,\n      row: 0\n    };\n    this._start = {\n      col: 0,\n      row: 0\n    };\n    this._end = {\n      col: 0,\n      row: 0\n    };\n  }\n\n  get range() {\n    const start = this._start;\n    const end = this._end;\n    const startCol = Math.min(start.col, end.col);\n    const startRow = Math.min(start.row, end.row);\n    const endCol = Math.max(start.col, end.col);\n    const endRow = Math.max(start.row, end.row);\n    return {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    };\n  }\n\n  set range(range) {\n    this._callBeforeHooks();\n\n    const startCol = Math.min(range.start.col, range.end.col);\n    const startRow = Math.min(range.start.row, range.end.row);\n    const endCol = Math.max(range.start.col, range.end.col);\n    const endRow = Math.max(range.start.row, range.end.row);\n\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col: startCol,\n        row: startRow\n      };\n      this._focus = {\n        col: startCol,\n        row: startRow\n      };\n      this._start = {\n        col: startCol,\n        row: startRow\n      };\n      this._end = {\n        col: endCol,\n        row: endRow\n      };\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  get focus() {\n    const {\n      col,\n      row\n    } = this._focus;\n    return {\n      col,\n      row\n    };\n  }\n\n  get select() {\n    const {\n      col,\n      row\n    } = this._sel;\n    return {\n      col,\n      row\n    };\n  }\n\n  set select(cell) {\n    this._callBeforeHooks();\n\n    this._wrapFireSelectedEvent(() => {\n      const {\n        col = 0,\n        row = 0\n      } = cell;\n\n      this._setSelectCell(col, row);\n\n      this._setFocusCell(col, row, true, true);\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  _setSelectCell(col, row) {\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col,\n        row\n      };\n      this._start = {\n        col,\n        row\n      };\n    });\n  }\n\n  _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\n    if (!ignoreBeforeHook) this._callBeforeHooks();\n\n    this._wrapFireSelectedEvent(() => {\n      if (!keepSelect) {\n        this._setSelectCell(col, row);\n      }\n\n      this._focus = {\n        col,\n        row\n      };\n      this._end = {\n        col,\n        row\n      };\n    });\n  }\n\n  _wrapFireSelectedEvent(callback) {\n    if (this._isWrapped) {\n      callback();\n    } else {\n      this._isWrapped = true;\n\n      try {\n        const before = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: false,\n          after: null\n        };\n        callback();\n        const after = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: true,\n          before: {\n            col: before.col,\n            row: before.row\n          }\n        };\n        before.after = {\n          col: after.col,\n          row: after.row\n        };\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\n      } finally {\n        this._isWrapped = false;\n      }\n    }\n  }\n\n  _updateGridRange() {\n    const {\n      rowCount,\n      colCount\n    } = this._grid;\n    const points = [this._sel, this._focus, this._start, this._end];\n    let needChange = false;\n\n    for (let i = 0; i < points.length; i++) {\n      if (colCount <= points[i].col || rowCount <= points[i].row) {\n        needChange = true;\n        break;\n      }\n    }\n\n    if (!needChange) {\n      return false;\n    }\n\n    this._wrapFireSelectedEvent(() => {\n      points.forEach(p => {\n        p.col = Math.min(colCount - 1, p.col);\n        p.row = Math.min(rowCount - 1, p.row);\n      });\n    });\n\n    return true;\n  }\n\n  _callBeforeHooks() {\n    this.fireListeners(\"before_hook\");\n  }\n\n}\n/**\r\n * This class manages the drawing process for each layer\r\n */\n\n/** @private */\n\n\nclass DrawLayers {\n  constructor() {\n    this._layers = {};\n  }\n\n  addDraw(level, fn) {\n    const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\n    l.addDraw(fn);\n  }\n\n  draw(ctx) {\n    const list = [];\n\n    for (const k in this._layers) {\n      list.push(this._layers[k]);\n    }\n\n    list.sort((a, b) => a.level - b.level);\n    list.forEach(l => l.draw(ctx));\n  }\n\n}\n/** @private */\n\n\nclass DrawLayer {\n  constructor(level) {\n    this._level = level;\n    this._list = [];\n  }\n\n  get level() {\n    return this._level;\n  }\n\n  addDraw(fn) {\n    this._list.push(fn);\n  }\n\n  draw(ctx) {\n    this._list.forEach(fn => {\n      ctx.save();\n\n      try {\n        fn(ctx);\n      } finally {\n        ctx.restore();\n      }\n    });\n  }\n\n}\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\n\n\nclass DrawCellContext {\n  //  private _grid: any;\n  //  private _onTerminate: any;\n\n  /**\r\n   * constructor\r\n   * @param {number} col index of column\r\n   * @param {number} row index of row\r\n   * @param {CanvasRenderingContext2D} ctx context\r\n   * @param {Rect} rect rect of cell area\r\n   * @param {Rect} drawRect rect of drawing area\r\n   * @param {boolean} drawing `true` if drawing is in progress\r\n   * @param {object} selection the selection\r\n   * @param {Array} drawLayers array of draw layers\r\n   * @private\r\n   */\n  constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\n    this._rectFilter = null;\n    this._col = col;\n    this._row = row;\n    this._mode = 0;\n    this._ctx = ctx;\n    this._rect = rect;\n    this._drawRect = drawRect;\n    this._drawing = drawing;\n    this._selection = selection;\n    this._drawLayers = drawLayers;\n    this._childContexts = [];\n  }\n\n  get drawing() {\n    if (this._mode === 0) {\n      return this._drawing;\n    } else {\n      return true;\n    }\n  }\n\n  get row() {\n    return this._row;\n  }\n\n  get col() {\n    return this._col;\n  }\n\n  cancel() {\n    this._cancel = true;\n\n    this._childContexts.forEach(ctx => {\n      ctx.cancel();\n    });\n  }\n  /**\r\n   * select status.\r\n   * @return {object} select status\r\n   */\n\n\n  getSelection() {\n    return {\n      select: this._selection.select,\n      range: this._selection.range\n    };\n  }\n  /**\r\n   * Canvas context.\r\n   * @return {CanvasRenderingContext2D} Canvas context.\r\n   */\n\n\n  getContext() {\n    if (this._mode === 0) {\n      return this._ctx;\n    } else {\n      return _getInitContext.call(this._grid);\n    }\n  }\n  /**\r\n   * Rectangle of cell.\r\n   * @return {Rect} rect Rectangle of cell.\r\n   */\n\n\n  getRect() {\n    const rectFilter = this._rectFilter;\n    return rectFilter ? rectFilter(this._getRectInternal()) : this._getRectInternal();\n  }\n\n  setRectFilter(rectFilter) {\n    this._rectFilter = rectFilter;\n  }\n  /**\r\n   * Rectangle of Drawing range.\r\n   * @return {Rect} Rectangle of Drawing range.\r\n   */\n\n\n  getDrawRect() {\n    if (this._cancel) {\n      return null;\n    }\n\n    if (this._mode === 0) {\n      return this._drawRect;\n    } else {\n      if (this._isOutOfRange()) {\n        return null;\n      }\n\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      return this._toRelativeDrawRect(absoluteRect);\n    }\n  }\n\n  _isOutOfRange() {\n    const {\n      colCount,\n      rowCount\n    } = this._grid;\n    return colCount <= this._col || rowCount <= this._row;\n  }\n  /**\r\n   * get Context of current state\r\n   * @return {DrawCellContext} current DrawCellContext.\r\n   */\n\n\n  toCurrentContext() {\n    if (this._mode === 0) {\n      return this;\n    } else {\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      const rect = _toRelativeRect(this._grid, absoluteRect);\n\n      const drawRect = this._isOutOfRange() ? null : this._toRelativeDrawRect(absoluteRect);\n      const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers); // toCurrentContext  toCurrentContext\n\n      context.toCurrentContext = this.toCurrentContext.bind(this);\n\n      this._childContexts.push(context);\n\n      if (this._cancel) {\n        context.cancel();\n      }\n\n      context._rectFilter = this._rectFilter;\n      return context;\n    }\n  }\n\n  addLayerDraw(level, fn) {\n    this._drawLayers.addDraw(level, fn);\n  }\n\n  _toRelativeDrawRect(absoluteRect) {\n    const visibleRect = _getVisibleRect(this._grid);\n\n    let rect = absoluteRect.copy();\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    const grid = this._grid;\n    const isFrozenCell = grid.isFrozenCell(this._col, this._row);\n\n    if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n      const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\n      rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n    }\n\n    if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n      const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\n      rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n    }\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    rect.offsetLeft(-visibleRect.left);\n    rect.offsetTop(-visibleRect.top);\n    return rect;\n  }\n\n  _delayMode(grid, onTerminate) {\n    this._mode = 1;\n    this._ctx = null;\n    this._rect = null;\n    this._drawRect = null;\n    this._grid = grid;\n    this._onTerminate = onTerminate;\n  }\n  /**\r\n   * terminate\r\n   * @return {void}\r\n   */\n\n\n  terminate() {\n    var _a;\n\n    if (this._mode !== 0) {\n      (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n  }\n\n  _getRectInternal() {\n    if (this._mode === 0) {\n      return this._rect;\n    } else {\n      if (this._rect) {\n        return this._rect;\n      }\n\n      return this._grid.getCellRelativeRect(this._col, this._row);\n    }\n  }\n\n}\n/** @private */\n\n\nconst protectedKey = _;\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\n\nclass DrawGrid extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n  }\n\n  constructor(options = {}) {\n    super();\n    const {\n      rowCount = 10,\n      colCount = 10,\n      frozenColCount = 0,\n      frozenRowCount = 0,\n      defaultRowHeight = 40,\n      defaultColWidth = 80,\n      font,\n      underlayBackgroundColor,\n      keyboardOptions,\n      parentElement,\n      disableColumnResize,\n      trimOnPaste\n    } = options;\n    const protectedSpace = this[_] = {};\n    style.initDocument();\n    protectedSpace.element = createRootElement();\n    protectedSpace.scrollable = new Scrollable_1.Scrollable();\n    protectedSpace.handler = new EventHandler_1.EventHandler();\n    protectedSpace.selection = new Selection(this);\n    protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\n    protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\n    protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    protectedSpace.rowCount = rowCount;\n    protectedSpace.colCount = colCount;\n    protectedSpace.frozenColCount = frozenColCount;\n    protectedSpace.frozenRowCount = frozenRowCount;\n    protectedSpace.defaultRowHeight = defaultRowHeight;\n    protectedSpace.defaultColWidth = defaultColWidth;\n    protectedSpace.font = font;\n    protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\n    protectedSpace.keyboardOptions = keyboardOptions;\n    protectedSpace.disableColumnResize = disableColumnResize;\n    protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false; /////\n\n    protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsLimit = {};\n    protectedSpace.calcWidthContext = {\n      _: protectedSpace,\n\n      get full() {\n        return this._.canvas.width;\n      },\n\n      get em() {\n        return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\n      }\n\n    };\n    protectedSpace.columnResizer = new ColumnResizer(this);\n    protectedSpace.cellSelector = new CellSelector(this);\n    protectedSpace.drawCells = {};\n    protectedSpace.cellTextOverflows = {};\n    protectedSpace.focusedGrid = false;\n    protectedSpace.element.appendChild(protectedSpace.canvas);\n    protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\n    protectedSpace.scroll = {\n      left: 0,\n      top: 0\n    };\n    this.updateScroll();\n\n    if (parentElement) {\n      parentElement.appendChild(protectedSpace.element);\n      this.updateSize();\n    } else {\n      this.updateSize();\n    }\n\n    _bindEvents.call(this);\n\n    this.bindEventsInternal();\n  }\n  /**\r\n   * Get root element.\r\n   * @returns {HTMLElement} root element\r\n   */\n\n\n  getElement() {\n    return this[_].element;\n  }\n  /**\r\n   * Get canvas element.\r\n   */\n\n\n  get canvas() {\n    return this[_].canvas;\n  }\n  /**\r\n   * Focus the grid.\r\n   * @return {void}\r\n   */\n\n\n  focus() {\n    const {\n      col,\n      row\n    } = this[_].selection.select;\n    this.focusCell(col, row);\n  }\n\n  hasFocusGrid() {\n    return this[_].focusedGrid;\n  }\n  /**\r\n   * Get the selection instance.\r\n   */\n\n\n  get selection() {\n    return this[_].selection;\n  }\n  /**\r\n   * Get the number of rows.\r\n   */\n\n\n  get rowCount() {\n    return this[_].rowCount;\n  }\n  /**\r\n   * Set the number of rows.\r\n   */\n\n\n  set rowCount(rowCount) {\n    this[_].rowCount = rowCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\r\n   * Get the number of columns.\r\n   */\n\n\n  get colCount() {\n    return this[_].colCount;\n  }\n  /**\r\n   * Set the number of columns.\r\n   */\n\n\n  set colCount(colCount) {\n    this[_].colCount = colCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\r\n   * Get the number of frozen columns.\r\n   */\n\n\n  get frozenColCount() {\n    return this[_].frozenColCount;\n  }\n  /**\r\n   * Set the number of frozen columns.\r\n   */\n\n\n  set frozenColCount(frozenColCount) {\n    this[_].frozenColCount = frozenColCount;\n  }\n  /**\r\n   * Get the number of frozen rows.\r\n   */\n\n\n  get frozenRowCount() {\n    return this[_].frozenRowCount;\n  }\n  /**\r\n   * Set the number of frozen rows.\r\n   */\n\n\n  set frozenRowCount(frozenRowCount) {\n    this[_].frozenRowCount = frozenRowCount;\n  }\n  /**\r\n   * Get the default row height.\r\n   *\r\n   */\n\n\n  get defaultRowHeight() {\n    return this[_].defaultRowHeight;\n  }\n  /**\r\n   * Set the default row height.\r\n   */\n\n\n  set defaultRowHeight(defaultRowHeight) {\n    this[_].defaultRowHeight = defaultRowHeight;\n  }\n  /**\r\n   * Get the default column width.\r\n   */\n\n\n  get defaultColWidth() {\n    return this[_].defaultColWidth;\n  }\n  /**\r\n   * Set the default column width.\r\n   */\n\n\n  set defaultColWidth(defaultColWidth) {\n    this[_].defaultColWidth = defaultColWidth;\n  }\n  /**\r\n   * Get the font definition as a string.\r\n   */\n\n\n  get font() {\n    return this[_].font;\n  }\n  /**\r\n   * Set the font definition with the given string.\r\n   */\n\n\n  set font(font) {\n    this[_].font = font;\n  }\n  /**\r\n   * Get the background color of the underlay.\r\n   */\n\n\n  get underlayBackgroundColor() {\n    return this[_].underlayBackgroundColor;\n  }\n  /**\r\n   * Set the background color of the underlay.\r\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    this[_].underlayBackgroundColor = underlayBackgroundColor;\n  }\n  /**\r\n   * If set to true, trim the pasted text on pasting.\r\n   */\n\n\n  get trimOnPaste() {\n    return this[_].trimOnPaste;\n  }\n\n  set trimOnPaste(trimOnPaste) {\n    this[_].trimOnPaste = trimOnPaste;\n  }\n\n  get keyboardOptions() {\n    var _a;\n\n    return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\n  }\n\n  set keyboardOptions(keyboardOptions) {\n    this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  configure(name, value) {\n    const cfg = this[_].config || (this[_].config = {});\n\n    if (value != null) {\n      cfg[name] = value;\n    }\n\n    return cfg[name];\n  }\n  /**\r\n   * Apply the changed size.\r\n   * @return {void}\r\n   */\n\n\n  updateSize() {\n    //\n    const {\n      canvas\n    } = this[_];\n    canvas.style.width = \"\";\n    canvas.style.height = \"\";\n    const width = Math.floor(canvas.offsetWidth || canvas.parentElement.offsetWidth - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    const height = Math.floor(canvas.offsetHeight || canvas.parentElement.offsetHeight - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    canvas.width = width;\n    canvas.height = height; //style\n\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    const {\n      focus\n    } = this[_].selection;\n\n    this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\n  }\n  /**\r\n   * Apply the changed scroll size.\r\n   * @return {boolean} `true` if there was a change in the scroll size\r\n   */\n\n\n  updateScroll() {\n    const {\n      scrollable\n    } = this[_];\n\n    const newHeight = _getScrollHeight.call(this);\n\n    const newWidth = _getScrollWidth(this);\n\n    if (newHeight === scrollable.scrollHeight && newWidth === scrollable.scrollWidth) {\n      return false;\n    }\n\n    scrollable.setScrollSize(newWidth, newHeight);\n    this[_].scroll = {\n      left: scrollable.scrollLeft,\n      top: scrollable.scrollTop\n    };\n    const {\n      focus\n    } = this[_].selection;\n\n    this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\n\n    return true;\n  }\n  /**\r\n   * Get the row height of the given the row index.\r\n   * @param  {number} row The row index\r\n   * @return {number} The row height\r\n   */\n\n\n  getRowHeight(row) {\n    return _getRowHeight.call(this, row);\n  }\n  /**\r\n   * Set the row height of the given the row index.\r\n   * @param  {number} row The row index\r\n   * @param  {number} height The row height\r\n   * @return {void}\r\n   */\n\n\n  setRowHeight(row, height) {\n    _setRowHeight(this, row, height);\n  }\n  /**\r\n   * Get the column width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column width\r\n   */\n\n\n  getColWidth(col) {\n    return _getColWidth(this, col);\n  }\n  /**\r\n   * Set the column width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} width The column width\r\n   * @return {void}\r\n   */\n\n\n  setColWidth(col, width) {\n    _setColWidth(this, col, width);\n  }\n  /**\r\n   * Get the column max width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column max width\r\n   */\n\n\n  getMaxColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.max || undefined;\n  }\n  /**\r\n   * Set the column max width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} maxwidth The column max width\r\n   * @return {void}\r\n   */\n\n\n  setMaxColWidth(col, maxwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\n    if (maxwidth != null) {\n      obj.max = maxwidth;\n    } else {\n      delete obj.max;\n    }\n  }\n  /**\r\n   * Get the column min width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column min width\r\n   */\n\n\n  getMinColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.min || undefined;\n  }\n  /**\r\n   * Set the column min width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} minwidth The column min width\r\n   * @return {void}\r\n   */\n\n\n  setMinColWidth(col, minwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\n    if (minwidth != null) {\n      obj.min = minwidth;\n    } else {\n      delete obj.min;\n    }\n  }\n  /**\r\n   * Get the rect of the cell.\r\n   * @param {number} col index of column, of the cell\r\n   * @param {number} row index of row, of the cell\r\n   * @returns {Rect} the rect of the cell.\r\n   */\n\n\n  getCellRect(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    let absoluteLeft = _getColsWidth(this, 0, col - 1);\n\n    const width = _getColWidth(this, col);\n\n    if (isFrozenCell && isFrozenCell.col) {\n      absoluteLeft += this[_].scroll.left;\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\n\n    const height = _getRowHeight.call(this, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      absoluteTop += this[_].scroll.top;\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n  /**\r\n   * Get the relative rectangle of the cell.\r\n   * @param {number} col index of column, of the cell\r\n   * @param {number} row index of row, of the cell\r\n   * @returns {Rect} the rect of the cell.\r\n   */\n\n\n  getCellRelativeRect(col, row) {\n    return _toRelativeRect(this, this.getCellRect(col, row));\n  }\n  /**\r\n   * Get the rectangle of the cells area.\r\n   * @param {number} startCol index of the starting column, of the cell\r\n   * @param {number} startRow index of the starting row, of the cell\r\n   * @param {number} endCol index of the ending column, of the cell\r\n   * @param {number} endRow index of the ending row, of the cell\r\n   * @returns {Rect} the rect of the cells.\r\n   */\n\n\n  getCellsRect(startCol, startRow, endCol, endRow) {\n    const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n    const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let width = _getColsWidth(this, startCol, endCol);\n\n    if (isFrozenStartCell && isFrozenStartCell.col) {\n      const scrollLeft = this[_].scroll.left;\n      absoluteLeft += scrollLeft;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.col) {\n        width -= scrollLeft;\n        width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n      }\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let height = _getRowsHeight.call(this, startRow, endRow);\n\n    if (isFrozenStartCell && isFrozenStartCell.row) {\n      const scrollTop = this[_].scroll.top;\n      absoluteTop += scrollTop;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.row) {\n        height -= scrollTop;\n        height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n      }\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n\n  getCellRangeRect(range) {\n    return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n\n  isFrozenCell(col, row) {\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = this[_];\n    const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\n    const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\n\n    if (isFrozenRow || isFrozenCol) {\n      return {\n        row: isFrozenRow,\n        col: isFrozenCol\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getRowAt(absoluteY) {\n    const frozen = _getTargetFrozenRowAt(this, absoluteY);\n\n    if (frozen) {\n      return frozen.row;\n    }\n\n    const row = _getTargetRowAt.call(this, absoluteY);\n\n    return row ? row.row : -1;\n  }\n\n  getColAt(absoluteX) {\n    const frozen = _getTargetFrozenColAt(this, absoluteX);\n\n    if (frozen) {\n      return frozen.col;\n    }\n\n    const col = _getTargetColAt(this, absoluteX);\n\n    return col ? col.col : -1;\n  }\n\n  getCellAt(absoluteX, absoluteY) {\n    return {\n      row: this.getRowAt(absoluteY),\n      col: this.getColAt(absoluteX)\n    };\n  }\n  /**\r\n   * Scroll to where cell is visible.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  makeVisibleCell(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n      return;\n    }\n\n    const rect = this.getCellRect(col, row);\n\n    const visibleRect = _getScrollableVisibleRect(this);\n\n    if (visibleRect.contains(rect)) {\n      return;\n    }\n\n    const {\n      scrollable\n    } = this[_];\n\n    if (!isFrozenCell || !isFrozenCell.col) {\n      if (rect.left < visibleRect.left) {\n        scrollable.scrollLeft -= visibleRect.left - rect.left;\n      } else if (visibleRect.right < rect.right) {\n        scrollable.scrollLeft -= visibleRect.right - rect.right;\n      }\n    }\n\n    if (!isFrozenCell || !isFrozenCell.row) {\n      if (rect.top < visibleRect.top) {\n        scrollable.scrollTop -= visibleRect.top - rect.top;\n      } else if (visibleRect.bottom < rect.bottom) {\n        scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n      }\n    }\n  }\n  /**\r\n   * Moves the focus cursor to the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  setFocusCursor(col, row) {\n    const {\n      focusControl\n    } = this[_];\n    const oldEditMode = focusControl.editMode;\n    focusControl.setFocusRect(this.getCellRect(col, row));\n\n    _updatedSelection.call(this);\n\n    if (oldEditMode && !focusControl.editMode) {\n      focusControl.resetInputStatus();\n    }\n  }\n  /**\r\n   * Focus the cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  focusCell(col, row) {\n    this.setFocusCursor(col, row); // Failure occurs in IE if focus is not last\n\n    this[_].focusControl.focus();\n  }\n  /**\r\n   * Redraws the range of the given cell.\r\n   * @param  {number} col The column index of cell.\r\n   * @param  {number} row The row index of cell.\r\n   * @return {void}\r\n   */\n\n\n  invalidateCell(col, row) {\n    this.invalidateGridRect(col, row);\n  }\n  /**\r\n   * Redraws the range of the given cells.\r\n   * @param {number} startCol index of the starting column, of the cell\r\n   * @param {number} startRow index of the starting row, of the cell\r\n   * @param {number} endCol index of the ending column, of the cell\r\n   * @param {number} endRow index of the ending row, of the cell\r\n   * @return {void}\r\n   */\n\n\n  invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n    const offset = this.getOffsetInvalidateCells();\n\n    if (offset > 0) {\n      startCol -= offset;\n      startRow -= offset;\n      endCol += offset;\n      endRow += offset;\n    }\n\n    const visibleRect = _getVisibleRect(this);\n\n    const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n    const invalidateTarget = visibleRect.intersection(cellsRect);\n\n    if (invalidateTarget) {\n      const {\n        frozenColCount,\n        frozenRowCount\n      } = this[_];\n\n      if (frozenColCount > 0 && endCol >= frozenColCount) {\n        const frozenRect = _getFrozenColsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\n        }\n      }\n\n      if (frozenRowCount > 0 && endRow >= frozenRowCount) {\n        const frozenRect = _getFrozenRowsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n        }\n      }\n\n      _invalidateRect(this, invalidateTarget);\n    }\n  }\n\n  invalidateCellRange(range) {\n    this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n  /**\r\n   * Redraws the whole grid.\r\n   * @return {void}\r\n   */\n\n\n  invalidate() {\n    const visibleRect = _getVisibleRect(this);\n\n    _invalidateRect(this, visibleRect);\n  }\n  /**\r\n   * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n   * @returns {number}\r\n   */\n\n\n  get visibleRowCount() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let count = 0;\n    const {\n      rowCount\n    } = this;\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = absoluteTop + height;\n\n      if (visibleRect.bottom < bottom) {\n        break;\n      }\n\n      count++;\n      absoluteTop = bottom;\n    }\n\n    return count;\n  }\n  /**\r\n   * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n   * @returns {number}\r\n   */\n\n\n  get visibleColCount() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let count = 0;\n    const {\n      colCount\n    } = this;\n\n    for (let col = startCol; col < colCount; col++) {\n      const width = _getColWidth(this, col);\n\n      const right = absoluteLeft + width;\n\n      if (visibleRect.right < right) {\n        break;\n      }\n\n      count++;\n      absoluteLeft = right;\n    }\n\n    return count;\n  }\n  /**\r\n   * Get the index of the first row in the scrollable region that is visible.\r\n   * @returns {number}\r\n   */\n\n\n  get topRow() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n  }\n  /**\r\n   * Get the index of the first column in the scrollable region that is visible.\r\n   * @returns {number}\r\n   */\n\n\n  get leftCol() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n  }\n  /**\r\n   * gets or sets the number of pixels that an element's content is scrolled vertically\r\n   */\n\n\n  get scrollTop() {\n    return this[_].scrollable.scrollTop;\n  }\n\n  set scrollTop(scrollTop) {\n    this[_].scrollable.scrollTop = scrollTop;\n  }\n  /**\r\n   * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n   */\n\n\n  get scrollLeft() {\n    return this[_].scrollable.scrollLeft;\n  }\n\n  set scrollLeft(scrollLeft) {\n    this[_].scrollable.scrollLeft = scrollLeft;\n  }\n  /**\r\n   * Get the value of cell with the copy action.\r\n   * <p>\r\n   * Please implement\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param col Column index of cell.\r\n   * @param row Row index of cell.\r\n   * @param range Copy range.\r\n   * @return {string} the value of cell\r\n   */\n\n\n  getCopyCellValue(_col, _row, _range) {\n    //Please implement get cell value!!\n    return undefined;\n  }\n  /**\r\n   * Get the overflowed text in the cell rectangle, from the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {string | null} The text overflowing the cell rect.\r\n   */\n\n\n  getCellOverflowText(col, row) {\n    const key = `${col}:${row}`;\n    return this[_].cellTextOverflows[key] || null;\n  }\n  /**\r\n   * Set the overflowed text in the cell rectangle, to the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n   * @return {void}\r\n   */\n\n\n  setCellOverflowText(col, row, overflowText) {\n    const key = `${col}:${row}`;\n\n    if (overflowText) {\n      this[_].cellTextOverflows[key] = typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\n    } else {\n      delete this[_].cellTextOverflows[key];\n    }\n  }\n\n  addDisposable(disposable) {\n    if (!disposable || !disposable.dispose || typeof disposable.dispose !== \"function\") {\n      throw new Error(\"not disposable!\");\n    }\n\n    const disposables = this[_].disposables = this[_].disposables || [];\n    disposables.push(disposable);\n  }\n  /**\r\n   * Dispose the grid instance.\r\n   * @returns {void}\r\n   */\n\n\n  dispose() {\n    super.dispose();\n    const protectedSpace = this[_];\n    protectedSpace.handler.dispose();\n    protectedSpace.scrollable.dispose();\n    protectedSpace.focusControl.dispose();\n    protectedSpace.columnResizer.dispose();\n    protectedSpace.cellSelector.dispose();\n\n    if (protectedSpace.disposables) {\n      protectedSpace.disposables.forEach(disposable => disposable.dispose());\n      protectedSpace.disposables = null;\n    }\n\n    const {\n      parentElement\n    } = protectedSpace.element;\n\n    if (parentElement) {\n      parentElement.removeChild(protectedSpace.element);\n    }\n  }\n\n  getAttachCellsArea(range) {\n    return {\n      element: this.getElement(),\n      rect: _toRelativeRect(this, this.getCellRangeRect(range))\n    };\n  }\n\n  onKeyDownMove(evt) {\n    _onKeyDownMove.call(this, evt);\n  }\n\n  bindEventsInternal() {//nop\n  }\n\n  getTargetRowAtInternal(_absoluteY) {// \n  }\n\n  getRowsHeightInternal(_startRow, _endRow) {// \n  }\n\n  getRowHeightInternal(_row) {// \n  }\n\n  getScrollHeightInternal(_row) {// \n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col\n  }) {\n    return col - 1;\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col\n  }) {\n    return col + 1;\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    row\n  }) {\n    return row - 1;\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    row\n  }) {\n    return row + 1;\n  }\n\n  getOffsetInvalidateCells() {\n    return 0;\n  }\n\n  getCopyRangeInternal(range) {\n    return range;\n  }\n\n  _getInitContext() {\n    const ctx = this[_].context; //\n\n    ctx.fillStyle = \"white\";\n    ctx.strokeStyle = \"black\";\n    ctx.textAlign = \"left\";\n    ctx.textBaseline = \"top\";\n    ctx.lineWidth = 1;\n    ctx.font = this.font || \"16px sans-serif\";\n    return ctx;\n  }\n\n  fireListeners(type, ...event) {\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.DrawGrid = DrawGrid;\n\n/***/ }),\n\n/***/ \"./core/EventTarget.js\":\n/*!*****************************!*\\\n  !*** ./core/EventTarget.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventTarget = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\"); //private symbol\n\n/** @private */\n\n\nconst _ = (0, symbolManager_1.get)();\n/** @private */\n\n\nlet nextId = 1;\n/**\r\n * event target.\r\n */\n\nclass EventTarget {\n  constructor() {\n    this[_a] = {\n      listeners: {},\n      listenerData: {}\n    };\n  }\n  /**\r\n   * Adds an event listener.\r\n   * @param  {string} type The event type id.\r\n   * @param  {function} listener Callback method.\r\n   * @return {number} unique id for the listener.\r\n   */\n\n\n  listen(type, listener) {\n    const list = this[_].listeners[type] || (this[_].listeners[type] = []);\n    list.push(listener);\n    const id = nextId++;\n    this[_].listenerData[id] = {\n      type,\n      listener,\n      remove: () => {\n        delete this[_].listenerData[id];\n        const index = list.indexOf(listener);\n        list.splice(index, 1);\n\n        if (!this[_].listeners[type].length) {\n          delete this[_].listeners[type];\n        }\n      }\n    };\n    return id;\n  }\n  /**\r\n   * Removes an event listener which was added with listen() by the id returned by listen().\r\n   * @param  {number} id the id returned by listen().\r\n   * @return {void}\r\n   */\n\n\n  unlisten(id) {\n    if (!this[_]) {\n      return;\n    }\n\n    this[_].listenerData[id].remove();\n  }\n\n  addEventListener(type, listener) {\n    this.listen(type, listener);\n  }\n\n  removeEventListener(type, listener) {\n    if (!this[_]) {\n      return;\n    }\n\n    (0, utils_1.each)(this[_].listenerData, (obj, id) => {\n      if (obj.type === type && obj.listener === listener) {\n        this.unlisten(id);\n      }\n    });\n  }\n\n  hasListeners(type) {\n    if (!this[_]) {\n      return false;\n    }\n\n    return !!this[_].listeners[type];\n  }\n  /**\r\n   * Fires all registered listeners\r\n   * @param  {string}    type The type of the listeners to fire.\r\n   * @param  {...*} args fire arguments\r\n   * @return {*} the result of the last listener\r\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fireListeners(type, ...args) {\n    if (!this[_]) {\n      return [];\n    }\n\n    const list = this[_].listeners[type];\n\n    if (!list) {\n      return [];\n    }\n\n    return list.map(listener => listener.call(this, ...args)).filter(r => r != null);\n  }\n\n  dispose() {\n    // @ts-expect-error -- ignore\n    delete this[_];\n  }\n\n}\n\nexports.EventTarget = EventTarget;\n_a = _;\n\n/***/ }),\n\n/***/ \"./data.js\":\n/*!*****************!*\\\n  !*** ./data.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\n\nconst DataSource_1 = __webpack_require__(/*! ./data/DataSource */ \"./data/DataSource.js\");\n\nObject.defineProperty(exports, \"DataSource\", {\n  enumerable: true,\n  get: function () {\n    return DataSource_1.DataSource;\n  }\n});\n\nconst CachedDataSource_1 = __webpack_require__(/*! ./data/CachedDataSource */ \"./data/CachedDataSource.js\");\n\nObject.defineProperty(exports, \"CachedDataSource\", {\n  enumerable: true,\n  get: function () {\n    return CachedDataSource_1.CachedDataSource;\n  }\n});\n\nconst FilterDataSource_1 = __webpack_require__(/*! ./data/FilterDataSource */ \"./data/FilterDataSource.js\");\n\nObject.defineProperty(exports, \"FilterDataSource\", {\n  enumerable: true,\n  get: function () {\n    return FilterDataSource_1.FilterDataSource;\n  }\n});\n\n/***/ }),\n\n/***/ \"./data/CachedDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/CachedDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CachedDataSource = void 0;\n\nconst DataSource_1 = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n/** @private */\n\n\nfunction _setFieldCache( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfCache, index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  const recCache = fCache[index] || (fCache[index] = new Map());\n  recCache.set(field, value);\n}\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass CachedDataSource extends DataSource_1.DataSource {\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new CachedDataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  }\n\n  constructor(opt) {\n    super(opt);\n    this._rCache = {};\n    this._fCache = {};\n  }\n\n  getOriginal(index) {\n    if (this._rCache && this._rCache[index]) {\n      return this._rCache[index];\n    }\n\n    return super.getOriginal(index);\n  }\n\n  getOriginalField(index, field) {\n    const rowCache = this._fCache && this._fCache[index];\n\n    if (rowCache) {\n      const cache = rowCache.get(field);\n\n      if (cache) {\n        return cache;\n      }\n    }\n\n    return super.getOriginalField(index, field);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    const fCache = this._fCache;\n\n    if (fCache && fCache[index]) {\n      delete fCache[index]; // clear row cache\n    }\n\n    return super.setOriginalField(index, field, value);\n  }\n\n  clearCache() {\n    if (this._rCache) {\n      this._rCache = {};\n    }\n\n    if (this._fCache) {\n      this._fCache = {};\n    }\n  }\n\n  fieldPromiseCallBackInternal(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    _setFieldCache(this._fCache, index, field, value);\n  }\n\n  recordPromiseCallBackInternal(index, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  record) {\n    this._rCache[index] = record;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n}\n\nexports.CachedDataSource = CachedDataSource;\n\n/***/ }),\n\n/***/ \"./data/DataSource.js\":\n/*!****************************!*\\\n  !*** ./data/DataSource.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataSource = void 0;\n\nconst sort = __importStar(__webpack_require__(/*! ../internal/sort */ \"./internal/sort.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst EventTarget_1 = __webpack_require__(/*! ../core/EventTarget */ \"./core/EventTarget.js\");\n/** @private */\n\n\nfunction isFieldAssessor(field) {\n  if (utils_1.obj.isObject(field)) {\n    if (field.get && field.set) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/** @private */\n\n\nconst EVENT_TYPE = {\n  UPDATE_LENGTH: \"update_length\",\n  UPDATED_LENGTH: \"updated_length\",\n  UPDATED_ORDER: \"updated_order\"\n};\n/** @private */\n\nfunction ascOrderFn(v1, v2) {\n  if (v1 === v2) {\n    return 0;\n  }\n\n  if (v1 == null) {\n    return v2 == null ? // If both are nullish, consider a match.\n    0 : // Nulls first\n    -1;\n  }\n\n  if (v2 == null) {\n    // Nulls first\n    return 1;\n  }\n\n  return v1 > v2 ? 1 : -1;\n}\n\nfunction descOrderFn(v1, v2) {\n  return ascOrderFn(v1, v2) * -1;\n}\n/** @private */\n\n\nfunction getValue(value, setPromiseBack) {\n  const maybePromiseValue = (0, utils_1.getOrApply)(value);\n\n  if ((0, utils_1.isPromise)(maybePromiseValue)) {\n    const promiseValue = maybePromiseValue.then(r => {\n      setPromiseBack(r);\n      return r;\n    }); //\n\n    setPromiseBack(promiseValue);\n    return promiseValue;\n  } else {\n    return maybePromiseValue;\n  }\n}\n/** @private */\n\n\nfunction getField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nsetPromiseBack) {\n  if (record == null) {\n    return undefined;\n  }\n\n  if ((0, utils_1.isPromise)(record)) {\n    return record.then(r => getField(r, field, setPromiseBack));\n  }\n\n  const fieldGet = isFieldAssessor(field) ? field.get : field;\n\n  if (fieldGet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  if (typeof fieldGet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = fieldGet(record);\n    return getValue(fieldResult, setPromiseBack);\n  } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n  const ss = String(fieldGet).split(\".\");\n\n  if (ss.length <= 1) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet];\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  const fieldResult = (0, utils_1.applyChainSafe)(record, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\n  return getValue(fieldResult, setPromiseBack);\n}\n/** @private */\n\n\nfunction setField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (record == null) {\n    return false;\n  }\n\n  const fieldSet = isFieldAssessor(field) ? field.set : field;\n\n  if (fieldSet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  } else if (typeof fieldSet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return fieldSet(record, value);\n  } else if (typeof fieldSet === \"string\") {\n    const ss = `${fieldSet}`.split(\".\"); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    let obj = record;\n    const {\n      length\n    } = ss;\n\n    for (let i = 0; i < length; i++) {\n      const f = ss[i];\n\n      if (i === length - 1) {\n        obj[f] = value;\n      } else {\n        obj = obj[f] || (obj[f] = {});\n      }\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  }\n\n  return true;\n}\n/** @private */\n\n\nfunction _getIndex(sortedIndexMap, index) {\n  if (!sortedIndexMap) {\n    return index;\n  }\n\n  const mapIndex = sortedIndexMap[index];\n  return mapIndex != null ? mapIndex : index;\n}\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass DataSource extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new DataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  }\n\n  constructor(obj) {\n    var _a;\n\n    super();\n    this._sortedIndexMap = null; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\n    this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\n    this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._source;\n  }\n\n  get(index) {\n    return this.getOriginal(_getIndex(this._sortedIndexMap, index));\n  }\n\n  getField(index, field) {\n    return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  hasField(index, field) {\n    return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  }\n\n  setField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\n  }\n\n  sort(field, order) {\n    const sortedIndexMap = new Array(this._length);\n    const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\n    return sort.sortPromise(index => sortedIndexMap[index] != null ? sortedIndexMap[index] : sortedIndexMap[index] = index, (index, rel) => {\n      sortedIndexMap[index] = rel;\n    }, this._length, orderFn, index => this.getOriginalField(index, field)).then(() => {\n      this._sortedIndexMap = sortedIndexMap;\n      this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n    });\n  }\n\n  get length() {\n    return this._length;\n  }\n\n  set length(length) {\n    if (this._length === length) {\n      return;\n    }\n\n    const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n\n    if (utils_1.array.findIndex(results, v => !v) >= 0) {\n      return;\n    }\n\n    this._length = length;\n    this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n  }\n\n  get dataSource() {\n    return this;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  getOriginal(index) {\n    return getValue(this._get(index), val => {\n      this.recordPromiseCallBackInternal(index, val);\n    });\n  }\n\n  getOriginalField(index, field) {\n    if (field == null) {\n      return undefined;\n    }\n\n    const record = this.getOriginal(index);\n    return getField(record, field, val => {\n      this.fieldPromiseCallBackInternal(index, field, val);\n    });\n  }\n\n  hasOriginalField(index, field) {\n    if (field == null) {\n      return false;\n    }\n\n    if (typeof field === \"function\") {\n      return true;\n    }\n\n    const record = this.getOriginal(index);\n    return Boolean(record && field in record);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    if (field == null) {\n      return false;\n    }\n\n    const record = this.getOriginal(index);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return record.then(r => setField(r, field, value));\n    }\n\n    return setField(record, field, value);\n  }\n\n  fieldPromiseCallBackInternal(_index, _field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _value) {//\n  }\n\n  recordPromiseCallBackInternal(_index, _record) {//\n  }\n\n}\n\nexports.DataSource = DataSource; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nDataSource.EMPTY = new DataSource({\n  get() {\n    /*noop */\n  },\n\n  length: 0\n});\n\n/***/ }),\n\n/***/ \"./data/FilterDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/FilterDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterDataSource = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst DataSource_1 = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n/** @private */\n\n\nclass DataSourceIterator {\n  constructor(dataSource) {\n    this._dataSource = dataSource;\n    this._curIndex = -1;\n    this._data = [];\n  }\n\n  hasNext() {\n    const next = this._curIndex + 1;\n    return this._dataSource.length > next;\n  }\n\n  next() {\n    const next = this._curIndex + 1;\n\n    const data = this._getIndexData(next);\n\n    this._curIndex = next;\n    return data;\n  }\n\n  movePrev() {\n    this._curIndex--;\n  }\n\n  _getIndexData(index, nest) {\n    const dataSource = this._dataSource;\n    const data = this._data;\n\n    if (index < data.length) {\n      return data[index];\n    }\n\n    if (dataSource.length <= index) {\n      return undefined;\n    }\n\n    const record = this._dataSource.get(index);\n\n    data[index] = record;\n\n    if ((0, utils_1.isPromise)(record)) {\n      record.then(val => {\n        data[index] = val;\n      });\n\n      if (!nest) {\n        for (let i = 1; i <= 100; i++) {\n          this._getIndexData(index + i, true);\n        }\n      }\n    }\n\n    return record;\n  }\n\n}\n/** @private */\n\n\nclass FilterData {\n  constructor(dc, original, filter) {\n    this._cancel = false;\n    this._owner = dc;\n    this._dataSourceItr = new DataSourceIterator(original);\n    this._filter = filter;\n    this._filteredList = [];\n    this._queues = [];\n  }\n\n  get(index) {\n    if (this._cancel) {\n      return undefined;\n    }\n\n    const filteredList = this._filteredList;\n\n    if (index < filteredList.length) {\n      return filteredList[index];\n    }\n\n    const queues = this._queues;\n    const indexQueue = queues[index];\n\n    if (indexQueue) {\n      return indexQueue;\n    }\n\n    return queues[index] || this._findIndex(index);\n  }\n\n  cancel() {\n    this._cancel = true;\n  }\n\n  _findIndex(index) {\n    if (window.Promise) {\n      const timeout = Date.now() + 100;\n      let count = 0;\n      return this._findIndexWithTimeout(index, () => {\n        count++;\n\n        if (count >= 100) {\n          count = 0;\n          return timeout < Date.now();\n        }\n\n        return false;\n      });\n    }\n\n    return this._findIndexWithTimeout(index, () => false);\n  }\n\n  _findIndexWithTimeout(index, testTimeout) {\n    const filteredList = this._filteredList;\n    const filter = this._filter;\n    const dataSourceItr = this._dataSourceItr;\n    const queues = this._queues;\n\n    while (dataSourceItr.hasNext()) {\n      if (this._cancel) {\n        return undefined;\n      }\n\n      const record = dataSourceItr.next();\n\n      if ((0, utils_1.isPromise)(record)) {\n        dataSourceItr.movePrev();\n        const queue = record.then(_value => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n\n      if (filter(record)) {\n        filteredList.push(record);\n\n        if (index < filteredList.length) {\n          return filteredList[index];\n        }\n      }\n\n      if (testTimeout()) {\n        const promise = new Promise(resolve => {\n          setTimeout(() => {\n            resolve();\n          }, 300);\n        });\n        const queue = promise.then(() => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n    }\n\n    const dc = this._owner;\n    dc.length = filteredList.length;\n    return undefined;\n  }\n\n}\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass FilterDataSource extends DataSource_1.DataSource {\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  constructor(dataSource, filter) {\n    super(dataSource);\n    this._filterData = null;\n    this._dataSource = dataSource;\n    this.filter = filter;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n      // reset\n      // eslint-disable-next-line no-self-assign\n      this.filter = this.filter;\n    });\n    (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, type => {\n      handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\n    });\n  }\n\n  get filter() {\n    var _a;\n\n    return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\n  }\n\n  set filter(filter) {\n    if (this._filterData) {\n      this._filterData.cancel();\n    }\n\n    this._filterData = filter ? new FilterData(this, this._dataSource, filter) : null;\n    this.length = this._dataSource.length;\n  }\n\n  getOriginal(index) {\n    if (!this._filterData) {\n      return super.getOriginal(index);\n    }\n\n    return this._filterData.get(index);\n  }\n\n  sort(field, order) {\n    return this._dataSource.sort(field, order);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._dataSource.source;\n  }\n\n  get dataSource() {\n    return this._dataSource;\n  }\n\n  dispose() {\n    this._handler.dispose();\n\n    super.dispose();\n  }\n\n}\n\nexports.FilterDataSource = FilterDataSource;\n\n/***/ }),\n\n/***/ \"./element/Inline.js\":\n/*!***************************!*\\\n  !*** ./element/Inline.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Inline = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nfunction getWidth(ctx, content) {\n  return ctx.measureText(content).width;\n}\n\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\n  const chars = [];\n  let ret = itr.next();\n\n  for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\n    chars.push(ret);\n  }\n\n  let beforeWidth = getWidth(ctx, chars.join(\"\"));\n\n  if (beforeWidth > width) {\n    while (chars.length) {\n      const c = chars.pop();\n      beforeWidth -= getWidth(ctx, c || \"\");\n\n      if (beforeWidth <= width) {\n        break;\n      }\n    }\n  } else if (beforeWidth < width) {\n    while (ret !== null) {\n      const charWidth = getWidth(ctx, ret);\n\n      if (beforeWidth + charWidth > width) {\n        break;\n      }\n\n      chars.push(ret);\n      beforeWidth += charWidth;\n      ret = itr.next();\n    }\n  }\n\n  const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\n  const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\n  return {\n    before: beforeContent ? new Inline(beforeContent) : null,\n    after: afterContent ? new Inline(afterContent) : null\n  };\n}\n\nclass Inline {\n  constructor(content) {\n    this._content = content != null ? content : \"\";\n  }\n\n  width({\n    ctx\n  }) {\n    return getWidth(ctx, this._content);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft,\n        right: offsetRight,\n        top: offsetTop,\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return !!this._content;\n  }\n\n  splitIndex(index) {\n    const content = this._content;\n    const itr = utils_1.str.genChars(content);\n    const chars = [];\n    let ret = itr.next();\n\n    for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\n      chars.push(ret);\n    }\n\n    const beforeContent = chars.join(\"\");\n    const afterContent = content.slice(beforeContent.length);\n    return {\n      before: beforeContent ? new Inline(beforeContent) : null,\n      after: afterContent ? new Inline(afterContent) : null\n    };\n  }\n\n  breakWord(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genWords(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  breakAll(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genChars(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  toString() {\n    return this._content;\n  }\n\n}\n\nexports.Inline = Inline;\n\n/***/ }),\n\n/***/ \"./element/InlineDrawer.js\":\n/*!*********************************!*\\\n  !*** ./element/InlineDrawer.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineDrawer = void 0;\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineDrawer extends Inline_1.Inline {\n  constructor({\n    draw,\n    width,\n    // height,\n    color\n  }) {\n    super();\n    this._draw = draw;\n    this._width = width; // this._height = height;\n\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    this._draw({\n      ctx,\n      canvashelper,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineDrawer = InlineDrawer;\n\n/***/ }),\n\n/***/ \"./element/InlineIcon.js\":\n/*!*******************************!*\\\n  !*** ./element/InlineIcon.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineIcon = void 0;\n\nconst fonts = __importStar(__webpack_require__(/*! ../internal/fonts */ \"./internal/fonts.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineIcon extends Inline_1.Inline {\n  constructor(icon) {\n    super();\n    this._icon = icon || {};\n  }\n\n  width({\n    ctx\n  }) {\n    const icon = this._icon;\n\n    if (icon.width) {\n      return icon.width;\n    }\n\n    if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\n      ctx.save();\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        ctx.font = icon.font || ctx.font;\n        return ctx.measureText(icon.content || \"\").width;\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n        ctx.restore();\n      }\n    }\n\n    return 0; //unknown\n  }\n\n  font() {\n    var _a;\n\n    return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    const icon = this._icon;\n    return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\n  }\n\n  onReady(callback) {\n    const icon = this._icon;\n\n    if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\n      fonts.load(icon.font, icon.content || \"\", callback);\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    const icon = this._icon;\n\n    if (icon.content) {\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        // eslint-disable-next-line no-self-assign\n        ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\n\n        canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft + (this._icon.offsetLeft || 0),\n            right: offsetRight,\n            top: offsetTop + (this._icon.offsetTop || 0),\n            bottom: offsetBottom\n          }\n        });\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n      }\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineIcon = InlineIcon;\n\n/***/ }),\n\n/***/ \"./element/InlineImage.js\":\n/*!********************************!*\\\n  !*** ./element/InlineImage.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineImage = void 0;\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst imgs_1 = __webpack_require__(/*! ../internal/imgs */ \"./internal/imgs.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nclass InlineImage extends Inline_1.Inline {\n  constructor({\n    src,\n    width,\n    height,\n    imageLeft,\n    imageTop,\n    imageWidth,\n    imageHeight,\n    offsetTop,\n    offsetLeft\n  }) {\n    super();\n    this._inlineImgPromise = null;\n    this._inlineImg = null;\n    this._src = src;\n    this._width = width;\n    this._height = height;\n    this._imageLeft = imageLeft;\n    this._imageTop = imageTop;\n    this._imageWidth = imageWidth;\n    this._imageHeight = imageHeight;\n    this._offsetTop = offsetTop;\n    this._offsetLeft = offsetLeft;\n    this._onloaded = [];\n\n    if ((0, utils_1.isPromise)(src)) {\n      src.then(s => {\n        this._src = s;\n\n        this._loadImage(s);\n      });\n    } else {\n      this._loadImage(src);\n    }\n  }\n\n  _loadImage(src) {\n    const img = this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src);\n\n    if ((0, utils_1.isPromise)(img)) {\n      img.then(i => {\n        this._inlineImg = i;\n\n        this._onloaded.forEach(fn => fn());\n      });\n    } else {\n      this._inlineImg = img;\n    }\n  }\n\n  width(_arg) {\n    var _a, _b;\n\n    return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return !!this._inlineImg;\n  }\n\n  onReady(callback) {\n    if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\n      this._onloaded.push(() => callback());\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    var _a, _b;\n\n    const img = this._inlineImg;\n    canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\n        right: offsetRight,\n        top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineImage = InlineImage;\n\n/***/ }),\n\n/***/ \"./element/InlinePath2D.js\":\n/*!*********************************!*\\\n  !*** ./element/InlinePath2D.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlinePath2D = void 0;\n\nconst path2DManager = __importStar(__webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nclass InlinePath2D extends Inline_1.Inline {\n  constructor({\n    path,\n    width,\n    height,\n    color\n  }) {\n    super(); // IEPath2Dpolyfill\n\n    const Path2D = path2DManager.getPath2D();\n    this._path = new Path2D(path);\n    this._width = width;\n    this._height = height;\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    offset++;\n    const padding = {\n      left: offsetLeft,\n      right: offsetRight,\n      top: offsetTop,\n      bottom: offsetBottom\n    };\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n      ctx.clip(); //\n\n      const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\n        offset,\n        padding\n      });\n      ctx.translate(pos.x, pos.y);\n      ctx.fill(this._path);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlinePath2D = InlinePath2D;\n\n/***/ }),\n\n/***/ \"./element/InlineSvg.js\":\n/*!******************************!*\\\n  !*** ./element/InlineSvg.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineSvg = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst InlineImage_1 = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\n\nfunction buildSvgDataUrl(svg) {\n  const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\n  const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\n\n  return url;\n}\n\nfunction getSvgElement(svg) {\n  if (typeof svg === \"string\") {\n    const parser = new DOMParser();\n    return parser.parseFromString(svg, \"image/svg+xml\").children[0];\n  } else {\n    return svg;\n  }\n}\n\nclass InlineSvg extends InlineImage_1.InlineImage {\n  constructor({\n    svg,\n    width,\n    height\n  }) {\n    var _a, _b;\n\n    const svgElem = (0, utils_1.then)(svg, getSvgElement);\n    const elmWidth = !(0, utils_1.isPromise)(svgElem) ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined : undefined;\n    const elmHeight = !(0, utils_1.isPromise)(svgElem) ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined : undefined;\n    const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\n    const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\n    super({\n      src: (0, utils_1.then)(svg, buildSvgDataUrl),\n      width: width || numElmWidth,\n      height: height || numElmHeight,\n      imageWidth: numElmWidth,\n      imageHeight: numElmHeight\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineSvg = InlineSvg;\n\n/***/ }),\n\n/***/ \"./element/inlines.js\":\n/*!****************************!*\\\n  !*** ./element/inlines.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../icons */ \"./icons.js\"));\n\nconst path2DManager = __importStar(__webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst InlineDrawer_1 = __webpack_require__(/*! ./InlineDrawer */ \"./element/InlineDrawer.js\");\n\nconst InlineIcon_1 = __webpack_require__(/*! ./InlineIcon */ \"./element/InlineIcon.js\");\n\nconst InlineImage_1 = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\n\nconst InlinePath2D_1 = __webpack_require__(/*! ./InlinePath2D */ \"./element/InlinePath2D.js\");\n\nconst InlineSvg_1 = __webpack_require__(/*! ./InlineSvg */ \"./element/InlineSvg.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\n      offset,\n      padding\n    });\n    path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nfunction isIconConstructorOption(icon) {\n  if (icon.font && icon.content) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineImageConstructorOption(icon) {\n  if (icon.src) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineSvgConstructorOption(icon) {\n  if (icon.path) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction iconOf(icon) {\n  if (icon instanceof Inline_1.Inline) {\n    return icon;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  if (isIconConstructorOption(icon)) {\n    return new InlineIcon_1.InlineIcon(icon);\n  }\n\n  if (isInlineImageConstructorOption(icon)) {\n    return new InlineImage_1.InlineImage({\n      src: icon.src,\n      width: icon.width,\n      height: icon.width,\n      offsetTop: icon.offsetTop,\n      offsetLeft: icon.offsetLeft\n    });\n  }\n\n  if (icon.svg) {\n    return new InlineSvg_1.InlineSvg({\n      svg: icon.svg,\n      width: icon.width,\n      height: icon.width\n    });\n  }\n\n  if (isInlineSvgConstructorOption(icon)) {\n    return new InlinePath2D_1.InlinePath2D({\n      path: icon.path,\n      width: icon.width,\n      height: icon.width,\n      color: icon.color\n    });\n  }\n\n  const registeredIcons = icons.get();\n\n  if (icon.name && registeredIcons[icon.name]) {\n    const registeredIcon = registeredIcons[icon.name];\n    const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\n    return new InlineDrawer_1.InlineDrawer({\n      draw({\n        ctx,\n        rect,\n        offset,\n        offsetLeft,\n        offsetRight,\n        offsetTop,\n        offsetBottom\n      }) {\n        drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft,\n            right: offsetRight,\n            top: offsetTop,\n            bottom: offsetBottom\n          }\n        });\n      },\n\n      width,\n      height: width,\n      color: icon.color\n    });\n  }\n\n  return new InlineIcon_1.InlineIcon(icon);\n}\n\nexports.iconOf = iconOf;\n\nfunction of(content) {\n  if (content == null) {\n    return null;\n  }\n\n  if (content instanceof Inline_1.Inline) {\n    return content;\n  }\n\n  return new Inline_1.Inline(content);\n}\n\nexports.of = of;\n\nfunction buildInlines(icons, inline) {\n  const result = [];\n\n  if (icons) {\n    result.push(...icons.map(icon => iconOf(icon)).filter(i => i != null));\n  }\n\n  if (Array.isArray(inline) // && inline.filter(il => il instanceof Inline).length <- ?\n  ) {\n      result.push(...inline.map(il => of(il)).filter(i => i != null));\n    } else {\n    const il = of(inline);\n\n    if (il) {\n      result.push(il);\n    }\n  }\n\n  return result;\n}\n\nexports.buildInlines = buildInlines;\n\nfunction string(inline) {\n  return buildInlines(undefined, inline).join(\"\");\n}\n\nexports.string = string;\n\n/***/ }),\n\n/***/ \"./get-internal.js\":\n/*!*************************!*\\\n  !*** ./get-internal.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getInternal = void 0;\n\nfunction getInternal() {\n  console.warn(\"use internal!!\");\n  return {\n    color: __webpack_require__(/*! ./internal/color */ \"./internal/color.js\"),\n    sort: __webpack_require__(/*! ./internal/sort */ \"./internal/sort.js\"),\n    calc: __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"),\n    symbolManager: __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\"),\n    path2DManager: __webpack_require__(/*! ./internal/path2DManager */ \"./internal/path2DManager.js\"),\n    pasteUtils: __webpack_require__(/*! ./internal/paste-utils */ \"./internal/paste-utils.js\")\n  };\n}\n\nexports.getInternal = getInternal;\n\n/***/ }),\n\n/***/ \"./header/action.js\":\n/*!**************************!*\\\n  !*** ./header/action.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./action/BaseAction */ \"./header/action/BaseAction.js\");\n\nObject.defineProperty(exports, \"BaseAction\", {\n  enumerable: true,\n  get: function () {\n    return BaseAction_1.BaseAction;\n  }\n});\n\nconst CheckHeaderAction_1 = __webpack_require__(/*! ./action/CheckHeaderAction */ \"./header/action/CheckHeaderAction.js\");\n\nObject.defineProperty(exports, \"CheckHeaderAction\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeaderAction_1.CheckHeaderAction;\n  }\n});\n\nconst SortHeaderAction_1 = __webpack_require__(/*! ./action/SortHeaderAction */ \"./header/action/SortHeaderAction.js\");\n\nObject.defineProperty(exports, \"SortHeaderAction\", {\n  enumerable: true,\n  get: function () {\n    return SortHeaderAction_1.SortHeaderAction;\n  }\n});\n\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nexports.ACTIONS = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new ImmutableSortHeaderAction(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new ImmutableCheckHeaderAction()\n};\n\nfunction of(headerAction) {\n  if (!headerAction) {\n    return undefined;\n  } else if (typeof headerAction === \"string\") {\n    const key = headerAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return headerAction;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    if (typeof headerCell.sort === \"function\") {\n      const sortMethod = headerCell.sort; // 0.9.0 Backward compatibility\n\n      const sort = ({\n        order,\n        col,\n        grid\n      }) => sortMethod.call(headerCell, order, col, grid);\n\n      return new ImmutableSortHeaderAction({\n        sort\n      });\n    }\n\n    if (typeof headerCell.sort === \"string\") {\n      return new ImmutableSortHeaderAction({\n        sort: headerCell.sort\n      });\n    }\n\n    return exports.ACTIONS.SORT;\n  }\n\n  return of(headerCell.headerAction);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n\n/***/ \"./header/action/BaseAction.js\":\n/*!*************************************!*\\\n  !*** ./header/action/BaseAction.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseAction = void 0;\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = !!option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new BaseAction(this);\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  onChangeDisabledInternal() {// impl\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n\n/***/ \"./header/action/CheckHeaderAction.js\":\n/*!********************************************!*\\\n  !*** ./header/action/CheckHeaderAction.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeaderAction = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./header/action/actionBind.js\");\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./header/action/BaseAction.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\n  clone() {\n    return new CheckHeaderAction(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = getState(grid);\n\n    const action = ({\n      col,\n      row\n    }) => {\n      const range = grid.getCellRange(col, row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if (this.disabled || state.block[cellKey]) {\n        return;\n      }\n\n      const checked = grid.getHeaderValue(range.start.col, range.start.row);\n      grid.setHeaderValue(range.start.col, range.start.row, !checked);\n\n      const onChange = () => {\n        // checkbox animation\n        (0, animate_1.animate)(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      onChange();\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    })];\n  }\n\n}\n\nexports.CheckHeaderAction = CheckHeaderAction;\n\n/***/ }),\n\n/***/ \"./header/action/SortHeaderAction.js\":\n/*!*******************************************!*\\\n  !*** ./header/action/SortHeaderAction.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeaderAction = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./header/action/BaseAction.js\");\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./header/action/actionBind.js\");\n\nclass SortHeaderAction extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    var _a;\n\n    super(option);\n    this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\n  }\n\n  get sort() {\n    return this._sort;\n  }\n\n  set sort(sort) {\n    this._sort = sort;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new SortHeaderAction(this);\n  }\n\n  _executeSort(newState, grid) {\n    if (typeof this._sort === \"function\") {\n      this._sort({\n        order: newState.order || \"asc\",\n        col: newState.col,\n        row: newState.row,\n        grid\n      });\n    } else if (typeof this._sort === \"string\" && ( // v1.6.3 Backward compatibility\n    this._sort !== \"true\" || hasTrueField(grid))) {\n      const field = this._sort;\n      grid.dataSource.sort(field, newState.order || \"asc\");\n    } else {\n      const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\n      const field = grid.getField(newState.col, fieldRow);\n\n      if (field == null) {\n        return;\n      }\n\n      grid.dataSource.sort(field, newState.order || \"asc\");\n    }\n  }\n\n  bindGridEvent(grid, cellId) {\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    const action = cell => {\n      if (this.disabled) {\n        return;\n      }\n\n      const state = grid.sortState;\n      let newState;\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (isTarget(state.col, cell.row)) {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: state.order === \"asc\" ? \"desc\" : \"asc\"\n        };\n      } else {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: \"asc\"\n        };\n      }\n\n      grid.sortState = newState;\n\n      this._executeSort(newState, grid);\n\n      grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: _e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        return true;\n      }\n    })];\n  }\n\n}\n\nexports.SortHeaderAction = SortHeaderAction;\n\nfunction hasTrueField(grid) {\n  if (grid.dataSource.length > 0) {\n    const record = grid.dataSource.get(0);\n    return record != null && \"true\" in record;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"./header/action/actionBind.js\":\n/*!*************************************!*\\\n  !*** ./header/action/actionBind.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  let inMouse;\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n    inMouse = true;\n  }), //MOUSEENTER'col-resize'move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (inMouse && !grid.getElement().style.cursor) {\n      grid.getElement().style.cursor = \"pointer\";\n    }\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n    inMouse = false;\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n\n/***/ \"./header/style.js\":\n/*!*************************!*\\\n  !*** ./header/style.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\nObject.defineProperty(exports, \"BaseStyle\", {\n  enumerable: true,\n  get: function () {\n    return BaseStyle_1.BaseStyle;\n  }\n});\n\nconst CheckHeaderStyle_1 = __webpack_require__(/*! ./style/CheckHeaderStyle */ \"./header/style/CheckHeaderStyle.js\");\n\nObject.defineProperty(exports, \"CheckHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeaderStyle_1.CheckHeaderStyle;\n  }\n});\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(/*! ./style/MultilineTextHeaderStyle */ \"./header/style/MultilineTextHeaderStyle.js\");\n\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n  }\n});\n\nconst SortHeaderStyle_1 = __webpack_require__(/*! ./style/SortHeaderStyle */ \"./header/style/SortHeaderStyle.js\");\n\nObject.defineProperty(exports, \"SortHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return SortHeaderStyle_1.SortHeaderStyle;\n  }\n});\n\nconst Style_1 = __webpack_require__(/*! ./style/Style */ \"./header/style/Style.js\");\n\nObject.defineProperty(exports, \"Style\", {\n  enumerable: true,\n  get: function () {\n    return Style_1.Style;\n  }\n});\n\nfunction of(headerStyle, StyleClass) {\n  if (headerStyle) {\n    if (headerStyle instanceof Style_1.Style) {\n      return headerStyle;\n    } else if (typeof headerStyle === \"function\") {\n      return of(headerStyle(), StyleClass);\n    }\n\n    return new StyleClass(headerStyle);\n  } else {\n    return StyleClass.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./header/style/BaseStyle.js\":\n/*!***********************************!*\\\n  !*** ./header/style/BaseStyle.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseStyle = void 0;\n\nconst EventTarget_1 = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\nconst EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  constructor({\n    bgColor\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/CheckHeaderStyle.js\":\n/*!******************************************!*\\\n  !*** ./header/style/CheckHeaderStyle.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeaderStyle = void 0;\n\nconst StdTextBaseStyle_1 = __webpack_require__(/*! ./StdTextBaseStyle */ \"./header/style/StdTextBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckHeaderStyle(this);\n  }\n\n}\n\nexports.CheckHeaderStyle = CheckHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/MultilineTextHeaderStyle.js\":\n/*!**************************************************!*\\\n  !*** ./header/style/MultilineTextHeaderStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextHeaderStyle = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n  }\n\n  clone() {\n    return new MultilineTextHeaderStyle(this);\n  }\n\n}\n\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/SortHeaderStyle.js\":\n/*!*****************************************!*\\\n  !*** ./header/style/SortHeaderStyle.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeaderStyle = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new SortHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._sortArrowColor = style.sortArrowColor;\n    this._multiline = style.multiline;\n  }\n\n  get sortArrowColor() {\n    return this._sortArrowColor;\n  }\n\n  set sortArrowColor(sortArrowColor) {\n    this._sortArrowColor = sortArrowColor;\n    this.doChangeStyle();\n  }\n\n  get multiline() {\n    return !!this._multiline;\n  }\n\n  set multiline(multiline) {\n    this._multiline = multiline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new SortHeaderStyle(this);\n  }\n\n}\n\nexports.SortHeaderStyle = SortHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdBaseStyle.js\":\n/*!**************************************!*\\\n  !*** ./header/style/StdBaseStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdBaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./header/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdMultilineTextBaseStyle.js\":\n/*!***************************************************!*\\\n  !*** ./header/style/StdMultilineTextBaseStyle.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdMultilineTextBaseStyle = void 0;\n\nconst StdTextBaseStyle_1 = __webpack_require__(/*! ./StdTextBaseStyle */ \"./header/style/StdTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdMultilineTextBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  clone() {\n    return new StdMultilineTextBaseStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdTextBaseStyle.js\":\n/*!******************************************!*\\\n  !*** ./header/style/StdTextBaseStyle.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdTextBaseStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./header/style/StdBaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdTextBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._padding = style.padding;\n    this._textOverflow = style.textOverflow || \"ellipsis\";\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get padding() {\n    return this._padding;\n  }\n\n  set padding(padding) {\n    this._padding = padding;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdTextBaseStyle(this);\n  }\n\n}\n\nexports.StdTextBaseStyle = StdTextBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/Style.js\":\n/*!*******************************!*\\\n  !*** ./header/style/Style.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Style = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._multiline = style.multiline;\n  }\n\n  get multiline() {\n    return !!this._multiline;\n  }\n\n  set multiline(multiline) {\n    this._multiline = multiline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n\n/***/ \"./header/type.js\":\n/*!************************!*\\\n  !*** ./header/type.js ***!\n  \\************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\n\nconst BaseHeader_1 = __webpack_require__(/*! ./type/BaseHeader */ \"./header/type/BaseHeader.js\");\n\nObject.defineProperty(exports, \"BaseHeader\", {\n  enumerable: true,\n  get: function () {\n    return BaseHeader_1.BaseHeader;\n  }\n});\n\nconst CheckHeader_1 = __webpack_require__(/*! ./type/CheckHeader */ \"./header/type/CheckHeader.js\");\n\nObject.defineProperty(exports, \"CheckHeader\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeader_1.CheckHeader;\n  }\n});\n\nconst Header_1 = __webpack_require__(/*! ./type/Header */ \"./header/type/Header.js\");\n\nObject.defineProperty(exports, \"Header\", {\n  enumerable: true,\n  get: function () {\n    return Header_1.Header;\n  }\n});\n\nconst MultilineTextHeader_1 = __webpack_require__(/*! ./type/MultilineTextHeader */ \"./header/type/MultilineTextHeader.js\");\n\nObject.defineProperty(exports, \"MultilineTextHeader\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextHeader_1.MultilineTextHeader;\n  }\n});\n\nconst SortHeader_1 = __webpack_require__(/*! ./type/SortHeader */ \"./header/type/SortHeader.js\");\n\nObject.defineProperty(exports, \"SortHeader\", {\n  enumerable: true,\n  get: function () {\n    return SortHeader_1.SortHeader;\n  }\n});\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Header_1.Header(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new SortHeader_1.SortHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckHeader_1.CheckHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader()\n};\n\nfunction of(headerType) {\n  if (!headerType) {\n    return TYPES.DEFAULT;\n  } else if (typeof headerType === \"string\") {\n    const key = headerType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return headerType;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    return TYPES.SORT;\n  }\n\n  return of(headerCell.headerType);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n\n/***/ \"./header/type/BaseHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/BaseHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseHeader = void 0;\n\nconst styleContents = __importStar(__webpack_require__(/*! ../style */ \"./header/style.js\"));\n\nconst BaseStyle_1 = __webpack_require__(/*! ../style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\nclass BaseHeader {\n  constructor(_options = {}) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    const {\n      style,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase(); //\n\n    this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\n  }\n\n  convertInternal(value) {\n    if (typeof value === \"function\") {\n      value = value();\n    } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n    return value != null ? `${value}` : \"\";\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  getCopyCellValue(value, _grid, _cell) {\n    if (typeof value === \"function\") {\n      value = value();\n    }\n\n    return value != null ? value : \"\";\n  }\n\n}\n\nexports.BaseHeader = BaseHeader;\n\n/***/ }),\n\n/***/ \"./header/type/CheckHeader.js\":\n/*!************************************!*\\\n  !*** ./header/type/CheckHeader.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeader = void 0;\n\nconst inlineUtils = __importStar(__webpack_require__(/*! ../../element/inlines */ \"./element/inlines.js\"));\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst CheckHeaderStyle_1 = __webpack_require__(/*! ../style/CheckHeaderStyle */ \"./header/style/CheckHeaderStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return CheckHeaderStyle_1.CheckHeaderStyle;\n  }\n\n  clone() {\n    return new CheckHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor,\n      padding,\n      color,\n      font,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const {\n      elapsed: {\n        [cellKey]: elapsed\n      }\n    } = getState(grid);\n    const checked = grid.getHeaderValue(range.start.col, range.start.row);\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      let contents = [inlineCheck];\n      contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\n      helper.text(contents, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        textOverflow\n      });\n    });\n  }\n\n}\n\nexports.CheckHeader = CheckHeader;\n\n/***/ }),\n\n/***/ \"./header/type/Header.js\":\n/*!*******************************!*\\\n  !*** ./header/type/Header.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Header = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst Style_1 = __webpack_require__(/*! ../style/Style */ \"./header/style/Style.js\");\n\nclass Header extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      textOverflow,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      multiline\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      if (multiline) {\n        const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n        helper.multilineText(multilines, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          lineHeight,\n          autoWrapText,\n          lineClamp,\n          textOverflow,\n          icons\n        });\n      } else {\n        helper.text(textValue, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          textOverflow,\n          icons\n        });\n      }\n    });\n  }\n\n}\n\nexports.Header = Header;\n\n/***/ }),\n\n/***/ \"./header/type/MultilineTextHeader.js\":\n/*!********************************************!*\\\n  !*** ./header/type/MultilineTextHeader.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextHeader = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(/*! ../style/MultilineTextHeaderStyle */ \"./header/style/MultilineTextHeaderStyle.js\");\n\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n  }\n\n  clone() {\n    return new MultilineTextHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.multilineText(multilines, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.MultilineTextHeader = MultilineTextHeader;\n\n/***/ }),\n\n/***/ \"./header/type/SortHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/SortHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeader = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst SortHeaderStyle_1 = __webpack_require__(/*! ../style/SortHeaderStyle */ \"./header/style/SortHeaderStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\nclass SortHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return SortHeaderStyle_1.SortHeaderStyle;\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline = \"middle\",\n      color,\n      bgColor,\n      font,\n      padding,\n      textOverflow,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      sortArrowColor,\n      multiline\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      const state = grid.sortState;\n      let order = undefined;\n      const {\n        col,\n        row\n      } = context;\n      const range = grid.getCellRange(col, row);\n\n      if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\n        ({\n          order\n        } = state);\n      }\n\n      const ctx = context.getContext();\n      const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\n      const trailingIcon = {\n        name: order != null ? order === \"asc\" ? \"arrow_downward\" : \"arrow_upward\" : undefined,\n        width: arrowSize,\n        color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\"\n      };\n\n      if (multiline) {\n        const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n        helper.multilineText(multilines, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          lineHeight,\n          autoWrapText,\n          lineClamp,\n          textOverflow,\n          icons,\n          trailingIcon\n        });\n      } else {\n        helper.text(textValue, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          textOverflow,\n          icons,\n          trailingIcon\n        });\n      }\n    });\n  }\n\n}\n\nexports.SortHeader = SortHeader;\n\n/***/ }),\n\n/***/ \"./headers.js\":\n/*!********************!*\\\n  !*** ./headers.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.style = exports.type = exports.action = void 0;\n\nconst action = __importStar(__webpack_require__(/*! ./header/action */ \"./header/action.js\"));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(/*! ./header/style */ \"./header/style.js\"));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(/*! ./header/type */ \"./header/type.js\"));\n\nexports.type = type;\n\n/***/ }),\n\n/***/ \"./icons.js\":\n/*!******************!*\\\n  !*** ./icons.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint-disable camelcase*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst icons_1 = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nconst builtins = {\n  get arrow_upward() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\n    return {\n      d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get arrow_downward() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\n    return {\n      d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get edit() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\n    return {\n      d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get add() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\n    return {\n      d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get star() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\n    return {\n      d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\n      width: 24,\n      height: 24\n    };\n  },\n\n  get star_border() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\n    return {\n      d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\n      width: 24,\n      height: 24\n    };\n  },\n\n  get star_half() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\n    return {\n      d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\n      width: 24,\n      height: 24\n    };\n  }\n\n};\n\nfunction get() {\n  return (0, utils_1.extend)(builtins, icons_1.icons);\n}\n\nexports.get = get;\n\n/***/ }),\n\n/***/ \"./internal/EventHandler.js\":\n/*!**********************************!*\\\n  !*** ./internal/EventHandler.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventHandler = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n/** @private */\n\n\nlet nextId = 1;\n\nclass EventHandler {\n  constructor() {\n    this._listeners = {};\n  }\n\n  on(target, type, listener, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ...options) {\n    if (target.addEventListener) {\n      target.addEventListener(type, listener, ...options);\n    }\n\n    const obj = {\n      target,\n      type,\n      listener,\n      options\n    };\n    const id = nextId++;\n    this._listeners[id] = obj;\n    return id;\n  }\n\n  once(target, type, listener, ...options) {\n    const id = this.on(target, type, (...args) => {\n      this.off(id);\n      listener(...args);\n    }, ...options);\n    return id;\n  }\n\n  tryWithOffEvents(target, type, call) {\n    const list = [];\n\n    try {\n      (0, utils_1.each)(this._listeners, obj => {\n        if (obj.target === target && obj.type === type) {\n          if (obj.target.removeEventListener) {\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n          }\n\n          list.push(obj);\n        }\n      });\n      call();\n    } finally {\n      list.forEach(obj => {\n        if (obj.target.addEventListener) {\n          obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n        }\n      });\n    }\n  }\n\n  off(id) {\n    if (id == null) {\n      return;\n    }\n\n    const obj = this._listeners[id];\n\n    if (!obj) {\n      return;\n    }\n\n    delete this._listeners[id];\n\n    if (obj.target.removeEventListener) {\n      obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fire(target, type, ...args) {\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        obj.listener.call(obj.target, ...args);\n      }\n    });\n  }\n\n  hasListener(target, type) {\n    let result = false;\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        result = true;\n      }\n    });\n    return result;\n  }\n\n  clear() {\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target.removeEventListener) {\n        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n      }\n    });\n    this._listeners = {};\n  }\n\n  dispose() {\n    this.clear(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._listeners = null;\n  }\n\n}\n\nexports.EventHandler = EventHandler;\n\n/***/ }),\n\n/***/ \"./internal/LRUCache.js\":\n/*!******************************!*\\\n  !*** ./internal/LRUCache.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LRUCache = void 0;\n\nclass LRUCache {\n  constructor(cacheSize) {\n    this._list = [];\n    this._map = {};\n    this._cacheSize = cacheSize || 50;\n  }\n\n  get(key) {\n    const val = this._map[key];\n\n    if (val) {\n      const list = this._list;\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n      list.push(key);\n    }\n\n    return val;\n  }\n\n  put(key, value) {\n    const list = this._list;\n    const map = this._map;\n\n    if (map[key]) {\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n    }\n\n    map[key] = value;\n    list.push(key);\n\n    if (list.length > this._cacheSize) {\n      const remKey = list.shift() || \"\";\n      delete map[remKey];\n    }\n  }\n\n}\n\nexports.LRUCache = LRUCache;\n\n/***/ }),\n\n/***/ \"./internal/NumberMap.js\":\n/*!*******************************!*\\\n  !*** ./internal/NumberMap.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberMap = void 0;\n\nconst indexFirst = (arr, elm) => {\n  let low = 0;\n  let high = arr.length - 1;\n\n  while (low <= high) {\n    const i = Math.floor((low + high) / 2);\n\n    if (arr[i] === elm) {\n      return i;\n    } else if (arr[i] > elm) {\n      high = i - 1;\n    } else {\n      low = i + 1;\n    }\n  }\n\n  return high < 0 ? 0 : high;\n};\n\nclass NumberMap {\n  constructor() {\n    this._keys = [];\n    this._vals = {};\n    this._sorted = false;\n  }\n\n  put(key, value) {\n    if (!(key in this._vals)) {\n      this._keys.push(key);\n\n      this._sorted = false;\n    }\n\n    this._vals[key] = value;\n  }\n\n  remove(key) {\n    delete this._vals[key];\n\n    const index = this._keys.indexOf(key);\n\n    if (index < 0) {\n      return;\n    }\n\n    this._keys.splice(index, 1);\n\n    this._sorted = false;\n  }\n\n  get(key) {\n    return this._vals[key];\n  }\n\n  has(key) {\n    return this._vals[key] != null;\n  }\n\n  each(keyFrom, keyTo, fn) {\n    const {\n      _keys: keys\n    } = this;\n    const {\n      length\n    } = keys;\n\n    if (!this._sorted) {\n      keys.sort((a, b) => {\n        if (a < b) {\n          return -1;\n        }\n\n        if (a > b) {\n          return 1;\n        }\n\n        return 0;\n      });\n      this._sorted = true;\n    }\n\n    for (let i = indexFirst(keys, keyFrom); i < length; i++) {\n      const key = keys[i];\n\n      if (keyFrom <= key && key <= keyTo) {\n        fn(this.get(key), key);\n      } else if (keyTo < key) {\n        return;\n      }\n    }\n  }\n\n}\n\nexports.NumberMap = NumberMap;\n\n/***/ }),\n\n/***/ \"./internal/Rect.js\":\n/*!**************************!*\\\n  !*** ./internal/Rect.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Rect = void 0;\n\nclass Rect {\n  constructor(left, top, width, height) {\n    this._left = left;\n    this._top = top;\n    this._width = width;\n    this._height = height;\n  }\n\n  static bounds(left, top, right, bottom) {\n    return new Rect(left, top, right - left, bottom - top);\n  }\n\n  static max(rect1, rect2) {\n    return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n  }\n\n  get left() {\n    return this._left;\n  }\n\n  set left(left) {\n    const {\n      right\n    } = this;\n    this._left = left;\n    this.right = right;\n  }\n\n  get top() {\n    return this._top;\n  }\n\n  set top(top) {\n    const {\n      bottom\n    } = this;\n    this._top = top;\n    this.bottom = bottom;\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  set width(width) {\n    this._width = width;\n    this._right = undefined;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  set height(height) {\n    this._height = height;\n    this._bottom = undefined;\n  }\n\n  get right() {\n    return this._right !== undefined ? this._right : this._right = this.left + this.width;\n  }\n\n  set right(right) {\n    this._right = right;\n    this.width = right - this.left;\n  }\n\n  get bottom() {\n    return this._bottom !== undefined ? this._bottom : this._bottom = this.top + this.height;\n  }\n\n  set bottom(bottom) {\n    this._bottom = bottom;\n    this.height = bottom - this.top;\n  }\n\n  offsetLeft(offset) {\n    this._left += offset;\n    this._right = undefined;\n  }\n\n  offsetTop(offset) {\n    this._top += offset;\n    this._bottom = undefined;\n  }\n\n  copy() {\n    return new Rect(this.left, this.top, this.width, this.height);\n  }\n\n  intersection(rect) {\n    const x0 = Math.max(this.left, rect.left);\n    const x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\n    if (x0 <= x1) {\n      const y0 = Math.max(this.top, rect.top);\n      const y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\n      if (y0 <= y1) {\n        return Rect.bounds(x0, y0, x1, y1);\n      }\n    }\n\n    return null;\n  }\n\n  contains(another) {\n    return this.left <= another.left && this.left + this.width >= another.left + another.width && this.top <= another.top && this.top + this.height >= another.top + another.height;\n  }\n\n  inPoint(x, y) {\n    return this.left <= x && this.left + this.width >= x && this.top <= y && this.top + this.height >= y;\n  }\n\n}\n\nexports.Rect = Rect;\n\n/***/ }),\n\n/***/ \"./internal/Scrollable.js\":\n/*!********************************!*\\\n  !*** ./internal/Scrollable.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scrollable = void 0;\n\nconst style = __importStar(__webpack_require__(/*! ./style */ \"./internal/style.js\"));\n\nconst EventHandler_1 = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\n\nclass Scrollable {\n  constructor() {\n    this._p = 1;\n    this._handler = new EventHandler_1.EventHandler();\n    this._scrollable = document.createElement(\"div\");\n\n    this._scrollable.classList.add(\"grid-scrollable\");\n\n    this._height = 0;\n    this._width = 0;\n    this._endPointElement = document.createElement(\"div\");\n\n    this._endPointElement.classList.add(\"grid-scroll-end-point\");\n\n    this._update();\n\n    this._scrollable.appendChild(this._endPointElement); // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n    // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n    // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n    // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n    // this.scrollTop += delta < 0 ? point : -point;\n    // });\n\n  }\n\n  calcTop(top) {\n    const relativeTop = top - this.scrollTop;\n    return this._scrollable.scrollTop + relativeTop;\n  }\n\n  getElement() {\n    return this._scrollable;\n  }\n\n  setScrollSize(width, height) {\n    this._width = width;\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollWidth() {\n    return this._width;\n  }\n\n  set scrollWidth(width) {\n    this._width = width;\n\n    this._update();\n  }\n\n  get scrollHeight() {\n    return this._height;\n  }\n\n  set scrollHeight(height) {\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollLeft() {\n    return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\n  }\n\n  set scrollLeft(scrollLeft) {\n    this._scrollable.scrollLeft = scrollLeft;\n  }\n\n  get scrollTop() {\n    return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\n  }\n\n  set scrollTop(scrollTop) {\n    this._scrollable.scrollTop = scrollTop * this._p;\n  }\n\n  onScroll(fn) {\n    this._handler.on(this._scrollable, \"scroll\", fn);\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n  _update() {\n    let domHeight;\n    const {\n      offsetHeight,\n      offsetWidth\n    } = this._scrollable;\n\n    if (this._height > MAX_SCROLL) {\n      const sbSize = style.getScrollBarSize();\n      const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n      const rScrollRange = this._height - offsetHeight + sbSize;\n      this._p = vScrollRange / rScrollRange;\n      domHeight = MAX_SCROLL;\n    } else {\n      this._p = 1;\n      domHeight = this._height;\n    }\n\n    this._endPointElement.style.top = `${domHeight.toFixed()}px`;\n    this._endPointElement.style.left = `${this._width.toFixed()}px`; // Sets the maximum value to the scroll position\n    // if the current scroll position exceeds the maximum value.\n\n    if (this.scrollTop > this.scrollHeight - offsetHeight) {\n      this.scrollTop = this.scrollHeight - offsetHeight;\n    }\n\n    if (this.scrollLeft > this.scrollWidth - offsetWidth) {\n      this.scrollLeft = this.scrollWidth - offsetWidth;\n    }\n  }\n\n}\n\nexports.Scrollable = Scrollable;\n\n/***/ }),\n\n/***/ \"./internal/animate.js\":\n/*!*****************************!*\\\n  !*** ./internal/animate.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animate = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction cubicBezier(x2, y2, x3, y3) {\n  let step;\n  const err = 0.0001;\n  x2 *= 3;\n  y2 *= 3;\n  x3 *= 3;\n  y3 *= 3;\n  return function (t) {\n    let p, a, b, c, d, x, s;\n\n    if (t < 0 || 1 < t) {\n      throw new Error(`${t}`);\n    }\n\n    p = step || t;\n\n    do {\n      a = 1 - p;\n      b = a * a;\n      c = p * p;\n      d = c * p;\n      x = x2 * b * p + x3 * a * c + d;\n      s = t - x;\n      p += s * 0.5;\n    } while (err < Math.abs(s));\n\n    step = p;\n    return y2 * b * p + y3 * a * c + d;\n  };\n}\n\nconst EASINGS = {\n  linear(p) {\n    return p;\n  },\n\n  easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\n  easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\n  easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0)\n};\nconst raf = utils_1.isNode ? () => {} : window.requestAnimationFrame || ( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfn => setTimeout(fn, 1));\n\nfunction now() {\n  return Date.now();\n}\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\n\n\nfunction animate(duration, step, easing) {\n  const startedAt = now();\n  const easingFn = easing == null ? EASINGS.easeInOut : typeof easing === \"string\" ? EASINGS[easing] : easing;\n  let canceledFlg = false;\n\n  const createAnim = (resolve, reject) => {\n    const anim = () => {\n      const point = now() - startedAt;\n\n      if (canceledFlg) {\n        //cancel\n        if (reject) {\n          reject();\n        }\n      } else if (point >= duration) {\n        //end\n        step(1);\n\n        if (resolve) {\n          resolve();\n        }\n      } else {\n        step(easingFn(point / duration));\n        raf(anim);\n      }\n    };\n\n    return anim;\n  };\n\n  const cancel = () => {\n    canceledFlg = true;\n  };\n\n  if (typeof Promise !== \"undefined\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = new Promise((resolve, reject) => {\n      const anim = createAnim(resolve, reject);\n      step(0);\n      anim();\n    });\n    result.cancel = cancel;\n    return result;\n  } else {\n    const anim = createAnim(() => {}, () => {});\n    step(0);\n    anim();\n    return {\n      cancel\n    };\n  }\n}\n\nexports.animate = animate;\n\n/***/ }),\n\n/***/ \"./internal/calc.js\":\n/*!**************************!*\\\n  !*** ./internal/calc.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toPx = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst TYPE_PAREN = 0;\nconst TYPE_UNIT = 1;\nconst TYPE_OPERATOR = 2;\nconst TYPE_NUMBER = 3;\nconst NODE_TYPE_UNIT = 10;\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\nconst NODE_TYPE_NUMBER = 12;\nconst TABULATION = 0x09;\nconst CARRIAGE_RETURN = 0x0d;\nconst LINE_FEED = 0x0a;\nconst FORM_FEED = 0x0c;\nconst SPACE = 0x20;\nconst PERCENT = 0x25;\nconst FULL_STOP = 0x2e;\nconst DIGIT_0 = 0x30;\nconst DIGIT_9 = 0x39;\nconst LATIN_CAPITAL_A = 0x41;\nconst LATIN_CAPITAL_Z = 0x5a;\nconst LATIN_SMALL_A = 0x61;\nconst LATIN_SMALL_Z = 0x7a;\n\nfunction isUpperLetter(cp) {\n  return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\n}\n\nfunction isLowerLetter(cp) {\n  return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\n}\n\nfunction isLetter(cp) {\n  return isLowerLetter(cp) || isUpperLetter(cp);\n}\n\nfunction isWhitespace(cp) {\n  return cp === TABULATION || cp === LINE_FEED || cp === FORM_FEED || cp === CARRIAGE_RETURN || cp === SPACE;\n}\n\nfunction isDigit(cp) {\n  return cp >= DIGIT_0 && cp <= DIGIT_9;\n}\n\nfunction isDot(cp) {\n  return cp === FULL_STOP;\n}\n\nfunction isUnit(cp) {\n  return isLetter(cp) || cp === PERCENT;\n}\n\nfunction createError(calc) {\n  return new Error(`calc parse error: ${calc}`);\n}\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\n\n\nfunction tokenize(calc) {\n  const exp = calc.replace(/calc\\(/g, \"(\").trim();\n  const tokens = [];\n  const len = exp.length;\n\n  for (let index = 0; index < len; index++) {\n    const c = exp[index];\n    const cp = c.charCodeAt(0);\n\n    if (c === \"(\" || c === \")\") {\n      tokens.push({\n        value: c,\n        type: TYPE_PAREN\n      });\n    } else if (c === \"*\" || c === \"/\") {\n      tokens.push({\n        value: c,\n        type: TYPE_OPERATOR\n      });\n    } else if (c === \"+\" || c === \"-\") {\n      index = parseSign(c, index + 1) - 1;\n    } else if (isDigit(cp) || isDot(cp)) {\n      index = parseNum(c, index + 1) - 1;\n    } else if (isWhitespace(cp)) {// skip\n    } else {\n      throw createError(calc);\n    }\n  }\n\n  function parseSign(sign, start) {\n    if (start < len) {\n      const c = exp[start];\n      const cp = c.charCodeAt(0);\n\n      if (isDigit(cp) || isDot(cp)) {\n        return parseNum(sign + c, start + 1);\n      }\n    }\n\n    tokens.push({\n      value: sign,\n      type: TYPE_OPERATOR\n    });\n    return start;\n  }\n\n  function parseNum(num, start) {\n    let index = start;\n\n    for (; index < len; index++) {\n      const c = exp[index];\n      const cp = c.charCodeAt(0);\n\n      if (isDigit(cp)) {\n        num += c;\n      } else if (c === \".\") {\n        if (num.indexOf(\".\") >= 0) {\n          throw createError(calc);\n        }\n\n        num += c;\n      } else if (isUnit(cp)) {\n        return parseUnit(num, c, index + 1);\n      } else {\n        break;\n      }\n    }\n\n    if (num === \".\") {\n      throw createError(calc);\n    }\n\n    tokens.push({\n      value: parseFloat(num),\n      type: TYPE_NUMBER\n    });\n    return index;\n  }\n\n  function parseUnit(num, unit, start) {\n    let index = start;\n\n    for (; index < len; index++) {\n      const c = exp[index];\n      const cp = c.charCodeAt(0);\n\n      if (isUnit(cp)) {\n        unit += c;\n      } else {\n        break;\n      }\n    }\n\n    tokens.push({\n      value: parseFloat(num),\n      unit,\n      type: TYPE_UNIT\n    });\n    return index;\n  }\n\n  return tokens;\n}\n\nconst PRECEDENCE = {\n  \"*\": 3,\n  \"/\": 3,\n  \"+\": 2,\n  \"-\": 2\n};\n\nfunction lex(tokens, calc) {\n  function buildBinaryExpNode(stack) {\n    const right = stack.pop();\n    const op = stack.pop();\n    const left = stack.pop();\n\n    if (!left || !left.nodeType || !op || op.type !== TYPE_OPERATOR || !right || !right.nodeType) {\n      throw createError(calc);\n    }\n\n    return {\n      nodeType: NODE_TYPE_BINARY_EXPRESSION,\n      left,\n      op,\n      right\n    };\n  }\n\n  const stack = [];\n\n  while (tokens.length) {\n    const token = tokens.shift();\n\n    if (token.type === TYPE_PAREN && token.value === \"(\") {\n      let deep = 0;\n      const closeIndex = utils_1.array.findIndex(tokens, t => {\n        if (t.type === TYPE_PAREN && t.value === \"(\") {\n          deep++;\n        } else if (t.type === TYPE_PAREN && t.value === \")\") {\n          if (!deep) {\n            return true;\n          }\n\n          deep--;\n        }\n\n        return false;\n      });\n\n      if (closeIndex === -1) {\n        throw createError(calc);\n      }\n\n      stack.push(lex(tokens.splice(0, closeIndex), calc));\n      tokens.shift();\n    } else if (token.type === TYPE_OPERATOR) {\n      if (stack.length >= 3) {\n        const beforeOp = stack[stack.length - 2].value;\n\n        if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\n          stack.push(buildBinaryExpNode(stack));\n        }\n      }\n\n      stack.push(token);\n    } else if (token.type === TYPE_UNIT) {\n      const {\n        value: num,\n        unit\n      } = token;\n      stack.push({\n        nodeType: NODE_TYPE_UNIT,\n        value: num,\n        unit\n      });\n    } else if (token.type === TYPE_NUMBER) {\n      stack.push({\n        nodeType: NODE_TYPE_NUMBER,\n        value: token.value\n      });\n    }\n  }\n\n  while (stack.length > 1) {\n    stack.push(buildBinaryExpNode(stack));\n  }\n\n  return stack[0];\n}\n\nfunction parse(calcStr) {\n  const tokens = tokenize(calcStr);\n  return lex(tokens, calcStr);\n}\n\nfunction calcNode(node, context) {\n  if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\n    const left = calcNode(node.left, context);\n    const right = calcNode(node.right, context);\n\n    switch (node.op.value) {\n      case \"+\":\n        return left + right;\n\n      case \"-\":\n        return left - right;\n\n      case \"*\":\n        return left * right;\n\n      case \"/\":\n        return left / right;\n\n      default:\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        throw new Error(`calc error. unknown operator: ${node.op.value}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_UNIT) {\n    switch (node.unit) {\n      case \"%\":\n        return node.value * context.full / 100;\n\n      case \"em\":\n        return node.value * context.em;\n\n      case \"px\":\n        return node.value;\n\n      default:\n        throw new Error(`calc error. unknown unit: ${node.unit}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_NUMBER) {\n    return node.value;\n  }\n\n  throw new Error(\"calc error.\");\n}\n\nfunction toPxInternal(value, context) {\n  const ast = parse(value);\n  return calcNode(ast, context);\n}\n\nfunction toPx(value, context) {\n  if (typeof value === \"string\") {\n    return toPxInternal(value.trim(), context);\n  }\n\n  return value - 0;\n}\n\nexports.toPx = toPx;\n\n/***/ }),\n\n/***/ \"./internal/canvases.js\":\n/*!******************************!*\\\n  !*** ./internal/canvases.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\nconst fontSizeCache = {};\n\nfunction getFontSize(ctx, font) {\n  const fontName = font || ctx.font;\n\n  if (fontSizeCache[fontName]) {\n    return fontSizeCache[fontName];\n  }\n\n  const bk = ctx.font;\n\n  try {\n    ctx.font = fontName;\n    const em = ctx.measureText(\"\").width;\n    return fontSizeCache[fontName] = {\n      width: em,\n      height: em\n    };\n  } finally {\n    ctx.font = bk;\n  }\n}\n\nexports.getFontSize = getFontSize;\n\nfunction calcBasePosition(ctx, rect, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  return calcStartPosition(ctx, rect, 0, 0, {\n    offset,\n    padding: {\n      left: paddingLeft,\n      right: paddingRight,\n      top: paddingTop,\n      bottom: paddingBottom\n    }\n  });\n}\n\nexports.calcBasePosition = calcBasePosition;\n\nfunction calcStartPosition(ctx, rect, width, height, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  const textAlign = ctx.textAlign || \"left\";\n  const textBaseline = ctx.textBaseline || \"middle\";\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  let x = rect.left + offset + paddingLeft;\n\n  if (textAlign === \"right\" || textAlign === \"end\") {\n    x = rect.right - width - offset - paddingRight;\n  } else if (textAlign === \"center\") {\n    x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n  }\n\n  let y = rect.top + offset + paddingTop;\n\n  if (textBaseline === \"bottom\" || textBaseline === \"alphabetic\" || textBaseline === \"ideographic\") {\n    y = rect.bottom - height - offset - paddingBottom;\n  } else if (textBaseline === \"middle\") {\n    y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\n  }\n\n  return {\n    x,\n    y\n  };\n}\n\nexports.calcStartPosition = calcStartPosition;\n\n/***/ }),\n\n/***/ \"./internal/color.js\":\n/*!***************************!*\\\n  !*** ./internal/color.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.colorToRGB = void 0;\nconst rgbMap = {};\n\nfunction styleColorToRGB(color) {\n  const dummy = document.createElement(\"div\");\n  const {\n    style\n  } = dummy;\n  style.color = color;\n  style.position = \"fixed\";\n  style.height = \"1px\";\n  style.width = \"1px\";\n  style.opacity = \"0\";\n  document.body.appendChild(dummy);\n  const {\n    color: styleColor\n  } = (document.defaultView || window).getComputedStyle(dummy, \"\");\n  document.body.removeChild(dummy);\n  return colorToRGB0(styleColor || \"\");\n}\n\nfunction hexToNum(hex) {\n  return parseInt(hex, 16);\n}\n\nfunction createRGB(r, g, b, a = 1) {\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\n\nfunction tripleHexToRGB({\n  1: r,\n  2: g,\n  3: b\n}) {\n  return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n}\n\nfunction sextupleHexToRGB({\n  1: r1,\n  2: r2,\n  3: g1,\n  4: g2,\n  5: b1,\n  6: b2\n}) {\n  return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n}\n\nfunction testRGB({\n  r,\n  g,\n  b,\n  a\n}) {\n  return 0 <= r && r <= 255 && 0 <= g && g <= 255 && 0 <= b && b <= 255 && 0 <= a && a <= 1;\n}\n\nfunction rateToByte(r) {\n  return Math.ceil(r * 255 / 100);\n}\n\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\nconst percentPattern = `${numberPattern}%`;\nconst maybePercentPattern = `${numberPattern}(%?)`;\n\nfunction buildRgbWithCommaRegExp(bytePattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbLv4RegExp(bytePattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction colorToRGB0(color) {\n  if (/^#[0-9a-f]{3}$/i.exec(color)) {\n    return tripleHexToRGB(color);\n  }\n\n  if (/^#[0-9a-f]{6}$/i.exec(color)) {\n    return sextupleHexToRGB(color);\n  }\n\n  let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) || buildRgbLv4RegExp(numberPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbWithCommaRegExp(percentPattern).exec(color) || buildRgbLv4RegExp(percentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) || buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5]\n    /* % */\n    ? 100 : 1));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) || buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5]\n    /* % */\n    ? 100 : 1));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  return null;\n}\n\nfunction colorToRGB(color) {\n  if (typeof color !== \"string\") {\n    return createRGB(0, 0, 0, 0);\n  }\n\n  color = color.toLowerCase().trim();\n\n  if (rgbMap[color]) {\n    return rgbMap[color];\n  }\n\n  return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n}\n\nexports.colorToRGB = colorToRGB;\n\n/***/ }),\n\n/***/ \"./internal/dom.js\":\n/*!*************************!*\\\n  !*** ./internal/dom.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\n\nfunction createElement(tagName, {\n  classList,\n  text,\n  html\n} = {}) {\n  const element = document.createElement(tagName);\n\n  if (classList) {\n    if (Array.isArray(classList)) {\n      element.classList.add(...classList);\n    } else {\n      element.classList.add(classList);\n    }\n  }\n\n  if (text) {\n    element.textContent = text;\n  } else if (html) {\n    element.innerHTML = html;\n  }\n\n  return element;\n}\n\nexports.createElement = createElement;\n\nfunction empty(dom) {\n  let c;\n\n  while (c = dom.firstChild) {\n    dom.removeChild(c);\n  }\n}\n\nexports.empty = empty;\n\nfunction isNode(arg) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return !!(arg.nodeType && arg.nodeName);\n}\n\nfunction toNode(arg) {\n  if (isNode(arg)) {\n    return arg;\n  }\n\n  const dom = createElement(\"div\", {\n    html: arg\n  });\n  return Array.prototype.slice.call(dom.childNodes);\n}\n\nfunction toNodeList(arg) {\n  if (Array.isArray(arg)) {\n    const result = [];\n    arg.forEach(e => {\n      result.push(...toNodeList(e));\n    });\n    return result;\n  }\n\n  const node = toNode(arg);\n  return Array.isArray(node) ? node : [node];\n}\n\nexports.toNodeList = toNodeList;\n\nfunction appendHtml(dom, inner) {\n  toNodeList(inner).forEach(node => {\n    dom.appendChild(node);\n  });\n}\n\nexports.appendHtml = appendHtml;\n\nfunction disableFocus(el) {\n  el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\n  el.tabIndex = -1;\n  Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\n\nexports.disableFocus = disableFocus;\n\nfunction enableFocus(el) {\n  if (\"disableBeforeTabIndex\" in el.dataset) {\n    el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\n  }\n\n  Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\n\nexports.enableFocus = enableFocus;\n\nfunction isFocusable(el) {\n  return el.tabIndex != null && el.tabIndex > -1;\n}\n\nexports.isFocusable = isFocusable;\n\nfunction findPrevSiblingFocusable(el) {\n  let n = el.previousSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.previousSibling;\n  }\n\n  return n;\n}\n\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\n\nfunction findNextSiblingFocusable(el) {\n  let n = el.nextSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.nextSibling;\n  }\n\n  return n;\n}\n\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\n\n/***/ }),\n\n/***/ \"./internal/fonts.js\":\n/*!***************************!*\\\n  !*** ./internal/fonts.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.load = exports.check = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst loads = {};\nlet load;\nexports.load = load;\nlet check;\nexports.check = check;\n\nif (utils_1.isNode) {\n  exports.load = load = function (_font, _testStr, callback) {\n    callback();\n  };\n\n  exports.check = check = function () {\n    return false;\n  };\n} else {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const fontFaceSet = document.fonts;\n  const legacy = !fontFaceSet;\n  exports.load = load = legacy ? function (font, testStr, callback) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      callback();\n      return;\n    } // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\n    __webpack_require__(/*! ./legacy/fontwatch/FontWatchRunner */ \"./internal/legacy/fontwatch/FontWatchRunner.js\").load(font, testStr, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    }, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    });\n  } : function (font, _testStr, callback) {\n    if (loads.all || loads[font]) {\n      callback();\n      return;\n    }\n\n    fontFaceSet.ready.then(() => {\n      loads.all = true;\n    });\n    fontFaceSet.load(font).then(() => {\n      loads[font] = true;\n      callback();\n    });\n  };\n  exports.check = check = legacy ? function (font, testStr) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      return true;\n    }\n\n    load(font, testStr, () => {});\n    return false;\n  } : function (font, testStr) {\n    if (loads.all || loads[font]) {\n      return true;\n    }\n\n    if (!fontFaceSet.check(font)) {\n      load(font, testStr, () => {});\n      return false;\n    }\n\n    return true;\n  };\n}\n\n/***/ }),\n\n/***/ \"./internal/hiDPI.js\":\n/*!***************************!*\\\n  !*** ./internal/hiDPI.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transform = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst handler = new EventHandler_1.EventHandler();\nlet ratio = 1;\n\nfunction setRatio() {\n  if (utils_1.isNode) {\n    ratio = 1;\n  } else {\n    ratio = Math.ceil(window.devicePixelRatio || 1);\n\n    if (ratio > 1 && ratio % 2 !== 0) {\n      ratio += 1;\n    }\n  }\n}\n\nsetRatio();\n\nif (!utils_1.isNode) {\n  handler.on(window, \"resize\", setRatio);\n}\n\nfunction transform(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const {\n    getAttribute,\n    setAttribute\n  } = canvas;\n\n  canvas.getAttribute = function (name) {\n    let result = getAttribute.call(this, name);\n\n    if (name === \"width\" || name === \"height\") {\n      result = `${Number(result) / ratio}`;\n    }\n\n    return result;\n  };\n\n  canvas.setAttribute = function (name, val) {\n    const wh = name === \"width\" || name === \"height\";\n\n    if (wh) {\n      val = `${Number(val) * ratio}`;\n    }\n\n    const result = setAttribute.call(this, name, val);\n\n    if (wh) {\n      ctx.scale(ratio, ratio);\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(canvas, \"width\", {\n    get() {\n      return Number(canvas.getAttribute(\"width\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"width\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  Object.defineProperty(canvas, \"height\", {\n    get() {\n      return Number(canvas.getAttribute(\"height\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"height\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  const {\n    drawImage\n  } = ctx; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  ctx.drawImage = function (img, ...args) {\n    if (img !== canvas || ratio === 1) {\n      return drawImage.call(this, img, ...args);\n    }\n\n    this.save();\n\n    try {\n      this.scale(1 / ratio, 1 / ratio);\n\n      if (args.length > 4) {\n        args[4] *= ratio;\n        args[5] *= ratio;\n      } else {\n        args[0] *= ratio;\n        args[1] *= ratio;\n      }\n\n      return drawImage.call(this, img, ...args);\n    } finally {\n      this.restore();\n    }\n  };\n\n  return canvas;\n}\n\nexports.transform = transform;\n\n/***/ }),\n\n/***/ \"./internal/icons.js\":\n/*!***************************!*\\\n  !*** ./internal/icons.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\nconst ICON_PROP_KEYS = [\"content\", \"font\", \"color\", \"className\", \"tagName\", \"isLiga\", \"width\", \"src\", \"svg\", \"name\", \"path\", \"offsetTop\", \"offsetLeft\"];\n\nfunction quote(name) {\n  const quoted = [];\n  const split = name.split(/,\\s*/);\n\n  for (let i = 0; i < split.length; i++) {\n    const part = split[i].replace(/['\"]/g, \"\");\n\n    if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\n      quoted.push(part);\n    } else {\n      quoted.push(`'${part}'`);\n    }\n  }\n\n  return quoted.join(\",\");\n}\n\nconst doms = {};\nconst props = {};\n\nfunction getIconProps(tagName, className) {\n  const tagProps = props[tagName] || (props[tagName] = {});\n\n  if (tagProps[className]) {\n    return tagProps[className];\n  }\n\n  const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName)); // `classList.add()` cannot be used because it may be separated by spaces.\n\n  dom.className = className;\n  dom.classList.add(\"cheetah-grid-icon\");\n  document.body.appendChild(dom);\n\n  try {\n    const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\n    let content = beforeStyle.getPropertyValue(\"content\");\n\n    if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\n      if (content[0] === content[content.length - 1]) {\n        content = content.slice(1, -1);\n      }\n    }\n\n    let font = beforeStyle.getPropertyValue(\"font\");\n\n    if (!font) {\n      font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\n    }\n\n    const color = beforeStyle.getPropertyValue(\"color\");\n    const width = dom.clientWidth;\n    const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\n    return tagProps[className] = {\n      content,\n      font,\n      color,\n      width,\n      isLiga\n    };\n  } finally {\n    document.body.removeChild(dom);\n  }\n}\n\nexports.getIconProps = getIconProps;\n\nfunction toPropArray(prop, count) {\n  const result = [];\n\n  if (Array.isArray(prop)) {\n    result.push(...prop);\n\n    for (let i = prop.length; i < count; i++) {\n      result.push(null);\n    }\n  } else {\n    for (let i = 0; i < count; i++) {\n      result.push(prop);\n    }\n  }\n\n  return result;\n}\n\nfunction toSimpleArray(iconProps) {\n  if (!iconProps) {\n    return iconProps;\n  } else if (Array.isArray(iconProps)) {\n    return iconProps;\n  }\n\n  const workData = {};\n  let count = 0;\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const prop = iconProps[k];\n\n    if (prop) {\n      if (Array.isArray(prop)) {\n        count = Math.max(count, prop.length);\n      } else {\n        count = Math.max(count, 1);\n      }\n    }\n  });\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const arr = toPropArray(iconProps[k], count); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    workData[k] = arr;\n  });\n  const result = [];\n\n  for (let i = 0; i < count; i++) {\n    const data = {};\n    ICON_PROP_KEYS.forEach(k => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const val = workData[k][i]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      data[k] = val;\n    });\n    result.push(data);\n  }\n\n  return result;\n}\n\nfunction normalize(iconProps) {\n  const data = {};\n\n  for (const k in iconProps) {\n    if (k === \"className\") {\n      continue;\n    }\n\n    if (isIconKey(k)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      data[k] = iconProps[k];\n    }\n  }\n\n  if (iconProps.className) {\n    const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\n\n    for (const k in prop) {\n      if (isIconKey(k)) {\n        if (iconProps[k] == null) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          data[k] = prop[k];\n        }\n      }\n    }\n  }\n\n  return data;\n}\n\nfunction toNormalizeArray(iconProps) {\n  const icons = toSimpleArray(iconProps);\n\n  if (!icons) {\n    return icons;\n  }\n\n  return icons.map(icon => normalize(icon));\n}\n\nexports.toNormalizeArray = toNormalizeArray;\nexports.iconPropKeys = ICON_PROP_KEYS;\n\nfunction isIconKey(k) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return ICON_PROP_KEYS.indexOf(k) >= 0;\n}\n\n/***/ }),\n\n/***/ \"./internal/imgs.js\":\n/*!**************************!*\\\n  !*** ./internal/imgs.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCacheOrLoad = exports.loadImage = void 0;\n\nconst LRUCache_1 = __webpack_require__(/*! ./LRUCache */ \"./internal/LRUCache.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst allCache = {};\n\nfunction loadImage(src) {\n  if (typeof Promise === \"undefined\") {\n    console.error(\"Promise is not loaded. load Promise before this process.\");\n    return {\n      then() {\n        return this;\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    };\n  }\n\n  const img = new Image();\n  const result = new Promise(resolve => {\n    img.onload = () => {\n      resolve(img);\n    };\n  });\n\n  img.onerror = () => {\n    const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\n    console.warn(`cannot load: ${url}`);\n    throw new Error(`IMAGE LOAD ERROR: ${url}`);\n  };\n\n  img.src = src;\n  return result;\n}\n\nexports.loadImage = loadImage;\n\nfunction getCacheOrLoad0(cache, src) {\n  return (0, utils_1.then)(src, src => {\n    const c = cache.get(src);\n\n    if (c) {\n      return c;\n    }\n\n    const result = loadImage(src).then(img => {\n      cache.put(src, img);\n      return img;\n    });\n    cache.put(src, result);\n    return result;\n  });\n}\n\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n  const cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\n  return getCacheOrLoad0(cache, src);\n}\n\nexports.getCacheOrLoad = getCacheOrLoad;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/Path2DShim.js\":\n/*!**********************************************!*\\\n  !*** ./internal/legacy/canvas/Path2DShim.js ***!\n  \\**********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Path2DShim = void 0;\n\nconst PathCommandsParser_1 = __webpack_require__(/*! ./PathCommandsParser */ \"./internal/legacy/canvas/PathCommandsParser.js\");\n\nconst parser = new PathCommandsParser_1.PathCommandsParser();\n\nclass Path2DShim {\n  arc(...args) {\n    this._ops.push({\n      op: \"arc\",\n      args\n    });\n  }\n\n  arcTo(...args) {\n    this._ops.push({\n      op: \"arcTo\",\n      args\n    });\n  }\n\n  bezierCurveTo(...args) {\n    this._ops.push({\n      op: \"bezierCurveTo\",\n      args\n    });\n  }\n\n  closePath(...args) {\n    this._ops.push({\n      op: \"closePath\",\n      args\n    });\n  }\n\n  ellipse(...args) {\n    this._ops.push({\n      op: \"ellipse\",\n      args\n    });\n  }\n\n  lineTo(...args) {\n    this._ops.push({\n      op: \"lineTo\",\n      args\n    });\n  }\n\n  moveTo(...args) {\n    this._ops.push({\n      op: \"moveTo\",\n      args\n    });\n  }\n\n  quadraticCurveTo(...args) {\n    this._ops.push({\n      op: \"quadraticCurveTo\",\n      args\n    });\n  }\n\n  rect(...args) {\n    this._ops.push({\n      op: \"rect\",\n      args\n    });\n  }\n\n  constructor(arg) {\n    this._ops = [];\n\n    if (arg === undefined) {\n      return;\n    }\n\n    if (typeof arg === \"string\") {\n      // try {\n      this._ops = parser.parse(arg); // } catch (e) {\n      // \tthrow e;\n      // }\n    } else if (arg.hasOwnProperty(\"_ops\")) {\n      this._ops = [...arg._ops];\n    } else {\n      throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n    }\n  }\n\n  roundRect(_x, _y, _w, _h, _radii) {\n    throw new Error(\"Method not implemented.\");\n  }\n\n}\n\nexports.Path2DShim = Path2DShim;\nconst {\n  CanvasRenderingContext2D\n} = window;\nconst originalFill = CanvasRenderingContext2D.prototype.fill; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n  if (args[0] instanceof Path2DShim) {\n    const path = args[0];\n    this.beginPath();\n\n    path._ops.forEach(op => {\n      const fn = this[op.op];\n      fn.apply(this, op.args);\n    });\n\n    originalFill.apply(this, Array.prototype.slice.call(args, 1));\n  } else {\n    originalFill.apply(this, args);\n  }\n};\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommands.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommands.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathCommands = void 0;\n/*eslint new-cap: \"off\"*/\n\nfunction mag(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n\nfunction dot(u, v) {\n  return u[0] * v[0] + u[1] * v[1];\n}\n\nfunction ratio(u, v) {\n  return dot(u, v) / (mag(u) * mag(v));\n}\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction angle(u, v) {\n  let sign = 1.0;\n\n  if (u[0] * v[1] - u[1] * v[0] < 0) {\n    sign = -1.0;\n  }\n\n  return sign * Math.acos(clamp(ratio(u, v), -1, 1));\n}\n\nfunction rotClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\n\nfunction rotCounterClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\n\nfunction midPoint(u, v) {\n  return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\n\nfunction meanVec(u, v) {\n  return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\n\nfunction pointMul(u, v) {\n  return [u[0] * v[0], u[1] * v[1]];\n}\n\nfunction scale(c, v) {\n  return [c * v[0], c * v[1]];\n}\n\nfunction sum(u, v) {\n  return [u[0] + v[0], u[1] + v[1]];\n} // Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\n\n\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n  // Convert from endpoint to center parametrization, as detailed in:\n  //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n  if (rx === 0 || ry === 0) {\n    ctx.lineTo(x2, x1);\n    return;\n  }\n\n  phi *= Math.PI / 180.0;\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\n\n  const xPrime2 = pointMul(xPrime, xPrime);\n  let rx2 = Math.pow(rx, 2);\n  let ry2 = Math.pow(ry, 2);\n  const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n\n  if (lambda > 1) {\n    rx *= lambda;\n    ry *= lambda;\n    rx2 = Math.pow(rx, 2);\n    ry2 = Math.pow(ry, 2);\n  }\n\n  let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) / (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n\n  if (fA === fS) {\n    factor *= -1.0;\n  }\n\n  const cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\n\n  const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\n\n  const x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\n  const x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\n  const theta = angle([1, 0], x1UnitVector); // F.6.5.5\n\n  const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n\n  const start = theta;\n  const end = theta + deltaTheta;\n  ctx.save();\n  ctx.translate(c[0], c[1]);\n  ctx.rotate(phi);\n  ctx.scale(rx, ry);\n  ctx.arc(0, 0, 1, start, end, !fS);\n  ctx.restore();\n}\n\nclass PathCommands {\n  constructor(ctx) {\n    let lMx;\n    let lMy;\n    let lx = 0;\n    let ly = 0;\n    let reflected;\n    let lastCommand = \"\";\n\n    function makeReflected() {\n      if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\n        return {\n          x: lx,\n          y: ly\n        };\n      }\n\n      return reflected;\n    }\n\n    this.M = (px, py) => {\n      ctx.moveTo(px, py);\n      lMx = px;\n      lMy = py;\n      lx = px;\n      ly = py;\n      lastCommand = \"M\";\n      return this;\n    };\n\n    this.m = (px, py) => this.M(px + lx, py + ly);\n\n    this.L = (px, py) => {\n      ctx.lineTo(px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"L\";\n      return this;\n    };\n\n    this.l = (px, py) => this.L(px + lx, py + ly);\n\n    this.H = px => this.L(px, ly);\n\n    this.h = px => this.H(px + lx);\n\n    this.V = py => this.L(lx, py);\n\n    this.v = py => this.V(py + ly);\n\n    this.Z = () => {\n      ctx.closePath();\n      lx = lMx;\n      ly = lMy;\n      lastCommand = \"Z\";\n      return this;\n    };\n\n    this.z = () => this.Z(); //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n\n\n    this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n      ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cp2x,\n        y: 2 * py - cp2y\n      };\n      lastCommand = \"C\";\n      return this;\n    };\n\n    this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly); //S x2 y2, x y (or s dx2 dy2, dx dy)\n\n\n    this.S = (cpx, cpy, px, py) => {\n      const {\n        x: cp1x,\n        y: cp1y\n      } = makeReflected();\n      return this.C(cp1x, cp1y, cpx, cpy, px, py);\n    };\n\n    this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly); //Q x1 y1, x y (or q dx1 dy1, dx dy)\n\n\n    this.Q = (cpx, cpy, px, py) => {\n      ctx.quadraticCurveTo(cpx, cpy, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cpx,\n        y: 2 * py - cpy\n      };\n      lastCommand = \"Q\";\n      return this;\n    };\n\n    this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly); //T x y (or t dx dy)\n\n\n    this.T = (px, py) => {\n      const {\n        x: cpx,\n        y: cpy\n      } = makeReflected();\n      return this.Q(cpx, cpy, px, py);\n    };\n\n    this.t = (px, py) => this.T(px + lx, py + ly); //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\n\n    this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n      const x1 = lx;\n      const y1 = ly;\n      ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"A\";\n      return this;\n    }; //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n\n\n    this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n  }\n\n}\n\nexports.PathCommands = PathCommands;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommandsParser.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommandsParser.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathCommandsParser = void 0;\n\nconst PathCommands_1 = __webpack_require__(/*! ./PathCommands */ \"./internal/legacy/canvas/PathCommands.js\");\n\nfunction pathTokens(d) {\n  let idx = 0;\n  return {\n    next() {\n      let s = \"\";\n\n      while (d.length > idx) {\n        const c = d[idx];\n        idx++;\n\n        if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\n          if (s) {\n            return s;\n          }\n        } else {\n          const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\n\n          if (type === \"str\") {\n            if (s) {\n              idx--;\n              return s;\n            }\n\n            return c;\n          }\n\n          if (\"-+\".indexOf(c) > -1) {\n            if (s) {\n              idx--;\n              return s;\n            }\n          }\n\n          if (c === \".\") {\n            if (s.indexOf(\".\") > -1) {\n              idx--;\n              return s;\n            }\n          }\n\n          s += c;\n        }\n      }\n\n      return s || null;\n    }\n\n  };\n}\n\nfunction command(builder, cmd, argsProvider) {\n  if (cmd.toUpperCase() === \"M\" || cmd.toUpperCase() === \"L\" || cmd.toUpperCase() === \"T\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next());\n    return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\n  } else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\n    builder.command(cmd, argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"Z\") {\n    builder.command(cmd);\n    return cmd;\n  } else if (cmd.toUpperCase() === \"C\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"A\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else {\n    // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n    console.warn(`unsupported:${cmd}`);\n  }\n\n  return null;\n}\n\nclass PathCommandsParser {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._ops = [];\n    this._commands = new PathCommands_1.PathCommands(this);\n\n    const buildPush = op => // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (...args) => {\n      this._ops.push({\n        op,\n        args\n      });\n    };\n\n    this.moveTo = buildPush(\"moveTo\");\n    this.lineTo = buildPush(\"lineTo\");\n    this.closePath = buildPush(\"closePath\");\n    this.bezierCurveTo = buildPush(\"bezierCurveTo\");\n    this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\n    this.save = buildPush(\"save\");\n    this.translate = buildPush(\"translate\");\n    this.rotate = buildPush(\"rotate\");\n    this.scale = buildPush(\"scale\");\n    this.arc = buildPush(\"arc\");\n    this.restore = buildPush(\"restore\");\n    this.arcTo = buildPush(\"arcTo\");\n    this.ellipse = buildPush(\"ellipse\");\n    this.rect = buildPush(\"rect\");\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  command(name, ...args) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const numArgs = args || [];\n\n    for (let i = 0; i < args.length; i++) {\n      numArgs[i] -= 0;\n    }\n\n    const command = this._commands[name]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    command.apply(this, numArgs);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  parse(d) {\n    const ops = this._ops = [];\n    const tokens = pathTokens(d);\n\n    try {\n      let cmd;\n      let subsequentCommand = \"Z\";\n\n      while (cmd = tokens.next()) {\n        if (!isNaN(Number(cmd))) {\n          let fst = true;\n          const argsProvider = {\n            next() {\n              if (fst) {\n                fst = false;\n                return cmd;\n              }\n\n              return tokens.next();\n            }\n\n          };\n          subsequentCommand = command(this, subsequentCommand, argsProvider) || \"Z\";\n        } else {\n          subsequentCommand = command(this, cmd, tokens) || \"Z\";\n        }\n      }\n    } catch (e) {\n      console.log(`Error: ${d}`);\n      throw e;\n    }\n\n    return ops;\n  }\n\n}\n\nexports.PathCommandsParser = PathCommandsParser;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontRuler.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontRuler.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FontRuler = void 0;\n\nfunction computeStyle(font) {\n  return [{\n    display: \"block\",\n    position: \"absolute\",\n    top: \"-9999px\",\n    left: \"-9999px\",\n    width: \"auto\",\n    height: \"auto\",\n    margin: \"0\",\n    padding: \"0\",\n    \"white-space\": \"nowrap\",\n    font\n  }, {\n    \"font-variant\": \"normal\",\n    \"font-size\": \"300px\",\n    \"font-style\": \"normal\",\n    \"font-weight\": \"400\",\n    \"line-height\": \"normal\"\n  }];\n}\n\nclass FontRuler {\n  constructor(font, testStr) {\n    const e = document.createElement(\"span\");\n    e.setAttribute(\"aria-hidden\", \"true\");\n    e.textContent = testStr || \"BESbswy\";\n    computeStyle(font).forEach(style => {\n      for (const k in style) {\n        const key = k; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        e.style[key] = style[key];\n      }\n    });\n    document.body.appendChild(e);\n    this.el_ = e;\n  }\n\n  getWidth() {\n    return this.el_.offsetWidth;\n  }\n\n  remove() {\n    document.body.removeChild(this.el_);\n  }\n\n}\n\nexports.FontRuler = FontRuler;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontWatchRunner.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontWatchRunner.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\n\nconst FontRuler_1 = __webpack_require__(/*! ./FontRuler */ \"./internal/legacy/fontwatch/FontRuler.js\");\n\nconst LastResortFonts = {\n  SERIF: \"serif\",\n  SANS_SERIF: \"sans-serif\"\n};\nconst watchRunners = {};\n\nclass FontWatchRunner {\n  static load(font, testStr, activeCallback, inactiveCallback) {\n    const c = watchRunners[font] || (watchRunners[font] = {});\n    testStr += \"\";\n    let runner;\n\n    if (c[testStr]) {\n      runner = c[testStr];\n    } else {\n      runner = c[testStr] = new FontWatchRunner(font, testStr);\n    }\n\n    runner.then(activeCallback, inactiveCallback);\n  }\n\n  constructor(font, testStr) {\n    this.activeCallbacks = [];\n    this.inactiveCallbacks = [];\n    this.status = null;\n    this.lastResortWidths_ = {};\n    this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\n    this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\n    const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\n    const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr); //start\n\n    this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n    this.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n    lastResortRulerA.remove();\n    lastResortRulerB.remove();\n    this.started_ = Date.now();\n    this.check_();\n  }\n\n  then(activeCallback, inactiveCallback) {\n    if (this.status) {\n      if (this.status !== \"ng\") {\n        activeCallback();\n      } else {\n        inactiveCallback();\n      }\n    } else {\n      this.activeCallbacks.push(activeCallback);\n      this.inactiveCallbacks.push(inactiveCallback);\n    }\n  }\n\n  check_() {\n    const widthA = this.fontRulerA_.getWidth();\n    const widthB = this.fontRulerB_.getWidth();\n\n    if (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\n      if (Date.now() - this.started_ >= 3000) {\n        // timeout\n        if (this.isLastResortFont_(widthA, widthB)) {\n          this.finish_(this.activeCallbacks);\n          this.status = \"ok\";\n        } else {\n          this.finish_(this.inactiveCallbacks);\n          this.status = \"ng\";\n        }\n      } else {\n        setTimeout(() => {\n          this.check_();\n        }, 50);\n      }\n    } else {\n      this.finish_(this.activeCallbacks);\n      this.status = \"ok\";\n    }\n  }\n\n  isFallbackFont_(a, b) {\n    return this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\n  }\n\n  widthsMatchLastResortWidths_(a, b) {\n    for (const font in LastResortFonts) {\n      if (LastResortFonts.hasOwnProperty(font)) {\n        if (this.widthMatches_(a, LastResortFonts[font]) && this.widthMatches_(b, LastResortFonts[font])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  widthMatches_(width, lastResortFont) {\n    return width === this.lastResortWidths_[lastResortFont];\n  }\n\n  isLastResortFont_(a, b) {\n    return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n  }\n\n  finish_(callbacks) {\n    setTimeout(() => {\n      this.fontRulerA_.remove();\n      this.fontRulerB_.remove();\n      callbacks.forEach(cb => cb());\n    }, 0);\n  }\n\n}\n\nlet HAS_WEBKIT_FALLBACK_BUG = null;\n\nfunction hasWebKitFallbackBug() {\n  if (HAS_WEBKIT_FALLBACK_BUG === null) {\n    const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n    HAS_WEBKIT_FALLBACK_BUG = !!match && (parseInt(match[1], 10) < 536 || parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11);\n  }\n\n  return HAS_WEBKIT_FALLBACK_BUG;\n}\n\nmodule.exports = FontWatchRunner;\n\n/***/ }),\n\n/***/ \"./internal/menu-items.js\":\n/*!********************************!*\\\n  !*** ./internal/menu-items.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeToFn = exports.normalize = void 0;\n/** @private */\n\nfunction extend(a, b) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const o = {};\n\n  for (const k in a) {\n    o[k] = a[k];\n  }\n\n  for (const k in b) {\n    o[k] = b[k];\n  }\n\n  return o;\n}\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\n\n\nfunction normalize(options) {\n  if (!options) {\n    return [];\n  }\n\n  if (Array.isArray(options)) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return options.map( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    e => extend(e, {\n      label: e.caption || e.label\n    }));\n  }\n\n  if (typeof options === \"string\") {\n    return normalize(JSON.parse(options));\n  }\n\n  const result = [];\n\n  for (const k in options) {\n    result.push({\n      value: k,\n      label: options[k]\n    });\n  }\n\n  return result;\n}\n\nexports.normalize = normalize;\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\n\nfunction normalizeToFn(options) {\n  if (typeof options === \"function\") {\n    return record => normalize(options(record));\n  }\n\n  return () => normalize(options);\n}\n\nexports.normalizeToFn = normalizeToFn;\n\n/***/ }),\n\n/***/ \"./internal/paste-utils.js\":\n/*!*********************************!*\\\n  !*** ./internal/paste-utils.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\n\nfunction normalizePasteValue(text) {\n  return text[text.length - 1] !== \"\\n\" ? text : text[text.length - 2] === \"\\r\" ? text.slice(0, -2) : text.slice(0, -1);\n}\n\nexports.normalizePasteValue = normalizePasteValue;\n\nfunction parsePasteRangeBoxValues(value, option) {\n  const normalizedValue = normalizePasteValue(value);\n  const {\n    values,\n    colCount\n  } = parseValues(normalizedValue, option);\n  return {\n    colCount,\n    rowCount: values.length,\n\n    getCellValue(offsetCol, offsetRow) {\n      var _a, _b;\n\n      return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\n    }\n\n  };\n}\n\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\n\nfunction parseValues(text, {\n  trimOnPaste\n}) {\n  const len = text.length;\n  const adjustCell = trimOnPaste ? cell => cell.trim() : cell => cell;\n  let colCount = 1;\n  let line = [];\n  const values = [line];\n  let cell = \"\";\n\n  for (let index = 0; index < len; index++) {\n    const char = text[index];\n\n    if (char === \"\\t\") {\n      line.push(adjustCell(cell));\n      cell = \"\";\n      continue;\n    }\n\n    if (char === \"\\n\") {\n      // End of line\n      cell = adjustCell(cell);\n\n      if (cell[cell.length - 1] === \"\\r\") {\n        cell = cell.slice(0, -1);\n      }\n\n      line.push(cell);\n      colCount = Math.max(colCount, line.length);\n      line = [];\n      values.push(line);\n      cell = \"\";\n      continue;\n    }\n\n    if (char === '\"' && !cell.trim()) {\n      const quoted = processQuotedCell(index + 1);\n\n      if (quoted) {\n        ({\n          cell\n        } = quoted);\n        index = quoted.next - 1;\n        continue;\n      }\n    }\n\n    cell += char;\n  } // End of text\n\n\n  line.push(adjustCell(cell));\n  colCount = Math.max(colCount, line.length);\n  return {\n    values,\n    colCount\n  };\n\n  function processQuotedCell(start) {\n    let cell = \"\";\n    let index = start;\n\n    while (index < len) {\n      const char = text[index];\n\n      if (char !== '\"') {\n        cell += char;\n        index++;\n        continue;\n      }\n\n      if (text[index + 1] === '\"') {\n        // Escape\n        cell += '\"';\n        index += 2;\n        continue;\n      } // Maybe end quote\n\n\n      let next = index + 1;\n\n      while (next < len) {\n        const c = text[next];\n\n        if (c.trim()) {\n          // Not quoted. e.g. \"A\"B\n          return null;\n        }\n\n        if (c === \"\\t\" || c === \"\\n\") {\n          break;\n        } // Allow spaces\n\n\n        next++;\n      } // End quote\n\n\n      return {\n        cell,\n        next\n      };\n    }\n\n    return null;\n  }\n}\n\n/***/ }),\n\n/***/ \"./internal/path2DManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/path2DManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fill = exports.getPath2D = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction getPath2D() {\n  if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\n    return Path2D;\n  } // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\n  return __webpack_require__(/*! ./legacy/canvas/Path2DShim */ \"./internal/legacy/canvas/Path2DShim.js\").Path2DShim;\n}\n\nexports.getPath2D = getPath2D;\n\nfunction fill(pathModule, ctx, x, y, w, h) {\n  ctx.save();\n\n  try {\n    const {\n      width,\n      height\n    } = pathModule;\n    const {\n      ud: upsideDown,\n      x: offsetX = 0,\n      y: offsetY = 0\n    } = pathModule;\n    w = w || width;\n    h = h || height;\n    const xrate = w / width;\n    const yrate = h / (upsideDown ? -height : height);\n    x = x || 0;\n    y = upsideDown ? (y || 0) + -height * yrate : y || 0;\n    ctx.translate(x, y);\n    ctx.scale(xrate, yrate);\n\n    if (offsetX !== 0 || offsetY !== 0) {\n      ctx.translate(offsetX, offsetY);\n    }\n\n    const Path2D = getPath2D();\n    const path2d = pathModule.path2d = pathModule.path2d || new Path2D(pathModule.d);\n    ctx.fill(path2d);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fill = fill;\n\n/***/ }),\n\n/***/ \"./internal/sort.js\":\n/*!**************************!*\\\n  !*** ./internal/sort.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction createArray(get, length) {\n  const array = new Array(length);\n\n  for (let i = 0; i < length; i++) {\n    array[i] = get(i);\n  }\n\n  return array;\n}\n\nfunction createArrayPromise(get, getField, length // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  return new Promise(resolve => {\n    const plist = [];\n    const array = new Array(length);\n\n    for (let i = 0; i < length; i++) {\n      const data = get(i);\n      const record = {\n        v: data,\n        f: data\n      };\n      array[i] = record;\n\n      if ((0, utils_1.isPromise)(data)) {\n        plist.push(data.then(v => {\n          record.v = v;\n          record.f = v;\n        }));\n      }\n    }\n\n    Promise.all(plist).then(() => getField == null ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    array : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setArrayField(array, getField)).then(resolve);\n  });\n}\n\nfunction setArrayField(array, getField) {\n  return new Promise(resolve => {\n    const {\n      length\n    } = array;\n    const plist = [];\n\n    for (let i = 0; i < length; i++) {\n      const record = array[i];\n      const f = getField(record.v);\n\n      if ((0, utils_1.isPromise)(f)) {\n        plist.push(f.then(v => {\n          record.f = v;\n        }));\n      } else {\n        record.f = f;\n      }\n    }\n\n    Promise.all(plist).then(() => resolve(array));\n  });\n}\n\nfunction sortArray(array, compare) {\n  Array.prototype.sort.call(array, compare);\n}\n\nexports.sortArray = sortArray;\n\nfunction sort(get, set, length, compare, getField) {\n  const old = createArray(get, length);\n\n  if (getField != null) {\n    old.sort((r1, r2) => compare(getField(r1), getField(r2)));\n  } else {\n    old.sort(compare);\n  }\n\n  for (let i = 0; i < length; i++) {\n    set(i, old[i]);\n  }\n}\n\nexports.sort = sort;\n\nfunction sortPromise(get, set, length, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ncompare, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngetField) {\n  if (typeof Promise !== \"undefined\") {\n    return createArrayPromise(get, getField, length).then(array => {\n      array.sort((r1, r2) => compare(r1.f, r2.f));\n\n      for (let i = 0; i < length; i++) {\n        set(i, array[i].v);\n      }\n    });\n  } else {\n    sort(get, set, length, compare, getField);\n    const dummyPromise = {\n      then(fn) {\n        fn();\n        return dummyPromise;\n      },\n\n      catch() {\n        return dummyPromise;\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    };\n    return dummyPromise;\n  }\n}\n\nexports.sortPromise = sortPromise;\n\n/***/ }),\n\n/***/ \"./internal/style.js\":\n/*!***************************!*\\\n  !*** ./internal/style.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getScrollBarSize = exports.initDocument = void 0;\n\nfunction getScrollBarWidth() {\n  const wrapper = document.createElement(\"div\");\n  const inner = document.createElement(\"div\");\n  const {\n    style: wrapperStyle\n  } = wrapper;\n  wrapperStyle.position = \"fixed\";\n  wrapperStyle.height = \"50px\";\n  wrapperStyle.width = \"50px\";\n  wrapperStyle.overflow = \"scroll\";\n  wrapperStyle.opacity = \"0\";\n  wrapperStyle.pointerEvents = \"none\";\n  const {\n    style\n  } = inner;\n  style.height = \"100%\";\n  style.width = \"100%\";\n  inner.textContent = \"x\";\n  wrapper.appendChild(inner);\n  document.body.appendChild(wrapper);\n  const wrapperWidth = wrapper.getBoundingClientRect().width;\n  const innerWidth = inner.getBoundingClientRect().width;\n  document.body.removeChild(wrapper);\n  return Math.ceil(wrapperWidth - innerWidth);\n}\n\nlet SCROLLBAR_SIZE;\n\nfunction initDocumentInternal() {\n  __webpack_require__(/*! @/internal/style.css */ \"../src/js/internal/style.css\");\n\n  SCROLLBAR_SIZE = getScrollBarWidth() || 10;\n  const style = document.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-name\", \"cheetah-grid\");\n  style.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n  document.head.appendChild(style);\n}\n\nlet initDocumentVar = initDocumentInternal;\n\nfunction initDocument() {\n  initDocumentVar();\n  initDocumentVar = Function.prototype;\n}\n\nexports.initDocument = initDocument;\n\nfunction getScrollBarSize() {\n  return SCROLLBAR_SIZE;\n}\n\nexports.getScrollBarSize = getScrollBarSize;\n\n/***/ }),\n\n/***/ \"./internal/symbolManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/symbolManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst Symbol = utils_1.isNode ? global.Symbol : window.Symbol ? window.Symbol : (() => {\n  function random() {\n    const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n    const cl = c.length;\n    let r = \"\";\n\n    for (let i = 0; i < 10; i++) {\n      r += c[Math.floor(Math.random() * cl)];\n    }\n\n    return r;\n  }\n\n  return name => {\n    if (name) {\n      return `#${name}_${random()}`;\n    } else {\n      return `#_${random()}`;\n    }\n  };\n})();\nconst mem = {};\n\nfunction get(name) {\n  if (name) {\n    return mem[name] ? mem[name] : mem[name] = Symbol(name);\n  } else {\n    return Symbol();\n  }\n}\n\nexports.get = get;\n\nfunction getProtectedSymbol() {\n  return get(\"protected\");\n}\n\nexports.getProtectedSymbol = getProtectedSymbol;\n\nfunction getCheckColumnStateId() {\n  return get(\"chkcol.stateID\");\n}\n\nexports.getCheckColumnStateId = getCheckColumnStateId;\n\nfunction getRadioColumnStateId() {\n  return get(\"rdcol.stateID\");\n}\n\nexports.getRadioColumnStateId = getRadioColumnStateId;\n\nfunction getButtonColumnStateId() {\n  return get(\"btncol.stateID\");\n}\n\nexports.getButtonColumnStateId = getButtonColumnStateId;\n\nfunction getColumnFadeinStateId() {\n  return get(\"col.fadein_stateID\");\n}\n\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\n\nfunction getBranchGraphColumnStateId() {\n  return get(\"branch_graph_col.stateID\");\n}\n\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\n\nfunction getSmallDialogInputEditorStateId() {\n  return get(\"small_dialog_input_editor.stateID\");\n}\n\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\n\nfunction getInlineInputEditorStateId() {\n  return get(\"inline_input_editor.stateID\");\n}\n\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\n\nfunction getInlineMenuEditorStateId() {\n  return get(\"inline_menu_editor.stateID\");\n}\n\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\n\nfunction getCheckHeaderStateId() {\n  return get(\"check_header.stateID\");\n}\n\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"../node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./internal/utils.js\":\n/*!***************************!*\\\n  !*** ./internal/utils.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\nexports.isNode = isNode;\nlet arrayFind;\nlet arrayFindIndex;\nconst array = {\n  get find() {\n    if (arrayFind) {\n      return arrayFind;\n    }\n\n    if (Array.prototype.find) {\n      arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n    } else {\n      arrayFind = (arr, predicate) => {\n        const index = array.findIndex(arr, predicate);\n        return index >= 0 ? arr[index] : undefined;\n      };\n    }\n\n    return arrayFind;\n  },\n\n  get findIndex() {\n    if (arrayFindIndex) {\n      return arrayFindIndex;\n    }\n\n    if (Array.prototype.findIndex) {\n      arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n    } else {\n      arrayFindIndex = (arr, predicate) => {\n        const {\n          length\n        } = arr;\n\n        for (let i = 0; i < length; i++) {\n          const value = arr[i];\n\n          if (predicate(value, i, arr)) {\n            return i;\n          }\n        }\n\n        return -1;\n      };\n    }\n\n    return arrayFindIndex;\n  }\n\n};\nexports.array = array;\n\nfunction analyzeUserAgent() {\n  if (isNode) {\n    return {\n      IE: false,\n      Edge: false,\n      Chrome: false,\n      Firefox: false,\n      Safari: false\n    };\n  } else {\n    const ua = window.navigator.userAgent.toLowerCase();\n    return {\n      IE: !!/(msie|trident)/.exec(ua),\n      Edge: ua.indexOf(\"edge\") > -1,\n      Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\n      Firefox: ua.indexOf(\"firefox\") > -1,\n      Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1\n    };\n  }\n}\n\nconst {\n  IE,\n  Chrome,\n  Firefox,\n  Edge,\n  Safari\n} = analyzeUserAgent();\n\nfunction setReadonly(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    enumerable: false,\n    configurable: true,\n    value\n  });\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction each(obj, fn) {\n  for (const key in obj) {\n    fn(obj[key], key, obj);\n  }\n}\n\nexports.each = each; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nfunction omit(source, omits) {\n  const result = {};\n\n  for (const key in source) {\n    if (omits.indexOf(key) >= 0) {\n      continue;\n    }\n\n    Object.defineProperty(result, key, {\n      get() {\n        return source[key];\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return result;\n}\n\nexports.omit = omit;\n\nfunction defaults(source, defs) {\n  const keys = [];\n  const result = {};\n\n  for (const key in source) {\n    keys.push(key);\n    Object.defineProperty(result, key, {\n      get() {\n        const val = source[key];\n        return val === undefined ? defs[key] : val;\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  for (const key in defs) {\n    if (keys.indexOf(key) >= 0) {\n      continue;\n    }\n\n    Object.defineProperty(result, key, {\n      get() {\n        const val = source[key];\n        return val === undefined ? defs[key] : val;\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return result;\n}\n\nexports.defaults = defaults;\n\nfunction extend(...args) {\n  const result = {};\n  args.forEach(source => {\n    for (const key in source) {\n      Object.defineProperty(result, key, {\n        get() {\n          return source[key];\n        },\n\n        set(val) {\n          source[key] = val;\n        },\n\n        configurable: true,\n        enumerable: true\n      });\n    }\n  });\n  return result;\n}\n\nexports.extend = extend;\n\nfunction isDescendantElement(root, target) {\n  while (target.parentElement) {\n    const p = target.parentElement;\n\n    if (root === p) {\n      return true;\n    }\n\n    target = p;\n  }\n\n  return false;\n}\n\nexports.isDescendantElement = isDescendantElement;\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nfunction applyChainSafe(obj, fn, ...names) {\n  let value = obj;\n\n  for (let i = 0; i < names.length && value != null; i++) {\n    value = fn(value, names[i]);\n  }\n\n  return value;\n}\n\nexports.applyChainSafe = applyChainSafe;\n\nfunction getChainSafe(obj, ...names) {\n  return applyChainSafe(obj, (val, name) => val[name], ...names);\n}\n\nexports.getChainSafe = getChainSafe;\n\nfunction getOrApply(value, ...args) {\n  if (typeof value === \"function\") {\n    return value(...args);\n  } else {\n    return value;\n  }\n}\n\nexports.getOrApply = getOrApply;\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nfunction endsWith(str, searchString, position) {\n  const subjectString = str.toString();\n\n  if (typeof position !== \"number\" || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n    position = subjectString.length;\n  }\n\n  position -= searchString.length;\n  const lastIndex = subjectString.lastIndexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\nfunction genChars(s) {\n  // Surrogate Code Point\n  // [\\uD800-\\uDBFF]\n  // Variation Selectors\n  // FVS [\\u180B-\\u180D]\n  // VS1VS16 [\\uFE00-\\uFE0F]\n  // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\n  const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction genWords(s) {\n  const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction isPromise(data) {\n  return Boolean(data && typeof data.then === \"function\");\n}\n\nexports.isPromise = isPromise;\n\nfunction then(result, callback) {\n  return isPromise(result) ? result.then(r => callback(r)) : callback(result);\n}\n\nexports.then = then;\n\nfunction getMouseButtons(e) {\n  if (e.buttons != null) {\n    return e.buttons;\n  }\n  /*for legacy*/\n\n\n  if (e.which != null) {\n    if (e.which === 3) {\n      //right?\n      return 4;\n    }\n\n    if (e.which === 2) {\n      //middle?\n      return 4;\n    }\n\n    return e.which; //left or no\n  }\n\n  if (e.button === 0 || e.button === 1) {\n    return 1; //candidate left\n  }\n\n  if (e.button === 2) {\n    return 2; // right\n  }\n\n  return 0; //no or middle?\n}\n\nfunction getKeyCode(e) {\n  return e.keyCode || e.which;\n}\n\nfunction isTouchEvent(e) {\n  return !!e.changedTouches;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction getIgnoreCase(obj, name) {\n  if (obj[name]) {\n    return obj[name];\n  }\n\n  const l = name.toLowerCase();\n\n  if (obj[l]) {\n    return obj[l];\n  }\n\n  const u = name.toLowerCase();\n\n  if (obj[u]) {\n    return obj[u];\n  }\n\n  for (const k in obj) {\n    if (k.toLowerCase() === l) {\n      return obj[k];\n    }\n  }\n\n  return undefined;\n}\n\nexports.getIgnoreCase = getIgnoreCase;\n\nfunction cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nfunction toBoxArray(obj) {\n  if (!Array.isArray(obj)) {\n    return [obj\n    /*top*/\n    , obj\n    /*right*/\n    , obj\n    /*bottom*/\n    , obj\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 3) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[2]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 2) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 1) {\n    return [obj[0]\n    /*top*/\n    , obj[0]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[0]\n    /*left*/\n    ];\n  }\n\n  return obj;\n}\n\nfunction cellEquals(a, b) {\n  return a.col === b.col && a.row === b.row;\n}\n\nexports.cellEquals = cellEquals;\n\nfunction cellInRange(range, col, row) {\n  return range.start.col <= col && col <= range.end.col && range.start.row <= row && row <= range.end.row;\n}\n\nexports.cellInRange = cellInRange;\nexports.browser = {\n  IE,\n  Edge,\n  Chrome,\n  Firefox,\n  Safari,\n  // Chrome 16777216 (onl Chrome 33554431)\n  // FireFox 17895588\n  // IE 10737433\n  heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433 // default IE limit\n\n};\nexports.obj = {\n  setReadonly,\n  isObject\n};\nexports.str = {\n  endsWith,\n  genChars,\n  genWords\n};\nexports.event = {\n  getMouseButtons,\n  getKeyCode,\n  isTouchEvent,\n  cancel\n};\nexports.style = {\n  toBoxArray\n};\nexports.emptyFn = Function.prototype;\n\n/***/ }),\n\n/***/ \"./list-grid/LG_EVENT_TYPE.js\":\n/*!************************************!*\\\n  !*** ./list-grid/LG_EVENT_TYPE.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LG_EVENT_TYPE = void 0;\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\n  BEFORE_CHANGE_VALUE: \"before_change_value\",\n  CHANGED_VALUE: \"changed_value\",\n  CHANGED_HEADER_VALUE: \"changed_header_value\",\n  REJECTED_PASTE_VALUES: \"rejected_paste_values\"\n});\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/index.js\":\n/*!***************************************!*\\\n  !*** ./list-grid/layout-map/index.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\n\nvar simple_header_layout_1 = __webpack_require__(/*! ./internal/simple-header-layout */ \"./list-grid/layout-map/internal/simple-header-layout.js\");\n\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", {\n  enumerable: true,\n  get: function () {\n    return simple_header_layout_1.SimpleHeaderLayoutMap;\n  }\n});\n\nvar multi_layout_1 = __webpack_require__(/*! ./internal/multi-layout */ \"./list-grid/layout-map/internal/multi-layout.js\");\n\nObject.defineProperty(exports, \"MultiLayoutMap\", {\n  enumerable: true,\n  get: function () {\n    return multi_layout_1.MultiLayoutMap;\n  }\n});\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/multi-layout.js\":\n/*!*******************************************************!*\\\n  !*** ./list-grid/layout-map/internal/multi-layout.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiLayoutMap = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerAction = __importStar(__webpack_require__(/*! ../../../header/action */ \"./header/action.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./list-grid/layout-map/internal/utils.js\");\n\nfunction normalizeLayout(layout) {\n  if (Array.isArray(layout)) {\n    return {\n      header: layout,\n      body: layout\n    };\n  }\n\n  return layout;\n}\n\nlet seqId = 0;\n\nclass LayoutObjectGrid {\n  constructor(layout, transform) {\n    this.objects = [];\n    this.objectGrid = [];\n    this.objectMap = {};\n    this.columnCount = 0;\n    this.columnWidths = [];\n    layout.forEach((rowLayout, row) => {\n      let col = 0;\n      rowLayout.forEach(cell => {\n        var _a, _b;\n\n        const id = seqId++;\n        const obj = transform(cell, id);\n        this.objects.push(obj);\n        this.objectMap[id] = obj;\n        col = this._findStartCell(col, row);\n        const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\n        const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\n        const endRow = row + rowSpan;\n        const endCol = col + colSpan;\n\n        for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\n          const objectGridRow = this._getObjectGridRow(rowIndex);\n\n          for (let colIndex = col; colIndex < endCol; colIndex++) {\n            objectGridRow[colIndex] = obj;\n          }\n        }\n\n        if (colSpan === 1) {\n          this._setWidthDataIfAbsent(col, cell);\n        }\n\n        this._useColumnIndex(endCol - 1);\n\n        col = endCol;\n      });\n    });\n  }\n\n  get rowCount() {\n    return this.objectGrid.length;\n  }\n\n  _findStartCell(col, row) {\n    const objectGridRow = this._getObjectGridRow(row);\n\n    for (let index = col; index < objectGridRow.length; index++) {\n      if (!objectGridRow[index]) {\n        return index;\n      }\n    }\n\n    return objectGridRow.length;\n  }\n\n  _getObjectGridRow(row) {\n    return this.objectGrid[row] || (this.objectGrid[row] = []);\n  }\n\n  _useColumnIndex(col) {\n    if (this.columnCount > col) {\n      return;\n    }\n\n    this.columnCount = col + 1;\n  }\n\n  _setWidthDataIfAbsent(col, cell) {\n    if (!this.columnWidths[col]) {\n      if (cell.width != null || cell.maxWidth != null || cell.minWidth != null) {\n        this.columnWidths[col] = {\n          width: cell.width,\n          maxWidth: cell.maxWidth,\n          minWidth: cell.minWidth\n        };\n      }\n    }\n  }\n\n}\n\nclass MultiLayoutMap {\n  constructor(layout) {\n    this._columnWidths = [];\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    const hbLayouut = normalizeLayout(layout);\n    const header = this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\n      return {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        headerIcon: hd.headerIcon,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n    });\n    const body = this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\n      return {\n        id,\n        field: colDef.field,\n        width: colDef.width,\n        minWidth: colDef.minWidth,\n        maxWidth: colDef.maxWidth,\n        icon: colDef.icon,\n        message: colDef.message,\n        columnType: columns.type.of(colDef.columnType),\n        action: columns.action.of(colDef.action),\n        style: colDef.style,\n        define: colDef\n      };\n    });\n    const columnCount = this._columnCount = Math.max(header.columnCount, body.columnCount);\n\n    for (let col = 0; col < columnCount; col++) {\n      const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\n      this._columnWidths[col] = widthDef;\n    }\n  }\n\n  get columnWidths() {\n    return this._columnWidths;\n  }\n\n  get headerRowCount() {\n    return this._header.rowCount;\n  }\n\n  get bodyRowCount() {\n    return this._body.rowCount;\n  }\n\n  get colCount() {\n    return this._columnCount;\n  }\n\n  get headerObjects() {\n    return this._header.objects;\n  }\n\n  get columnObjects() {\n    return this._body.objects;\n  }\n\n  getCellId(col, row) {\n    var _a, _b, _c, _d;\n\n    if (this.headerRowCount <= row) {\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n    } //in header\n\n\n    return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._header.objectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, row) {\n    const id = this.getCellId(col, row);\n    return this._body.objectMap[id] || this._emptyDataCache.getBody(col, row);\n  }\n\n  getBodyLayoutRangeById(id) {\n    var _a;\n\n    for (let row = 0; row < this.bodyRowCount; row++) {\n      const objectGridRow = this._body.objectGrid[row];\n\n      if (!objectGridRow) {\n        continue;\n      }\n\n      for (let col = 0; col < this.colCount; col++) {\n        if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\n          return this._getCellRange(this._body, col, row, 0);\n        }\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    if (this.headerRowCount <= row) {\n      const recordIndex = this.getRecordIndexByRow(row);\n      const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\n    } //in header\n\n\n    return this._getCellRange(this._header, col, row, 0);\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      const bodyRow = row - this.headerRowCount;\n      return Math.floor(bodyRow / this.bodyRowCount);\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index * this.bodyRowCount;\n  }\n\n  _getCellRange( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layout, col, layoutRow, offsetRow) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n    const result = {\n      start: {\n        col,\n        row: layoutRow + offsetRow\n      },\n      end: {\n        col,\n        row: layoutRow + offsetRow\n      }\n    };\n    const {\n      objectGrid\n    } = layout;\n    const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n\n    if (id == null) {\n      return result;\n    }\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < layout.columnCount; c++) {\n      if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = layoutRow - 1; r >= 0; r--) {\n      if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\n        break;\n      }\n\n      result.start.row = r + offsetRow;\n    }\n\n    for (let r = layoutRow + 1; r < layout.rowCount; r++) {\n      if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\n        break;\n      }\n\n      result.end.row = r + offsetRow;\n    }\n\n    return result;\n  }\n\n}\n\nexports.MultiLayoutMap = MultiLayoutMap;\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/simple-header-layout.js\":\n/*!***************************************************************!*\\\n  !*** ./list-grid/layout-map/internal/simple-header-layout.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleHeaderLayoutMap = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerAction = __importStar(__webpack_require__(/*! ../../../header/action */ \"./header/action.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./list-grid/layout-map/internal/utils.js\");\n\nlet seqId = 0;\n\nclass SimpleHeaderLayoutMap {\n  constructor(header) {\n    this.bodyRowCount = 1;\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    this._columns = [];\n    this._headerCellIds = [];\n    this._headerObjects = this._addHeaders(0, header, []);\n    this._headerObjectMap = this._headerObjects.reduce((o, e) => {\n      o[e.id] = e;\n      return o;\n    }, {});\n  }\n\n  get columnWidths() {\n    return this._columns;\n  }\n\n  get headerRowCount() {\n    return this._headerCellIds.length;\n  }\n\n  get colCount() {\n    return this._columns.length;\n  }\n\n  get headerObjects() {\n    return this._headerObjects;\n  }\n\n  get columnObjects() {\n    return this._columns;\n  }\n\n  getCellId(col, row) {\n    if (this.headerRowCount <= row) {\n      return this._columns[col].id;\n    } //in header\n\n\n    return this._headerCellIds[row][col];\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._headerObjectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, _row) {\n    return this._columns[col] || this._emptyDataCache.getBody(col, 0);\n  }\n\n  getBodyLayoutRangeById(id) {\n    for (let col = 0; col < this.colCount; col++) {\n      if (id === this._columns[col].id) {\n        return {\n          start: {\n            col,\n            row: 0\n          },\n          end: {\n            col,\n            row: 0\n          }\n        };\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    const result = {\n      start: {\n        col,\n        row\n      },\n      end: {\n        col,\n        row\n      }\n    };\n\n    if (this.headerRowCount <= row) {\n      return result;\n    } //in header\n\n\n    const id = this.getCellId(col, row);\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < this.colCount; c++) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = row - 1; r >= 0; r--) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.start.row = r;\n    }\n\n    for (let r = row + 1; r < this.headerRowCount; r++) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.end.row = r;\n    }\n\n    return result;\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      return row - this.headerRowCount;\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index;\n  }\n\n  _addHeaders(row, header, roots) {\n    const results = [];\n\n    const rowCells = this._headerCellIds[row] || this._newRow(row);\n\n    header.forEach(hd => {\n      const col = this._columns.length;\n      const id = seqId++;\n      const cell = {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        headerIcon: hd.headerIcon,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n      results[id] = cell;\n      rowCells[col] = id;\n\n      for (let r = row - 1; r >= 0; r--) {\n        this._headerCellIds[r][col] = roots[r];\n      }\n\n      if (hd.columns) {\n        this._addHeaders(row + 1, hd.columns, [...roots, id]).forEach(c => results.push(c));\n      } else {\n        const colDef = hd;\n\n        this._columns.push({\n          id: seqId++,\n          field: colDef.field,\n          width: colDef.width,\n          minWidth: colDef.minWidth,\n          maxWidth: colDef.maxWidth,\n          icon: colDef.icon,\n          message: colDef.message,\n          columnType: columns.type.of(colDef.columnType),\n          action: columns.action.of(colDef.action),\n          style: colDef.style,\n          define: colDef\n        });\n\n        for (let r = row + 1; r < this._headerCellIds.length; r++) {\n          this._headerCellIds[r][col] = id;\n        }\n      }\n    });\n    return results;\n  }\n\n  _newRow(row) {\n    const newRow = this._headerCellIds[row] = [];\n\n    if (!this._columns.length) {\n      return newRow;\n    }\n\n    const prev = this._headerCellIds[row - 1];\n\n    for (let col = 0; col < prev.length; col++) {\n      newRow[col] = prev[col];\n    }\n\n    return newRow;\n  }\n\n}\n\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/utils.js\":\n/*!************************************************!*\\\n  !*** ./list-grid/layout-map/internal/utils.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nlet seqId = -1; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyHeaderData() {\n  return {\n    id: seqId--,\n    define: {},\n    headerType: headerType.of(null) // default\n\n  };\n}\n\nexports.newEmptyHeaderData = newEmptyHeaderData; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyColumnData() {\n  return {\n    id: seqId--,\n    define: {},\n    columnType: columns.type.of(null),\n    style: null\n  };\n}\n\nexports.newEmptyColumnData = newEmptyColumnData;\n\nclass EmptyDataCache {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.headers = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.columns = [];\n  }\n\n  getHeader(col, row) {\n    const rows = this.headers[row] || (this.headers[row] = []);\n    return rows[col] || (rows[col] = newEmptyHeaderData());\n  }\n\n  getBody(col, row) {\n    const rows = this.columns[row] || (this.columns[row] = []);\n    return rows[col] || (rows[col] = newEmptyColumnData());\n  }\n\n}\n\nexports.EmptyDataCache = EmptyDataCache;\n\n/***/ }),\n\n/***/ \"./main.js\":\n/*!*****************!*\\\n  !*** ./main.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ./columns */ \"./columns.js\"));\n\nexports.columns = columns;\n\nconst core = __importStar(__webpack_require__(/*! ./core */ \"./core.js\"));\n\nexports.core = core;\n\nconst data = __importStar(__webpack_require__(/*! ./data */ \"./data.js\"));\n\nexports.data = data;\n\nconst headers = __importStar(__webpack_require__(/*! ./headers */ \"./headers.js\"));\n\nexports.headers = headers;\n\nconst icons = __importStar(__webpack_require__(/*! ./icons */ \"./icons.js\"));\n\nconst register = __importStar(__webpack_require__(/*! ./register */ \"./register.js\"));\n\nexports.register = register;\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nexports.themes = themes;\n\nconst tools = __importStar(__webpack_require__(/*! ./tools */ \"./tools.js\"));\n\nexports.tools = tools;\n\nconst ListGrid_1 = __webpack_require__(/*! ./ListGrid */ \"./ListGrid.js\");\n\nObject.defineProperty(exports, \"ListGrid\", {\n  enumerable: true,\n  get: function () {\n    return ListGrid_1.ListGrid;\n  }\n});\n\nconst GridCanvasHelper_1 = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\nObject.defineProperty(exports, \"GridCanvasHelper\", {\n  enumerable: true,\n  get: function () {\n    return GridCanvasHelper_1.GridCanvasHelper;\n  }\n});\n\nvar get_internal_1 = __webpack_require__(/*! ./get-internal */ \"./get-internal.js\");\n\nObject.defineProperty(exports, \"_getInternal\", {\n  enumerable: true,\n  get: function () {\n    return get_internal_1.getInternal;\n  }\n});\n/** @private */\n\nfunction getIcons() {\n  return icons.get();\n}\n\nexports.getIcons = getIcons; // backward compatibility\n\nexports.default = {\n  core,\n  tools,\n  // impl Grids\n  ListGrid: ListGrid_1.ListGrid,\n  // objects\n  columns,\n  headers,\n  themes,\n  data,\n  // helper\n  GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\n  //plugin registers\n  register,\n\n  get icons() {\n    return getIcons();\n  }\n\n}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"default\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getDefault();\n  },\n\n  set(defaultTheme) {\n    themes.setDefault(defaultTheme);\n  }\n\n}); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"choices\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getChoices();\n  }\n\n});\n\n/***/ }),\n\n/***/ \"./plugins/icons.js\":\n/*!**************************!*\\\n  !*** ./plugins/icons.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.icons = void 0;\nexports.icons = {};\n\n/***/ }),\n\n/***/ \"./plugins/themes.js\":\n/*!***************************!*\\\n  !*** ./plugins/themes.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.themes = void 0;\nexports.themes = {};\n\n/***/ }),\n\n/***/ \"./register.js\":\n/*!*********************!*\\\n  !*** ./register.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.icons = exports.icon = exports.theme = void 0;\n\nconst icons_1 = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nconst themes_1 = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\nfunction register(obj, name, value) {\n  const old = obj[name];\n  obj[name] = value;\n  return old;\n}\n\nfunction registers(obj, values) {\n  for (const k in values) {\n    obj[k] = values[k];\n  }\n}\n\nfunction theme(name, theme) {\n  if (theme != null) {\n    return register(themes_1.themes, name, theme);\n  } else {\n    return themes_1.themes[name];\n  }\n}\n\nexports.theme = theme;\n\nfunction icon(name, icon) {\n  if (icon != null) {\n    return register(icons_1.icons, name, icon);\n  } else {\n    return icons_1.icons[name];\n  }\n}\n\nexports.icon = icon;\n\nfunction icons(icons) {\n  return registers(icons_1.icons, icons);\n}\n\nexports.icons = icons;\n\n/***/ }),\n\n/***/ \"./themes.js\":\n/*!*******************!*\\\n  !*** ./themes.js ***!\n  \\*******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst theme_1 = __webpack_require__(/*! ./themes/theme */ \"./themes/theme.js\");\n\nconst BASIC_1 = __importDefault(__webpack_require__(/*! ./themes/BASIC */ \"./themes/BASIC.js\"));\n\nconst MATERIAL_DESIGN_1 = __importDefault(__webpack_require__(/*! ./themes/MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\"));\n\nconst themes_1 = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\nconst builtin = {\n  BASIC: exports.BASIC,\n  MATERIAL_DESIGN: exports.MATERIAL_DESIGN\n};\nlet defTheme = exports.MATERIAL_DESIGN;\nexports.theme = {\n  Theme: theme_1.Theme\n};\n\nfunction of(value) {\n  if (!value) {\n    return null;\n  }\n\n  if (typeof value === \"string\") {\n    const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\n\n    if (t) {\n      return t;\n    }\n\n    return null;\n  }\n\n  if (value instanceof theme_1.Theme) {\n    return value;\n  }\n\n  return new theme_1.Theme(value);\n}\n\nexports.of = of;\n\nfunction getDefault() {\n  return defTheme;\n}\n\nexports.getDefault = getDefault;\n\nfunction setDefault(defaultTheme) {\n  defTheme = of(defaultTheme) || defTheme;\n}\n\nexports.setDefault = setDefault;\n\nfunction getChoices() {\n  return (0, utils_1.extend)(builtin, themes_1.themes);\n}\n\nexports.getChoices = getChoices;\n\n/***/ }),\n\n/***/ \"./themes/BASIC.js\":\n/*!*************************!*\\\n  !*** ./themes/BASIC.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction DEFAULT_BG_COLOR(args) {\n  const {\n    row,\n    grid\n  } = args;\n\n  if (row < grid.frozenRowCount) {\n    return \"#FFF\";\n  }\n\n  const index = grid.getRecordIndexByRow(row);\n\n  if (!(index & 1)) {\n    return \"#FFF\";\n  } else {\n    return \"#F6F6F6\";\n  }\n}\n\nconst cacheLinearGradient = {};\n\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n  let stop;\n  const stopsKey = [];\n\n  for (stop in colorStops) {\n    stopsKey.push(`${stop}@${colorStops[stop]}`);\n  }\n\n  const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\n  const ret = cacheLinearGradient[key];\n\n  if (ret) {\n    return ret;\n  }\n\n  const grad = context.createLinearGradient(left, top, left, bottom);\n\n  for (stop in colorStops) {\n    grad.addColorStop(Number(stop), colorStops[stop]);\n  }\n\n  return cacheLinearGradient[key] = grad;\n}\n\nfunction FROZEN_ROWS_BG_COLOR(args) {\n  const {\n    col,\n    grid,\n    grid: {\n      frozenRowCount\n    },\n    context\n  } = args;\n  const {\n    left,\n    top\n  } = grid.getCellRelativeRect(col, 0);\n  const {\n    bottom\n  } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n  return getLinearGradient(context, left, top, left, bottom, {\n    0: \"#FFF\",\n    1: \"#D3D3D3\"\n  });\n}\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\n\n\nexports.default = {\n  color: \"#000\",\n  // frozenRowsColor: '#000',\n  defaultBgColor: DEFAULT_BG_COLOR,\n  frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: \"#000\",\n  // frozenRowsBorderColor: '#000',\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"#000\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"#000\",\n    uncheckBorderColor: \"#000\",\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"#FFF\"\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  indicators: {\n    topLeftColor: \"#000\"\n  },\n  underlayBackgroundColor: \"#F6F6F6\"\n};\n\n/***/ }),\n\n/***/ \"./themes/MATERIAL_DESIGN.js\":\n/*!***********************************!*\\\n  !*** ./themes/MATERIAL_DESIGN.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n  const {\n    row,\n    grid: {\n      frozenRowCount\n    }\n  } = args;\n\n  if (frozenRowCount - 1 === row) {\n    return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\n  } else {\n    return [\"#f2f2f2\"];\n  }\n}\n\nfunction BORDER_COLOR(args) {\n  const {\n    col,\n    row,\n    grid\n  } = args;\n  const {\n    colCount,\n    frozenColCount,\n    recordRowCount\n  } = grid;\n  let top = \"#ccc7c7\";\n  let bottom = \"#ccc7c7\";\n\n  if (recordRowCount > 1) {\n    const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\n    const endRow = startRow + recordRowCount - 1;\n\n    if (startRow !== row) {\n      top = null;\n    }\n\n    if (endRow !== row) {\n      bottom = null;\n    }\n  }\n\n  if (frozenColCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  if (colCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  return [top, null, bottom, null];\n}\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\n\n\nexports.default = {\n  color: \"rgba(0, 0, 0, 0.87)\",\n  frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\n  defaultBgColor: \"#FFF\",\n  // frozenRowsBgColor: '#FFF',\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: BORDER_COLOR,\n  frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    // uncheckBgColor: '#FFF',\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"rgba(0, 0, 0, 0.26)\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"rgb(76, 73, 72)\",\n    uncheckBorderColor: \"rgb(189, 189, 189)\" // uncheckBgColor: \"#FFF\",\n    // checkBgColor: \"#FFF\",\n\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  indicators: {\n    topLeftColor: \"#ccc7c7\"\n  },\n  underlayBackgroundColor: \"#FFF\"\n};\n\n/***/ }),\n\n/***/ \"./themes/theme.js\":\n/*!*************************!*\\\n  !*** ./themes/theme.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Theme = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\"); //private symbol\n\n\nconst _ = (0, symbolManager_1.get)();\n\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\n  const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\n\n  if (value) {\n    return value;\n  }\n\n  if (!defNames) {\n    return value || defaultValue;\n  }\n\n  const getChainSafeWithConvert = convertForSuper ? (obj, ...names) => {\n    const value = (0, utils_1.getChainSafe)(obj, ...names);\n\n    if (!value) {\n      return value;\n    }\n\n    return convertForSuper(value);\n  } : utils_1.getChainSafe;\n  return getChainSafeWithConvert(obj, ...defNames) || getChainSafeWithConvert(superObj, ...defNames) || defaultValue;\n}\n\nclass Theme {\n  constructor(obj, superTheme) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this._messages = null;\n    this._indicators = null;\n    this[_] = {\n      obj,\n      superTheme: superTheme\n    };\n  }\n\n  get font() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"font\"]);\n  }\n\n  get underlayBackgroundColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\n  } // color\n\n\n  get color() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"color\"]);\n  }\n\n  get frozenRowsColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\n  } // background\n\n\n  get defaultBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"defaultBgColor\"]);\n  }\n\n  get frozenRowsBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get selectionBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get highlightBgColor() {\n    if (this.hasProperty([\"highlightBgColor\"])) {\n      const {\n        obj,\n        superTheme\n      } = this[_];\n      return getProp(obj, superTheme, [\"highlightBgColor\"]);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return args => {\n      const color = args.row < args.grid.frozenRowCount ? this.frozenRowsBgColor : this.defaultBgColor;\n\n      if (typeof color === \"function\") {\n        return color(args);\n      }\n\n      return color;\n    };\n  } // border\n\n\n  get borderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"borderColor\"]);\n  }\n\n  get frozenRowsBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\n  }\n\n  get highlightBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\n  }\n\n  get checkbox() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get borderColor() {\n        return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      }\n\n    });\n\n    function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  get radioButton() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getRadioButtonProp(\"checkColor\", [\"color\"]);\n      },\n\n      get uncheckBorderColor() {\n        return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get checkBorderColor() {\n        return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get uncheckBgColor() {\n        return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\n      }\n\n    });\n\n    function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  get button() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._button || (this._button = {\n      get color() {\n        return getButtonProp(\"color\", [\"color\"]);\n      },\n\n      get bgColor() {\n        return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\n      }\n\n    });\n\n    function getButtonProp(prop, defNames) {\n      return getProp(obj, superTheme, [\"button\", prop], defNames);\n    }\n  }\n\n  get header() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\n      }\n\n    });\n  }\n\n  get messages() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._messages || (this._messages = {\n      get infoBgColor() {\n        return getMessageProp(\"infoBgColor\");\n      },\n\n      get errorBgColor() {\n        return getMessageProp(\"errorBgColor\");\n      },\n\n      get warnBgColor() {\n        return getMessageProp(\"warnBgColor\");\n      },\n\n      get boxWidth() {\n        return getMessageProp(\"boxWidth\");\n      },\n\n      get markHeight() {\n        return getMessageProp(\"markHeight\");\n      }\n\n    });\n\n    function getMessageProp(prop) {\n      return getProp(obj, superTheme, [\"messages\", prop]);\n    }\n  }\n\n  get indicators() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._indicators || (this._indicators = {\n      get topLeftColor() {\n        return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get topLeftSize() {\n        return getIndicatorsProp(\"topLeftSize\");\n      },\n\n      get topRightColor() {\n        return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get topRightSize() {\n        return getIndicatorsProp(\"topRightSize\");\n      },\n\n      get bottomRightColor() {\n        return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get bottomRightSize() {\n        return getIndicatorsProp(\"bottomRightSize\");\n      },\n\n      get bottomLeftColor() {\n        return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get bottomLeftSize() {\n        return getIndicatorsProp(\"bottomLeftSize\");\n      }\n\n    });\n\n    function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  hasProperty(names) {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\n  }\n\n  extends(obj) {\n    return new Theme(obj, this);\n  }\n\n}\n\nexports.Theme = Theme;\n\nfunction hasThemeProperty(obj, names) {\n  if (obj instanceof Theme) {\n    return obj.hasProperty(names);\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let o = obj;\n\n    if (!o) {\n      return false;\n    }\n\n    for (let index = 0; index < names.length; index++) {\n      const name = names[index];\n      o = o[name];\n\n      if (!o) {\n        return false;\n      }\n    }\n\n    return !!o;\n  }\n}\n\nfunction colorsToColor(colors) {\n  if (typeof colors === \"function\") {\n    return arg => {\n      const val = colors(arg);\n      return val ? colorsArrayToColor(val) : val;\n    };\n  }\n\n  return colorsArrayToColor(colors);\n\n  function colorsArrayToColor( // eslint-disable-next-line @typescript-eslint/ban-types\n  colors) {\n    if (!Array.isArray(colors)) {\n      return colors;\n    }\n\n    return colors.find(Boolean) || undefined;\n  }\n}\n\n/***/ }),\n\n/***/ \"./tools.js\":\n/*!******************!*\\\n  !*** ./tools.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canvashelper = void 0;\n\nconst canvashelper = __importStar(__webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\"));\n\nexports.canvashelper = canvashelper;\n\n/***/ }),\n\n/***/ \"./tools/canvashelper.js\":\n/*!*******************************!*\\\n  !*** ./tools/canvashelper.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nconst {\n  ceil,\n  PI\n} = Math;\n\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n  function strokeRectLines(positions) {\n    for (let i = 0; i < borderColors.length; i++) {\n      const color = borderColors[i];\n      const preColor = borderColors[i - 1];\n\n      if (color) {\n        if (preColor !== color) {\n          if (preColor) {\n            ctx.strokeStyle = preColor;\n            ctx.stroke();\n          }\n\n          const pos1 = positions[i];\n          ctx.beginPath();\n          ctx.moveTo(pos1.x, pos1.y);\n        }\n\n        const pos2 = positions[i + 1];\n        ctx.lineTo(pos2.x, pos2.y);\n      } else {\n        if (preColor) {\n          ctx.strokeStyle = preColor;\n          ctx.stroke();\n        }\n      }\n    }\n\n    const preColor = borderColors[borderColors.length - 1];\n\n    if (preColor) {\n      ctx.strokeStyle = preColor;\n      ctx.stroke();\n    }\n  }\n\n  if (borderColors[0] === borderColors[1] && borderColors[0] === borderColors[2] && borderColors[0] === borderColors[3]) {\n    if (borderColors[0]) {\n      ctx.strokeStyle = borderColors[0];\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    strokeRectLines([{\n      x: left,\n      y: top\n    }, {\n      x: left + width,\n      y: top\n    }, {\n      x: left + width,\n      y: top + height\n    }, {\n      x: left,\n      y: top + height\n    }, {\n      x: left,\n      y: top\n    }]);\n  }\n}\n\nexports.strokeColorsRect = strokeColorsRect;\n\nfunction roundRect(ctx, left, top, width, height, radius) {\n  ctx.beginPath();\n  ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n  ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n  ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n  ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n  ctx.closePath();\n}\n\nexports.roundRect = roundRect;\n\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.fill();\n}\n\nexports.fillRoundRect = fillRoundRect;\n\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.stroke();\n}\n\nexports.strokeRoundRect = strokeRoundRect;\n\nfunction fillCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.fill();\n}\n\nexports.fillCircle = fillCircle;\n\nfunction strokeCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.stroke();\n}\n\nexports.strokeCircle = strokeCircle;\n\nfunction fillTextRect(ctx, text, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\n      offset,\n      padding\n    });\n    ctx.fillText(text, pos.x, pos.y);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fillTextRect = fillTextRect;\n\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\n      offset,\n      padding\n    });\n    ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawInlineImageRect = drawInlineImageRect;\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction measureCheckbox(ctx) {\n  return {\n    width: (0, canvases_1.getFontSize)(ctx, null).width\n  };\n}\n\nexports.measureCheckbox = measureCheckbox;\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction measureRadioButton(ctx) {\n  return {\n    width: (0, canvases_1.getFontSize)(ctx, null).width\n  };\n}\n\nexports.measureRadioButton = measureRadioButton;\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction drawCheckbox(ctx, x, y, check, {\n  uncheckBgColor = \"#FFF\",\n  checkBgColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  boxSize = measureCheckbox(ctx).width\n} = {}) {\n  const checkPoint = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\n\n    if (check) {\n      ctx.lineWidth = ceil(boxSize / 10);\n      ctx.strokeStyle = uncheckBgColor;\n      let leftWidth = boxSize / 4;\n      let rightWidth = boxSize / 2 * 0.9;\n      const leftLeftPos = x + boxSize * 0.2;\n      const leftTopPos = y + boxSize / 2;\n\n      if (checkPoint < 0.5) {\n        leftWidth *= checkPoint * 2;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(leftLeftPos, leftTopPos);\n      ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n\n      if (checkPoint > 0.5) {\n        if (checkPoint < 1) {\n          rightWidth *= (checkPoint - 0.5) * 2;\n        }\n\n        ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n      }\n\n      ctx.stroke();\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawCheckbox = drawCheckbox;\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction drawRadioButton(ctx, x, y, check, {\n  checkColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  bgColor = \"#FFF\",\n  boxSize = measureRadioButton(ctx).width\n} = {}) {\n  const ratio = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\n\n    if (check) {\n      const checkSize = size * ratio / 2;\n      const padding = (size - checkSize) / 2;\n      ctx.fillStyle = checkColor;\n      fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawRadioButton = drawRadioButton;\n/**\r\n * draw Button\r\n */\n\nfunction drawButton(ctx, left, top, width, height, option = {}) {\n  const {\n    backgroundColor = \"#FFF\",\n    bgColor = backgroundColor,\n    radius = 4,\n    shadow = {}\n  } = option;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n\n    if (shadow) {\n      const {\n        color = \"rgba(0, 0, 0, 0.24)\",\n        blur = 1,\n        offsetX = 0,\n        offsetY = 2,\n        offset: {\n          x: ox = offsetX,\n          y: oy = offsetY\n        } = {}\n      } = shadow;\n      ctx.shadowColor = color;\n      ctx.shadowBlur = blur; //\n\n      ctx.shadowOffsetX = ox;\n      ctx.shadowOffsetY = oy;\n    }\n\n    fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawButton = drawButton;\n\n/***/ }),\n\n/***/ \"./tooltip/BaseTooltip.js\":\n/*!********************************!*\\\n  !*** ./tooltip/BaseTooltip.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseTooltip = void 0;\n\nclass BaseTooltip {\n  constructor(grid) {\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachTooltipElement();\n\n    if (this._tooltipElement) {\n      this._tooltipElement.dispose();\n    }\n\n    this._tooltipElement = undefined;\n  }\n\n  _getTooltipElement() {\n    if (this._tooltipElement) {\n      return this._tooltipElement;\n    }\n\n    return this._tooltipElement = this.createTooltipElementInternal();\n  }\n\n  attachTooltipElement(col, row, content) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.attach(this._grid, col, row, content);\n  }\n\n  moveTooltipElement(col, row) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.move(this._grid, col, row);\n  }\n\n  detachTooltipElement() {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement._detach();\n  }\n\n}\n\nexports.BaseTooltip = BaseTooltip;\n\n/***/ }),\n\n/***/ \"./tooltip/Tooltip.js\":\n/*!****************************!*\\\n  !*** ./tooltip/Tooltip.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tooltip = void 0;\n\nconst BaseTooltip_1 = __webpack_require__(/*! ./BaseTooltip */ \"./tooltip/BaseTooltip.js\");\n\nconst TooltipElement_1 = __webpack_require__(/*! ./internal/TooltipElement */ \"./tooltip/internal/TooltipElement.js\");\n\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\n  createTooltipElementInternal() {\n    return new TooltipElement_1.TooltipElement();\n  }\n\n}\n\nexports.Tooltip = Tooltip;\n\n/***/ }),\n\n/***/ \"./tooltip/TooltipHandler.js\":\n/*!***********************************!*\\\n  !*** ./tooltip/TooltipHandler.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TooltipHandler = void 0;\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ../list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst Tooltip_1 = __webpack_require__(/*! ./Tooltip */ \"./tooltip/Tooltip.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst TOOLTIP_INSTANCE_FACTORY = {\n  \"overflow-text\"(grid) {\n    return new Tooltip_1.Tooltip(grid);\n  }\n\n};\n\nfunction getTooltipInstanceInfo( // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngrid, col, row) {\n  //\n  // overflow text tooltip\n  const overflowText = grid.getCellOverflowText(col, row);\n\n  if (overflowText) {\n    return {\n      type: \"overflow-text\",\n      content: overflowText\n    };\n  }\n\n  return null;\n}\n\nclass TooltipHandler {\n  constructor(grid) {\n    this._grid = grid;\n    this._tooltipInstances = {};\n\n    this._bindGridEvent(grid);\n  }\n\n  dispose() {\n    const tooltipInstances = this._tooltipInstances;\n\n    for (const k in tooltipInstances) {\n      tooltipInstances[k].dispose();\n    } // @ts-expect-error -- ignore\n\n\n    delete this._tooltipInstances;\n    this._attachInfo = null;\n  }\n\n  _attach(col, row) {\n    const info = this._attachInfo;\n\n    const instanceInfo = this._getTooltipInstanceInfo(col, row);\n\n    if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\n      info.instance.detachTooltipElement();\n      this._attachInfo = null;\n    }\n\n    if (!instanceInfo) {\n      return;\n    }\n\n    const {\n      instance\n    } = instanceInfo;\n    instance.attachTooltipElement(col, row, instanceInfo.content);\n\n    const range = this._grid.getCellRange(col, row);\n\n    this._attachInfo = {\n      range,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveTooltipElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachTooltipElement();\n    this._attachInfo = null;\n  }\n\n  _isAttachCell(col, row) {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return false;\n    }\n\n    return (0, utils_1.cellInRange)(info.range, col, row);\n  }\n\n  _bindGridEvent(grid) {\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.col, e.row)) {\n          return;\n        }\n      }\n\n      this._attach(e.col, e.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.related.col, e.related.row)) {\n          return;\n        }\n      }\n\n      this._detach();\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const info = this._attachInfo;\n\n      if (!info) {\n        return;\n      }\n\n      this._move(info.range.start.col, info.range.start.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n\n        this._attach(e.col, e.row);\n      }\n    });\n  }\n\n  _getTooltipInstanceInfo(col, row) {\n    const grid = this._grid;\n    const tooltipInstances = this._tooltipInstances;\n    const info = getTooltipInstanceInfo(grid, col, row);\n\n    if (!info) {\n      return null;\n    }\n\n    const {\n      type\n    } = info;\n    const instance = tooltipInstances[type] || (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\n    return {\n      instance,\n      type,\n      content: info.content\n    };\n  }\n\n}\n\nexports.TooltipHandler = TooltipHandler;\n\n/***/ }),\n\n/***/ \"./tooltip/internal/TooltipElement.js\":\n/*!********************************************!*\\\n  !*** ./tooltip/internal/TooltipElement.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TooltipElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createTooltipDomElement() {\n  __webpack_require__(/*! @/tooltip/internal/TooltipElement.css */ \"../src/js/tooltip/internal/TooltipElement.css\");\n\n  const rootElement = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = (0, dom_1.createElement)(\"pre\", {\n    classList: [CONTENT_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass TooltipElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createTooltipDomElement();\n    this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n    }\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._rootElement; // @ts-expect-error -- ignore\n\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, content) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = content;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      // rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      height: offsetHeight,\n      width: offsetWidth,\n      left: elementLeft,\n      right: elementRight\n    } = element.getBoundingClientRect();\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    const cellCenter = left + width / 2;\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${cellCenter.toFixed()}px`;\n    rootElement.style.minWidth = `${width.toFixed()}px`;\n    const maxWidthForLeft = (elementLeft + cellCenter) * 2;\n    const winWidth = window.innerWidth;\n    const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\n    const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\n    rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.TooltipElement = TooltipElement;\n\n/***/ })\n\n/******/ });\n});\n}).call(typeof global !== \"undefined\" ? global : window, typeof global !== \"undefined\" ? global : window);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row) &&\r\n        (helper.theme.highlightBorderColor ||\r\n            (typeof helper.theme.highlightBorderColor == \"function\" &&\r\n                helper.theme.highlightBorderColor(row, col)))) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        let flagBorder = false;\r\n        if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\r\n            }\r\n            if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" &&\r\n                ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\r\n                borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if ((_j = layoutMap.getHeader(col, row)) === null || _j === void 0 ? void 0 : _j.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_k = layoutMap.getHeader(col, row)) === null || _k === void 0 ? void 0 : _k.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_m = (_l = layoutMap.getHeader(col, row).style) === null || _l === void 0 ? void 0 : _l.borderColor) !== null && _m !== void 0 ? _m : \"\";\r\n            }\r\n            if (typeof ((_o = layoutMap.getHeader(col, row)) === null || _o === void 0 ? void 0 : _o.style) == \"function\" &&\r\n                ((_p = grid[_].records) === null || _p === void 0 ? void 0 : _p.length)) {\r\n                borderColorCell = (_q = layoutMap.getHeader(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _q === void 0 ? void 0 : _q.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if (!flagBorder) {\r\n            helper.border(context, option);\r\n        }\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    grid.frozenRowCount = layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...super.bindGridEvent(grid, cellId),\r\n            grid.listen('click_cell', (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style, col, row) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef, col, row);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n"],"sourceRoot":""}