{"version":3,"sources":["cheetahGrid.es5/cheetahGrid.es5.js","cheetahGrid.es5/webpack/universalModuleDefinition","cheetahGrid.es5/webpack/bootstrap","cheetahGrid.es5/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid.es5/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid.es5/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid.es5/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid.es5/../src/js/columns/message/internal/MessageElement.css","cheetahGrid.es5/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid.es5/../src/js/internal/style.css","cheetahGrid.es5/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid.es5/node_modules/css-loader/dist/runtime/api.js","cheetahGrid.es5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid.es5/node_modules/webpack/buildin/global.js","cheetahGrid.es5/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid.es5/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid.es5/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid.es5/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid.es5/../src/js/internal/style.css*","cheetahGrid.es5/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid.es5/./GridCanvasHelper.js","cheetahGrid.es5/./ListGrid.js","cheetahGrid.es5/./columns.js","cheetahGrid.es5/./columns/action.js","cheetahGrid.es5/./columns/action/Action.js","cheetahGrid.es5/./columns/action/BaseAction.js","cheetahGrid.es5/./columns/action/BaseInputEditor.js","cheetahGrid.es5/./columns/action/ButtonAction.js","cheetahGrid.es5/./columns/action/CheckEditor.js","cheetahGrid.es5/./columns/action/Editor.js","cheetahGrid.es5/./columns/action/InlineInputEditor.js","cheetahGrid.es5/./columns/action/InlineMenuEditor.js","cheetahGrid.es5/./columns/action/RadioEditor.js","cheetahGrid.es5/./columns/action/SmallDialogInputEditor.js","cheetahGrid.es5/./columns/action/action-utils.js","cheetahGrid.es5/./columns/action/actionBind.js","cheetahGrid.es5/./columns/action/internal/InlineInputElement.js","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.js","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.es5/./columns/action/internal/input-value-handler.js","cheetahGrid.es5/./columns/indicator/handlers.js","cheetahGrid.es5/./columns/indicator/triangle.js","cheetahGrid.es5/./columns/message/BaseMessage.js","cheetahGrid.es5/./columns/message/ErrorMessage.js","cheetahGrid.es5/./columns/message/InfoMessage.js","cheetahGrid.es5/./columns/message/MessageHandler.js","cheetahGrid.es5/./columns/message/WarningMessage.js","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.es5/./columns/message/internal/MessageElement.js","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.js","cheetahGrid.es5/./columns/message/messageUtils.js","cheetahGrid.es5/./columns/style.js","cheetahGrid.es5/./columns/style/BaseStyle.js","cheetahGrid.es5/./columns/style/BranchGraphStyle.js","cheetahGrid.es5/./columns/style/ButtonStyle.js","cheetahGrid.es5/./columns/style/CheckStyle.js","cheetahGrid.es5/./columns/style/IconStyle.js","cheetahGrid.es5/./columns/style/ImageStyle.js","cheetahGrid.es5/./columns/style/MenuStyle.js","cheetahGrid.es5/./columns/style/MultilineTextStyle.js","cheetahGrid.es5/./columns/style/NumberStyle.js","cheetahGrid.es5/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.es5/./columns/style/RadioStyle.js","cheetahGrid.es5/./columns/style/StdBaseStyle.js","cheetahGrid.es5/./columns/style/Style.js","cheetahGrid.es5/./columns/type.js","cheetahGrid.es5/./columns/type/BaseColumn.js","cheetahGrid.es5/./columns/type/BranchGraphColumn.js","cheetahGrid.es5/./columns/type/ButtonColumn.js","cheetahGrid.es5/./columns/type/CheckColumn.js","cheetahGrid.es5/./columns/type/Column.js","cheetahGrid.es5/./columns/type/IconColumn.js","cheetahGrid.es5/./columns/type/ImageColumn.js","cheetahGrid.es5/./columns/type/MenuColumn.js","cheetahGrid.es5/./columns/type/MultilineTextColumn.js","cheetahGrid.es5/./columns/type/NumberColumn.js","cheetahGrid.es5/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.es5/./columns/type/RadioColumn.js","cheetahGrid.es5/./columns/type/columnUtils.js","cheetahGrid.es5/./columns/utils/index.js","cheetahGrid.es5/./core.js","cheetahGrid.es5/./core/DG_EVENT_TYPE.js","cheetahGrid.es5/./core/DrawGrid.js","cheetahGrid.es5/./core/EventTarget.js","cheetahGrid.es5/./data.js","cheetahGrid.es5/./data/CachedDataSource.js","cheetahGrid.es5/./data/DataSource.js","cheetahGrid.es5/./data/FilterDataSource.js","cheetahGrid.es5/./element/Inline.js","cheetahGrid.es5/./element/InlineDrawer.js","cheetahGrid.es5/./element/InlineIcon.js","cheetahGrid.es5/./element/InlineImage.js","cheetahGrid.es5/./element/InlinePath2D.js","cheetahGrid.es5/./element/InlineSvg.js","cheetahGrid.es5/./element/inlines.js","cheetahGrid.es5/./get-internal.js","cheetahGrid.es5/./header/action.js","cheetahGrid.es5/./header/action/BaseAction.js","cheetahGrid.es5/./header/action/CheckHeaderAction.js","cheetahGrid.es5/./header/action/SortHeaderAction.js","cheetahGrid.es5/./header/action/actionBind.js","cheetahGrid.es5/./header/style.js","cheetahGrid.es5/./header/style/BaseStyle.js","cheetahGrid.es5/./header/style/CheckHeaderStyle.js","cheetahGrid.es5/./header/style/MultilineTextHeaderStyle.js","cheetahGrid.es5/./header/style/SortHeaderStyle.js","cheetahGrid.es5/./header/style/StdBaseStyle.js","cheetahGrid.es5/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid.es5/./header/style/StdTextBaseStyle.js","cheetahGrid.es5/./header/style/Style.js","cheetahGrid.es5/./header/type.js","cheetahGrid.es5/./header/type/BaseHeader.js","cheetahGrid.es5/./header/type/CheckHeader.js","cheetahGrid.es5/./header/type/Header.js","cheetahGrid.es5/./header/type/MultilineTextHeader.js","cheetahGrid.es5/./header/type/SortHeader.js","cheetahGrid.es5/./headers.js","cheetahGrid.es5/./icons.js","cheetahGrid.es5/./internal/EventHandler.js","cheetahGrid.es5/./internal/LRUCache.js","cheetahGrid.es5/./internal/NumberMap.js","cheetahGrid.es5/./internal/Rect.js","cheetahGrid.es5/./internal/Scrollable.js","cheetahGrid.es5/./internal/animate.js","cheetahGrid.es5/./internal/calc.js","cheetahGrid.es5/./internal/canvases.js","cheetahGrid.es5/./internal/color.js","cheetahGrid.es5/./internal/dom.js","cheetahGrid.es5/./internal/fonts.js","cheetahGrid.es5/./internal/hiDPI.js","cheetahGrid.es5/./internal/icons.js","cheetahGrid.es5/./internal/imgs.js","cheetahGrid.es5/./internal/legacy/canvas/Path2DShim.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommands.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.es5/./internal/menu-items.js","cheetahGrid.es5/./internal/paste-utils.js","cheetahGrid.es5/./internal/path2DManager.js","cheetahGrid.es5/./internal/sort.js","cheetahGrid.es5/./internal/style.js","cheetahGrid.es5/./internal/symbolManager.js","cheetahGrid.es5/./internal/utils.js","cheetahGrid.es5/./list-grid/LG_EVENT_TYPE.js","cheetahGrid.es5/./list-grid/layout-map/index.js","cheetahGrid.es5/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid.es5/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid.es5/./list-grid/layout-map/internal/utils.js","cheetahGrid.es5/./main.js","cheetahGrid.es5/./plugins/icons.js","cheetahGrid.es5/./plugins/themes.js","cheetahGrid.es5/./register.js","cheetahGrid.es5/./themes.js","cheetahGrid.es5/./themes/BASIC.js","cheetahGrid.es5/./themes/MATERIAL_DESIGN.js","cheetahGrid.es5/./themes/theme.js","cheetahGrid.es5/./tools.js","cheetahGrid.es5/./tools/canvashelper.js","cheetahGrid.es5/./tooltip/BaseTooltip.js","cheetahGrid.es5/./tooltip/Tooltip.js","cheetahGrid.es5/./tooltip/TooltipHandler.js","cheetahGrid.es5/./tooltip/internal/TooltipElement.js"],"names":["window","webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","___CSS_LOADER_EXPORT___","push","useSourceMap","list","toString","map","item","content","cssWithMappingToString","concat","join","mediaQuery","dedupe","alreadyImportedModules","length","id","_i","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","isOldIE","memo","memorize","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","index","obj","css","media","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","removeStyleElement","parentNode","removeChild","replaceText","textStore","replace","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","updateStyle","newObj","lastIdentifiers","newList","newLastIdentifiers","_identifier","_index","splice","g","Function","api","default","locals","__createBinding","k","k2","undefined","desc","getOwnPropertyDescriptor","writable","configurable","__setModuleDefault","v","__importStar","mod","GridCanvasHelper","calc","require","canvashelper","fonts","inlineUtils","themes","canvases_1","utils_1","InlineDrawer_1","Rect_1","color_1","toBoxArray","INLINE_ELLIPSIS","of","TEXT_OFFSET","CHECKBOX_OFFSET","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getFont","font","getThemeColor","names","gridThemeColor","getChainSafe","theme","defaultThemeColor","args","testFontLoad","check","load","drawInlines","ctx","inlines","rect","offset","offsetTop","offsetBottom","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","restore","onReady","inlineWidths","width","reduce","a","b","inlineWidth","buildInlines","icons","inlineToString","string","getOverflowInline","textOverflow","isAllowOverflow","trim","getOverflowInlinesIndex","maxWidth","lineWidth","remWidth","isOverflowInlines","breakWidthInlines","indexData","beforeInlines","overflow","afterInlines","slice","canBreak","breakWord","before","after","breakAll","splitIndex","truncateInlines","option","overflowInline","ellipsisWidth","_inlineRect","drawRect","textAlign","textBaseline","trailingIcon","trailingIconInline","iconOf","inlineDrawRect","trailingIconWidth","Rect","left","top","height","truncInlines","setCellOverflowText","sumWidth","baseRect","trailingIconRect","copy","right","_multiInlineRect","multiInlines","lineHeight","autoWrapText","lineClamp","rectHeight","Math","max","floor","buildedMultiInlines","procLineClamp","hasNext","Number","procLine","lineRow","buildedInline","paddingTop","paddingBottom","em","getFontSize","pad","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","start","end","diff","ceil","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","positionOpt","boxWidth","measureCheckbox","pos","calcStartPosition","x","y","drawRadioButton","checkColor","radioButton","uncheckBorderColor","checkBorderColor","measureRadioButton","bgColor","ThemeResolver","constructor","_checkbox","_radioButton","_button","_header","_messages","_indicators","_grid","getCheckboxProp","prop","getRadioButtonProp","getButtonProp","sortArrowColor","infoBgColor","getMessageProp","errorBgColor","warnBgColor","markHeight","topLeftColor","getIndicatorsProp","topLeftSize","topRightColor","topRightSize","bottomRightColor","bottomRightSize","bottomLeftColor","bottomLeftSize","strokeRect","Array","isArray","strokeStyle","borderColors","strokeColorsRect","_theme","createCalculator","calcWidth","toPx","full","getRect","getContext","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","getDrawRect","beginPath","clip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","frozenRowsColor","paddingNums","multilineText","multilines","fillText","fillCell","fillColor","defaultBgColor","fill","fillCellWithState","getFillColorState","fillRect","fillRectWithState","sel","getSelection","cellEquals","select","cellInRange","range","selectionBgColor","highlightBgColor","frozenRowsBgColor","border","startOffset","borderWithState","highlightBorderColor","frozenRowsBorderColor","selection","moveTo","lineTo","bottom","stroke","buildCheckBoxInline","self","InlineDrawer","button","caption","shadow","drawButton","radius","_a","ListGrid","data_1","layout_map_1","MessageHandler_1","style_1","DrawGrid_1","GridCanvasHelper_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","symbolManager_1","paste_utils_1","_","getProtectedSymbol","_getCellRange","layoutMap","getCellRange","_updateRect","setRectFilter","startCol","startRow","endCol","endRow","getColWidth","getRowHeight","bounds","_getCellValue","headerRowCount","getHeader","getBody","field","_getField","_setCellValue","_getRecordIndexByRow","dataSource","setField","_getCellMessage","message","promises","msg","isPromise","hasMessage","Promise","resolve","reject","then","_getCellIcon0","icon","isObject","retIcon","iconOpt","iconPropKeys","f","_hasField","_getCellIcon","headerIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","frozenColCount","frozenRowCount","_borderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","_b","_c","_d","_e","_f","_g","_h","selRecordIndex","getRecordIndexByRow","selId","getCellId","isSelectCell","borderColorCell","records","_refreshHeader","protectedSpace","headerEvents","unlisten","layout","MultiLayoutMap","SimpleHeaderLayoutMap","header","headerObjects","cell","ids","headerType","bindGridEvent","BaseStyle","listen","EVENT_TYPE","CHANGE_STYLE","invalidate","action","columnObjects","columnType","columnWidths","column","minWidth","setColWidth","setMinColWidth","setMaxColWidth","headerRowHeight","setRowHeight","colCount","_refreshRowCount","rowCount","bodyRowCount","_tryWithUpdateDataSource","fn","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","newDataSource","CachedDataSource","ofArray","addDisposable","_setDataSource","EMPTY","_onRangePaste","test","selectionRange","values","parsePasteRangeBoxValues","trimOnPaste","pasteRowCount","min","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","offsetCol","body","editable","getRecordStartRowByRecordIndex","startRowOffset","rejectedDetail","addRejectedDetail","record","pasteValue","timeout","processRejected","clearTimeout","setTimeout","fireListeners","LG_EVENT_TYPE","REJECTED_PASTE_VALUES","detail","duplicate","actionRow","valuesRow","offsetRow","valuesCol","getCellValue","oldValue","onPasteCellRangeBox","newEnd","invalidateCellRange","_onRangeDelete","deleteRowCount","deleteColCount","_record","_oldValue","onDeleteCellRangeBox","omit","disabled","readOnly","allowRangePaste","sortState","order","MessageHandler","tooltipHandler","TooltipHandler","updateSize","updateScroll","dispose","underlayBackgroundColor","oldState","oldField","getHeaderField","newState","newField","setHeaderValue","headerValues","Map","getColumnDefine","getColumnType","getColumnAction","hd","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","find","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","focusCell","invalidateGridRect","makeVisibleGridCell","makeVisibleCell","getGridCanvasHelper","getHeaderCellRange","getCopyCellValue","cellRange","headerData","columnData","onDrawCell","doGetCellValue","valueCallback","doChangeValue","changeValueCallback","BEFORE_CHANGE_VALUE","ret","CHANGED_VALUE","doSetPasteValue","getHeaderValue","newValue","set","CHANGED_HEADER_VALUE","getLayoutCellId","bindEventsInternal","SELECTED_CELL","PASTE_CELL","multi","event","cancel","normalizeValue","DELETE_CELL","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getOffsetInvalidateCells","getCopyRangeInternal","type","DrawGrid","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action","Editor","BaseAction","ACTIONS","Action_1","BaseAction_1","ButtonAction_1","CheckEditor_1","Editor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","_disabled","_readOnly","ImmutableRadioEditor","ImmutableInputEditor","CHECK","INPUT","RADIO","columnAction","toUpperCase","actionBind_1","action_utils_1","_action","clone","getState","cellId","state","isDisabledRecord","extend","bindCellClickAction","mouseOver","mouseActiveCell","mouseOut","bindCellKeyAction","onChangeDisabledInternal","BaseInputEditor","DG_EVENT_TYPE_1","KEY_ENTER","KEY_F2","open","isReadOnlyRecord","onOpenCellInternal","input","onInputCellInternal","isTarget","DG_EVENT_TYPE","INPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","keyCode","stopCellMoving","onChangeSelectCellInternal","selected","SCROLL","onGridScrollInternal","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","getCellRect","rangeRect","getCellRangeRect","parseFloat","toFixed","onSetInputAttrsInternal","isSupportMultilineValue","BUTTON_COLUMN_STATE_ID","getButtonColumnStateId","setReadonly","animate_1","CHECK_COLUMN_STATE_ID","getCheckColumnStateId","_state","block","elapsed","cellKey","toggleValue","onChange","animate","point","selrange","isRejectValue","onChangeReadOnlyInternal","BaseInputEditor_1","InlineInputElement_1","getInlineInputEditorStateId","globalElement","bindGridCount","attachInput","editor","InlineInputElement","element","attach","detachInput","gridFocus","detach","_classList","classList","_type","inputValue","_cell","_selected","setInputAttrs","InlineMenuElement_1","type_1","menu_items_1","getInlineMenuEditorStateId","attachMenu","InlineMenuElement","detachMenu","_options","normalizeToFn","CLICK_CELL","MOUSEOVER_CELL","getElement","cursor","MOUSEMOVE_CELL","MOUSEOUT_CELL","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","hasOptions","normalizePasteValueStr","captionOpt","array","opt","label","MenuColumn","utils_2","RADIO_COLUMN_STATE_ID","getRadioColumnStateId","_group","group","_checkAction","checkAction","toBoolean","targets","actionCell","recordStartRow","girdRecords","getAllRecordsFromGrid","showData","recordRowCount","targetRow","flag","SmallDialogInputElement_1","getSmallDialogInputEditorStateId","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","getBooleanOptionOfRecord","val","exec","KEY_SPACE","acceptKeys","indexOf","keyboardOptions","moveCellOnEnter","EventHandler_1","dom_1","input_value_handler_1","KEY_TAB","CLASSNAME","createInputElement","add","_handler","EventHandler","_input","_bindInputEvents","_beforePropEditor","parentElement","getAttachCellsArea","setInputValue","_activeData","focus","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_attaching","_isActive","stopPropagationOnly","stopPropagation","contains","getKeyCode","_onKeydownEnter","_onKeydownTab","onKeyDownMove","moveCellOnTab","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","el","createMenuElement","attachElement","menu","optionToLi","html","tabIndex","dataset","valueindex","span","appendHtml","openMenu","empty","emptyItemEl","valueItemEl","focusEl","children","focusIndex","allHeight","offsetHeight","transformOrigin","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_col","_row","disableFocus","_menu","_bindMenuEvents","bodyClickListenerId","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","capture","_doChangeValue","findPrevSiblingFocusable","findNextSiblingFocusable","shiftKey","isFocusable","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","browser","IE","_beforeValue","_validate","res","onKeyupAndPress","_onInputValueChange","inputOnly","sign","once","getDrawIndicator","triangle_1","indicatorStyle","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","indicators","themeSize","drawPath","size","baseLeft","baseTop","baseRight","baseBottom","kind","process","closePath","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","messageElement","moveMessageElement","move","_detach","drawCellMessage","drawCellMessageInternal","ErrorMessage","messageUtils","BaseMessage_1","ErrorMessageElement_1","RED_A100","ErrorMessageElement","_message","_info","hasFocusGrid","drawExclamationMarkBox","messages","InfoMessage","MessageElement_1","GREY_L2","MessageElement","drawInformationMarkBox","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","error","warning","WarningMessage","normalizeMessage","original","toLowerCase","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","_attach","_move","onSelectMessage","setMessageData","newSel","FOCUS_GRID","BLUR_GRID","WarningMessageElement_1","DEEP_ORANGE_A100","WarningMessageElement","MESSAGE_CLASSNAME","_rootElement","createMessageDomElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","boxRect","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","Style","BaseStyle_1","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","Style_1","columnStyle","StyleClassDef","DEFAULT","EventTarget_1","STYLE_EVENT_TYPE","defaultStyle","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","doChangeStyle","EventTarget","indicator","BranchGraphStyle","DEFAULT_BRANCH_COLORS","_name","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","defaults","buttonBgColor","_buttonBgColor","StdBaseStyle_1","_uncheckBgColor","_checkBgColor","_borderColor","StdBaseStyle","_imageSizing","imageSizing","appearance","_appearance","_lineHeight","_autoWrapText","_lineClamp","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_checkColor","_uncheckBorderColor","_checkBorderColor","_textAlign","_textBaseline","_color","_font","_padding","_textOverflow","MultilineTextColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","Column","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","BaseColumn","styleContents","handlers_1","COLUMN_FADEIN_STATE_ID","getColumnFadeinStateId","isFadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","configure","getFadeinState","cells","_generateFadeinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","fadeinMgr","activeFadeins","margeAnimate","_fadeinWhenCallbackInPromise","promise","Date","now","currentContext","toCurrentContext","time","actStyle","StyleClass","convertInternal","drawMessageInternal","drawIndicatorsInternal","_cellId","BaseColumn_1","BranchGraphStyle_1","getBranchGraphColumnStateId","getAllColumnData","callback","allData","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","j","tl","branch","from","to","branches","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","merge","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","textWidth","measureText","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","clearCache","has","_value","upLineIndexKey","downLineIndexKey","line","pointIndex","sort","arc","PI","utils","_caption","withCaption","textValue","String","active","loadIcons","blur","offsetY","repeatArray","Infinity","_tagName","tagName","_className","className","_content","_iconWidth","iconWidth","isNaN","imgs_1","MAX_LRU_CACHE_SIZE","getImage","url","getCacheOrLoad","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","normalize","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","path","console","warn","split","defaultFotmat","_format","format","withFormat","Intl","NumberFormat","fmt","MARGIN","_min","_max","_formatter","formatter","str","endsWith","rate","barMaxWidth","barTop","barLeft","barSize","argIcon","iconList","toNormalizeArray","MOUSEDOWN_CELL","MOUSEUP_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","RESIZE_COLUMN","hiDPI","NumberMap_1","Scrollable_1","isTouchEvent","getMouseButtons","cancelEvent","createRootElement","KEY_BS","KEY_END","KEY_HOME","KEY_LEFT","KEY_RIGHT","KEY_DEL","KEY_ALPHA_A","KEY_ALPHA_C","KEY_ALPHA_V","_vibrate","navigator","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candidateRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_getCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","cellDrawing","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","put","_storeAutoColWidthExprs","defaultColPxWidth","each","adj","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","setFocusCursor","abs","redrawRect","_onKeyDownMove","ctrlKey","metaKey","hMove","vMove","newCell","_moveFocusCell","selectAllOnCtrlA","vDir","hDir","shiftKeyFlg","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_updatedSelection","focusControl","selCol","selRow","results","editMode","findIndex","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","buttons","resizeCol","_getResizeColAt","columnResizer","cellSelector","hasListeners","doubleTapBefore","longTouchId","useTouch","useTouchStart","timeoutId","useTouchEnd","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","leaveCell","moving","lastMoving","onKeyDown","onScroll","copyRange","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","normalizedValue","normalizePasteValue","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","onBlur","abstractX","abstractY","inPoint","cellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","mousemove","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","afterSize","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_isComposition","_compositionEnd","lastInputValue","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","Edge","isDescendantElement","dummyInput","pasteText","clipboardData","getData","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","removeNames","attr","_inputStatus","nodeName","removeName","inputStatus","Selection","_sel","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","_level","_list","drawing","_rectFilter","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","rectFilter","_getRectInternal","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","protectedKey","initDocument","Scrollable","transform","alpha","NumberMap","cellTextOverflows","cfg","config","scrollHeight","scrollWidth","setScrollSize","getMaxColWidth","maxwidth","getMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","oldEditMode","cellsRect","invalidateTarget","visibleTop","visibleLeft","_range","getCellOverflowText","overflowText","disposable","disposables","_absoluteY","_startRow","_endRow","nextId","listeners","listenerData","listener","addEventListener","removeEventListener","FilterDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","_setFieldCache","fCache","recCache","_rCache","_fCache","getOriginal","getOriginalField","rowCache","setOriginalField","fieldPromiseCallBackInternal","recordPromiseCallBackInternal","isFieldAssessor","UPDATE_LENGTH","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","fieldGet","fieldResult","ss","applyChainSafe","emptyFn","fieldSet","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","hasOriginalField","orderFn","sortPromise","rel","_field","DataSourceIterator","_dataSource","_curIndex","_data","next","_getIndexData","movePrev","nest","FilterData","dc","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","Inline","getWidth","breakWidth","itr","candidateIndex","chars","beforeWidth","charWidth","beforeContent","afterContent","_callback","fillTextRect","genChars","allWidth","candidate","genWords","Inline_1","_draw","_width","_arg","InlineIcon","_icon","letterSpacing","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_height","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","_loadImage","img","drawInlineImageRect","InlinePath2D","path2DManager","Path2D","getPath2D","_path","translate","InlineSvg","InlineImage_1","buildSvgDataUrl","svg","XMLSerializer","serializeToString","getSvgElement","parser","DOMParser","parseFromString","svgElem","elmWidth","getAttribute","elmHeight","numElmWidth","numElmHeight","InlineIcon_1","InlinePath2D_1","InlineSvg_1","drawRegisteredIcon","drawWidth","drawHeight","isIconConstructorOption","isInlineImageConstructorOption","isInlineSvgConstructorOption","registeredIcons","registeredIcon","il","getInternal","symbolManager","pasteUtils","ofCell","CheckHeaderAction","SortHeaderAction","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","SORT","headerAction","headerCell","sortMethod","CHECK_HEADER_STATE_ID","getCheckHeaderStateId","checked","_sort","_executeSort","hasTrueField","fieldRow","inMouse","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdTextBaseStyle_1","StdTextBaseStyle","StdMultilineTextBaseStyle_1","StdMultilineTextBaseStyle","_sortArrowColor","_multiline","multiline","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","inlineCheck","contents","arrowSize","icons_1","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","fire","hasListener","clear","LRUCache","cacheSize","_map","_cacheSize","idx","remKey","shift","indexFirst","arr","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","_right","_bottom","x0","x1","y0","y1","another","rect1","rect2","MAX_SCROLL","heightLimit","_p","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","isNode","requestAnimationFrame","duration","easing","startedAt","easingFn","canceledFlg","createAnim","anim","TYPE_PAREN","TYPE_UNIT","TYPE_OPERATOR","TYPE_NUMBER","NODE_TYPE_UNIT","NODE_TYPE_BINARY_EXPRESSION","NODE_TYPE_NUMBER","TABULATION","CARRIAGE_RETURN","LINE_FEED","FORM_FEED","SPACE","PERCENT","FULL_STOP","DIGIT_0","DIGIT_9","LATIN_CAPITAL_A","LATIN_CAPITAL_Z","LATIN_SMALL_A","LATIN_SMALL_Z","isUpperLetter","cp","isLowerLetter","isLetter","isWhitespace","isDigit","isDot","isUnit","createError","tokenize","exp","tokens","len","charCodeAt","parseSign","parseNum","parseUnit","unit","PRECEDENCE","lex","buildBinaryExpNode","stack","op","nodeType","token","deep","closeIndex","beforeOp","parse","calcStr","calcNode","node","toPxInternal","ast","calcBasePosition","fontSizeCache","fontName","bk","paddingLeft","paddingRight","rgbMap","styleColorToRGB","dummy","position","defaultView","getComputedStyle","styleColor","colorToRGB0","hexToNum","hex","parseInt","createRGB","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","rgb","enableFocus","toNodeList","innerHTML","dom","arg","toNode","inner","disableBeforeTabIndex","previousSibling","nextSibling","loads","_testStr","fontFaceSet","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","getIconProps","ICON_PROP_KEYS","quote","quoted","part","doms","props","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","toSimpleArray","iconProps","workData","isIconKey","loadImage","LRUCache_1","allCache","Image","onload","onerror","getCacheOrLoad0","cacheName","Path2DShim","PathCommandsParser_1","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","roundRect","_y","_w","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands","mag","sqrt","pow","dot","u","clamp","angle","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","PathCommands_1","pathTokens","builder","argsProvider","_commands","buildPush","numArgs","ops","subsequentCommand","fst","log","FontRuler","computeStyle","display","el_","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","activeCallback","inactiveCallback","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","hasWebKitFallbackBug","callbacks","cb","runner","HAS_WEBKIT_FALLBACK_BUG","match","userAgent","parseValues","adjustCell","char","processQuotedCell","pathModule","upsideDown","ud","offsetX","xrate","yrate","path2d","sortArray","createArray","createArrayPromise","plist","setArrayField","compare","old","dummyPromise","catch","getScrollBarWidth","wrapper","wrapperStyle","pointerEvents","wrapperWidth","innerWidth","SCROLLBAR_SIZE","initDocumentInternal","initDocumentVar","global","random","cl","mem","getIgnoreCase","arrayFind","arrayFindIndex","predicate","analyzeUserAgent","Chrome","Firefox","Safari","ua","omits","defs","searchString","subjectString","isFinite","lastIndex","lastIndexOf","re","which","preventDefault","simple_header_layout_1","multi_layout_1","columns","normalizeLayout","seqId","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","_emptyDataCache","EmptyDataCache","hbLayouut","headerField","_body","colDef","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","_j","_k","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","prev","newEmptyColumnData","newEmptyHeaderData","headers","rows","register","getIcons","tools","core","_getInternal","ListGrid_1","get_internal_1","defaultTheme","setDefault","getChoices","themes_1","registers","__importDefault","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","Theme","builtin","defTheme","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","strokeRectLines","positions","preColor","pos1","pos2","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","leftWidth","rightWidth","leftLeftPos","leftTopPos","checkSize","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","BaseTooltip","detachTooltipElement","_tooltipElement","_getTooltipElement","createTooltipElementInternal","attachTooltipElement","tooltipElement","moveTooltipElement","Tooltip","BaseTooltip_1","TooltipElement_1","TooltipElement","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","getTooltipInstanceInfo","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","_isAttachCell","CONTENT_CLASSNAME","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","winWidth","maxWidthForRight"],"mappings":"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","file":"cheetahGrid.es5.js","sourcesContent":["(function(window){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css\":\n/*!**************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/InlineInputElement.css ***!\n  \\**************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css\":\n/*!*************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/InlineMenuElement.css ***!\n  \\*************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css\":\n/*!*******************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/action/internal/SmallDialogInputElement.css ***!\n  \\*******************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css\":\n/*!****************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/ErrorMessageElement.css ***!\n  \\****************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css\":\n/*!***********************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/MessageElement.css ***!\n  \\***********************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css\":\n/*!******************************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/columns/message/internal/WarningMessageElement.css ***!\n  \\******************************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css\":\n/*!**********************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/internal/style.css ***!\n  \\**********************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css\":\n/*!***************************************************************************************************************************************************!*\\\n  !*** ../node_modules/css-loader/dist/cjs.js??ref--5-1!../node_modules/postcss-loader/src??ref--5-2!../src/js/tooltip/internal/TooltipElement.css ***!\n  \\***************************************************************************************************************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module uses module.id */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ \"../node_modules/css-loader/dist/runtime/api.js\":\n/*!******************************************************!*\\\n  !*** ../node_modules/css-loader/dist/runtime/api.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}\n\n/***/ }),\n\n/***/ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\":\n/*!*****************************************************************************!*\\\n  !*** ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!\n  \\*****************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : undefined;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n/***/ }),\n\n/***/ \"../node_modules/webpack/buildin/global.js\":\n/*!*************************************************!*\\\n  !*** ../node_modules/webpack/buildin/global.js ***!\n  \\*************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/InlineInputElement.css\":\n/*!****************************************************************!*\\\n  !*** ../src/js/columns/action/internal/InlineInputElement.css ***!\n  \\****************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./InlineInputElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/InlineMenuElement.css\":\n/*!***************************************************************!*\\\n  !*** ../src/js/columns/action/internal/InlineMenuElement.css ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./InlineMenuElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/action/internal/SmallDialogInputElement.css\":\n/*!*********************************************************************!*\\\n  !*** ../src/js/columns/action/internal/SmallDialogInputElement.css ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./SmallDialogInputElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/action/internal/SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/ErrorMessageElement.css\":\n/*!******************************************************************!*\\\n  !*** ../src/js/columns/message/internal/ErrorMessageElement.css ***!\n  \\******************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./ErrorMessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/MessageElement.css\":\n/*!*************************************************************!*\\\n  !*** ../src/js/columns/message/internal/MessageElement.css ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./MessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/columns/message/internal/WarningMessageElement.css\":\n/*!********************************************************************!*\\\n  !*** ../src/js/columns/message/internal/WarningMessageElement.css ***!\n  \\********************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src??ref--5-2!./WarningMessageElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/columns/message/internal/WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/internal/style.css\":\n/*!************************************!*\\\n  !*** ../src/js/internal/style.css ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src??ref--5-2!./style.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/internal/style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"../src/js/tooltip/internal/TooltipElement.css\":\n/*!*****************************************************!*\\\n  !*** ../src/js/tooltip/internal/TooltipElement.css ***!\n  \\*****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(/*! ../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src??ref--5-2!./TooltipElement.css */ \"../node_modules/css-loader/dist/cjs.js?!../node_modules/postcss-loader/src/index.js?!../src/js/tooltip/internal/TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n/***/ }),\n\n/***/ \"./GridCanvasHelper.js\":\n/*!*****************************!*\\\n  !*** ./GridCanvasHelper.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GridCanvasHelper = void 0;\n\nconst calc = __importStar(__webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"));\n\nconst canvashelper = __importStar(__webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\"));\n\nconst fonts = __importStar(__webpack_require__(/*! ./internal/fonts */ \"./internal/fonts.js\"));\n\nconst inlineUtils = __importStar(__webpack_require__(/*! ./element/inlines */ \"./element/inlines.js\"));\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nconst canvases_1 = __webpack_require__(/*! ./internal/canvases */ \"./internal/canvases.js\");\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst InlineDrawer_1 = __webpack_require__(/*! ./element/InlineDrawer */ \"./element/InlineDrawer.js\");\n\nconst Rect_1 = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\nconst color_1 = __webpack_require__(/*! ./internal/color */ \"./internal/color.js\");\n\nconst {\n  toBoxArray\n} = utils_1.style;\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\nconst TEXT_OFFSET = 2;\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\n\nfunction invalidateCell(context, grid) {\n  const {\n    col,\n    row\n  } = context;\n  grid.invalidateCell(col, row);\n}\n\nfunction getColor(color, col, row, grid, context) {\n  return (0, utils_1.getOrApply)(color, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getFont(font, col, row, grid, context) {\n  if (font == null) {\n    return undefined;\n  }\n\n  return (0, utils_1.getOrApply)(font, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getThemeColor(grid, ...names) {\n  const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\n\n  if (gridThemeColor == null) {\n    // use default theme\n    return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\n  }\n\n  if (typeof gridThemeColor !== \"function\") {\n    return gridThemeColor;\n  }\n\n  let defaultThemeColor; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  return args => {\n    const color = gridThemeColor(args);\n\n    if (color != null) {\n      // use grid theme\n      return color;\n    } // use default theme\n\n\n    defaultThemeColor = defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\n    return (0, utils_1.getOrApply)(defaultThemeColor, args); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  };\n}\n\nfunction testFontLoad(font, value, context, grid) {\n  if (font) {\n    if (!fonts.check(font, value)) {\n      fonts.load(font, value, () => invalidateCell(context, grid));\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\n  function drawInline(inline, offsetLeft, offsetRight) {\n    if (inline.canDraw()) {\n      ctx.save();\n\n      try {\n        ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n        ctx.font = inline.font() || ctx.font;\n        inline.draw({\n          ctx,\n          canvashelper,\n          rect,\n          offset,\n          offsetLeft,\n          offsetRight,\n          offsetTop,\n          offsetBottom\n        });\n      } finally {\n        ctx.restore();\n      }\n    } else {\n      inline.onReady(() => grid.invalidateCell(col, row)); //noop\n    }\n  }\n\n  if (inlines.length === 1) {\n    //1\n    const inline = inlines[0];\n    drawInline(inline, 0, 0);\n  } else {\n    const inlineWidths = inlines.map(inline => (inline.width({\n      ctx\n    }) || 0) - 0);\n    let offsetRight = inlineWidths.reduce((a, b) => a + b);\n    let offsetLeft = 0;\n    inlines.forEach((inline, index) => {\n      const inlineWidth = inlineWidths[index];\n      offsetRight -= inlineWidth;\n      drawInline(inline, offsetLeft, offsetRight);\n      offsetLeft += inlineWidth;\n    });\n  }\n}\n\nfunction buildInlines(icons, inline) {\n  return inlineUtils.buildInlines(icons, inline || \"\");\n}\n\nfunction inlineToString(inline) {\n  return inlineUtils.string(inline);\n}\n\nfunction getOverflowInline(textOverflow) {\n  if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\n    return INLINE_ELLIPSIS;\n  }\n\n  textOverflow = textOverflow.trim();\n\n  if (textOverflow.length === 1) {\n    return inlineUtils.of(textOverflow[0]);\n  }\n\n  return INLINE_ELLIPSIS;\n}\n\nfunction isAllowOverflow(textOverflow) {\n  return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\n}\n\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\n  const maxWidth = width - 3;\n  /*buffer*/\n\n  let lineWidth = 0;\n\n  for (let i = 0; i < inlines.length; i++) {\n    const inline = inlines[i];\n    const inlineWidth = (inline.width({\n      ctx\n    }) || 0) - 0;\n\n    if (lineWidth + inlineWidth > maxWidth) {\n      return {\n        index: i,\n        lineWidth,\n        remWidth: maxWidth - lineWidth\n      };\n    }\n\n    lineWidth += inlineWidth;\n  }\n\n  return null;\n}\n\nfunction isOverflowInlines(ctx, inlines, width) {\n  return !!getOverflowInlinesIndex(ctx, inlines, width);\n}\n\nfunction breakWidthInlines(ctx, inlines, width) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      beforeInlines: inlines,\n      overflow: false,\n      afterInlines: []\n    };\n  }\n\n  const {\n    index,\n    remWidth\n  } = indexData;\n  const inline = inlines[index];\n  const beforeInlines = inlines.slice(0, index);\n  const afterInlines = [];\n\n  if (inline.canBreak()) {\n    let {\n      before,\n      after\n    } = inline.breakWord(ctx, remWidth);\n\n    if (!before && !beforeInlines.length) {\n      ({\n        before,\n        after\n      } = inline.breakAll(ctx, remWidth));\n    }\n\n    if (!before && !beforeInlines.length) {\n      // Always return one char\n      ({\n        before,\n        after\n      } = inline.splitIndex(1));\n    }\n\n    if (before) {\n      beforeInlines.push(before);\n    }\n\n    if (after) {\n      afterInlines.push(after);\n    }\n\n    afterInlines.push(...inlines.slice(index + 1));\n  } else {\n    if (!beforeInlines.length) {\n      // Always return one char\n      beforeInlines.push(inline);\n    }\n\n    afterInlines.push(...inlines.slice(beforeInlines.length));\n  }\n\n  return {\n    beforeInlines,\n    overflow: true,\n    afterInlines\n  };\n}\n\nfunction truncateInlines(ctx, inlines, width, option) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      inlines,\n      overflow: false\n    };\n  }\n\n  const {\n    index,\n    lineWidth\n  } = indexData;\n  const inline = inlines[index];\n  const overflowInline = getOverflowInline(option);\n  const ellipsisWidth = overflowInline.width({\n    ctx\n  });\n  const remWidth = width - lineWidth - ellipsisWidth;\n  const result = inlines.slice(0, index);\n\n  if (inline.canBreak()) {\n    const {\n      before\n    } = inline.breakAll(ctx, remWidth);\n\n    if (before) {\n      result.push(before);\n    }\n  }\n\n  result.push(overflowInline);\n  return {\n    inlines: result,\n    overflow: true\n  };\n}\n\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  textOverflow,\n  icons,\n  trailingIcon\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n  let inlines = buildInlines(icons, inline);\n  const trailingIconInline = trailingIcon ? inlineUtils.iconOf(trailingIcon) : null;\n  let inlineDrawRect = drawRect;\n  let {\n    width\n  } = drawRect;\n  let trailingIconWidth = 0;\n\n  if (trailingIconInline) {\n    trailingIconWidth = trailingIconInline.width({\n      ctx\n    });\n    width -= trailingIconWidth;\n    inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\n  }\n\n  if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\n    const {\n      inlines: truncInlines,\n      overflow\n    } = truncateInlines(ctx, inlines, width, textOverflow);\n    inlines = truncInlines;\n    grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\n  } else {\n    grid.setCellOverflowText(col, row, false);\n  }\n\n  drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\n\n  if (trailingIconInline) {\n    // Draw trailing icon\n    let sumWidth = 0;\n    inlines.forEach(inline => {\n      sumWidth += inline.width({\n        ctx\n      });\n    });\n    const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n    const trailingIconRect = baseRect.copy();\n\n    if (width < sumWidth) {\n      trailingIconRect.left = trailingIconRect.right - trailingIconWidth - offset;\n    } else {\n      trailingIconRect.left += sumWidth;\n    }\n\n    trailingIconRect.right = baseRect.right;\n    drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\n  }\n} // eslint-disable-next-line complexity\n\n\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  lineHeight,\n  autoWrapText,\n  lineClamp,\n  textOverflow,\n  icons,\n  trailingIcon\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n\n  if (lineClamp === \"auto\") {\n    const rectHeight = drawRect.height - offset * 2 - 2;\n    /*offset added by Inline#draw*/\n\n    lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\n  }\n\n  const trailingIconInline = trailingIcon ? inlineUtils.iconOf(trailingIcon) : null;\n  let {\n    width\n  } = drawRect;\n  let trailingIconWidth = 0;\n\n  if (trailingIconInline) {\n    trailingIconWidth = trailingIconInline.width({\n      ctx\n    });\n    width -= trailingIconWidth;\n  }\n\n  let buildedMultiInlines;\n\n  if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\n    buildedMultiInlines = [];\n    const procLineClamp = lineClamp > 0 ? (inlines, hasNext) => {\n      if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\n        if (inlines.length === 0 && hasNext) {\n          buildedMultiInlines.push([getOverflowInline(textOverflow)]);\n          grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n        } else {\n          const {\n            inlines: truncInlines,\n            overflow\n          } = truncateInlines(ctx, inlines, width, textOverflow);\n          buildedMultiInlines.push(hasNext && !overflow ? truncInlines.concat([getOverflowInline(textOverflow)]) : truncInlines);\n\n          if (overflow || hasNext) {\n            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n          }\n        }\n\n        return false;\n      }\n\n      return true;\n    } : () => true;\n    const procLine = autoWrapText ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      while (inlines.length) {\n        if (!procLineClamp(inlines, hasNext)) {\n          return false;\n        }\n\n        const {\n          beforeInlines,\n          afterInlines\n        } = breakWidthInlines(ctx, inlines, width);\n        buildedMultiInlines.push(beforeInlines);\n        inlines = afterInlines;\n      }\n\n      return true;\n    } : isAllowOverflow(textOverflow) ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      const {\n        inlines: truncInlines,\n        overflow\n      } = truncateInlines(ctx, inlines, width, textOverflow);\n      buildedMultiInlines.push(truncInlines);\n\n      if (overflow) {\n        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n      }\n\n      return true;\n    } : (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      buildedMultiInlines.push(inlines);\n      return true;\n    };\n    grid.setCellOverflowText(col, row, false);\n\n    for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\n      const inline = multiInlines[lineRow];\n      const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\n\n      if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\n        break;\n      }\n    }\n  } else {\n    grid.setCellOverflowText(col, row, false);\n    buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\n  }\n\n  let paddingTop = 0;\n  let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\n\n  if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\n    const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop += pad;\n    paddingBottom -= pad;\n  } else if (ctx.textBaseline === \"bottom\" || ctx.textBaseline === \"alphabetic\" || ctx.textBaseline === \"ideographic\") {\n    const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop -= pad;\n    paddingBottom += pad;\n  }\n\n  buildedMultiInlines.forEach(buildedInline => {\n    drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\n    paddingTop += lineHeight;\n    paddingBottom -= lineHeight;\n  });\n\n  if (trailingIconInline) {\n    // Draw trailing icon\n    let maxWidth = 0;\n    buildedMultiInlines.forEach(buildedInline => {\n      let sumWidth = 0;\n      buildedInline.forEach(inline => {\n        sumWidth += inline.width({\n          ctx\n        });\n      });\n      maxWidth = Math.max(maxWidth, sumWidth);\n    });\n    const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n    const trailingIconRect = baseRect.copy();\n\n    if (width < maxWidth) {\n      trailingIconRect.left = trailingIconRect.right - trailingIconWidth - offset;\n    } else {\n      trailingIconRect.left += maxWidth;\n    }\n\n    trailingIconRect.right = baseRect.right;\n    drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\n  }\n}\n\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\n  const startColorRGB = (0, color_1.colorToRGB)(startColor);\n  const endColorRGB = (0, color_1.colorToRGB)(endColor);\n\n  const getRGB = colorName => {\n    const start = startColorRGB[colorName];\n    const end = endColorRGB[colorName];\n\n    if (elapsedTime >= 1) {\n      return end;\n    }\n\n    if (elapsedTime <= 0) {\n      return start;\n    }\n\n    const diff = start - end;\n    return Math.ceil(start - diff * elapsedTime);\n  };\n\n  return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\n}\n\nfunction drawCheckbox(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  uncheckBgColor = helper.theme.checkbox.uncheckBgColor,\n  checkBgColor = helper.theme.checkbox.checkBgColor,\n  borderColor = helper.theme.checkbox.borderColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureCheckbox(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  borderColor = helper.getColor(borderColor, col, row, ctx);\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    uncheckBgColor = check ? uncheckBgColor : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n    checkBgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : checkBgColor;\n  }\n\n  canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n    uncheckBgColor,\n    checkBgColor,\n    borderColor\n  });\n}\n\nfunction drawRadioButton(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  checkColor = helper.theme.radioButton.checkColor,\n  uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor,\n  checkBorderColor = helper.theme.radioButton.checkBorderColor,\n  uncheckBgColor = helper.theme.radioButton.uncheckBgColor,\n  checkBgColor = helper.theme.radioButton.checkBgColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureRadioButton(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  checkColor = helper.getColor(checkColor, col, row, ctx);\n  uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\n  checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  let borderColor = check ? checkBorderColor : uncheckBorderColor;\n  let bgColor = check ? checkBgColor : uncheckBgColor;\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    borderColor = check ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime) : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\n    bgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n  }\n\n  canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\n    checkColor,\n    borderColor,\n    bgColor\n  });\n}\n\nclass ThemeResolver {\n  constructor(grid) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this._messages = null;\n    this._indicators = null;\n    this._grid = grid;\n  }\n\n  getThemeColor(...name) {\n    return getThemeColor(this._grid, ...name);\n  }\n\n  get font() {\n    return getThemeColor(this._grid, \"font\");\n  }\n\n  get underlayBackgroundColor() {\n    return getThemeColor(this._grid, \"underlayBackgroundColor\");\n  } // color\n\n\n  get color() {\n    return getThemeColor(this._grid, \"color\");\n  }\n\n  get frozenRowsColor() {\n    return getThemeColor(this._grid, \"frozenRowsColor\");\n  } // background\n\n\n  get defaultBgColor() {\n    return getThemeColor(this._grid, \"defaultBgColor\");\n  }\n\n  get frozenRowsBgColor() {\n    return getThemeColor(this._grid, \"frozenRowsBgColor\");\n  }\n\n  get selectionBgColor() {\n    return getThemeColor(this._grid, \"selectionBgColor\");\n  }\n\n  get highlightBgColor() {\n    return getThemeColor(this._grid, \"highlightBgColor\");\n  } // border\n\n\n  get borderColor() {\n    return getThemeColor(this._grid, \"borderColor\");\n  }\n\n  get frozenRowsBorderColor() {\n    return getThemeColor(this._grid, \"frozenRowsBorderColor\");\n  }\n\n  get highlightBorderColor() {\n    return getThemeColor(this._grid, \"highlightBorderColor\");\n  }\n\n  get checkbox() {\n    const grid = this._grid;\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getCheckboxProp(\"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getCheckboxProp(\"checkBgColor\");\n      },\n\n      get borderColor() {\n        return getCheckboxProp(\"borderColor\");\n      }\n\n    });\n\n    function getCheckboxProp(prop) {\n      return getThemeColor(grid, \"checkbox\", prop);\n    }\n  }\n\n  get radioButton() {\n    const grid = this._grid;\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getRadioButtonProp(\"checkColor\");\n      },\n\n      get uncheckBorderColor() {\n        return getRadioButtonProp(\"uncheckBorderColor\");\n      },\n\n      get checkBorderColor() {\n        return getRadioButtonProp(\"checkBorderColor\");\n      },\n\n      get uncheckBgColor() {\n        return getRadioButtonProp(\"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getRadioButtonProp(\"checkBgColor\");\n      }\n\n    });\n\n    function getRadioButtonProp(prop) {\n      return getThemeColor(grid, \"radioButton\", prop);\n    }\n  }\n\n  get button() {\n    const grid = this._grid;\n    return this._button || (this._button = {\n      get color() {\n        return getButtonProp(\"color\");\n      },\n\n      get bgColor() {\n        return getButtonProp(\"bgColor\");\n      }\n\n    });\n\n    function getButtonProp(prop) {\n      return getThemeColor(grid, \"button\", prop);\n    }\n  }\n\n  get header() {\n    const grid = this._grid;\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getThemeColor(grid, \"header\", \"sortArrowColor\");\n      }\n\n    });\n  }\n\n  get messages() {\n    const grid = this._grid;\n    return this._messages || (this._messages = {\n      get infoBgColor() {\n        return getMessageProp(\"infoBgColor\");\n      },\n\n      get errorBgColor() {\n        return getMessageProp(\"errorBgColor\");\n      },\n\n      get warnBgColor() {\n        return getMessageProp(\"warnBgColor\");\n      },\n\n      get boxWidth() {\n        return getMessageProp(\"boxWidth\");\n      },\n\n      get markHeight() {\n        return getMessageProp(\"markHeight\");\n      }\n\n    });\n\n    function getMessageProp(prop) {\n      return getThemeColor(grid, \"messages\", prop);\n    }\n  }\n\n  get indicators() {\n    const grid = this._grid;\n    return this._indicators || (this._indicators = {\n      get topLeftColor() {\n        return getIndicatorsProp(\"topLeftColor\");\n      },\n\n      get topLeftSize() {\n        return getIndicatorsProp(\"topLeftSize\");\n      },\n\n      get topRightColor() {\n        return getIndicatorsProp(\"topRightColor\");\n      },\n\n      get topRightSize() {\n        return getIndicatorsProp(\"topRightSize\");\n      },\n\n      get bottomRightColor() {\n        return getIndicatorsProp(\"bottomRightColor\");\n      },\n\n      get bottomRightSize() {\n        return getIndicatorsProp(\"bottomRightSize\");\n      },\n\n      get bottomLeftColor() {\n        return getIndicatorsProp(\"bottomLeftColor\");\n      },\n\n      get bottomLeftSize() {\n        return getIndicatorsProp(\"bottomLeftSize\");\n      }\n\n    });\n\n    function getIndicatorsProp(prop) {\n      return getThemeColor(grid, \"indicators\", prop);\n    }\n  }\n\n}\n\nfunction strokeRect(ctx, color, left, top, width, height) {\n  if (!Array.isArray(color)) {\n    if (color) {\n      ctx.strokeStyle = color;\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    const borderColors = toBoxArray(color);\n    canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n  }\n}\n\nclass GridCanvasHelper {\n  constructor(grid) {\n    this._grid = grid;\n    this._theme = new ThemeResolver(grid);\n  }\n\n  createCalculator(context, font) {\n    return {\n      calcWidth(width) {\n        return calc.toPx(width, {\n          get full() {\n            const rect = context.getRect();\n            return rect.width;\n          },\n\n          get em() {\n            return (0, canvases_1.getFontSize)(context.getContext(), font).width;\n          }\n\n        });\n      },\n\n      calcHeight(height) {\n        return calc.toPx(height, {\n          get full() {\n            const rect = context.getRect();\n            return rect.height;\n          },\n\n          get em() {\n            return (0, canvases_1.getFontSize)(context.getContext(), font).height;\n          }\n\n        });\n      }\n\n    };\n  }\n\n  getColor(color, col, row, ctx) {\n    return getColor(color, col, row, this._grid, ctx);\n  }\n\n  toBoxArray(obj) {\n    return toBoxArray(obj);\n  }\n\n  toBoxPixelArray(value, context, font) {\n    if (typeof value === \"string\" || Array.isArray(value)) {\n      const calculator = this.createCalculator(context, font);\n      const box = toBoxArray(value);\n      return [calculator.calcHeight(box[0]), calculator.calcWidth(box[1]), calculator.calcHeight(box[2]), calculator.calcWidth(box[3])];\n    }\n\n    return toBoxArray(value);\n  }\n\n  get theme() {\n    return this._theme;\n  }\n\n  drawWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height); //clip\n\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  drawBorderWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const rect = context.getRect();\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      //clip\n      ctx.beginPath();\n      let clipLeft = drawRect.left;\n      let clipWidth = drawRect.width;\n\n      if (drawRect.left === rect.left) {\n        clipLeft += -1;\n        clipWidth += 1;\n      }\n\n      let clipTop = drawRect.top;\n      let clipHeight = drawRect.height;\n\n      if (drawRect.top === rect.top) {\n        clipTop += -1;\n        clipHeight += 1;\n      }\n\n      ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  text(text, context, {\n    padding,\n    offset = TEXT_OFFSET,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    textOverflow = \"clip\",\n    icons,\n    trailingIcon\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      _inlineRect(this._grid, ctx, text, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons,\n        trailingIcon\n      });\n    });\n  }\n\n  multilineText(multilines, context, {\n    padding,\n    offset = TEXT_OFFSET,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    lineHeight = \"1em\",\n    autoWrapText = false,\n    lineClamp = 0,\n    textOverflow = \"clip\",\n    icons,\n    trailingIcon\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      const calculator = this.createCalculator(context, font);\n      lineHeight = calculator.calcHeight(lineHeight);\n\n      _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons,\n        trailingIcon\n      });\n    });\n  }\n\n  fillText(text, x, y, context, {\n    color,\n    textAlign = \"left\",\n    textBaseline = \"top\",\n    font\n  } = {}) {\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\n      ctx.textAlign = textAlign;\n      ctx.textBaseline = textBaseline;\n      ctx.font = font || ctx.font;\n      ctx.fillText(text, x, y);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillCell(context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    });\n  }\n\n  fillCellWithState(context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillCell(context, option);\n  }\n\n  fillRect(rect, context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillRectWithState(rect, context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillRect(rect, context, option);\n  }\n\n  getFillColorState(context, option = {}) {\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\n      return this.theme.selectionBgColor;\n    }\n\n    if (option.fillColor) {\n      return option.fillColor;\n    }\n\n    if ((0, utils_1.cellEquals)(sel.select, context)) {\n      return this.theme.highlightBgColor;\n    }\n\n    const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      return this.theme.frozenRowsBgColor;\n    }\n\n    return this.theme.defaultBgColor;\n  }\n\n  border(context, {\n    borderColor = this.theme.borderColor,\n    lineWidth = 1\n  } = {}) {\n    const rect = context.getRect();\n    this.drawBorderWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      const borderColors = getColor(borderColor, col, row, this._grid, ctx);\n\n      if (lineWidth === 1) {\n        ctx.lineWidth = 1;\n        strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n      } else if (lineWidth === 2) {\n        ctx.lineWidth = 2;\n        strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n      } else {\n        ctx.lineWidth = lineWidth;\n        const startOffset = lineWidth / 2 - 1;\n        strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n      }\n    });\n  } // Unused in main\n\n\n  borderWithState(context, option = {}) {\n    const rect = context.getRect();\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context; //\n\n    if ((0, utils_1.cellEquals)(sel.select, context)) {\n      option.borderColor = this.theme.highlightBorderColor;\n      option.lineWidth = 2;\n      this.border(context, option);\n    } else {\n      // header color\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n        option.borderColor = this.theme.frozenRowsBorderColor;\n      }\n\n      option.lineWidth = 1;\n      this.border(context, option); //\n\n      const sel = this._grid.selection.select;\n\n      if (sel.col + 1 === col && sel.row === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        });\n      } else if (sel.col === col && sel.row + 1 === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        });\n      }\n    }\n  }\n\n  buildCheckBoxInline(check, context, option = {}) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    const ctx = context.getContext();\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\n    return new InlineDrawer_1.InlineDrawer({\n      draw,\n      width: boxWidth + 3,\n      height: boxWidth + 1,\n      color: undefined\n    });\n\n    function draw({\n      ctx,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    }) {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, rect, col, row, check, self, option, {\n        offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\n        padding: {\n          left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\n          right: offsetRight,\n          top: offsetTop,\n          bottom: offsetBottom\n        }\n      });\n    }\n  }\n\n  checkbox(check, context, {\n    animElapsedTime,\n    offset = CHECKBOX_OFFSET,\n    uncheckBgColor,\n    checkBgColor,\n    borderColor,\n    textAlign,\n    textBaseline\n  } = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, context.getRect(), col, row, check, this, {\n        animElapsedTime,\n        uncheckBgColor,\n        checkBgColor,\n        borderColor,\n        textAlign,\n        textBaseline\n      }, {\n        offset,\n        padding: {\n          left: CHECKBOX_OFFSET - TEXT_OFFSET\n        }\n      });\n    });\n  }\n\n  radioButton(check, context, {\n    animElapsedTime,\n    offset = CHECKBOX_OFFSET,\n    checkColor,\n    uncheckBorderColor,\n    checkBorderColor,\n    uncheckBgColor,\n    checkBgColor,\n    textAlign,\n    textBaseline\n  } = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawRadioButton(ctx, context.getRect(), col, row, check, this, {\n        animElapsedTime,\n        checkColor,\n        uncheckBorderColor,\n        checkBorderColor,\n        uncheckBgColor,\n        checkBgColor,\n        textAlign,\n        textBaseline\n      }, {\n        offset,\n        padding: {\n          left: CHECKBOX_OFFSET - TEXT_OFFSET\n        }\n      });\n    });\n  }\n\n  button(caption, context, {\n    bgColor = this.theme.button.bgColor,\n    padding,\n    offset = TEXT_OFFSET,\n    color = this.theme.button.color,\n    textAlign = \"center\",\n    textBaseline = \"middle\",\n    shadow,\n    font,\n    textOverflow = \"clip\",\n    icons\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      const {\n        col,\n        row\n      } = context;\n      const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\n      const left = rect.left + paddingNums[3];\n      const top = rect.top + paddingNums[0];\n      const width = rect.width - paddingNums[1] - paddingNums[3];\n      const height = rect.height - paddingNums[0] - paddingNums[2];\n      bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\n      canvashelper.drawButton(ctx, left, top, width, height, {\n        bgColor,\n        radius: rect.height / 8,\n        // offset,\n        shadow\n      });\n\n      _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n  testFontLoad(font, value, context) {\n    return testFontLoad(font, value, context, this._grid);\n  }\n\n}\n\nexports.GridCanvasHelper = GridCanvasHelper;\n\n/***/ }),\n\n/***/ \"./ListGrid.js\":\n/*!*********************!*\\\n  !*** ./ListGrid.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ListGrid = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ./internal/icons */ \"./internal/icons.js\"));\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nconst data_1 = __webpack_require__(/*! ./data */ \"./data.js\");\n\nconst layout_map_1 = __webpack_require__(/*! ./list-grid/layout-map */ \"./list-grid/layout-map/index.js\");\n\nconst MessageHandler_1 = __webpack_require__(/*! ./columns/message/MessageHandler */ \"./columns/message/MessageHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst style_1 = __webpack_require__(/*! ./columns/style */ \"./columns/style.js\");\n\nconst DrawGrid_1 = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\nconst GridCanvasHelper_1 = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\nconst style_2 = __webpack_require__(/*! ./header/style */ \"./header/style.js\");\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ./list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst Rect_1 = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\nconst TooltipHandler_1 = __webpack_require__(/*! ./tooltip/TooltipHandler */ \"./tooltip/TooltipHandler.js\"); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst paste_utils_1 = __webpack_require__(/*! ./internal/paste-utils */ \"./internal/paste-utils.js\");\n/** @private */\n\n\nconst _ = (0, symbolManager_1.getProtectedSymbol)(); //private methods\n\n/** @private */\n\n\nfunction _getCellRange(grid, col, row) {\n  return grid[_].layoutMap.getCellRange(col, row);\n}\n/** @private */\n\n\nfunction _updateRect(grid, col, row, context) {\n  context.setRectFilter(rect => {\n    let {\n      left,\n      right,\n      top,\n      bottom\n    } = rect;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = _getCellRange(grid, col, row);\n\n    for (let c = col - 1; c >= startCol; c--) {\n      left -= grid.getColWidth(c);\n    }\n\n    for (let c = col + 1; c <= endCol; c++) {\n      right += grid.getColWidth(c);\n    }\n\n    for (let r = row - 1; r >= startRow; r--) {\n      top -= grid.getRowHeight(r);\n    }\n\n    for (let r = row + 1; r <= endRow; r++) {\n      bottom += grid.getRowHeight(r);\n    }\n\n    return Rect_1.Rect.bounds(left, top, right, bottom);\n  });\n}\n/** @private */\n\n\nfunction _getCellValue(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    const {\n      caption\n    } = grid[_].layoutMap.getHeader(col, row);\n\n    return typeof caption === \"function\" ? caption() : caption;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    return _getField(grid, field, row);\n  }\n}\n/** @private */\n\n\nfunction _setCellValue(grid, col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    // nop\n    return false;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (field == null) {\n      return false;\n    }\n\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.setField(index, field, value);\n  }\n}\n/** @private */\n\n\nfunction _getCellMessage(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const {\n      message\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (!message) {\n      return null;\n    }\n\n    if (!Array.isArray(message)) {\n      return _getField(grid, message, row);\n    }\n\n    const promises = [];\n\n    for (let index = 0; index < message.length; index++) {\n      const msg = _getField(grid, message[index], row);\n\n      if ((0, utils_1.isPromise)(msg)) {\n        promises.push(msg);\n      } else if ((0, MessageHandler_1.hasMessage)(msg)) {\n        return msg;\n      }\n    }\n\n    if (!promises.length) {\n      return null;\n    }\n\n    return new Promise((resolve, reject) => {\n      promises.forEach(p => {\n        p.then(msg => {\n          if ((0, MessageHandler_1.hasMessage)(msg)) {\n            resolve(msg);\n          }\n        }, reject);\n      });\n    });\n  }\n}\n\nfunction _getCellIcon0(grid, icon, row) {\n  if (Array.isArray(icon)) {\n    return icon.map(i => _getCellIcon0(grid, i, row));\n  }\n\n  if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\n    return _getField(grid, icon, row);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  const retIcon = {}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  const iconOpt = icon;\n  icons.iconPropKeys.forEach(k => {\n    if (iconOpt[k]) {\n      const f = _getField(grid, iconOpt[k], row);\n\n      if (f != null) {\n        retIcon[k] = f;\n      } else {\n        if (!_hasField(grid, iconOpt[k], row)) {\n          retIcon[k] = iconOpt[k];\n        }\n      }\n    }\n  });\n  return retIcon;\n}\n/** @private */\n\n\nfunction _getCellIcon(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    const {\n      headerIcon\n    } = grid[_].layoutMap.getHeader(col, row);\n\n    if (headerIcon == null) {\n      return null;\n    }\n\n    return headerIcon;\n  } else {\n    const {\n      icon\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (icon == null) {\n      return null;\n    }\n\n    return _getCellIcon0(grid, icon, row);\n  }\n}\n/** @private */\n\n\nfunction _getField(grid, field, row) {\n  if (field == null) {\n    return null;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.getField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _hasField(grid, field, row) {\n  if (field == null) {\n    return false;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return false;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.hasField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _onDrawValue(grid, cellValue, context, {\n  col,\n  row\n}, style, draw) {\n  const helper = grid[_].gridCanvasHelper;\n\n  const drawCellBg = ({\n    bgColor\n  } = {}) => {\n    const fillOpt = {\n      fillColor: bgColor\n    }; //cell\n\n    helper.fillCellWithState(context, fillOpt);\n  };\n\n  const drawCellBorder = () => {\n    if (context.col === grid.frozenColCount - 1) {\n      //\n      const rect = context.getRect();\n      helper.drawWithClip(context, ctx => {\n        const borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor : helper.theme.frozenRowsBorderColor;\n        const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.right - 2.5, rect.top);\n          ctx.lineTo(rect.right - 2.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    }\n\n    _borderWithState(grid, helper, context);\n  };\n\n  const drawCellBase = ({\n    bgColor\n  } = {}) => {\n    drawCellBg({\n      bgColor\n    });\n    drawCellBorder();\n  };\n\n  const info = {\n    getRecord: () => grid.getRowRecord(row),\n    getIcon: () => _getCellIcon(grid, col, row),\n    getMessage: () => _getCellMessage(grid, col, row),\n    messageHandler: grid[_].messageHandler,\n    style,\n    drawCellBase,\n    drawCellBg,\n    drawCellBorder\n  };\n  return draw(cellValue, info, context, grid);\n}\n/** @private */\n\n\nfunction _borderWithState(grid, helper, context) {\n  var _b, _c, _d, _e, _f, _g, _h;\n\n  const {\n    col,\n    row\n  } = context;\n  const sel = grid.selection.select;\n  const {\n    layoutMap\n  } = grid[_];\n  const rect = context.getRect();\n  const option = {};\n  const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\n  const selId = layoutMap.getCellId(sel.col, sel.row);\n\n  function isSelectCell(col, row) {\n    if (col === sel.col && row === sel.row) {\n      return true;\n    }\n\n    return selId != null && layoutMap.getCellId(col, row) === selId && layoutMap.getRecordIndexByRow(row) === selRecordIndex;\n  } //\n\n\n  if (isSelectCell(col, row)) {\n    option.borderColor = helper.theme.highlightBorderColor;\n    option.lineWidth = 2;\n    helper.border(context, option);\n  } else {\n    option.lineWidth = 1; // header color\n\n    const isFrozenCell = grid.isFrozenCell(col, row);\n\n    if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n      option.borderColor = helper.theme.frozenRowsBorderColor;\n    }\n\n    helper.border(context, option);\n\n    if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\n      let borderColorCell = \"\";\n\n      if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\n        borderColorCell = (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\n      }\n\n      if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" && ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\n        borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\n      }\n\n      if (borderColorCell) {\n        option.borderColor = borderColorCell;\n        helper.border(context, option);\n      }\n    } //\n\n\n    if (col > 0 && isSelectCell(col - 1, row)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    } else if (row > 0 && isSelectCell(col, row - 1)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[0]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0];\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        }\n      });\n    }\n  }\n}\n/** @private */\n\n\nfunction _refreshHeader(grid) {\n  var _b;\n\n  const protectedSpace = grid[_];\n\n  if (protectedSpace.headerEvents) {\n    protectedSpace.headerEvents.forEach(id => grid.unlisten(id));\n  }\n\n  const headerEvents = grid[_].headerEvents = [];\n  headerEvents.forEach(id => grid.unlisten(id));\n  let layoutMap;\n\n  if (protectedSpace.layout && (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\n  } else {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\n  }\n\n  layoutMap.headerObjects.forEach(cell => {\n    const ids = cell.headerType.bindGridEvent(grid, cell.id);\n    headerEvents.push(...ids);\n\n    if (cell.style) {\n      if (cell.style instanceof style_2.BaseStyle) {\n        const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n\n    if (cell.action) {\n      const ids = cell.action.bindGridEvent(grid, cell.id);\n      headerEvents.push(...ids);\n    }\n  });\n  layoutMap.columnObjects.forEach(col => {\n    if (col.action) {\n      const ids = col.action.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.columnType) {\n      const ids = col.columnType.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.style) {\n      if (col.style instanceof style_1.BaseStyle) {\n        const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n  });\n\n  for (let col = 0; col < layoutMap.columnWidths.length; col++) {\n    const column = layoutMap.columnWidths[col];\n    const {\n      width,\n      minWidth,\n      maxWidth\n    } = column;\n\n    if (width && (typeof width === \"string\" || width > 0)) {\n      grid.setColWidth(col, width);\n    } else {\n      grid.setColWidth(col, null);\n    }\n\n    if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\n      grid.setMinColWidth(col, minWidth);\n    } else {\n      grid.setMinColWidth(col, null);\n    }\n\n    if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\n      grid.setMaxColWidth(col, maxWidth);\n    } else {\n      grid.setMaxColWidth(col, null);\n    }\n  }\n\n  const {\n    headerRowHeight\n  } = grid[_];\n\n  for (let row = 0; row < layoutMap.headerRowCount; row++) {\n    const height = Array.isArray(headerRowHeight) ? headerRowHeight[row] : headerRowHeight;\n\n    if (height && height > 0) {\n      grid.setRowHeight(row, height);\n    } else {\n      grid.setRowHeight(row, null);\n    }\n  }\n\n  grid.colCount = layoutMap.colCount;\n\n  _refreshRowCount(grid);\n\n  grid.frozenRowCount = layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _refreshRowCount(grid) {\n  const {\n    layoutMap\n  } = grid[_];\n  grid.rowCount = grid[_].dataSource.length * layoutMap.bodyRowCount + layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _tryWithUpdateDataSource(grid, fn) {\n  const {\n    dataSourceEventIds\n  } = grid[_];\n\n  if (dataSourceEventIds) {\n    dataSourceEventIds.forEach(id => grid[_].handler.off(id));\n  }\n\n  fn(grid);\n  grid[_].dataSourceEventIds = [grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n    _refreshRowCount(grid);\n\n    grid.invalidate();\n  }), grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n    grid.invalidate();\n  })];\n}\n/** @private */\n\n\nfunction _setRecords(grid, records = []) {\n  _tryWithUpdateDataSource(grid, () => {\n    grid[_].records = records;\n    const newDataSource = grid[_].dataSource = data_1.CachedDataSource.ofArray(records);\n    grid.addDisposable(newDataSource);\n  });\n}\n/** @private */\n\n\nfunction _setDataSource(grid, dataSource) {\n  _tryWithUpdateDataSource(grid, () => {\n    if (dataSource) {\n      if (dataSource instanceof data_1.DataSource) {\n        grid[_].dataSource = dataSource;\n      } else {\n        const newDataSource = grid[_].dataSource = new data_1.CachedDataSource(dataSource);\n        grid.addDisposable(newDataSource);\n      }\n    } else {\n      grid[_].dataSource = data_1.DataSource.EMPTY;\n    }\n\n    grid[_].records = null;\n  });\n}\n/** @private */\n\n\nfunction _getRecordIndexByRow(grid, row) {\n  const {\n    layoutMap\n  } = grid[_];\n  return layoutMap.getRecordIndexByRow(row);\n}\n/** @private */\n\n\nfunction _onRangePaste(text, test = () => true) {\n  var _b;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\n    trimOnPaste: this.trimOnPaste\n  });\n  const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\n  const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let rejectedDetail = [];\n\n  const addRejectedDetail = (cell, record, define, pasteValue) => {\n    rejectedDetail.push({\n      col: cell.col,\n      row: cell.row,\n      record,\n      define,\n      pasteValue\n    });\n  };\n\n  let timeout = null;\n\n  const processRejected = () => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      if (rejectedDetail.length > 0) {\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\n          detail: rejectedDetail\n        });\n        rejectedDetail = [];\n      }\n    }, 100);\n  };\n\n  let reject = addRejectedDetail;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n  let valuesRow = 0;\n\n  for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\n    let valuesCol = 0;\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const {\n        action,\n        id,\n        define\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        const cellValue = values.getCellValue(valuesCol, valuesRow);\n        (0, utils_1.then)(this.getRowRecord(row), record => {\n          (0, utils_1.then)(_getCellValue(this, col, row), oldValue => {\n            if (test({\n              grid: this,\n              record: record,\n              col,\n              row,\n              value: cellValue,\n              oldValue\n            })) {\n              action.onPasteCellRangeBox(this, {\n                col,\n                row\n              }, cellValue, {\n                reject() {\n                  reject({\n                    col,\n                    row\n                  }, record, define, cellValue);\n                }\n\n              });\n            }\n          });\n        });\n      }\n\n      valuesCol++;\n\n      if (valuesCol >= values.colCount) {\n        valuesCol = 0;\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n\n    valuesRow++;\n\n    if (valuesRow >= values.rowCount) {\n      valuesRow = 0;\n    }\n  }\n\n  const newEnd = {\n    col: start.col + pasteColCount - 1,\n    row: start.row + pasteRowCount - 1\n  };\n  this.selection.range = {\n    start,\n    end: newEnd\n  };\n  this.invalidateCellRange(this.selection.range);\n  processRejected();\n\n  reject = (cell, record, define, pasteValue) => {\n    addRejectedDetail(cell, record, define, pasteValue);\n    processRejected();\n  };\n}\n/** @private */\n\n\nfunction _onRangeDelete() {\n  var _b;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\n  const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n\n  for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const {\n        action,\n        id\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        (0, utils_1.then)(this.getRowRecord(row), _record => {\n          (0, utils_1.then)(_getCellValue(this, col, row), _oldValue => {\n            action.onDeleteCellRangeBox(this, {\n              col,\n              row\n            });\n          });\n        });\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n  }\n\n  this.invalidateCellRange(selectionRange);\n}\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\n\n\nclass ListGrid extends DrawGrid_1.DrawGrid {\n  static get EVENT_TYPE() {\n    return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\n  }\n  /**\r\n   * constructor\r\n   *\r\n   * @constructor\r\n   * @param options Constructor options\r\n   */\n\n\n  constructor(options = {}) {\n    var _b;\n\n    super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\n    this[_a] = this[_];\n    this.disabled = false;\n    this.readOnly = false;\n    const protectedSpace = this[_];\n    protectedSpace.header = options.header || [];\n    protectedSpace.layout = options.layout || [];\n    protectedSpace.headerRowHeight = options.headerRowHeight || [];\n\n    if (options.dataSource) {\n      _setDataSource(this, options.dataSource);\n    } else {\n      _setRecords(this, options.records);\n    }\n\n    protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\n\n    _refreshHeader(this);\n\n    protectedSpace.sortState = {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\n    protectedSpace.theme = themes.of(options.theme);\n    protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\n    protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\n    this.invalidate();\n    protectedSpace.handler.on(window, \"resize\", () => {\n      this.updateSize();\n      this.updateScroll();\n      this.invalidate();\n    });\n  }\n  /**\r\n   * Dispose the grid instance.\r\n   * @returns {void}\r\n   */\n\n\n  dispose() {\n    const protectedSpace = this[_];\n    protectedSpace.messageHandler.dispose();\n    protectedSpace.tooltipHandler.dispose();\n    super.dispose();\n  }\n  /**\r\n   * Gets the define of the header.\r\n   */\n\n\n  get header() {\n    return this[_].header;\n  }\n  /**\r\n   * Sets the define of the header with the given data.\r\n   * <pre>\r\n   * column options\r\n   * -----\r\n   * caption: header caption\r\n   * field: field name\r\n   * width: column width\r\n   * minWidth: column min width\r\n   * maxWidth: column max width\r\n   * icon: icon definition\r\n   * message: message key name\r\n   * columnType: column type\r\n   * action: column action\r\n   * style: column style\r\n   * headerType: header type\r\n   * headerStyle: header style\r\n   * headerAction: header action\r\n   * headerField: header field name\r\n   * headerIcon: header icon definition\r\n   * sort: define sort setting\r\n   * -----\r\n   *\r\n   * multiline header\r\n   * -----\r\n   * caption: header caption\r\n   * columns: columns define\r\n   * -----\r\n   * </pre>\r\n   */\n\n\n  set header(header) {\n    this[_].header = header;\n\n    _refreshHeader(this);\n  }\n  /**\r\n   * Gets the define of the layout.\r\n   */\n\n\n  get layout() {\n    return this[_].layout;\n  }\n  /**\r\n   * Sets the define of the layout with the given data.\r\n   */\n\n\n  set layout(layout) {\n    this[_].layout = layout;\n\n    _refreshHeader(this);\n  }\n  /**\r\n   * Get the row count per record\r\n   */\n\n\n  get recordRowCount() {\n    return this[_].layoutMap.bodyRowCount;\n  }\n  /**\r\n   * Get the records.\r\n   */\n\n\n  get records() {\n    return this[_].records || null;\n  }\n  /**\r\n   * Set the records from given\r\n   */\n\n\n  set records(records) {\n    if (records == null) {\n      return;\n    }\n\n    _setRecords(this, records);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\r\n   * Get the data source.\r\n   */\n\n\n  get dataSource() {\n    return this[_].dataSource;\n  }\n  /**\r\n   * Set the data source from given\r\n   */\n\n\n  set dataSource(dataSource) {\n    _setDataSource(this, dataSource);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\r\n   * Get the theme.\r\n   */\n\n\n  get theme() {\n    return this[_].theme;\n  }\n  /**\r\n   * Set the theme from given\r\n   */\n\n\n  set theme(theme) {\n    this[_].theme = themes.of(theme);\n    this.invalidate();\n  }\n  /**\r\n   * If set to true to allow pasting of ranges.\r\n   */\n\n\n  get allowRangePaste() {\n    return this[_].allowRangePaste;\n  }\n\n  set allowRangePaste(allowRangePaste) {\n    this[_].allowRangePaste = allowRangePaste;\n  }\n  /**\r\n   * Get the font definition as a string.\r\n   * @override\r\n   */\n\n\n  get font() {\n    return super.font || this[_].gridCanvasHelper.theme.font;\n  }\n  /**\r\n   * Set the font definition with the given string.\r\n   * @override\r\n   */\n\n\n  set font(font) {\n    super.font = font;\n  }\n  /**\r\n   * Get the background color of the underlay.\r\n   * @override\r\n   */\n\n\n  get underlayBackgroundColor() {\n    return super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\n  }\n  /**\r\n   * Set the background color of the underlay.\r\n   * @override\r\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    super.underlayBackgroundColor = underlayBackgroundColor;\n  }\n  /**\r\n   * Get the sort state.\r\n   */\n\n\n  get sortState() {\n    return this[_].sortState;\n  }\n  /**\r\n   * Sets the sort state.\r\n   * If `null` to set, the sort state is initialized.\r\n   */\n\n\n  set sortState(sortState) {\n    const oldState = this.sortState;\n    let oldField;\n\n    if (oldState.col >= 0 && oldState.row >= 0) {\n      oldField = this.getHeaderField(oldState.col, oldState.row);\n    }\n\n    const newState = this[_].sortState = sortState != null ? sortState : {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    let newField;\n\n    if (newState.col >= 0 && newState.row >= 0) {\n      newField = this.getHeaderField(newState.col, newState.row);\n    } // bind header value\n\n\n    if (oldField != null && oldField !== newField) {\n      this.setHeaderValue(oldState.col, oldState.row, undefined);\n    }\n\n    if (newField != null) {\n      this.setHeaderValue(newState.col, newState.row, newState.order);\n    }\n  }\n  /**\r\n   * Get the header values.\r\n   */\n\n\n  get headerValues() {\n    return this[_].headerValues || (this[_].headerValues = new Map());\n  }\n  /**\r\n   * Sets the header values.\r\n   */\n\n\n  set headerValues(headerValues) {\n    this[_].headerValues = headerValues || new Map();\n  }\n  /**\r\n   * Get the field of the given column index.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index.\r\n   * @return {*} The field object.\r\n   */\n\n\n  getField(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\n  }\n  /**\r\n   * Get the column define of the given column index.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index.\r\n   * @return {*} The column define object.\r\n   */\n\n\n  getColumnDefine(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\n  }\n\n  getColumnType(col, row) {\n    return this[_].layoutMap.getBody(col, row).columnType;\n  }\n\n  getColumnAction(col, row) {\n    return this[_].layoutMap.getBody(col, row).action;\n  }\n  /**\r\n   * Get the header field of the given header cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The header row index.\r\n   * @return {*} The field object.\r\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderField(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.field;\n  }\n  /**\r\n   * Get the header define of the given header cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The header row index.\r\n   * @return {*} The header define object.\r\n   */\n\n\n  getHeaderDefine(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.define;\n  }\n  /**\r\n   * Get the record of the given row index.\r\n   * @param  {number} row The row index.\r\n   * @return {object} The record.\r\n   */\n\n\n  getRowRecord(row) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return undefined;\n    } else {\n      return this[_].dataSource.get(_getRecordIndexByRow(this, row));\n    }\n  }\n  /**\r\n   * Get the record index of the given row index.\r\n   * @param  {number} row The row index.\r\n   */\n\n\n  getRecordIndexByRow(row) {\n    return _getRecordIndexByRow(this, row);\n  }\n  /**\r\n   * Gets the row index starting at the given record index.\r\n   * @param  {number} index The record index.\r\n   */\n\n\n  getRecordStartRowByRecordIndex(index) {\n    return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\n  }\n  /**\r\n   * Get the column index of the given field.\r\n   * @param  {*} field The field.\r\n   * @return {number} The column index.\r\n   * @deprecated use `getCellRangeByField` instead\r\n   */\n\n\n  getColumnIndexByField(field) {\n    var _b;\n\n    const range = this.getCellRangeByField(field, 0);\n    return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\n  }\n  /**\r\n   * Get the column index of the given field.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {number} The column index.\r\n   */\n\n\n  getCellRangeByField(field, index) {\n    const {\n      layoutMap\n    } = this[_];\n    const colObj = layoutMap.columnObjects.find(col => col.field === field);\n\n    if (colObj) {\n      const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\n      const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\n      return {\n        start: {\n          col: layoutRange.start.col,\n          row: startRow + layoutRange.start.row\n        },\n        end: {\n          col: layoutRange.end.col,\n          row: startRow + layoutRange.end.row\n        }\n      };\n    }\n\n    return null;\n  }\n  /**\r\n   * Focus the cell.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {void}\r\n   */\n\n\n  focusGridCell(field, index) {\n    var _b;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = this.selection.range;\n    const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\n\n    if (newFocus == null) {\n      return;\n    }\n\n    this.focusCell(newFocus.col, newFocus.row);\n    this.selection.select = newFocus;\n    this.invalidateGridRect(startCol, startRow, endCol, endRow);\n    this.invalidateCell(newFocus.col, newFocus.row);\n  }\n  /**\r\n   * Scroll to where cell is visible.\r\n   * @param  {*} field The field.\r\n   * @param  {number} index The record index\r\n   * @return {void}\r\n   */\n\n\n  makeVisibleGridCell(field, index) {\n    var _b, _c, _d;\n\n    const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\n    this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\n  }\n\n  getGridCanvasHelper() {\n    return this[_].gridCanvasHelper;\n  }\n  /**\r\n   * Get cell range information for a given cell.\r\n   * @param {number} col column index of the cell\r\n   * @param {number} row row index of the cell\r\n   * @returns {object} cell range info\r\n   */\n\n\n  getCellRange(col, row) {\n    return _getCellRange(this, col, row);\n  }\n  /**\r\n   * Get header range information for a given cell.\r\n   * @param {number} col column index of the cell\r\n   * @param {number} row row index of the cell\r\n   * @returns {object} cell range info\r\n   * @deprecated use `getCellRange` instead\r\n   */\n\n\n  getHeaderCellRange(col, row) {\n    return this.getCellRange(col, row);\n  }\n\n  getCopyCellValue(col, row, range) {\n    const cellRange = _getCellRange(this, col, row);\n\n    const startCol = range ? Math.max(range.start.col, cellRange.start.col) : cellRange.start.col;\n    const startRow = range ? Math.max(range.start.row, cellRange.start.row) : cellRange.start.row;\n\n    if (startCol !== col || startRow !== row) {\n      return \"\";\n    }\n\n    const value = _getCellValue(this, col, row);\n\n    if (row < this[_].layoutMap.headerRowCount) {\n      const headerData = this[_].layoutMap.getHeader(col, row);\n\n      return headerData.headerType.getCopyCellValue(value, this, {\n        col,\n        row\n      });\n    }\n\n    const columnData = this[_].layoutMap.getBody(col, row);\n\n    return columnData.columnType.getCopyCellValue(value, this, {\n      col,\n      row\n    });\n  }\n\n  onDrawCell(col, row, context) {\n    const {\n      layoutMap\n    } = this[_];\n    let draw;\n    let style;\n\n    if (row < layoutMap.headerRowCount) {\n      const hd = layoutMap.getHeader(col, row);\n      draw = hd.headerType.onDrawCell;\n      ({\n        style\n      } = hd);\n\n      _updateRect(this, col, row, context);\n    } else {\n      const column = layoutMap.getBody(col, row);\n      draw = column.columnType.onDrawCell;\n      ({\n        style\n      } = column);\n\n      _updateRect(this, col, row, context);\n    }\n\n    const cellValue = _getCellValue(this, col, row);\n\n    if (this.rowCount <= row) {\n      // Depending on the FilterDataSource, the rowCount may be reduced.\n      return undefined;\n    }\n\n    return _onDrawValue(this, cellValue, context, {\n      col,\n      row\n    }, style, draw);\n  }\n\n  doGetCellValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  valueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const value = _getCellValue(this, col, row);\n\n      if ((0, utils_1.isPromise)(value)) {\n        //\n        return false;\n      }\n\n      valueCallback(value);\n    }\n\n    return true;\n  }\n\n  doChangeValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  changeValueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const record = this.getRowRecord(row);\n\n      if ((0, utils_1.isPromise)(record)) {\n        //\n        return false;\n      }\n\n      const before = _getCellValue(this, col, row);\n\n      if ((0, utils_1.isPromise)(before)) {\n        //\n        return false;\n      }\n\n      const after = changeValueCallback(before);\n\n      if (after === undefined) {\n        return false;\n      }\n\n      const {\n        field\n      } = this[_].layoutMap.getBody(col, row);\n\n      this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\n        col,\n        row,\n        record: record,\n        field: field,\n        value: after,\n        oldValue: before\n      });\n      return (0, utils_1.then)(_setCellValue(this, col, row, after), ret => {\n        if (ret) {\n          const {\n            field\n          } = this[_].layoutMap.getBody(col, row);\n\n          this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\n            col,\n            row,\n            record: record,\n            field: field,\n            value: after,\n            oldValue: before\n          });\n        }\n\n        return ret;\n      });\n    }\n  }\n\n  doSetPasteValue(text, test) {\n    _onRangePaste.call(this, text, test);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderValue(col, row) {\n    const field = this.getHeaderField(col, row);\n    return this.headerValues.get(field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  setHeaderValue(col, row, newValue) {\n    const field = this.getHeaderField(col, row);\n    const oldValue = this.headerValues.get(field);\n    this.headerValues.set(field, newValue);\n    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\n      col,\n      row,\n      field,\n      value: newValue,\n      oldValue\n    });\n  }\n\n  getLayoutCellId(col, row) {\n    return this[_].layoutMap.getCellId(col, row);\n  }\n\n  bindEventsInternal() {\n    const grid = this;\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      const range = _getCellRange(this, e.col, e.row);\n\n      const {\n        start: {\n          col: startCol,\n          row: startRow\n        },\n        end: {\n          col: endCol,\n          row: endRow\n        }\n      } = range;\n\n      if (startCol !== endCol || startRow !== endRow) {\n        this.invalidateCellRange(range);\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, e => {\n      if (!this[_].allowRangePaste) {\n        return;\n      }\n\n      const {\n        start,\n        end\n      } = this.selection.range;\n\n      if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\n        return;\n      }\n\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangePaste.call(this, e.normalizeValue);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, e => {\n      const {\n        start\n      } = this.selection.range;\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangeDelete.call(this);\n    });\n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        col: startCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = startCol;\n    return super.getMoveLeftColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        col: endCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = endCol;\n    return super.getMoveRightColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        row: startRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = startRow;\n    return super.getMoveUpRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        row: endRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = endRow;\n    return super.getMoveDownRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getOffsetInvalidateCells() {\n    return 1;\n  }\n\n  getCopyRangeInternal(range) {\n    const {\n      start\n    } = this.getCellRange(range.start.col, range.start.row);\n    const {\n      end\n    } = this.getCellRange(range.end.col, range.end.row);\n    return {\n      start,\n      end\n    };\n  }\n\n  fireListeners(type, ...event) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.ListGrid = ListGrid;\n_a = _;\n\n/***/ }),\n\n/***/ \"./columns.js\":\n/*!********************!*\\\n  !*** ./columns.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.style = exports.type = exports.action = void 0;\n\nconst action = __importStar(__webpack_require__(/*! ./columns/action */ \"./columns/action.js\"));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(/*! ./columns/style */ \"./columns/style.js\"));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(/*! ./columns/type */ \"./columns/type.js\"));\n\nexports.type = type;\n\n/***/ }),\n\n/***/ \"./columns/action.js\":\n/*!***************************!*\\\n  !*** ./columns/action.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\n\nconst Action_1 = __webpack_require__(/*! ./action/Action */ \"./columns/action/Action.js\");\n\nObject.defineProperty(exports, \"Action\", {\n  enumerable: true,\n  get: function () {\n    return Action_1.Action;\n  }\n});\n\nconst BaseAction_1 = __webpack_require__(/*! ./action/BaseAction */ \"./columns/action/BaseAction.js\");\n\nObject.defineProperty(exports, \"BaseAction\", {\n  enumerable: true,\n  get: function () {\n    return BaseAction_1.BaseAction;\n  }\n});\n\nconst ButtonAction_1 = __webpack_require__(/*! ./action/ButtonAction */ \"./columns/action/ButtonAction.js\");\n\nObject.defineProperty(exports, \"ButtonAction\", {\n  enumerable: true,\n  get: function () {\n    return ButtonAction_1.ButtonAction;\n  }\n});\n\nconst CheckEditor_1 = __webpack_require__(/*! ./action/CheckEditor */ \"./columns/action/CheckEditor.js\");\n\nObject.defineProperty(exports, \"CheckEditor\", {\n  enumerable: true,\n  get: function () {\n    return CheckEditor_1.CheckEditor;\n  }\n});\n\nconst Editor_1 = __webpack_require__(/*! ./action/Editor */ \"./columns/action/Editor.js\");\n\nObject.defineProperty(exports, \"Editor\", {\n  enumerable: true,\n  get: function () {\n    return Editor_1.Editor;\n  }\n});\n\nconst InlineInputEditor_1 = __webpack_require__(/*! ./action/InlineInputEditor */ \"./columns/action/InlineInputEditor.js\");\n\nObject.defineProperty(exports, \"InlineInputEditor\", {\n  enumerable: true,\n  get: function () {\n    return InlineInputEditor_1.InlineInputEditor;\n  }\n});\n\nconst InlineMenuEditor_1 = __webpack_require__(/*! ./action/InlineMenuEditor */ \"./columns/action/InlineMenuEditor.js\");\n\nObject.defineProperty(exports, \"InlineMenuEditor\", {\n  enumerable: true,\n  get: function () {\n    return InlineMenuEditor_1.InlineMenuEditor;\n  }\n});\n\nconst RadioEditor_1 = __webpack_require__(/*! ./action/RadioEditor */ \"./columns/action/RadioEditor.js\");\n\nObject.defineProperty(exports, \"RadioEditor\", {\n  enumerable: true,\n  get: function () {\n    return RadioEditor_1.RadioEditor;\n  }\n});\n\nconst SmallDialogInputEditor_1 = __webpack_require__(/*! ./action/SmallDialogInputEditor */ \"./columns/action/SmallDialogInputEditor.js\");\n\nObject.defineProperty(exports, \"SmallDialogInputEditor\", {\n  enumerable: true,\n  get: function () {\n    return SmallDialogInputEditor_1.SmallDialogInputEditor;\n  }\n}); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n}\n\nexports.ACTIONS = {\n  CHECK: new ImmutableCheckEditor(),\n  INPUT: new ImmutableInputEditor(),\n  RADIO: new ImmutableRadioEditor()\n};\n\nfunction of(columnAction) {\n  if (!columnAction) {\n    return undefined;\n  } else if (typeof columnAction === \"string\") {\n    const key = columnAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return columnAction;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/action/Action.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Action.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Action = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nclass Action extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n\n    this._action = option.action || (() => {});\n  }\n\n  get editable() {\n    return false;\n  }\n\n  get action() {\n    return this._action;\n  }\n\n  set action(action) {\n    this._action = action;\n  }\n\n  clone() {\n    return new Action(this);\n  }\n\n  getState(_grid) {\n    return {};\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = this.getState(grid);\n\n    const action = cell => {\n      if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(cell.row);\n\n      this._action(record, (0, utils_1.extend)(cell, {\n        grid\n      }));\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    })];\n  }\n\n  onPasteCellRangeBox() {// noop\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.Action = Action;\n\n/***/ }),\n\n/***/ \"./columns/action/BaseAction.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/BaseAction.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseAction = void 0;\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  onChangeDisabledInternal() {// abstract\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n\n/***/ \"./columns/action/BaseInputEditor.js\":\n/*!*******************************************!*\\\n  !*** ./columns/action/BaseInputEditor.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseInputEditor = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass BaseInputEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      this.onOpenCellInternal(grid, cell);\n      return true;\n    };\n\n    const input = (cell, value) => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      this.onInputCellInternal(grid, cell, value);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      input({\n        col: e.col,\n        row: e.row\n      }, e.value);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      input({\n        col: e.col,\n        row: e.row\n      }, e.normalizeValue);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      open({\n        col: e.col,\n        row: e.row\n      });\n      utils_1.event.cancel(e.event);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, e => {\n      this.onChangeSelectCellInternal(grid, {\n        col: e.col,\n        row: e.row\n      }, e.selected);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      this.onGridScrollInternal(grid);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return false;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      return true;\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (range.start.col !== range.end.col || range.start.row !== range.end.row) {\n        const {\n          input\n        } = cell;\n        const baseRect = grid.getCellRect(cell.col, cell.row);\n        const rangeRect = grid.getCellRangeRect(range);\n        input.style.top = `${(parseFloat(input.style.top) + (rangeRect.top - baseRect.top)).toFixed()}px`;\n        input.style.left = `${(parseFloat(input.style.left) + (rangeRect.left - baseRect.left)).toFixed()}px`;\n        input.style.width = `${rangeRect.width.toFixed()}px`;\n        input.style.height = `${rangeRect.height.toFixed()}px`;\n      }\n\n      this.onSetInputAttrsInternal(grid, {\n        col: cell.col,\n        row: cell.row\n      }, cell.input);\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => {\n      if (this.isSupportMultilineValue()) {\n        return value;\n      }\n\n      return value.replace(/\\r?\\n/g, \" \");\n    });\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => \"\");\n  }\n\n  isSupportMultilineValue() {\n    return false;\n  }\n\n}\n\nexports.BaseInputEditor = BaseInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/ButtonAction.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/ButtonAction.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonAction = void 0;\n\nconst Action_1 = __webpack_require__(/*! ./Action */ \"./columns/action/Action.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\n\nclass ButtonAction extends Action_1.Action {\n  getState(grid) {\n    let state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (!state) {\n      state = {};\n      utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\n    }\n\n    return state;\n  }\n\n}\n\nexports.ButtonAction = ButtonAction;\n\n/***/ }),\n\n/***/ \"./columns/action/CheckEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/CheckEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckEditor = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\n\nclass CheckEditor extends Editor_1.Editor {\n  clone() {\n    return new CheckEditor(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[CHECK_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      const range = grid.getCellRange(cell.col, cell.row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n        return;\n      }\n\n      const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n\n      if (ret) {\n        const onChange = () => {\n          // checkbox animation\n          (0, animate_1.animate)(200, point => {\n            if (point === 1) {\n              delete state.elapsed[cellKey];\n            } else {\n              state.elapsed[cellKey] = point;\n            }\n\n            grid.invalidateCellRange(range);\n          });\n        };\n\n        if ((0, utils_1.isPromise)(ret)) {\n          state.block[cellKey] = true;\n          ret.then(() => {\n            delete state.block[cellKey];\n            onChange();\n          });\n        } else {\n          onChange();\n        }\n      }\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action: _e => {\n        const selrange = grid.selection.range;\n        const {\n          col\n        } = grid.selection.select;\n\n        for (let {\n          row\n        } = selrange.start; row <= selrange.end.row; row++) {\n          if (!isTarget(col, row)) {\n            continue;\n          }\n\n          action({\n            col,\n            row\n          });\n        }\n      }\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      const pasteValue = e.normalizeValue.trim();\n      grid.doGetCellValue(e.col, e.row, value => {\n        const newValue = (0, action_utils_1.toggleValue)(value);\n\n        if (`${newValue}`.trim() === pasteValue) {\n          action({\n            col: e.col,\n            row: e.row\n          });\n        } else if (isRejectValue(value, pasteValue)) {\n          const record = grid.getRowRecord(e.row);\n\n          if (!(0, utils_1.isPromise)(record)) {\n            grid.fireListeners(\"rejected_paste_values\", {\n              detail: [{\n                col: e.col,\n                row: e.row,\n                record,\n                define: grid.getColumnDefine(e.col, e.row),\n                pasteValue\n              }]\n            });\n          }\n        }\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      const newValue = (0, action_utils_1.toggleValue)(value);\n\n      if (`${newValue}`.trim() === pasteValue) {\n        grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n      } else if (isRejectValue(value, pasteValue)) {\n        context.reject();\n      }\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.CheckEditor = CheckEditor;\n\nfunction isRejectValue(oldValue, pasteValue) {\n  if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\n    return false;\n  }\n\n  const newValue = (0, action_utils_1.toggleValue)(oldValue);\n  return `${newValue}`.trim() !== pasteValue && `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Editor.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Editor.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Editor = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\nclass Editor extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n    this._readOnly = option.readOnly || false;\n  }\n\n  get editable() {\n    return true;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n  set readOnly(readOnly) {\n    this._readOnly = readOnly;\n    this.onChangeReadOnlyInternal();\n  }\n\n  onChangeReadOnlyInternal() {// abstruct\n  }\n\n}\n\nexports.Editor = Editor;\n\n/***/ }),\n\n/***/ \"./columns/action/InlineInputEditor.js\":\n/*!*********************************************!*\\\n  !*** ./columns/action/InlineInputEditor.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineInputEditor = void 0;\n\nconst BaseInputEditor_1 = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\n\nconst InlineInputElement_1 = __webpack_require__(/*! ./internal/InlineInputElement */ \"./columns/action/internal/InlineInputElement.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineInputElement_1.InlineInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nfunction doChangeValue(_grid) {\n  if (globalElement) {\n    globalElement.doChangeValue();\n  }\n}\n\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  clone() {\n    return new InlineInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(grid, _cell, _selected) {\n    doChangeValue(grid);\n    detachInput();\n  }\n\n  onGridScrollInternal(grid) {\n    doChangeValue(grid);\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\n  }\n\n}\n\nexports.InlineInputEditor = InlineInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/InlineMenuEditor.js\":\n/*!********************************************!*\\\n  !*** ./columns/action/InlineMenuEditor.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineMenuEditor = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst InlineMenuElement_1 = __webpack_require__(/*! ./internal/InlineMenuElement */ \"./columns/action/internal/InlineMenuElement.js\");\n\nconst type_1 = __webpack_require__(/*! ../type */ \"./columns/type.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst menu_items_1 = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachMenu(grid, cell, editor, value, record) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineMenuElement_1.InlineMenuElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value, record);\n}\n\nfunction detachMenu(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass InlineMenuEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._options = (0, menu_items_1.normalizeToFn)(option.options);\n  }\n\n  dispose() {// noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this._options = (0, menu_items_1.normalizeToFn)(options);\n  }\n\n  clone() {\n    return new InlineMenuEditor(this);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      grid.doGetCellValue(cell.col, cell.row, value => {\n        const record = grid.getRowRecord(cell.row);\n\n        if ((0, utils_1.isPromise)(record)) {\n          return;\n        }\n\n        attachMenu(grid, cell, this, value, record);\n      });\n      return true;\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, _e => {\n      detachMenu();\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      detachMenu(true);\n    }), // mouse move\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"pointer\";\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      if (!grid.getElement().style.cursor) {\n        grid.getElement().style.cursor = \"pointer\";\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"\";\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(e.row);\n\n      if ((0, utils_1.isPromise)(record)) {\n        return;\n      }\n\n      const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\n\n      if (pasteOpt) {\n        utils_1.event.cancel(e.event);\n        (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\n          const range = grid.getCellRange(e.col, e.row);\n          grid.invalidateCellRange(range);\n        });\n      } else {\n        grid.fireListeners(\"rejected_paste_values\", {\n          detail: [{\n            col: e.col,\n            row: e.row,\n            record,\n            define: grid.getColumnDefine(e.col, e.row),\n            pasteValue: e.normalizeValue\n          }]\n        });\n      }\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    } else {\n      // unknown\n      context.reject();\n    }\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    }\n  }\n\n  _pasteDataToOptionValue(value, grid, cell, record) {\n    const options = this._options(record);\n\n    const pasteOpt = _textToOptionValue(value, options);\n\n    if (pasteOpt) {\n      return pasteOpt;\n    }\n\n    const columnType = grid.getColumnType(cell.col, cell.row);\n\n    if (hasOptions(columnType)) {\n      // Find with caption.\n      const pasteValue = normalizePasteValueStr(value);\n      const captionOpt = utils_1.array.find(columnType.options, opt => normalizePasteValueStr(opt.label) === pasteValue);\n\n      if (captionOpt) {\n        return _textToOptionValue(captionOpt.value, options);\n      }\n    }\n\n    return undefined;\n  }\n\n}\n\nexports.InlineMenuEditor = InlineMenuEditor;\n\nfunction _textToOptionValue(value, options) {\n  const pasteValue = normalizePasteValueStr(value);\n  const pasteOpt = utils_1.array.find(options, opt => normalizePasteValueStr(opt.value) === pasteValue);\n\n  if (pasteOpt) {\n    return pasteOpt;\n  }\n\n  return undefined;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction normalizePasteValueStr(value) {\n  if (value == null) {\n    return \"\";\n  }\n\n  return `${value}`.trim();\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction hasOptions(columnType) {\n  if (columnType instanceof type_1.MenuColumn) {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  if (Array.isArray(columnType.options)) {\n    return true;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/RadioEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/RadioEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioEditor = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst Editor_1 = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_2 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\n\nclass RadioEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._group = option.group;\n    this._checkAction = option.checkAction;\n  }\n\n  clone() {\n    return new RadioEditor(this);\n  }\n  /** @deprecated Use checkAction instead. */\n\n\n  get group() {\n    return this._group;\n  }\n  /** @deprecated Use checkAction instead. */\n\n\n  set group(group) {\n    this._group = group;\n  }\n\n  get checkAction() {\n    return this._checkAction;\n  }\n\n  set checkAction(checkAction) {\n    this._checkAction = checkAction;\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[RADIO_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      this._action(grid, cell);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      const pasteValue = e.normalizeValue.trim();\n\n      if (isRejectValue(pasteValue)) {\n        // Not a boolean\n        const record = grid.getRowRecord(e.row);\n\n        if (!(0, utils_1.isPromise)(record)) {\n          grid.fireListeners(\"rejected_paste_values\", {\n            detail: [{\n              col: e.col,\n              row: e.row,\n              record,\n              define: grid.getColumnDefine(e.col, e.row),\n              pasteValue\n            }]\n          });\n        }\n\n        return;\n      }\n\n      if (!(0, utils_2.toBoolean)(pasteValue)) {\n        return;\n      }\n\n      action({\n        col: e.col,\n        row: e.row\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value, context) {\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n\n    if (isRejectValue(pasteValue)) {\n      // Not a boolean\n      context.reject();\n      return;\n    }\n\n    if (!(0, utils_2.toBoolean)(pasteValue)) {\n      return;\n    }\n\n    this._action(grid, {\n      col: cell.col,\n      row: cell.row\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n  _action(grid, cell) {\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(cell.col, cell.row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n\n    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n      return;\n    }\n\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      if ((0, utils_2.toBoolean)(value)) {\n        return;\n      }\n\n      if (this._checkAction) {\n        // User behavior\n        const record = grid.getRowRecord(cell.row);\n\n        this._checkAction(record, (0, utils_1.extend)(cell, {\n          grid\n        }));\n\n        return;\n      }\n\n      if (this._group) {\n        // Backward compatibility\n        const state = grid[RADIO_COLUMN_STATE_ID];\n\n        const targets = this._group({\n          grid,\n          col: cell.col,\n          row: cell.row\n        });\n\n        targets.forEach(({\n          col,\n          row\n        }) => {\n          const range = grid.getCellRange(col, row);\n          const cellKey = `${range.start.col}:${range.start.row}`;\n\n          if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) || state.block[cellKey]) {\n            return;\n          }\n\n          actionCell(grid, col, row, col === cell.col && row === cell.row);\n        });\n        return;\n      } // default behavior\n\n\n      const field = grid.getField(cell.col, cell.row);\n      const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\n      /** Original DataSource */\n\n      const {\n        dataSource\n      } = grid.dataSource;\n      const girdRecords = getAllRecordsFromGrid(grid);\n\n      for (let index = 0; index < dataSource.length; index++) {\n        const record = dataSource.get(index);\n        const showData = girdRecords.find(d => d.record === record);\n\n        if (showData) {\n          actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\n        } else {\n          // Hidden record\n          (0, utils_1.then)(dataSource.getField(index, field), value => {\n            if (!(0, utils_2.toBoolean)(value)) {\n              return;\n            }\n\n            dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\n          });\n        }\n      }\n    });\n  }\n\n}\n\nexports.RadioEditor = RadioEditor;\n\nfunction getAllRecordsFromGrid(grid) {\n  const result = [];\n  const {\n    rowCount,\n    recordRowCount\n  } = grid;\n\n  for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\n    const record = grid.getRowRecord(targetRow);\n    result.push({\n      row: targetRow,\n      record\n    });\n  }\n\n  return result;\n}\n\nfunction actionCell(grid, col, row, flag) {\n  grid.doGetCellValue(col, row, value => {\n    if ((0, utils_2.toBoolean)(value) === flag) {\n      return;\n    }\n\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\n\n    if (ret) {\n      const onChange = () => {\n        // checkbox animation\n        (0, animate_1.animate)(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      if ((0, utils_1.isPromise)(ret)) {\n        state.block[cellKey] = true;\n        ret.then(() => {\n          delete state.block[cellKey];\n          onChange();\n        });\n      } else {\n        onChange();\n      }\n    }\n  });\n}\n\nfunction isRejectValue(pasteValue) {\n  return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/SmallDialogInputEditor.js\":\n/*!**************************************************!*\\\n  !*** ./columns/action/SmallDialogInputEditor.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SmallDialogInputEditor = void 0;\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseInputEditor_1 = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\n\nconst action_utils_1 = __webpack_require__(/*! ./action-utils */ \"./columns/action/action-utils.js\");\n\nconst SmallDialogInputElement_1 = __webpack_require__(/*! ./internal/SmallDialogInputElement */ \"./columns/action/internal/SmallDialogInputElement.js\");\n\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._helperText = option.helperText;\n    this._inputValidator = option.inputValidator;\n    this._validator = option.validator;\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  dispose() {//noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  get helperText() {\n    return this._helperText;\n  }\n\n  get inputValidator() {\n    return this._inputValidator;\n  }\n\n  get validator() {\n    return this._validator;\n  }\n\n  clone() {\n    return new SmallDialogInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(_grid, _cell, _selected) {\n    // cancel input\n    detachInput();\n  }\n\n  onGridScrollInternal(_grid) {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) || (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      this.onOpenCellInternal(grid, cell);\n      return true;\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...super.bindGridEvent(grid, cellId), grid.listen('click_cell', cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    })];\n  }\n\n}\n\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\n\n/***/ }),\n\n/***/ \"./columns/action/action-utils.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/action-utils.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nfunction isDisabledRecord(option, grid, row) {\n  if (grid.disabled) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isDisabledRecord = isDisabledRecord;\n\nfunction isReadOnlyRecord(option, grid, row) {\n  if (grid.readOnly) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isReadOnlyRecord = isReadOnlyRecord;\n\nfunction toggleValue(val) {\n  if (typeof val === \"number\") {\n    if (val === 0) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return \"true\";\n    } else if (val === \"off\") {\n      return \"on\";\n    } else if (/^0+$/.exec(val)) {\n      return val.replace(/^(0*)0$/, \"$11\");\n    } else if (val === \"true\") {\n      return \"false\";\n    } else if (val === \"on\") {\n      return \"off\";\n    } else if (/^0*1$/.exec(val)) {\n      return val.replace(/^(0*)1$/, \"$10\");\n    }\n  }\n\n  return !val;\n}\n\nexports.toggleValue = toggleValue;\n\nfunction getBooleanOptionOfRecord(option, grid, row) {\n  if (typeof option === \"function\") {\n    const record = grid.getRowRecord(row);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return true;\n    }\n\n    return !!option(record);\n  }\n\n  return !!option;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/actionBind.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/actionBind.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.js\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineInputElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst input_value_handler_1 = __webpack_require__(/*! ./input-value-handler */ \"./columns/action/internal/input-value-handler.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst CLASSNAME = \"cheetah-grid__inline-input\";\n\nfunction createInputElement() {\n  __webpack_require__(/*! @/columns/action/internal/InlineInputElement.css */ \"../src/js/columns/action/internal/InlineInputElement.css\");\n\n  return (0, dom_1.createElement)(\"input\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    classList,\n    type\n  } = editor;\n\n  if (classList) {\n    input.classList.add(...classList);\n  }\n\n  input.type = type || \"\";\n}\n\nclass InlineInputElement {\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._input = createInputElement();\n\n    this._bindInputEvents();\n  }\n\n  dispose() {\n    var _a;\n\n    const input = this._input;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._input;\n    this._beforePropEditor = null;\n    (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n  }\n\n  attach(grid, editor, col, row, value) {\n    const input = this._input;\n    const handler = this._handler;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        input.classList.remove(...classList);\n      }\n    }\n\n    input.style.font = grid.font || \"16px sans-serif\";\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    input.style.top = `${rect.top.toFixed()}px`;\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(input);\n    setInputAttrs(editor, grid, input);\n    (0, input_value_handler_1.setInputValue)(input, value);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n    this._beforePropEditor = editor;\n\n    const focus = () => {\n      input.focus();\n      const end = input.value.length;\n\n      try {\n        if (typeof input.selectionStart !== \"undefined\") {\n          input.selectionStart = end;\n          input.selectionEnd = end;\n          return;\n        }\n      } catch (e) {//ignore\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      if (document.selection) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const range = input.createTextRange();\n        range.collapse();\n        range.moveEnd(\"character\", end);\n        range.moveStart(\"character\", end);\n        range.select();\n      }\n    };\n\n    handler.tryWithOffEvents(input, \"blur\", () => {\n      focus();\n    });\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const input = this._input;\n\n      this._handler.tryWithOffEvents(input, \"blur\", () => {\n        var _a;\n\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      });\n\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n  }\n\n  doChangeValue() {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    const {\n      grid,\n      col,\n      row\n    } = this._activeData;\n    grid.doChangeValue(col, row, () => value);\n  }\n\n  _isActive() {\n    const input = this._input;\n\n    if (!input || !input.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindInputEvents() {\n    const handler = this._handler;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(input, \"click\", stopPropagationOnly);\n    handler.on(input, \"mousedown\", stopPropagationOnly);\n    handler.on(input, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"dblclick\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n    });\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(e);\n      }\n    });\n    handler.on(input, \"blur\", _e => {\n      this.doChangeValue();\n      this.detach();\n    });\n  }\n\n  _onKeydownEnter(e) {\n    var _a;\n\n    if (!this._isActive() || this._attaching) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n    this.doChangeValue();\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n      grid.onKeyDownMove(e);\n    }\n  }\n\n  _onKeydownTab(e) {\n    var _a;\n\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n\n    if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\n      return;\n    }\n\n    this.doChangeValue();\n    this.detach(true);\n    grid.onKeyDownMove(e);\n  }\n\n}\n\nexports.InlineInputElement = InlineInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.js\":\n/*!******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineMenuElement = void 0;\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\n\nfunction findItemParents(target) {\n  let el = target;\n\n  while (el && !el.classList.contains(ITEM_CLASSNAME)) {\n    el = el.parentElement;\n\n    if (!el || el.classList.contains(CLASSNAME)) {\n      return null;\n    }\n  }\n\n  return el;\n}\n\nfunction createMenuElement() {\n  __webpack_require__(/*! @/columns/action/internal/InlineMenuElement.css */ \"../src/js/columns/action/internal/InlineMenuElement.css\");\n\n  return (0, dom_1.createElement)(\"ul\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction attachElement(element, rect, menu) {\n  menu.style.top = `${rect.top.toFixed()}px`;\n  menu.style.left = `${rect.left.toFixed()}px`;\n  menu.style.width = `${rect.width.toFixed()}px`;\n  menu.style.lineHeight = `${rect.height.toFixed()}px`;\n  element.appendChild(menu);\n}\n\nfunction optionToLi({\n  classList,\n  label,\n  value,\n  html\n}, index) {\n  const item = (0, dom_1.createElement)(\"li\", {\n    classList: ITEM_CLASSNAME\n  });\n  item.tabIndex = 0;\n  item.dataset.valueindex = `${index}`;\n\n  if (classList) {\n    item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\n  }\n\n  if (label) {\n    const span = (0, dom_1.createElement)(\"span\", {\n      text: label\n    });\n    item.appendChild(span);\n  } else if (html) {\n    (0, dom_1.appendHtml)(item, html);\n  }\n\n  if (value === \"\" || value == null) {\n    item.classList.add(EMPTY_ITEM_CLASSNAME);\n  }\n\n  return item;\n}\n\nfunction openMenu(grid, editor, col, row, value, options, menu) {\n  const {\n    classList\n  } = editor;\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  (0, dom_1.empty)(menu);\n  menu.style.font = grid.font || \"16px sans-serif\";\n  let emptyItemEl = null;\n  let valueItemEl = null;\n  options.forEach((option, i) => {\n    const item = optionToLi(option, i);\n    menu.appendChild(item);\n\n    if (option.value === value) {\n      valueItemEl = item;\n      item.dataset.select = \"select\";\n    }\n\n    if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n      emptyItemEl = item;\n    }\n  });\n  const focusEl = valueItemEl || emptyItemEl || menu.children[0];\n\n  if (classList) {\n    menu.classList.add(...classList);\n  }\n\n  const children = Array.prototype.slice.call(menu.children, 0);\n  const focusIndex = children.indexOf(focusEl);\n  const {\n    element,\n    rect\n  } = grid.getAttachCellsArea(grid.getCellRange(col, row)); // Cover the right line\n\n  rect.width++; // append for calculation\n\n  attachElement(element, rect, menu); // Make the selection item at the middle\n\n  let offset = 0;\n  let allHeight = 0;\n\n  for (let i = 0; i < children.length; i++) {\n    const {\n      offsetHeight\n    } = children[i];\n\n    if (i < focusIndex) {\n      offset += offsetHeight;\n    }\n\n    allHeight += offsetHeight;\n  }\n\n  rect.offsetTop(-offset);\n  menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n  attachElement(element, rect, menu); // Control not to overflow the screen range\n\n  const menuClientRect = menu.getBoundingClientRect();\n  const scaleDiff = (allHeight - menuClientRect.height) / 2;\n  const orgMenuTop = menuClientRect.top - scaleDiff;\n  let menuTop = orgMenuTop;\n  const menuBottom = menuTop + allHeight;\n  const winBottom = window.innerHeight;\n  const winMargin = 20;\n\n  if (menuBottom > winBottom - winMargin) {\n    const diff = menuBottom - winBottom + winMargin;\n    menuTop -= diff;\n  }\n\n  if (menuTop < 0\n  /*winTop*/\n  + winMargin) {\n    menuTop = winMargin;\n  }\n\n  if (menuTop !== orgMenuTop) {\n    rect.offsetTop(-(orgMenuTop - menuTop)); // re update\n\n    attachElement(element, rect, menu);\n  }\n\n  if (focusEl) {\n    focusEl.focus();\n  }\n\n  menu.classList.remove(HIDDEN_CLASSNAME);\n  menu.classList.add(SHOWN_CLASSNAME);\n}\n\nfunction closeMenu(_grid, _col, _row, menu) {\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  (0, dom_1.disableFocus)(menu);\n}\n\nclass InlineMenuElement {\n  constructor() {\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    this._menu = createMenuElement();\n\n    this._bindMenuEvents();\n\n    let bodyClickListenerId;\n\n    const deregisterBodyClickListener = this._deregisterBodyClickListener = () => handler.off(bodyClickListenerId);\n\n    this._registerBodyClickListener = () => {\n      deregisterBodyClickListener();\n      bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), {\n        capture: true\n      });\n    };\n  }\n\n  dispose() {\n    var _a;\n\n    const menu = this._menu;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._menu;\n    this._beforePropEditor = null;\n    (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\n  }\n\n  attach(grid, editor, col, row, value, record) {\n    const menu = this._menu;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        menu.classList.remove(...classList);\n      }\n    }\n\n    const options = editor.options(record);\n    openMenu(grid, editor, col, row, value, options, menu);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor,\n      options\n    };\n    this._beforePropEditor = editor;\n\n    this._registerBodyClickListener();\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const menu = this._menu;\n      closeMenu(grid, col, row, menu);\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n\n    this._deregisterBodyClickListener();\n  }\n\n  _doChangeValue(valueindex) {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid,\n      col,\n      row,\n      options\n    } = this._activeData;\n    const option = options[Number(valueindex)];\n\n    if (option) {\n      const {\n        value\n      } = option;\n      grid.doChangeValue(col, row, () => value);\n    }\n  }\n\n  _isActive() {\n    const menu = this._menu;\n\n    if (!menu || !menu.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindMenuEvents() {\n    const handler = this._handler;\n    const menu = this._menu;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(menu, \"mousedown\", stopPropagationOnly);\n    handler.on(menu, \"touchstart\", stopPropagationOnly);\n    handler.on(menu, \"dblclick\", stopPropagationOnly);\n    handler.on(menu, \"click\", e => {\n      e.stopPropagation();\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const {\n        valueindex\n      } = item.dataset;\n\n      this._doChangeValue(valueindex || \"\");\n\n      this.detach(true);\n    });\n    handler.on(menu, \"keydown\", e => {\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(menu, item, e);\n      } else if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_UP) {\n        const n = (0, dom_1.findPrevSiblingFocusable)(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_DOWN) {\n        const n = (0, dom_1.findNextSiblingFocusable)(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(menu, item, e);\n      }\n    });\n  }\n\n  _onBodyClick(e) {\n    const el = e.target;\n\n    if (!el) {\n      return;\n    }\n\n    if (this._menu.contains(el)) {\n      return;\n    }\n\n    if (this._isActive()) {\n      const {\n        grid\n      } = this._activeData;\n\n      if (grid.getElement().contains(el)) {\n        return;\n      }\n    }\n\n    this.detach();\n  }\n\n  _onKeydownEnter(_menu, item, e) {\n    var _a;\n\n    const grid = this._isActive() ? this._activeData.grid : null;\n    const {\n      valueindex\n    } = item.dataset;\n\n    this._doChangeValue(valueindex || \"\");\n\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if (grid) {\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n        grid.onKeyDownMove(e);\n      }\n    }\n  }\n\n  _onKeydownTab(menu, item, e) {\n    var _a;\n\n    if (this._isActive()) {\n      const {\n        grid\n      } = this._activeData;\n\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\n        const {\n          valueindex\n        } = item.dataset;\n\n        this._doChangeValue(valueindex || \"\");\n\n        this.detach(true);\n        grid.onKeyDownMove(e);\n        return;\n      }\n    }\n\n    if (!e.shiftKey) {\n      if (!(0, dom_1.findNextSiblingFocusable)(item)) {\n        let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\n\n        if (!(0, dom_1.isFocusable)(n)) {\n          n = (0, dom_1.findNextSiblingFocusable)(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    } else {\n      if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\n        const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\n        let n = items[items.length - 1];\n\n        if (!(0, dom_1.isFocusable)(n)) {\n          n = (0, dom_1.findPrevSiblingFocusable)(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    }\n  }\n\n}\n\nexports.InlineMenuElement = InlineMenuElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.js\":\n/*!************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SmallDialogInputElement = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst input_value_handler_1 = __webpack_require__(/*! ./input-value-handler */ \"./columns/action/internal/input-value-handler.js\");\n\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\n\nfunction _focus(input, handler) {\n  const focus = () => {\n    input.focus();\n    const end = input.value.length;\n\n    try {\n      if (typeof input.selectionStart !== \"undefined\") {\n        input.selectionStart = end;\n        input.selectionEnd = end;\n        return;\n      }\n    } catch (e) {//ignore\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (document.selection) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const range = input.createTextRange();\n      range.collapse();\n      range.moveEnd(\"character\", end);\n      range.moveStart(\"character\", end);\n      range.select();\n    }\n  };\n\n  handler.tryWithOffEvents(input, \"blur\", () => {\n    focus();\n  });\n}\n\nfunction createDialogElement() {\n  __webpack_require__(/*! @/columns/action/internal/SmallDialogInputElement.css */ \"../src/js/columns/action/internal/SmallDialogInputElement.css\");\n\n  const element = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const input = (0, dom_1.createElement)(\"input\", {\n    classList: INPUT_CLASSNAME\n  });\n  input.readOnly = true;\n  input.tabIndex = -1;\n  element.appendChild(input);\n  return element;\n}\n\nfunction bindProps(grid, dialog, input, editor) {\n  const {\n    classList,\n    helperText\n  } = editor;\n\n  if (classList) {\n    dialog.classList.add(...classList);\n  }\n\n  if (helperText && typeof helperText !== \"function\") {\n    dialog.dataset.helperText = helperText;\n  }\n\n  setInputAttrs(editor, grid, input);\n}\n\nfunction unbindProps(_grid, dialog, input, editor) {\n  const {\n    classList\n  } = editor;\n\n  if (classList) {\n    dialog.classList.remove(...classList);\n  }\n\n  delete dialog.dataset.helperText;\n  input.type = \"\";\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    type\n  } = editor;\n  input.type = type || \"\";\n}\n\nclass SmallDialogInputElement {\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._dialog = createDialogElement();\n    this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\n\n    this._bindDialogEvents();\n  }\n\n  dispose() {\n    const dialog = this._dialog;\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._dialog; // @ts-expect-error -- ignore\n\n    delete this._input;\n    this._beforePropEditor = null;\n\n    if (dialog.parentElement) {\n      dialog.parentElement.removeChild(dialog);\n    }\n  }\n\n  attach(grid, editor, col, row, value) {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    if (this._beforePropEditor) {\n      unbindProps(grid, dialog, input, this._beforePropEditor);\n    }\n\n    delete dialog.dataset.errorMessage;\n    dialog.classList.remove(SHOWN_CLASSNAME);\n    dialog.classList.add(HIDDEN_CLASSNAME);\n    input.readOnly = true;\n    input.tabIndex = 0;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    dialog.style.top = `${rect.top.toFixed()}px`;\n    dialog.style.left = `${rect.left.toFixed()}px`;\n    dialog.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(dialog);\n    (0, input_value_handler_1.setInputValue)(input, value);\n    input.style.font = grid.font || \"16px sans-serif\";\n    const activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n\n    this._onInputValue(input, activeData);\n\n    if (!utils_1.browser.IE) {\n      _focus(input, handler);\n    } else {\n      // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\n      setTimeout(() => _focus(input, handler));\n    }\n\n    dialog.classList.add(SHOWN_CLASSNAME);\n    dialog.classList.remove(HIDDEN_CLASSNAME);\n    input.readOnly = false;\n    bindProps(grid, dialog, input, editor);\n    this._activeData = activeData;\n    this._beforePropEditor = editor;\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const dialog = this._dialog;\n      const input = this._input;\n      dialog.classList.remove(SHOWN_CLASSNAME);\n      dialog.classList.add(HIDDEN_CLASSNAME);\n      input.readOnly = true;\n      input.tabIndex = -1;\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n    this._beforeValue = null;\n  }\n\n  _doChangeValue() {\n    if (!this._isActive()) {\n      return false;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    return (0, utils_1.then)(this._validate(value), res => {\n      if (res && value === input.value) {\n        const {\n          grid,\n          col,\n          row\n        } = this._activeData;\n        grid.doChangeValue(col, row, () => value);\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  _isActive() {\n    const dialog = this._dialog;\n\n    if (!dialog || !dialog.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindDialogEvents() {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(dialog, \"click\", stopPropagationOnly);\n    handler.on(dialog, \"dblclick\", stopPropagationOnly);\n    handler.on(dialog, \"mousedown\", stopPropagationOnly);\n    handler.on(dialog, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n\n      this._onInputValue(input);\n    });\n\n    const onKeyupAndPress = _e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      this._onInputValue(input);\n    };\n\n    handler.on(input, \"keyup\", onKeyupAndPress);\n    handler.on(input, \"keypress\", onKeyupAndPress);\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else {\n        this._onInputValue(input);\n      }\n    });\n  }\n\n  _onKeydownEnter(e) {\n    if (this._attaching) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    (0, utils_1.then)(this._doChangeValue(), r => {\n      var _a;\n\n      if (r && value === input.value) {\n        const grid = this._isActive() ? this._activeData.grid : null;\n        this.detach(true);\n\n        if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n          grid.onKeyDownMove(e);\n        }\n      }\n    });\n    utils_1.event.cancel(e);\n  }\n\n  _onInputValue(input, activeData) {\n    const before = this._beforeValue;\n    const {\n      value\n    } = input;\n\n    if (before !== value) {\n      this._onInputValueChange(value, activeData);\n    }\n\n    this._beforeValue = value;\n  }\n\n  _onInputValueChange(after, activeData) {\n    activeData = activeData || this._activeData;\n    const dialog = this._dialog;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = activeData;\n\n    if (typeof editor.helperText === \"function\") {\n      const helperText = editor.helperText(after, {\n        grid,\n        col,\n        row\n      });\n\n      if (helperText) {\n        dialog.dataset.helperText = helperText;\n      } else {\n        delete dialog.dataset.helperText;\n      }\n    }\n\n    if (\"errorMessage\" in dialog.dataset) {\n      this._validate(after, true);\n    }\n  }\n\n  _validate(value, inputOnly) {\n    const dialog = this._dialog;\n    const input = this._input;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = this._activeData;\n    let message = \"\";\n\n    if (editor.inputValidator) {\n      message = editor.inputValidator(value, {\n        grid,\n        col,\n        row\n      });\n    }\n\n    return (0, utils_1.then)(message, message => {\n      if (!message && editor.validator && !inputOnly) {\n        message = editor.validator(value, {\n          grid,\n          col,\n          row\n        });\n      }\n\n      return (0, utils_1.then)(message, message => {\n        if (message && value === input.value) {\n          dialog.dataset.errorMessage = message;\n        } else {\n          delete dialog.dataset.errorMessage;\n        }\n\n        return !message;\n      });\n    });\n  }\n\n}\n\nexports.SmallDialogInputElement = SmallDialogInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/input-value-handler.js\":\n/*!********************************************************!*\\\n  !*** ./columns/action/internal/input-value-handler.js ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setInputValue = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nfunction setInputValue(input, value) {\n  const sign = input.type === \"number\" && value === \"-\";\n\n  if (sign) {\n    // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\n    input.type = \"\";\n    let handler = new EventHandler_1.EventHandler();\n\n    const dispose = () => {\n      if (handler) {\n        handler.dispose();\n        handler = null;\n      }\n    };\n\n    handler.once(input, \"input\", _e => {\n      input.type = \"number\";\n      dispose();\n    });\n    handler.once(input, \"blur\", _e => {\n      dispose();\n    });\n  }\n\n  input.value = value !== null && value !== void 0 ? value : \"\";\n}\n\nexports.setInputValue = setInputValue;\n\n/***/ }),\n\n/***/ \"./columns/indicator/handlers.js\":\n/*!***************************************!*\\\n  !*** ./columns/indicator/handlers.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDrawIndicator = void 0;\n\nconst triangle_1 = __webpack_require__(/*! ./triangle */ \"./columns/indicator/triangle.js\");\n\nfunction getDrawIndicator(indicatorStyle) {\n  const {\n    style\n  } = indicatorStyle;\n\n  if (style === \"triangle\") {\n    return triangle_1.drawTriangleIndicator;\n  }\n\n  return null;\n}\n\nexports.getDrawIndicator = getDrawIndicator;\n\n/***/ }),\n\n/***/ \"./columns/indicator/triangle.js\":\n/*!***************************************!*\\\n  !*** ./columns/indicator/triangle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawTriangleIndicator = void 0;\nconst KIND_PROCESS_MAP = {\n  [0\n  /* DrawIndicatorKind.topLeft */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.topLeftColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.topLeftSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseLeft = rect.left + 1;\n      const baseTop = rect.top + 1;\n      ctx.moveTo(baseLeft, baseTop);\n      ctx.lineTo(baseLeft + size, baseTop);\n      ctx.lineTo(baseLeft, baseTop + size);\n    }\n\n  },\n  [1\n  /* DrawIndicatorKind.topRight */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.topRightColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.topRightSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseRight = rect.right - 2;\n      const baseTop = rect.top + 1;\n      ctx.moveTo(baseRight, baseTop);\n      ctx.lineTo(baseRight - size, baseTop);\n      ctx.lineTo(baseRight, baseTop + size);\n    }\n\n  },\n  [2\n  /* DrawIndicatorKind.bottomRight */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.bottomRightColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.bottomRightSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseRight = rect.right - 2;\n      const baseBottom = rect.bottom - 2;\n      ctx.moveTo(baseRight, baseBottom);\n      ctx.lineTo(baseRight - size, baseBottom);\n      ctx.lineTo(baseRight, baseBottom - size);\n    }\n\n  },\n  [3\n  /* DrawIndicatorKind.bottomLeft */\n  ]: {\n    themeColor(helper) {\n      return helper.theme.indicators.bottomLeftColor;\n    },\n\n    themeSize(helper) {\n      return helper.theme.indicators.bottomLeftSize;\n    },\n\n    drawPath(ctx, rect, size) {\n      const baseLeft = rect.left + 1;\n      const baseBottom = rect.bottom - 2;\n      ctx.moveTo(baseLeft, baseBottom);\n      ctx.lineTo(baseLeft + size, baseBottom);\n      ctx.lineTo(baseLeft, baseBottom - size);\n    }\n\n  }\n};\n\nfunction drawTriangleIndicator(context, style, kind, helper) {\n  const process = KIND_PROCESS_MAP[kind];\n\n  if (!process) {\n    return;\n  }\n\n  helper.drawBorderWithClip(context, ctx => {\n    const rect = context.getRect();\n    const color = style.color || helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\n    const size = style.size && Number(style.size) || process.themeSize(helper) || rect.height / 6; // draw triangle\n\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    process.drawPath(ctx, rect, size);\n    ctx.closePath();\n    ctx.fill();\n  });\n}\n\nexports.drawTriangleIndicator = drawTriangleIndicator;\n\n/***/ }),\n\n/***/ \"./columns/message/BaseMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/BaseMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseMessage = void 0;\n\nclass BaseMessage {\n  constructor(grid) {\n    this._messageElement = null;\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachMessageElement();\n\n    if (this._messageElement) {\n      this._messageElement.dispose();\n    }\n\n    this._messageElement = null;\n  }\n\n  _getMessageElement() {\n    return this._messageElement || (this._messageElement = this.createMessageElementInternal());\n  }\n\n  attachMessageElement(col, row, message) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.attach(this._grid, col, row, message);\n  }\n\n  moveMessageElement(col, row) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.move(this._grid, col, row);\n  }\n\n  detachMessageElement() {\n    const messageElement = this._getMessageElement();\n\n    messageElement._detach();\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    this.drawCellMessageInternal(message, context, style, helper, grid, info);\n  }\n\n}\n\nexports.BaseMessage = BaseMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/ErrorMessage.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/ErrorMessage.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst ErrorMessageElement_1 = __webpack_require__(/*! ./internal/ErrorMessageElement */ \"./columns/message/internal/ErrorMessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst RED_A100 = \"#ff8a80\";\n\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new ErrorMessageElement_1.ErrorMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.ErrorMessage = ErrorMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/InfoMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/InfoMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InfoMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst MessageElement_1 = __webpack_require__(/*! ./internal/MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst GREY_L2 = \"#e0e0e0\";\n\nclass InfoMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new MessageElement_1.MessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawInformationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.InfoMessage = InfoMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/MessageHandler.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/MessageHandler.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageHandler = exports.hasMessage = void 0;\n\nconst ErrorMessage_1 = __webpack_require__(/*! ./ErrorMessage */ \"./columns/message/ErrorMessage.js\");\n\nconst InfoMessage_1 = __webpack_require__(/*! ./InfoMessage */ \"./columns/message/InfoMessage.js\");\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ../../list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst WarningMessage_1 = __webpack_require__(/*! ./WarningMessage */ \"./columns/message/WarningMessage.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst EMPTY_MESSAGE = {\n  type: \"error\",\n  message: null\n};\nconst MESSAGE_INSTANCE_FACTORY = {\n  error(grid) {\n    return new ErrorMessage_1.ErrorMessage(grid);\n  },\n\n  info(grid) {\n    return new InfoMessage_1.InfoMessage(grid);\n  },\n\n  warning(grid) {\n    return new WarningMessage_1.WarningMessage(grid);\n  }\n\n};\n\nfunction normalizeMessage(message) {\n  if (!message || (0, utils_1.isPromise)(message)) {\n    return EMPTY_MESSAGE;\n  }\n\n  if (typeof message === \"string\") {\n    return {\n      type: \"error\",\n      message,\n      original: message\n    };\n  }\n\n  const type = message.type || \"error\";\n\n  if (type && type in MESSAGE_INSTANCE_FACTORY) {\n    return {\n      type: type.toLowerCase(),\n      message: message.message,\n      original: message\n    };\n  }\n\n  return {\n    type: \"error\",\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    message: `${message}`,\n    original: message\n  };\n}\n\nfunction hasMessage(message) {\n  return !!normalizeMessage(message).message;\n}\n\nexports.hasMessage = hasMessage;\n\nclass MessageHandler {\n  constructor(grid, getMessage) {\n    this._attachInfo = null;\n    this._grid = grid;\n    this._messageInstances = {};\n\n    this._bindGridEvent(grid, getMessage);\n  }\n\n  dispose() {\n    var _a;\n\n    const messageInstances = this._messageInstances;\n\n    for (const k in messageInstances) {\n      (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\n    } // @ts-expect-error -- ignore\n\n\n    delete this._messageInstances; // @ts-expect-error -- ignore\n\n    delete this._attachInfo;\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    if (!hasMessage(message)) {\n      return;\n    }\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\n  }\n\n  _attach(col, row, message) {\n    const info = this._attachInfo;\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    if (info && info.instance !== instance) {\n      info.instance.detachMessageElement();\n    }\n\n    instance.attachMessageElement(col, row, normalizeMessage(message));\n    this._attachInfo = {\n      col,\n      row,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || info.col !== col || info.row !== row) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveMessageElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachMessageElement();\n    this._attachInfo = null;\n  }\n\n  _bindGridEvent(grid, getMessage) {\n    const onSelectMessage = sel => {\n      const setMessageData = msg => {\n        if (!hasMessage(msg)) {\n          this._detach();\n        } else {\n          this._attach(sel.col, sel.row, msg);\n        }\n      };\n\n      const message = getMessage(sel.col, sel.row);\n\n      if ((0, utils_1.isPromise)(message)) {\n        this._detach();\n\n        message.then(msg => {\n          const newSel = grid.selection.select;\n\n          if (newSel.col !== sel.col || newSel.row !== sel.row) {\n            return;\n          }\n\n          setMessageData(msg);\n        });\n        return;\n      }\n\n      setMessageData(message);\n    };\n\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (!e.selected) {\n        return;\n      }\n\n      if (e.before.col === e.col && e.before.row === e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const sel = grid.selection.select;\n\n      this._move(sel.col, sel.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      if (!grid.hasFocusGrid()) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (sel.col !== e.col || sel.row !== e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, _e => {\n      const sel = grid.selection.select;\n      onSelectMessage(sel);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, _e => {\n      this._detach();\n    });\n  }\n\n  _getMessageInstanceOfMessage(message) {\n    const messageInstances = this._messageInstances;\n    const {\n      type\n    } = normalizeMessage(message);\n    return messageInstances[type] || (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid));\n  }\n\n}\n\nexports.MessageHandler = MessageHandler;\n\n/***/ }),\n\n/***/ \"./columns/message/WarningMessage.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/WarningMessage.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WarningMessage = void 0;\n\nconst messageUtils = __importStar(__webpack_require__(/*! ./messageUtils */ \"./columns/message/messageUtils.js\"));\n\nconst BaseMessage_1 = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\n\nconst WarningMessageElement_1 = __webpack_require__(/*! ./internal/WarningMessageElement */ \"./columns/message/internal/WarningMessageElement.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\n\nclass WarningMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new WarningMessageElement_1.WarningMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\n          color: bgColor,\n          boxWidth: helper.theme.messages.boxWidth,\n          markHeight: helper.theme.messages.markHeight\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.WarningMessage = WarningMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/ErrorMessageElement.js\":\n/*!*********************************************************!*\\\n  !*** ./columns/message/internal/ErrorMessageElement.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorMessageElement = void 0;\n\nconst MessageElement_1 = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(/*! @/columns/message/internal/ErrorMessageElement.css */ \"../src/js/columns/message/internal/ErrorMessageElement.css\");\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.ErrorMessageElement = ErrorMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/MessageElement.js\":\n/*!****************************************************!*\\\n  !*** ./columns/message/internal/MessageElement.js ***!\n  \\****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MessageElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = \"cheetah-grid__message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createMessageDomElement() {\n  __webpack_require__(/*! @/columns/message/internal/MessageElement.css */ \"../src/js/columns/message/internal/MessageElement.css\");\n\n  const rootElement = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = (0, dom_1.createElement)(\"span\", {\n    classList: [MESSAGE_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass MessageElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createMessageDomElement();\n    this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._rootElement; // @ts-expect-error -- ignore\n\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, message) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = message.message;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      offsetHeight,\n      offsetWidth\n    } = element;\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${left.toFixed()}px`;\n    rootElement.style.width = `${width.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.MessageElement = MessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/WarningMessageElement.js\":\n/*!***********************************************************!*\\\n  !*** ./columns/message/internal/WarningMessageElement.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WarningMessageElement = void 0;\n\nconst MessageElement_1 = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass WarningMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(/*! @/columns/message/internal/WarningMessageElement.css */ \"../src/js/columns/message/internal/WarningMessageElement.css\");\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.WarningMessageElement = WarningMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/messageUtils.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/messageUtils.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\n\nconst Rect_1 = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\n\nfunction drawExclamationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color,\n    boxWidth,\n    markHeight\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - (Number(boxWidth) || 24);\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw exclamation mark\n\n  const fillColor = color;\n  const height = Number(markHeight) || 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5 * 3), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 4, width, height / 5), context, {\n    fillColor\n  });\n}\n\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\n\nfunction drawInformationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color,\n    boxWidth,\n    markHeight\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - (Number(boxWidth) || 24);\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw i mark\n\n  const fillColor = color;\n  const height = Number(markHeight) || 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 2, width, height / 5 * 3), context, {\n    fillColor\n  });\n}\n\nexports.drawInformationMarkBox = drawInformationMarkBox;\n\n/***/ }),\n\n/***/ \"./columns/style.js\":\n/*!**************************!*\\\n  !*** ./columns/style.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nObject.defineProperty(exports, \"BaseStyle\", {\n  enumerable: true,\n  get: function () {\n    return BaseStyle_1.BaseStyle;\n  }\n});\n\nconst ButtonStyle_1 = __webpack_require__(/*! ./style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\nObject.defineProperty(exports, \"ButtonStyle\", {\n  enumerable: true,\n  get: function () {\n    return ButtonStyle_1.ButtonStyle;\n  }\n});\n\nconst CheckStyle_1 = __webpack_require__(/*! ./style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\nObject.defineProperty(exports, \"CheckStyle\", {\n  enumerable: true,\n  get: function () {\n    return CheckStyle_1.CheckStyle;\n  }\n});\n\nconst IconStyle_1 = __webpack_require__(/*! ./style/IconStyle */ \"./columns/style/IconStyle.js\");\n\nObject.defineProperty(exports, \"IconStyle\", {\n  enumerable: true,\n  get: function () {\n    return IconStyle_1.IconStyle;\n  }\n});\n\nconst ImageStyle_1 = __webpack_require__(/*! ./style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\nObject.defineProperty(exports, \"ImageStyle\", {\n  enumerable: true,\n  get: function () {\n    return ImageStyle_1.ImageStyle;\n  }\n});\n\nconst MenuStyle_1 = __webpack_require__(/*! ./style/MenuStyle */ \"./columns/style/MenuStyle.js\");\n\nObject.defineProperty(exports, \"MenuStyle\", {\n  enumerable: true,\n  get: function () {\n    return MenuStyle_1.MenuStyle;\n  }\n});\n\nconst MultilineTextStyle_1 = __webpack_require__(/*! ./style/MultilineTextStyle */ \"./columns/style/MultilineTextStyle.js\");\n\nObject.defineProperty(exports, \"MultilineTextStyle\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextStyle_1.MultilineTextStyle;\n  }\n});\n\nconst NumberStyle_1 = __webpack_require__(/*! ./style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\nObject.defineProperty(exports, \"NumberStyle\", {\n  enumerable: true,\n  get: function () {\n    return NumberStyle_1.NumberStyle;\n  }\n});\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(/*! ./style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", {\n  enumerable: true,\n  get: function () {\n    return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n  }\n});\n\nconst RadioStyle_1 = __webpack_require__(/*! ./style/RadioStyle */ \"./columns/style/RadioStyle.js\");\n\nObject.defineProperty(exports, \"RadioStyle\", {\n  enumerable: true,\n  get: function () {\n    return RadioStyle_1.RadioStyle;\n  }\n});\n\nconst Style_1 = __webpack_require__(/*! ./style/Style */ \"./columns/style/Style.js\");\n\nObject.defineProperty(exports, \"Style\", {\n  enumerable: true,\n  get: function () {\n    return Style_1.Style;\n  }\n});\nconst {\n  EVENT_TYPE\n} = BaseStyle_1.BaseStyle;\nexports.EVENT_TYPE = EVENT_TYPE;\n\nfunction of(columnStyle, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nrecord, StyleClassDef = Style_1.Style, col, row) {\n  if (columnStyle) {\n    if (columnStyle instanceof BaseStyle_1.BaseStyle) {\n      return columnStyle;\n    } else if (typeof columnStyle === \"function\") {\n      return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\n    } else if (record && columnStyle in record) {\n      return of(record[columnStyle], record, StyleClassDef, col, row);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return new StyleClassDef(columnStyle);\n  } else {\n    return StyleClassDef.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/style/BaseStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/BaseStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseStyle = void 0;\n\nconst EventTarget_1 = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\nconst STYLE_EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return STYLE_EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  constructor({\n    bgColor,\n    indicatorTopLeft,\n    indicatorTopRight,\n    indicatorBottomRight,\n    indicatorBottomLeft\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n    this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\n    this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\n    this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\n    this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  get indicatorTopLeft() {\n    return this._indicatorTopLeft;\n  }\n\n  set indicatorTopLeft(indicatorTopLeft) {\n    this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\n    this.doChangeStyle();\n  }\n\n  get indicatorTopRight() {\n    return this._indicatorTopRight;\n  }\n\n  set indicatorTopRight(indicatorTopRight) {\n    this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\n    this.doChangeStyle();\n  }\n\n  get indicatorBottomRight() {\n    return this._indicatorBottomRight;\n  }\n\n  set indicatorBottomRight(indicatorBottomRight) {\n    this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\n    this.doChangeStyle();\n  }\n\n  get indicatorBottomLeft() {\n    return this._indicatorBottomLeft;\n  }\n\n  set indicatorBottomLeft(indicatorBottomLeft) {\n    this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\nfunction normalizeIndicator(indicator) {\n  if (typeof indicator === \"string\") {\n    return {\n      style: indicator\n    };\n  }\n\n  return indicator;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BranchGraphStyle.js\":\n/*!*******************************************!*\\\n  !*** ./columns/style/BranchGraphStyle.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BranchGraphStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\n  switch (index % 3) {\n    case 0:\n      return \"#979797\";\n\n    case 1:\n      return \"#008fb5\";\n\n    case 2:\n      return \"#f1c109\";\n\n    default:\n  }\n\n  return \"#979797\";\n};\n\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BranchGraphStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n    this._margin = style.margin || 4;\n    this._circleSize = style.circleSize || 16;\n    this._branchLineWidth = style.branchLineWidth || 4;\n    this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\n  }\n\n  get branchColors() {\n    return this._branchColors;\n  }\n\n  set branchColors(branchColors) {\n    this._branchColors = branchColors;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  get circleSize() {\n    return this._circleSize;\n  }\n\n  set circleSize(circleSize) {\n    this._circleSize = circleSize;\n    this.doChangeStyle();\n  }\n\n  get branchLineWidth() {\n    return this._branchLineWidth;\n  }\n\n  set branchLineWidth(branchLineWidth) {\n    this._branchLineWidth = branchLineWidth;\n    this.doChangeStyle();\n  }\n\n  get mergeStyle() {\n    return this._mergeStyle;\n  }\n\n  set mergeStyle(mergeStyle) {\n    this._mergeStyle = mergeStyle;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new BranchGraphStyle(this);\n  }\n\n}\n\nexports.BranchGraphStyle = BranchGraphStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ButtonStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/ButtonStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass ButtonStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ButtonStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      buttonBgColor\n    } = style;\n    this._buttonBgColor = buttonBgColor;\n  }\n\n  get buttonBgColor() {\n    return this._buttonBgColor;\n  }\n\n  set buttonBgColor(buttonBgColor) {\n    this._buttonBgColor = buttonBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ButtonStyle(this);\n  }\n\n}\n\nexports.ButtonStyle = ButtonStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/CheckStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/CheckStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckStyle(this);\n  }\n\n}\n\nexports.CheckStyle = CheckStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/IconStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/IconStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IconStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass IconStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new IconStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n  }\n\n  clone() {\n    return new IconStyle(this);\n  }\n\n}\n\nexports.IconStyle = IconStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ImageStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/ImageStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ImageStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    this._imageSizing = style.imageSizing;\n    this._margin = style.margin || 4;\n  }\n\n  get imageSizing() {\n    return this._imageSizing;\n  }\n\n  set imageSizing(imageSizing) {\n    this._imageSizing = imageSizing;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ImageStyle(this);\n  }\n\n}\n\nexports.ImageStyle = ImageStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/MenuStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/MenuStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MenuStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nlet defaultStyle;\n\nclass MenuStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MenuStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    const {\n      appearance\n    } = style;\n    this._appearance = appearance;\n  }\n\n  get appearance() {\n    return this._appearance || \"menulist-button\";\n  }\n\n  set appearance(appearance) {\n    this._appearance = appearance;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new MenuStyle(this);\n  }\n\n}\n\nexports.MenuStyle = MenuStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/MultilineTextStyle.js\":\n/*!*********************************************!*\\\n  !*** ./columns/style/MultilineTextStyle.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass MultilineTextStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textBaseline: \"top\"\n    }));\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  clone() {\n    return new MultilineTextStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.MultilineTextStyle = MultilineTextStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/NumberStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/NumberStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass NumberStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new NumberStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"right\"\n    }));\n  }\n\n  clone() {\n    return new NumberStyle(this);\n  }\n\n}\n\nexports.NumberStyle = NumberStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/PercentCompleteBarStyle.js\":\n/*!**************************************************!*\\\n  !*** ./columns/style/PercentCompleteBarStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PercentCompleteBarStyle = void 0;\n\nconst Style_1 = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\nlet defaultStyle;\n\nconst DEFAULT_BAR_COLOR = num => {\n  if (num > 80) {\n    return \"#20a8d8\";\n  }\n\n  if (num > 50) {\n    return \"#4dbd74\";\n  }\n\n  if (num > 20) {\n    return \"#ffc107\";\n  }\n\n  return \"#f86c6b\";\n};\n\nclass PercentCompleteBarStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new PercentCompleteBarStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._barColor = style.barColor || DEFAULT_BAR_COLOR;\n    this._barBgColor = style.barBgColor || \"#f0f3f5\";\n    this._barHeight = style.barHeight || 3;\n  }\n\n  get barColor() {\n    return this._barColor;\n  }\n\n  set barColor(barColor) {\n    this._barColor = barColor;\n    this.doChangeStyle();\n  }\n\n  get barBgColor() {\n    return this._barBgColor;\n  }\n\n  set barBgColor(barBgColor) {\n    this._barBgColor = barBgColor;\n    this.doChangeStyle();\n  }\n\n  get barHeight() {\n    return this._barHeight;\n  }\n\n  set barHeight(barHeight) {\n    this._barHeight = barHeight;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new PercentCompleteBarStyle(this);\n  }\n\n}\n\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/RadioStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/RadioStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new RadioStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    } = style;\n    this._checkColor = checkColor;\n    this._uncheckBorderColor = uncheckBorderColor;\n    this._checkBorderColor = checkBorderColor;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n  }\n\n  get checkColor() {\n    return this._checkColor;\n  }\n\n  set checkColor(checkColor) {\n    this._checkColor = checkColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBorderColor() {\n    return this._uncheckBorderColor;\n  }\n\n  set uncheckBorderColor(uncheckBorderColor) {\n    this._uncheckBorderColor = uncheckBorderColor;\n    this.doChangeStyle();\n  }\n\n  get checkBorderColor() {\n    return this._checkBorderColor;\n  }\n\n  set checkBorderColor(checkBorderColor) {\n    this._checkBorderColor = checkBorderColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new RadioStyle(this);\n  }\n\n}\n\nexports.RadioStyle = RadioStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/StdBaseStyle.js\":\n/*!***************************************!*\\\n  !*** ./columns/style/StdBaseStyle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdBaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/Style.js\":\n/*!********************************!*\\\n  !*** ./columns/style/Style.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Style = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\nlet defaultStyle;\n\nclass Style extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._padding = style.padding;\n    this._textOverflow = style.textOverflow || \"clip\";\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get padding() {\n    return this._padding;\n  }\n\n  set padding(padding) {\n    this._padding = padding;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n\n/***/ \"./columns/type.js\":\n/*!*************************!*\\\n  !*** ./columns/type.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\n\nconst BranchGraphColumn_1 = __webpack_require__(/*! ./type/BranchGraphColumn */ \"./columns/type/BranchGraphColumn.js\");\n\nObject.defineProperty(exports, \"BranchGraphColumn\", {\n  enumerable: true,\n  get: function () {\n    return BranchGraphColumn_1.BranchGraphColumn;\n  }\n});\n\nconst ButtonColumn_1 = __webpack_require__(/*! ./type/ButtonColumn */ \"./columns/type/ButtonColumn.js\");\n\nObject.defineProperty(exports, \"ButtonColumn\", {\n  enumerable: true,\n  get: function () {\n    return ButtonColumn_1.ButtonColumn;\n  }\n});\n\nconst CheckColumn_1 = __webpack_require__(/*! ./type/CheckColumn */ \"./columns/type/CheckColumn.js\");\n\nObject.defineProperty(exports, \"CheckColumn\", {\n  enumerable: true,\n  get: function () {\n    return CheckColumn_1.CheckColumn;\n  }\n});\n\nconst Column_1 = __webpack_require__(/*! ./type/Column */ \"./columns/type/Column.js\");\n\nObject.defineProperty(exports, \"Column\", {\n  enumerable: true,\n  get: function () {\n    return Column_1.Column;\n  }\n});\n\nconst IconColumn_1 = __webpack_require__(/*! ./type/IconColumn */ \"./columns/type/IconColumn.js\");\n\nObject.defineProperty(exports, \"IconColumn\", {\n  enumerable: true,\n  get: function () {\n    return IconColumn_1.IconColumn;\n  }\n});\n\nconst ImageColumn_1 = __webpack_require__(/*! ./type/ImageColumn */ \"./columns/type/ImageColumn.js\");\n\nObject.defineProperty(exports, \"ImageColumn\", {\n  enumerable: true,\n  get: function () {\n    return ImageColumn_1.ImageColumn;\n  }\n});\n\nconst MenuColumn_1 = __webpack_require__(/*! ./type/MenuColumn */ \"./columns/type/MenuColumn.js\");\n\nObject.defineProperty(exports, \"MenuColumn\", {\n  enumerable: true,\n  get: function () {\n    return MenuColumn_1.MenuColumn;\n  }\n});\n\nconst MultilineTextColumn_1 = __webpack_require__(/*! ./type/MultilineTextColumn */ \"./columns/type/MultilineTextColumn.js\");\n\nObject.defineProperty(exports, \"MultilineTextColumn\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextColumn_1.MultilineTextColumn;\n  }\n});\n\nconst NumberColumn_1 = __webpack_require__(/*! ./type/NumberColumn */ \"./columns/type/NumberColumn.js\");\n\nObject.defineProperty(exports, \"NumberColumn\", {\n  enumerable: true,\n  get: function () {\n    return NumberColumn_1.NumberColumn;\n  }\n});\n\nconst PercentCompleteBarColumn_1 = __webpack_require__(/*! ./type/PercentCompleteBarColumn */ \"./columns/type/PercentCompleteBarColumn.js\");\n\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", {\n  enumerable: true,\n  get: function () {\n    return PercentCompleteBarColumn_1.PercentCompleteBarColumn;\n  }\n});\n\nconst RadioColumn_1 = __webpack_require__(/*! ./type/RadioColumn */ \"./columns/type/RadioColumn.js\");\n\nObject.defineProperty(exports, \"RadioColumn\", {\n  enumerable: true,\n  get: function () {\n    return RadioColumn_1.RadioColumn;\n  }\n});\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Column_1.Column(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  NUMBER: new NumberColumn_1.NumberColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckColumn_1.CheckColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  RADIO: new RadioColumn_1.RadioColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  BUTTON: new ButtonColumn_1.ButtonColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  IMAGE: new ImageColumn_1.ImageColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn()\n};\n\nfunction of(columnType) {\n  if (!columnType) {\n    return TYPES.DEFAULT;\n  } else if (typeof columnType === \"string\") {\n    const key = columnType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return columnType;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./columns/type/BaseColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/BaseColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseColumn = void 0;\n\nconst styleContents = __importStar(__webpack_require__(/*! ../style */ \"./columns/style.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseStyle_1 = __webpack_require__(/*! ../style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst handlers_1 = __webpack_require__(/*! ../indicator/handlers */ \"./columns/indicator/handlers.js\");\n\nconst {\n  setReadonly\n} = utils_1.obj;\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\n\nfunction isFadeinWhenCallbackInPromise(column, grid) {\n  if (column.fadeinWhenCallbackInPromise != null) {\n    return column.fadeinWhenCallbackInPromise;\n  }\n\n  return !!grid.configure(\"fadeinWhenCallbackInPromise\");\n}\n\nfunction getFadeinState(grid) {\n  let state = grid[COLUMN_FADEIN_STATE_ID];\n\n  if (!state) {\n    state = {\n      cells: {}\n    };\n    setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\n  }\n\n  return state;\n}\n\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n  return point => {\n    const state = getFadeinState(grid);\n    const stateKey = `${row}:${col}`;\n\n    if (point === 1) {\n      delete state.cells[stateKey];\n    } else {\n      state.cells[stateKey] = {\n        opacity: point\n      };\n    }\n\n    drawCellBase();\n    drawInternal();\n    const cellState = state.cells[stateKey];\n\n    if (cellState) {\n      //\n      const ctx = context.getContext();\n      ctx.globalAlpha = 1 - cellState.opacity;\n\n      try {\n        drawCellBase();\n      } finally {\n        ctx.globalAlpha = 1;\n      }\n    }\n  };\n}\n\nconst fadeinMgr = {\n  animate(grid, col, row, context, drawInternal, drawCellBase) {\n    // fadein animation\n    const state = getFadeinState(grid);\n    const activeFadeins = [_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase)];\n    state.activeFadeins = activeFadeins;\n    (0, animate_1.animate)(500, point => {\n      activeFadeins.forEach(f => f(point));\n\n      if (point === 1) {\n        delete state.activeFadeins;\n      }\n    });\n  },\n\n  margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n    const state = getFadeinState(grid);\n\n    if (state.activeFadeins) {\n      state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n    } else {\n      drawInternal();\n    }\n  }\n\n};\n\nclass BaseColumn {\n  constructor(option) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n    //Promisecallback\n\n    this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\n  }\n\n  get fadeinWhenCallbackInPromise() {\n    return this._fadeinWhenCallbackInPromise;\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    var _a;\n\n    const {\n      style,\n      getRecord,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase();\n    const record = getRecord();\n    let promise;\n\n    if ((0, utils_1.isPromise)(record)) {\n      promise = record;\n    } else if ((0, utils_1.isPromise)(cellValue)) {\n      promise = cellValue;\n    } else {\n      const msg = info.getMessage();\n\n      if ((0, utils_1.isPromise)(msg)) {\n        promise = msg;\n      }\n    } //\n\n\n    if (promise) {\n      const start = Date.now();\n      return Promise.all([record, cellValue, promise.then(() => cellValue).then(() => info.getMessage())]).then(({\n        0: record,\n        1: val,\n        2: message\n      }) => {\n        const currentContext = context.toCurrentContext();\n        const drawRect = currentContext.getDrawRect();\n\n        if (!drawRect) {\n          return;\n        }\n\n        const time = Date.now() - start;\n\n        const drawInternal = () => {\n          const currentContext = context.toCurrentContext();\n          const drawRect = currentContext.getDrawRect();\n\n          if (!drawRect) {\n            return;\n          }\n\n          const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\n          this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\n          this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\n          this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\n        };\n\n        if (!isFadeinWhenCallbackInPromise(this, grid)) {\n          drawInternal(); //\n        } else {\n          const {\n            col,\n            row\n          } = context;\n\n          if (time < 80) {\n            //80msPromiseCallback\n            fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n          } else {\n            //\n            fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n          }\n        }\n      });\n    } else {\n      const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\n      this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\n      this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n      this.drawIndicatorsInternal(context, actStyle, helper, grid, info); //\n\n      const {\n        col,\n        row\n      } = context;\n      const stateKey = `${col}:${row}`;\n      const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\n\n      if (cellState) {\n        const ctx = context.getContext();\n        ctx.globalAlpha = 1 - cellState.opacity;\n\n        try {\n          drawCellBase();\n        } finally {\n          ctx.globalAlpha = 1;\n        }\n      }\n\n      return undefined;\n    }\n  }\n\n  convertInternal(value) {\n    return value != null ? value : \"\";\n  }\n\n  drawMessageInternal(message, context, style, helper, grid, info) {\n    info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\n  }\n\n  drawIndicatorsInternal(context, style, helper, grid, info) {\n    var _a;\n\n    const {\n      indicatorTopLeft,\n      indicatorTopRight,\n      indicatorBottomRight,\n      indicatorBottomLeft\n    } = style;\n\n    for (const [indicatorStyle, kind] of [[indicatorTopLeft, 0\n    /* DrawIndicatorKind.topLeft */\n    ], [indicatorTopRight, 1\n    /* DrawIndicatorKind.topRight */\n    ], [indicatorBottomRight, 2\n    /* DrawIndicatorKind.bottomRight */\n    ], [indicatorBottomLeft, 3\n    /* DrawIndicatorKind.bottomLeft */\n    ]]) {\n      if (indicatorStyle) {\n        (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\n      }\n    }\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  getCopyCellValue(value, _grid, _cell) {\n    return value;\n  }\n\n}\n\nexports.BaseColumn = BaseColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/BranchGraphColumn.js\":\n/*!*******************************************!*\\\n  !*** ./columns/type/BranchGraphColumn.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BranchGraphColumn = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst BranchGraphStyle_1 = __webpack_require__(/*! ../style/BranchGraphStyle */ \"./columns/style/BranchGraphStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\n\nfunction getAllColumnData(grid, field, callback) {\n  const {\n    dataSource\n  } = grid;\n  const allData = [];\n  let promise;\n\n  for (let index = 0; index < dataSource.length; index++) {\n    const data = dataSource.getField(index, field);\n\n    if ((0, utils_1.isPromise)(data)) {\n      const dataIndex = allData.length;\n      allData.push(undefined);\n\n      if (!promise) {\n        promise = data.then(d => {\n          allData[dataIndex] = d;\n        });\n      } else {\n        promise = promise.then(() => data).then(d => {\n          allData[dataIndex] = d;\n        });\n      }\n    } else {\n      allData.push(data);\n    }\n  }\n\n  if (promise) {\n    promise.then(() => callback(allData));\n  } else {\n    callback(allData);\n  }\n}\n\nclass BranchLine {\n  constructor({\n    fromIndex,\n    toIndex,\n    colorIndex,\n    point\n  }) {\n    this.fromIndex = fromIndex;\n    this.toIndex = toIndex;\n    this.colorIndex = colorIndex;\n    this.point = point;\n  }\n\n}\n\nclass BranchPoint {\n  constructor({\n    index,\n    commit = false,\n    lines = [],\n    tag\n  }) {\n    this.index = index;\n    this.commit = commit;\n    this.lines = lines;\n    this.tag = tag;\n  }\n\n  static mergeLines(lines) {\n    const result = lines.filter(l => l.fromIndex != null && l.toIndex != null);\n    const froms = lines.filter(l => l.fromIndex != null && l.toIndex == null);\n    const tos = lines.filter(l => l.fromIndex == null && l.toIndex != null);\n    froms.forEach(f => {\n      for (let i = 0; i < tos.length; i++) {\n        const t = tos[i];\n\n        if (t.point) {\n          continue;\n        }\n\n        if (f.colorIndex === t.colorIndex) {\n          f.toIndex = t.toIndex;\n          tos.splice(i, 1);\n          break;\n        }\n      }\n\n      result.push(f);\n    });\n    return result.concat(tos);\n  }\n\n  static merge(a, b) {\n    if (!a) {\n      return b;\n    }\n\n    return new BranchPoint({\n      index: a.index,\n      commit: a.commit || b.commit,\n      lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n      tag: a.tag || b.tag\n    });\n  }\n\n}\n\nfunction joinLine(timeline, branchIndex) {\n  const reverse = [...timeline].reverse();\n\n  for (let i = 0; i < reverse.length; i++) {\n    const f = reverse[i][branchIndex];\n\n    if (f) {\n      f.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\n        toIndex: branchIndex,\n        colorIndex: branchIndex\n      })]));\n\n      for (let j = 0; j < i; j++) {\n        const tl = reverse[j];\n        tl[branchIndex] = new BranchPoint({\n          index: branchIndex,\n          lines: [new BranchLine({\n            fromIndex: branchIndex,\n            toIndex: branchIndex,\n            colorIndex: branchIndex\n          })]\n        });\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction branch({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = from != null ? branches.indexOf(from) : -1;\n  let toIndex = branches.indexOf(to);\n\n  if (toIndex < 0) {\n    toIndex = branches.length;\n    branches.push(to);\n  }\n\n  function findBranchRootIndex() {\n    for (let index = timeline.length - 1; index >= 0; index--) {\n      const tl = timeline[index];\n      const from = tl[fromIndex];\n\n      if (from && from.commit) {\n        return index;\n      }\n    }\n\n    return -1;\n  }\n\n  if (fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex\n    });\n  } else {\n    const fromTargetIndex = findBranchRootIndex();\n\n    if (fromTargetIndex === -1) {\n      return null;\n    }\n\n    const branchTargetFromIndex = fromTargetIndex + 1;\n    const branchPoint = new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        fromIndex,\n        colorIndex: toIndex\n      })]\n    });\n    let point;\n    let result = null;\n\n    if (branchTargetFromIndex < timeline.length) {\n      const targetLine = timeline[branchTargetFromIndex];\n      point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n    } else {\n      point = branchPoint;\n      result = branchPoint;\n    }\n\n    const from = timeline[fromTargetIndex][fromIndex];\n    from.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\n      toIndex,\n      colorIndex: toIndex,\n      point\n    })]));\n    return result;\n  }\n}\n\nfunction commit({\n  timeline,\n  branches\n}, name) {\n  const index = branches.indexOf(name);\n\n  if (index < 0) {\n    return null;\n  }\n\n  const result = new BranchPoint({\n    index,\n    commit: true\n  });\n\n  if (joinLine(timeline, index)) {\n    result.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\n      fromIndex: index,\n      colorIndex: index\n    })]));\n  }\n\n  return result;\n}\n\nfunction commitTag({\n  branches\n}, name, tag) {\n  let index = branches.indexOf(name);\n\n  if (index < 0) {\n    index = branches.length;\n    branches.push(name);\n  }\n\n  return new BranchPoint({\n    index,\n    tag\n  });\n}\n\nfunction commitMerge({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = branches.indexOf(from);\n  const toIndex = branches.indexOf(to);\n\n  if (toIndex < 0 || fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex,\n      commit: true\n    });\n  }\n\n  const result = new BranchPoint({\n    index: toIndex,\n    commit: true,\n    lines: [new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    }), new BranchLine({\n      fromIndex: toIndex,\n      colorIndex: toIndex\n    })]\n  });\n  const froms = [...timeline];\n  const fromTargetLine = froms.pop();\n\n  if (fromTargetLine) {\n    fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        toIndex,\n        colorIndex: fromIndex\n      })]\n    }));\n  }\n\n  if (joinLine(froms, fromIndex) && fromTargetLine) {\n    fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    })]));\n  }\n\n  joinLine(timeline, toIndex);\n  return result;\n}\n\nfunction calcCommand(info, command) {\n  const {\n    timeline\n  } = info;\n  const timelineData = []; // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n\n  const commands = Array.isArray(command) ? command : [command];\n  commands.forEach(cmd => {\n    if (!cmd) {\n      return;\n    }\n\n    let point;\n\n    if (cmd.command === \"branch\") {\n      const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\n      const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n      point = branch(info, from, to);\n    } else if (cmd.command === \"commit\") {\n      const {\n        branch\n      } = cmd;\n      point = commit(info, branch);\n    } else if (cmd.command === \"merge\") {\n      const {\n        from,\n        to\n      } = cmd.branch;\n      point = commitMerge(info, from, to);\n    } else if (cmd.command === \"tag\") {\n      const {\n        branch,\n        tag\n      } = cmd;\n      point = commitTag(info, branch, tag);\n    }\n\n    if (point && point.index > -1) {\n      timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n    }\n  });\n  timeline.push(timelineData);\n}\n\nfunction calcBranchesInfo(start, grid, field) {\n  const result = {\n    branches: [],\n    timeline: []\n  };\n  getAllColumnData(grid, field, data => {\n    if (start !== \"top\") {\n      data = [...data].reverse();\n    }\n\n    data.forEach(command => {\n      calcCommand(result, command);\n    });\n  });\n  return result;\n}\n\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n  let w = Math.max(width / branches.length + 1, 5);\n  timeline.forEach(tl => {\n    tl.forEach((p, index) => {\n      if (index <= 0) {\n        // \n        return;\n      }\n\n      if (p.tag) {\n        const textWidth = ctx.measureText(p.tag).width;\n\n        if (w * index + radius * 2 + 4 + textWidth > width) {\n          w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n        }\n      }\n    });\n  });\n  const result = [];\n  let x = left;\n  branches.forEach(() => {\n    result.push(Math.ceil(x + radius));\n    x += w;\n  });\n  return result;\n}\n\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\n  branchXPoints,\n  // margin,\n  branchColors,\n  branchLineWidth,\n  mergeStyle\n}, {\n  // width,\n  col,\n  row,\n  branches\n}) {\n  if (upLineIndex != null || downLineIndex != null) {\n    ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\n    ctx.lineWidth = branchLineWidth;\n    ctx.lineCap = \"round\";\n    ctx.beginPath();\n\n    if (upLineIndex != null) {\n      const upX = branchXPoints[upLineIndex];\n      const upRect = grid.getCellRelativeRect(col, row - 1);\n      const upY = upRect.top + upRect.height / 2;\n      ctx.moveTo(upX, upY);\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    } else {\n      ctx.moveTo(x, y);\n    }\n\n    if (downLineIndex != null) {\n      const downX = branchXPoints[downLineIndex];\n      const downRect = grid.getCellRelativeRect(col, row + 1);\n      const downY = downRect.top + downRect.height / 2;\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n      } else {\n        ctx.lineTo(downX, downY);\n      }\n    }\n\n    ctx.stroke();\n  }\n}\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\n\n\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._start = option.start || \"bottom\";\n    this._cache = option.cache != null ? option.cache : false;\n  }\n\n  get StyleClass() {\n    return BranchGraphStyle_1.BranchGraphStyle;\n  }\n\n  clearCache(grid) {\n    delete grid[_];\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    if (this._cache) {\n      const state = grid[_] || (grid[_] = new Map());\n      const {\n        col,\n        row\n      } = context;\n      const field = grid.getField(col, row);\n\n      if (!state.has(field)) {\n        state.set(field, calcBranchesInfo(this._start, grid, field));\n      }\n    }\n\n    return super.onDrawCell(cellValue, info, context, grid);\n  }\n\n  clone() {\n    return new BranchGraphColumn(this);\n  }\n\n  drawInternal(_value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a, _b;\n\n    const {\n      col,\n      row\n    } = context;\n    const field = grid.getField(col, row);\n    const {\n      timeline,\n      branches\n    } = (_b = this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\n    const {\n      upLineIndexKey,\n      downLineIndexKey\n    } = this._start !== \"top\" ? {\n      upLineIndexKey: \"toIndex\",\n      downLineIndexKey: \"fromIndex\"\n    } : {\n      upLineIndexKey: \"fromIndex\",\n      downLineIndexKey: \"toIndex\"\n    };\n    const data = this._start !== \"top\" ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\n    const {\n      branchColors,\n      branchLineWidth,\n      circleSize,\n      mergeStyle,\n      margin,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const rect = context.getRect();\n    const radius = circleSize / 2;\n    const width = rect.width - margin * 2;\n    helper.drawWithClip(context, ctx => {\n      ctx.textAlign = \"left\";\n      ctx.textBaseline = \"middle\";\n      const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n      const y = rect.top + rect.height / 2; // draw join lines\n\n      data.map((point, index) => point ? point.lines.map(line => ({\n        colorIndex: line.colorIndex,\n        upLineIndex: line[upLineIndexKey],\n        downLineIndex: line[downLineIndexKey],\n        pointIndex: index\n      })) : []).reduce((p, c) => p.concat(c), []) // flatMap\n      // order of overlap\n      .sort((a, b) => b.colorIndex - a.colorIndex).forEach(line => {\n        const x = branchXPoints[line.pointIndex];\n        renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n          margin,\n          branchXPoints,\n          branchLineWidth,\n          branchColors,\n          mergeStyle\n        }, {\n          width,\n          col,\n          row,\n          branches\n        });\n      }); // draw commit points\n\n      data.forEach((p, index) => {\n        if (p && p.commit) {\n          const x = branchXPoints[index];\n          ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\n          ctx.beginPath();\n          ctx.arc(x, y, radius, 0, Math.PI * 2, true);\n          ctx.fill();\n          ctx.closePath();\n        }\n      }); // draw tags\n\n      data.forEach((p, index) => {\n        if (p && p.tag) {\n          ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\n          ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n        }\n      });\n    });\n  }\n\n}\n\nexports.BranchGraphColumn = BranchGraphColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/ButtonColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/ButtonColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ButtonColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst ButtonStyle_1 = __webpack_require__(/*! ../style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\n\nclass ButtonColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._caption = option.caption;\n  }\n\n  get StyleClass() {\n    return ButtonStyle_1.ButtonStyle;\n  }\n\n  get caption() {\n    return this._caption;\n  }\n\n  withCaption(caption) {\n    const c = this.clone();\n    c._caption = caption;\n    return c;\n  }\n\n  clone() {\n    return new ButtonColumn(this);\n  }\n\n  convertInternal(value) {\n    return this._caption || super.convertInternal(value);\n  }\n\n  getCopyCellValue(value) {\n    return this._caption || value;\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      bgColor,\n      color,\n      buttonBgColor,\n      font,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    let active = false;\n    const state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (state) {\n      if (state.mouseActiveCell && (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\n        active = true;\n      } else {\n        const {\n          select\n        } = context.getSelection();\n\n        if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\n          active = true;\n        }\n      }\n    }\n\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.button(textValue, context, {\n        textAlign,\n        textBaseline,\n        bgColor: buttonBgColor,\n        color,\n        font,\n        padding,\n        shadow: active ? {\n          color: \"rgba(0, 0, 0, 0.48)\",\n          blur: 6,\n          offsetY: 3\n        } : {},\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.ButtonColumn = ButtonColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/CheckColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/CheckColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst CheckStyle_1 = __webpack_require__(/*! ../style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\n\nclass CheckColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return CheckStyle_1.CheckStyle;\n  }\n\n  clone() {\n    return new CheckColumn(this);\n  }\n\n  convertInternal(value) {\n    return (0, utils_1.toBoolean)(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.checkbox(value, context, opt);\n  }\n\n}\n\nexports.CheckColumn = CheckColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/Column.js\":\n/*!********************************!*\\\n  !*** ./columns/type/Column.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Column = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst Style_1 = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\nclass Column extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  clone() {\n    return new Column(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.text(textValue, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.Column = Column;\n\n/***/ }),\n\n/***/ \"./columns/type/IconColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/IconColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IconColumn = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\"));\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst IconStyle_1 = __webpack_require__(/*! ../style/IconStyle */ \"./columns/style/IconStyle.js\");\n\nfunction repeatArray(val, count) {\n  if (count === Infinity) {\n    count = 0;\n  }\n\n  const a = [];\n\n  for (let i = 0; i < count; i++) {\n    a.push(val);\n  }\n\n  return a;\n}\n\nclass IconColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._tagName = option.tagName || \"i\";\n    this._className = option.className;\n    this._content = option.content;\n    this._name = option.name;\n    this._iconWidth = option.iconWidth;\n  }\n\n  get StyleClass() {\n    return IconStyle_1.IconStyle;\n  }\n\n  clone() {\n    return new IconColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    const num = Number(value);\n\n    if (!isNaN(num)) {\n      const icon = {};\n      icons.iconPropKeys.forEach(k => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        icon[k] = style[k];\n      });\n      icon.className = this._className;\n      icon.tagName = this._tagName;\n\n      if (this._content) {\n        icon.content = this._content;\n      }\n\n      icon.name = this._name;\n\n      if (this._iconWidth) {\n        icon.width = this._iconWidth;\n      }\n\n      info.getIcon = () => repeatArray(icon, num);\n    } else {\n      info.getIcon = () => null;\n    }\n\n    super.drawInternal(\"\", context, style, helper, grid, info);\n  }\n\n}\n\nexports.IconColumn = IconColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/ImageColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/ImageColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst ImageStyle_1 = __webpack_require__(/*! ../style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\nconst imgs_1 = __webpack_require__(/*! ../../internal/imgs */ \"./internal/imgs.js\");\n\nconst MAX_LRU_CACHE_SIZE = 50;\n\nfunction getImage(url) {\n  return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\n}\n\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n  let newWidth = width;\n  let newHeight = height;\n\n  if (newWidth > maxWidth) {\n    newWidth = maxWidth;\n    newHeight = newWidth * height / width;\n  }\n\n  if (newHeight > maxHeight) {\n    newHeight = maxHeight;\n    newWidth = newHeight * width / height;\n  }\n\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n}\n\nclass ImageColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return ImageStyle_1.ImageStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    return super.onDrawCell(getImage(cellValue), info, context, grid);\n  }\n\n  clone() {\n    return new ImageColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase\n  }) {\n    if (value) {\n      const {\n        textAlign,\n        textBaseline,\n        margin,\n        bgColor\n      } = style;\n\n      if (bgColor) {\n        drawCellBase({\n          bgColor\n        });\n      }\n\n      helper.drawWithClip(context, ctx => {\n        ctx.textAlign = textAlign;\n        ctx.textBaseline = textBaseline;\n        const rect = context.getRect();\n\n        if (style.imageSizing === \"keep-aspect-ratio\") {\n          const {\n            width,\n            height\n          } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n          const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\n            offset: margin\n          });\n          ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n        } else {\n          ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n        }\n      });\n    }\n  }\n\n}\n\nexports.ImageColumn = ImageColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/MenuColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/MenuColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MenuColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst MenuStyle_1 = __webpack_require__(/*! ../style/MenuStyle */ \"./columns/style/MenuStyle.js\");\n\nconst menu_items_1 = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nclass MenuColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._options = (0, menu_items_1.normalize)(option.options);\n  }\n\n  get StyleClass() {\n    return MenuStyle_1.MenuStyle;\n  }\n\n  clone() {\n    return new MenuColumn(this);\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  withOptions(options) {\n    const c = this.clone();\n    c._options = (0, menu_items_1.normalize)(options);\n    return c;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      font,\n      bgColor,\n      padding,\n      textOverflow,\n      appearance\n    } = style;\n    let {\n      color\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const convertedValue = this._convertInternal(value);\n\n    const text = convertedValue != null ? String(convertedValue) : \"\";\n    helper.testFontLoad(font, text, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\n      const textPadding = basePadding.slice(0);\n      textPadding[1] += 26; // icon padding\n\n      const iconPadding = basePadding.slice(0);\n      iconPadding[1] += 8;\n\n      if (color == null && (value == null || value === \"\")) {\n        color = \"rgba(0, 0, 0, .38)\";\n      }\n\n      helper.text(text, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding: textPadding,\n        textOverflow,\n        icons\n      });\n\n      if (appearance === \"menulist-button\") {\n        // draw dropdown arrow icon\n        helper.text(\"\", context, {\n          textAlign: \"right\",\n          textBaseline,\n          color,\n          font,\n          icons: [{\n            path: \"M0 2 5 7 10 2z\",\n            width: 10,\n            color: \"rgba(0, 0, 0, .54)\"\n          }],\n          padding: iconPadding\n        });\n      } else if (appearance !== \"none\") {\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        console.warn(`unsupported appearance:${appearance}`);\n      }\n    });\n  }\n\n  convertInternal(value) {\n    return value;\n  }\n\n  _convertInternal(value) {\n    const options = this._options;\n\n    for (let i = 0; i < options.length; i++) {\n      const option = options[i];\n\n      if (option.value === value) {\n        value = option.label;\n        break;\n      }\n    }\n\n    return super.convertInternal(value);\n  }\n\n  getCopyCellValue(value) {\n    return this._convertInternal(value);\n  }\n\n}\n\nexports.MenuColumn = MenuColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/MultilineTextColumn.js\":\n/*!*********************************************!*\\\n  !*** ./columns/type/MultilineTextColumn.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextColumn = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst MultilineTextStyle_1 = __webpack_require__(/*! ../style/MultilineTextStyle */ \"./columns/style/MultilineTextStyle.js\");\n\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  get StyleClass() {\n    return MultilineTextStyle_1.MultilineTextStyle;\n  }\n\n  clone() {\n    return new MultilineTextColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.multilineText(multilines, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.MultilineTextColumn = MultilineTextColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/NumberColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/NumberColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberColumn = void 0;\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst NumberStyle_1 = __webpack_require__(/*! ../style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\nlet defaultFotmat;\n\nclass NumberColumn extends Column_1.Column {\n  static get defaultFotmat() {\n    return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n  }\n\n  static set defaultFotmat(fmt) {\n    defaultFotmat = fmt;\n  }\n\n  constructor(option = {}) {\n    super(option);\n    this._format = option.format;\n  }\n\n  get StyleClass() {\n    return NumberStyle_1.NumberStyle;\n  }\n\n  clone() {\n    return new NumberColumn(this);\n  }\n\n  get format() {\n    return this._format;\n  }\n\n  withFormat(format) {\n    const c = this.clone();\n    c._format = format;\n    return c;\n  }\n\n  convertInternal(value) {\n    const num = Number(value);\n\n    if (isNaN(num)) {\n      const convertedValue = super.convertInternal(value);\n      return convertedValue != null ? String(convertedValue) : \"\";\n    }\n\n    const format = this._format || NumberColumn.defaultFotmat;\n    return format.format(num);\n  }\n\n}\n\nexports.NumberColumn = NumberColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/PercentCompleteBarColumn.js\":\n/*!**************************************************!*\\\n  !*** ./columns/type/PercentCompleteBarColumn.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PercentCompleteBarColumn = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst Column_1 = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(/*! ../style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\nconst MARGIN = 2;\n\nclass PercentCompleteBarColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._min = option.min || 0;\n    this._max = option.max || this._min + 100;\n\n    this._formatter = option.formatter || (v => v);\n  }\n\n  get StyleClass() {\n    return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n  }\n\n  clone() {\n    return new PercentCompleteBarColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    super.drawInternal(this._formatter(value), context, style, helper, grid, info);\n    const {\n      barColor,\n      barBgColor,\n      barHeight\n    } = style;\n    let textValue = value != null ? String(value) : \"\";\n\n    if (utils_1.str.endsWith(textValue, \"%\")) {\n      textValue = textValue.slice(0, -1);\n    }\n\n    const num = Number(textValue);\n\n    if (isNaN(num)) {\n      return;\n    }\n\n    const rate = num < this._min ? 0 : num > this._max ? 1 : (num - this._min) / (this._max - this._min);\n    helper.drawWithClip(context, ctx => {\n      const rect = context.getRect();\n      const barMaxWidth = rect.width - MARGIN * 2 - 1;\n      /**/\n\n      const barTop = rect.bottom - MARGIN - barHeight - 1;\n      /**/\n\n      const barLeft = rect.left + MARGIN;\n      ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n      ctx.fill();\n      const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n      ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barSize, barHeight);\n      ctx.fill();\n    });\n  }\n\n}\n\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/RadioColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/RadioColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RadioColumn = void 0;\n\nconst BaseColumn_1 = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\nconst RadioStyle_1 = __webpack_require__(/*! ../style/RadioStyle */ \"./columns/style/RadioStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../utils */ \"./columns/utils/index.js\");\n\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\n\nclass RadioColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return RadioStyle_1.RadioStyle;\n  }\n\n  clone() {\n    return new RadioColumn(this);\n  }\n\n  convertInternal(value) {\n    return (0, utils_1.toBoolean)(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.radioButton(value, context, opt);\n  }\n\n}\n\nexports.RadioColumn = RadioColumn;\n\n/***/ }),\n\n/***/ \"./columns/type/columnUtils.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/columnUtils.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadIcons = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nfunction loadIcons(icon, context, helper, callback) {\n  let argIcon = undefined;\n\n  if (icon) {\n    if ((0, utils_1.isPromise)(icon)) {\n      icon.then(i => {\n        loadIcons(i, context.toCurrentContext(), helper, callback);\n      });\n    } else {\n      const iconList = icons.toNormalizeArray(icon);\n      iconList.forEach(i => {\n        if (i.font && i.content) {\n          helper.testFontLoad(i.font, i.content, context);\n        }\n      });\n      argIcon = iconList;\n    }\n  }\n\n  callback(argIcon, context);\n}\n\nexports.loadIcons = loadIcons;\n\n/***/ }),\n\n/***/ \"./columns/utils/index.js\":\n/*!********************************!*\\\n  !*** ./columns/utils/index.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toBoolean = void 0;\n\nfunction toBoolean(val) {\n  if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return false;\n    } else if (val === \"off\") {\n      return false;\n    } else if (/^0+$/.exec(val)) {\n      return false;\n    }\n  }\n\n  return Boolean(val);\n}\n\nexports.toBoolean = toBoolean;\n\n/***/ }),\n\n/***/ \"./core.js\":\n/*!*****************!*\\\n  !*** ./core.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\n\nconst DrawGrid_1 = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\nObject.defineProperty(exports, \"DrawGrid\", {\n  enumerable: true,\n  get: function () {\n    return DrawGrid_1.DrawGrid;\n  }\n});\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ./core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nObject.defineProperty(exports, \"EVENT_TYPE\", {\n  enumerable: true,\n  get: function () {\n    return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n  }\n});\n\n/***/ }),\n\n/***/ \"./core/DG_EVENT_TYPE.js\":\n/*!*******************************!*\\\n  !*** ./core/DG_EVENT_TYPE.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DG_EVENT_TYPE = void 0;\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\n\nexports.DG_EVENT_TYPE = {\n  CLICK_CELL: \"click_cell\",\n  DBLCLICK_CELL: \"dblclick_cell\",\n  DBLTAP_CELL: \"dbltap_cell\",\n  MOUSEDOWN_CELL: \"mousedown_cell\",\n  MOUSEUP_CELL: \"mouseup_cell\",\n  SELECTED_CELL: \"selected_cell\",\n  KEYDOWN: \"keydown\",\n  MOUSEMOVE_CELL: \"mousemove_cell\",\n  MOUSEENTER_CELL: \"mouseenter_cell\",\n  MOUSELEAVE_CELL: \"mouseleave_cell\",\n  MOUSEOVER_CELL: \"mouseover_cell\",\n  MOUSEOUT_CELL: \"mouseout_cell\",\n  TOUCHSTART_CELL: \"touchstart_cell\",\n  CONTEXTMENU_CELL: \"contextmenu_cell\",\n  INPUT_CELL: \"input_cell\",\n  PASTE_CELL: \"paste_cell\",\n  DELETE_CELL: \"delete_cell\",\n  EDITABLEINPUT_CELL: \"editableinput_cell\",\n  MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\n  RESIZE_COLUMN: \"resize_column\",\n  SCROLL: \"scroll\",\n  FOCUS_GRID: \"focus_grid\",\n  BLUR_GRID: \"blur_grid\"\n};\n\n/***/ }),\n\n/***/ \"./core/DrawGrid.js\":\n/*!**************************!*\\\n  !*** ./core/DrawGrid.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DrawGrid = void 0;\n\nconst calc = __importStar(__webpack_require__(/*! ../internal/calc */ \"./internal/calc.js\"));\n\nconst hiDPI = __importStar(__webpack_require__(/*! ../internal/hiDPI */ \"./internal/hiDPI.js\"));\n\nconst style = __importStar(__webpack_require__(/*! ../internal/style */ \"./internal/style.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst paste_utils_1 = __webpack_require__(/*! ../internal/paste-utils */ \"./internal/paste-utils.js\");\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ./DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst EventTarget_1 = __webpack_require__(/*! ./EventTarget */ \"./core/EventTarget.js\");\n\nconst NumberMap_1 = __webpack_require__(/*! ../internal/NumberMap */ \"./internal/NumberMap.js\");\n\nconst Rect_1 = __webpack_require__(/*! ../internal/Rect */ \"./internal/Rect.js\");\n\nconst Scrollable_1 = __webpack_require__(/*! ../internal/Scrollable */ \"./internal/Scrollable.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\"); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst {\n  /** @private */\n  isTouchEvent,\n\n  /** @private */\n  getMouseButtons,\n\n  /** @private */\n  getKeyCode,\n\n  /** @private */\n  cancel: cancelEvent\n} = utils_1.event;\n/** @private */\n\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\n/** @private */\n\n\nfunction createRootElement() {\n  const element = document.createElement(\"div\");\n  element.classList.add(\"cheetah-grid\");\n  return element;\n}\n/** @private */\n\n\nconst KEY_BS = 8;\n/** @private */\n\nconst KEY_TAB = 9;\n/** @private */\n\nconst KEY_ENTER = 13;\n/** @private */\n\nconst KEY_END = 35;\n/** @private */\n\nconst KEY_HOME = 36;\n/** @private */\n\nconst KEY_LEFT = 37;\n/** @private */\n\nconst KEY_UP = 38;\n/** @private */\n\nconst KEY_RIGHT = 39;\n/** @private */\n\nconst KEY_DOWN = 40;\n/** @private */\n\nconst KEY_DEL = 46;\n/** @private */\n\nconst KEY_ALPHA_A = 65;\n/** @private */\n\nconst KEY_ALPHA_C = 67;\n/** @private */\n\nconst KEY_ALPHA_V = 86; //private methods\n\n/** @private */\n\nfunction _vibrate(e) {\n  if (navigator.vibrate && isTouchEvent(e)) {\n    navigator.vibrate(50);\n  }\n}\n/** @private */\n\n\nfunction _getTargetRowAt(absoluteY) {\n  const internal = this.getTargetRowAtInternal(absoluteY);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const findBefore = (startRow, startBottom) => {\n    let bottom = startBottom;\n\n    for (let row = startRow; row >= 0; row--) {\n      const height = _getRowHeight.call(this, row);\n\n      const top = bottom - height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      bottom = top;\n    }\n\n    return null;\n  };\n\n  const findAfter = (startRow, startBottom) => {\n    let top = startBottom - _getRowHeight.call(this, startRow);\n\n    const {\n      rowCount\n    } = this[_];\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = top + height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      top = bottom;\n    }\n\n    return null;\n  };\n\n  const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\n\n  const bottom = _getRowsHeight.call(this, 0, candidateRow);\n\n  if (absoluteY >= bottom) {\n    return findAfter(candidateRow, bottom);\n  } else {\n    return findBefore(candidateRow, bottom);\n  }\n}\n/** @private */\n\n\nfunction _getTargetColAt(grid, absoluteX) {\n  let left = 0;\n  const {\n    colCount\n  } = grid[_];\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  let {\n    top\n  } = grid[_].scroll;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row);\n\n    const bottom = top + height;\n\n    if (bottom > absoluteY) {\n      return {\n        top,\n        row\n      };\n    }\n\n    top = bottom;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenColAt(grid, absoluteX) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  let {\n    left\n  } = grid[_].scroll;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getFrozenRowsRect(grid) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  const {\n    top\n  } = grid[_].scroll;\n  let height = 0;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    height += _getRowHeight.call(grid, row);\n  }\n\n  return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n}\n/** @private */\n\n\nfunction _getFrozenColsRect(grid) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  const {\n    left\n  } = grid[_].scroll;\n  let width = 0;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    width += _getColWidth(grid, col);\n  }\n\n  return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n}\n/** @private */\n\n\nfunction _getCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return null;\n  }\n\n  return grid[_].drawCells[row][col];\n}\n/** @private */\n\n\nfunction _putCellDrawing(grid, col, row, context) {\n  if (!grid[_].drawCells[row]) {\n    grid[_].drawCells[row] = {};\n  }\n\n  grid[_].drawCells[row][col] = context;\n}\n/** @private */\n\n\nfunction _removeCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return;\n  }\n\n  delete grid[_].drawCells[row][col];\n\n  if (Object.keys(grid[_].drawCells[row]).length === 0) {\n    delete grid[_].drawCells[row];\n  }\n}\n/** @private */\n\n\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\n  const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n  const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n\n  if (drawRect.height > 0 && drawRect.width > 0) {\n    ctx.save();\n\n    try {\n      const cellDrawing = _getCellDrawing(this, col, row);\n\n      if (cellDrawing) {\n        cellDrawing.cancel();\n      }\n\n      const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\n      const p = this.onDrawCell(col, row, dcContext);\n\n      if ((0, utils_1.isPromise)(p)) {\n        //\n        _putCellDrawing(this, col, row, dcContext);\n\n        const pCol = col;\n\n        dcContext._delayMode(this, () => {\n          _removeCellDrawing(this, pCol, row);\n        });\n\n        p.then(() => {\n          dcContext.terminate();\n        });\n      }\n    } finally {\n      ctx.restore();\n    }\n  }\n}\n/** @private */\n\n\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\n  const {\n    colCount\n  } = grid[_];\n\n  const drawOuter = (col, absoluteLeft) => {\n    //\n    if (col >= colCount - 1 && grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n      const outerLeft = absoluteLeft - visibleRect.left;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteLeft = 0;\n\n  if (initFrozenCol) {\n    let absoluteLeft = initFrozenCol.left;\n    const count = grid[_].frozenColCount;\n\n    for (let {\n      col\n    } = initFrozenCol; col < count; col++) {\n      const width = _getColWidth(grid, col);\n\n      _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\n\n      absoluteLeft += width;\n\n      if (drawRight <= absoluteLeft) {\n        //\n        drawOuter(col, absoluteLeft);\n        return;\n      }\n    }\n\n    skipAbsoluteLeft = absoluteLeft;\n  }\n\n  let absoluteLeft = initCol.left;\n\n  for (let {\n    col\n  } = initCol; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\n\n    absoluteLeft += width;\n\n    if (drawRight <= absoluteLeft) {\n      //\n      drawOuter(col, absoluteLeft);\n      return;\n    }\n  }\n\n  drawOuter(colCount - 1, absoluteLeft);\n}\n/** @private */\n\n\nfunction _getInitContext() {\n  return this._getInitContext();\n}\n/** @private */\n\n\nfunction _invalidateRect(grid, drawRect) {\n  const visibleRect = _getVisibleRect(grid);\n\n  const {\n    rowCount\n  } = grid[_];\n\n  const ctx = _getInitContext.call(grid);\n\n  const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\n    top: _getRowsHeight.call(grid, 0, rowCount - 1),\n    row: rowCount\n  };\n  const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n    left: _getColsWidth(grid, 0, grid[_].colCount - 1),\n    col: grid[_].colCount\n  };\n  const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n  const drawRight = Math.min(visibleRect.right, drawRect.right);\n\n  const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n\n  const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n\n  const drawLayers = new DrawLayers();\n\n  const drawOuter = (row, absoluteTop) => {\n    //\n    if (row >= rowCount - 1 && grid[_].canvas.height > absoluteTop - visibleRect.top) {\n      const outerTop = absoluteTop - visibleRect.top;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteTop = 0;\n\n  if (initFrozenRow) {\n    let absoluteTop = initFrozenRow.top;\n    const count = grid[_].frozenRowCount;\n\n    for (let {\n      row\n    } = initFrozenRow; row < count; row++) {\n      const height = _getRowHeight.call(grid, row);\n\n      _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\n\n      absoluteTop += height;\n\n      if (drawBottom <= absoluteTop) {\n        //\n        drawOuter(row, absoluteTop);\n        drawLayers.draw(ctx);\n        return;\n      }\n    }\n\n    skipAbsoluteTop = absoluteTop;\n  }\n\n  let absoluteTop = initRow.top;\n\n  for (let {\n    row\n  } = initRow; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row); //\n\n\n    _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\n\n    absoluteTop += height;\n\n    if (drawBottom <= absoluteTop) {\n      //\n      drawOuter(row, absoluteTop);\n      drawLayers.draw(ctx);\n      return;\n    }\n  }\n\n  drawOuter(rowCount - 1, absoluteTop);\n  drawLayers.draw(ctx);\n}\n/** @private */\n\n\nfunction _toPxWidth(grid, width) {\n  return Math.round(calc.toPx(width, grid[_].calcWidthContext));\n}\n/** @private */\n\n\nfunction _adjustColWidth(grid, col, orgWidth) {\n  const limits = _getColWidthLimits(grid, col);\n\n  return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\n}\n/** @private */\n\n\nfunction _applyColWidthLimits(limits, orgWidth) {\n  if (!limits) {\n    return orgWidth;\n  }\n\n  if (limits.min) {\n    if (limits.min > orgWidth) {\n      return limits.min;\n    }\n  }\n\n  if (limits.max) {\n    if (limits.max < orgWidth) {\n      return limits.max;\n    }\n  }\n\n  return orgWidth;\n}\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\n\n\nfunction _getColWidthDefine(grid, col) {\n  const width = grid[_].colWidthsMap.get(col);\n\n  if (width) {\n    return width;\n  }\n\n  return grid.defaultColWidth;\n}\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\n\n\nfunction _getColWidthLimits(grid, col) {\n  const limit = grid[_].colWidthsLimit[col];\n\n  if (!limit) {\n    return null;\n  }\n\n  const result = {};\n\n  if (limit.min) {\n    result.min = _toPxWidth(grid, limit.min);\n    result.minDef = limit.min;\n  }\n\n  if (limit.max) {\n    result.max = _toPxWidth(grid, limit.max);\n    result.maxDef = limit.max;\n  }\n\n  return result;\n}\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\n\n\nfunction isAutoDefine(width) {\n  return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\n}\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\n\n\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\n  const fullWidth = grid[_].calcWidthContext.full;\n  let sumMin = 0;\n  const others = [];\n  let autoCount = 0;\n  const hasLimitsOnAuto = [];\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    const limits = _getColWidthLimits(grid, col);\n\n    if (isAutoDefine(def)) {\n      if (limits) {\n        hasLimitsOnAuto.push(limits);\n\n        if (limits.min) {\n          sumMin += limits.min;\n        }\n      }\n\n      autoCount++;\n    } else {\n      let expr = def;\n\n      if (limits) {\n        const orgWidth = _toPxWidth(grid, expr);\n\n        const newWidth = _applyColWidthLimits(limits, orgWidth);\n\n        if (orgWidth !== newWidth) {\n          expr = `${newWidth}px`;\n        }\n\n        sumMin += newWidth;\n      }\n\n      others.push(expr);\n    }\n\n    if (shortCircuit && sumMin > fullWidth) {\n      // Returns 0px because it has consumed the full width.\n      return \"0px\";\n    }\n  }\n\n  if (hasLimitsOnAuto.length && others.length) {\n    const autoPx = (fullWidth - _toPxWidth(grid, `calc(${others.map(c => typeof c === \"number\" ? `${c}px` : c).join(\" + \")})`)) / autoCount;\n    hasLimitsOnAuto.forEach(limits => {\n      if (limits.min && autoPx < limits.min) {\n        others.push(limits.minDef);\n        autoCount--;\n      } else if (limits.max && limits.max < autoPx) {\n        others.push(limits.maxDef);\n        autoCount--;\n      }\n    });\n\n    if (shortCircuit && autoCount <= 0) {\n      return `${autoPx}px`;\n    }\n  }\n\n  if (others.length) {\n    const strDefs = [];\n    let num = 0;\n    others.forEach(c => {\n      if (typeof c === \"number\") {\n        num += c;\n      } else {\n        strDefs.push(c);\n      }\n    });\n    strDefs.push(`${num}px`);\n    return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\n  } else {\n    return `${100 / autoCount}%`;\n  }\n}\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\n\n\nfunction _colWidthDefineToPxWidth(grid, width) {\n  if (isAutoDefine(width)) {\n    return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\n  }\n\n  return _toPxWidth(grid, width);\n}\n/** @private */\n\n\nfunction _getColWidth(grid, col) {\n  const width = _getColWidthDefine(grid, col);\n\n  return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\n}\n/** @private */\n\n\nfunction _setColWidth(grid, col, width) {\n  if (width != null) {\n    grid[_].colWidthsMap.put(col, width);\n  } else {\n    grid[_].colWidthsMap.remove(col);\n  }\n}\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\n\n\nfunction _storeAutoColWidthExprs(grid) {\n  let expr = null;\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    if (isAutoDefine(def)) {\n      _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\n    }\n  }\n}\n/** @private */\n\n\nfunction _getColsWidth(grid, startCol, endCol) {\n  const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\n\n  const colCount = endCol - startCol + 1;\n  let w = defaultColPxWidth * colCount;\n\n  grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n    w += _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) - defaultColPxWidth;\n  });\n\n  for (let col = startCol; col <= endCol; col++) {\n    if (grid[_].colWidthsMap.has(col)) {\n      continue;\n    }\n\n    const adj = _adjustColWidth(grid, col, defaultColPxWidth);\n\n    if (adj !== defaultColPxWidth) {\n      w += adj - defaultColPxWidth;\n    }\n  }\n\n  return w;\n}\n/** @private */\n\n\nfunction _getRowHeight(row) {\n  const internal = this.getRowHeightInternal(row);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const height = this[_].rowHeightsMap.get(row);\n\n  if (height) {\n    return height;\n  }\n\n  return this[_].defaultRowHeight;\n}\n/** @private */\n\n\nfunction _setRowHeight(grid, row, height) {\n  if (height != null) {\n    grid[_].rowHeightsMap.put(row, height);\n  } else {\n    grid[_].rowHeightsMap.remove(row);\n  }\n}\n/** @private */\n\n\nfunction _getRowsHeight(startRow, endRow) {\n  const internal = this.getRowsHeightInternal(startRow, endRow);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  const rowCount = endRow - startRow + 1;\n  let h = this[_].defaultRowHeight * rowCount;\n\n  this[_].rowHeightsMap.each(startRow, endRow, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _getScrollWidth(grid) {\n  return _getColsWidth(grid, 0, grid[_].colCount - 1);\n}\n/** @private */\n\n\nfunction _getScrollHeight(row) {\n  const internal = this.getScrollHeightInternal(row);\n\n  if (internal != null) {\n    return internal;\n  }\n\n  let h = this[_].defaultRowHeight * this[_].rowCount;\n\n  this[_].rowHeightsMap.each(0, this[_].rowCount - 1, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _onScroll(grid, _e) {\n  const lastLeft = grid[_].scroll.left;\n  const lastTop = grid[_].scroll.top;\n  const moveX = grid[_].scrollable.scrollLeft - lastLeft;\n  const moveY = grid[_].scrollable.scrollTop - lastTop; //\n\n  grid[_].scroll = {\n    left: grid[_].scrollable.scrollLeft,\n    top: grid[_].scrollable.scrollTop\n  }; // If the focus is on the header, recalculate and move the focus position.\n\n  const {\n    focus\n  } = grid[_].selection;\n  const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\n\n  if (isFrozenCell && ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX || (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY)) {\n    grid.setFocusCursor(focus.col, focus.row);\n  }\n\n  const visibleRect = _getVisibleRect(grid);\n\n  if (Math.abs(moveX) >= visibleRect.width || Math.abs(moveY) >= visibleRect.height) {\n    //\n    _invalidateRect(grid, visibleRect);\n  } else {\n    //\n    grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n\n    if (moveX !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveX < 0) {\n        redrawRect.width = -moveX;\n\n        if (grid[_].frozenColCount > 0) {\n          //\n          const frozenRect = _getFrozenColsRect(grid);\n\n          redrawRect.width += frozenRect.width;\n        }\n      } else if (moveX > 0) {\n        redrawRect.left = redrawRect.right - moveX;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveX > 0) {\n        if (grid[_].frozenColCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenColsRect(grid));\n        }\n      }\n    }\n\n    if (moveY !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveY < 0) {\n        redrawRect.height = -moveY;\n\n        if (grid[_].frozenRowCount > 0) {\n          //\n          const frozenRect = _getFrozenRowsRect(grid);\n\n          redrawRect.height += frozenRect.height;\n        }\n      } else if (moveY > 0) {\n        redrawRect.top = redrawRect.bottom - moveY;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveY > 0) {\n        if (grid[_].frozenRowCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenRowsRect(grid));\n        }\n      }\n    }\n  }\n}\n/** @private */\n// eslint-disable-next-line complexity\n\n\nfunction _onKeyDownMove(e) {\n  var _a, _b, _c;\n\n  const {\n    shiftKey\n  } = e;\n  const keyCode = getKeyCode(e);\n  const focusCell = shiftKey ? this.selection.focus : this.selection.select;\n\n  if (keyCode === KEY_LEFT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"W\");\n    } else {\n      if (!hMove.call(this, \"W\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_UP) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", null);\n    } else {\n      if (!vMove.call(this, \"N\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_RIGHT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"E\");\n    } else {\n      if (!hMove.call(this, \"E\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_DOWN) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", null);\n    } else {\n      if (!vMove.call(this, \"S\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_HOME) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", \"W\");\n    } else {\n      move(this, null, \"W\");\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_END) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", \"E\");\n    } else {\n      move(this, null, \"E\");\n    }\n\n    cancelEvent(e);\n  } else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n    let newCell = null;\n\n    if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\n      newCell = this.keyboardOptions.moveCellOnTab({\n        cell: focusCell,\n        grid: this,\n        event: e\n      });\n    }\n\n    if (newCell) {\n      _moveFocusCell.call(this, newCell.col, newCell.row, false);\n    } else if (shiftKey) {\n      if (!hMove.call(this, \"W\", false)) {\n        const row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n        if (0 > row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, this.colCount - 1, row, false);\n      }\n    } else {\n      if (!hMove.call(this, \"E\", false)) {\n        const row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n        if (this.rowCount <= row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, 0, row, false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n    let newCell = null;\n\n    if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\n      newCell = this.keyboardOptions.moveCellOnEnter({\n        cell: focusCell,\n        grid: this,\n        event: e\n      });\n    }\n\n    if (newCell) {\n      _moveFocusCell.call(this, newCell.col, newCell.row, false);\n    } else if (shiftKey) {\n      if (!vMove.call(this, \"N\", false)) {\n        const col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n        if (0 > col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, this.rowCount - 1, false);\n      }\n    } else {\n      if (!vMove.call(this, \"S\", false)) {\n        const col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n        if (this.colCount <= col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n    this.selection.range = {\n      start: {\n        col: 0,\n        row: 0\n      },\n      end: {\n        col: this.colCount - 1,\n        row: this.rowCount - 1\n      }\n    };\n    this.invalidate();\n    cancelEvent(e);\n  }\n\n  function move(grid, vDir, hDir) {\n    const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\n    const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\n\n    _moveFocusCell.call(grid, col, row, shiftKey);\n  }\n\n  function vMove(vDir, shiftKeyFlg = shiftKey) {\n    const {\n      col\n    } = focusCell;\n    let row;\n\n    if (vDir === \"S\") {\n      row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n      if (this.rowCount <= row) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(col, this.rowCount - 1);\n        return false;\n      }\n    } else {\n      row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n      if (row < 0) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(col, 0);\n        return false;\n      }\n    }\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n\n  function hMove(hDir, shiftKeyFlg = shiftKey) {\n    const {\n      row\n    } = focusCell;\n    let col;\n\n    if (hDir === \"E\") {\n      col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n      if (this.colCount <= col) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(this.colCount - 1, row);\n        return false;\n      }\n    } else {\n      col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n      if (col < 0) {\n        // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\n        this.makeVisibleCell(0, row);\n        return false;\n      }\n    }\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n}\n/** @private */\n\n\nfunction _moveFocusCell(col, row, shiftKey) {\n  const offset = this.getOffsetInvalidateCells();\n\n  function extendRange(range) {\n    if (offset > 0) {\n      range.start.col -= offset;\n      range.start.row -= offset;\n      range.end.col += offset;\n      range.end.row += offset;\n    }\n\n    return range;\n  }\n\n  const beforeRange = extendRange(this.selection.range);\n  const beforeRect = this.getCellRangeRect(beforeRange);\n\n  this.selection._setFocusCell(col, row, shiftKey);\n\n  this.makeVisibleCell(col, row);\n  this.focusCell(col, row);\n  const afterRange = extendRange(this.selection.range);\n  const afterRect = this.getCellRangeRect(afterRange);\n\n  if (afterRect.intersection(beforeRect)) {\n    const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\n\n    _invalidateRect(this, invalidateRect);\n  } else {\n    _invalidateRect(this, beforeRect);\n\n    _invalidateRect(this, afterRect);\n  }\n}\n/** @private */\n\n\nfunction _updatedSelection() {\n  const {\n    focusControl\n  } = this[_];\n  const {\n    col: selCol,\n    row: selRow\n  } = this[_].selection.select;\n  const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\n    col: selCol,\n    row: selRow\n  });\n  const editMode = utils_1.array.findIndex(results, v => !!v) >= 0;\n  focusControl.editMode = editMode;\n\n  if (editMode) {\n    focusControl.storeInputStatus();\n    focusControl.setDefaultInputStatus();\n    this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\n      col: selCol,\n      row: selRow,\n      input: focusControl.input\n    });\n  }\n}\n/** @private */\n\n\nfunction _getMouseAbstractPoint(grid, evt) {\n  let e;\n\n  if (isTouchEvent(evt)) {\n    e = evt.changedTouches[0];\n  } else {\n    e = evt;\n  }\n\n  const clientX = e.clientX || e.pageX + window.scrollX;\n  const clientY = e.clientY || e.pageY + window.scrollY;\n\n  const rect = grid[_].canvas.getBoundingClientRect();\n\n  if (rect.right <= clientX) {\n    return null;\n  }\n\n  if (rect.bottom <= clientY) {\n    return null;\n  }\n\n  const x = clientX - rect.left + grid[_].scroll.left;\n  const y = clientY - rect.top + grid[_].scroll.top;\n  return {\n    x,\n    y\n  };\n}\n/** @private */\n\n\nfunction _bindEvents() {\n  // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\n  const grid = this;\n  const {\n    handler,\n    element,\n    scrollable\n  } = grid[_];\n\n  const getCellEventArgsSet = e => {\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return {};\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return {\n        abstractPos,\n        cell\n      };\n    }\n\n    const eventArgs = {\n      col: cell.col,\n      row: cell.row,\n      event: e\n    };\n    return {\n      abstractPos,\n      cell,\n      eventArgs\n    };\n  };\n\n  const canResizeColumn = col => {\n    if (grid[_].disableColumnResize) {\n      return false;\n    }\n\n    const limit = grid[_].colWidthsLimit[col];\n\n    if (!limit || !limit.min || !limit.max) {\n      return true;\n    }\n\n    return limit.max !== limit.min;\n  };\n\n  handler.on(element, \"mousedown\", e => {\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (!abstractPos) {\n      return;\n    }\n\n    if (eventArgs) {\n      const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n\n      if (utils_1.array.findIndex(results, v => !v) >= 0) {\n        return;\n      }\n    }\n\n    if (getMouseButtons(e) !== 1 && // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\n    e.buttons !== 0) {\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      //\n      grid[_].columnResizer.start(resizeCol, e);\n    } else {\n      //\n      grid[_].cellSelector.start(e);\n    }\n  });\n  handler.on(element, \"mouseup\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (eventArgs) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\n    }\n  });\n  let doubleTapBefore = null;\n  let longTouchId = null;\n  let useTouch = null;\n\n  function useTouchStart() {\n    if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null) clearTimeout(useTouch.timeoutId);\n    useTouch = {};\n  }\n\n  function useTouchEnd() {\n    if (useTouch) {\n      if (useTouch.timeoutId != null) clearTimeout(useTouch.timeoutId);\n      useTouch.timeoutId = setTimeout(() => {\n        useTouch = null;\n      }, 350);\n    }\n  }\n\n  handler.on(element, \"touchstart\", e => {\n    // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\n    useTouchStart();\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (eventArgs) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\n    }\n\n    if (!doubleTapBefore) {\n      doubleTapBefore = eventArgs;\n      setTimeout(() => {\n        doubleTapBefore = null;\n      }, 350);\n    } else {\n      if (eventArgs && eventArgs.col === doubleTapBefore.col && eventArgs.row === doubleTapBefore.row) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\n      }\n\n      doubleTapBefore = null;\n\n      if (e.defaultPrevented) {\n        return;\n      }\n    }\n\n    if (e.targetTouches.length > 1) {\n      // If touchstart with multiple fingers,\n      // it is not considered as an operation event.\n      return;\n    }\n\n    longTouchId = setTimeout(() => {\n      //\n      longTouchId = null;\n\n      const abstractPos = _getMouseAbstractPoint(grid, e);\n\n      if (!abstractPos) {\n        return;\n      }\n\n      const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n\n      if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n        //\n        grid[_].columnResizer.start(resizeCol, e);\n      } else {\n        //\n        grid[_].cellSelector.start(e);\n      }\n    }, 500);\n  });\n\n  function cancel(_e) {\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n      longTouchId = null;\n    }\n  }\n\n  handler.on(element, \"touchcancel\", e => {\n    cancel(e);\n    useTouchEnd();\n  });\n  handler.on(element, \"touchmove\", cancel);\n  handler.on(element, \"touchend\", e => {\n    useTouchEnd();\n\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n\n      grid[_].cellSelector.select(e);\n\n      longTouchId = null;\n    }\n  });\n  let isMouseover = false;\n  let mouseEnterCell = null;\n  let mouseOverCell = null;\n\n  function onMouseenterCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseEnterCell = cell;\n  }\n\n  function onMouseleaveCell(related) {\n    const beforeMouseCell = mouseEnterCell;\n    mouseEnterCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  function onMouseoverCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseOverCell = cell;\n  }\n\n  function onMouseoutCell(related) {\n    const beforeMouseCell = mouseOverCell;\n    mouseOverCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  const scrollElement = scrollable.getElement();\n  handler.on(scrollElement, \"mouseover\", _e => {\n    isMouseover = true;\n  });\n  handler.on(scrollElement, \"mouseout\", _e => {\n    isMouseover = false;\n    onMouseoutCell();\n  });\n  handler.on(element, \"mouseleave\", _e => {\n    onMouseleaveCell();\n  });\n  handler.on(element, \"mousemove\", e => {\n    if (useTouch) {\n      // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\n      return;\n    }\n\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (eventArgs) {\n      const beforeMouseCell = mouseEnterCell;\n\n      if (beforeMouseCell) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\n        if (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\n          const enterCell = {\n            col: eventArgs.col,\n            row: eventArgs.row\n          };\n          const outCell = onMouseoutCell(enterCell);\n          const leaveCell = onMouseleaveCell(enterCell);\n          onMouseenterCell(enterCell, leaveCell);\n\n          if (isMouseover) {\n            onMouseoverCell(enterCell, outCell);\n          }\n        } else if (isMouseover && !mouseOverCell) {\n          onMouseoverCell({\n            col: eventArgs.col,\n            row: eventArgs.row\n          });\n        }\n      } else {\n        const enterCell = {\n          col: eventArgs.col,\n          row: eventArgs.row\n        };\n        onMouseenterCell(enterCell);\n\n        if (isMouseover) {\n          onMouseoverCell(enterCell);\n        }\n\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n      }\n    } else {\n      onMouseoutCell();\n      onMouseleaveCell();\n    }\n\n    if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n      return;\n    }\n\n    const {\n      style\n    } = element;\n\n    if (!abstractPos) {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      style.cursor = \"col-resize\";\n    } else {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n    }\n  });\n  handler.on(element, \"click\", e => {\n    if (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\n      return;\n    }\n\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\n  });\n  handler.on(element, \"contextmenu\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\n  });\n  handler.on(element, \"dblclick\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n  });\n\n  grid[_].focusControl.onKeyDown(evt => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\n  });\n\n  grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\n  });\n\n  scrollable.onScroll(e => {\n    _onScroll(grid, e);\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, {\n      event: e\n    });\n  });\n\n  grid[_].focusControl.onKeyDownMove(e => {\n    _onKeyDownMove.call(grid, e);\n  });\n\n  grid.listen(\"copydata\", range => {\n    const copyRange = grid.getCopyRangeInternal(range);\n    const copyLines = [];\n\n    for (let {\n      row\n    } = copyRange.start; row <= copyRange.end.row; row++) {\n      let copyLine = \"\";\n\n      for (let {\n        col\n      } = copyRange.start; col <= copyRange.end.col; col++) {\n        const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\n        let strCellValue;\n\n        if (typeof copyCellValue === \"string\") {\n          strCellValue = copyCellValue;\n        } else if (copyCellValue == null || // Asynchronous data is treated as empty.\n        typeof Promise !== \"undefined\" && copyCellValue instanceof Promise) {\n          strCellValue = \"\";\n        } else {\n          // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n          strCellValue = `${copyCellValue}`;\n\n          if (/^\\[object .*\\]$/.exec(strCellValue)) {\n            // Ignore maybe object\n            strCellValue = \"\";\n          }\n        }\n\n        copyLine += /[\\t\\n]/.test(strCellValue) ? // Need quote\n        `\"${strCellValue.replace(/\"/g, '\"\"')}\"` : strCellValue;\n\n        if (col < copyRange.end.col) {\n          copyLine += \"\\t\";\n        }\n      }\n\n      copyLines.push(copyLine);\n    }\n\n    return copyLines.join(\"\\n\");\n  });\n\n  grid[_].focusControl.onCopy(_e => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), r => r != null));\n\n  grid[_].focusControl.onPaste(({\n    value,\n    event\n  }) => {\n    const {\n      trimOnPaste\n    } = grid;\n    const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\n\n    let rangeBoxValues = null;\n    const pasteCellEvent = {\n      col,\n      row,\n      value,\n      normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\n      multi,\n\n      get rangeBoxValues() {\n        return rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\n          trimOnPaste\n        });\n      },\n\n      event\n    };\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\n  });\n\n  grid[_].focusControl.onInput(value => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, {\n      col,\n      row,\n      value\n    });\n  });\n\n  grid[_].focusControl.onDelete(event => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, {\n      col,\n      row,\n      event\n    });\n  });\n\n  grid[_].focusControl.onFocus(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\n    grid[_].focusedGrid = true;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n\n  grid[_].focusControl.onBlur(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\n    grid[_].focusedGrid = false;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n}\n/** @private */\n\n\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n  if (grid[_].frozenRowCount <= 0) {\n    return -1;\n  }\n\n  const frozenRect = _getFrozenRowsRect(grid);\n\n  if (!frozenRect.inPoint(abstractX, abstractY)) {\n    return -1;\n  }\n\n  const cell = grid.getCellAt(abstractX, abstractY);\n  const cellRect = grid.getCellRect(cell.col, cell.row);\n\n  if (abstractX < cellRect.left + offset) {\n    return cell.col - 1;\n  }\n\n  if (cellRect.right - offset < abstractX) {\n    return cell.col;\n  }\n\n  return -1;\n}\n/** @private */\n\n\nfunction _getVisibleRect(grid) {\n  const {\n    scroll: {\n      left,\n      top\n    },\n    canvas: {\n      width,\n      height\n    }\n  } = grid[_];\n  return new Rect_1.Rect(left, top, width, height);\n}\n/** @private */\n\n\nfunction _getScrollableVisibleRect(grid) {\n  let frozenColsWidth = 0;\n\n  if (grid[_].frozenColCount > 0) {\n    //\n    const frozenRect = _getFrozenColsRect(grid);\n\n    frozenColsWidth = frozenRect.width;\n  }\n\n  let frozenRowsHeight = 0;\n\n  if (grid[_].frozenRowCount > 0) {\n    //\n    const frozenRect = _getFrozenRowsRect(grid);\n\n    frozenRowsHeight = frozenRect.height;\n  }\n\n  return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n}\n/** @private */\n\n\nfunction _toRelativeRect(grid, absoluteRect) {\n  const rect = absoluteRect.copy();\n\n  const visibleRect = _getVisibleRect(grid);\n\n  rect.offsetLeft(-visibleRect.left);\n  rect.offsetTop(-visibleRect.top);\n  return rect;\n} //end private methods\n//\n//\n//\n//\n\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\n\n\nclass BaseMouseDownMover {\n  constructor(grid) {\n    this._grid = grid;\n    this._handler = new EventHandler_1.EventHandler();\n    this._events = {};\n    this._started = false;\n    this._moved = false;\n  }\n\n  moving(_e) {\n    return !!this._started;\n  }\n\n  lastMoving(e) {\n    // mouseupclick\n    if (this.moving(e)) {\n      return true;\n    }\n\n    const last = this._mouseEndPoint;\n\n    if (!last) {\n      return false;\n    }\n\n    const pt = _getMouseAbstractPoint(this._grid, e);\n\n    return pt != null && pt.x === last.x && pt.y === last.y;\n  }\n\n  _bindMoveAndUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n\n    if (!isTouchEvent(e)) {\n      events.mousemove = handler.on(document.body, \"mousemove\", e => this._mouseMove(e));\n      events.mouseup = handler.on(document.body, \"mouseup\", e => this._mouseUp(e));\n    } else {\n      events.touchmove = handler.on(document.body, \"touchmove\", e => this._mouseMove(e), {\n        passive: false\n      });\n      events.touchend = handler.on(document.body, \"touchend\", e => this._mouseUp(e));\n      events.touchcancel = handler.on(document.body, \"touchcancel\", e => this._mouseUp(e));\n    }\n\n    this._started = true;\n    this._moved = false;\n  }\n\n  _mouseMove(e) {\n    if (!isTouchEvent(e)) {\n      if (getMouseButtons(e) !== 1) {\n        this._mouseUp(e);\n\n        return;\n      }\n    }\n\n    this._moved = this._moveInternal(e) || this._moved\n    /*calculation on after*/\n    ;\n    cancelEvent(e);\n  }\n\n  _moveInternal(_e) {\n    //protected\n    return false;\n  }\n\n  _mouseUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n    handler.off(events.mousemove);\n    handler.off(events.touchmove);\n    handler.off(events.mouseup);\n    handler.off(events.touchend); // handler.off(this._events.mouseleave);\n\n    handler.off(events.touchcancel);\n    this._started = false;\n\n    this._upInternal(e); // mouseupclick\n\n\n    if (this._moved) {\n      //\n      this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n      setTimeout(() => {\n        this._mouseEndPoint = null;\n      }, 10);\n    }\n  }\n\n  _upInternal(_e) {//protected\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n}\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\n\n\nclass CellSelector extends BaseMouseDownMover {\n  start(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._bindMoveAndUp(e);\n\n    this._cell = cell;\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  select(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._cell = cell;\n  }\n\n  _moveInternal(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return false;\n    }\n\n    const {\n      col: oldCol,\n      row: oldRow\n    } = this._cell;\n    const {\n      col: newCol,\n      row: newRow\n    } = cell;\n\n    if (oldCol === newCol && oldRow === newRow) {\n      return false;\n    }\n\n    const grid = this._grid;\n\n    _moveFocusCell.call(grid, newCol, newRow, true); //make visible\n\n\n    const makeVisibleCol = (() => {\n      if (newCol < oldCol && 0 < newCol) {\n        // move left\n        return newCol - 1;\n      } else if (oldCol < newCol && newCol + 1 < grid.colCount) {\n        // move right\n        return newCol + 1;\n      }\n\n      return newCol;\n    })();\n\n    const makeVisibleRow = (() => {\n      if (newRow < oldRow && 0 < newRow) {\n        // move up\n        return newRow - 1;\n      } else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\n        // move down\n        return newRow + 1;\n      }\n\n      return newRow;\n    })();\n\n    if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\n      grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n    }\n\n    this._cell = cell;\n    return true;\n  }\n\n  _getTargetCell(e) {\n    const grid = this._grid;\n\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return null;\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return null;\n    }\n\n    return cell;\n  }\n\n}\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\n\n\nclass ColumnResizer extends BaseMouseDownMover {\n  constructor(grid) {\n    super(grid);\n    this._x = -1;\n    this._preX = -1;\n    this._invalidateAbsoluteLeft = -1;\n    this._targetCol = -1;\n  }\n\n  start(col, e) {\n    let pageX;\n\n    if (!isTouchEvent(e)) {\n      ({\n        pageX\n      } = e);\n    } else {\n      ({\n        pageX\n      } = e.changedTouches[0]);\n    }\n\n    this._x = pageX;\n    this._preX = 0;\n\n    this._bindMoveAndUp(e);\n\n    this._targetCol = col;\n    this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  _moveInternal(e) {\n    const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n    const x = pageX - this._x;\n    const moveX = x - this._preX;\n    this._preX = x;\n\n    const pre = this._grid.getColWidth(this._targetCol);\n\n    let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n\n    if (afterSize < 10 && moveX < 0) {\n      afterSize = 10;\n    }\n\n    _storeAutoColWidthExprs(this._grid);\n\n    _setColWidth(this._grid, this._targetCol, afterSize);\n\n    const rect = _getVisibleRect(this._grid);\n\n    rect.left = this._invalidateAbsoluteLeft;\n\n    _invalidateRect(this._grid, rect);\n\n    this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\n      col: this._targetCol\n    });\n\n    return true;\n  }\n\n  _upInternal(_e) {\n    const grid = this._grid;\n\n    if (grid.updateScroll()) {\n      grid.invalidate();\n    }\n  }\n\n}\n/** @private */\n\n\nfunction setSafeInputValue(input, value) {\n  const {\n    type\n  } = input;\n  input.type = \"\";\n  input.value = value;\n\n  if (type) {\n    input.type = type;\n  }\n}\n\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\n/**\r\n * Manage focus\r\n * @private\r\n */\n\nclass FocusControl extends EventTarget_1.EventTarget {\n  constructor(grid, parentElement, scrollable, selection) {\n    super();\n    this._grid = grid;\n    this._scrollable = scrollable;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    const input = this._input = document.createElement(\"input\");\n    input.classList.add(\"grid-focus-control\");\n    input.readOnly = true;\n    parentElement.appendChild(input);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n      input.style.font = grid.font || \"16px sans-serif\";\n      this._isComposition = true;\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n\n      grid.focus();\n    });\n    let lastInputValue;\n\n    const inputClear = storeLastInputValue => {\n      lastInputValue = input.value;\n\n      if (this._isComposition) {\n        return;\n      }\n\n      if (lastInputValue !== \"\") {\n        setSafeInputValue(input, \"\");\n      }\n\n      if (!storeLastInputValue) {\n        lastInputValue = \"\";\n      }\n    };\n\n    const handleCompositionEnd = () => {\n      this._isComposition = false;\n      input.classList.remove(\"composition\");\n      input.style.font = \"\";\n      const {\n        value\n      } = input;\n      inputClear(false);\n\n      if (!input.readOnly) {\n        this.fireListeners(\"input\", value);\n      }\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n    };\n\n    handler.on(input, \"compositionend\", _e => {\n      this._compositionEnd = setTimeout(handleCompositionEnd, 1);\n    });\n    selection.listen(\"before_hook\", () => {\n      if (this._compositionEnd) {\n        handleCompositionEnd();\n      }\n    });\n    handler.on(input, \"keypress\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!input.readOnly && e.key && e.key.length === 1) {\n        if (e.ctrlKey || e.metaKey) {\n          if (e.key === \"c\") {//copy! for Firefox & Safari\n          } else if (e.key === \"v\") {//paste! for Firefox & Safari\n          }\n        } else {\n          if (e.key === \" \") {\n            // Since the full-width space cannot be determined, it is processed by \"input\".\n            return;\n          }\n\n          this.fireListeners(\"input\", e.key);\n          cancelEvent(e);\n        }\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"keydown\", e => {\n      var _a;\n\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n          cancelEvent(e);\n        }\n\n        return;\n      }\n\n      const keyCode = getKeyCode(e);\n      let stopCellMove = false;\n      const evt = {\n        keyCode,\n        event: e,\n\n        stopCellMoving() {\n          stopCellMove = true;\n        }\n\n      };\n      this.fireListeners(\"keydown\", evt);\n\n      if (!input.readOnly && lastInputValue) {\n        // for Safari\n        this.fireListeners(\"input\", lastInputValue);\n      }\n\n      if (!stopCellMove) this.fireKeyDownMove(keyCode, e);\n\n      if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) && (keyCode === KEY_DEL || keyCode === KEY_BS)) {\n        this.fireListeners(\"delete\", e);\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"keyup\", _e => {\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n        }\n      }\n\n      inputClear(true);\n    });\n    handler.on(input, \"input\", e => {\n      if (e.data === \" \" || e.data === \"\") {\n        // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\n        this.fireListeners(\"input\", e.data);\n      }\n\n      inputClear(true);\n    });\n\n    if (utils_1.browser.IE) {\n      handler.on(document, \"keydown\", e => {\n        if (e.target !== input) {\n          return;\n        }\n\n        const keyCode = getKeyCode(e);\n\n        if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n          // When text is not selected copy-event is not emit, on IE.\n          setSafeInputValue(input, \"dummy\");\n          input.select();\n          setTimeout(() => {\n            setSafeInputValue(input, \"\");\n          }, 100);\n        } else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\n          // When input is read-only paste-event is not emit, on IE.\n          if (input.readOnly) {\n            input.readOnly = false;\n            setTimeout(() => {\n              input.readOnly = true;\n              setSafeInputValue(input, \"\");\n            }, 10);\n          }\n        }\n      });\n    }\n\n    if (utils_1.browser.Edge) {\n      handler.once(document, \"keydown\", e => {\n        var _a;\n\n        if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n          return;\n        } // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\n\n\n        const dummyInput = document.createElement(\"input\");\n        grid.getElement().appendChild(dummyInput);\n        dummyInput.focus();\n        input.focus();\n        (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\n      });\n    }\n\n    handler.on(document, \"paste\", e => {\n      if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n        return;\n      }\n\n      let pasteText = undefined;\n\n      if (utils_1.browser.IE) {\n        // IE\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        pasteText = window.clipboardData.getData(\"Text\");\n      } else {\n        const clipboardData = e.clipboardData;\n\n        if (clipboardData.items) {\n          // Chrome & Firefox & Edge\n          pasteText = clipboardData.getData(\"text/plain\");\n        } else {\n          // Safari\n          if (-1 !== Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\n            pasteText = clipboardData.getData(\"Text\");\n          }\n        }\n      }\n\n      if (pasteText != null && pasteText.length) {\n        this.fireListeners(\"paste\", {\n          value: pasteText,\n          event: e\n        });\n      }\n    });\n    handler.on(document, \"copy\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\n        return;\n      }\n\n      setSafeInputValue(input, \"\");\n      const data = utils_1.array.find(this.fireListeners(\"copy\"), r => r != null);\n\n      if (data != null) {\n        cancelEvent(e);\n\n        if (utils_1.browser.IE) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          window.clipboardData.setData(\"Text\", data); // IE\n        } else {\n          e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\n        }\n      }\n    });\n    handler.on(input, \"focus\", e => {\n      this.fireListeners(\"focus\", e);\n    });\n    handler.on(input, \"blur\", e => {\n      this.fireListeners(\"blur\", e);\n    });\n  }\n\n  fireKeyDownMove(keyCode, e) {\n    var _a, _b, _c;\n\n    const fn = this._keyDownMoveCallback;\n\n    if (!fn) {\n      return;\n    }\n\n    if (this._isComposition) {\n      return;\n    }\n\n    if (keyCode === KEY_LEFT || keyCode === KEY_UP || keyCode === KEY_RIGHT || keyCode === KEY_DOWN || keyCode === KEY_HOME || keyCode === KEY_END) {\n      fn(e);\n    } else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n      fn(e);\n    } else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n      fn(e);\n    } else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n      fn(e);\n    }\n  }\n\n  onKeyDownMove(fn) {\n    this._keyDownMoveCallback = fn;\n  }\n\n  onKeyDown(fn) {\n    return this.listen(\"keydown\", fn);\n  }\n\n  onInput(fn) {\n    return this.listen(\"input\", fn);\n  }\n\n  onDelete(fn) {\n    return this.listen(\"delete\", fn);\n  }\n\n  onCopy(fn) {\n    return this.listen(\"copy\", fn);\n  }\n\n  onPaste(fn) {\n    return this.listen(\"paste\", fn);\n  }\n\n  onFocus(fn) {\n    return this.listen(\"focus\", fn);\n  }\n\n  onBlur(fn) {\n    return this.listen(\"blur\", fn);\n  }\n\n  focus() {\n    // this._input.value = '';\n    this._input.focus();\n  }\n\n  setFocusRect(rect) {\n    const input = this._input;\n\n    const top = this._scrollable.calcTop(rect.top);\n\n    input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\n\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n  }\n\n  get editMode() {\n    return !this._input.readOnly;\n  }\n\n  set editMode(editMode) {\n    this._input.readOnly = !editMode;\n  }\n\n  resetInputStatus() {\n    var _a;\n\n    const el = this._input;\n\n    if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const composition = el.classList.contains(\"composition\");\n    const attrs = el.attributes;\n    const removeNames = [];\n\n    for (let i = 0, n = attrs.length; i < n; i++) {\n      const attr = attrs[i];\n      if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0) continue;\n\n      if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\n        removeNames.push(attr.name);\n      }\n    }\n\n    removeNames.forEach(removeName => {\n      el.removeAttribute(removeName);\n    });\n\n    for (const name in this._inputStatus) {\n      el.setAttribute(name, this._inputStatus[name]);\n    }\n\n    if (composition) {\n      el.classList.add(\"composition\");\n      el.style.font = this._grid.font || \"16px sans-serif\";\n    } else {\n      el.classList.remove(\"composition\");\n    }\n\n    el.classList.remove(\"grid-focus-control--stored-status\");\n  }\n\n  storeInputStatus() {\n    const el = this._input;\n\n    if (el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const inputStatus = this._inputStatus = {};\n    const attrs = el.attributes;\n\n    for (let i = 0, n = attrs.length; i < n; i++) {\n      const attr = attrs[i];\n      if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0) continue;\n      inputStatus[attr.name] = attr.value;\n    }\n\n    el.classList.add(\"grid-focus-control--stored-status\");\n  }\n\n  setDefaultInputStatus() {// \n    // this._input.style.font = this._grid.font || '16px sans-serif';\n  }\n\n  get input() {\n    return this._input;\n  }\n\n  dispose() {\n    super.dispose();\n\n    this._handler.dispose();\n  }\n\n}\n/**\r\n * Selected area management\r\n */\n\n\nclass Selection extends EventTarget_1.EventTarget {\n  constructor(grid) {\n    super();\n    this._grid = grid;\n    this._sel = {\n      col: 0,\n      row: 0\n    };\n    this._focus = {\n      col: 0,\n      row: 0\n    };\n    this._start = {\n      col: 0,\n      row: 0\n    };\n    this._end = {\n      col: 0,\n      row: 0\n    };\n  }\n\n  get range() {\n    const start = this._start;\n    const end = this._end;\n    const startCol = Math.min(start.col, end.col);\n    const startRow = Math.min(start.row, end.row);\n    const endCol = Math.max(start.col, end.col);\n    const endRow = Math.max(start.row, end.row);\n    return {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    };\n  }\n\n  set range(range) {\n    this._callBeforeHooks();\n\n    const startCol = Math.min(range.start.col, range.end.col);\n    const startRow = Math.min(range.start.row, range.end.row);\n    const endCol = Math.max(range.start.col, range.end.col);\n    const endRow = Math.max(range.start.row, range.end.row);\n\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col: startCol,\n        row: startRow\n      };\n      this._focus = {\n        col: startCol,\n        row: startRow\n      };\n      this._start = {\n        col: startCol,\n        row: startRow\n      };\n      this._end = {\n        col: endCol,\n        row: endRow\n      };\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  get focus() {\n    const {\n      col,\n      row\n    } = this._focus;\n    return {\n      col,\n      row\n    };\n  }\n\n  get select() {\n    const {\n      col,\n      row\n    } = this._sel;\n    return {\n      col,\n      row\n    };\n  }\n\n  set select(cell) {\n    this._callBeforeHooks();\n\n    this._wrapFireSelectedEvent(() => {\n      const {\n        col = 0,\n        row = 0\n      } = cell;\n\n      this._setSelectCell(col, row);\n\n      this._setFocusCell(col, row, true, true);\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  _setSelectCell(col, row) {\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col,\n        row\n      };\n      this._start = {\n        col,\n        row\n      };\n    });\n  }\n\n  _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\n    if (!ignoreBeforeHook) this._callBeforeHooks();\n\n    this._wrapFireSelectedEvent(() => {\n      if (!keepSelect) {\n        this._setSelectCell(col, row);\n      }\n\n      this._focus = {\n        col,\n        row\n      };\n      this._end = {\n        col,\n        row\n      };\n    });\n  }\n\n  _wrapFireSelectedEvent(callback) {\n    if (this._isWrapped) {\n      callback();\n    } else {\n      this._isWrapped = true;\n\n      try {\n        const before = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: false,\n          after: null\n        };\n        callback();\n        const after = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: true,\n          before: {\n            col: before.col,\n            row: before.row\n          }\n        };\n        before.after = {\n          col: after.col,\n          row: after.row\n        };\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\n      } finally {\n        this._isWrapped = false;\n      }\n    }\n  }\n\n  _updateGridRange() {\n    const {\n      rowCount,\n      colCount\n    } = this._grid;\n    const points = [this._sel, this._focus, this._start, this._end];\n    let needChange = false;\n\n    for (let i = 0; i < points.length; i++) {\n      if (colCount <= points[i].col || rowCount <= points[i].row) {\n        needChange = true;\n        break;\n      }\n    }\n\n    if (!needChange) {\n      return false;\n    }\n\n    this._wrapFireSelectedEvent(() => {\n      points.forEach(p => {\n        p.col = Math.min(colCount - 1, p.col);\n        p.row = Math.min(rowCount - 1, p.row);\n      });\n    });\n\n    return true;\n  }\n\n  _callBeforeHooks() {\n    this.fireListeners(\"before_hook\");\n  }\n\n}\n/**\r\n * This class manages the drawing process for each layer\r\n */\n\n/** @private */\n\n\nclass DrawLayers {\n  constructor() {\n    this._layers = {};\n  }\n\n  addDraw(level, fn) {\n    const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\n    l.addDraw(fn);\n  }\n\n  draw(ctx) {\n    const list = [];\n\n    for (const k in this._layers) {\n      list.push(this._layers[k]);\n    }\n\n    list.sort((a, b) => a.level - b.level);\n    list.forEach(l => l.draw(ctx));\n  }\n\n}\n/** @private */\n\n\nclass DrawLayer {\n  constructor(level) {\n    this._level = level;\n    this._list = [];\n  }\n\n  get level() {\n    return this._level;\n  }\n\n  addDraw(fn) {\n    this._list.push(fn);\n  }\n\n  draw(ctx) {\n    this._list.forEach(fn => {\n      ctx.save();\n\n      try {\n        fn(ctx);\n      } finally {\n        ctx.restore();\n      }\n    });\n  }\n\n}\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\n\n\nclass DrawCellContext {\n  //  private _grid: any;\n  //  private _onTerminate: any;\n\n  /**\r\n   * constructor\r\n   * @param {number} col index of column\r\n   * @param {number} row index of row\r\n   * @param {CanvasRenderingContext2D} ctx context\r\n   * @param {Rect} rect rect of cell area\r\n   * @param {Rect} drawRect rect of drawing area\r\n   * @param {boolean} drawing `true` if drawing is in progress\r\n   * @param {object} selection the selection\r\n   * @param {Array} drawLayers array of draw layers\r\n   * @private\r\n   */\n  constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\n    this._rectFilter = null;\n    this._col = col;\n    this._row = row;\n    this._mode = 0;\n    this._ctx = ctx;\n    this._rect = rect;\n    this._drawRect = drawRect;\n    this._drawing = drawing;\n    this._selection = selection;\n    this._drawLayers = drawLayers;\n    this._childContexts = [];\n  }\n\n  get drawing() {\n    if (this._mode === 0) {\n      return this._drawing;\n    } else {\n      return true;\n    }\n  }\n\n  get row() {\n    return this._row;\n  }\n\n  get col() {\n    return this._col;\n  }\n\n  cancel() {\n    this._cancel = true;\n\n    this._childContexts.forEach(ctx => {\n      ctx.cancel();\n    });\n  }\n  /**\r\n   * select status.\r\n   * @return {object} select status\r\n   */\n\n\n  getSelection() {\n    return {\n      select: this._selection.select,\n      range: this._selection.range\n    };\n  }\n  /**\r\n   * Canvas context.\r\n   * @return {CanvasRenderingContext2D} Canvas context.\r\n   */\n\n\n  getContext() {\n    if (this._mode === 0) {\n      return this._ctx;\n    } else {\n      return _getInitContext.call(this._grid);\n    }\n  }\n  /**\r\n   * Rectangle of cell.\r\n   * @return {Rect} rect Rectangle of cell.\r\n   */\n\n\n  getRect() {\n    const rectFilter = this._rectFilter;\n    return rectFilter ? rectFilter(this._getRectInternal()) : this._getRectInternal();\n  }\n\n  setRectFilter(rectFilter) {\n    this._rectFilter = rectFilter;\n  }\n  /**\r\n   * Rectangle of Drawing range.\r\n   * @return {Rect} Rectangle of Drawing range.\r\n   */\n\n\n  getDrawRect() {\n    if (this._cancel) {\n      return null;\n    }\n\n    if (this._mode === 0) {\n      return this._drawRect;\n    } else {\n      if (this._isOutOfRange()) {\n        return null;\n      }\n\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      return this._toRelativeDrawRect(absoluteRect);\n    }\n  }\n\n  _isOutOfRange() {\n    const {\n      colCount,\n      rowCount\n    } = this._grid;\n    return colCount <= this._col || rowCount <= this._row;\n  }\n  /**\r\n   * get Context of current state\r\n   * @return {DrawCellContext} current DrawCellContext.\r\n   */\n\n\n  toCurrentContext() {\n    if (this._mode === 0) {\n      return this;\n    } else {\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      const rect = _toRelativeRect(this._grid, absoluteRect);\n\n      const drawRect = this._isOutOfRange() ? null : this._toRelativeDrawRect(absoluteRect);\n      const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers); // toCurrentContext  toCurrentContext\n\n      context.toCurrentContext = this.toCurrentContext.bind(this);\n\n      this._childContexts.push(context);\n\n      if (this._cancel) {\n        context.cancel();\n      }\n\n      context._rectFilter = this._rectFilter;\n      return context;\n    }\n  }\n\n  addLayerDraw(level, fn) {\n    this._drawLayers.addDraw(level, fn);\n  }\n\n  _toRelativeDrawRect(absoluteRect) {\n    const visibleRect = _getVisibleRect(this._grid);\n\n    let rect = absoluteRect.copy();\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    const grid = this._grid;\n    const isFrozenCell = grid.isFrozenCell(this._col, this._row);\n\n    if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n      const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\n      rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n    }\n\n    if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n      const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\n      rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n    }\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    rect.offsetLeft(-visibleRect.left);\n    rect.offsetTop(-visibleRect.top);\n    return rect;\n  }\n\n  _delayMode(grid, onTerminate) {\n    this._mode = 1;\n    this._ctx = null;\n    this._rect = null;\n    this._drawRect = null;\n    this._grid = grid;\n    this._onTerminate = onTerminate;\n  }\n  /**\r\n   * terminate\r\n   * @return {void}\r\n   */\n\n\n  terminate() {\n    var _a;\n\n    if (this._mode !== 0) {\n      (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n  }\n\n  _getRectInternal() {\n    if (this._mode === 0) {\n      return this._rect;\n    } else {\n      if (this._rect) {\n        return this._rect;\n      }\n\n      return this._grid.getCellRelativeRect(this._col, this._row);\n    }\n  }\n\n}\n/** @private */\n\n\nconst protectedKey = _;\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\n\nclass DrawGrid extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n  }\n\n  constructor(options = {}) {\n    super();\n    const {\n      rowCount = 10,\n      colCount = 10,\n      frozenColCount = 0,\n      frozenRowCount = 0,\n      defaultRowHeight = 40,\n      defaultColWidth = 80,\n      font,\n      underlayBackgroundColor,\n      keyboardOptions,\n      parentElement,\n      disableColumnResize,\n      trimOnPaste\n    } = options;\n    const protectedSpace = this[_] = {};\n    style.initDocument();\n    protectedSpace.element = createRootElement();\n    protectedSpace.scrollable = new Scrollable_1.Scrollable();\n    protectedSpace.handler = new EventHandler_1.EventHandler();\n    protectedSpace.selection = new Selection(this);\n    protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\n    protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\n    protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    protectedSpace.rowCount = rowCount;\n    protectedSpace.colCount = colCount;\n    protectedSpace.frozenColCount = frozenColCount;\n    protectedSpace.frozenRowCount = frozenRowCount;\n    protectedSpace.defaultRowHeight = defaultRowHeight;\n    protectedSpace.defaultColWidth = defaultColWidth;\n    protectedSpace.font = font;\n    protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\n    protectedSpace.keyboardOptions = keyboardOptions;\n    protectedSpace.disableColumnResize = disableColumnResize;\n    protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false; /////\n\n    protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsLimit = {};\n    protectedSpace.calcWidthContext = {\n      _: protectedSpace,\n\n      get full() {\n        return this._.canvas.width;\n      },\n\n      get em() {\n        return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\n      }\n\n    };\n    protectedSpace.columnResizer = new ColumnResizer(this);\n    protectedSpace.cellSelector = new CellSelector(this);\n    protectedSpace.drawCells = {};\n    protectedSpace.cellTextOverflows = {};\n    protectedSpace.focusedGrid = false;\n    protectedSpace.element.appendChild(protectedSpace.canvas);\n    protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\n    protectedSpace.scroll = {\n      left: 0,\n      top: 0\n    };\n    this.updateScroll();\n\n    if (parentElement) {\n      parentElement.appendChild(protectedSpace.element);\n      this.updateSize();\n    } else {\n      this.updateSize();\n    }\n\n    _bindEvents.call(this);\n\n    this.bindEventsInternal();\n  }\n  /**\r\n   * Get root element.\r\n   * @returns {HTMLElement} root element\r\n   */\n\n\n  getElement() {\n    return this[_].element;\n  }\n  /**\r\n   * Get canvas element.\r\n   */\n\n\n  get canvas() {\n    return this[_].canvas;\n  }\n  /**\r\n   * Focus the grid.\r\n   * @return {void}\r\n   */\n\n\n  focus() {\n    const {\n      col,\n      row\n    } = this[_].selection.select;\n    this.focusCell(col, row);\n  }\n\n  hasFocusGrid() {\n    return this[_].focusedGrid;\n  }\n  /**\r\n   * Get the selection instance.\r\n   */\n\n\n  get selection() {\n    return this[_].selection;\n  }\n  /**\r\n   * Get the number of rows.\r\n   */\n\n\n  get rowCount() {\n    return this[_].rowCount;\n  }\n  /**\r\n   * Set the number of rows.\r\n   */\n\n\n  set rowCount(rowCount) {\n    this[_].rowCount = rowCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\r\n   * Get the number of columns.\r\n   */\n\n\n  get colCount() {\n    return this[_].colCount;\n  }\n  /**\r\n   * Set the number of columns.\r\n   */\n\n\n  set colCount(colCount) {\n    this[_].colCount = colCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\r\n   * Get the number of frozen columns.\r\n   */\n\n\n  get frozenColCount() {\n    return this[_].frozenColCount;\n  }\n  /**\r\n   * Set the number of frozen columns.\r\n   */\n\n\n  set frozenColCount(frozenColCount) {\n    this[_].frozenColCount = frozenColCount;\n  }\n  /**\r\n   * Get the number of frozen rows.\r\n   */\n\n\n  get frozenRowCount() {\n    return this[_].frozenRowCount;\n  }\n  /**\r\n   * Set the number of frozen rows.\r\n   */\n\n\n  set frozenRowCount(frozenRowCount) {\n    this[_].frozenRowCount = frozenRowCount;\n  }\n  /**\r\n   * Get the default row height.\r\n   *\r\n   */\n\n\n  get defaultRowHeight() {\n    return this[_].defaultRowHeight;\n  }\n  /**\r\n   * Set the default row height.\r\n   */\n\n\n  set defaultRowHeight(defaultRowHeight) {\n    this[_].defaultRowHeight = defaultRowHeight;\n  }\n  /**\r\n   * Get the default column width.\r\n   */\n\n\n  get defaultColWidth() {\n    return this[_].defaultColWidth;\n  }\n  /**\r\n   * Set the default column width.\r\n   */\n\n\n  set defaultColWidth(defaultColWidth) {\n    this[_].defaultColWidth = defaultColWidth;\n  }\n  /**\r\n   * Get the font definition as a string.\r\n   */\n\n\n  get font() {\n    return this[_].font;\n  }\n  /**\r\n   * Set the font definition with the given string.\r\n   */\n\n\n  set font(font) {\n    this[_].font = font;\n  }\n  /**\r\n   * Get the background color of the underlay.\r\n   */\n\n\n  get underlayBackgroundColor() {\n    return this[_].underlayBackgroundColor;\n  }\n  /**\r\n   * Set the background color of the underlay.\r\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    this[_].underlayBackgroundColor = underlayBackgroundColor;\n  }\n  /**\r\n   * If set to true, trim the pasted text on pasting.\r\n   */\n\n\n  get trimOnPaste() {\n    return this[_].trimOnPaste;\n  }\n\n  set trimOnPaste(trimOnPaste) {\n    this[_].trimOnPaste = trimOnPaste;\n  }\n\n  get keyboardOptions() {\n    var _a;\n\n    return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\n  }\n\n  set keyboardOptions(keyboardOptions) {\n    this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  configure(name, value) {\n    const cfg = this[_].config || (this[_].config = {});\n\n    if (value != null) {\n      cfg[name] = value;\n    }\n\n    return cfg[name];\n  }\n  /**\r\n   * Apply the changed size.\r\n   * @return {void}\r\n   */\n\n\n  updateSize() {\n    //\n    const {\n      canvas\n    } = this[_];\n    canvas.style.width = \"\";\n    canvas.style.height = \"\";\n    const width = Math.floor(canvas.offsetWidth || canvas.parentElement.offsetWidth - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    const height = Math.floor(canvas.offsetHeight || canvas.parentElement.offsetHeight - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    canvas.width = width;\n    canvas.height = height; //style\n\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    const {\n      focus\n    } = this[_].selection;\n\n    this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\n  }\n  /**\r\n   * Apply the changed scroll size.\r\n   * @return {boolean} `true` if there was a change in the scroll size\r\n   */\n\n\n  updateScroll() {\n    const {\n      scrollable\n    } = this[_];\n\n    const newHeight = _getScrollHeight.call(this);\n\n    const newWidth = _getScrollWidth(this);\n\n    if (newHeight === scrollable.scrollHeight && newWidth === scrollable.scrollWidth) {\n      return false;\n    }\n\n    scrollable.setScrollSize(newWidth, newHeight);\n    this[_].scroll = {\n      left: scrollable.scrollLeft,\n      top: scrollable.scrollTop\n    };\n    const {\n      focus\n    } = this[_].selection;\n\n    this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\n\n    return true;\n  }\n  /**\r\n   * Get the row height of the given the row index.\r\n   * @param  {number} row The row index\r\n   * @return {number} The row height\r\n   */\n\n\n  getRowHeight(row) {\n    return _getRowHeight.call(this, row);\n  }\n  /**\r\n   * Set the row height of the given the row index.\r\n   * @param  {number} row The row index\r\n   * @param  {number} height The row height\r\n   * @return {void}\r\n   */\n\n\n  setRowHeight(row, height) {\n    _setRowHeight(this, row, height);\n  }\n  /**\r\n   * Get the column width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column width\r\n   */\n\n\n  getColWidth(col) {\n    return _getColWidth(this, col);\n  }\n  /**\r\n   * Set the column width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} width The column width\r\n   * @return {void}\r\n   */\n\n\n  setColWidth(col, width) {\n    _setColWidth(this, col, width);\n  }\n  /**\r\n   * Get the column max width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column max width\r\n   */\n\n\n  getMaxColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.max || undefined;\n  }\n  /**\r\n   * Set the column max width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} maxwidth The column max width\r\n   * @return {void}\r\n   */\n\n\n  setMaxColWidth(col, maxwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\n    if (maxwidth != null) {\n      obj.max = maxwidth;\n    } else {\n      delete obj.max;\n    }\n  }\n  /**\r\n   * Get the column min width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @return {number} The column min width\r\n   */\n\n\n  getMinColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.min || undefined;\n  }\n  /**\r\n   * Set the column min width of the given the column index.\r\n   * @param  {number} col The column index\r\n   * @param  {number} minwidth The column min width\r\n   * @return {void}\r\n   */\n\n\n  setMinColWidth(col, minwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\n    if (minwidth != null) {\n      obj.min = minwidth;\n    } else {\n      delete obj.min;\n    }\n  }\n  /**\r\n   * Get the rect of the cell.\r\n   * @param {number} col index of column, of the cell\r\n   * @param {number} row index of row, of the cell\r\n   * @returns {Rect} the rect of the cell.\r\n   */\n\n\n  getCellRect(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    let absoluteLeft = _getColsWidth(this, 0, col - 1);\n\n    const width = _getColWidth(this, col);\n\n    if (isFrozenCell && isFrozenCell.col) {\n      absoluteLeft += this[_].scroll.left;\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\n\n    const height = _getRowHeight.call(this, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      absoluteTop += this[_].scroll.top;\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n  /**\r\n   * Get the relative rectangle of the cell.\r\n   * @param {number} col index of column, of the cell\r\n   * @param {number} row index of row, of the cell\r\n   * @returns {Rect} the rect of the cell.\r\n   */\n\n\n  getCellRelativeRect(col, row) {\n    return _toRelativeRect(this, this.getCellRect(col, row));\n  }\n  /**\r\n   * Get the rectangle of the cells area.\r\n   * @param {number} startCol index of the starting column, of the cell\r\n   * @param {number} startRow index of the starting row, of the cell\r\n   * @param {number} endCol index of the ending column, of the cell\r\n   * @param {number} endRow index of the ending row, of the cell\r\n   * @returns {Rect} the rect of the cells.\r\n   */\n\n\n  getCellsRect(startCol, startRow, endCol, endRow) {\n    const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n    const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let width = _getColsWidth(this, startCol, endCol);\n\n    if (isFrozenStartCell && isFrozenStartCell.col) {\n      const scrollLeft = this[_].scroll.left;\n      absoluteLeft += scrollLeft;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.col) {\n        width -= scrollLeft;\n        width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n      }\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let height = _getRowsHeight.call(this, startRow, endRow);\n\n    if (isFrozenStartCell && isFrozenStartCell.row) {\n      const scrollTop = this[_].scroll.top;\n      absoluteTop += scrollTop;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.row) {\n        height -= scrollTop;\n        height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n      }\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n\n  getCellRangeRect(range) {\n    return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n\n  isFrozenCell(col, row) {\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = this[_];\n    const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\n    const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\n\n    if (isFrozenRow || isFrozenCol) {\n      return {\n        row: isFrozenRow,\n        col: isFrozenCol\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getRowAt(absoluteY) {\n    const frozen = _getTargetFrozenRowAt(this, absoluteY);\n\n    if (frozen) {\n      return frozen.row;\n    }\n\n    const row = _getTargetRowAt.call(this, absoluteY);\n\n    return row ? row.row : -1;\n  }\n\n  getColAt(absoluteX) {\n    const frozen = _getTargetFrozenColAt(this, absoluteX);\n\n    if (frozen) {\n      return frozen.col;\n    }\n\n    const col = _getTargetColAt(this, absoluteX);\n\n    return col ? col.col : -1;\n  }\n\n  getCellAt(absoluteX, absoluteY) {\n    return {\n      row: this.getRowAt(absoluteY),\n      col: this.getColAt(absoluteX)\n    };\n  }\n  /**\r\n   * Scroll to where cell is visible.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  makeVisibleCell(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n      return;\n    }\n\n    const rect = this.getCellRect(col, row);\n\n    const visibleRect = _getScrollableVisibleRect(this);\n\n    if (visibleRect.contains(rect)) {\n      return;\n    }\n\n    const {\n      scrollable\n    } = this[_];\n\n    if (!isFrozenCell || !isFrozenCell.col) {\n      if (rect.left < visibleRect.left) {\n        scrollable.scrollLeft -= visibleRect.left - rect.left;\n      } else if (visibleRect.right < rect.right) {\n        scrollable.scrollLeft -= visibleRect.right - rect.right;\n      }\n    }\n\n    if (!isFrozenCell || !isFrozenCell.row) {\n      if (rect.top < visibleRect.top) {\n        scrollable.scrollTop -= visibleRect.top - rect.top;\n      } else if (visibleRect.bottom < rect.bottom) {\n        scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n      }\n    }\n  }\n  /**\r\n   * Moves the focus cursor to the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  setFocusCursor(col, row) {\n    const {\n      focusControl\n    } = this[_];\n    const oldEditMode = focusControl.editMode;\n    focusControl.setFocusRect(this.getCellRect(col, row));\n\n    _updatedSelection.call(this);\n\n    if (oldEditMode && !focusControl.editMode) {\n      focusControl.resetInputStatus();\n    }\n  }\n  /**\r\n   * Focus the cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {void}\r\n   */\n\n\n  focusCell(col, row) {\n    this.setFocusCursor(col, row); // Failure occurs in IE if focus is not last\n\n    this[_].focusControl.focus();\n  }\n  /**\r\n   * Redraws the range of the given cell.\r\n   * @param  {number} col The column index of cell.\r\n   * @param  {number} row The row index of cell.\r\n   * @return {void}\r\n   */\n\n\n  invalidateCell(col, row) {\n    this.invalidateGridRect(col, row);\n  }\n  /**\r\n   * Redraws the range of the given cells.\r\n   * @param {number} startCol index of the starting column, of the cell\r\n   * @param {number} startRow index of the starting row, of the cell\r\n   * @param {number} endCol index of the ending column, of the cell\r\n   * @param {number} endRow index of the ending row, of the cell\r\n   * @return {void}\r\n   */\n\n\n  invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n    const offset = this.getOffsetInvalidateCells();\n\n    if (offset > 0) {\n      startCol -= offset;\n      startRow -= offset;\n      endCol += offset;\n      endRow += offset;\n    }\n\n    const visibleRect = _getVisibleRect(this);\n\n    const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n    const invalidateTarget = visibleRect.intersection(cellsRect);\n\n    if (invalidateTarget) {\n      const {\n        frozenColCount,\n        frozenRowCount\n      } = this[_];\n\n      if (frozenColCount > 0 && endCol >= frozenColCount) {\n        const frozenRect = _getFrozenColsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\n        }\n      }\n\n      if (frozenRowCount > 0 && endRow >= frozenRowCount) {\n        const frozenRect = _getFrozenRowsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n        }\n      }\n\n      _invalidateRect(this, invalidateTarget);\n    }\n  }\n\n  invalidateCellRange(range) {\n    this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n  /**\r\n   * Redraws the whole grid.\r\n   * @return {void}\r\n   */\n\n\n  invalidate() {\n    const visibleRect = _getVisibleRect(this);\n\n    _invalidateRect(this, visibleRect);\n  }\n  /**\r\n   * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n   * @returns {number}\r\n   */\n\n\n  get visibleRowCount() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let count = 0;\n    const {\n      rowCount\n    } = this;\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = absoluteTop + height;\n\n      if (visibleRect.bottom < bottom) {\n        break;\n      }\n\n      count++;\n      absoluteTop = bottom;\n    }\n\n    return count;\n  }\n  /**\r\n   * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n   * @returns {number}\r\n   */\n\n\n  get visibleColCount() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let count = 0;\n    const {\n      colCount\n    } = this;\n\n    for (let col = startCol; col < colCount; col++) {\n      const width = _getColWidth(this, col);\n\n      const right = absoluteLeft + width;\n\n      if (visibleRect.right < right) {\n        break;\n      }\n\n      count++;\n      absoluteLeft = right;\n    }\n\n    return count;\n  }\n  /**\r\n   * Get the index of the first row in the scrollable region that is visible.\r\n   * @returns {number}\r\n   */\n\n\n  get topRow() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n  }\n  /**\r\n   * Get the index of the first column in the scrollable region that is visible.\r\n   * @returns {number}\r\n   */\n\n\n  get leftCol() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n  }\n  /**\r\n   * gets or sets the number of pixels that an element's content is scrolled vertically\r\n   */\n\n\n  get scrollTop() {\n    return this[_].scrollable.scrollTop;\n  }\n\n  set scrollTop(scrollTop) {\n    this[_].scrollable.scrollTop = scrollTop;\n  }\n  /**\r\n   * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n   */\n\n\n  get scrollLeft() {\n    return this[_].scrollable.scrollLeft;\n  }\n\n  set scrollLeft(scrollLeft) {\n    this[_].scrollable.scrollLeft = scrollLeft;\n  }\n  /**\r\n   * Get the value of cell with the copy action.\r\n   * <p>\r\n   * Please implement\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param col Column index of cell.\r\n   * @param row Row index of cell.\r\n   * @param range Copy range.\r\n   * @return {string} the value of cell\r\n   */\n\n\n  getCopyCellValue(_col, _row, _range) {\n    //Please implement get cell value!!\n    return undefined;\n  }\n  /**\r\n   * Get the overflowed text in the cell rectangle, from the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @return {string | null} The text overflowing the cell rect.\r\n   */\n\n\n  getCellOverflowText(col, row) {\n    const key = `${col}:${row}`;\n    return this[_].cellTextOverflows[key] || null;\n  }\n  /**\r\n   * Set the overflowed text in the cell rectangle, to the given cell.\r\n   * @param  {number} col The column index.\r\n   * @param  {number} row The row index\r\n   * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n   * @return {void}\r\n   */\n\n\n  setCellOverflowText(col, row, overflowText) {\n    const key = `${col}:${row}`;\n\n    if (overflowText) {\n      this[_].cellTextOverflows[key] = typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\n    } else {\n      delete this[_].cellTextOverflows[key];\n    }\n  }\n\n  addDisposable(disposable) {\n    if (!disposable || !disposable.dispose || typeof disposable.dispose !== \"function\") {\n      throw new Error(\"not disposable!\");\n    }\n\n    const disposables = this[_].disposables = this[_].disposables || [];\n    disposables.push(disposable);\n  }\n  /**\r\n   * Dispose the grid instance.\r\n   * @returns {void}\r\n   */\n\n\n  dispose() {\n    super.dispose();\n    const protectedSpace = this[_];\n    protectedSpace.handler.dispose();\n    protectedSpace.scrollable.dispose();\n    protectedSpace.focusControl.dispose();\n    protectedSpace.columnResizer.dispose();\n    protectedSpace.cellSelector.dispose();\n\n    if (protectedSpace.disposables) {\n      protectedSpace.disposables.forEach(disposable => disposable.dispose());\n      protectedSpace.disposables = null;\n    }\n\n    const {\n      parentElement\n    } = protectedSpace.element;\n\n    if (parentElement) {\n      parentElement.removeChild(protectedSpace.element);\n    }\n  }\n\n  getAttachCellsArea(range) {\n    return {\n      element: this.getElement(),\n      rect: _toRelativeRect(this, this.getCellRangeRect(range))\n    };\n  }\n\n  onKeyDownMove(evt) {\n    _onKeyDownMove.call(this, evt);\n  }\n\n  bindEventsInternal() {//nop\n  }\n\n  getTargetRowAtInternal(_absoluteY) {// \n  }\n\n  getRowsHeightInternal(_startRow, _endRow) {// \n  }\n\n  getRowHeightInternal(_row) {// \n  }\n\n  getScrollHeightInternal(_row) {// \n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col\n  }) {\n    return col - 1;\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col\n  }) {\n    return col + 1;\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    row\n  }) {\n    return row - 1;\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    row\n  }) {\n    return row + 1;\n  }\n\n  getOffsetInvalidateCells() {\n    return 0;\n  }\n\n  getCopyRangeInternal(range) {\n    return range;\n  }\n\n  _getInitContext() {\n    const ctx = this[_].context; //\n\n    ctx.fillStyle = \"white\";\n    ctx.strokeStyle = \"black\";\n    ctx.textAlign = \"left\";\n    ctx.textBaseline = \"top\";\n    ctx.lineWidth = 1;\n    ctx.font = this.font || \"16px sans-serif\";\n    return ctx;\n  }\n\n  fireListeners(type, ...event) {\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.DrawGrid = DrawGrid;\n\n/***/ }),\n\n/***/ \"./core/EventTarget.js\":\n/*!*****************************!*\\\n  !*** ./core/EventTarget.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventTarget = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\"); //private symbol\n\n/** @private */\n\n\nconst _ = (0, symbolManager_1.get)();\n/** @private */\n\n\nlet nextId = 1;\n/**\r\n * event target.\r\n */\n\nclass EventTarget {\n  constructor() {\n    this[_a] = {\n      listeners: {},\n      listenerData: {}\n    };\n  }\n  /**\r\n   * Adds an event listener.\r\n   * @param  {string} type The event type id.\r\n   * @param  {function} listener Callback method.\r\n   * @return {number} unique id for the listener.\r\n   */\n\n\n  listen(type, listener) {\n    const list = this[_].listeners[type] || (this[_].listeners[type] = []);\n    list.push(listener);\n    const id = nextId++;\n    this[_].listenerData[id] = {\n      type,\n      listener,\n      remove: () => {\n        delete this[_].listenerData[id];\n        const index = list.indexOf(listener);\n        list.splice(index, 1);\n\n        if (!this[_].listeners[type].length) {\n          delete this[_].listeners[type];\n        }\n      }\n    };\n    return id;\n  }\n  /**\r\n   * Removes an event listener which was added with listen() by the id returned by listen().\r\n   * @param  {number} id the id returned by listen().\r\n   * @return {void}\r\n   */\n\n\n  unlisten(id) {\n    if (!this[_]) {\n      return;\n    }\n\n    this[_].listenerData[id].remove();\n  }\n\n  addEventListener(type, listener) {\n    this.listen(type, listener);\n  }\n\n  removeEventListener(type, listener) {\n    if (!this[_]) {\n      return;\n    }\n\n    (0, utils_1.each)(this[_].listenerData, (obj, id) => {\n      if (obj.type === type && obj.listener === listener) {\n        this.unlisten(id);\n      }\n    });\n  }\n\n  hasListeners(type) {\n    if (!this[_]) {\n      return false;\n    }\n\n    return !!this[_].listeners[type];\n  }\n  /**\r\n   * Fires all registered listeners\r\n   * @param  {string}    type The type of the listeners to fire.\r\n   * @param  {...*} args fire arguments\r\n   * @return {*} the result of the last listener\r\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fireListeners(type, ...args) {\n    if (!this[_]) {\n      return [];\n    }\n\n    const list = this[_].listeners[type];\n\n    if (!list) {\n      return [];\n    }\n\n    return list.map(listener => listener.call(this, ...args)).filter(r => r != null);\n  }\n\n  dispose() {\n    // @ts-expect-error -- ignore\n    delete this[_];\n  }\n\n}\n\nexports.EventTarget = EventTarget;\n_a = _;\n\n/***/ }),\n\n/***/ \"./data.js\":\n/*!*****************!*\\\n  !*** ./data.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\n\nconst DataSource_1 = __webpack_require__(/*! ./data/DataSource */ \"./data/DataSource.js\");\n\nObject.defineProperty(exports, \"DataSource\", {\n  enumerable: true,\n  get: function () {\n    return DataSource_1.DataSource;\n  }\n});\n\nconst CachedDataSource_1 = __webpack_require__(/*! ./data/CachedDataSource */ \"./data/CachedDataSource.js\");\n\nObject.defineProperty(exports, \"CachedDataSource\", {\n  enumerable: true,\n  get: function () {\n    return CachedDataSource_1.CachedDataSource;\n  }\n});\n\nconst FilterDataSource_1 = __webpack_require__(/*! ./data/FilterDataSource */ \"./data/FilterDataSource.js\");\n\nObject.defineProperty(exports, \"FilterDataSource\", {\n  enumerable: true,\n  get: function () {\n    return FilterDataSource_1.FilterDataSource;\n  }\n});\n\n/***/ }),\n\n/***/ \"./data/CachedDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/CachedDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CachedDataSource = void 0;\n\nconst DataSource_1 = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n/** @private */\n\n\nfunction _setFieldCache( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfCache, index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  const recCache = fCache[index] || (fCache[index] = new Map());\n  recCache.set(field, value);\n}\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass CachedDataSource extends DataSource_1.DataSource {\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new CachedDataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  }\n\n  constructor(opt) {\n    super(opt);\n    this._rCache = {};\n    this._fCache = {};\n  }\n\n  getOriginal(index) {\n    if (this._rCache && this._rCache[index]) {\n      return this._rCache[index];\n    }\n\n    return super.getOriginal(index);\n  }\n\n  getOriginalField(index, field) {\n    const rowCache = this._fCache && this._fCache[index];\n\n    if (rowCache) {\n      const cache = rowCache.get(field);\n\n      if (cache) {\n        return cache;\n      }\n    }\n\n    return super.getOriginalField(index, field);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    const fCache = this._fCache;\n\n    if (fCache && fCache[index]) {\n      delete fCache[index]; // clear row cache\n    }\n\n    return super.setOriginalField(index, field, value);\n  }\n\n  clearCache() {\n    if (this._rCache) {\n      this._rCache = {};\n    }\n\n    if (this._fCache) {\n      this._fCache = {};\n    }\n  }\n\n  fieldPromiseCallBackInternal(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    _setFieldCache(this._fCache, index, field, value);\n  }\n\n  recordPromiseCallBackInternal(index, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  record) {\n    this._rCache[index] = record;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n}\n\nexports.CachedDataSource = CachedDataSource;\n\n/***/ }),\n\n/***/ \"./data/DataSource.js\":\n/*!****************************!*\\\n  !*** ./data/DataSource.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataSource = void 0;\n\nconst sort = __importStar(__webpack_require__(/*! ../internal/sort */ \"./internal/sort.js\"));\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst EventTarget_1 = __webpack_require__(/*! ../core/EventTarget */ \"./core/EventTarget.js\");\n/** @private */\n\n\nfunction isFieldAssessor(field) {\n  if (utils_1.obj.isObject(field)) {\n    if (field.get && field.set) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/** @private */\n\n\nconst EVENT_TYPE = {\n  UPDATE_LENGTH: \"update_length\",\n  UPDATED_LENGTH: \"updated_length\",\n  UPDATED_ORDER: \"updated_order\"\n};\n/** @private */\n\nfunction ascOrderFn(v1, v2) {\n  if (v1 === v2) {\n    return 0;\n  }\n\n  if (v1 == null) {\n    return v2 == null ? // If both are nullish, consider a match.\n    0 : // Nulls first\n    -1;\n  }\n\n  if (v2 == null) {\n    // Nulls first\n    return 1;\n  }\n\n  return v1 > v2 ? 1 : -1;\n}\n\nfunction descOrderFn(v1, v2) {\n  return ascOrderFn(v1, v2) * -1;\n}\n/** @private */\n\n\nfunction getValue(value, setPromiseBack) {\n  const maybePromiseValue = (0, utils_1.getOrApply)(value);\n\n  if ((0, utils_1.isPromise)(maybePromiseValue)) {\n    const promiseValue = maybePromiseValue.then(r => {\n      setPromiseBack(r);\n      return r;\n    }); //\n\n    setPromiseBack(promiseValue);\n    return promiseValue;\n  } else {\n    return maybePromiseValue;\n  }\n}\n/** @private */\n\n\nfunction getField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nsetPromiseBack) {\n  if (record == null) {\n    return undefined;\n  }\n\n  if ((0, utils_1.isPromise)(record)) {\n    return record.then(r => getField(r, field, setPromiseBack));\n  }\n\n  const fieldGet = isFieldAssessor(field) ? field.get : field;\n\n  if (fieldGet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  if (typeof fieldGet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = fieldGet(record);\n    return getValue(fieldResult, setPromiseBack);\n  } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n  const ss = String(fieldGet).split(\".\");\n\n  if (ss.length <= 1) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet];\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  const fieldResult = (0, utils_1.applyChainSafe)(record, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\n  return getValue(fieldResult, setPromiseBack);\n}\n/** @private */\n\n\nfunction setField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (record == null) {\n    return false;\n  }\n\n  const fieldSet = isFieldAssessor(field) ? field.set : field;\n\n  if (fieldSet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  } else if (typeof fieldSet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return fieldSet(record, value);\n  } else if (typeof fieldSet === \"string\") {\n    const ss = `${fieldSet}`.split(\".\"); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    let obj = record;\n    const {\n      length\n    } = ss;\n\n    for (let i = 0; i < length; i++) {\n      const f = ss[i];\n\n      if (i === length - 1) {\n        obj[f] = value;\n      } else {\n        obj = obj[f] || (obj[f] = {});\n      }\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  }\n\n  return true;\n}\n/** @private */\n\n\nfunction _getIndex(sortedIndexMap, index) {\n  if (!sortedIndexMap) {\n    return index;\n  }\n\n  const mapIndex = sortedIndexMap[index];\n  return mapIndex != null ? mapIndex : index;\n}\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass DataSource extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new DataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  }\n\n  constructor(obj) {\n    var _a;\n\n    super();\n    this._sortedIndexMap = null; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\n    this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\n    this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._source;\n  }\n\n  get(index) {\n    return this.getOriginal(_getIndex(this._sortedIndexMap, index));\n  }\n\n  getField(index, field) {\n    return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  hasField(index, field) {\n    return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  }\n\n  setField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\n  }\n\n  sort(field, order) {\n    const sortedIndexMap = new Array(this._length);\n    const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\n    return sort.sortPromise(index => sortedIndexMap[index] != null ? sortedIndexMap[index] : sortedIndexMap[index] = index, (index, rel) => {\n      sortedIndexMap[index] = rel;\n    }, this._length, orderFn, index => this.getOriginalField(index, field)).then(() => {\n      this._sortedIndexMap = sortedIndexMap;\n      this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n    });\n  }\n\n  get length() {\n    return this._length;\n  }\n\n  set length(length) {\n    if (this._length === length) {\n      return;\n    }\n\n    const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n\n    if (utils_1.array.findIndex(results, v => !v) >= 0) {\n      return;\n    }\n\n    this._length = length;\n    this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n  }\n\n  get dataSource() {\n    return this;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  getOriginal(index) {\n    return getValue(this._get(index), val => {\n      this.recordPromiseCallBackInternal(index, val);\n    });\n  }\n\n  getOriginalField(index, field) {\n    if (field == null) {\n      return undefined;\n    }\n\n    const record = this.getOriginal(index);\n    return getField(record, field, val => {\n      this.fieldPromiseCallBackInternal(index, field, val);\n    });\n  }\n\n  hasOriginalField(index, field) {\n    if (field == null) {\n      return false;\n    }\n\n    if (typeof field === \"function\") {\n      return true;\n    }\n\n    const record = this.getOriginal(index);\n    return Boolean(record && field in record);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    if (field == null) {\n      return false;\n    }\n\n    const record = this.getOriginal(index);\n\n    if ((0, utils_1.isPromise)(record)) {\n      return record.then(r => setField(r, field, value));\n    }\n\n    return setField(record, field, value);\n  }\n\n  fieldPromiseCallBackInternal(_index, _field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _value) {//\n  }\n\n  recordPromiseCallBackInternal(_index, _record) {//\n  }\n\n}\n\nexports.DataSource = DataSource; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nDataSource.EMPTY = new DataSource({\n  get() {\n    /*noop */\n  },\n\n  length: 0\n});\n\n/***/ }),\n\n/***/ \"./data/FilterDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/FilterDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterDataSource = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst DataSource_1 = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n\nconst EventHandler_1 = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n/** @private */\n\n\nclass DataSourceIterator {\n  constructor(dataSource) {\n    this._dataSource = dataSource;\n    this._curIndex = -1;\n    this._data = [];\n  }\n\n  hasNext() {\n    const next = this._curIndex + 1;\n    return this._dataSource.length > next;\n  }\n\n  next() {\n    const next = this._curIndex + 1;\n\n    const data = this._getIndexData(next);\n\n    this._curIndex = next;\n    return data;\n  }\n\n  movePrev() {\n    this._curIndex--;\n  }\n\n  _getIndexData(index, nest) {\n    const dataSource = this._dataSource;\n    const data = this._data;\n\n    if (index < data.length) {\n      return data[index];\n    }\n\n    if (dataSource.length <= index) {\n      return undefined;\n    }\n\n    const record = this._dataSource.get(index);\n\n    data[index] = record;\n\n    if ((0, utils_1.isPromise)(record)) {\n      record.then(val => {\n        data[index] = val;\n      });\n\n      if (!nest) {\n        for (let i = 1; i <= 100; i++) {\n          this._getIndexData(index + i, true);\n        }\n      }\n    }\n\n    return record;\n  }\n\n}\n/** @private */\n\n\nclass FilterData {\n  constructor(dc, original, filter) {\n    this._cancel = false;\n    this._owner = dc;\n    this._dataSourceItr = new DataSourceIterator(original);\n    this._filter = filter;\n    this._filteredList = [];\n    this._queues = [];\n  }\n\n  get(index) {\n    if (this._cancel) {\n      return undefined;\n    }\n\n    const filteredList = this._filteredList;\n\n    if (index < filteredList.length) {\n      return filteredList[index];\n    }\n\n    const queues = this._queues;\n    const indexQueue = queues[index];\n\n    if (indexQueue) {\n      return indexQueue;\n    }\n\n    return queues[index] || this._findIndex(index);\n  }\n\n  cancel() {\n    this._cancel = true;\n  }\n\n  _findIndex(index) {\n    if (window.Promise) {\n      const timeout = Date.now() + 100;\n      let count = 0;\n      return this._findIndexWithTimeout(index, () => {\n        count++;\n\n        if (count >= 100) {\n          count = 0;\n          return timeout < Date.now();\n        }\n\n        return false;\n      });\n    }\n\n    return this._findIndexWithTimeout(index, () => false);\n  }\n\n  _findIndexWithTimeout(index, testTimeout) {\n    const filteredList = this._filteredList;\n    const filter = this._filter;\n    const dataSourceItr = this._dataSourceItr;\n    const queues = this._queues;\n\n    while (dataSourceItr.hasNext()) {\n      if (this._cancel) {\n        return undefined;\n      }\n\n      const record = dataSourceItr.next();\n\n      if ((0, utils_1.isPromise)(record)) {\n        dataSourceItr.movePrev();\n        const queue = record.then(_value => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n\n      if (filter(record)) {\n        filteredList.push(record);\n\n        if (index < filteredList.length) {\n          return filteredList[index];\n        }\n      }\n\n      if (testTimeout()) {\n        const promise = new Promise(resolve => {\n          setTimeout(() => {\n            resolve();\n          }, 300);\n        });\n        const queue = promise.then(() => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n    }\n\n    const dc = this._owner;\n    dc.length = filteredList.length;\n    return undefined;\n  }\n\n}\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\n\n\nclass FilterDataSource extends DataSource_1.DataSource {\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  constructor(dataSource, filter) {\n    super(dataSource);\n    this._filterData = null;\n    this._dataSource = dataSource;\n    this.filter = filter;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n      // reset\n      // eslint-disable-next-line no-self-assign\n      this.filter = this.filter;\n    });\n    (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, type => {\n      handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\n    });\n  }\n\n  get filter() {\n    var _a;\n\n    return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\n  }\n\n  set filter(filter) {\n    if (this._filterData) {\n      this._filterData.cancel();\n    }\n\n    this._filterData = filter ? new FilterData(this, this._dataSource, filter) : null;\n    this.length = this._dataSource.length;\n  }\n\n  getOriginal(index) {\n    if (!this._filterData) {\n      return super.getOriginal(index);\n    }\n\n    return this._filterData.get(index);\n  }\n\n  sort(field, order) {\n    return this._dataSource.sort(field, order);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._dataSource.source;\n  }\n\n  get dataSource() {\n    return this._dataSource;\n  }\n\n  dispose() {\n    this._handler.dispose();\n\n    super.dispose();\n  }\n\n}\n\nexports.FilterDataSource = FilterDataSource;\n\n/***/ }),\n\n/***/ \"./element/Inline.js\":\n/*!***************************!*\\\n  !*** ./element/Inline.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Inline = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nfunction getWidth(ctx, content) {\n  return ctx.measureText(content).width;\n}\n\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\n  const chars = [];\n  let ret = itr.next();\n\n  for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\n    chars.push(ret);\n  }\n\n  let beforeWidth = getWidth(ctx, chars.join(\"\"));\n\n  if (beforeWidth > width) {\n    while (chars.length) {\n      const c = chars.pop();\n      beforeWidth -= getWidth(ctx, c || \"\");\n\n      if (beforeWidth <= width) {\n        break;\n      }\n    }\n  } else if (beforeWidth < width) {\n    while (ret !== null) {\n      const charWidth = getWidth(ctx, ret);\n\n      if (beforeWidth + charWidth > width) {\n        break;\n      }\n\n      chars.push(ret);\n      beforeWidth += charWidth;\n      ret = itr.next();\n    }\n  }\n\n  const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\n  const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\n  return {\n    before: beforeContent ? new Inline(beforeContent) : null,\n    after: afterContent ? new Inline(afterContent) : null\n  };\n}\n\nclass Inline {\n  constructor(content) {\n    this._content = content != null ? content : \"\";\n  }\n\n  width({\n    ctx\n  }) {\n    return getWidth(ctx, this._content);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft,\n        right: offsetRight,\n        top: offsetTop,\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return !!this._content;\n  }\n\n  splitIndex(index) {\n    const content = this._content;\n    const itr = utils_1.str.genChars(content);\n    const chars = [];\n    let ret = itr.next();\n\n    for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\n      chars.push(ret);\n    }\n\n    const beforeContent = chars.join(\"\");\n    const afterContent = content.slice(beforeContent.length);\n    return {\n      before: beforeContent ? new Inline(beforeContent) : null,\n      after: afterContent ? new Inline(afterContent) : null\n    };\n  }\n\n  breakWord(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genWords(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  breakAll(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genChars(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  toString() {\n    return this._content;\n  }\n\n}\n\nexports.Inline = Inline;\n\n/***/ }),\n\n/***/ \"./element/InlineDrawer.js\":\n/*!*********************************!*\\\n  !*** ./element/InlineDrawer.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineDrawer = void 0;\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineDrawer extends Inline_1.Inline {\n  constructor({\n    draw,\n    width,\n    // height,\n    color\n  }) {\n    super();\n    this._draw = draw;\n    this._width = width; // this._height = height;\n\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    this._draw({\n      ctx,\n      canvashelper,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineDrawer = InlineDrawer;\n\n/***/ }),\n\n/***/ \"./element/InlineIcon.js\":\n/*!*******************************!*\\\n  !*** ./element/InlineIcon.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineIcon = void 0;\n\nconst fonts = __importStar(__webpack_require__(/*! ../internal/fonts */ \"./internal/fonts.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineIcon extends Inline_1.Inline {\n  constructor(icon) {\n    super();\n    this._icon = icon || {};\n  }\n\n  width({\n    ctx\n  }) {\n    const icon = this._icon;\n\n    if (icon.width) {\n      return icon.width;\n    }\n\n    if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\n      ctx.save();\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        ctx.font = icon.font || ctx.font;\n        return ctx.measureText(icon.content || \"\").width;\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n        ctx.restore();\n      }\n    }\n\n    return 0; //unknown\n  }\n\n  font() {\n    var _a;\n\n    return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    const icon = this._icon;\n    return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\n  }\n\n  onReady(callback) {\n    const icon = this._icon;\n\n    if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\n      fonts.load(icon.font, icon.content || \"\", callback);\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    const icon = this._icon;\n\n    if (icon.content) {\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        // eslint-disable-next-line no-self-assign\n        ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\n\n        canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft + (this._icon.offsetLeft || 0),\n            right: offsetRight,\n            top: offsetTop + (this._icon.offsetTop || 0),\n            bottom: offsetBottom\n          }\n        });\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n      }\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineIcon = InlineIcon;\n\n/***/ }),\n\n/***/ \"./element/InlineImage.js\":\n/*!********************************!*\\\n  !*** ./element/InlineImage.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineImage = void 0;\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst imgs_1 = __webpack_require__(/*! ../internal/imgs */ \"./internal/imgs.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nclass InlineImage extends Inline_1.Inline {\n  constructor({\n    src,\n    width,\n    height,\n    imageLeft,\n    imageTop,\n    imageWidth,\n    imageHeight,\n    offsetTop,\n    offsetLeft\n  }) {\n    super();\n    this._inlineImgPromise = null;\n    this._inlineImg = null;\n    this._src = src;\n    this._width = width;\n    this._height = height;\n    this._imageLeft = imageLeft;\n    this._imageTop = imageTop;\n    this._imageWidth = imageWidth;\n    this._imageHeight = imageHeight;\n    this._offsetTop = offsetTop;\n    this._offsetLeft = offsetLeft;\n    this._onloaded = [];\n\n    if ((0, utils_1.isPromise)(src)) {\n      src.then(s => {\n        this._src = s;\n\n        this._loadImage(s);\n      });\n    } else {\n      this._loadImage(src);\n    }\n  }\n\n  _loadImage(src) {\n    const img = this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src);\n\n    if ((0, utils_1.isPromise)(img)) {\n      img.then(i => {\n        this._inlineImg = i;\n\n        this._onloaded.forEach(fn => fn());\n      });\n    } else {\n      this._inlineImg = img;\n    }\n  }\n\n  width(_arg) {\n    var _a, _b;\n\n    return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return !!this._inlineImg;\n  }\n\n  onReady(callback) {\n    if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\n      this._onloaded.push(() => callback());\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    var _a, _b;\n\n    const img = this._inlineImg;\n    canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\n        right: offsetRight,\n        top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineImage = InlineImage;\n\n/***/ }),\n\n/***/ \"./element/InlinePath2D.js\":\n/*!*********************************!*\\\n  !*** ./element/InlinePath2D.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlinePath2D = void 0;\n\nconst path2DManager = __importStar(__webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nclass InlinePath2D extends Inline_1.Inline {\n  constructor({\n    path,\n    width,\n    height,\n    color\n  }) {\n    super(); // IEPath2Dpolyfill\n\n    const Path2D = path2DManager.getPath2D();\n    this._path = new Path2D(path);\n    this._width = width;\n    this._height = height;\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    offset++;\n    const padding = {\n      left: offsetLeft,\n      right: offsetRight,\n      top: offsetTop,\n      bottom: offsetBottom\n    };\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n      ctx.clip(); //\n\n      const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\n        offset,\n        padding\n      });\n      ctx.translate(pos.x, pos.y);\n      ctx.fill(this._path);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlinePath2D = InlinePath2D;\n\n/***/ }),\n\n/***/ \"./element/InlineSvg.js\":\n/*!******************************!*\\\n  !*** ./element/InlineSvg.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineSvg = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst InlineImage_1 = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\n\nfunction buildSvgDataUrl(svg) {\n  const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\n  const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\n\n  return url;\n}\n\nfunction getSvgElement(svg) {\n  if (typeof svg === \"string\") {\n    const parser = new DOMParser();\n    return parser.parseFromString(svg, \"image/svg+xml\").children[0];\n  } else {\n    return svg;\n  }\n}\n\nclass InlineSvg extends InlineImage_1.InlineImage {\n  constructor({\n    svg,\n    width,\n    height\n  }) {\n    var _a, _b;\n\n    const svgElem = (0, utils_1.then)(svg, getSvgElement);\n    const elmWidth = !(0, utils_1.isPromise)(svgElem) ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined : undefined;\n    const elmHeight = !(0, utils_1.isPromise)(svgElem) ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined : undefined;\n    const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\n    const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\n    super({\n      src: (0, utils_1.then)(svg, buildSvgDataUrl),\n      width: width || numElmWidth,\n      height: height || numElmHeight,\n      imageWidth: numElmWidth,\n      imageHeight: numElmHeight\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineSvg = InlineSvg;\n\n/***/ }),\n\n/***/ \"./element/inlines.js\":\n/*!****************************!*\\\n  !*** ./element/inlines.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\n\nconst icons = __importStar(__webpack_require__(/*! ../icons */ \"./icons.js\"));\n\nconst path2DManager = __importStar(__webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\"));\n\nconst Inline_1 = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nconst InlineDrawer_1 = __webpack_require__(/*! ./InlineDrawer */ \"./element/InlineDrawer.js\");\n\nconst InlineIcon_1 = __webpack_require__(/*! ./InlineIcon */ \"./element/InlineIcon.js\");\n\nconst InlineImage_1 = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\n\nconst InlinePath2D_1 = __webpack_require__(/*! ./InlinePath2D */ \"./element/InlinePath2D.js\");\n\nconst InlineSvg_1 = __webpack_require__(/*! ./InlineSvg */ \"./element/InlineSvg.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\n      offset,\n      padding\n    });\n    path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nfunction isIconConstructorOption(icon) {\n  if (icon.font && icon.content) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineImageConstructorOption(icon) {\n  if (icon.src) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineSvgConstructorOption(icon) {\n  if (icon.path) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction iconOf(icon) {\n  if (icon instanceof Inline_1.Inline) {\n    return icon;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  if (isIconConstructorOption(icon)) {\n    return new InlineIcon_1.InlineIcon(icon);\n  }\n\n  if (isInlineImageConstructorOption(icon)) {\n    return new InlineImage_1.InlineImage({\n      src: icon.src,\n      width: icon.width,\n      height: icon.width,\n      offsetTop: icon.offsetTop,\n      offsetLeft: icon.offsetLeft\n    });\n  }\n\n  if (icon.svg) {\n    return new InlineSvg_1.InlineSvg({\n      svg: icon.svg,\n      width: icon.width,\n      height: icon.width\n    });\n  }\n\n  if (isInlineSvgConstructorOption(icon)) {\n    return new InlinePath2D_1.InlinePath2D({\n      path: icon.path,\n      width: icon.width,\n      height: icon.width,\n      color: icon.color\n    });\n  }\n\n  const registeredIcons = icons.get();\n\n  if (icon.name && registeredIcons[icon.name]) {\n    const registeredIcon = registeredIcons[icon.name];\n    const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\n    return new InlineDrawer_1.InlineDrawer({\n      draw({\n        ctx,\n        rect,\n        offset,\n        offsetLeft,\n        offsetRight,\n        offsetTop,\n        offsetBottom\n      }) {\n        drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft,\n            right: offsetRight,\n            top: offsetTop,\n            bottom: offsetBottom\n          }\n        });\n      },\n\n      width,\n      height: width,\n      color: icon.color\n    });\n  }\n\n  return new InlineIcon_1.InlineIcon(icon);\n}\n\nexports.iconOf = iconOf;\n\nfunction of(content) {\n  if (content == null) {\n    return null;\n  }\n\n  if (content instanceof Inline_1.Inline) {\n    return content;\n  }\n\n  return new Inline_1.Inline(content);\n}\n\nexports.of = of;\n\nfunction buildInlines(icons, inline) {\n  const result = [];\n\n  if (icons) {\n    result.push(...icons.map(icon => iconOf(icon)).filter(i => i != null));\n  }\n\n  if (Array.isArray(inline) // && inline.filter(il => il instanceof Inline).length <- ?\n  ) {\n      result.push(...inline.map(il => of(il)).filter(i => i != null));\n    } else {\n    const il = of(inline);\n\n    if (il) {\n      result.push(il);\n    }\n  }\n\n  return result;\n}\n\nexports.buildInlines = buildInlines;\n\nfunction string(inline) {\n  return buildInlines(undefined, inline).join(\"\");\n}\n\nexports.string = string;\n\n/***/ }),\n\n/***/ \"./get-internal.js\":\n/*!*************************!*\\\n  !*** ./get-internal.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getInternal = void 0;\n\nfunction getInternal() {\n  console.warn(\"use internal!!\");\n  return {\n    color: __webpack_require__(/*! ./internal/color */ \"./internal/color.js\"),\n    sort: __webpack_require__(/*! ./internal/sort */ \"./internal/sort.js\"),\n    calc: __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"),\n    symbolManager: __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\"),\n    path2DManager: __webpack_require__(/*! ./internal/path2DManager */ \"./internal/path2DManager.js\"),\n    pasteUtils: __webpack_require__(/*! ./internal/paste-utils */ \"./internal/paste-utils.js\")\n  };\n}\n\nexports.getInternal = getInternal;\n\n/***/ }),\n\n/***/ \"./header/action.js\":\n/*!**************************!*\\\n  !*** ./header/action.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./action/BaseAction */ \"./header/action/BaseAction.js\");\n\nObject.defineProperty(exports, \"BaseAction\", {\n  enumerable: true,\n  get: function () {\n    return BaseAction_1.BaseAction;\n  }\n});\n\nconst CheckHeaderAction_1 = __webpack_require__(/*! ./action/CheckHeaderAction */ \"./header/action/CheckHeaderAction.js\");\n\nObject.defineProperty(exports, \"CheckHeaderAction\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeaderAction_1.CheckHeaderAction;\n  }\n});\n\nconst SortHeaderAction_1 = __webpack_require__(/*! ./action/SortHeaderAction */ \"./header/action/SortHeaderAction.js\");\n\nObject.defineProperty(exports, \"SortHeaderAction\", {\n  enumerable: true,\n  get: function () {\n    return SortHeaderAction_1.SortHeaderAction;\n  }\n});\n\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nexports.ACTIONS = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new ImmutableSortHeaderAction(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new ImmutableCheckHeaderAction()\n};\n\nfunction of(headerAction) {\n  if (!headerAction) {\n    return undefined;\n  } else if (typeof headerAction === \"string\") {\n    const key = headerAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return headerAction;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    if (typeof headerCell.sort === \"function\") {\n      const sortMethod = headerCell.sort; // 0.9.0 Backward compatibility\n\n      const sort = ({\n        order,\n        col,\n        grid\n      }) => sortMethod.call(headerCell, order, col, grid);\n\n      return new ImmutableSortHeaderAction({\n        sort\n      });\n    }\n\n    if (typeof headerCell.sort === \"string\") {\n      return new ImmutableSortHeaderAction({\n        sort: headerCell.sort\n      });\n    }\n\n    return exports.ACTIONS.SORT;\n  }\n\n  return of(headerCell.headerAction);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n\n/***/ \"./header/action/BaseAction.js\":\n/*!*************************************!*\\\n  !*** ./header/action/BaseAction.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseAction = void 0;\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = !!option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new BaseAction(this);\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  onChangeDisabledInternal() {// impl\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n\n/***/ \"./header/action/CheckHeaderAction.js\":\n/*!********************************************!*\\\n  !*** ./header/action/CheckHeaderAction.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeaderAction = void 0;\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./header/action/actionBind.js\");\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./header/action/BaseAction.js\");\n\nconst animate_1 = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\n  clone() {\n    return new CheckHeaderAction(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = getState(grid);\n\n    const action = ({\n      col,\n      row\n    }) => {\n      const range = grid.getCellRange(col, row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if (this.disabled || state.block[cellKey]) {\n        return;\n      }\n\n      const checked = grid.getHeaderValue(range.start.col, range.start.row);\n      grid.setHeaderValue(range.start.col, range.start.row, !checked);\n\n      const onChange = () => {\n        // checkbox animation\n        (0, animate_1.animate)(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      onChange();\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\n      action\n    })];\n  }\n\n}\n\nexports.CheckHeaderAction = CheckHeaderAction;\n\n/***/ }),\n\n/***/ \"./header/action/SortHeaderAction.js\":\n/*!*******************************************!*\\\n  !*** ./header/action/SortHeaderAction.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeaderAction = void 0;\n\nconst BaseAction_1 = __webpack_require__(/*! ./BaseAction */ \"./header/action/BaseAction.js\");\n\nconst actionBind_1 = __webpack_require__(/*! ./actionBind */ \"./header/action/actionBind.js\");\n\nclass SortHeaderAction extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    var _a;\n\n    super(option);\n    this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\n  }\n\n  get sort() {\n    return this._sort;\n  }\n\n  set sort(sort) {\n    this._sort = sort;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new SortHeaderAction(this);\n  }\n\n  _executeSort(newState, grid) {\n    if (typeof this._sort === \"function\") {\n      this._sort({\n        order: newState.order || \"asc\",\n        col: newState.col,\n        row: newState.row,\n        grid\n      });\n    } else if (typeof this._sort === \"string\" && ( // v1.6.3 Backward compatibility\n    this._sort !== \"true\" || hasTrueField(grid))) {\n      const field = this._sort;\n      grid.dataSource.sort(field, newState.order || \"asc\");\n    } else {\n      const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\n      const field = grid.getField(newState.col, fieldRow);\n\n      if (field == null) {\n        return;\n      }\n\n      grid.dataSource.sort(field, newState.order || \"asc\");\n    }\n  }\n\n  bindGridEvent(grid, cellId) {\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    const action = cell => {\n      if (this.disabled) {\n        return;\n      }\n\n      const state = grid.sortState;\n      let newState;\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (isTarget(state.col, cell.row)) {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: state.order === \"asc\" ? \"desc\" : \"asc\"\n        };\n      } else {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: \"asc\"\n        };\n      }\n\n      grid.sortState = newState;\n\n      this._executeSort(newState, grid);\n\n      grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n    };\n\n    return [...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\n      action,\n      mouseOver: _e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        return true;\n      }\n    })];\n  }\n\n}\n\nexports.SortHeaderAction = SortHeaderAction;\n\nfunction hasTrueField(grid) {\n  if (grid.dataSource.length > 0) {\n    const record = grid.dataSource.get(0);\n    return record != null && \"true\" in record;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"./header/action/actionBind.js\":\n/*!*************************************!*\\\n  !*** ./header/action/actionBind.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  let inMouse;\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n    inMouse = true;\n  }), //MOUSEENTER'col-resize'move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (inMouse && !grid.getElement().style.cursor) {\n      grid.getElement().style.cursor = \"pointer\";\n    }\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n    inMouse = false;\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n\n/***/ \"./header/style.js\":\n/*!*************************!*\\\n  !*** ./header/style.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\nObject.defineProperty(exports, \"BaseStyle\", {\n  enumerable: true,\n  get: function () {\n    return BaseStyle_1.BaseStyle;\n  }\n});\n\nconst CheckHeaderStyle_1 = __webpack_require__(/*! ./style/CheckHeaderStyle */ \"./header/style/CheckHeaderStyle.js\");\n\nObject.defineProperty(exports, \"CheckHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeaderStyle_1.CheckHeaderStyle;\n  }\n});\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(/*! ./style/MultilineTextHeaderStyle */ \"./header/style/MultilineTextHeaderStyle.js\");\n\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n  }\n});\n\nconst SortHeaderStyle_1 = __webpack_require__(/*! ./style/SortHeaderStyle */ \"./header/style/SortHeaderStyle.js\");\n\nObject.defineProperty(exports, \"SortHeaderStyle\", {\n  enumerable: true,\n  get: function () {\n    return SortHeaderStyle_1.SortHeaderStyle;\n  }\n});\n\nconst Style_1 = __webpack_require__(/*! ./style/Style */ \"./header/style/Style.js\");\n\nObject.defineProperty(exports, \"Style\", {\n  enumerable: true,\n  get: function () {\n    return Style_1.Style;\n  }\n});\n\nfunction of(headerStyle, StyleClass) {\n  if (headerStyle) {\n    if (headerStyle instanceof Style_1.Style) {\n      return headerStyle;\n    } else if (typeof headerStyle === \"function\") {\n      return of(headerStyle(), StyleClass);\n    }\n\n    return new StyleClass(headerStyle);\n  } else {\n    return StyleClass.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n\n/***/ \"./header/style/BaseStyle.js\":\n/*!***********************************!*\\\n  !*** ./header/style/BaseStyle.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseStyle = void 0;\n\nconst EventTarget_1 = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\nconst EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  constructor({\n    bgColor\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/CheckHeaderStyle.js\":\n/*!******************************************!*\\\n  !*** ./header/style/CheckHeaderStyle.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeaderStyle = void 0;\n\nconst StdTextBaseStyle_1 = __webpack_require__(/*! ./StdTextBaseStyle */ \"./header/style/StdTextBaseStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nlet defaultStyle;\n\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super((0, utils_1.defaults)(style, {\n      textAlign: \"center\"\n    }));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckHeaderStyle(this);\n  }\n\n}\n\nexports.CheckHeaderStyle = CheckHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/MultilineTextHeaderStyle.js\":\n/*!**************************************************!*\\\n  !*** ./header/style/MultilineTextHeaderStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextHeaderStyle = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n  }\n\n  clone() {\n    return new MultilineTextHeaderStyle(this);\n  }\n\n}\n\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/SortHeaderStyle.js\":\n/*!*****************************************!*\\\n  !*** ./header/style/SortHeaderStyle.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeaderStyle = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new SortHeaderStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._sortArrowColor = style.sortArrowColor;\n    this._multiline = style.multiline;\n  }\n\n  get sortArrowColor() {\n    return this._sortArrowColor;\n  }\n\n  set sortArrowColor(sortArrowColor) {\n    this._sortArrowColor = sortArrowColor;\n    this.doChangeStyle();\n  }\n\n  get multiline() {\n    return !!this._multiline;\n  }\n\n  set multiline(multiline) {\n    this._multiline = multiline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new SortHeaderStyle(this);\n  }\n\n}\n\nexports.SortHeaderStyle = SortHeaderStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdBaseStyle.js\":\n/*!**************************************!*\\\n  !*** ./header/style/StdBaseStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdBaseStyle = void 0;\n\nconst BaseStyle_1 = __webpack_require__(/*! ./BaseStyle */ \"./header/style/BaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdMultilineTextBaseStyle.js\":\n/*!***************************************************!*\\\n  !*** ./header/style/StdMultilineTextBaseStyle.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdMultilineTextBaseStyle = void 0;\n\nconst StdTextBaseStyle_1 = __webpack_require__(/*! ./StdTextBaseStyle */ \"./header/style/StdTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdMultilineTextBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  clone() {\n    return new StdMultilineTextBaseStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/StdTextBaseStyle.js\":\n/*!******************************************!*\\\n  !*** ./header/style/StdTextBaseStyle.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StdTextBaseStyle = void 0;\n\nconst StdBaseStyle_1 = __webpack_require__(/*! ./StdBaseStyle */ \"./header/style/StdBaseStyle.js\");\n\nlet defaultStyle;\n\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdTextBaseStyle();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._padding = style.padding;\n    this._textOverflow = style.textOverflow || \"ellipsis\";\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get padding() {\n    return this._padding;\n  }\n\n  set padding(padding) {\n    this._padding = padding;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdTextBaseStyle(this);\n  }\n\n}\n\nexports.StdTextBaseStyle = StdTextBaseStyle;\n\n/***/ }),\n\n/***/ \"./header/style/Style.js\":\n/*!*******************************!*\\\n  !*** ./header/style/Style.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Style = void 0;\n\nconst StdMultilineTextBaseStyle_1 = __webpack_require__(/*! ./StdMultilineTextBaseStyle */ \"./header/style/StdMultilineTextBaseStyle.js\");\n\nlet defaultStyle;\n\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  constructor(style = {}) {\n    super(style);\n    this._multiline = style.multiline;\n  }\n\n  get multiline() {\n    return !!this._multiline;\n  }\n\n  set multiline(multiline) {\n    this._multiline = multiline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n\n/***/ \"./header/type.js\":\n/*!************************!*\\\n  !*** ./header/type.js ***!\n  \\************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\n\nconst BaseHeader_1 = __webpack_require__(/*! ./type/BaseHeader */ \"./header/type/BaseHeader.js\");\n\nObject.defineProperty(exports, \"BaseHeader\", {\n  enumerable: true,\n  get: function () {\n    return BaseHeader_1.BaseHeader;\n  }\n});\n\nconst CheckHeader_1 = __webpack_require__(/*! ./type/CheckHeader */ \"./header/type/CheckHeader.js\");\n\nObject.defineProperty(exports, \"CheckHeader\", {\n  enumerable: true,\n  get: function () {\n    return CheckHeader_1.CheckHeader;\n  }\n});\n\nconst Header_1 = __webpack_require__(/*! ./type/Header */ \"./header/type/Header.js\");\n\nObject.defineProperty(exports, \"Header\", {\n  enumerable: true,\n  get: function () {\n    return Header_1.Header;\n  }\n});\n\nconst MultilineTextHeader_1 = __webpack_require__(/*! ./type/MultilineTextHeader */ \"./header/type/MultilineTextHeader.js\");\n\nObject.defineProperty(exports, \"MultilineTextHeader\", {\n  enumerable: true,\n  get: function () {\n    return MultilineTextHeader_1.MultilineTextHeader;\n  }\n});\n\nconst SortHeader_1 = __webpack_require__(/*! ./type/SortHeader */ \"./header/type/SortHeader.js\");\n\nObject.defineProperty(exports, \"SortHeader\", {\n  enumerable: true,\n  get: function () {\n    return SortHeader_1.SortHeader;\n  }\n});\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Header_1.Header(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new SortHeader_1.SortHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckHeader_1.CheckHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader()\n};\n\nfunction of(headerType) {\n  if (!headerType) {\n    return TYPES.DEFAULT;\n  } else if (typeof headerType === \"string\") {\n    const key = headerType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return headerType;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    return TYPES.SORT;\n  }\n\n  return of(headerCell.headerType);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n\n/***/ \"./header/type/BaseHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/BaseHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseHeader = void 0;\n\nconst styleContents = __importStar(__webpack_require__(/*! ../style */ \"./header/style.js\"));\n\nconst BaseStyle_1 = __webpack_require__(/*! ../style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\nclass BaseHeader {\n  constructor(_options = {}) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    const {\n      style,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase(); //\n\n    this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\n  }\n\n  convertInternal(value) {\n    if (typeof value === \"function\") {\n      value = value();\n    } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n    return value != null ? `${value}` : \"\";\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  getCopyCellValue(value, _grid, _cell) {\n    if (typeof value === \"function\") {\n      value = value();\n    }\n\n    return value != null ? value : \"\";\n  }\n\n}\n\nexports.BaseHeader = BaseHeader;\n\n/***/ }),\n\n/***/ \"./header/type/CheckHeader.js\":\n/*!************************************!*\\\n  !*** ./header/type/CheckHeader.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CheckHeader = void 0;\n\nconst inlineUtils = __importStar(__webpack_require__(/*! ../../element/inlines */ \"./element/inlines.js\"));\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst CheckHeaderStyle_1 = __webpack_require__(/*! ../style/CheckHeaderStyle */ \"./header/style/CheckHeaderStyle.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return CheckHeaderStyle_1.CheckHeaderStyle;\n  }\n\n  clone() {\n    return new CheckHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor,\n      padding,\n      color,\n      font,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const {\n      elapsed: {\n        [cellKey]: elapsed\n      }\n    } = getState(grid);\n    const checked = grid.getHeaderValue(range.start.col, range.start.row);\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (elapsed != null) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      let contents = [inlineCheck];\n      contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\n      helper.text(contents, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        textOverflow\n      });\n    });\n  }\n\n}\n\nexports.CheckHeader = CheckHeader;\n\n/***/ }),\n\n/***/ \"./header/type/Header.js\":\n/*!*******************************!*\\\n  !*** ./header/type/Header.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Header = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst Style_1 = __webpack_require__(/*! ../style/Style */ \"./header/style/Style.js\");\n\nclass Header extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      textOverflow,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      multiline\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      if (multiline) {\n        const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n        helper.multilineText(multilines, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          lineHeight,\n          autoWrapText,\n          lineClamp,\n          textOverflow,\n          icons\n        });\n      } else {\n        helper.text(textValue, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          textOverflow,\n          icons\n        });\n      }\n    });\n  }\n\n}\n\nexports.Header = Header;\n\n/***/ }),\n\n/***/ \"./header/type/MultilineTextHeader.js\":\n/*!********************************************!*\\\n  !*** ./header/type/MultilineTextHeader.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultilineTextHeader = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(/*! ../style/MultilineTextHeaderStyle */ \"./header/style/MultilineTextHeaderStyle.js\");\n\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n  }\n\n  clone() {\n    return new MultilineTextHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.multilineText(multilines, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.MultilineTextHeader = MultilineTextHeader;\n\n/***/ }),\n\n/***/ \"./header/type/SortHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/SortHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortHeader = void 0;\n\nconst utils = __importStar(__webpack_require__(/*! ../../columns/type/columnUtils */ \"./columns/type/columnUtils.js\"));\n\nconst BaseHeader_1 = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\nconst SortHeaderStyle_1 = __webpack_require__(/*! ../style/SortHeaderStyle */ \"./header/style/SortHeaderStyle.js\");\n\nconst utils_1 = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst canvases_1 = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\nclass SortHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return SortHeaderStyle_1.SortHeaderStyle;\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline = \"middle\",\n      color,\n      bgColor,\n      font,\n      padding,\n      textOverflow,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      sortArrowColor,\n      multiline\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const textValue = value != null ? String(value) : \"\";\n    helper.testFontLoad(font, textValue, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      const state = grid.sortState;\n      let order = undefined;\n      const {\n        col,\n        row\n      } = context;\n      const range = grid.getCellRange(col, row);\n\n      if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\n        ({\n          order\n        } = state);\n      }\n\n      const ctx = context.getContext();\n      const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\n      const trailingIcon = {\n        name: order != null ? order === \"asc\" ? \"arrow_downward\" : \"arrow_upward\" : undefined,\n        width: arrowSize,\n        color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\"\n      };\n\n      if (multiline) {\n        const multilines = textValue.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n        helper.multilineText(multilines, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          lineHeight,\n          autoWrapText,\n          lineClamp,\n          textOverflow,\n          icons,\n          trailingIcon\n        });\n      } else {\n        helper.text(textValue, context, {\n          textAlign,\n          textBaseline,\n          color,\n          font,\n          padding,\n          textOverflow,\n          icons,\n          trailingIcon\n        });\n      }\n    });\n  }\n\n}\n\nexports.SortHeader = SortHeader;\n\n/***/ }),\n\n/***/ \"./headers.js\":\n/*!********************!*\\\n  !*** ./headers.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.style = exports.type = exports.action = void 0;\n\nconst action = __importStar(__webpack_require__(/*! ./header/action */ \"./header/action.js\"));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(/*! ./header/style */ \"./header/style.js\"));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(/*! ./header/type */ \"./header/type.js\"));\n\nexports.type = type;\n\n/***/ }),\n\n/***/ \"./icons.js\":\n/*!******************!*\\\n  !*** ./icons.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint-disable camelcase*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst icons_1 = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nconst builtins = {\n  get arrow_upward() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\n    return {\n      d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get arrow_downward() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\n    return {\n      d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get edit() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\n    return {\n      d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get add() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\n    return {\n      d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\n      width: 48,\n      height: 48\n    };\n  },\n\n  get star() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\n    return {\n      d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\n      width: 24,\n      height: 24\n    };\n  },\n\n  get star_border() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\n    return {\n      d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\n      width: 24,\n      height: 24\n    };\n  },\n\n  get star_half() {\n    // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\n    return {\n      d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\n      width: 24,\n      height: 24\n    };\n  }\n\n};\n\nfunction get() {\n  return (0, utils_1.extend)(builtins, icons_1.icons);\n}\n\nexports.get = get;\n\n/***/ }),\n\n/***/ \"./internal/EventHandler.js\":\n/*!**********************************!*\\\n  !*** ./internal/EventHandler.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventHandler = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n/** @private */\n\n\nlet nextId = 1;\n\nclass EventHandler {\n  constructor() {\n    this._listeners = {};\n  }\n\n  on(target, type, listener, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ...options) {\n    if (target.addEventListener) {\n      target.addEventListener(type, listener, ...options);\n    }\n\n    const obj = {\n      target,\n      type,\n      listener,\n      options\n    };\n    const id = nextId++;\n    this._listeners[id] = obj;\n    return id;\n  }\n\n  once(target, type, listener, ...options) {\n    const id = this.on(target, type, (...args) => {\n      this.off(id);\n      listener(...args);\n    }, ...options);\n    return id;\n  }\n\n  tryWithOffEvents(target, type, call) {\n    const list = [];\n\n    try {\n      (0, utils_1.each)(this._listeners, obj => {\n        if (obj.target === target && obj.type === type) {\n          if (obj.target.removeEventListener) {\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n          }\n\n          list.push(obj);\n        }\n      });\n      call();\n    } finally {\n      list.forEach(obj => {\n        if (obj.target.addEventListener) {\n          obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n        }\n      });\n    }\n  }\n\n  off(id) {\n    if (id == null) {\n      return;\n    }\n\n    const obj = this._listeners[id];\n\n    if (!obj) {\n      return;\n    }\n\n    delete this._listeners[id];\n\n    if (obj.target.removeEventListener) {\n      obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fire(target, type, ...args) {\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        obj.listener.call(obj.target, ...args);\n      }\n    });\n  }\n\n  hasListener(target, type) {\n    let result = false;\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        result = true;\n      }\n    });\n    return result;\n  }\n\n  clear() {\n    (0, utils_1.each)(this._listeners, obj => {\n      if (obj.target.removeEventListener) {\n        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n      }\n    });\n    this._listeners = {};\n  }\n\n  dispose() {\n    this.clear(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._listeners = null;\n  }\n\n}\n\nexports.EventHandler = EventHandler;\n\n/***/ }),\n\n/***/ \"./internal/LRUCache.js\":\n/*!******************************!*\\\n  !*** ./internal/LRUCache.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LRUCache = void 0;\n\nclass LRUCache {\n  constructor(cacheSize) {\n    this._list = [];\n    this._map = {};\n    this._cacheSize = cacheSize || 50;\n  }\n\n  get(key) {\n    const val = this._map[key];\n\n    if (val) {\n      const list = this._list;\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n      list.push(key);\n    }\n\n    return val;\n  }\n\n  put(key, value) {\n    const list = this._list;\n    const map = this._map;\n\n    if (map[key]) {\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n    }\n\n    map[key] = value;\n    list.push(key);\n\n    if (list.length > this._cacheSize) {\n      const remKey = list.shift() || \"\";\n      delete map[remKey];\n    }\n  }\n\n}\n\nexports.LRUCache = LRUCache;\n\n/***/ }),\n\n/***/ \"./internal/NumberMap.js\":\n/*!*******************************!*\\\n  !*** ./internal/NumberMap.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NumberMap = void 0;\n\nconst indexFirst = (arr, elm) => {\n  let low = 0;\n  let high = arr.length - 1;\n\n  while (low <= high) {\n    const i = Math.floor((low + high) / 2);\n\n    if (arr[i] === elm) {\n      return i;\n    } else if (arr[i] > elm) {\n      high = i - 1;\n    } else {\n      low = i + 1;\n    }\n  }\n\n  return high < 0 ? 0 : high;\n};\n\nclass NumberMap {\n  constructor() {\n    this._keys = [];\n    this._vals = {};\n    this._sorted = false;\n  }\n\n  put(key, value) {\n    if (!(key in this._vals)) {\n      this._keys.push(key);\n\n      this._sorted = false;\n    }\n\n    this._vals[key] = value;\n  }\n\n  remove(key) {\n    delete this._vals[key];\n\n    const index = this._keys.indexOf(key);\n\n    if (index < 0) {\n      return;\n    }\n\n    this._keys.splice(index, 1);\n\n    this._sorted = false;\n  }\n\n  get(key) {\n    return this._vals[key];\n  }\n\n  has(key) {\n    return this._vals[key] != null;\n  }\n\n  each(keyFrom, keyTo, fn) {\n    const {\n      _keys: keys\n    } = this;\n    const {\n      length\n    } = keys;\n\n    if (!this._sorted) {\n      keys.sort((a, b) => {\n        if (a < b) {\n          return -1;\n        }\n\n        if (a > b) {\n          return 1;\n        }\n\n        return 0;\n      });\n      this._sorted = true;\n    }\n\n    for (let i = indexFirst(keys, keyFrom); i < length; i++) {\n      const key = keys[i];\n\n      if (keyFrom <= key && key <= keyTo) {\n        fn(this.get(key), key);\n      } else if (keyTo < key) {\n        return;\n      }\n    }\n  }\n\n}\n\nexports.NumberMap = NumberMap;\n\n/***/ }),\n\n/***/ \"./internal/Rect.js\":\n/*!**************************!*\\\n  !*** ./internal/Rect.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Rect = void 0;\n\nclass Rect {\n  constructor(left, top, width, height) {\n    this._left = left;\n    this._top = top;\n    this._width = width;\n    this._height = height;\n  }\n\n  static bounds(left, top, right, bottom) {\n    return new Rect(left, top, right - left, bottom - top);\n  }\n\n  static max(rect1, rect2) {\n    return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n  }\n\n  get left() {\n    return this._left;\n  }\n\n  set left(left) {\n    const {\n      right\n    } = this;\n    this._left = left;\n    this.right = right;\n  }\n\n  get top() {\n    return this._top;\n  }\n\n  set top(top) {\n    const {\n      bottom\n    } = this;\n    this._top = top;\n    this.bottom = bottom;\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  set width(width) {\n    this._width = width;\n    this._right = undefined;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  set height(height) {\n    this._height = height;\n    this._bottom = undefined;\n  }\n\n  get right() {\n    return this._right !== undefined ? this._right : this._right = this.left + this.width;\n  }\n\n  set right(right) {\n    this._right = right;\n    this.width = right - this.left;\n  }\n\n  get bottom() {\n    return this._bottom !== undefined ? this._bottom : this._bottom = this.top + this.height;\n  }\n\n  set bottom(bottom) {\n    this._bottom = bottom;\n    this.height = bottom - this.top;\n  }\n\n  offsetLeft(offset) {\n    this._left += offset;\n    this._right = undefined;\n  }\n\n  offsetTop(offset) {\n    this._top += offset;\n    this._bottom = undefined;\n  }\n\n  copy() {\n    return new Rect(this.left, this.top, this.width, this.height);\n  }\n\n  intersection(rect) {\n    const x0 = Math.max(this.left, rect.left);\n    const x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\n    if (x0 <= x1) {\n      const y0 = Math.max(this.top, rect.top);\n      const y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\n      if (y0 <= y1) {\n        return Rect.bounds(x0, y0, x1, y1);\n      }\n    }\n\n    return null;\n  }\n\n  contains(another) {\n    return this.left <= another.left && this.left + this.width >= another.left + another.width && this.top <= another.top && this.top + this.height >= another.top + another.height;\n  }\n\n  inPoint(x, y) {\n    return this.left <= x && this.left + this.width >= x && this.top <= y && this.top + this.height >= y;\n  }\n\n}\n\nexports.Rect = Rect;\n\n/***/ }),\n\n/***/ \"./internal/Scrollable.js\":\n/*!********************************!*\\\n  !*** ./internal/Scrollable.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scrollable = void 0;\n\nconst style = __importStar(__webpack_require__(/*! ./style */ \"./internal/style.js\"));\n\nconst EventHandler_1 = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\n\nclass Scrollable {\n  constructor() {\n    this._p = 1;\n    this._handler = new EventHandler_1.EventHandler();\n    this._scrollable = document.createElement(\"div\");\n\n    this._scrollable.classList.add(\"grid-scrollable\");\n\n    this._height = 0;\n    this._width = 0;\n    this._endPointElement = document.createElement(\"div\");\n\n    this._endPointElement.classList.add(\"grid-scroll-end-point\");\n\n    this._update();\n\n    this._scrollable.appendChild(this._endPointElement); // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n    // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n    // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n    // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n    // this.scrollTop += delta < 0 ? point : -point;\n    // });\n\n  }\n\n  calcTop(top) {\n    const relativeTop = top - this.scrollTop;\n    return this._scrollable.scrollTop + relativeTop;\n  }\n\n  getElement() {\n    return this._scrollable;\n  }\n\n  setScrollSize(width, height) {\n    this._width = width;\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollWidth() {\n    return this._width;\n  }\n\n  set scrollWidth(width) {\n    this._width = width;\n\n    this._update();\n  }\n\n  get scrollHeight() {\n    return this._height;\n  }\n\n  set scrollHeight(height) {\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollLeft() {\n    return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\n  }\n\n  set scrollLeft(scrollLeft) {\n    this._scrollable.scrollLeft = scrollLeft;\n  }\n\n  get scrollTop() {\n    return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\n  }\n\n  set scrollTop(scrollTop) {\n    this._scrollable.scrollTop = scrollTop * this._p;\n  }\n\n  onScroll(fn) {\n    this._handler.on(this._scrollable, \"scroll\", fn);\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n  _update() {\n    let domHeight;\n    const {\n      offsetHeight,\n      offsetWidth\n    } = this._scrollable;\n\n    if (this._height > MAX_SCROLL) {\n      const sbSize = style.getScrollBarSize();\n      const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n      const rScrollRange = this._height - offsetHeight + sbSize;\n      this._p = vScrollRange / rScrollRange;\n      domHeight = MAX_SCROLL;\n    } else {\n      this._p = 1;\n      domHeight = this._height;\n    }\n\n    this._endPointElement.style.top = `${domHeight.toFixed()}px`;\n    this._endPointElement.style.left = `${this._width.toFixed()}px`; // Sets the maximum value to the scroll position\n    // if the current scroll position exceeds the maximum value.\n\n    if (this.scrollTop > this.scrollHeight - offsetHeight) {\n      this.scrollTop = this.scrollHeight - offsetHeight;\n    }\n\n    if (this.scrollLeft > this.scrollWidth - offsetWidth) {\n      this.scrollLeft = this.scrollWidth - offsetWidth;\n    }\n  }\n\n}\n\nexports.Scrollable = Scrollable;\n\n/***/ }),\n\n/***/ \"./internal/animate.js\":\n/*!*****************************!*\\\n  !*** ./internal/animate.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animate = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction cubicBezier(x2, y2, x3, y3) {\n  let step;\n  const err = 0.0001;\n  x2 *= 3;\n  y2 *= 3;\n  x3 *= 3;\n  y3 *= 3;\n  return function (t) {\n    let p, a, b, c, d, x, s;\n\n    if (t < 0 || 1 < t) {\n      throw new Error(`${t}`);\n    }\n\n    p = step || t;\n\n    do {\n      a = 1 - p;\n      b = a * a;\n      c = p * p;\n      d = c * p;\n      x = x2 * b * p + x3 * a * c + d;\n      s = t - x;\n      p += s * 0.5;\n    } while (err < Math.abs(s));\n\n    step = p;\n    return y2 * b * p + y3 * a * c + d;\n  };\n}\n\nconst EASINGS = {\n  linear(p) {\n    return p;\n  },\n\n  easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\n  easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\n  easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0)\n};\nconst raf = utils_1.isNode ? () => {} : window.requestAnimationFrame || ( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfn => setTimeout(fn, 1));\n\nfunction now() {\n  return Date.now();\n}\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\n\n\nfunction animate(duration, step, easing) {\n  const startedAt = now();\n  const easingFn = easing == null ? EASINGS.easeInOut : typeof easing === \"string\" ? EASINGS[easing] : easing;\n  let canceledFlg = false;\n\n  const createAnim = (resolve, reject) => {\n    const anim = () => {\n      const point = now() - startedAt;\n\n      if (canceledFlg) {\n        //cancel\n        if (reject) {\n          reject();\n        }\n      } else if (point >= duration) {\n        //end\n        step(1);\n\n        if (resolve) {\n          resolve();\n        }\n      } else {\n        step(easingFn(point / duration));\n        raf(anim);\n      }\n    };\n\n    return anim;\n  };\n\n  const cancel = () => {\n    canceledFlg = true;\n  };\n\n  if (typeof Promise !== \"undefined\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = new Promise((resolve, reject) => {\n      const anim = createAnim(resolve, reject);\n      step(0);\n      anim();\n    });\n    result.cancel = cancel;\n    return result;\n  } else {\n    const anim = createAnim(() => {}, () => {});\n    step(0);\n    anim();\n    return {\n      cancel\n    };\n  }\n}\n\nexports.animate = animate;\n\n/***/ }),\n\n/***/ \"./internal/calc.js\":\n/*!**************************!*\\\n  !*** ./internal/calc.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toPx = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst TYPE_PAREN = 0;\nconst TYPE_UNIT = 1;\nconst TYPE_OPERATOR = 2;\nconst TYPE_NUMBER = 3;\nconst NODE_TYPE_UNIT = 10;\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\nconst NODE_TYPE_NUMBER = 12;\nconst TABULATION = 0x09;\nconst CARRIAGE_RETURN = 0x0d;\nconst LINE_FEED = 0x0a;\nconst FORM_FEED = 0x0c;\nconst SPACE = 0x20;\nconst PERCENT = 0x25;\nconst FULL_STOP = 0x2e;\nconst DIGIT_0 = 0x30;\nconst DIGIT_9 = 0x39;\nconst LATIN_CAPITAL_A = 0x41;\nconst LATIN_CAPITAL_Z = 0x5a;\nconst LATIN_SMALL_A = 0x61;\nconst LATIN_SMALL_Z = 0x7a;\n\nfunction isUpperLetter(cp) {\n  return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\n}\n\nfunction isLowerLetter(cp) {\n  return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\n}\n\nfunction isLetter(cp) {\n  return isLowerLetter(cp) || isUpperLetter(cp);\n}\n\nfunction isWhitespace(cp) {\n  return cp === TABULATION || cp === LINE_FEED || cp === FORM_FEED || cp === CARRIAGE_RETURN || cp === SPACE;\n}\n\nfunction isDigit(cp) {\n  return cp >= DIGIT_0 && cp <= DIGIT_9;\n}\n\nfunction isDot(cp) {\n  return cp === FULL_STOP;\n}\n\nfunction isUnit(cp) {\n  return isLetter(cp) || cp === PERCENT;\n}\n\nfunction createError(calc) {\n  return new Error(`calc parse error: ${calc}`);\n}\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\n\n\nfunction tokenize(calc) {\n  const exp = calc.replace(/calc\\(/g, \"(\").trim();\n  const tokens = [];\n  const len = exp.length;\n\n  for (let index = 0; index < len; index++) {\n    const c = exp[index];\n    const cp = c.charCodeAt(0);\n\n    if (c === \"(\" || c === \")\") {\n      tokens.push({\n        value: c,\n        type: TYPE_PAREN\n      });\n    } else if (c === \"*\" || c === \"/\") {\n      tokens.push({\n        value: c,\n        type: TYPE_OPERATOR\n      });\n    } else if (c === \"+\" || c === \"-\") {\n      index = parseSign(c, index + 1) - 1;\n    } else if (isDigit(cp) || isDot(cp)) {\n      index = parseNum(c, index + 1) - 1;\n    } else if (isWhitespace(cp)) {// skip\n    } else {\n      throw createError(calc);\n    }\n  }\n\n  function parseSign(sign, start) {\n    if (start < len) {\n      const c = exp[start];\n      const cp = c.charCodeAt(0);\n\n      if (isDigit(cp) || isDot(cp)) {\n        return parseNum(sign + c, start + 1);\n      }\n    }\n\n    tokens.push({\n      value: sign,\n      type: TYPE_OPERATOR\n    });\n    return start;\n  }\n\n  function parseNum(num, start) {\n    let index = start;\n\n    for (; index < len; index++) {\n      const c = exp[index];\n      const cp = c.charCodeAt(0);\n\n      if (isDigit(cp)) {\n        num += c;\n      } else if (c === \".\") {\n        if (num.indexOf(\".\") >= 0) {\n          throw createError(calc);\n        }\n\n        num += c;\n      } else if (isUnit(cp)) {\n        return parseUnit(num, c, index + 1);\n      } else {\n        break;\n      }\n    }\n\n    if (num === \".\") {\n      throw createError(calc);\n    }\n\n    tokens.push({\n      value: parseFloat(num),\n      type: TYPE_NUMBER\n    });\n    return index;\n  }\n\n  function parseUnit(num, unit, start) {\n    let index = start;\n\n    for (; index < len; index++) {\n      const c = exp[index];\n      const cp = c.charCodeAt(0);\n\n      if (isUnit(cp)) {\n        unit += c;\n      } else {\n        break;\n      }\n    }\n\n    tokens.push({\n      value: parseFloat(num),\n      unit,\n      type: TYPE_UNIT\n    });\n    return index;\n  }\n\n  return tokens;\n}\n\nconst PRECEDENCE = {\n  \"*\": 3,\n  \"/\": 3,\n  \"+\": 2,\n  \"-\": 2\n};\n\nfunction lex(tokens, calc) {\n  function buildBinaryExpNode(stack) {\n    const right = stack.pop();\n    const op = stack.pop();\n    const left = stack.pop();\n\n    if (!left || !left.nodeType || !op || op.type !== TYPE_OPERATOR || !right || !right.nodeType) {\n      throw createError(calc);\n    }\n\n    return {\n      nodeType: NODE_TYPE_BINARY_EXPRESSION,\n      left,\n      op,\n      right\n    };\n  }\n\n  const stack = [];\n\n  while (tokens.length) {\n    const token = tokens.shift();\n\n    if (token.type === TYPE_PAREN && token.value === \"(\") {\n      let deep = 0;\n      const closeIndex = utils_1.array.findIndex(tokens, t => {\n        if (t.type === TYPE_PAREN && t.value === \"(\") {\n          deep++;\n        } else if (t.type === TYPE_PAREN && t.value === \")\") {\n          if (!deep) {\n            return true;\n          }\n\n          deep--;\n        }\n\n        return false;\n      });\n\n      if (closeIndex === -1) {\n        throw createError(calc);\n      }\n\n      stack.push(lex(tokens.splice(0, closeIndex), calc));\n      tokens.shift();\n    } else if (token.type === TYPE_OPERATOR) {\n      if (stack.length >= 3) {\n        const beforeOp = stack[stack.length - 2].value;\n\n        if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\n          stack.push(buildBinaryExpNode(stack));\n        }\n      }\n\n      stack.push(token);\n    } else if (token.type === TYPE_UNIT) {\n      const {\n        value: num,\n        unit\n      } = token;\n      stack.push({\n        nodeType: NODE_TYPE_UNIT,\n        value: num,\n        unit\n      });\n    } else if (token.type === TYPE_NUMBER) {\n      stack.push({\n        nodeType: NODE_TYPE_NUMBER,\n        value: token.value\n      });\n    }\n  }\n\n  while (stack.length > 1) {\n    stack.push(buildBinaryExpNode(stack));\n  }\n\n  return stack[0];\n}\n\nfunction parse(calcStr) {\n  const tokens = tokenize(calcStr);\n  return lex(tokens, calcStr);\n}\n\nfunction calcNode(node, context) {\n  if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\n    const left = calcNode(node.left, context);\n    const right = calcNode(node.right, context);\n\n    switch (node.op.value) {\n      case \"+\":\n        return left + right;\n\n      case \"-\":\n        return left - right;\n\n      case \"*\":\n        return left * right;\n\n      case \"/\":\n        return left / right;\n\n      default:\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        throw new Error(`calc error. unknown operator: ${node.op.value}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_UNIT) {\n    switch (node.unit) {\n      case \"%\":\n        return node.value * context.full / 100;\n\n      case \"em\":\n        return node.value * context.em;\n\n      case \"px\":\n        return node.value;\n\n      default:\n        throw new Error(`calc error. unknown unit: ${node.unit}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_NUMBER) {\n    return node.value;\n  }\n\n  throw new Error(\"calc error.\");\n}\n\nfunction toPxInternal(value, context) {\n  const ast = parse(value);\n  return calcNode(ast, context);\n}\n\nfunction toPx(value, context) {\n  if (typeof value === \"string\") {\n    return toPxInternal(value.trim(), context);\n  }\n\n  return value - 0;\n}\n\nexports.toPx = toPx;\n\n/***/ }),\n\n/***/ \"./internal/canvases.js\":\n/*!******************************!*\\\n  !*** ./internal/canvases.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\nconst fontSizeCache = {};\n\nfunction getFontSize(ctx, font) {\n  const fontName = font || ctx.font;\n\n  if (fontSizeCache[fontName]) {\n    return fontSizeCache[fontName];\n  }\n\n  const bk = ctx.font;\n\n  try {\n    ctx.font = fontName;\n    const em = ctx.measureText(\"\").width;\n    return fontSizeCache[fontName] = {\n      width: em,\n      height: em\n    };\n  } finally {\n    ctx.font = bk;\n  }\n}\n\nexports.getFontSize = getFontSize;\n\nfunction calcBasePosition(ctx, rect, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  return calcStartPosition(ctx, rect, 0, 0, {\n    offset,\n    padding: {\n      left: paddingLeft,\n      right: paddingRight,\n      top: paddingTop,\n      bottom: paddingBottom\n    }\n  });\n}\n\nexports.calcBasePosition = calcBasePosition;\n\nfunction calcStartPosition(ctx, rect, width, height, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  const textAlign = ctx.textAlign || \"left\";\n  const textBaseline = ctx.textBaseline || \"middle\";\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  let x = rect.left + offset + paddingLeft;\n\n  if (textAlign === \"right\" || textAlign === \"end\") {\n    x = rect.right - width - offset - paddingRight;\n  } else if (textAlign === \"center\") {\n    x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n  }\n\n  let y = rect.top + offset + paddingTop;\n\n  if (textBaseline === \"bottom\" || textBaseline === \"alphabetic\" || textBaseline === \"ideographic\") {\n    y = rect.bottom - height - offset - paddingBottom;\n  } else if (textBaseline === \"middle\") {\n    y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\n  }\n\n  return {\n    x,\n    y\n  };\n}\n\nexports.calcStartPosition = calcStartPosition;\n\n/***/ }),\n\n/***/ \"./internal/color.js\":\n/*!***************************!*\\\n  !*** ./internal/color.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.colorToRGB = void 0;\nconst rgbMap = {};\n\nfunction styleColorToRGB(color) {\n  const dummy = document.createElement(\"div\");\n  const {\n    style\n  } = dummy;\n  style.color = color;\n  style.position = \"fixed\";\n  style.height = \"1px\";\n  style.width = \"1px\";\n  style.opacity = \"0\";\n  document.body.appendChild(dummy);\n  const {\n    color: styleColor\n  } = (document.defaultView || window).getComputedStyle(dummy, \"\");\n  document.body.removeChild(dummy);\n  return colorToRGB0(styleColor || \"\");\n}\n\nfunction hexToNum(hex) {\n  return parseInt(hex, 16);\n}\n\nfunction createRGB(r, g, b, a = 1) {\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\n\nfunction tripleHexToRGB({\n  1: r,\n  2: g,\n  3: b\n}) {\n  return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n}\n\nfunction sextupleHexToRGB({\n  1: r1,\n  2: r2,\n  3: g1,\n  4: g2,\n  5: b1,\n  6: b2\n}) {\n  return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n}\n\nfunction testRGB({\n  r,\n  g,\n  b,\n  a\n}) {\n  return 0 <= r && r <= 255 && 0 <= g && g <= 255 && 0 <= b && b <= 255 && 0 <= a && a <= 1;\n}\n\nfunction rateToByte(r) {\n  return Math.ceil(r * 255 / 100);\n}\n\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\nconst percentPattern = `${numberPattern}%`;\nconst maybePercentPattern = `${numberPattern}(%?)`;\n\nfunction buildRgbWithCommaRegExp(bytePattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbLv4RegExp(bytePattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\n  return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\n}\n\nfunction colorToRGB0(color) {\n  if (/^#[0-9a-f]{3}$/i.exec(color)) {\n    return tripleHexToRGB(color);\n  }\n\n  if (/^#[0-9a-f]{6}$/i.exec(color)) {\n    return sextupleHexToRGB(color);\n  }\n\n  let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) || buildRgbLv4RegExp(numberPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbWithCommaRegExp(percentPattern).exec(color) || buildRgbLv4RegExp(percentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) || buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5]\n    /* % */\n    ? 100 : 1));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) || buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5]\n    /* % */\n    ? 100 : 1));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  return null;\n}\n\nfunction colorToRGB(color) {\n  if (typeof color !== \"string\") {\n    return createRGB(0, 0, 0, 0);\n  }\n\n  color = color.toLowerCase().trim();\n\n  if (rgbMap[color]) {\n    return rgbMap[color];\n  }\n\n  return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n}\n\nexports.colorToRGB = colorToRGB;\n\n/***/ }),\n\n/***/ \"./internal/dom.js\":\n/*!*************************!*\\\n  !*** ./internal/dom.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\n\nfunction createElement(tagName, {\n  classList,\n  text,\n  html\n} = {}) {\n  const element = document.createElement(tagName);\n\n  if (classList) {\n    if (Array.isArray(classList)) {\n      element.classList.add(...classList);\n    } else {\n      element.classList.add(classList);\n    }\n  }\n\n  if (text) {\n    element.textContent = text;\n  } else if (html) {\n    element.innerHTML = html;\n  }\n\n  return element;\n}\n\nexports.createElement = createElement;\n\nfunction empty(dom) {\n  let c;\n\n  while (c = dom.firstChild) {\n    dom.removeChild(c);\n  }\n}\n\nexports.empty = empty;\n\nfunction isNode(arg) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return !!(arg.nodeType && arg.nodeName);\n}\n\nfunction toNode(arg) {\n  if (isNode(arg)) {\n    return arg;\n  }\n\n  const dom = createElement(\"div\", {\n    html: arg\n  });\n  return Array.prototype.slice.call(dom.childNodes);\n}\n\nfunction toNodeList(arg) {\n  if (Array.isArray(arg)) {\n    const result = [];\n    arg.forEach(e => {\n      result.push(...toNodeList(e));\n    });\n    return result;\n  }\n\n  const node = toNode(arg);\n  return Array.isArray(node) ? node : [node];\n}\n\nexports.toNodeList = toNodeList;\n\nfunction appendHtml(dom, inner) {\n  toNodeList(inner).forEach(node => {\n    dom.appendChild(node);\n  });\n}\n\nexports.appendHtml = appendHtml;\n\nfunction disableFocus(el) {\n  el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\n  el.tabIndex = -1;\n  Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\n\nexports.disableFocus = disableFocus;\n\nfunction enableFocus(el) {\n  if (\"disableBeforeTabIndex\" in el.dataset) {\n    el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\n  }\n\n  Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\n\nexports.enableFocus = enableFocus;\n\nfunction isFocusable(el) {\n  return el.tabIndex != null && el.tabIndex > -1;\n}\n\nexports.isFocusable = isFocusable;\n\nfunction findPrevSiblingFocusable(el) {\n  let n = el.previousSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.previousSibling;\n  }\n\n  return n;\n}\n\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\n\nfunction findNextSiblingFocusable(el) {\n  let n = el.nextSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.nextSibling;\n  }\n\n  return n;\n}\n\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\n\n/***/ }),\n\n/***/ \"./internal/fonts.js\":\n/*!***************************!*\\\n  !*** ./internal/fonts.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.load = exports.check = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst loads = {};\nlet load;\nexports.load = load;\nlet check;\nexports.check = check;\n\nif (utils_1.isNode) {\n  exports.load = load = function (_font, _testStr, callback) {\n    callback();\n  };\n\n  exports.check = check = function () {\n    return false;\n  };\n} else {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const fontFaceSet = document.fonts;\n  const legacy = !fontFaceSet;\n  exports.load = load = legacy ? function (font, testStr, callback) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      callback();\n      return;\n    } // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\n    __webpack_require__(/*! ./legacy/fontwatch/FontWatchRunner */ \"./internal/legacy/fontwatch/FontWatchRunner.js\").load(font, testStr, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    }, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    });\n  } : function (font, _testStr, callback) {\n    if (loads.all || loads[font]) {\n      callback();\n      return;\n    }\n\n    fontFaceSet.ready.then(() => {\n      loads.all = true;\n    });\n    fontFaceSet.load(font).then(() => {\n      loads[font] = true;\n      callback();\n    });\n  };\n  exports.check = check = legacy ? function (font, testStr) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      return true;\n    }\n\n    load(font, testStr, () => {});\n    return false;\n  } : function (font, testStr) {\n    if (loads.all || loads[font]) {\n      return true;\n    }\n\n    if (!fontFaceSet.check(font)) {\n      load(font, testStr, () => {});\n      return false;\n    }\n\n    return true;\n  };\n}\n\n/***/ }),\n\n/***/ \"./internal/hiDPI.js\":\n/*!***************************!*\\\n  !*** ./internal/hiDPI.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transform = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst handler = new EventHandler_1.EventHandler();\nlet ratio = 1;\n\nfunction setRatio() {\n  if (utils_1.isNode) {\n    ratio = 1;\n  } else {\n    ratio = Math.ceil(window.devicePixelRatio || 1);\n\n    if (ratio > 1 && ratio % 2 !== 0) {\n      ratio += 1;\n    }\n  }\n}\n\nsetRatio();\n\nif (!utils_1.isNode) {\n  handler.on(window, \"resize\", setRatio);\n}\n\nfunction transform(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const {\n    getAttribute,\n    setAttribute\n  } = canvas;\n\n  canvas.getAttribute = function (name) {\n    let result = getAttribute.call(this, name);\n\n    if (name === \"width\" || name === \"height\") {\n      result = `${Number(result) / ratio}`;\n    }\n\n    return result;\n  };\n\n  canvas.setAttribute = function (name, val) {\n    const wh = name === \"width\" || name === \"height\";\n\n    if (wh) {\n      val = `${Number(val) * ratio}`;\n    }\n\n    const result = setAttribute.call(this, name, val);\n\n    if (wh) {\n      ctx.scale(ratio, ratio);\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(canvas, \"width\", {\n    get() {\n      return Number(canvas.getAttribute(\"width\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"width\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  Object.defineProperty(canvas, \"height\", {\n    get() {\n      return Number(canvas.getAttribute(\"height\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"height\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  const {\n    drawImage\n  } = ctx; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  ctx.drawImage = function (img, ...args) {\n    if (img !== canvas || ratio === 1) {\n      return drawImage.call(this, img, ...args);\n    }\n\n    this.save();\n\n    try {\n      this.scale(1 / ratio, 1 / ratio);\n\n      if (args.length > 4) {\n        args[4] *= ratio;\n        args[5] *= ratio;\n      } else {\n        args[0] *= ratio;\n        args[1] *= ratio;\n      }\n\n      return drawImage.call(this, img, ...args);\n    } finally {\n      this.restore();\n    }\n  };\n\n  return canvas;\n}\n\nexports.transform = transform;\n\n/***/ }),\n\n/***/ \"./internal/icons.js\":\n/*!***************************!*\\\n  !*** ./internal/icons.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\nconst ICON_PROP_KEYS = [\"content\", \"font\", \"color\", \"className\", \"tagName\", \"isLiga\", \"width\", \"src\", \"svg\", \"name\", \"path\", \"offsetTop\", \"offsetLeft\"];\n\nfunction quote(name) {\n  const quoted = [];\n  const split = name.split(/,\\s*/);\n\n  for (let i = 0; i < split.length; i++) {\n    const part = split[i].replace(/['\"]/g, \"\");\n\n    if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\n      quoted.push(part);\n    } else {\n      quoted.push(`'${part}'`);\n    }\n  }\n\n  return quoted.join(\",\");\n}\n\nconst doms = {};\nconst props = {};\n\nfunction getIconProps(tagName, className) {\n  const tagProps = props[tagName] || (props[tagName] = {});\n\n  if (tagProps[className]) {\n    return tagProps[className];\n  }\n\n  const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName)); // `classList.add()` cannot be used because it may be separated by spaces.\n\n  dom.className = className;\n  dom.classList.add(\"cheetah-grid-icon\");\n  document.body.appendChild(dom);\n\n  try {\n    const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\n    let content = beforeStyle.getPropertyValue(\"content\");\n\n    if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\n      if (content[0] === content[content.length - 1]) {\n        content = content.slice(1, -1);\n      }\n    }\n\n    let font = beforeStyle.getPropertyValue(\"font\");\n\n    if (!font) {\n      font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\n    }\n\n    const color = beforeStyle.getPropertyValue(\"color\");\n    const width = dom.clientWidth;\n    const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\n    return tagProps[className] = {\n      content,\n      font,\n      color,\n      width,\n      isLiga\n    };\n  } finally {\n    document.body.removeChild(dom);\n  }\n}\n\nexports.getIconProps = getIconProps;\n\nfunction toPropArray(prop, count) {\n  const result = [];\n\n  if (Array.isArray(prop)) {\n    result.push(...prop);\n\n    for (let i = prop.length; i < count; i++) {\n      result.push(null);\n    }\n  } else {\n    for (let i = 0; i < count; i++) {\n      result.push(prop);\n    }\n  }\n\n  return result;\n}\n\nfunction toSimpleArray(iconProps) {\n  if (!iconProps) {\n    return iconProps;\n  } else if (Array.isArray(iconProps)) {\n    return iconProps;\n  }\n\n  const workData = {};\n  let count = 0;\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const prop = iconProps[k];\n\n    if (prop) {\n      if (Array.isArray(prop)) {\n        count = Math.max(count, prop.length);\n      } else {\n        count = Math.max(count, 1);\n      }\n    }\n  });\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const arr = toPropArray(iconProps[k], count); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    workData[k] = arr;\n  });\n  const result = [];\n\n  for (let i = 0; i < count; i++) {\n    const data = {};\n    ICON_PROP_KEYS.forEach(k => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const val = workData[k][i]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      data[k] = val;\n    });\n    result.push(data);\n  }\n\n  return result;\n}\n\nfunction normalize(iconProps) {\n  const data = {};\n\n  for (const k in iconProps) {\n    if (k === \"className\") {\n      continue;\n    }\n\n    if (isIconKey(k)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      data[k] = iconProps[k];\n    }\n  }\n\n  if (iconProps.className) {\n    const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\n\n    for (const k in prop) {\n      if (isIconKey(k)) {\n        if (iconProps[k] == null) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          data[k] = prop[k];\n        }\n      }\n    }\n  }\n\n  return data;\n}\n\nfunction toNormalizeArray(iconProps) {\n  const icons = toSimpleArray(iconProps);\n\n  if (!icons) {\n    return icons;\n  }\n\n  return icons.map(icon => normalize(icon));\n}\n\nexports.toNormalizeArray = toNormalizeArray;\nexports.iconPropKeys = ICON_PROP_KEYS;\n\nfunction isIconKey(k) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return ICON_PROP_KEYS.indexOf(k) >= 0;\n}\n\n/***/ }),\n\n/***/ \"./internal/imgs.js\":\n/*!**************************!*\\\n  !*** ./internal/imgs.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCacheOrLoad = exports.loadImage = void 0;\n\nconst LRUCache_1 = __webpack_require__(/*! ./LRUCache */ \"./internal/LRUCache.js\");\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst allCache = {};\n\nfunction loadImage(src) {\n  if (typeof Promise === \"undefined\") {\n    console.error(\"Promise is not loaded. load Promise before this process.\");\n    return {\n      then() {\n        return this;\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    };\n  }\n\n  const img = new Image();\n  const result = new Promise(resolve => {\n    img.onload = () => {\n      resolve(img);\n    };\n  });\n\n  img.onerror = () => {\n    const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\n    console.warn(`cannot load: ${url}`);\n    throw new Error(`IMAGE LOAD ERROR: ${url}`);\n  };\n\n  img.src = src;\n  return result;\n}\n\nexports.loadImage = loadImage;\n\nfunction getCacheOrLoad0(cache, src) {\n  return (0, utils_1.then)(src, src => {\n    const c = cache.get(src);\n\n    if (c) {\n      return c;\n    }\n\n    const result = loadImage(src).then(img => {\n      cache.put(src, img);\n      return img;\n    });\n    cache.put(src, result);\n    return result;\n  });\n}\n\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n  const cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\n  return getCacheOrLoad0(cache, src);\n}\n\nexports.getCacheOrLoad = getCacheOrLoad;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/Path2DShim.js\":\n/*!**********************************************!*\\\n  !*** ./internal/legacy/canvas/Path2DShim.js ***!\n  \\**********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Path2DShim = void 0;\n\nconst PathCommandsParser_1 = __webpack_require__(/*! ./PathCommandsParser */ \"./internal/legacy/canvas/PathCommandsParser.js\");\n\nconst parser = new PathCommandsParser_1.PathCommandsParser();\n\nclass Path2DShim {\n  arc(...args) {\n    this._ops.push({\n      op: \"arc\",\n      args\n    });\n  }\n\n  arcTo(...args) {\n    this._ops.push({\n      op: \"arcTo\",\n      args\n    });\n  }\n\n  bezierCurveTo(...args) {\n    this._ops.push({\n      op: \"bezierCurveTo\",\n      args\n    });\n  }\n\n  closePath(...args) {\n    this._ops.push({\n      op: \"closePath\",\n      args\n    });\n  }\n\n  ellipse(...args) {\n    this._ops.push({\n      op: \"ellipse\",\n      args\n    });\n  }\n\n  lineTo(...args) {\n    this._ops.push({\n      op: \"lineTo\",\n      args\n    });\n  }\n\n  moveTo(...args) {\n    this._ops.push({\n      op: \"moveTo\",\n      args\n    });\n  }\n\n  quadraticCurveTo(...args) {\n    this._ops.push({\n      op: \"quadraticCurveTo\",\n      args\n    });\n  }\n\n  rect(...args) {\n    this._ops.push({\n      op: \"rect\",\n      args\n    });\n  }\n\n  constructor(arg) {\n    this._ops = [];\n\n    if (arg === undefined) {\n      return;\n    }\n\n    if (typeof arg === \"string\") {\n      // try {\n      this._ops = parser.parse(arg); // } catch (e) {\n      // \tthrow e;\n      // }\n    } else if (arg.hasOwnProperty(\"_ops\")) {\n      this._ops = [...arg._ops];\n    } else {\n      throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n    }\n  }\n\n  roundRect(_x, _y, _w, _h, _radii) {\n    throw new Error(\"Method not implemented.\");\n  }\n\n}\n\nexports.Path2DShim = Path2DShim;\nconst {\n  CanvasRenderingContext2D\n} = window;\nconst originalFill = CanvasRenderingContext2D.prototype.fill; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n  if (args[0] instanceof Path2DShim) {\n    const path = args[0];\n    this.beginPath();\n\n    path._ops.forEach(op => {\n      const fn = this[op.op];\n      fn.apply(this, op.args);\n    });\n\n    originalFill.apply(this, Array.prototype.slice.call(args, 1));\n  } else {\n    originalFill.apply(this, args);\n  }\n};\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommands.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommands.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathCommands = void 0;\n/*eslint new-cap: \"off\"*/\n\nfunction mag(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n\nfunction dot(u, v) {\n  return u[0] * v[0] + u[1] * v[1];\n}\n\nfunction ratio(u, v) {\n  return dot(u, v) / (mag(u) * mag(v));\n}\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction angle(u, v) {\n  let sign = 1.0;\n\n  if (u[0] * v[1] - u[1] * v[0] < 0) {\n    sign = -1.0;\n  }\n\n  return sign * Math.acos(clamp(ratio(u, v), -1, 1));\n}\n\nfunction rotClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\n\nfunction rotCounterClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\n\nfunction midPoint(u, v) {\n  return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\n\nfunction meanVec(u, v) {\n  return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\n\nfunction pointMul(u, v) {\n  return [u[0] * v[0], u[1] * v[1]];\n}\n\nfunction scale(c, v) {\n  return [c * v[0], c * v[1]];\n}\n\nfunction sum(u, v) {\n  return [u[0] + v[0], u[1] + v[1]];\n} // Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\n\n\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n  // Convert from endpoint to center parametrization, as detailed in:\n  //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n  if (rx === 0 || ry === 0) {\n    ctx.lineTo(x2, x1);\n    return;\n  }\n\n  phi *= Math.PI / 180.0;\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\n\n  const xPrime2 = pointMul(xPrime, xPrime);\n  let rx2 = Math.pow(rx, 2);\n  let ry2 = Math.pow(ry, 2);\n  const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n\n  if (lambda > 1) {\n    rx *= lambda;\n    ry *= lambda;\n    rx2 = Math.pow(rx, 2);\n    ry2 = Math.pow(ry, 2);\n  }\n\n  let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) / (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n\n  if (fA === fS) {\n    factor *= -1.0;\n  }\n\n  const cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\n\n  const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\n\n  const x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\n  const x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\n  const theta = angle([1, 0], x1UnitVector); // F.6.5.5\n\n  const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n\n  const start = theta;\n  const end = theta + deltaTheta;\n  ctx.save();\n  ctx.translate(c[0], c[1]);\n  ctx.rotate(phi);\n  ctx.scale(rx, ry);\n  ctx.arc(0, 0, 1, start, end, !fS);\n  ctx.restore();\n}\n\nclass PathCommands {\n  constructor(ctx) {\n    let lMx;\n    let lMy;\n    let lx = 0;\n    let ly = 0;\n    let reflected;\n    let lastCommand = \"\";\n\n    function makeReflected() {\n      if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\n        return {\n          x: lx,\n          y: ly\n        };\n      }\n\n      return reflected;\n    }\n\n    this.M = (px, py) => {\n      ctx.moveTo(px, py);\n      lMx = px;\n      lMy = py;\n      lx = px;\n      ly = py;\n      lastCommand = \"M\";\n      return this;\n    };\n\n    this.m = (px, py) => this.M(px + lx, py + ly);\n\n    this.L = (px, py) => {\n      ctx.lineTo(px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"L\";\n      return this;\n    };\n\n    this.l = (px, py) => this.L(px + lx, py + ly);\n\n    this.H = px => this.L(px, ly);\n\n    this.h = px => this.H(px + lx);\n\n    this.V = py => this.L(lx, py);\n\n    this.v = py => this.V(py + ly);\n\n    this.Z = () => {\n      ctx.closePath();\n      lx = lMx;\n      ly = lMy;\n      lastCommand = \"Z\";\n      return this;\n    };\n\n    this.z = () => this.Z(); //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n\n\n    this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n      ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cp2x,\n        y: 2 * py - cp2y\n      };\n      lastCommand = \"C\";\n      return this;\n    };\n\n    this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly); //S x2 y2, x y (or s dx2 dy2, dx dy)\n\n\n    this.S = (cpx, cpy, px, py) => {\n      const {\n        x: cp1x,\n        y: cp1y\n      } = makeReflected();\n      return this.C(cp1x, cp1y, cpx, cpy, px, py);\n    };\n\n    this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly); //Q x1 y1, x y (or q dx1 dy1, dx dy)\n\n\n    this.Q = (cpx, cpy, px, py) => {\n      ctx.quadraticCurveTo(cpx, cpy, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cpx,\n        y: 2 * py - cpy\n      };\n      lastCommand = \"Q\";\n      return this;\n    };\n\n    this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly); //T x y (or t dx dy)\n\n\n    this.T = (px, py) => {\n      const {\n        x: cpx,\n        y: cpy\n      } = makeReflected();\n      return this.Q(cpx, cpy, px, py);\n    };\n\n    this.t = (px, py) => this.T(px + lx, py + ly); //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\n\n    this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n      const x1 = lx;\n      const y1 = ly;\n      ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"A\";\n      return this;\n    }; //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n\n\n    this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n  }\n\n}\n\nexports.PathCommands = PathCommands;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommandsParser.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommandsParser.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathCommandsParser = void 0;\n\nconst PathCommands_1 = __webpack_require__(/*! ./PathCommands */ \"./internal/legacy/canvas/PathCommands.js\");\n\nfunction pathTokens(d) {\n  let idx = 0;\n  return {\n    next() {\n      let s = \"\";\n\n      while (d.length > idx) {\n        const c = d[idx];\n        idx++;\n\n        if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\n          if (s) {\n            return s;\n          }\n        } else {\n          const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\n\n          if (type === \"str\") {\n            if (s) {\n              idx--;\n              return s;\n            }\n\n            return c;\n          }\n\n          if (\"-+\".indexOf(c) > -1) {\n            if (s) {\n              idx--;\n              return s;\n            }\n          }\n\n          if (c === \".\") {\n            if (s.indexOf(\".\") > -1) {\n              idx--;\n              return s;\n            }\n          }\n\n          s += c;\n        }\n      }\n\n      return s || null;\n    }\n\n  };\n}\n\nfunction command(builder, cmd, argsProvider) {\n  if (cmd.toUpperCase() === \"M\" || cmd.toUpperCase() === \"L\" || cmd.toUpperCase() === \"T\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next());\n    return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\n  } else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\n    builder.command(cmd, argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"Z\") {\n    builder.command(cmd);\n    return cmd;\n  } else if (cmd.toUpperCase() === \"C\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"A\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else {\n    // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n    console.warn(`unsupported:${cmd}`);\n  }\n\n  return null;\n}\n\nclass PathCommandsParser {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._ops = [];\n    this._commands = new PathCommands_1.PathCommands(this);\n\n    const buildPush = op => // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (...args) => {\n      this._ops.push({\n        op,\n        args\n      });\n    };\n\n    this.moveTo = buildPush(\"moveTo\");\n    this.lineTo = buildPush(\"lineTo\");\n    this.closePath = buildPush(\"closePath\");\n    this.bezierCurveTo = buildPush(\"bezierCurveTo\");\n    this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\n    this.save = buildPush(\"save\");\n    this.translate = buildPush(\"translate\");\n    this.rotate = buildPush(\"rotate\");\n    this.scale = buildPush(\"scale\");\n    this.arc = buildPush(\"arc\");\n    this.restore = buildPush(\"restore\");\n    this.arcTo = buildPush(\"arcTo\");\n    this.ellipse = buildPush(\"ellipse\");\n    this.rect = buildPush(\"rect\");\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  command(name, ...args) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const numArgs = args || [];\n\n    for (let i = 0; i < args.length; i++) {\n      numArgs[i] -= 0;\n    }\n\n    const command = this._commands[name]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    command.apply(this, numArgs);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  parse(d) {\n    const ops = this._ops = [];\n    const tokens = pathTokens(d);\n\n    try {\n      let cmd;\n      let subsequentCommand = \"Z\";\n\n      while (cmd = tokens.next()) {\n        if (!isNaN(Number(cmd))) {\n          let fst = true;\n          const argsProvider = {\n            next() {\n              if (fst) {\n                fst = false;\n                return cmd;\n              }\n\n              return tokens.next();\n            }\n\n          };\n          subsequentCommand = command(this, subsequentCommand, argsProvider) || \"Z\";\n        } else {\n          subsequentCommand = command(this, cmd, tokens) || \"Z\";\n        }\n      }\n    } catch (e) {\n      console.log(`Error: ${d}`);\n      throw e;\n    }\n\n    return ops;\n  }\n\n}\n\nexports.PathCommandsParser = PathCommandsParser;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontRuler.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontRuler.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FontRuler = void 0;\n\nfunction computeStyle(font) {\n  return [{\n    display: \"block\",\n    position: \"absolute\",\n    top: \"-9999px\",\n    left: \"-9999px\",\n    width: \"auto\",\n    height: \"auto\",\n    margin: \"0\",\n    padding: \"0\",\n    \"white-space\": \"nowrap\",\n    font\n  }, {\n    \"font-variant\": \"normal\",\n    \"font-size\": \"300px\",\n    \"font-style\": \"normal\",\n    \"font-weight\": \"400\",\n    \"line-height\": \"normal\"\n  }];\n}\n\nclass FontRuler {\n  constructor(font, testStr) {\n    const e = document.createElement(\"span\");\n    e.setAttribute(\"aria-hidden\", \"true\");\n    e.textContent = testStr || \"BESbswy\";\n    computeStyle(font).forEach(style => {\n      for (const k in style) {\n        const key = k; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        e.style[key] = style[key];\n      }\n    });\n    document.body.appendChild(e);\n    this.el_ = e;\n  }\n\n  getWidth() {\n    return this.el_.offsetWidth;\n  }\n\n  remove() {\n    document.body.removeChild(this.el_);\n  }\n\n}\n\nexports.FontRuler = FontRuler;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontWatchRunner.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontWatchRunner.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\n\nconst FontRuler_1 = __webpack_require__(/*! ./FontRuler */ \"./internal/legacy/fontwatch/FontRuler.js\");\n\nconst LastResortFonts = {\n  SERIF: \"serif\",\n  SANS_SERIF: \"sans-serif\"\n};\nconst watchRunners = {};\n\nclass FontWatchRunner {\n  static load(font, testStr, activeCallback, inactiveCallback) {\n    const c = watchRunners[font] || (watchRunners[font] = {});\n    testStr += \"\";\n    let runner;\n\n    if (c[testStr]) {\n      runner = c[testStr];\n    } else {\n      runner = c[testStr] = new FontWatchRunner(font, testStr);\n    }\n\n    runner.then(activeCallback, inactiveCallback);\n  }\n\n  constructor(font, testStr) {\n    this.activeCallbacks = [];\n    this.inactiveCallbacks = [];\n    this.status = null;\n    this.lastResortWidths_ = {};\n    this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\n    this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\n    const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\n    const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr); //start\n\n    this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n    this.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n    lastResortRulerA.remove();\n    lastResortRulerB.remove();\n    this.started_ = Date.now();\n    this.check_();\n  }\n\n  then(activeCallback, inactiveCallback) {\n    if (this.status) {\n      if (this.status !== \"ng\") {\n        activeCallback();\n      } else {\n        inactiveCallback();\n      }\n    } else {\n      this.activeCallbacks.push(activeCallback);\n      this.inactiveCallbacks.push(inactiveCallback);\n    }\n  }\n\n  check_() {\n    const widthA = this.fontRulerA_.getWidth();\n    const widthB = this.fontRulerB_.getWidth();\n\n    if (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\n      if (Date.now() - this.started_ >= 3000) {\n        // timeout\n        if (this.isLastResortFont_(widthA, widthB)) {\n          this.finish_(this.activeCallbacks);\n          this.status = \"ok\";\n        } else {\n          this.finish_(this.inactiveCallbacks);\n          this.status = \"ng\";\n        }\n      } else {\n        setTimeout(() => {\n          this.check_();\n        }, 50);\n      }\n    } else {\n      this.finish_(this.activeCallbacks);\n      this.status = \"ok\";\n    }\n  }\n\n  isFallbackFont_(a, b) {\n    return this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\n  }\n\n  widthsMatchLastResortWidths_(a, b) {\n    for (const font in LastResortFonts) {\n      if (LastResortFonts.hasOwnProperty(font)) {\n        if (this.widthMatches_(a, LastResortFonts[font]) && this.widthMatches_(b, LastResortFonts[font])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  widthMatches_(width, lastResortFont) {\n    return width === this.lastResortWidths_[lastResortFont];\n  }\n\n  isLastResortFont_(a, b) {\n    return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n  }\n\n  finish_(callbacks) {\n    setTimeout(() => {\n      this.fontRulerA_.remove();\n      this.fontRulerB_.remove();\n      callbacks.forEach(cb => cb());\n    }, 0);\n  }\n\n}\n\nlet HAS_WEBKIT_FALLBACK_BUG = null;\n\nfunction hasWebKitFallbackBug() {\n  if (HAS_WEBKIT_FALLBACK_BUG === null) {\n    const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n    HAS_WEBKIT_FALLBACK_BUG = !!match && (parseInt(match[1], 10) < 536 || parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11);\n  }\n\n  return HAS_WEBKIT_FALLBACK_BUG;\n}\n\nmodule.exports = FontWatchRunner;\n\n/***/ }),\n\n/***/ \"./internal/menu-items.js\":\n/*!********************************!*\\\n  !*** ./internal/menu-items.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeToFn = exports.normalize = void 0;\n/** @private */\n\nfunction extend(a, b) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const o = {};\n\n  for (const k in a) {\n    o[k] = a[k];\n  }\n\n  for (const k in b) {\n    o[k] = b[k];\n  }\n\n  return o;\n}\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\n\n\nfunction normalize(options) {\n  if (!options) {\n    return [];\n  }\n\n  if (Array.isArray(options)) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return options.map( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    e => extend(e, {\n      label: e.caption || e.label\n    }));\n  }\n\n  if (typeof options === \"string\") {\n    return normalize(JSON.parse(options));\n  }\n\n  const result = [];\n\n  for (const k in options) {\n    result.push({\n      value: k,\n      label: options[k]\n    });\n  }\n\n  return result;\n}\n\nexports.normalize = normalize;\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\n\nfunction normalizeToFn(options) {\n  if (typeof options === \"function\") {\n    return record => normalize(options(record));\n  }\n\n  return () => normalize(options);\n}\n\nexports.normalizeToFn = normalizeToFn;\n\n/***/ }),\n\n/***/ \"./internal/paste-utils.js\":\n/*!*********************************!*\\\n  !*** ./internal/paste-utils.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\n\nfunction normalizePasteValue(text) {\n  return text[text.length - 1] !== \"\\n\" ? text : text[text.length - 2] === \"\\r\" ? text.slice(0, -2) : text.slice(0, -1);\n}\n\nexports.normalizePasteValue = normalizePasteValue;\n\nfunction parsePasteRangeBoxValues(value, option) {\n  const normalizedValue = normalizePasteValue(value);\n  const {\n    values,\n    colCount\n  } = parseValues(normalizedValue, option);\n  return {\n    colCount,\n    rowCount: values.length,\n\n    getCellValue(offsetCol, offsetRow) {\n      var _a, _b;\n\n      return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\n    }\n\n  };\n}\n\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\n\nfunction parseValues(text, {\n  trimOnPaste\n}) {\n  const len = text.length;\n  const adjustCell = trimOnPaste ? cell => cell.trim() : cell => cell;\n  let colCount = 1;\n  let line = [];\n  const values = [line];\n  let cell = \"\";\n\n  for (let index = 0; index < len; index++) {\n    const char = text[index];\n\n    if (char === \"\\t\") {\n      line.push(adjustCell(cell));\n      cell = \"\";\n      continue;\n    }\n\n    if (char === \"\\n\") {\n      // End of line\n      cell = adjustCell(cell);\n\n      if (cell[cell.length - 1] === \"\\r\") {\n        cell = cell.slice(0, -1);\n      }\n\n      line.push(cell);\n      colCount = Math.max(colCount, line.length);\n      line = [];\n      values.push(line);\n      cell = \"\";\n      continue;\n    }\n\n    if (char === '\"' && !cell.trim()) {\n      const quoted = processQuotedCell(index + 1);\n\n      if (quoted) {\n        ({\n          cell\n        } = quoted);\n        index = quoted.next - 1;\n        continue;\n      }\n    }\n\n    cell += char;\n  } // End of text\n\n\n  line.push(adjustCell(cell));\n  colCount = Math.max(colCount, line.length);\n  return {\n    values,\n    colCount\n  };\n\n  function processQuotedCell(start) {\n    let cell = \"\";\n    let index = start;\n\n    while (index < len) {\n      const char = text[index];\n\n      if (char !== '\"') {\n        cell += char;\n        index++;\n        continue;\n      }\n\n      if (text[index + 1] === '\"') {\n        // Escape\n        cell += '\"';\n        index += 2;\n        continue;\n      } // Maybe end quote\n\n\n      let next = index + 1;\n\n      while (next < len) {\n        const c = text[next];\n\n        if (c.trim()) {\n          // Not quoted. e.g. \"A\"B\n          return null;\n        }\n\n        if (c === \"\\t\" || c === \"\\n\") {\n          break;\n        } // Allow spaces\n\n\n        next++;\n      } // End quote\n\n\n      return {\n        cell,\n        next\n      };\n    }\n\n    return null;\n  }\n}\n\n/***/ }),\n\n/***/ \"./internal/path2DManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/path2DManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fill = exports.getPath2D = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction getPath2D() {\n  if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\n    return Path2D;\n  } // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\n  return __webpack_require__(/*! ./legacy/canvas/Path2DShim */ \"./internal/legacy/canvas/Path2DShim.js\").Path2DShim;\n}\n\nexports.getPath2D = getPath2D;\n\nfunction fill(pathModule, ctx, x, y, w, h) {\n  ctx.save();\n\n  try {\n    const {\n      width,\n      height\n    } = pathModule;\n    const {\n      ud: upsideDown,\n      x: offsetX = 0,\n      y: offsetY = 0\n    } = pathModule;\n    w = w || width;\n    h = h || height;\n    const xrate = w / width;\n    const yrate = h / (upsideDown ? -height : height);\n    x = x || 0;\n    y = upsideDown ? (y || 0) + -height * yrate : y || 0;\n    ctx.translate(x, y);\n    ctx.scale(xrate, yrate);\n\n    if (offsetX !== 0 || offsetY !== 0) {\n      ctx.translate(offsetX, offsetY);\n    }\n\n    const Path2D = getPath2D();\n    const path2d = pathModule.path2d = pathModule.path2d || new Path2D(pathModule.d);\n    ctx.fill(path2d);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fill = fill;\n\n/***/ }),\n\n/***/ \"./internal/sort.js\":\n/*!**************************!*\\\n  !*** ./internal/sort.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction createArray(get, length) {\n  const array = new Array(length);\n\n  for (let i = 0; i < length; i++) {\n    array[i] = get(i);\n  }\n\n  return array;\n}\n\nfunction createArrayPromise(get, getField, length // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  return new Promise(resolve => {\n    const plist = [];\n    const array = new Array(length);\n\n    for (let i = 0; i < length; i++) {\n      const data = get(i);\n      const record = {\n        v: data,\n        f: data\n      };\n      array[i] = record;\n\n      if ((0, utils_1.isPromise)(data)) {\n        plist.push(data.then(v => {\n          record.v = v;\n          record.f = v;\n        }));\n      }\n    }\n\n    Promise.all(plist).then(() => getField == null ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    array : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setArrayField(array, getField)).then(resolve);\n  });\n}\n\nfunction setArrayField(array, getField) {\n  return new Promise(resolve => {\n    const {\n      length\n    } = array;\n    const plist = [];\n\n    for (let i = 0; i < length; i++) {\n      const record = array[i];\n      const f = getField(record.v);\n\n      if ((0, utils_1.isPromise)(f)) {\n        plist.push(f.then(v => {\n          record.f = v;\n        }));\n      } else {\n        record.f = f;\n      }\n    }\n\n    Promise.all(plist).then(() => resolve(array));\n  });\n}\n\nfunction sortArray(array, compare) {\n  Array.prototype.sort.call(array, compare);\n}\n\nexports.sortArray = sortArray;\n\nfunction sort(get, set, length, compare, getField) {\n  const old = createArray(get, length);\n\n  if (getField != null) {\n    old.sort((r1, r2) => compare(getField(r1), getField(r2)));\n  } else {\n    old.sort(compare);\n  }\n\n  for (let i = 0; i < length; i++) {\n    set(i, old[i]);\n  }\n}\n\nexports.sort = sort;\n\nfunction sortPromise(get, set, length, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ncompare, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngetField) {\n  if (typeof Promise !== \"undefined\") {\n    return createArrayPromise(get, getField, length).then(array => {\n      array.sort((r1, r2) => compare(r1.f, r2.f));\n\n      for (let i = 0; i < length; i++) {\n        set(i, array[i].v);\n      }\n    });\n  } else {\n    sort(get, set, length, compare, getField);\n    const dummyPromise = {\n      then(fn) {\n        fn();\n        return dummyPromise;\n      },\n\n      catch() {\n        return dummyPromise;\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    };\n    return dummyPromise;\n  }\n}\n\nexports.sortPromise = sortPromise;\n\n/***/ }),\n\n/***/ \"./internal/style.js\":\n/*!***************************!*\\\n  !*** ./internal/style.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getScrollBarSize = exports.initDocument = void 0;\n\nfunction getScrollBarWidth() {\n  const wrapper = document.createElement(\"div\");\n  const inner = document.createElement(\"div\");\n  const {\n    style: wrapperStyle\n  } = wrapper;\n  wrapperStyle.position = \"fixed\";\n  wrapperStyle.height = \"50px\";\n  wrapperStyle.width = \"50px\";\n  wrapperStyle.overflow = \"scroll\";\n  wrapperStyle.opacity = \"0\";\n  wrapperStyle.pointerEvents = \"none\";\n  const {\n    style\n  } = inner;\n  style.height = \"100%\";\n  style.width = \"100%\";\n  inner.textContent = \"x\";\n  wrapper.appendChild(inner);\n  document.body.appendChild(wrapper);\n  const wrapperWidth = wrapper.getBoundingClientRect().width;\n  const innerWidth = inner.getBoundingClientRect().width;\n  document.body.removeChild(wrapper);\n  return Math.ceil(wrapperWidth - innerWidth);\n}\n\nlet SCROLLBAR_SIZE;\n\nfunction initDocumentInternal() {\n  __webpack_require__(/*! @/internal/style.css */ \"../src/js/internal/style.css\");\n\n  SCROLLBAR_SIZE = getScrollBarWidth() || 10;\n  const style = document.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-name\", \"cheetah-grid\");\n  style.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n  document.head.appendChild(style);\n}\n\nlet initDocumentVar = initDocumentInternal;\n\nfunction initDocument() {\n  initDocumentVar();\n  initDocumentVar = Function.prototype;\n}\n\nexports.initDocument = initDocument;\n\nfunction getScrollBarSize() {\n  return SCROLLBAR_SIZE;\n}\n\nexports.getScrollBarSize = getScrollBarSize;\n\n/***/ }),\n\n/***/ \"./internal/symbolManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/symbolManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst Symbol = utils_1.isNode ? global.Symbol : window.Symbol ? window.Symbol : (() => {\n  function random() {\n    const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n    const cl = c.length;\n    let r = \"\";\n\n    for (let i = 0; i < 10; i++) {\n      r += c[Math.floor(Math.random() * cl)];\n    }\n\n    return r;\n  }\n\n  return name => {\n    if (name) {\n      return `#${name}_${random()}`;\n    } else {\n      return `#_${random()}`;\n    }\n  };\n})();\nconst mem = {};\n\nfunction get(name) {\n  if (name) {\n    return mem[name] ? mem[name] : mem[name] = Symbol(name);\n  } else {\n    return Symbol();\n  }\n}\n\nexports.get = get;\n\nfunction getProtectedSymbol() {\n  return get(\"protected\");\n}\n\nexports.getProtectedSymbol = getProtectedSymbol;\n\nfunction getCheckColumnStateId() {\n  return get(\"chkcol.stateID\");\n}\n\nexports.getCheckColumnStateId = getCheckColumnStateId;\n\nfunction getRadioColumnStateId() {\n  return get(\"rdcol.stateID\");\n}\n\nexports.getRadioColumnStateId = getRadioColumnStateId;\n\nfunction getButtonColumnStateId() {\n  return get(\"btncol.stateID\");\n}\n\nexports.getButtonColumnStateId = getButtonColumnStateId;\n\nfunction getColumnFadeinStateId() {\n  return get(\"col.fadein_stateID\");\n}\n\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\n\nfunction getBranchGraphColumnStateId() {\n  return get(\"branch_graph_col.stateID\");\n}\n\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\n\nfunction getSmallDialogInputEditorStateId() {\n  return get(\"small_dialog_input_editor.stateID\");\n}\n\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\n\nfunction getInlineInputEditorStateId() {\n  return get(\"inline_input_editor.stateID\");\n}\n\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\n\nfunction getInlineMenuEditorStateId() {\n  return get(\"inline_menu_editor.stateID\");\n}\n\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\n\nfunction getCheckHeaderStateId() {\n  return get(\"check_header.stateID\");\n}\n\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/global.js */ \"../node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./internal/utils.js\":\n/*!***************************!*\\\n  !*** ./internal/utils.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\nexports.isNode = isNode;\nlet arrayFind;\nlet arrayFindIndex;\nconst array = {\n  get find() {\n    if (arrayFind) {\n      return arrayFind;\n    }\n\n    if (Array.prototype.find) {\n      arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n    } else {\n      arrayFind = (arr, predicate) => {\n        const index = array.findIndex(arr, predicate);\n        return index >= 0 ? arr[index] : undefined;\n      };\n    }\n\n    return arrayFind;\n  },\n\n  get findIndex() {\n    if (arrayFindIndex) {\n      return arrayFindIndex;\n    }\n\n    if (Array.prototype.findIndex) {\n      arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n    } else {\n      arrayFindIndex = (arr, predicate) => {\n        const {\n          length\n        } = arr;\n\n        for (let i = 0; i < length; i++) {\n          const value = arr[i];\n\n          if (predicate(value, i, arr)) {\n            return i;\n          }\n        }\n\n        return -1;\n      };\n    }\n\n    return arrayFindIndex;\n  }\n\n};\nexports.array = array;\n\nfunction analyzeUserAgent() {\n  if (isNode) {\n    return {\n      IE: false,\n      Edge: false,\n      Chrome: false,\n      Firefox: false,\n      Safari: false\n    };\n  } else {\n    const ua = window.navigator.userAgent.toLowerCase();\n    return {\n      IE: !!/(msie|trident)/.exec(ua),\n      Edge: ua.indexOf(\"edge\") > -1,\n      Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\n      Firefox: ua.indexOf(\"firefox\") > -1,\n      Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1\n    };\n  }\n}\n\nconst {\n  IE,\n  Chrome,\n  Firefox,\n  Edge,\n  Safari\n} = analyzeUserAgent();\n\nfunction setReadonly(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    enumerable: false,\n    configurable: true,\n    value\n  });\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction each(obj, fn) {\n  for (const key in obj) {\n    fn(obj[key], key, obj);\n  }\n}\n\nexports.each = each; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nfunction omit(source, omits) {\n  const result = {};\n\n  for (const key in source) {\n    if (omits.indexOf(key) >= 0) {\n      continue;\n    }\n\n    Object.defineProperty(result, key, {\n      get() {\n        return source[key];\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return result;\n}\n\nexports.omit = omit;\n\nfunction defaults(source, defs) {\n  const keys = [];\n  const result = {};\n\n  for (const key in source) {\n    keys.push(key);\n    Object.defineProperty(result, key, {\n      get() {\n        const val = source[key];\n        return val === undefined ? defs[key] : val;\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  for (const key in defs) {\n    if (keys.indexOf(key) >= 0) {\n      continue;\n    }\n\n    Object.defineProperty(result, key, {\n      get() {\n        const val = source[key];\n        return val === undefined ? defs[key] : val;\n      },\n\n      set(val) {\n        source[key] = val;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return result;\n}\n\nexports.defaults = defaults;\n\nfunction extend(...args) {\n  const result = {};\n  args.forEach(source => {\n    for (const key in source) {\n      Object.defineProperty(result, key, {\n        get() {\n          return source[key];\n        },\n\n        set(val) {\n          source[key] = val;\n        },\n\n        configurable: true,\n        enumerable: true\n      });\n    }\n  });\n  return result;\n}\n\nexports.extend = extend;\n\nfunction isDescendantElement(root, target) {\n  while (target.parentElement) {\n    const p = target.parentElement;\n\n    if (root === p) {\n      return true;\n    }\n\n    target = p;\n  }\n\n  return false;\n}\n\nexports.isDescendantElement = isDescendantElement;\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nfunction applyChainSafe(obj, fn, ...names) {\n  let value = obj;\n\n  for (let i = 0; i < names.length && value != null; i++) {\n    value = fn(value, names[i]);\n  }\n\n  return value;\n}\n\nexports.applyChainSafe = applyChainSafe;\n\nfunction getChainSafe(obj, ...names) {\n  return applyChainSafe(obj, (val, name) => val[name], ...names);\n}\n\nexports.getChainSafe = getChainSafe;\n\nfunction getOrApply(value, ...args) {\n  if (typeof value === \"function\") {\n    return value(...args);\n  } else {\n    return value;\n  }\n}\n\nexports.getOrApply = getOrApply;\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nfunction endsWith(str, searchString, position) {\n  const subjectString = str.toString();\n\n  if (typeof position !== \"number\" || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n    position = subjectString.length;\n  }\n\n  position -= searchString.length;\n  const lastIndex = subjectString.lastIndexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\nfunction genChars(s) {\n  // Surrogate Code Point\n  // [\\uD800-\\uDBFF]\n  // Variation Selectors\n  // FVS [\\u180B-\\u180D]\n  // VS1VS16 [\\uFE00-\\uFE0F]\n  // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\n  const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction genWords(s) {\n  const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction isPromise(data) {\n  return Boolean(data && typeof data.then === \"function\");\n}\n\nexports.isPromise = isPromise;\n\nfunction then(result, callback) {\n  return isPromise(result) ? result.then(r => callback(r)) : callback(result);\n}\n\nexports.then = then;\n\nfunction getMouseButtons(e) {\n  if (e.buttons != null) {\n    return e.buttons;\n  }\n  /*for legacy*/\n\n\n  if (e.which != null) {\n    if (e.which === 3) {\n      //right?\n      return 4;\n    }\n\n    if (e.which === 2) {\n      //middle?\n      return 4;\n    }\n\n    return e.which; //left or no\n  }\n\n  if (e.button === 0 || e.button === 1) {\n    return 1; //candidate left\n  }\n\n  if (e.button === 2) {\n    return 2; // right\n  }\n\n  return 0; //no or middle?\n}\n\nfunction getKeyCode(e) {\n  return e.keyCode || e.which;\n}\n\nfunction isTouchEvent(e) {\n  return !!e.changedTouches;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction getIgnoreCase(obj, name) {\n  if (obj[name]) {\n    return obj[name];\n  }\n\n  const l = name.toLowerCase();\n\n  if (obj[l]) {\n    return obj[l];\n  }\n\n  const u = name.toLowerCase();\n\n  if (obj[u]) {\n    return obj[u];\n  }\n\n  for (const k in obj) {\n    if (k.toLowerCase() === l) {\n      return obj[k];\n    }\n  }\n\n  return undefined;\n}\n\nexports.getIgnoreCase = getIgnoreCase;\n\nfunction cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nfunction toBoxArray(obj) {\n  if (!Array.isArray(obj)) {\n    return [obj\n    /*top*/\n    , obj\n    /*right*/\n    , obj\n    /*bottom*/\n    , obj\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 3) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[2]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 2) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 1) {\n    return [obj[0]\n    /*top*/\n    , obj[0]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[0]\n    /*left*/\n    ];\n  }\n\n  return obj;\n}\n\nfunction cellEquals(a, b) {\n  return a.col === b.col && a.row === b.row;\n}\n\nexports.cellEquals = cellEquals;\n\nfunction cellInRange(range, col, row) {\n  return range.start.col <= col && col <= range.end.col && range.start.row <= row && row <= range.end.row;\n}\n\nexports.cellInRange = cellInRange;\nexports.browser = {\n  IE,\n  Edge,\n  Chrome,\n  Firefox,\n  Safari,\n  // Chrome 16777216 (onl Chrome 33554431)\n  // FireFox 17895588\n  // IE 10737433\n  heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433 // default IE limit\n\n};\nexports.obj = {\n  setReadonly,\n  isObject\n};\nexports.str = {\n  endsWith,\n  genChars,\n  genWords\n};\nexports.event = {\n  getMouseButtons,\n  getKeyCode,\n  isTouchEvent,\n  cancel\n};\nexports.style = {\n  toBoxArray\n};\nexports.emptyFn = Function.prototype;\n\n/***/ }),\n\n/***/ \"./list-grid/LG_EVENT_TYPE.js\":\n/*!************************************!*\\\n  !*** ./list-grid/LG_EVENT_TYPE.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LG_EVENT_TYPE = void 0;\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(/*! ../core/DG_EVENT_TYPE */ \"./core/DG_EVENT_TYPE.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\n  BEFORE_CHANGE_VALUE: \"before_change_value\",\n  CHANGED_VALUE: \"changed_value\",\n  CHANGED_HEADER_VALUE: \"changed_header_value\",\n  REJECTED_PASTE_VALUES: \"rejected_paste_values\"\n});\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/index.js\":\n/*!***************************************!*\\\n  !*** ./list-grid/layout-map/index.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\n\nvar simple_header_layout_1 = __webpack_require__(/*! ./internal/simple-header-layout */ \"./list-grid/layout-map/internal/simple-header-layout.js\");\n\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", {\n  enumerable: true,\n  get: function () {\n    return simple_header_layout_1.SimpleHeaderLayoutMap;\n  }\n});\n\nvar multi_layout_1 = __webpack_require__(/*! ./internal/multi-layout */ \"./list-grid/layout-map/internal/multi-layout.js\");\n\nObject.defineProperty(exports, \"MultiLayoutMap\", {\n  enumerable: true,\n  get: function () {\n    return multi_layout_1.MultiLayoutMap;\n  }\n});\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/multi-layout.js\":\n/*!*******************************************************!*\\\n  !*** ./list-grid/layout-map/internal/multi-layout.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiLayoutMap = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerAction = __importStar(__webpack_require__(/*! ../../../header/action */ \"./header/action.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./list-grid/layout-map/internal/utils.js\");\n\nfunction normalizeLayout(layout) {\n  if (Array.isArray(layout)) {\n    return {\n      header: layout,\n      body: layout\n    };\n  }\n\n  return layout;\n}\n\nlet seqId = 0;\n\nclass LayoutObjectGrid {\n  constructor(layout, transform) {\n    this.objects = [];\n    this.objectGrid = [];\n    this.objectMap = {};\n    this.columnCount = 0;\n    this.columnWidths = [];\n    layout.forEach((rowLayout, row) => {\n      let col = 0;\n      rowLayout.forEach(cell => {\n        var _a, _b;\n\n        const id = seqId++;\n        const obj = transform(cell, id);\n        this.objects.push(obj);\n        this.objectMap[id] = obj;\n        col = this._findStartCell(col, row);\n        const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\n        const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\n        const endRow = row + rowSpan;\n        const endCol = col + colSpan;\n\n        for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\n          const objectGridRow = this._getObjectGridRow(rowIndex);\n\n          for (let colIndex = col; colIndex < endCol; colIndex++) {\n            objectGridRow[colIndex] = obj;\n          }\n        }\n\n        if (colSpan === 1) {\n          this._setWidthDataIfAbsent(col, cell);\n        }\n\n        this._useColumnIndex(endCol - 1);\n\n        col = endCol;\n      });\n    });\n  }\n\n  get rowCount() {\n    return this.objectGrid.length;\n  }\n\n  _findStartCell(col, row) {\n    const objectGridRow = this._getObjectGridRow(row);\n\n    for (let index = col; index < objectGridRow.length; index++) {\n      if (!objectGridRow[index]) {\n        return index;\n      }\n    }\n\n    return objectGridRow.length;\n  }\n\n  _getObjectGridRow(row) {\n    return this.objectGrid[row] || (this.objectGrid[row] = []);\n  }\n\n  _useColumnIndex(col) {\n    if (this.columnCount > col) {\n      return;\n    }\n\n    this.columnCount = col + 1;\n  }\n\n  _setWidthDataIfAbsent(col, cell) {\n    if (!this.columnWidths[col]) {\n      if (cell.width != null || cell.maxWidth != null || cell.minWidth != null) {\n        this.columnWidths[col] = {\n          width: cell.width,\n          maxWidth: cell.maxWidth,\n          minWidth: cell.minWidth\n        };\n      }\n    }\n  }\n\n}\n\nclass MultiLayoutMap {\n  constructor(layout) {\n    this._columnWidths = [];\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    const hbLayouut = normalizeLayout(layout);\n    const header = this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\n      return {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        headerIcon: hd.headerIcon,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n    });\n    const body = this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\n      return {\n        id,\n        field: colDef.field,\n        width: colDef.width,\n        minWidth: colDef.minWidth,\n        maxWidth: colDef.maxWidth,\n        icon: colDef.icon,\n        message: colDef.message,\n        columnType: columns.type.of(colDef.columnType),\n        action: columns.action.of(colDef.action),\n        style: colDef.style,\n        define: colDef\n      };\n    });\n    const columnCount = this._columnCount = Math.max(header.columnCount, body.columnCount);\n\n    for (let col = 0; col < columnCount; col++) {\n      const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\n      this._columnWidths[col] = widthDef;\n    }\n  }\n\n  get columnWidths() {\n    return this._columnWidths;\n  }\n\n  get headerRowCount() {\n    return this._header.rowCount;\n  }\n\n  get bodyRowCount() {\n    return this._body.rowCount;\n  }\n\n  get colCount() {\n    return this._columnCount;\n  }\n\n  get headerObjects() {\n    return this._header.objects;\n  }\n\n  get columnObjects() {\n    return this._body.objects;\n  }\n\n  getCellId(col, row) {\n    var _a, _b, _c, _d;\n\n    if (this.headerRowCount <= row) {\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n    } //in header\n\n\n    return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._header.objectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, row) {\n    const id = this.getCellId(col, row);\n    return this._body.objectMap[id] || this._emptyDataCache.getBody(col, row);\n  }\n\n  getBodyLayoutRangeById(id) {\n    var _a;\n\n    for (let row = 0; row < this.bodyRowCount; row++) {\n      const objectGridRow = this._body.objectGrid[row];\n\n      if (!objectGridRow) {\n        continue;\n      }\n\n      for (let col = 0; col < this.colCount; col++) {\n        if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\n          return this._getCellRange(this._body, col, row, 0);\n        }\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    if (this.headerRowCount <= row) {\n      const recordIndex = this.getRecordIndexByRow(row);\n      const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\n    } //in header\n\n\n    return this._getCellRange(this._header, col, row, 0);\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      const bodyRow = row - this.headerRowCount;\n      return Math.floor(bodyRow / this.bodyRowCount);\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index * this.bodyRowCount;\n  }\n\n  _getCellRange( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layout, col, layoutRow, offsetRow) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n    const result = {\n      start: {\n        col,\n        row: layoutRow + offsetRow\n      },\n      end: {\n        col,\n        row: layoutRow + offsetRow\n      }\n    };\n    const {\n      objectGrid\n    } = layout;\n    const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n\n    if (id == null) {\n      return result;\n    }\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < layout.columnCount; c++) {\n      if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = layoutRow - 1; r >= 0; r--) {\n      if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\n        break;\n      }\n\n      result.start.row = r + offsetRow;\n    }\n\n    for (let r = layoutRow + 1; r < layout.rowCount; r++) {\n      if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\n        break;\n      }\n\n      result.end.row = r + offsetRow;\n    }\n\n    return result;\n  }\n\n}\n\nexports.MultiLayoutMap = MultiLayoutMap;\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/simple-header-layout.js\":\n/*!***************************************************************!*\\\n  !*** ./list-grid/layout-map/internal/simple-header-layout.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleHeaderLayoutMap = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerAction = __importStar(__webpack_require__(/*! ../../../header/action */ \"./header/action.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./list-grid/layout-map/internal/utils.js\");\n\nlet seqId = 0;\n\nclass SimpleHeaderLayoutMap {\n  constructor(header) {\n    this.bodyRowCount = 1;\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    this._columns = [];\n    this._headerCellIds = [];\n    this._headerObjects = this._addHeaders(0, header, []);\n    this._headerObjectMap = this._headerObjects.reduce((o, e) => {\n      o[e.id] = e;\n      return o;\n    }, {});\n  }\n\n  get columnWidths() {\n    return this._columns;\n  }\n\n  get headerRowCount() {\n    return this._headerCellIds.length;\n  }\n\n  get colCount() {\n    return this._columns.length;\n  }\n\n  get headerObjects() {\n    return this._headerObjects;\n  }\n\n  get columnObjects() {\n    return this._columns;\n  }\n\n  getCellId(col, row) {\n    if (this.headerRowCount <= row) {\n      return this._columns[col].id;\n    } //in header\n\n\n    return this._headerCellIds[row][col];\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._headerObjectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, _row) {\n    return this._columns[col] || this._emptyDataCache.getBody(col, 0);\n  }\n\n  getBodyLayoutRangeById(id) {\n    for (let col = 0; col < this.colCount; col++) {\n      if (id === this._columns[col].id) {\n        return {\n          start: {\n            col,\n            row: 0\n          },\n          end: {\n            col,\n            row: 0\n          }\n        };\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    const result = {\n      start: {\n        col,\n        row\n      },\n      end: {\n        col,\n        row\n      }\n    };\n\n    if (this.headerRowCount <= row) {\n      return result;\n    } //in header\n\n\n    const id = this.getCellId(col, row);\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < this.colCount; c++) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = row - 1; r >= 0; r--) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.start.row = r;\n    }\n\n    for (let r = row + 1; r < this.headerRowCount; r++) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.end.row = r;\n    }\n\n    return result;\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      return row - this.headerRowCount;\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index;\n  }\n\n  _addHeaders(row, header, roots) {\n    const results = [];\n\n    const rowCells = this._headerCellIds[row] || this._newRow(row);\n\n    header.forEach(hd => {\n      const col = this._columns.length;\n      const id = seqId++;\n      const cell = {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        headerIcon: hd.headerIcon,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n      results[id] = cell;\n      rowCells[col] = id;\n\n      for (let r = row - 1; r >= 0; r--) {\n        this._headerCellIds[r][col] = roots[r];\n      }\n\n      if (hd.columns) {\n        this._addHeaders(row + 1, hd.columns, [...roots, id]).forEach(c => results.push(c));\n      } else {\n        const colDef = hd;\n\n        this._columns.push({\n          id: seqId++,\n          field: colDef.field,\n          width: colDef.width,\n          minWidth: colDef.minWidth,\n          maxWidth: colDef.maxWidth,\n          icon: colDef.icon,\n          message: colDef.message,\n          columnType: columns.type.of(colDef.columnType),\n          action: columns.action.of(colDef.action),\n          style: colDef.style,\n          define: colDef\n        });\n\n        for (let r = row + 1; r < this._headerCellIds.length; r++) {\n          this._headerCellIds[r][col] = id;\n        }\n      }\n    });\n    return results;\n  }\n\n  _newRow(row) {\n    const newRow = this._headerCellIds[row] = [];\n\n    if (!this._columns.length) {\n      return newRow;\n    }\n\n    const prev = this._headerCellIds[row - 1];\n\n    for (let col = 0; col < prev.length; col++) {\n      newRow[col] = prev[col];\n    }\n\n    return newRow;\n  }\n\n}\n\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\n\n/***/ }),\n\n/***/ \"./list-grid/layout-map/internal/utils.js\":\n/*!************************************************!*\\\n  !*** ./list-grid/layout-map/internal/utils.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ../../../columns */ \"./columns.js\"));\n\nconst headerType = __importStar(__webpack_require__(/*! ../../../header/type */ \"./header/type.js\"));\n\nlet seqId = -1; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyHeaderData() {\n  return {\n    id: seqId--,\n    define: {},\n    headerType: headerType.of(null) // default\n\n  };\n}\n\nexports.newEmptyHeaderData = newEmptyHeaderData; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyColumnData() {\n  return {\n    id: seqId--,\n    define: {},\n    columnType: columns.type.of(null),\n    style: null\n  };\n}\n\nexports.newEmptyColumnData = newEmptyColumnData;\n\nclass EmptyDataCache {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.headers = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.columns = [];\n  }\n\n  getHeader(col, row) {\n    const rows = this.headers[row] || (this.headers[row] = []);\n    return rows[col] || (rows[col] = newEmptyHeaderData());\n  }\n\n  getBody(col, row) {\n    const rows = this.columns[row] || (this.columns[row] = []);\n    return rows[col] || (rows[col] = newEmptyColumnData());\n  }\n\n}\n\nexports.EmptyDataCache = EmptyDataCache;\n\n/***/ }),\n\n/***/ \"./main.js\":\n/*!*****************!*\\\n  !*** ./main.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\n\nconst columns = __importStar(__webpack_require__(/*! ./columns */ \"./columns.js\"));\n\nexports.columns = columns;\n\nconst core = __importStar(__webpack_require__(/*! ./core */ \"./core.js\"));\n\nexports.core = core;\n\nconst data = __importStar(__webpack_require__(/*! ./data */ \"./data.js\"));\n\nexports.data = data;\n\nconst headers = __importStar(__webpack_require__(/*! ./headers */ \"./headers.js\"));\n\nexports.headers = headers;\n\nconst icons = __importStar(__webpack_require__(/*! ./icons */ \"./icons.js\"));\n\nconst register = __importStar(__webpack_require__(/*! ./register */ \"./register.js\"));\n\nexports.register = register;\n\nconst themes = __importStar(__webpack_require__(/*! ./themes */ \"./themes.js\"));\n\nexports.themes = themes;\n\nconst tools = __importStar(__webpack_require__(/*! ./tools */ \"./tools.js\"));\n\nexports.tools = tools;\n\nconst ListGrid_1 = __webpack_require__(/*! ./ListGrid */ \"./ListGrid.js\");\n\nObject.defineProperty(exports, \"ListGrid\", {\n  enumerable: true,\n  get: function () {\n    return ListGrid_1.ListGrid;\n  }\n});\n\nconst GridCanvasHelper_1 = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\nObject.defineProperty(exports, \"GridCanvasHelper\", {\n  enumerable: true,\n  get: function () {\n    return GridCanvasHelper_1.GridCanvasHelper;\n  }\n});\n\nvar get_internal_1 = __webpack_require__(/*! ./get-internal */ \"./get-internal.js\");\n\nObject.defineProperty(exports, \"_getInternal\", {\n  enumerable: true,\n  get: function () {\n    return get_internal_1.getInternal;\n  }\n});\n/** @private */\n\nfunction getIcons() {\n  return icons.get();\n}\n\nexports.getIcons = getIcons; // backward compatibility\n\nexports.default = {\n  core,\n  tools,\n  // impl Grids\n  ListGrid: ListGrid_1.ListGrid,\n  // objects\n  columns,\n  headers,\n  themes,\n  data,\n  // helper\n  GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\n  //plugin registers\n  register,\n\n  get icons() {\n    return getIcons();\n  }\n\n}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"default\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getDefault();\n  },\n\n  set(defaultTheme) {\n    themes.setDefault(defaultTheme);\n  }\n\n}); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"choices\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getChoices();\n  }\n\n});\n\n/***/ }),\n\n/***/ \"./plugins/icons.js\":\n/*!**************************!*\\\n  !*** ./plugins/icons.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.icons = void 0;\nexports.icons = {};\n\n/***/ }),\n\n/***/ \"./plugins/themes.js\":\n/*!***************************!*\\\n  !*** ./plugins/themes.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.themes = void 0;\nexports.themes = {};\n\n/***/ }),\n\n/***/ \"./register.js\":\n/*!*********************!*\\\n  !*** ./register.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.icons = exports.icon = exports.theme = void 0;\n\nconst icons_1 = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nconst themes_1 = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\nfunction register(obj, name, value) {\n  const old = obj[name];\n  obj[name] = value;\n  return old;\n}\n\nfunction registers(obj, values) {\n  for (const k in values) {\n    obj[k] = values[k];\n  }\n}\n\nfunction theme(name, theme) {\n  if (theme != null) {\n    return register(themes_1.themes, name, theme);\n  } else {\n    return themes_1.themes[name];\n  }\n}\n\nexports.theme = theme;\n\nfunction icon(name, icon) {\n  if (icon != null) {\n    return register(icons_1.icons, name, icon);\n  } else {\n    return icons_1.icons[name];\n  }\n}\n\nexports.icon = icon;\n\nfunction icons(icons) {\n  return registers(icons_1.icons, icons);\n}\n\nexports.icons = icons;\n\n/***/ }),\n\n/***/ \"./themes.js\":\n/*!*******************!*\\\n  !*** ./themes.js ***!\n  \\*******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\n\nconst utils_1 = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\nconst theme_1 = __webpack_require__(/*! ./themes/theme */ \"./themes/theme.js\");\n\nconst BASIC_1 = __importDefault(__webpack_require__(/*! ./themes/BASIC */ \"./themes/BASIC.js\"));\n\nconst MATERIAL_DESIGN_1 = __importDefault(__webpack_require__(/*! ./themes/MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\"));\n\nconst themes_1 = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\nconst builtin = {\n  BASIC: exports.BASIC,\n  MATERIAL_DESIGN: exports.MATERIAL_DESIGN\n};\nlet defTheme = exports.MATERIAL_DESIGN;\nexports.theme = {\n  Theme: theme_1.Theme\n};\n\nfunction of(value) {\n  if (!value) {\n    return null;\n  }\n\n  if (typeof value === \"string\") {\n    const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\n\n    if (t) {\n      return t;\n    }\n\n    return null;\n  }\n\n  if (value instanceof theme_1.Theme) {\n    return value;\n  }\n\n  return new theme_1.Theme(value);\n}\n\nexports.of = of;\n\nfunction getDefault() {\n  return defTheme;\n}\n\nexports.getDefault = getDefault;\n\nfunction setDefault(defaultTheme) {\n  defTheme = of(defaultTheme) || defTheme;\n}\n\nexports.setDefault = setDefault;\n\nfunction getChoices() {\n  return (0, utils_1.extend)(builtin, themes_1.themes);\n}\n\nexports.getChoices = getChoices;\n\n/***/ }),\n\n/***/ \"./themes/BASIC.js\":\n/*!*************************!*\\\n  !*** ./themes/BASIC.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction DEFAULT_BG_COLOR(args) {\n  const {\n    row,\n    grid\n  } = args;\n\n  if (row < grid.frozenRowCount) {\n    return \"#FFF\";\n  }\n\n  const index = grid.getRecordIndexByRow(row);\n\n  if (!(index & 1)) {\n    return \"#FFF\";\n  } else {\n    return \"#F6F6F6\";\n  }\n}\n\nconst cacheLinearGradient = {};\n\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n  let stop;\n  const stopsKey = [];\n\n  for (stop in colorStops) {\n    stopsKey.push(`${stop}@${colorStops[stop]}`);\n  }\n\n  const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\n  const ret = cacheLinearGradient[key];\n\n  if (ret) {\n    return ret;\n  }\n\n  const grad = context.createLinearGradient(left, top, left, bottom);\n\n  for (stop in colorStops) {\n    grad.addColorStop(Number(stop), colorStops[stop]);\n  }\n\n  return cacheLinearGradient[key] = grad;\n}\n\nfunction FROZEN_ROWS_BG_COLOR(args) {\n  const {\n    col,\n    grid,\n    grid: {\n      frozenRowCount\n    },\n    context\n  } = args;\n  const {\n    left,\n    top\n  } = grid.getCellRelativeRect(col, 0);\n  const {\n    bottom\n  } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n  return getLinearGradient(context, left, top, left, bottom, {\n    0: \"#FFF\",\n    1: \"#D3D3D3\"\n  });\n}\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\n\n\nexports.default = {\n  color: \"#000\",\n  // frozenRowsColor: '#000',\n  defaultBgColor: DEFAULT_BG_COLOR,\n  frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: \"#000\",\n  // frozenRowsBorderColor: '#000',\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"#000\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"#000\",\n    uncheckBorderColor: \"#000\",\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"#FFF\"\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  indicators: {\n    topLeftColor: \"#000\"\n  },\n  underlayBackgroundColor: \"#F6F6F6\"\n};\n\n/***/ }),\n\n/***/ \"./themes/MATERIAL_DESIGN.js\":\n/*!***********************************!*\\\n  !*** ./themes/MATERIAL_DESIGN.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n  const {\n    row,\n    grid: {\n      frozenRowCount\n    }\n  } = args;\n\n  if (frozenRowCount - 1 === row) {\n    return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\n  } else {\n    return [\"#f2f2f2\"];\n  }\n}\n\nfunction BORDER_COLOR(args) {\n  const {\n    col,\n    row,\n    grid\n  } = args;\n  const {\n    colCount,\n    frozenColCount,\n    recordRowCount\n  } = grid;\n  let top = \"#ccc7c7\";\n  let bottom = \"#ccc7c7\";\n\n  if (recordRowCount > 1) {\n    const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\n    const endRow = startRow + recordRowCount - 1;\n\n    if (startRow !== row) {\n      top = null;\n    }\n\n    if (endRow !== row) {\n      bottom = null;\n    }\n  }\n\n  if (frozenColCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  if (colCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  return [top, null, bottom, null];\n}\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\n\n\nexports.default = {\n  color: \"rgba(0, 0, 0, 0.87)\",\n  frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\n  defaultBgColor: \"#FFF\",\n  // frozenRowsBgColor: '#FFF',\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: BORDER_COLOR,\n  frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    // uncheckBgColor: '#FFF',\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"rgba(0, 0, 0, 0.26)\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"rgb(76, 73, 72)\",\n    uncheckBorderColor: \"rgb(189, 189, 189)\" // uncheckBgColor: \"#FFF\",\n    // checkBgColor: \"#FFF\",\n\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  indicators: {\n    topLeftColor: \"#ccc7c7\"\n  },\n  underlayBackgroundColor: \"#FFF\"\n};\n\n/***/ }),\n\n/***/ \"./themes/theme.js\":\n/*!*************************!*\\\n  !*** ./themes/theme.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Theme = void 0;\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst symbolManager_1 = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\"); //private symbol\n\n\nconst _ = (0, symbolManager_1.get)();\n\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\n  const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\n\n  if (value) {\n    return value;\n  }\n\n  if (!defNames) {\n    return value || defaultValue;\n  }\n\n  const getChainSafeWithConvert = convertForSuper ? (obj, ...names) => {\n    const value = (0, utils_1.getChainSafe)(obj, ...names);\n\n    if (!value) {\n      return value;\n    }\n\n    return convertForSuper(value);\n  } : utils_1.getChainSafe;\n  return getChainSafeWithConvert(obj, ...defNames) || getChainSafeWithConvert(superObj, ...defNames) || defaultValue;\n}\n\nclass Theme {\n  constructor(obj, superTheme) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this._messages = null;\n    this._indicators = null;\n    this[_] = {\n      obj,\n      superTheme: superTheme\n    };\n  }\n\n  get font() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"font\"]);\n  }\n\n  get underlayBackgroundColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\n  } // color\n\n\n  get color() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"color\"]);\n  }\n\n  get frozenRowsColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\n  } // background\n\n\n  get defaultBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"defaultBgColor\"]);\n  }\n\n  get frozenRowsBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get selectionBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get highlightBgColor() {\n    if (this.hasProperty([\"highlightBgColor\"])) {\n      const {\n        obj,\n        superTheme\n      } = this[_];\n      return getProp(obj, superTheme, [\"highlightBgColor\"]);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return args => {\n      const color = args.row < args.grid.frozenRowCount ? this.frozenRowsBgColor : this.defaultBgColor;\n\n      if (typeof color === \"function\") {\n        return color(args);\n      }\n\n      return color;\n    };\n  } // border\n\n\n  get borderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"borderColor\"]);\n  }\n\n  get frozenRowsBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\n  }\n\n  get highlightBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\n  }\n\n  get checkbox() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get borderColor() {\n        return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      }\n\n    });\n\n    function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  get radioButton() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getRadioButtonProp(\"checkColor\", [\"color\"]);\n      },\n\n      get uncheckBorderColor() {\n        return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get checkBorderColor() {\n        return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get uncheckBgColor() {\n        return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\n      }\n\n    });\n\n    function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  get button() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._button || (this._button = {\n      get color() {\n        return getButtonProp(\"color\", [\"color\"]);\n      },\n\n      get bgColor() {\n        return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\n      }\n\n    });\n\n    function getButtonProp(prop, defNames) {\n      return getProp(obj, superTheme, [\"button\", prop], defNames);\n    }\n  }\n\n  get header() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\n      }\n\n    });\n  }\n\n  get messages() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._messages || (this._messages = {\n      get infoBgColor() {\n        return getMessageProp(\"infoBgColor\");\n      },\n\n      get errorBgColor() {\n        return getMessageProp(\"errorBgColor\");\n      },\n\n      get warnBgColor() {\n        return getMessageProp(\"warnBgColor\");\n      },\n\n      get boxWidth() {\n        return getMessageProp(\"boxWidth\");\n      },\n\n      get markHeight() {\n        return getMessageProp(\"markHeight\");\n      }\n\n    });\n\n    function getMessageProp(prop) {\n      return getProp(obj, superTheme, [\"messages\", prop]);\n    }\n  }\n\n  get indicators() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._indicators || (this._indicators = {\n      get topLeftColor() {\n        return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get topLeftSize() {\n        return getIndicatorsProp(\"topLeftSize\");\n      },\n\n      get topRightColor() {\n        return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get topRightSize() {\n        return getIndicatorsProp(\"topRightSize\");\n      },\n\n      get bottomRightColor() {\n        return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get bottomRightSize() {\n        return getIndicatorsProp(\"bottomRightSize\");\n      },\n\n      get bottomLeftColor() {\n        return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\n      },\n\n      get bottomLeftSize() {\n        return getIndicatorsProp(\"bottomLeftSize\");\n      }\n\n    });\n\n    function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\n      return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\n    }\n  }\n\n  hasProperty(names) {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\n  }\n\n  extends(obj) {\n    return new Theme(obj, this);\n  }\n\n}\n\nexports.Theme = Theme;\n\nfunction hasThemeProperty(obj, names) {\n  if (obj instanceof Theme) {\n    return obj.hasProperty(names);\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let o = obj;\n\n    if (!o) {\n      return false;\n    }\n\n    for (let index = 0; index < names.length; index++) {\n      const name = names[index];\n      o = o[name];\n\n      if (!o) {\n        return false;\n      }\n    }\n\n    return !!o;\n  }\n}\n\nfunction colorsToColor(colors) {\n  if (typeof colors === \"function\") {\n    return arg => {\n      const val = colors(arg);\n      return val ? colorsArrayToColor(val) : val;\n    };\n  }\n\n  return colorsArrayToColor(colors);\n\n  function colorsArrayToColor( // eslint-disable-next-line @typescript-eslint/ban-types\n  colors) {\n    if (!Array.isArray(colors)) {\n      return colors;\n    }\n\n    return colors.find(Boolean) || undefined;\n  }\n}\n\n/***/ }),\n\n/***/ \"./tools.js\":\n/*!******************!*\\\n  !*** ./tools.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canvashelper = void 0;\n\nconst canvashelper = __importStar(__webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\"));\n\nexports.canvashelper = canvashelper;\n\n/***/ }),\n\n/***/ \"./tools/canvashelper.js\":\n/*!*******************************!*\\\n  !*** ./tools/canvashelper.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\n\nconst canvases_1 = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\nconst {\n  ceil,\n  PI\n} = Math;\n\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n  function strokeRectLines(positions) {\n    for (let i = 0; i < borderColors.length; i++) {\n      const color = borderColors[i];\n      const preColor = borderColors[i - 1];\n\n      if (color) {\n        if (preColor !== color) {\n          if (preColor) {\n            ctx.strokeStyle = preColor;\n            ctx.stroke();\n          }\n\n          const pos1 = positions[i];\n          ctx.beginPath();\n          ctx.moveTo(pos1.x, pos1.y);\n        }\n\n        const pos2 = positions[i + 1];\n        ctx.lineTo(pos2.x, pos2.y);\n      } else {\n        if (preColor) {\n          ctx.strokeStyle = preColor;\n          ctx.stroke();\n        }\n      }\n    }\n\n    const preColor = borderColors[borderColors.length - 1];\n\n    if (preColor) {\n      ctx.strokeStyle = preColor;\n      ctx.stroke();\n    }\n  }\n\n  if (borderColors[0] === borderColors[1] && borderColors[0] === borderColors[2] && borderColors[0] === borderColors[3]) {\n    if (borderColors[0]) {\n      ctx.strokeStyle = borderColors[0];\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    strokeRectLines([{\n      x: left,\n      y: top\n    }, {\n      x: left + width,\n      y: top\n    }, {\n      x: left + width,\n      y: top + height\n    }, {\n      x: left,\n      y: top + height\n    }, {\n      x: left,\n      y: top\n    }]);\n  }\n}\n\nexports.strokeColorsRect = strokeColorsRect;\n\nfunction roundRect(ctx, left, top, width, height, radius) {\n  ctx.beginPath();\n  ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n  ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n  ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n  ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n  ctx.closePath();\n}\n\nexports.roundRect = roundRect;\n\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.fill();\n}\n\nexports.fillRoundRect = fillRoundRect;\n\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.stroke();\n}\n\nexports.strokeRoundRect = strokeRoundRect;\n\nfunction fillCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.fill();\n}\n\nexports.fillCircle = fillCircle;\n\nfunction strokeCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.stroke();\n}\n\nexports.strokeCircle = strokeCircle;\n\nfunction fillTextRect(ctx, text, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\n      offset,\n      padding\n    });\n    ctx.fillText(text, pos.x, pos.y);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fillTextRect = fillTextRect;\n\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\n      offset,\n      padding\n    });\n    ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawInlineImageRect = drawInlineImageRect;\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction measureCheckbox(ctx) {\n  return {\n    width: (0, canvases_1.getFontSize)(ctx, null).width\n  };\n}\n\nexports.measureCheckbox = measureCheckbox;\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction measureRadioButton(ctx) {\n  return {\n    width: (0, canvases_1.getFontSize)(ctx, null).width\n  };\n}\n\nexports.measureRadioButton = measureRadioButton;\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction drawCheckbox(ctx, x, y, check, {\n  uncheckBgColor = \"#FFF\",\n  checkBgColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  boxSize = measureCheckbox(ctx).width\n} = {}) {\n  const checkPoint = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\n\n    if (check) {\n      ctx.lineWidth = ceil(boxSize / 10);\n      ctx.strokeStyle = uncheckBgColor;\n      let leftWidth = boxSize / 4;\n      let rightWidth = boxSize / 2 * 0.9;\n      const leftLeftPos = x + boxSize * 0.2;\n      const leftTopPos = y + boxSize / 2;\n\n      if (checkPoint < 0.5) {\n        leftWidth *= checkPoint * 2;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(leftLeftPos, leftTopPos);\n      ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n\n      if (checkPoint > 0.5) {\n        if (checkPoint < 1) {\n          rightWidth *= (checkPoint - 0.5) * 2;\n        }\n\n        ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n      }\n\n      ctx.stroke();\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawCheckbox = drawCheckbox;\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\n\nfunction drawRadioButton(ctx, x, y, check, {\n  checkColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  bgColor = \"#FFF\",\n  boxSize = measureRadioButton(ctx).width\n} = {}) {\n  const ratio = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\n\n    if (check) {\n      const checkSize = size * ratio / 2;\n      const padding = (size - checkSize) / 2;\n      ctx.fillStyle = checkColor;\n      fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawRadioButton = drawRadioButton;\n/**\r\n * draw Button\r\n */\n\nfunction drawButton(ctx, left, top, width, height, option = {}) {\n  const {\n    backgroundColor = \"#FFF\",\n    bgColor = backgroundColor,\n    radius = 4,\n    shadow = {}\n  } = option;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n\n    if (shadow) {\n      const {\n        color = \"rgba(0, 0, 0, 0.24)\",\n        blur = 1,\n        offsetX = 0,\n        offsetY = 2,\n        offset: {\n          x: ox = offsetX,\n          y: oy = offsetY\n        } = {}\n      } = shadow;\n      ctx.shadowColor = color;\n      ctx.shadowBlur = blur; //\n\n      ctx.shadowOffsetX = ox;\n      ctx.shadowOffsetY = oy;\n    }\n\n    fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawButton = drawButton;\n\n/***/ }),\n\n/***/ \"./tooltip/BaseTooltip.js\":\n/*!********************************!*\\\n  !*** ./tooltip/BaseTooltip.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseTooltip = void 0;\n\nclass BaseTooltip {\n  constructor(grid) {\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachTooltipElement();\n\n    if (this._tooltipElement) {\n      this._tooltipElement.dispose();\n    }\n\n    this._tooltipElement = undefined;\n  }\n\n  _getTooltipElement() {\n    if (this._tooltipElement) {\n      return this._tooltipElement;\n    }\n\n    return this._tooltipElement = this.createTooltipElementInternal();\n  }\n\n  attachTooltipElement(col, row, content) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.attach(this._grid, col, row, content);\n  }\n\n  moveTooltipElement(col, row) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.move(this._grid, col, row);\n  }\n\n  detachTooltipElement() {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement._detach();\n  }\n\n}\n\nexports.BaseTooltip = BaseTooltip;\n\n/***/ }),\n\n/***/ \"./tooltip/Tooltip.js\":\n/*!****************************!*\\\n  !*** ./tooltip/Tooltip.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tooltip = void 0;\n\nconst BaseTooltip_1 = __webpack_require__(/*! ./BaseTooltip */ \"./tooltip/BaseTooltip.js\");\n\nconst TooltipElement_1 = __webpack_require__(/*! ./internal/TooltipElement */ \"./tooltip/internal/TooltipElement.js\");\n\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\n  createTooltipElementInternal() {\n    return new TooltipElement_1.TooltipElement();\n  }\n\n}\n\nexports.Tooltip = Tooltip;\n\n/***/ }),\n\n/***/ \"./tooltip/TooltipHandler.js\":\n/*!***********************************!*\\\n  !*** ./tooltip/TooltipHandler.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TooltipHandler = void 0;\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(/*! ../list-grid/LG_EVENT_TYPE */ \"./list-grid/LG_EVENT_TYPE.js\");\n\nconst Tooltip_1 = __webpack_require__(/*! ./Tooltip */ \"./tooltip/Tooltip.js\");\n\nconst utils_1 = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nconst TOOLTIP_INSTANCE_FACTORY = {\n  \"overflow-text\"(grid) {\n    return new Tooltip_1.Tooltip(grid);\n  }\n\n};\n\nfunction getTooltipInstanceInfo( // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngrid, col, row) {\n  //\n  // overflow text tooltip\n  const overflowText = grid.getCellOverflowText(col, row);\n\n  if (overflowText) {\n    return {\n      type: \"overflow-text\",\n      content: overflowText\n    };\n  }\n\n  return null;\n}\n\nclass TooltipHandler {\n  constructor(grid) {\n    this._grid = grid;\n    this._tooltipInstances = {};\n\n    this._bindGridEvent(grid);\n  }\n\n  dispose() {\n    const tooltipInstances = this._tooltipInstances;\n\n    for (const k in tooltipInstances) {\n      tooltipInstances[k].dispose();\n    } // @ts-expect-error -- ignore\n\n\n    delete this._tooltipInstances;\n    this._attachInfo = null;\n  }\n\n  _attach(col, row) {\n    const info = this._attachInfo;\n\n    const instanceInfo = this._getTooltipInstanceInfo(col, row);\n\n    if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\n      info.instance.detachTooltipElement();\n      this._attachInfo = null;\n    }\n\n    if (!instanceInfo) {\n      return;\n    }\n\n    const {\n      instance\n    } = instanceInfo;\n    instance.attachTooltipElement(col, row, instanceInfo.content);\n\n    const range = this._grid.getCellRange(col, row);\n\n    this._attachInfo = {\n      range,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveTooltipElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachTooltipElement();\n    this._attachInfo = null;\n  }\n\n  _isAttachCell(col, row) {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return false;\n    }\n\n    return (0, utils_1.cellInRange)(info.range, col, row);\n  }\n\n  _bindGridEvent(grid) {\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.col, e.row)) {\n          return;\n        }\n      }\n\n      this._attach(e.col, e.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.related.col, e.related.row)) {\n          return;\n        }\n      }\n\n      this._detach();\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const info = this._attachInfo;\n\n      if (!info) {\n        return;\n      }\n\n      this._move(info.range.start.col, info.range.start.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n\n        this._attach(e.col, e.row);\n      }\n    });\n  }\n\n  _getTooltipInstanceInfo(col, row) {\n    const grid = this._grid;\n    const tooltipInstances = this._tooltipInstances;\n    const info = getTooltipInstanceInfo(grid, col, row);\n\n    if (!info) {\n      return null;\n    }\n\n    const {\n      type\n    } = info;\n    const instance = tooltipInstances[type] || (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\n    return {\n      instance,\n      type,\n      content: info.content\n    };\n  }\n\n}\n\nexports.TooltipHandler = TooltipHandler;\n\n/***/ }),\n\n/***/ \"./tooltip/internal/TooltipElement.js\":\n/*!********************************************!*\\\n  !*** ./tooltip/internal/TooltipElement.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TooltipElement = void 0;\n\nconst EventHandler_1 = __webpack_require__(/*! ../../internal/EventHandler */ \"./internal/EventHandler.js\");\n\nconst dom_1 = __webpack_require__(/*! ../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createTooltipDomElement() {\n  __webpack_require__(/*! @/tooltip/internal/TooltipElement.css */ \"../src/js/tooltip/internal/TooltipElement.css\");\n\n  const rootElement = (0, dom_1.createElement)(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = (0, dom_1.createElement)(\"pre\", {\n    classList: [CONTENT_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass TooltipElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createTooltipDomElement();\n    this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n    }\n\n    this._handler.dispose(); // @ts-expect-error -- ignore\n\n\n    delete this._rootElement; // @ts-expect-error -- ignore\n\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, content) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = content;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      // rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      height: offsetHeight,\n      width: offsetWidth,\n      left: elementLeft,\n      right: elementRight\n    } = element.getBoundingClientRect();\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    const cellCenter = left + width / 2;\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${cellCenter.toFixed()}px`;\n    rootElement.style.minWidth = `${width.toFixed()}px`;\n    const maxWidthForLeft = (elementLeft + cellCenter) * 2;\n    const winWidth = window.innerWidth;\n    const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\n    const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\n    rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.TooltipElement = TooltipElement;\n\n/***/ })\n\n/******/ });\n});\n}).call(typeof global !== \"undefined\" ? global : window, typeof global !== \"undefined\" ? global : window);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    var _b, _c, _d, _e, _f, _g, _h;\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row)) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        helper.border(context, option);\r\n        if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\r\n            }\r\n            if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" &&\r\n                ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\r\n                borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n            }\r\n        }\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    grid.frozenRowCount = layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...super.bindGridEvent(grid, cellId),\r\n            grid.listen('click_cell', (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style, col, row) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef, col, row);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n"],"sourceRoot":""}