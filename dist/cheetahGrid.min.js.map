{"version":3,"sources":["cheetahGrid.min/webpack/universalModuleDefinition","cheetahGrid.min/webpack/bootstrap","cheetahGrid.min/./internal/utils.js","cheetahGrid.min/./internal/symbolManager.js","cheetahGrid.min/node_modules/css-loader/dist/runtime/api.js","cheetahGrid.min/./internal/EventHandler.js","cheetahGrid.min/./core/DG_EVENT_TYPE.js","cheetahGrid.min/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid.min/./columns/style/Style.js","cheetahGrid.min/./columns/type/columnUtils.js","cheetahGrid.min/./columns/type/BaseColumn.js","cheetahGrid.min/./internal/canvases.js","cheetahGrid.min/./columns/action/action-utils.js","cheetahGrid.min/./columns/action/Editor.js","cheetahGrid.min/./internal/dom.js","cheetahGrid.min/./columns/type/Column.js","cheetahGrid.min/./header/type/BaseHeader.js","cheetahGrid.min/./element/Inline.js","cheetahGrid.min/./columns.js","cheetahGrid.min/./internal/animate.js","cheetahGrid.min/./columns/style/BaseStyle.js","cheetahGrid.min/./core/EventTarget.js","cheetahGrid.min/./columns/style/StdBaseStyle.js","cheetahGrid.min/./internal/Rect.js","cheetahGrid.min/./header/type.js","cheetahGrid.min/./columns/action/actionBind.js","cheetahGrid.min/./columns/action/BaseAction.js","cheetahGrid.min/./columns/style.js","cheetahGrid.min/./internal/icons.js","cheetahGrid.min/./columns/utils/index.js","cheetahGrid.min/./internal/calc.js","cheetahGrid.min/./internal/paste-utils.js","cheetahGrid.min/./data/DataSource.js","cheetahGrid.min/./header/action.js","cheetahGrid.min/./header/action/BaseAction.js","cheetahGrid.min/./header/style.js","cheetahGrid.min/./header/style/BaseStyle.js","cheetahGrid.min/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid.min/./internal/path2DManager.js","cheetahGrid.min/./themes.js","cheetahGrid.min/./columns/message/messageUtils.js","cheetahGrid.min/./columns/message/BaseMessage.js","cheetahGrid.min/./columns/message/internal/MessageElement.js","cheetahGrid.min/./list-grid/LG_EVENT_TYPE.js","cheetahGrid.min/./columns/action/Action.js","cheetahGrid.min/./columns/action/BaseInputEditor.js","cheetahGrid.min/./columns/action/internal/input-value-handler.js","cheetahGrid.min/./columns/type.js","cheetahGrid.min/./columns/style/ButtonStyle.js","cheetahGrid.min/./columns/style/CheckStyle.js","cheetahGrid.min/./columns/style/IconStyle.js","cheetahGrid.min/./columns/style/ImageStyle.js","cheetahGrid.min/./columns/style/MenuStyle.js","cheetahGrid.min/./columns/style/MultilineTextStyle.js","cheetahGrid.min/./columns/style/NumberStyle.js","cheetahGrid.min/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.min/./columns/style/RadioStyle.js","cheetahGrid.min/./internal/imgs.js","cheetahGrid.min/./internal/menu-items.js","cheetahGrid.min/./core/DrawGrid.js","cheetahGrid.min/./internal/style.js","cheetahGrid.min/./data.js","cheetahGrid.min/./internal/sort.js","cheetahGrid.min/./header/action/actionBind.js","cheetahGrid.min/./header/style/CheckHeaderStyle.js","cheetahGrid.min/./header/style/StdTextBaseStyle.js","cheetahGrid.min/./header/style/MultilineTextHeaderStyle.js","cheetahGrid.min/./header/style/SortHeaderStyle.js","cheetahGrid.min/./header/style/Style.js","cheetahGrid.min/./element/inlines.js","cheetahGrid.min/./icons.js","cheetahGrid.min/./plugins/icons.js","cheetahGrid.min/./element/InlineDrawer.js","cheetahGrid.min/./internal/fonts.js","cheetahGrid.min/./element/InlineImage.js","cheetahGrid.min/./plugins/themes.js","cheetahGrid.min/./tools/canvashelper.js","cheetahGrid.min/./list-grid/layout-map/internal/utils.js","cheetahGrid.min/./GridCanvasHelper.js","cheetahGrid.min/./internal/color.js","cheetahGrid.min/./main.js","cheetahGrid.min/./columns/action.js","cheetahGrid.min/./columns/action/ButtonAction.js","cheetahGrid.min/node_modules/webpack/buildin/global.js","cheetahGrid.min/./columns/action/CheckEditor.js","cheetahGrid.min/./columns/action/InlineInputEditor.js","cheetahGrid.min/./columns/action/internal/InlineInputElement.js","cheetahGrid.min/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid.min/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid.min/./columns/action/InlineMenuEditor.js","cheetahGrid.min/./columns/action/internal/InlineMenuElement.js","cheetahGrid.min/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid.min/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid.min/./columns/type/BranchGraphColumn.js","cheetahGrid.min/./columns/indicator/handlers.js","cheetahGrid.min/./columns/indicator/triangle.js","cheetahGrid.min/./columns/style/BranchGraphStyle.js","cheetahGrid.min/./columns/type/ButtonColumn.js","cheetahGrid.min/./columns/type/CheckColumn.js","cheetahGrid.min/./columns/type/IconColumn.js","cheetahGrid.min/./columns/type/ImageColumn.js","cheetahGrid.min/./internal/LRUCache.js","cheetahGrid.min/./columns/type/MenuColumn.js","cheetahGrid.min/./columns/type/MultilineTextColumn.js","cheetahGrid.min/./columns/type/NumberColumn.js","cheetahGrid.min/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.min/./columns/type/RadioColumn.js","cheetahGrid.min/./columns/action/RadioEditor.js","cheetahGrid.min/./columns/action/SmallDialogInputEditor.js","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.min/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.min/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid.min/./core.js","cheetahGrid.min/./internal/hiDPI.js","cheetahGrid.min/../src/js/internal/style.css*","cheetahGrid.min/../src/js/internal/style.css","cheetahGrid.min/./internal/NumberMap.js","cheetahGrid.min/./internal/Scrollable.js","cheetahGrid.min/./data/CachedDataSource.js","cheetahGrid.min/./data/FilterDataSource.js","cheetahGrid.min/./headers.js","cheetahGrid.min/./header/action/CheckHeaderAction.js","cheetahGrid.min/./header/action/SortHeaderAction.js","cheetahGrid.min/./header/style/StdBaseStyle.js","cheetahGrid.min/./header/type/CheckHeader.js","cheetahGrid.min/./internal/legacy/canvas/Path2DShim.js","cheetahGrid.min/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.min/./internal/legacy/canvas/PathCommands.js","cheetahGrid.min/./element/InlineIcon.js","cheetahGrid.min/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.min/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.min/./element/InlinePath2D.js","cheetahGrid.min/./element/InlineSvg.js","cheetahGrid.min/./header/type/Header.js","cheetahGrid.min/./header/type/MultilineTextHeader.js","cheetahGrid.min/./header/type/SortHeader.js","cheetahGrid.min/./register.js","cheetahGrid.min/./themes/theme.js","cheetahGrid.min/./themes/BASIC.js","cheetahGrid.min/./themes/MATERIAL_DESIGN.js","cheetahGrid.min/./tools.js","cheetahGrid.min/./ListGrid.js","cheetahGrid.min/./list-grid/layout-map/index.js","cheetahGrid.min/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid.min/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid.min/./columns/message/MessageHandler.js","cheetahGrid.min/./columns/message/ErrorMessage.js","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.min/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/MessageElement.css","cheetahGrid.min/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid.min/./columns/message/InfoMessage.js","cheetahGrid.min/./columns/message/WarningMessage.js","cheetahGrid.min/./columns/message/internal/WarningMessageElement.js","cheetahGrid.min/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid.min/./tooltip/TooltipHandler.js","cheetahGrid.min/./tooltip/Tooltip.js","cheetahGrid.min/./tooltip/BaseTooltip.js","cheetahGrid.min/./tooltip/internal/TooltipElement.js","cheetahGrid.min/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid.min/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid.min/./get-internal.js"],"names":["root","factory","window","installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","emptyFn","style","event","str","obj","browser","cellInRange","cellEquals","array","then","getIgnoreCase","getOrApply","applyChainSafe","getChainSafe","isDescendantElement","isNode","isPromise","extend","defaults","omit","each","arrayFind","arrayFindIndex","Array","find","arr","predicate","index","findIndex","undefined","length","IE","Chrome","Firefox","Edge","Safari","ua","navigator","userAgent","toLowerCase","exec","indexOf","analyzeUserAgent","fn","names","data","Boolean","source","omits","result","set","val","configurable","defs","keys","push","args","forEach","target","parentElement","callback","u","k","a","b","col","row","range","start","end","heightLimit","setReadonly","isObject","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","lastIndex","lastIndexOf","genChars","re","next","res","genWords","getMouseButtons","e","buttons","which","button","getKeyCode","keyCode","isTouchEvent","changedTouches","cancel","preventDefault","stopPropagation","toBoxArray","isArray","Function","getCheckHeaderStateId","getInlineMenuEditorStateId","getInlineInputEditorStateId","getSmallDialogInputEditorStateId","getBranchGraphColumnStateId","getColumnFadeinStateId","getButtonColumnStateId","getRadioColumnStateId","getCheckColumnStateId","getProtectedSymbol","require","global","random","cl","mem","useSourceMap","list","this","map","item","content","sourceMap","base64","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","JSON","stringify","concat","sourceURLs","sources","sourceRoot","join","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","id","_i","EventHandler","utils_1","nextId","constructor","_listeners","on","type","listener","options","addEventListener","once","off","tryWithOffEvents","removeEventListener","fire","hasListener","clear","dispose","DG_EVENT_TYPE","CLICK_CELL","DBLCLICK_CELL","DBLTAP_CELL","MOUSEDOWN_CELL","MOUSEDOWN_GRID","MOUSEUP_CELL","SELECTED_CELL","KEYDOWN","MOUSEMOVE_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","INPUT_CELL","PASTE_CELL","DELETE_CELL","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","RESIZE_COLUMN","SCROLL","FOCUS_GRID","BLUR_GRID","memo","isOldIE","document","all","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","count","css","media","references","updater","addStyle","insertStyleElement","createElement","attributes","nonce","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_index","splice","Style","StdBaseStyle_1","defaultStyle","StdBaseStyle","super","_color","color","_font","font","_padding","padding","_textOverflow","textOverflow","doChangeStyle","clone","__createBinding","k2","desc","getOwnPropertyDescriptor","writable","__setModuleDefault","v","__importStar","mod","loadIcons","icons","icon","context","helper","argIcon","toCurrentContext","iconList","toNormalizeArray","testFontLoad","BaseColumn","styleContents","BaseStyle_1","animate_1","symbolManager_1","handlers_1","COLUMN_FADEIN_STATE_ID","getFadeinState","grid","state","cells","_generateFadeinPointAction","drawInternal","drawCellBase","point","stateKey","opacity","cellState","ctx","getContext","globalAlpha","fadeinMgr","animate","activeFadeins","f","margeAnimate","option","onDrawCell","_fadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","BaseStyle","cellValue","info","_a","getRecord","getGridCanvasHelper","record","promise","msg","getMessage","Date","now","Promise","0","1","2","message","getDrawRect","time","currentContext","actStyle","of","StyleClass","convertInternal","drawMessageInternal","drawIndicatorsInternal","column","configure","isFadeinWhenCallbackInPromise","messageHandler","drawCellMessage","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","indicatorStyle","kind","getDrawIndicator","bindGridEvent","_grid","_cellId","getCopyCellValue","_cell","calcStartPosition","calcBasePosition","getFontSize","fontSizeCache","rect","width","height","offset","left","paddingLeft","right","paddingRight","top","paddingTop","bottom","paddingBottom","textAlign","textBaseline","x","y","fontName","bk","em","measureText","toggleValue","isReadOnlyRecord","isDisabledRecord","getBooleanOptionOfRecord","getRowRecord","disabled","readOnly","replace","Editor","BaseAction_1","BaseAction","_readOnly","onChangeReadOnlyInternal","tagName","classList","text","html","element","add","textContent","innerHTML","toNodeList","arg","node","nodeType","nodeName","dom","slice","toNode","isFocusable","el","tabIndex","findNextSiblingFocusable","findPrevSiblingFocusable","enableFocus","disableFocus","appendHtml","empty","inner","dataset","disableBeforeTabIndex","children","Number","previousSibling","nextSibling","Column","utils","BaseColumn_1","Style_1","getIcon","bgColor","textValue","String","BaseHeader","_options","Inline","getWidth","breakWidth","itr","candidateIndex","chars","ret","beforeWidth","pop","charWidth","beforeContent","afterContent","before","after","_content","canDraw","onReady","_callback","draw","canvashelper","offsetLeft","offsetRight","offsetTop","offsetBottom","fillTextRect","canBreak","splitIndex","breakWord","allWidth","candidate","breakAll","action","cubicBezier","x2","y2","x3","y3","step","abs","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","setTimeout","duration","easing","startedAt","easingFn","canceledFlg","createAnim","resolve","reject","anim","EventTarget_1","STYLE_EVENT_TYPE","CHANGE_STYLE","EventTarget","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","fireListeners","indicator","_","listeners","listenerData","listen","unlisten","hasListeners","_textAlign","_textBaseline","Rect","_left","_top","_width","_height","rect1","rect2","bounds","min","max","_right","_bottom","copy","intersection","x0","x1","y0","y1","contains","another","inPoint","ofCell","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","TYPES","DEFAULT","SORT","CHECK","MULTILINETEXT","headerType","toUpperCase","headerCell","sort","bindCellKeyAction","bindCellClickAction","DG_EVENT_TYPE_1","cellId","mouseOver","mouseOut","isTarget","getLayoutCellId","getElement","cursor","acceptKeys","keyboardOptions","moveCellOnEnter","sel","selection","select","_disabled","onChangeDisabledInternal","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","EVENT_TYPE","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","columnStyle","StyleClassDef","iconPropKeys","getIconProps","ICON_PROP_KEYS","doms","props","className","tagProps","body","beforeStyle","defaultView","getComputedStyle","getPropertyValue","quoted","split","part","test","quote","clientWidth","isLiga","toSimpleArray","iconProps","workData","prop","toPropArray","isIconKey","normalize","toBoolean","toPx","isWhitespace","cp","isDigit","isDot","isUnit","isLowerLetter","isUpperLetter","isLetter","createError","calc","PRECEDENCE","parse","calcStr","lex","tokens","buildBinaryExpNode","stack","op","token","shift","deep","closeIndex","beforeOp","num","unit","exp","trim","len","charCodeAt","parseSign","parseNum","sign","parseUnit","parseFloat","tokenize","toPxInternal","calcNode","full","normalizePasteValue","parsePasteRangeBoxValues","normalizedValue","values","colCount","trimOnPaste","adjustCell","cell","line","char","processQuotedCell","parseValues","rowCount","getCellValue","offsetCol","offsetRow","_b","DataSource","isFieldAssessor","field","UPDATE_LENGTH","UPDATED_LENGTH","UPDATED_ORDER","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","setField","fieldSet","ss","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","getOriginal","getField","getOriginalField","hasField","hasOriginalField","setOriginalField","order","orderFn","sortPromise","rel","results","recordPromiseCallBackInternal","fieldGet","fieldPromiseCallBackInternal","_field","_value","_record","EMPTY","CheckHeaderAction","SortHeaderAction","ACTIONS","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","headerAction","sortMethod","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdMultilineTextBaseStyle","StdTextBaseStyle_1","StdTextBaseStyle","_lineHeight","lineHeight","_autoWrapText","autoWrapText","_lineClamp","lineClamp","fill","getPath2D","Path2D","Path2DShim","pathModule","w","h","save","ud","upsideDown","offsetX","offsetY","xrate","yrate","translate","scale","path2d","restore","__importDefault","getChoices","setDefault","getDefault","theme","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","themes_1","Theme","default","builtin","defTheme","themes","defaultTheme","drawInformationMarkBox","drawExclamationMarkBox","Rect_1","boxWidth","markHeight","getRect","fillStyle","boxRect","fillRect","fillColor","fillRectWithState","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","attach","moveMessageElement","move","_detach","drawCellMessageInternal","MessageElement","EventHandler_1","dom_1","CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","_handler","rootElement","_rootElement","messageElement","createMessageDomElement","detach","_attachCell","getAttachCellsArea","getCellRange","frozenRowCount","frozenColCount","frozenRect","offsetHeight","offsetWidth","toFixed","LG_EVENT_TYPE","BEFORE_CHANGE_VALUE","CHANGED_VALUE","CHANGED_HEADER_VALUE","REJECTED_PASTE_VALUES","Action","actionBind_1","action_utils_1","_action","getState","mouseActiveCell","invalidateCellRange","onPasteCellRangeBox","onDeleteCellRangeBox","BaseInputEditor","Editor_1","open","onOpenCellInternal","input","onInputCellInternal","multi","selectionRange","normalizeValue","stopCellMoving","onChangeSelectCellInternal","selected","onGridScrollInternal","baseRect","getCellRect","rangeRect","getCellRangeRect","onSetInputAttrsInternal","doChangeValue","isSupportMultilineValue","setInputValue","handler","_e","MultilineTextColumn","MenuColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","NUMBER","RADIO","BUTTON","IMAGE","columnType","buttonBgColor","_buttonBgColor","uncheckBgColor","checkBgColor","borderColor","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","_margin","margin","appearance","_appearance","DEFAULT_BAR_COLOR","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","checkColor","uncheckBorderColor","checkBorderColor","_checkColor","_uncheckBorderColor","_checkBorderColor","getCacheOrLoad","loadImage","LRUCache_1","allCache","src","console","error","img","Image","onload","onerror","url","warn","cacheName","cacheSize","cache","put","getCacheOrLoad0","LRUCache","label","caption","normalizeToFn","DrawGrid","hiDPI","paste_utils_1","NumberMap_1","Scrollable_1","canvases_1","cancelEvent","_vibrate","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startRow","startBottom","_getRowHeight","findAfter","candidateRow","ceil","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","drawRect","cellDrawing","drawCells","_getCellDrawing","dcContext","DrawCellContext","_putCellDrawing","pCol","_delayMode","_removeCellDrawing","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","beginPath","underlayBackgroundColor","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","newWidth","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","startCol","endCol","defaultColPxWidth","has","adj","getRowHeightInternal","rowHeightsMap","endRow","getRowsHeightInternal","_getScrollHeight","getScrollHeightInternal","_onKeyDownMove","_c","shiftKey","focusCell","focus","ctrlKey","metaKey","hMove","vMove","moveCellOnTab","newCell","_moveFocusCell","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","selectAllOnCtrlA","invalidate","vDir","hDir","shiftKeyFlg","makeVisibleCell","getOffsetInvalidateCells","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","_updatedSelection","focusControl","selCol","selRow","editMode","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","clientX","pageX","scrollX","clientY","pageY","scrollY","getBoundingClientRect","_bindEvents","scrollable","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","useTouch","useTouchEnd","timeoutId","clearTimeout","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","moving","lastMoving","onKeyDown","onScroll","lastLeft","lastTop","moveX","scrollLeft","moveY","scrollTop","isFrozenCell","setFocusCursor","drawImage","redrawRect","_onScroll","onKeyDownMove","copyRange","getCopyRangeInternal","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","invalidateCell","onBlur","abstractX","abstractY","cellRect","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","touchmove","_mouseMove","passive","touchend","_mouseUp","touchcancel","mousemove","mouseup","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","getColWidth","afterSize","_storeAutoColWidthExprs","updateScroll","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_input","lastInputValue","_isComposition","_compositionEnd","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","dummyInput","pasteText","clipboardData","getData","items","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","removeNames","attr","_inputStatus","removeName","inputStatus","Selection","_sel","_focus","_start","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","_level","_list","drawing","_rectFilter","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","getSelection","rectFilter","_getRectInternal","setRectFilter","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","getCellRelativeRect","protectedSpace","initDocument","createRootElement","Scrollable","transform","alpha","NumberMap","cellTextOverflows","updateSize","bindEventsInternal","hasFocusGrid","cfg","config","newHeight","scrollHeight","scrollWidth","setScrollSize","getRowHeight","setRowHeight","_setRowHeight","setColWidth","getMaxColWidth","setMaxColWidth","maxwidth","getMinColWidth","setMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","frozenColsWidth","frozenRowsHeight","_getScrollableVisibleRect","oldEditMode","invalidateGridRect","cellsRect","invalidateTarget","visibleTop","visibleLeft","_range","getCellOverflowText","setCellOverflowText","overflowText","addDisposable","disposable","disposables","_absoluteY","_startRow","_endRow","strokeStyle","lineWidth","SCROLLBAR_SIZE","initDocumentVar","wrapper","wrapperStyle","overflow","pointerEvents","wrapperWidth","innerWidth","getScrollBarWidth","FilterDataSource","CachedDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","sortArray","createArrayPromise","plist","setArrayField","compare","old","createArray","r1","r2","dummyPromise","catch","inMouse","StdMultilineTextBaseStyle_1","_sortArrowColor","sortArrowColor","_multiline","multiline","string","buildInlines","iconOf","path2DManager","Inline_1","InlineDrawer_1","InlineIcon_1","InlineImage_1","InlinePath2D_1","InlineSvg_1","isIconConstructorOption","InlineIcon","isInlineImageConstructorOption","InlineImage","svg","InlineSvg","path","isInlineSvgConstructorOption","InlinePath2D","registeredIcons","registeredIcon","InlineDrawer","drawWidth","drawHeight","clip","pos","drawRegisteredIcon","inline","il","icons_1","builtins","_draw","_arg","load","check","loads","_testStr","fontFaceSet","fonts","legacy","testStr","ready","imgs_1","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","_loadImage","drawInlineImageRect","drawButton","drawRadioButton","drawCheckbox","measureRadioButton","measureCheckbox","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","roundRect","strokeColorsRect","PI","radius","arc","closePath","stroke","borderColors","strokeRect","positions","preColor","pos1","moveTo","pos2","lineTo","strokeRectLines","fillText","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","size","leftWidth","rightWidth","leftLeftPos","leftTopPos","ratio","checkSize","backgroundColor","shadow","blur","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","EmptyDataCache","newEmptyColumnData","newEmptyHeaderData","columns","seqId","define","headers","getHeader","rows","getBody","GridCanvasHelper","inlineUtils","color_1","INLINE_ELLIPSIS","getColor","getFont","getThemeColor","gridThemeColor","defaultThemeColor","drawInlines","inlines","drawInline","inlineWidths","reduce","inlineWidth","inlineToString","getOverflowInline","isAllowOverflow","getOverflowInlinesIndex","maxWidth","remWidth","breakWidthInlines","indexData","beforeInlines","afterInlines","truncateInlines","overflowInline","_inlineRect","trailingIcon","trailingIconInline","inlineDrawRect","trailingIconWidth","isOverflowInlines","truncInlines","sumWidth","trailingIconRect","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","diff","animElapsedTime","checkbox","positionOpt","ThemeResolver","_checkbox","_radioButton","_button","_header","_messages","_indicators","getCheckboxProp","getRadioButtonProp","getButtonProp","getMessageProp","getIndicatorsProp","_theme","createCalculator","calcWidth","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","frozenRowsColor","paddingNums","multilineText","multilines","multiInlines","rectHeight","buildedMultiInlines","procLineClamp","hasNext","procLine","lineRow","pad","buildedInline","_multiInlineRect","fillCell","defaultBgColor","fillCellWithState","getFillColorState","selectionBgColor","highlightBgColor","frozenRowsBgColor","border","startOffset","borderWithState","highlightBorderColor","frozenRowsBorderColor","buildCheckBoxInline","self","TEXT_OFFSET","CHECKBOX_OFFSET","radioButton","rgbMap","hexToNum","hex","parseInt","createRGB","g","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","colorToRGB0","3","tripleHexToRGB","g1","4","g2","5","b1","6","b2","sextupleHexToRGB","rgb","dummy","styleColor","styleColorToRGB","register","getIcons","ListGrid","tools","core","_getInternal","ListGrid_1","GridCanvasHelper_1","get_internal_1","getInternal","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action_1","ButtonAction_1","CheckEditor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","ImmutableRadioEditor","ImmutableInputEditor","INPUT","columnAction","BUTTON_COLUMN_STATE_ID","CHECK_COLUMN_STATE_ID","_state","block","elapsed","cellKey","onChange","selrange","pasteValue","doGetCellValue","isRejectValue","detail","getColumnDefine","oldValue","newValue","BaseInputEditor_1","InlineInputElement_1","globalElement","bindGridCount","attachInput","editor","InlineInputElement","detachInput","gridFocus","_classList","_type","inputValue","_selected","setInputAttrs","input_value_handler_1","_bindInputEvents","_beforePropEditor","_activeData","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","_attaching","_isActive","stopPropagationOnly","_onKeydownEnter","_onKeydownTab","api","locals","___CSS_LOADER_EXPORT___","InlineMenuElement_1","type_1","menu_items_1","attachMenu","InlineMenuElement","detachMenu","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","getColumnType","hasOptions","normalizePasteValueStr","captionOpt","opt","ITEM_CLASSNAME","findItemParents","attachElement","menu","openMenu","emptyItemEl","valueItemEl","valueindex","span","optionToLi","focusEl","focusIndex","allHeight","transformOrigin","menuClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","bodyClickListenerId","_menu","_bindMenuEvents","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","capture","closeMenu","_doChangeValue","querySelectorAll","BranchGraphStyle_1","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","j","calcCommand","command","timelineData","cmd","from","branch","to","branches","fromTargetIndex","findBranchRootIndex","branchTargetFromIndex","branchPoint","targetLine","merge","fromTargetLine","commitMerge","commitTag","calcBranchesInfo","dataSource","allData","dataIndex","getAllColumnData","_cache","BranchGraphStyle","clearCache","Map","upLineIndexKey","downLineIndexKey","branchColors","branchLineWidth","circleSize","mergeStyle","branchXPoints","tl","textWidth","calcBranchXPoints","upLineIndex","downLineIndex","pointIndex","lineCap","upX","upRect","upY","bezierCurveTo","downX","downRect","downY","renderMerge","triangle_1","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","indicators","topLeftColor","themeSize","topLeftSize","drawPath","baseLeft","baseTop","topRightColor","topRightSize","baseRight","bottomRightColor","bottomRightSize","baseBottom","bottomLeftColor","bottomLeftSize","process","DEFAULT_BRANCH_COLORS","_name","_branchColors","_circleSize","_branchLineWidth","_mergeStyle","_caption","withCaption","active","_tagName","_className","_iconWidth","iconWidth","isNaN","Infinity","repeatArray","maxHeight","calcKeepAspectRatioSize","_map","_cacheSize","idx","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","_min","_max","_formatter","formatter","rate","barMaxWidth","MARGIN","barTop","barLeft","barSize","RADIO_COLUMN_STATE_ID","utils_2","_group","group","_checkAction","checkAction","actionCell","recordStartRow","getRecordStartRowByRecordIndex","getRecordIndexByRow","girdRecords","recordRowCount","targetRow","getAllRecordsFromGrid","showData","flag","SmallDialogInputElement_1","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_dialog","createDialogElement","_bindDialogEvents","dialog","unbindProps","errorMessage","activeData","_onInputValue","bindProps","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","DrawGrid_1","setRatio","devicePixelRatio","getAttribute","wh","_keys","_vals","_sorted","keyFrom","keyTo","indexFirst","elm","low","high","MAX_SCROLL","_p","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","_rCache","_fCache","rowCache","fCache","_setFieldCache","DataSourceIterator","_dataSource","_curIndex","_data","_getIndexData","movePrev","nest","FilterData","dc","original","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","timeout","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","CHECK_HEADER_STATE_ID","checked","getHeaderValue","setHeaderValue","_sort","_executeSort","newState","hasTrueField","fieldRow","sortState","inlineCheck","contents","parser","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","_y","_w","_h","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands_1","builder","argsProvider","_commands","PathCommands","buildPush","rotate","numArgs","ops","pathTokens","subsequentCommand","fst","log","mag","sqrt","pow","angle","acos","dot","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","cost","cos","sint","sin","rotClockwise","xPrime2","pointMul","rx2","ry2","lambda","factor","cPrime","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","lMx","lMy","reflected","lx","ly","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","_icon","letterSpacing","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","FontRuler","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","HAS_WEBKIT_FALLBACK_BUG","match","hasWebKitFallbackBug","callbacks","cb","display","computeStyle","el_","_path","buildSvgDataUrl","XMLSerializer","serializeToString","getSvgElement","DOMParser","parseFromString","svgElem","elmWidth","elmHeight","numElmWidth","numElmHeight","header","registers","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","cacheLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","getLinearGradient","data_1","layout_map_1","MessageHandler_1","style_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","_getCellRange","layoutMap","_updateRect","_getCellValue","headerRowCount","_getField","_getCellMessage","promises","hasMessage","_getCellIcon0","retIcon","iconOpt","_getRecordIndexByRow","_hasField","_onDrawValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","_d","_f","_g","_j","_k","_l","_m","_o","_q","selRecordIndex","selId","getCellId","isSelectCell","flagBorder","borderColorCell","records","_borderWithState","headerIcon","_getCellIcon","_refreshHeader","headerEvents","layout","MultiLayoutMap","SimpleHeaderLayoutMap","headerObjects","ids","columnObjects","columnWidths","minWidth","headerRowHeight","_refreshRowCount","bodyRowCount","_tryWithUpdateDataSource","dataSourceEventIds","_setRecords","newDataSource","ofArray","_setDataSource","_onRangePaste","pasteRowCount","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","editable","startRowOffset","rejectedDetail","addRejectedDetail","processRejected","duplicate","actionRow","valuesRow","valuesCol","newEnd","_onRangeDelete","deleteRowCount","deleteColCount","_oldValue","allowRangePaste","MessageHandler","tooltipHandler","TooltipHandler","oldState","oldField","getHeaderField","newField","headerValues","getColumnAction","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","makeVisibleGridCell","getHeaderCellRange","cellRange","hd","valueCallback","changeValueCallback","_setCellValue","doSetPasteValue","simple_header_layout_1","multi_layout_1","_emptyDataCache","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","headerField","colDef","prev","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","hbLayouut","normalizeLayout","_body","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","ErrorMessage","InfoMessage","warning","WarningMessage","normalizeMessage","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","_getMessageInstanceOfMessage","_attach","instance","_move","onSelectMessage","setMessageData","newSel","messageUtils","BaseMessage_1","ErrorMessageElement_1","ErrorMessageElement","_message","_info","messages","errorBgColor","MessageElement_1","infoBgColor","WarningMessageElement_1","WarningMessageElement","warnBgColor","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","Tooltip","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","detachTooltipElement","attachTooltipElement","moveTooltipElement","_isAttachCell","getTooltipInstanceInfo","BaseTooltip_1","TooltipElement_1","BaseTooltip","createTooltipElementInternal","TooltipElement","_tooltipElement","_getTooltipElement","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","maxWidthForRight","symbolManager","pasteUtils","amd"],"mappings":"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","file":"cheetahGrid.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 78);\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEDOWN_GRID: 'mousedown_grid',\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style, col, row) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef, col, row);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs, cell } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (cell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_GRID, cell);\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...super.bindGridEvent(grid, cellId),\r\n            grid.listen('click_cell', (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row) &&\r\n        ((typeof helper.theme.highlightBorderColor == \"string\" &&\r\n            helper.theme.highlightBorderColor) ||\r\n            (typeof helper.theme.highlightBorderColor == \"function\" &&\r\n                helper.theme.highlightBorderColor(row, col)))) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        let flagBorder = false;\r\n        if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\r\n            }\r\n            if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" &&\r\n                ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\r\n                borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if ((_j = layoutMap.getHeader(col, row)) === null || _j === void 0 ? void 0 : _j.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_k = layoutMap.getHeader(col, row)) === null || _k === void 0 ? void 0 : _k.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_m = (_l = layoutMap.getHeader(col, row).style) === null || _l === void 0 ? void 0 : _l.borderColor) !== null && _m !== void 0 ? _m : \"\";\r\n            }\r\n            if (typeof ((_o = layoutMap.getHeader(col, row)) === null || _o === void 0 ? void 0 : _o.style) == \"function\" &&\r\n                ((_p = grid[_].records) === null || _p === void 0 ? void 0 : _p.length)) {\r\n                borderColorCell = (_q = layoutMap.getHeader(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _q === void 0 ? void 0 : _q.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if (!flagBorder) {\r\n            helper.border(context, option);\r\n        }\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    if (grid.frozenRowCount == 0) {\r\n        grid.frozenRowCount = layoutMap.headerRowCount;\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b, _c;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        protectedSpace.frozenRowCount = (_b = options.frozenRowCount) !== null && _b !== void 0 ? _b : 0;\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_c = options.allowRangePaste) !== null && _c !== void 0 ? _c : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n"],"sourceRoot":""}