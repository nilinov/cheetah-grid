{"version":3,"sources":["cheetahGrid/webpack/universalModuleDefinition","cheetahGrid/webpack/bootstrap","cheetahGrid/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid/../src/js/columns/message/internal/MessageElement.css","cheetahGrid/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid/../src/js/internal/style.css","cheetahGrid/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid/node_modules/css-loader/dist/runtime/api.js","cheetahGrid/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid/node_modules/webpack/buildin/global.js","cheetahGrid/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid/../src/js/internal/style.css*","cheetahGrid/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid/./GridCanvasHelper.js","cheetahGrid/./ListGrid.js","cheetahGrid/./columns.js","cheetahGrid/./columns/action.js","cheetahGrid/./columns/action/Action.js","cheetahGrid/./columns/action/BaseAction.js","cheetahGrid/./columns/action/BaseInputEditor.js","cheetahGrid/./columns/action/ButtonAction.js","cheetahGrid/./columns/action/CheckEditor.js","cheetahGrid/./columns/action/Editor.js","cheetahGrid/./columns/action/InlineInputEditor.js","cheetahGrid/./columns/action/InlineMenuEditor.js","cheetahGrid/./columns/action/RadioEditor.js","cheetahGrid/./columns/action/SmallDialogInputEditor.js","cheetahGrid/./columns/action/action-utils.js","cheetahGrid/./columns/action/actionBind.js","cheetahGrid/./columns/action/internal/InlineInputElement.js","cheetahGrid/./columns/action/internal/InlineMenuElement.js","cheetahGrid/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid/./columns/action/internal/input-value-handler.js","cheetahGrid/./columns/indicator/handlers.js","cheetahGrid/./columns/indicator/triangle.js","cheetahGrid/./columns/message/BaseMessage.js","cheetahGrid/./columns/message/ErrorMessage.js","cheetahGrid/./columns/message/InfoMessage.js","cheetahGrid/./columns/message/MessageHandler.js","cheetahGrid/./columns/message/WarningMessage.js","cheetahGrid/./columns/message/internal/ErrorMessageElement.js","cheetahGrid/./columns/message/internal/MessageElement.js","cheetahGrid/./columns/message/internal/WarningMessageElement.js","cheetahGrid/./columns/message/messageUtils.js","cheetahGrid/./columns/style.js","cheetahGrid/./columns/style/BaseStyle.js","cheetahGrid/./columns/style/BranchGraphStyle.js","cheetahGrid/./columns/style/ButtonStyle.js","cheetahGrid/./columns/style/CheckStyle.js","cheetahGrid/./columns/style/IconStyle.js","cheetahGrid/./columns/style/ImageStyle.js","cheetahGrid/./columns/style/MenuStyle.js","cheetahGrid/./columns/style/MultilineTextStyle.js","cheetahGrid/./columns/style/NumberStyle.js","cheetahGrid/./columns/style/PercentCompleteBarStyle.js","cheetahGrid/./columns/style/RadioStyle.js","cheetahGrid/./columns/style/StdBaseStyle.js","cheetahGrid/./columns/style/Style.js","cheetahGrid/./columns/type.js","cheetahGrid/./columns/type/BaseColumn.js","cheetahGrid/./columns/type/BranchGraphColumn.js","cheetahGrid/./columns/type/ButtonColumn.js","cheetahGrid/./columns/type/CheckColumn.js","cheetahGrid/./columns/type/Column.js","cheetahGrid/./columns/type/IconColumn.js","cheetahGrid/./columns/type/ImageColumn.js","cheetahGrid/./columns/type/MenuColumn.js","cheetahGrid/./columns/type/MultilineTextColumn.js","cheetahGrid/./columns/type/NumberColumn.js","cheetahGrid/./columns/type/PercentCompleteBarColumn.js","cheetahGrid/./columns/type/RadioColumn.js","cheetahGrid/./columns/type/columnUtils.js","cheetahGrid/./columns/utils/index.js","cheetahGrid/./core.js","cheetahGrid/./core/DG_EVENT_TYPE.js","cheetahGrid/./core/DrawGrid.js","cheetahGrid/./core/EventTarget.js","cheetahGrid/./data.js","cheetahGrid/./data/CachedDataSource.js","cheetahGrid/./data/DataSource.js","cheetahGrid/./data/FilterDataSource.js","cheetahGrid/./element/Inline.js","cheetahGrid/./element/InlineDrawer.js","cheetahGrid/./element/InlineIcon.js","cheetahGrid/./element/InlineImage.js","cheetahGrid/./element/InlinePath2D.js","cheetahGrid/./element/InlineSvg.js","cheetahGrid/./element/inlines.js","cheetahGrid/./get-internal.js","cheetahGrid/./header/action.js","cheetahGrid/./header/action/BaseAction.js","cheetahGrid/./header/action/CheckHeaderAction.js","cheetahGrid/./header/action/SortHeaderAction.js","cheetahGrid/./header/action/actionBind.js","cheetahGrid/./header/style.js","cheetahGrid/./header/style/BaseStyle.js","cheetahGrid/./header/style/CheckHeaderStyle.js","cheetahGrid/./header/style/MultilineTextHeaderStyle.js","cheetahGrid/./header/style/SortHeaderStyle.js","cheetahGrid/./header/style/StdBaseStyle.js","cheetahGrid/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid/./header/style/StdTextBaseStyle.js","cheetahGrid/./header/style/Style.js","cheetahGrid/./header/type.js","cheetahGrid/./header/type/BaseHeader.js","cheetahGrid/./header/type/CheckHeader.js","cheetahGrid/./header/type/Header.js","cheetahGrid/./header/type/MultilineTextHeader.js","cheetahGrid/./header/type/SortHeader.js","cheetahGrid/./headers.js","cheetahGrid/./icons.js","cheetahGrid/./internal/EventHandler.js","cheetahGrid/./internal/LRUCache.js","cheetahGrid/./internal/NumberMap.js","cheetahGrid/./internal/Rect.js","cheetahGrid/./internal/Scrollable.js","cheetahGrid/./internal/animate.js","cheetahGrid/./internal/calc.js","cheetahGrid/./internal/canvases.js","cheetahGrid/./internal/color.js","cheetahGrid/./internal/dom.js","cheetahGrid/./internal/fonts.js","cheetahGrid/./internal/hiDPI.js","cheetahGrid/./internal/icons.js","cheetahGrid/./internal/imgs.js","cheetahGrid/./internal/legacy/canvas/Path2DShim.js","cheetahGrid/./internal/legacy/canvas/PathCommands.js","cheetahGrid/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid/./internal/menu-items.js","cheetahGrid/./internal/paste-utils.js","cheetahGrid/./internal/path2DManager.js","cheetahGrid/./internal/sort.js","cheetahGrid/./internal/style.js","cheetahGrid/./internal/symbolManager.js","cheetahGrid/./internal/utils.js","cheetahGrid/./list-grid/LG_EVENT_TYPE.js","cheetahGrid/./list-grid/layout-map/index.js","cheetahGrid/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid/./list-grid/layout-map/internal/utils.js","cheetahGrid/./main.js","cheetahGrid/./plugins/icons.js","cheetahGrid/./plugins/themes.js","cheetahGrid/./register.js","cheetahGrid/./themes.js","cheetahGrid/./themes/BASIC.js","cheetahGrid/./themes/MATERIAL_DESIGN.js","cheetahGrid/./themes/theme.js","cheetahGrid/./tools.js","cheetahGrid/./tools/canvashelper.js","cheetahGrid/./tooltip/BaseTooltip.js","cheetahGrid/./tooltip/Tooltip.js","cheetahGrid/./tooltip/TooltipHandler.js","cheetahGrid/./tooltip/internal/TooltipElement.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","GridCanvasHelper","calc","require","canvashelper","fonts","inlineUtils","themes","canvases_1","utils_1","InlineDrawer_1","Rect_1","color_1","toBoxArray","style","INLINE_ELLIPSIS","of","TEXT_OFFSET","CHECKBOX_OFFSET","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getFont","font","getThemeColor","names","gridThemeColor","getChainSafe","theme","getDefault","defaultThemeColor","args","testFontLoad","check","load","drawInlines","ctx","inlines","rect","offset","offsetTop","offsetBottom","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","restore","onReady","length","inlineWidths","map","width","reduce","a","b","forEach","index","inlineWidth","buildInlines","icons","inlineToString","string","getOverflowInline","textOverflow","isAllowOverflow","trim","Boolean","getOverflowInlinesIndex","maxWidth","lineWidth","i","remWidth","isOverflowInlines","breakWidthInlines","indexData","beforeInlines","overflow","afterInlines","slice","canBreak","before","after","breakWord","breakAll","splitIndex","push","truncateInlines","option","overflowInline","ellipsisWidth","_inlineRect","drawRect","textAlign","textBaseline","trailingIcon","trailingIconInline","iconOf","inlineDrawRect","trailingIconWidth","Rect","left","top","height","truncInlines","setCellOverflowText","sumWidth","baseRect","trailingIconRect","copy","right","_multiInlineRect","multiInlines","lineHeight","autoWrapText","lineClamp","rectHeight","Math","max","floor","buildedMultiInlines","procLineClamp","hasNext","Number","join","concat","procLine","lineRow","buildedInline","paddingTop","paddingBottom","em","getFontSize","pad","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","start","end","diff","ceil","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","positionOpt","boxWidth","measureCheckbox","pos","calcStartPosition","x","y","drawRadioButton","checkColor","radioButton","uncheckBorderColor","checkBorderColor","measureRadioButton","bgColor","ThemeResolver","constructor","_checkbox","_radioButton","_button","_header","_messages","_indicators","_grid","name","underlayBackgroundColor","frozenRowsColor","defaultBgColor","frozenRowsBgColor","selectionBgColor","highlightBgColor","frozenRowsBorderColor","highlightBorderColor","getCheckboxProp","prop","getRadioButtonProp","button","getButtonProp","header","sortArrowColor","messages","infoBgColor","getMessageProp","errorBgColor","warnBgColor","markHeight","indicators","topLeftColor","getIndicatorsProp","topLeftSize","topRightColor","topRightSize","bottomRightColor","bottomRightSize","bottomLeftColor","bottomLeftSize","strokeRect","Array","isArray","strokeStyle","borderColors","strokeColorsRect","_theme","createCalculator","calcWidth","toPx","full","getRect","getContext","calcHeight","obj","toBoxPixelArray","calculator","box","drawWithClip","getDrawRect","beginPath","clip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","paddingNums","multilineText","multilines","fillText","fillCell","fillColor","fill","fillCellWithState","getFillColorState","fillRect","fillRectWithState","sel","getSelection","cellEquals","select","cellInRange","range","border","startOffset","borderWithState","selection","moveTo","lineTo","bottom","stroke","buildCheckBoxInline","self","InlineDrawer","caption","shadow","drawButton","radius","_a","ListGrid","data_1","layout_map_1","MessageHandler_1","style_1","DrawGrid_1","GridCanvasHelper_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","symbolManager_1","paste_utils_1","_","getProtectedSymbol","_getCellRange","layoutMap","getCellRange","_updateRect","setRectFilter","startCol","startRow","endCol","endRow","c","getColWidth","r","getRowHeight","bounds","_getCellValue","headerRowCount","getHeader","field","getBody","_getField","_setCellValue","_getRecordIndexByRow","dataSource","setField","_getCellMessage","message","promises","msg","isPromise","hasMessage","Promise","resolve","reject","p","then","_getCellIcon0","icon","isObject","retIcon","iconOpt","iconPropKeys","f","_hasField","_getCellIcon","headerIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","frozenColCount","frozenRowCount","_borderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","selRecordIndex","getRecordIndexByRow","selId","getCellId","isSelectCell","_refreshHeader","_b","protectedSpace","headerEvents","id","unlisten","layout","MultiLayoutMap","SimpleHeaderLayoutMap","headerObjects","cell","ids","headerType","bindGridEvent","BaseStyle","listen","EVENT_TYPE","CHANGE_STYLE","invalidate","action","columnObjects","columnType","columnWidths","column","minWidth","setColWidth","setMinColWidth","setMaxColWidth","headerRowHeight","setRowHeight","colCount","_refreshRowCount","rowCount","bodyRowCount","_tryWithUpdateDataSource","fn","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","records","newDataSource","CachedDataSource","ofArray","addDisposable","_setDataSource","EMPTY","_onRangePaste","test","selectionRange","values","parsePasteRangeBoxValues","trimOnPaste","pasteRowCount","min","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","offsetCol","body","editable","getRecordStartRowByRecordIndex","startRowOffset","rejectedDetail","addRejectedDetail","record","define","pasteValue","timeout","processRejected","clearTimeout","setTimeout","fireListeners","LG_EVENT_TYPE","REJECTED_PASTE_VALUES","detail","duplicate","actionRow","valuesRow","offsetRow","valuesCol","getCellValue","oldValue","onPasteCellRangeBox","newEnd","invalidateCellRange","_onRangeDelete","deleteRowCount","deleteColCount","_record","_oldValue","onDeleteCellRangeBox","DrawGrid","options","omit","disabled","readOnly","allowRangePaste","sortState","order","MessageHandler","tooltipHandler","TooltipHandler","window","updateSize","updateScroll","dispose","recordRowCount","oldState","oldField","getHeaderField","newState","newField","setHeaderValue","headerValues","Map","getColumnDefine","getColumnType","getColumnAction","hd","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","find","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","focusCell","invalidateGridRect","makeVisibleGridCell","_c","_d","makeVisibleCell","getGridCanvasHelper","getHeaderCellRange","getCopyCellValue","cellRange","headerData","columnData","onDrawCell","doGetCellValue","valueCallback","doChangeValue","changeValueCallback","BEFORE_CHANGE_VALUE","ret","CHANGED_VALUE","doSetPasteValue","getHeaderValue","newValue","set","CHANGED_HEADER_VALUE","getLayoutCellId","bindEventsInternal","SELECTED_CELL","e","PASTE_CELL","multi","event","cancel","normalizeValue","DELETE_CELL","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getOffsetInvalidateCells","getCopyRangeInternal","type","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action","Editor","BaseAction","ACTIONS","Action_1","BaseAction_1","ButtonAction_1","CheckEditor_1","Editor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","_disabled","_readOnly","ImmutableRadioEditor","ImmutableInputEditor","CHECK","INPUT","RADIO","columnAction","key","toUpperCase","actionBind_1","action_utils_1","_action","clone","getState","cellId","state","isDisabledRecord","extend","bindCellClickAction","mouseOver","mouseActiveCell","mouseOut","bindCellKeyAction","onChangeDisabledInternal","BaseInputEditor","DG_EVENT_TYPE_1","KEY_ENTER","KEY_F2","open","isReadOnlyRecord","onOpenCellInternal","input","onInputCellInternal","isTarget","DG_EVENT_TYPE","INPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","keyCode","stopCellMoving","onChangeSelectCellInternal","selected","SCROLL","onGridScrollInternal","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","getCellRect","rangeRect","getCellRangeRect","parseFloat","toFixed","onSetInputAttrsInternal","isSupportMultilineValue","replace","BUTTON_COLUMN_STATE_ID","getButtonColumnStateId","setReadonly","animate_1","CHECK_COLUMN_STATE_ID","getCheckColumnStateId","_state","block","elapsed","cellKey","toggleValue","onChange","animate","point","_e","selrange","isRejectValue","onChangeReadOnlyInternal","BaseInputEditor_1","InlineInputElement_1","getInlineInputEditorStateId","globalElement","bindGridCount","attachInput","editor","InlineInputElement","element","attach","detachInput","gridFocus","detach","_classList","classList","_type","inputValue","_cell","_selected","setInputAttrs","InlineMenuElement_1","type_1","menu_items_1","getInlineMenuEditorStateId","attachMenu","InlineMenuElement","detachMenu","_options","normalizeToFn","CLICK_CELL","MOUSEOVER_CELL","getElement","cursor","MOUSEMOVE_CELL","MOUSEOUT_CELL","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","hasOptions","normalizePasteValueStr","captionOpt","array","opt","label","MenuColumn","utils_2","RADIO_COLUMN_STATE_ID","getRadioColumnStateId","_group","group","_checkAction","checkAction","toBoolean","targets","actionCell","recordStartRow","girdRecords","getAllRecordsFromGrid","showData","d","targetRow","flag","SmallDialogInputElement_1","getSmallDialogInputEditorStateId","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","getBooleanOptionOfRecord","val","exec","KEY_SPACE","acceptKeys","indexOf","keyboardOptions","moveCellOnEnter","EventHandler_1","dom_1","input_value_handler_1","KEY_TAB","CLASSNAME","createInputElement","createElement","add","_handler","EventHandler","_input","_bindInputEvents","_beforePropEditor","parentElement","removeChild","remove","getAttachCellsArea","appendChild","setInputValue","_activeData","focus","selectionStart","selectionEnd","document","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_attaching","_isActive","stopPropagationOnly","stopPropagation","contains","getKeyCode","_onKeydownEnter","_onKeydownTab","onKeyDownMove","moveCellOnTab","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","target","el","createMenuElement","attachElement","menu","optionToLi","html","item","tabIndex","dataset","valueindex","span","appendHtml","openMenu","empty","emptyItemEl","valueItemEl","focusEl","children","focusIndex","allHeight","offsetHeight","transformOrigin","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_col","_row","disableFocus","_menu","_bindMenuEvents","bodyClickListenerId","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","bind","capture","_doChangeValue","n","findPrevSiblingFocusable","findNextSiblingFocusable","shiftKey","querySelector","isFocusable","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","browser","IE","_beforeValue","_validate","res","onKeyupAndPress","_onInputValueChange","inputOnly","sign","once","getDrawIndicator","triangle_1","indicatorStyle","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","themeSize","drawPath","size","baseLeft","baseTop","baseRight","baseBottom","kind","process","closePath","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","messageElement","moveMessageElement","move","_detach","drawCellMessage","drawCellMessageInternal","ErrorMessage","messageUtils","BaseMessage_1","ErrorMessageElement_1","RED_A100","ErrorMessageElement","_message","_info","hasFocusGrid","drawExclamationMarkBox","InfoMessage","MessageElement_1","GREY_L2","MessageElement","drawInformationMarkBox","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","error","warning","WarningMessage","normalizeMessage","original","toLowerCase","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","_attach","_move","onSelectMessage","setMessageData","newSel","FOCUS_GRID","BLUR_GRID","WarningMessageElement_1","DEEP_ORANGE_A100","WarningMessageElement","MESSAGE_CLASSNAME","_rootElement","createMessageDomElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","boxRect","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","Style","BaseStyle_1","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","Style_1","columnStyle","StyleClassDef","DEFAULT","EventTarget_1","STYLE_EVENT_TYPE","defaultStyle","EventTarget","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","doChangeStyle","indicator","BranchGraphStyle","DEFAULT_BRANCH_COLORS","_name","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","defaults","buttonBgColor","_buttonBgColor","StdBaseStyle_1","StdBaseStyle","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","appearance","_appearance","_lineHeight","_autoWrapText","_lineClamp","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_checkColor","_uncheckBorderColor","_checkBorderColor","_textAlign","_textBaseline","_color","_font","_padding","_textOverflow","MultilineTextColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","Column","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","BaseColumn","styleContents","handlers_1","COLUMN_FADEIN_STATE_ID","getColumnFadeinStateId","isFadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","configure","getFadeinState","cells","_generateFadeinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","fadeinMgr","activeFadeins","margeAnimate","_fadeinWhenCallbackInPromise","StyleClass","promise","Date","now","all","currentContext","toCurrentContext","time","actStyle","convertInternal","drawMessageInternal","drawIndicatorsInternal","_cellId","BaseColumn_1","BranchGraphStyle_1","getBranchGraphColumnStateId","getAllColumnData","callback","allData","data","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","mergeLines","filter","l","froms","tos","t","splice","merge","joinLine","timeline","branchIndex","reverse","j","tl","branch","branches","from","to","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","textWidth","measureText","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","clearCache","has","_value","upLineIndexKey","downLineIndexKey","line","pointIndex","sort","arc","PI","utils","_caption","withCaption","textValue","String","active","loadIcons","blur","offsetY","repeatArray","count","Infinity","_tagName","tagName","_className","className","_content","content","_iconWidth","iconWidth","isNaN","imgs_1","MAX_LRU_CACHE_SIZE","getImage","url","getCacheOrLoad","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","normalize","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","path","console","warn","split","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","MARGIN","_min","_max","_formatter","formatter","str","endsWith","rate","barMaxWidth","barTop","barLeft","barSize","argIcon","iconList","toNormalizeArray","MOUSEDOWN_CELL","MOUSEUP_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","RESIZE_COLUMN","hiDPI","NumberMap_1","Scrollable_1","isTouchEvent","getMouseButtons","cancelEvent","createRootElement","KEY_BS","KEY_END","KEY_HOME","KEY_LEFT","KEY_RIGHT","KEY_DEL","KEY_ALPHA_A","KEY_ALPHA_C","KEY_ALPHA_V","_vibrate","navigator","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candidateRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_getCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","keys","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","cellDrawing","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","put","_storeAutoColWidthExprs","defaultColPxWidth","each","adj","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","setFocusCursor","abs","redrawRect","_onKeyDownMove","ctrlKey","metaKey","hMove","vMove","newCell","_moveFocusCell","selectAllOnCtrlA","vDir","hDir","shiftKeyFlg","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_updatedSelection","focusControl","selCol","selRow","results","editMode","findIndex","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","buttons","resizeCol","_getResizeColAt","columnResizer","cellSelector","hasListeners","doubleTapBefore","longTouchId","useTouch","useTouchStart","timeoutId","useTouchEnd","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","leaveCell","moving","lastMoving","onKeyDown","onScroll","copyRange","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","normalizedValue","normalizePasteValue","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","onBlur","abstractX","abstractY","inPoint","cellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","mousemove","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","afterSize","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_isComposition","_compositionEnd","lastInputValue","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","Edge","isDescendantElement","dummyInput","pasteText","clipboardData","getData","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","attributes","removeNames","attr","_inputStatus","nodeName","removeName","removeAttribute","setAttribute","inputStatus","Selection","_sel","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","list","_level","_list","drawing","_rectFilter","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","rectFilter","_getRectInternal","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","protectedKey","initDocument","Scrollable","transform","alpha","NumberMap","cellTextOverflows","cfg","config","scrollHeight","scrollWidth","setScrollSize","getMaxColWidth","maxwidth","getMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","oldEditMode","cellsRect","invalidateTarget","visibleRowCount","visibleTop","visibleColCount","visibleLeft","topRow","leftCol","_range","getCellOverflowText","overflowText","disposable","Error","disposables","_absoluteY","_startRow","_endRow","nextId","listeners","listenerData","listener","addEventListener","removeEventListener","FilterDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","_setFieldCache","fCache","recCache","source","_rCache","_fCache","getOriginal","getOriginalField","rowCache","setOriginalField","fieldPromiseCallBackInternal","recordPromiseCallBackInternal","isFieldAssessor","UPDATE_LENGTH","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","fieldGet","fieldResult","ss","applyChainSafe","emptyFn","fieldSet","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","hasOriginalField","orderFn","sortPromise","rel","_index","_field","DataSourceIterator","_dataSource","_curIndex","_data","next","_getIndexData","movePrev","nest","FilterData","dc","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","Inline","getWidth","breakWidth","itr","candidateIndex","chars","beforeWidth","charWidth","beforeContent","afterContent","_callback","fillTextRect","genChars","allWidth","candidate","genWords","toString","Inline_1","_draw","_width","_arg","InlineIcon","_icon","letterSpacing","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_height","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","s","_loadImage","img","drawInlineImageRect","InlinePath2D","path2DManager","Path2D","getPath2D","_path","translate","InlineSvg","InlineImage_1","buildSvgDataUrl","svg","XMLSerializer","serializeToString","encodeURIComponent","getSvgElement","parser","DOMParser","parseFromString","svgElem","elmWidth","getAttribute","elmHeight","numElmWidth","numElmHeight","InlineIcon_1","InlinePath2D_1","InlineSvg_1","drawRegisteredIcon","drawWidth","drawHeight","isIconConstructorOption","isInlineImageConstructorOption","isInlineSvgConstructorOption","registeredIcons","registeredIcon","il","getInternal","symbolManager","pasteUtils","ofCell","CheckHeaderAction","SortHeaderAction","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","SORT","headerAction","headerCell","sortMethod","CHECK_HEADER_STATE_ID","getCheckHeaderStateId","checked","_sort","_executeSort","hasTrueField","fieldRow","inMouse","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdTextBaseStyle_1","StdTextBaseStyle","StdMultilineTextBaseStyle_1","StdMultilineTextBaseStyle","_sortArrowColor","_multiline","multiline","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","inlineCheck","contents","arrowSize","icons_1","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","fire","hasListener","clear","LRUCache","cacheSize","_map","_cacheSize","idx","remKey","shift","indexFirst","arr","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","rect1","rect2","_right","_bottom","x0","x1","y0","y1","another","MAX_SCROLL","heightLimit","_p","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","isNode","requestAnimationFrame","duration","easing","startedAt","easingFn","canceledFlg","createAnim","anim","TYPE_PAREN","TYPE_UNIT","TYPE_OPERATOR","TYPE_NUMBER","NODE_TYPE_UNIT","NODE_TYPE_BINARY_EXPRESSION","NODE_TYPE_NUMBER","TABULATION","CARRIAGE_RETURN","LINE_FEED","FORM_FEED","SPACE","PERCENT","FULL_STOP","DIGIT_0","DIGIT_9","LATIN_CAPITAL_A","LATIN_CAPITAL_Z","LATIN_SMALL_A","LATIN_SMALL_Z","isUpperLetter","cp","isLowerLetter","isLetter","isWhitespace","isDigit","isDot","isUnit","createError","tokenize","exp","tokens","len","charCodeAt","parseSign","parseNum","parseUnit","unit","PRECEDENCE","lex","buildBinaryExpNode","stack","op","nodeType","token","deep","closeIndex","beforeOp","parse","calcStr","calcNode","node","toPxInternal","ast","calcBasePosition","fontSizeCache","fontName","bk","paddingLeft","paddingRight","rgbMap","styleColorToRGB","dummy","position","styleColor","defaultView","getComputedStyle","colorToRGB0","hexToNum","hex","parseInt","createRGB","g","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","rgb","enableFocus","toNodeList","innerHTML","dom","firstChild","arg","toNode","childNodes","inner","disableBeforeTabIndex","previousSibling","nextSibling","loads","_testStr","fontFaceSet","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","getIconProps","ICON_PROP_KEYS","quote","quoted","part","doms","props","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","toSimpleArray","iconProps","workData","isIconKey","loadImage","LRUCache_1","allCache","Image","onload","onerror","getCacheOrLoad0","cacheName","Path2DShim","PathCommandsParser_1","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","roundRect","_y","_w","_h","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands","mag","sqrt","pow","dot","u","clamp","angle","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","PathCommands_1","pathTokens","builder","argsProvider","_commands","buildPush","numArgs","ops","subsequentCommand","fst","log","FontRuler","computeStyle","display","el_","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","hasWebKitFallbackBug","callbacks","cb","HAS_WEBKIT_FALLBACK_BUG","match","userAgent","module","JSON","parseValues","adjustCell","char","processQuotedCell","pathModule","ud","upsideDown","offsetX","xrate","yrate","path2d","sortArray","createArray","createArrayPromise","plist","setArrayField","compare","old","dummyPromise","catch","getScrollBarWidth","wrapper","wrapperStyle","pointerEvents","wrapperWidth","innerWidth","SCROLLBAR_SIZE","initDocumentInternal","head","initDocumentVar","Function","Symbol","global","random","cl","mem","getIgnoreCase","arrayFind","arrayFindIndex","predicate","analyzeUserAgent","Chrome","Firefox","Safari","ua","omits","defs","root","searchString","subjectString","isFinite","lastIndex","lastIndexOf","re","which","preventDefault","simple_header_layout_1","multi_layout_1","columns","normalizeLayout","seqId","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","_emptyDataCache","EmptyDataCache","hbLayouut","headerField","_body","colDef","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","_f","_g","_j","_k","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","prev","newEmptyColumnData","newEmptyHeaderData","headers","rows","register","getIcons","tools","core","_getInternal","ListGrid_1","get_internal_1","default","defaultTheme","setDefault","getChoices","themes_1","registers","__importDefault","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","Theme","builtin","defTheme","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","strokeRectLines","positions","preColor","pos1","pos2","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","leftWidth","rightWidth","leftLeftPos","leftTopPos","checkSize","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","BaseTooltip","detachTooltipElement","_tooltipElement","_getTooltipElement","createTooltipElementInternal","attachTooltipElement","tooltipElement","moveTooltipElement","Tooltip","BaseTooltip_1","TooltipElement_1","TooltipElement","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","getTooltipInstanceInfo","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","_isAttachCell","CONTENT_CLASSNAME","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","winWidth","maxWidthForRight"],"mappings":"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GD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;A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","file":"cheetahGrid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row)) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        helper.border(context, option);\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    grid.frozenRowCount = layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record), record, StyleClassDef);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n"],"sourceRoot":""}