{"version":3,"sources":["cheetahGrid.min/webpack/universalModuleDefinition","cheetahGrid.min/webpack/bootstrap","cheetahGrid.min/./internal/utils.js","cheetahGrid.min/./internal/symbolManager.js","cheetahGrid.min/node_modules/css-loader/dist/runtime/api.js","cheetahGrid.min/./internal/EventHandler.js","cheetahGrid.min/./core/DG_EVENT_TYPE.js","cheetahGrid.min/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid.min/./columns/style/Style.js","cheetahGrid.min/./columns/type/columnUtils.js","cheetahGrid.min/./columns/type/BaseColumn.js","cheetahGrid.min/./internal/canvases.js","cheetahGrid.min/./columns/action/action-utils.js","cheetahGrid.min/./columns/action/Editor.js","cheetahGrid.min/./internal/dom.js","cheetahGrid.min/./columns/type/Column.js","cheetahGrid.min/./header/type/BaseHeader.js","cheetahGrid.min/./element/Inline.js","cheetahGrid.min/./columns.js","cheetahGrid.min/./internal/animate.js","cheetahGrid.min/./columns/style/BaseStyle.js","cheetahGrid.min/./core/EventTarget.js","cheetahGrid.min/./columns/style/StdBaseStyle.js","cheetahGrid.min/./internal/Rect.js","cheetahGrid.min/./header/type.js","cheetahGrid.min/./columns/action/actionBind.js","cheetahGrid.min/./columns/action/BaseAction.js","cheetahGrid.min/./columns/style.js","cheetahGrid.min/./internal/icons.js","cheetahGrid.min/./columns/utils/index.js","cheetahGrid.min/./internal/calc.js","cheetahGrid.min/./internal/paste-utils.js","cheetahGrid.min/./data/DataSource.js","cheetahGrid.min/./header/action.js","cheetahGrid.min/./header/action/BaseAction.js","cheetahGrid.min/./header/style.js","cheetahGrid.min/./header/style/BaseStyle.js","cheetahGrid.min/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid.min/./internal/path2DManager.js","cheetahGrid.min/./themes.js","cheetahGrid.min/./columns/message/messageUtils.js","cheetahGrid.min/./columns/message/BaseMessage.js","cheetahGrid.min/./columns/message/internal/MessageElement.js","cheetahGrid.min/./list-grid/LG_EVENT_TYPE.js","cheetahGrid.min/./columns/action/Action.js","cheetahGrid.min/./columns/action/BaseInputEditor.js","cheetahGrid.min/./columns/action/internal/input-value-handler.js","cheetahGrid.min/./columns/type.js","cheetahGrid.min/./columns/style/ButtonStyle.js","cheetahGrid.min/./columns/style/CheckStyle.js","cheetahGrid.min/./columns/style/IconStyle.js","cheetahGrid.min/./columns/style/ImageStyle.js","cheetahGrid.min/./columns/style/MenuStyle.js","cheetahGrid.min/./columns/style/MultilineTextStyle.js","cheetahGrid.min/./columns/style/NumberStyle.js","cheetahGrid.min/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.min/./columns/style/RadioStyle.js","cheetahGrid.min/./internal/imgs.js","cheetahGrid.min/./internal/menu-items.js","cheetahGrid.min/./core/DrawGrid.js","cheetahGrid.min/./internal/style.js","cheetahGrid.min/./data.js","cheetahGrid.min/./internal/sort.js","cheetahGrid.min/./header/action/actionBind.js","cheetahGrid.min/./header/style/CheckHeaderStyle.js","cheetahGrid.min/./header/style/StdTextBaseStyle.js","cheetahGrid.min/./header/style/MultilineTextHeaderStyle.js","cheetahGrid.min/./header/style/SortHeaderStyle.js","cheetahGrid.min/./header/style/Style.js","cheetahGrid.min/./element/inlines.js","cheetahGrid.min/./icons.js","cheetahGrid.min/./plugins/icons.js","cheetahGrid.min/./element/InlineDrawer.js","cheetahGrid.min/./internal/fonts.js","cheetahGrid.min/./element/InlineImage.js","cheetahGrid.min/./plugins/themes.js","cheetahGrid.min/./tools/canvashelper.js","cheetahGrid.min/./list-grid/layout-map/internal/utils.js","cheetahGrid.min/./GridCanvasHelper.js","cheetahGrid.min/./internal/color.js","cheetahGrid.min/./main.js","cheetahGrid.min/./columns/action.js","cheetahGrid.min/./columns/action/ButtonAction.js","cheetahGrid.min/node_modules/webpack/buildin/global.js","cheetahGrid.min/./columns/action/CheckEditor.js","cheetahGrid.min/./columns/action/InlineInputEditor.js","cheetahGrid.min/./columns/action/internal/InlineInputElement.js","cheetahGrid.min/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid.min/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid.min/./columns/action/InlineMenuEditor.js","cheetahGrid.min/./columns/action/internal/InlineMenuElement.js","cheetahGrid.min/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid.min/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid.min/./columns/type/BranchGraphColumn.js","cheetahGrid.min/./columns/indicator/handlers.js","cheetahGrid.min/./columns/indicator/triangle.js","cheetahGrid.min/./columns/style/BranchGraphStyle.js","cheetahGrid.min/./columns/type/ButtonColumn.js","cheetahGrid.min/./columns/type/CheckColumn.js","cheetahGrid.min/./columns/type/IconColumn.js","cheetahGrid.min/./columns/type/ImageColumn.js","cheetahGrid.min/./internal/LRUCache.js","cheetahGrid.min/./columns/type/MenuColumn.js","cheetahGrid.min/./columns/type/MultilineTextColumn.js","cheetahGrid.min/./columns/type/NumberColumn.js","cheetahGrid.min/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.min/./columns/type/RadioColumn.js","cheetahGrid.min/./columns/action/RadioEditor.js","cheetahGrid.min/./columns/action/SmallDialogInputEditor.js","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.min/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.min/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid.min/./core.js","cheetahGrid.min/./internal/hiDPI.js","cheetahGrid.min/../src/js/internal/style.css*","cheetahGrid.min/../src/js/internal/style.css","cheetahGrid.min/./internal/NumberMap.js","cheetahGrid.min/./internal/Scrollable.js","cheetahGrid.min/./data/CachedDataSource.js","cheetahGrid.min/./data/FilterDataSource.js","cheetahGrid.min/./headers.js","cheetahGrid.min/./header/action/CheckHeaderAction.js","cheetahGrid.min/./header/action/SortHeaderAction.js","cheetahGrid.min/./header/style/StdBaseStyle.js","cheetahGrid.min/./header/type/CheckHeader.js","cheetahGrid.min/./internal/legacy/canvas/Path2DShim.js","cheetahGrid.min/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.min/./internal/legacy/canvas/PathCommands.js","cheetahGrid.min/./element/InlineIcon.js","cheetahGrid.min/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.min/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.min/./element/InlinePath2D.js","cheetahGrid.min/./element/InlineSvg.js","cheetahGrid.min/./header/type/Header.js","cheetahGrid.min/./header/type/MultilineTextHeader.js","cheetahGrid.min/./header/type/SortHeader.js","cheetahGrid.min/./register.js","cheetahGrid.min/./themes/theme.js","cheetahGrid.min/./themes/BASIC.js","cheetahGrid.min/./themes/MATERIAL_DESIGN.js","cheetahGrid.min/./tools.js","cheetahGrid.min/./ListGrid.js","cheetahGrid.min/./list-grid/layout-map/index.js","cheetahGrid.min/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid.min/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid.min/./columns/message/MessageHandler.js","cheetahGrid.min/./columns/message/ErrorMessage.js","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.min/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/MessageElement.css","cheetahGrid.min/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid.min/./columns/message/InfoMessage.js","cheetahGrid.min/./columns/message/WarningMessage.js","cheetahGrid.min/./columns/message/internal/WarningMessageElement.js","cheetahGrid.min/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid.min/./tooltip/TooltipHandler.js","cheetahGrid.min/./tooltip/Tooltip.js","cheetahGrid.min/./tooltip/BaseTooltip.js","cheetahGrid.min/./tooltip/internal/TooltipElement.js","cheetahGrid.min/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid.min/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid.min/./get-internal.js"],"names":["root","factory","window","installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","emptyFn","style","event","str","obj","browser","cellInRange","cellEquals","array","then","getIgnoreCase","getOrApply","applyChainSafe","getChainSafe","isDescendantElement","isNode","isPromise","extend","defaults","omit","each","arrayFind","arrayFindIndex","Array","find","arr","predicate","index","findIndex","undefined","length","IE","Chrome","Firefox","Edge","Safari","ua","navigator","userAgent","toLowerCase","exec","indexOf","analyzeUserAgent","fn","names","data","Boolean","source","omits","result","set","val","configurable","defs","keys","push","args","forEach","target","parentElement","callback","u","k","a","b","col","row","range","start","end","heightLimit","setReadonly","isObject","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","lastIndex","lastIndexOf","genChars","re","next","res","genWords","getMouseButtons","e","buttons","which","button","getKeyCode","keyCode","isTouchEvent","changedTouches","cancel","preventDefault","stopPropagation","toBoxArray","isArray","Function","getCheckHeaderStateId","getInlineMenuEditorStateId","getInlineInputEditorStateId","getSmallDialogInputEditorStateId","getBranchGraphColumnStateId","getColumnFadeinStateId","getButtonColumnStateId","getRadioColumnStateId","getCheckColumnStateId","getProtectedSymbol","require","global","random","cl","mem","useSourceMap","list","this","map","item","content","sourceMap","base64","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","JSON","stringify","concat","sourceURLs","sources","sourceRoot","join","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","id","_i","EventHandler","utils_1","nextId","constructor","_listeners","on","type","listener","options","addEventListener","once","off","tryWithOffEvents","removeEventListener","fire","hasListener","clear","dispose","DG_EVENT_TYPE","CLICK_CELL","DBLCLICK_CELL","DBLTAP_CELL","MOUSEDOWN_CELL","MOUSEUP_CELL","SELECTED_CELL","KEYDOWN","MOUSEMOVE_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","INPUT_CELL","PASTE_CELL","DELETE_CELL","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","RESIZE_COLUMN","SCROLL","FOCUS_GRID","BLUR_GRID","memo","isOldIE","document","all","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","count","css","media","references","updater","addStyle","insertStyleElement","createElement","attributes","nonce","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_index","splice","Style","StdBaseStyle_1","defaultStyle","StdBaseStyle","super","_color","color","_font","font","_padding","padding","_textOverflow","textOverflow","doChangeStyle","clone","__createBinding","k2","desc","getOwnPropertyDescriptor","writable","__setModuleDefault","v","__importStar","mod","loadIcons","icons","icon","context","helper","argIcon","toCurrentContext","iconList","toNormalizeArray","testFontLoad","BaseColumn","styleContents","BaseStyle_1","animate_1","symbolManager_1","handlers_1","COLUMN_FADEIN_STATE_ID","getFadeinState","grid","state","cells","_generateFadeinPointAction","drawInternal","drawCellBase","point","stateKey","opacity","cellState","ctx","getContext","globalAlpha","fadeinMgr","animate","activeFadeins","f","margeAnimate","option","onDrawCell","_fadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","BaseStyle","cellValue","info","_a","getRecord","getGridCanvasHelper","record","promise","msg","getMessage","Date","now","Promise","0","1","2","message","getDrawRect","time","currentContext","actStyle","of","StyleClass","convertInternal","drawMessageInternal","drawIndicatorsInternal","column","configure","isFadeinWhenCallbackInPromise","messageHandler","drawCellMessage","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","indicatorStyle","kind","getDrawIndicator","bindGridEvent","_grid","_cellId","getCopyCellValue","_cell","calcStartPosition","calcBasePosition","getFontSize","fontSizeCache","rect","width","height","offset","left","paddingLeft","right","paddingRight","top","paddingTop","bottom","paddingBottom","textAlign","textBaseline","x","y","fontName","bk","em","measureText","toggleValue","isReadOnlyRecord","isDisabledRecord","getBooleanOptionOfRecord","getRowRecord","disabled","readOnly","replace","Editor","BaseAction_1","BaseAction","_readOnly","onChangeReadOnlyInternal","tagName","classList","text","html","element","add","textContent","innerHTML","toNodeList","arg","node","nodeType","nodeName","dom","slice","toNode","isFocusable","el","tabIndex","findNextSiblingFocusable","findPrevSiblingFocusable","enableFocus","disableFocus","appendHtml","empty","inner","dataset","disableBeforeTabIndex","children","Number","previousSibling","nextSibling","Column","utils","BaseColumn_1","Style_1","getIcon","bgColor","textValue","String","BaseHeader","_options","Inline","getWidth","breakWidth","itr","candidateIndex","chars","ret","beforeWidth","pop","charWidth","beforeContent","afterContent","before","after","_content","canDraw","onReady","_callback","draw","canvashelper","offsetLeft","offsetRight","offsetTop","offsetBottom","fillTextRect","canBreak","splitIndex","breakWord","allWidth","candidate","breakAll","action","cubicBezier","x2","y2","x3","y3","step","abs","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","setTimeout","duration","easing","startedAt","easingFn","canceledFlg","createAnim","resolve","reject","anim","EventTarget_1","STYLE_EVENT_TYPE","CHANGE_STYLE","EventTarget","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","fireListeners","indicator","_","listeners","listenerData","listen","unlisten","hasListeners","_textAlign","_textBaseline","Rect","_left","_top","_width","_height","rect1","rect2","bounds","min","max","_right","_bottom","copy","intersection","x0","x1","y0","y1","contains","another","inPoint","ofCell","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","TYPES","DEFAULT","SORT","CHECK","MULTILINETEXT","headerType","toUpperCase","headerCell","sort","bindCellKeyAction","bindCellClickAction","DG_EVENT_TYPE_1","cellId","mouseOver","mouseOut","isTarget","getLayoutCellId","getElement","cursor","acceptKeys","keyboardOptions","moveCellOnEnter","sel","selection","select","_disabled","onChangeDisabledInternal","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","EVENT_TYPE","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","columnStyle","StyleClassDef","iconPropKeys","getIconProps","ICON_PROP_KEYS","doms","props","className","tagProps","body","beforeStyle","defaultView","getComputedStyle","getPropertyValue","quoted","split","part","test","quote","clientWidth","isLiga","toSimpleArray","iconProps","workData","prop","toPropArray","isIconKey","normalize","toBoolean","toPx","isWhitespace","cp","isDigit","isDot","isUnit","isLowerLetter","isUpperLetter","isLetter","createError","calc","PRECEDENCE","parse","calcStr","lex","tokens","buildBinaryExpNode","stack","op","token","shift","deep","closeIndex","beforeOp","num","unit","exp","trim","len","charCodeAt","parseSign","parseNum","sign","parseUnit","parseFloat","tokenize","toPxInternal","calcNode","full","normalizePasteValue","parsePasteRangeBoxValues","normalizedValue","values","colCount","trimOnPaste","adjustCell","cell","line","char","processQuotedCell","parseValues","rowCount","getCellValue","offsetCol","offsetRow","_b","DataSource","isFieldAssessor","field","UPDATE_LENGTH","UPDATED_LENGTH","UPDATED_ORDER","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","setField","fieldSet","ss","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","getOriginal","getField","getOriginalField","hasField","hasOriginalField","setOriginalField","order","orderFn","sortPromise","rel","results","recordPromiseCallBackInternal","fieldGet","fieldPromiseCallBackInternal","_field","_value","_record","EMPTY","CheckHeaderAction","SortHeaderAction","ACTIONS","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","headerAction","sortMethod","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdMultilineTextBaseStyle","StdTextBaseStyle_1","StdTextBaseStyle","_lineHeight","lineHeight","_autoWrapText","autoWrapText","_lineClamp","lineClamp","fill","getPath2D","Path2D","Path2DShim","pathModule","w","h","save","ud","upsideDown","offsetX","offsetY","xrate","yrate","translate","scale","path2d","restore","__importDefault","getChoices","setDefault","getDefault","theme","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","themes_1","Theme","default","builtin","defTheme","themes","defaultTheme","drawInformationMarkBox","drawExclamationMarkBox","Rect_1","boxWidth","markHeight","getRect","fillStyle","boxRect","fillRect","fillColor","fillRectWithState","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","attach","moveMessageElement","move","_detach","drawCellMessageInternal","MessageElement","EventHandler_1","dom_1","CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","_handler","rootElement","_rootElement","messageElement","createMessageDomElement","detach","_attachCell","getAttachCellsArea","getCellRange","frozenRowCount","frozenColCount","frozenRect","offsetHeight","offsetWidth","toFixed","LG_EVENT_TYPE","BEFORE_CHANGE_VALUE","CHANGED_VALUE","CHANGED_HEADER_VALUE","REJECTED_PASTE_VALUES","Action","actionBind_1","action_utils_1","_action","getState","mouseActiveCell","invalidateCellRange","onPasteCellRangeBox","onDeleteCellRangeBox","BaseInputEditor","Editor_1","open","onOpenCellInternal","input","onInputCellInternal","multi","selectionRange","normalizeValue","stopCellMoving","onChangeSelectCellInternal","selected","onGridScrollInternal","baseRect","getCellRect","rangeRect","getCellRangeRect","onSetInputAttrsInternal","doChangeValue","isSupportMultilineValue","setInputValue","handler","_e","MultilineTextColumn","MenuColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","NUMBER","RADIO","BUTTON","IMAGE","columnType","buttonBgColor","_buttonBgColor","uncheckBgColor","checkBgColor","borderColor","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","_margin","margin","appearance","_appearance","DEFAULT_BAR_COLOR","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","checkColor","uncheckBorderColor","checkBorderColor","_checkColor","_uncheckBorderColor","_checkBorderColor","getCacheOrLoad","loadImage","LRUCache_1","allCache","src","console","error","img","Image","onload","onerror","url","warn","cacheName","cacheSize","cache","put","getCacheOrLoad0","LRUCache","label","caption","normalizeToFn","DrawGrid","hiDPI","paste_utils_1","NumberMap_1","Scrollable_1","canvases_1","cancelEvent","_vibrate","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startRow","startBottom","_getRowHeight","findAfter","candidateRow","ceil","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","drawRect","cellDrawing","drawCells","_getCellDrawing","dcContext","DrawCellContext","_putCellDrawing","pCol","_delayMode","_removeCellDrawing","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","beginPath","underlayBackgroundColor","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","newWidth","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","startCol","endCol","defaultColPxWidth","has","adj","getRowHeightInternal","rowHeightsMap","endRow","getRowsHeightInternal","_getScrollHeight","getScrollHeightInternal","_onKeyDownMove","_c","shiftKey","focusCell","focus","ctrlKey","metaKey","hMove","vMove","moveCellOnTab","newCell","_moveFocusCell","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","selectAllOnCtrlA","invalidate","vDir","hDir","shiftKeyFlg","makeVisibleCell","getOffsetInvalidateCells","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","_updatedSelection","focusControl","selCol","selRow","editMode","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","clientX","pageX","scrollX","clientY","pageY","scrollY","getBoundingClientRect","_bindEvents","scrollable","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","useTouch","useTouchEnd","timeoutId","clearTimeout","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","moving","lastMoving","onKeyDown","onScroll","lastLeft","lastTop","moveX","scrollLeft","moveY","scrollTop","isFrozenCell","setFocusCursor","drawImage","redrawRect","_onScroll","onKeyDownMove","copyRange","getCopyRangeInternal","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","invalidateCell","onBlur","abstractX","abstractY","cellRect","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","touchmove","_mouseMove","passive","touchend","_mouseUp","touchcancel","mousemove","mouseup","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","getColWidth","afterSize","_storeAutoColWidthExprs","updateScroll","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_input","lastInputValue","_isComposition","_compositionEnd","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","dummyInput","pasteText","clipboardData","getData","items","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","removeNames","attr","_inputStatus","removeName","inputStatus","Selection","_sel","_focus","_start","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","_level","_list","drawing","_rectFilter","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","getSelection","rectFilter","_getRectInternal","setRectFilter","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","getCellRelativeRect","protectedSpace","initDocument","createRootElement","Scrollable","transform","alpha","NumberMap","cellTextOverflows","updateSize","bindEventsInternal","hasFocusGrid","cfg","config","newHeight","scrollHeight","scrollWidth","setScrollSize","getRowHeight","setRowHeight","_setRowHeight","setColWidth","getMaxColWidth","setMaxColWidth","maxwidth","getMinColWidth","setMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","frozenColsWidth","frozenRowsHeight","_getScrollableVisibleRect","oldEditMode","invalidateGridRect","cellsRect","invalidateTarget","visibleTop","visibleLeft","_range","getCellOverflowText","setCellOverflowText","overflowText","addDisposable","disposable","disposables","_absoluteY","_startRow","_endRow","strokeStyle","lineWidth","SCROLLBAR_SIZE","initDocumentVar","wrapper","wrapperStyle","overflow","pointerEvents","wrapperWidth","innerWidth","getScrollBarWidth","FilterDataSource","CachedDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","sortArray","createArrayPromise","plist","setArrayField","compare","old","createArray","r1","r2","dummyPromise","catch","inMouse","StdMultilineTextBaseStyle_1","_sortArrowColor","sortArrowColor","_multiline","multiline","string","buildInlines","iconOf","path2DManager","Inline_1","InlineDrawer_1","InlineIcon_1","InlineImage_1","InlinePath2D_1","InlineSvg_1","isIconConstructorOption","InlineIcon","isInlineImageConstructorOption","InlineImage","svg","InlineSvg","path","isInlineSvgConstructorOption","InlinePath2D","registeredIcons","registeredIcon","InlineDrawer","drawWidth","drawHeight","clip","pos","drawRegisteredIcon","inline","il","icons_1","builtins","_draw","_arg","load","check","loads","_testStr","fontFaceSet","fonts","legacy","testStr","ready","imgs_1","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","_loadImage","drawInlineImageRect","drawButton","drawRadioButton","drawCheckbox","measureRadioButton","measureCheckbox","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","roundRect","strokeColorsRect","PI","radius","arc","closePath","stroke","borderColors","strokeRect","positions","preColor","pos1","moveTo","pos2","lineTo","strokeRectLines","fillText","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","size","leftWidth","rightWidth","leftLeftPos","leftTopPos","ratio","checkSize","backgroundColor","shadow","blur","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","EmptyDataCache","newEmptyColumnData","newEmptyHeaderData","columns","seqId","define","headers","getHeader","rows","getBody","GridCanvasHelper","inlineUtils","color_1","INLINE_ELLIPSIS","getColor","getFont","getThemeColor","gridThemeColor","defaultThemeColor","drawInlines","inlines","drawInline","inlineWidths","reduce","inlineWidth","inlineToString","getOverflowInline","isAllowOverflow","getOverflowInlinesIndex","maxWidth","remWidth","breakWidthInlines","indexData","beforeInlines","afterInlines","truncateInlines","overflowInline","_inlineRect","trailingIcon","trailingIconInline","inlineDrawRect","trailingIconWidth","isOverflowInlines","truncInlines","sumWidth","trailingIconRect","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","diff","animElapsedTime","checkbox","positionOpt","ThemeResolver","_checkbox","_radioButton","_button","_header","_messages","_indicators","getCheckboxProp","getRadioButtonProp","getButtonProp","getMessageProp","getIndicatorsProp","_theme","createCalculator","calcWidth","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","frozenRowsColor","paddingNums","multilineText","multilines","multiInlines","rectHeight","buildedMultiInlines","procLineClamp","hasNext","procLine","lineRow","pad","buildedInline","_multiInlineRect","fillCell","defaultBgColor","fillCellWithState","getFillColorState","selectionBgColor","highlightBgColor","frozenRowsBgColor","border","startOffset","borderWithState","highlightBorderColor","frozenRowsBorderColor","buildCheckBoxInline","self","TEXT_OFFSET","CHECKBOX_OFFSET","radioButton","rgbMap","hexToNum","hex","parseInt","createRGB","g","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","colorToRGB0","3","tripleHexToRGB","g1","4","g2","5","b1","6","b2","sextupleHexToRGB","rgb","dummy","styleColor","styleColorToRGB","register","getIcons","ListGrid","tools","core","_getInternal","ListGrid_1","GridCanvasHelper_1","get_internal_1","getInternal","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action_1","ButtonAction_1","CheckEditor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","ImmutableRadioEditor","ImmutableInputEditor","INPUT","columnAction","BUTTON_COLUMN_STATE_ID","CHECK_COLUMN_STATE_ID","_state","block","elapsed","cellKey","onChange","selrange","pasteValue","doGetCellValue","isRejectValue","detail","getColumnDefine","oldValue","newValue","BaseInputEditor_1","InlineInputElement_1","globalElement","bindGridCount","attachInput","editor","InlineInputElement","detachInput","gridFocus","_classList","_type","inputValue","_selected","setInputAttrs","input_value_handler_1","_bindInputEvents","_beforePropEditor","_activeData","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","_attaching","_isActive","stopPropagationOnly","_onKeydownEnter","_onKeydownTab","api","locals","___CSS_LOADER_EXPORT___","InlineMenuElement_1","type_1","menu_items_1","attachMenu","InlineMenuElement","detachMenu","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","getColumnType","hasOptions","normalizePasteValueStr","captionOpt","opt","ITEM_CLASSNAME","findItemParents","attachElement","menu","openMenu","emptyItemEl","valueItemEl","valueindex","span","optionToLi","focusEl","focusIndex","allHeight","transformOrigin","menuClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","bodyClickListenerId","_menu","_bindMenuEvents","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","capture","closeMenu","_doChangeValue","querySelectorAll","BranchGraphStyle_1","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","j","calcCommand","command","timelineData","cmd","from","branch","to","branches","fromTargetIndex","findBranchRootIndex","branchTargetFromIndex","branchPoint","targetLine","merge","fromTargetLine","commitMerge","commitTag","calcBranchesInfo","dataSource","allData","dataIndex","getAllColumnData","_cache","BranchGraphStyle","clearCache","Map","upLineIndexKey","downLineIndexKey","branchColors","branchLineWidth","circleSize","mergeStyle","branchXPoints","tl","textWidth","calcBranchXPoints","upLineIndex","downLineIndex","pointIndex","lineCap","upX","upRect","upY","bezierCurveTo","downX","downRect","downY","renderMerge","triangle_1","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","indicators","topLeftColor","themeSize","topLeftSize","drawPath","baseLeft","baseTop","topRightColor","topRightSize","baseRight","bottomRightColor","bottomRightSize","baseBottom","bottomLeftColor","bottomLeftSize","process","DEFAULT_BRANCH_COLORS","_name","_branchColors","_circleSize","_branchLineWidth","_mergeStyle","_caption","withCaption","active","_tagName","_className","_iconWidth","iconWidth","isNaN","Infinity","repeatArray","maxHeight","calcKeepAspectRatioSize","_map","_cacheSize","idx","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","_min","_max","_formatter","formatter","rate","barMaxWidth","MARGIN","barTop","barLeft","barSize","RADIO_COLUMN_STATE_ID","utils_2","_group","group","_checkAction","checkAction","actionCell","recordStartRow","getRecordStartRowByRecordIndex","getRecordIndexByRow","girdRecords","recordRowCount","targetRow","getAllRecordsFromGrid","showData","flag","SmallDialogInputElement_1","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_dialog","createDialogElement","_bindDialogEvents","dialog","unbindProps","errorMessage","activeData","_onInputValue","bindProps","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","DrawGrid_1","setRatio","devicePixelRatio","getAttribute","wh","_keys","_vals","_sorted","keyFrom","keyTo","elm","low","high","indexFirst","MAX_SCROLL","_p","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","_rCache","_fCache","rowCache","fCache","_setFieldCache","DataSourceIterator","_dataSource","_curIndex","_data","_getIndexData","movePrev","nest","FilterData","dc","original","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","timeout","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","CHECK_HEADER_STATE_ID","checked","getHeaderValue","setHeaderValue","_sort","_executeSort","newState","hasTrueField","fieldRow","sortState","inlineCheck","contents","parser","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","_y","_w","_h","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands_1","builder","argsProvider","_commands","PathCommands","buildPush","rotate","numArgs","ops","pathTokens","subsequentCommand","fst","log","mag","sqrt","pow","angle","acos","dot","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","cost","cos","sint","sin","rotClockwise","xPrime2","pointMul","rx2","ry2","lambda","factor","cPrime","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","lMx","lMy","reflected","lx","ly","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","_icon","letterSpacing","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","FontRuler","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","HAS_WEBKIT_FALLBACK_BUG","match","hasWebKitFallbackBug","callbacks","cb","display","computeStyle","el_","_path","buildSvgDataUrl","XMLSerializer","serializeToString","getSvgElement","DOMParser","parseFromString","svgElem","elmWidth","elmHeight","numElmWidth","numElmHeight","header","registers","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","cacheLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","getLinearGradient","data_1","layout_map_1","MessageHandler_1","style_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","_getCellRange","layoutMap","_updateRect","_getCellValue","headerRowCount","_getField","_getCellMessage","promises","hasMessage","_getCellIcon0","retIcon","iconOpt","_getRecordIndexByRow","_hasField","_onDrawValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","_d","_f","_g","selRecordIndex","selId","getCellId","isSelectCell","flagBorder","borderColorCell","records","_borderWithState","headerIcon","_getCellIcon","_refreshHeader","headerEvents","layout","MultiLayoutMap","SimpleHeaderLayoutMap","headerObjects","ids","columnObjects","columnWidths","minWidth","headerRowHeight","_refreshRowCount","bodyRowCount","_tryWithUpdateDataSource","dataSourceEventIds","_setRecords","newDataSource","ofArray","_setDataSource","_onRangePaste","pasteRowCount","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","editable","startRowOffset","rejectedDetail","addRejectedDetail","processRejected","duplicate","actionRow","valuesRow","valuesCol","newEnd","_onRangeDelete","deleteRowCount","deleteColCount","_oldValue","allowRangePaste","MessageHandler","tooltipHandler","TooltipHandler","oldState","oldField","getHeaderField","newField","headerValues","getColumnAction","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","makeVisibleGridCell","getHeaderCellRange","cellRange","hd","valueCallback","changeValueCallback","_setCellValue","doSetPasteValue","simple_header_layout_1","multi_layout_1","_emptyDataCache","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","headerField","colDef","prev","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","hbLayouut","normalizeLayout","_body","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","_j","_k","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","ErrorMessage","InfoMessage","warning","WarningMessage","normalizeMessage","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","_getMessageInstanceOfMessage","_attach","instance","_move","onSelectMessage","setMessageData","newSel","messageUtils","BaseMessage_1","ErrorMessageElement_1","ErrorMessageElement","_message","_info","messages","errorBgColor","MessageElement_1","infoBgColor","WarningMessageElement_1","WarningMessageElement","warnBgColor","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","Tooltip","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","detachTooltipElement","attachTooltipElement","moveTooltipElement","_isAttachCell","getTooltipInstanceInfo","BaseTooltip_1","TooltipElement_1","BaseTooltip","createTooltipElementInternal","TooltipElement","_tooltipElement","_getTooltipElement","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","maxWidthForRight","symbolManager","pasteUtils","amd"],"mappings":"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","file":"cheetahGrid.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 78);\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style, col, row) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef, col, row);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...super.bindGridEvent(grid, cellId),\r\n            grid.listen('click_cell', (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    var _b, _c, _d, _e, _f, _g, _h;\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row)) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        let flagBorder = false;\r\n        if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\r\n            }\r\n            if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" &&\r\n                ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\r\n                borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if (!flagBorder) {\r\n            helper.border(context, option);\r\n        }\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    grid.frozenRowCount = layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\", \"frozenRowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_b = options.allowRangePaste) !== null && _b !== void 0 ? _b : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n"],"sourceRoot":""}