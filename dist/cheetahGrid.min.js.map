{"version":3,"sources":["cheetahGrid.min/webpack/universalModuleDefinition","cheetahGrid.min/webpack/bootstrap","cheetahGrid.min/./internal/utils.js","cheetahGrid.min/./internal/symbolManager.js","cheetahGrid.min/node_modules/css-loader/dist/runtime/api.js","cheetahGrid.min/./internal/EventHandler.js","cheetahGrid.min/./core/DG_EVENT_TYPE.js","cheetahGrid.min/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","cheetahGrid.min/./columns/style/Style.js","cheetahGrid.min/./columns/type/columnUtils.js","cheetahGrid.min/./columns/type/BaseColumn.js","cheetahGrid.min/./internal/canvases.js","cheetahGrid.min/./columns/action/action-utils.js","cheetahGrid.min/./columns/action/Editor.js","cheetahGrid.min/./internal/dom.js","cheetahGrid.min/./columns/type/Column.js","cheetahGrid.min/./header/type/BaseHeader.js","cheetahGrid.min/./element/Inline.js","cheetahGrid.min/./columns.js","cheetahGrid.min/./internal/animate.js","cheetahGrid.min/./columns/style/BaseStyle.js","cheetahGrid.min/./core/EventTarget.js","cheetahGrid.min/./columns/style/StdBaseStyle.js","cheetahGrid.min/./internal/Rect.js","cheetahGrid.min/./header/type.js","cheetahGrid.min/./columns/action/actionBind.js","cheetahGrid.min/./columns/action/BaseAction.js","cheetahGrid.min/./columns/style.js","cheetahGrid.min/./internal/icons.js","cheetahGrid.min/./columns/utils/index.js","cheetahGrid.min/./internal/calc.js","cheetahGrid.min/./internal/paste-utils.js","cheetahGrid.min/./data/DataSource.js","cheetahGrid.min/./header/action.js","cheetahGrid.min/./header/action/BaseAction.js","cheetahGrid.min/./header/style.js","cheetahGrid.min/./header/style/BaseStyle.js","cheetahGrid.min/./header/style/StdMultilineTextBaseStyle.js","cheetahGrid.min/./internal/path2DManager.js","cheetahGrid.min/./themes.js","cheetahGrid.min/./columns/message/messageUtils.js","cheetahGrid.min/./columns/message/BaseMessage.js","cheetahGrid.min/./columns/message/internal/MessageElement.js","cheetahGrid.min/./list-grid/LG_EVENT_TYPE.js","cheetahGrid.min/./columns/action/Action.js","cheetahGrid.min/./columns/action/BaseInputEditor.js","cheetahGrid.min/./columns/action/internal/input-value-handler.js","cheetahGrid.min/./columns/type.js","cheetahGrid.min/./columns/style/ButtonStyle.js","cheetahGrid.min/./columns/style/CheckStyle.js","cheetahGrid.min/./columns/style/IconStyle.js","cheetahGrid.min/./columns/style/ImageStyle.js","cheetahGrid.min/./columns/style/MenuStyle.js","cheetahGrid.min/./columns/style/MultilineTextStyle.js","cheetahGrid.min/./columns/style/NumberStyle.js","cheetahGrid.min/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.min/./columns/style/RadioStyle.js","cheetahGrid.min/./internal/imgs.js","cheetahGrid.min/./internal/menu-items.js","cheetahGrid.min/./core/DrawGrid.js","cheetahGrid.min/./internal/style.js","cheetahGrid.min/./data.js","cheetahGrid.min/./internal/sort.js","cheetahGrid.min/./header/action/actionBind.js","cheetahGrid.min/./header/style/CheckHeaderStyle.js","cheetahGrid.min/./header/style/StdTextBaseStyle.js","cheetahGrid.min/./header/style/MultilineTextHeaderStyle.js","cheetahGrid.min/./header/style/SortHeaderStyle.js","cheetahGrid.min/./header/style/Style.js","cheetahGrid.min/./element/inlines.js","cheetahGrid.min/./icons.js","cheetahGrid.min/./plugins/icons.js","cheetahGrid.min/./element/InlineDrawer.js","cheetahGrid.min/./internal/fonts.js","cheetahGrid.min/./element/InlineImage.js","cheetahGrid.min/./plugins/themes.js","cheetahGrid.min/./tools/canvashelper.js","cheetahGrid.min/./list-grid/layout-map/internal/utils.js","cheetahGrid.min/./GridCanvasHelper.js","cheetahGrid.min/./internal/color.js","cheetahGrid.min/./main.js","cheetahGrid.min/./columns/action.js","cheetahGrid.min/./columns/action/ButtonAction.js","cheetahGrid.min/node_modules/webpack/buildin/global.js","cheetahGrid.min/./columns/action/CheckEditor.js","cheetahGrid.min/./columns/action/InlineInputEditor.js","cheetahGrid.min/./columns/action/internal/InlineInputElement.js","cheetahGrid.min/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid.min/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid.min/./columns/action/InlineMenuEditor.js","cheetahGrid.min/./columns/action/internal/InlineMenuElement.js","cheetahGrid.min/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid.min/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid.min/./columns/type/BranchGraphColumn.js","cheetahGrid.min/./columns/indicator/handlers.js","cheetahGrid.min/./columns/indicator/triangle.js","cheetahGrid.min/./columns/style/BranchGraphStyle.js","cheetahGrid.min/./columns/type/ButtonColumn.js","cheetahGrid.min/./columns/type/CheckColumn.js","cheetahGrid.min/./columns/type/IconColumn.js","cheetahGrid.min/./columns/type/ImageColumn.js","cheetahGrid.min/./internal/LRUCache.js","cheetahGrid.min/./columns/type/MenuColumn.js","cheetahGrid.min/./columns/type/MultilineTextColumn.js","cheetahGrid.min/./columns/type/NumberColumn.js","cheetahGrid.min/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.min/./columns/type/RadioColumn.js","cheetahGrid.min/./columns/action/RadioEditor.js","cheetahGrid.min/./columns/action/SmallDialogInputEditor.js","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.min/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.min/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid.min/./core.js","cheetahGrid.min/./internal/hiDPI.js","cheetahGrid.min/../src/js/internal/style.css*","cheetahGrid.min/../src/js/internal/style.css","cheetahGrid.min/./internal/NumberMap.js","cheetahGrid.min/./internal/Scrollable.js","cheetahGrid.min/./data/CachedDataSource.js","cheetahGrid.min/./data/FilterDataSource.js","cheetahGrid.min/./headers.js","cheetahGrid.min/./header/action/CheckHeaderAction.js","cheetahGrid.min/./header/action/SortHeaderAction.js","cheetahGrid.min/./header/style/StdBaseStyle.js","cheetahGrid.min/./header/type/CheckHeader.js","cheetahGrid.min/./internal/legacy/canvas/Path2DShim.js","cheetahGrid.min/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.min/./internal/legacy/canvas/PathCommands.js","cheetahGrid.min/./element/InlineIcon.js","cheetahGrid.min/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.min/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.min/./element/InlinePath2D.js","cheetahGrid.min/./element/InlineSvg.js","cheetahGrid.min/./header/type/Header.js","cheetahGrid.min/./header/type/MultilineTextHeader.js","cheetahGrid.min/./header/type/SortHeader.js","cheetahGrid.min/./register.js","cheetahGrid.min/./themes/theme.js","cheetahGrid.min/./themes/BASIC.js","cheetahGrid.min/./themes/MATERIAL_DESIGN.js","cheetahGrid.min/./tools.js","cheetahGrid.min/./ListGrid.js","cheetahGrid.min/./list-grid/layout-map/index.js","cheetahGrid.min/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid.min/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid.min/./columns/message/MessageHandler.js","cheetahGrid.min/./columns/message/ErrorMessage.js","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.min/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/MessageElement.css","cheetahGrid.min/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid.min/./columns/message/InfoMessage.js","cheetahGrid.min/./columns/message/WarningMessage.js","cheetahGrid.min/./columns/message/internal/WarningMessageElement.js","cheetahGrid.min/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid.min/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid.min/./tooltip/TooltipHandler.js","cheetahGrid.min/./tooltip/Tooltip.js","cheetahGrid.min/./tooltip/BaseTooltip.js","cheetahGrid.min/./tooltip/internal/TooltipElement.js","cheetahGrid.min/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid.min/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid.min/./get-internal.js"],"names":["root","factory","window","installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","emptyFn","style","event","str","obj","browser","cellInRange","cellEquals","array","then","getIgnoreCase","getOrApply","applyChainSafe","getChainSafe","isDescendantElement","isNode","isPromise","extend","defaults","omit","each","arrayFind","arrayFindIndex","Array","find","arr","predicate","index","findIndex","undefined","length","IE","Chrome","Firefox","Edge","Safari","ua","navigator","userAgent","toLowerCase","exec","indexOf","analyzeUserAgent","fn","names","data","Boolean","source","omits","result","set","val","configurable","defs","keys","push","args","forEach","target","parentElement","callback","u","k","a","b","col","row","range","start","end","heightLimit","setReadonly","isObject","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","lastIndex","lastIndexOf","genChars","re","next","res","genWords","getMouseButtons","e","buttons","which","button","getKeyCode","keyCode","isTouchEvent","changedTouches","cancel","preventDefault","stopPropagation","toBoxArray","isArray","Function","getCheckHeaderStateId","getInlineMenuEditorStateId","getInlineInputEditorStateId","getSmallDialogInputEditorStateId","getBranchGraphColumnStateId","getColumnFadeinStateId","getButtonColumnStateId","getRadioColumnStateId","getCheckColumnStateId","getProtectedSymbol","require","global","random","cl","mem","useSourceMap","list","this","map","item","content","sourceMap","base64","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","JSON","stringify","concat","sourceURLs","sources","sourceRoot","join","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","id","_i","EventHandler","utils_1","nextId","constructor","_listeners","on","type","listener","options","addEventListener","once","off","tryWithOffEvents","removeEventListener","fire","hasListener","clear","dispose","DG_EVENT_TYPE","CLICK_CELL","DBLCLICK_CELL","DBLTAP_CELL","MOUSEDOWN_CELL","MOUSEDOWN_GRID","MOUSEUP_CELL","SELECTED_CELL","KEYDOWN","MOUSEMOVE_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","TOUCHSTART_CELL","CONTEXTMENU_CELL","INPUT_CELL","PASTE_CELL","DELETE_CELL","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","RESIZE_COLUMN","SCROLL","FOCUS_GRID","BLUR_GRID","memo","isOldIE","document","all","atob","getTarget","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","count","css","media","references","updater","addStyle","insertStyleElement","createElement","attributes","nonce","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_index","splice","Style","StdBaseStyle_1","defaultStyle","StdBaseStyle","super","_color","color","_font","font","_padding","padding","_textOverflow","textOverflow","_appendRightPx","appendRightPx","doChangeStyle","clone","__createBinding","k2","desc","getOwnPropertyDescriptor","writable","__setModuleDefault","v","__importStar","mod","loadIcons","icons","icon","context","helper","argIcon","toCurrentContext","iconList","toNormalizeArray","testFontLoad","BaseColumn","styleContents","BaseStyle_1","animate_1","symbolManager_1","handlers_1","COLUMN_FADEIN_STATE_ID","getFadeinState","grid","state","cells","_generateFadeinPointAction","drawInternal","drawCellBase","point","stateKey","opacity","cellState","ctx","getContext","globalAlpha","fadeinMgr","animate","activeFadeins","f","margeAnimate","option","onDrawCell","_fadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","BaseStyle","cellValue","info","_a","getRecord","getGridCanvasHelper","record","promise","msg","getMessage","Date","now","Promise","0","1","2","message","getDrawRect","time","currentContext","actStyle","of","StyleClass","convertInternal","drawMessageInternal","drawIndicatorsInternal","column","configure","isFadeinWhenCallbackInPromise","messageHandler","drawCellMessage","indicatorTopLeft","indicatorTopRight","indicatorBottomRight","indicatorBottomLeft","indicatorStyle","kind","getDrawIndicator","bindGridEvent","_grid","_cellId","getCopyCellValue","_cell","calcStartPosition","calcBasePosition","getFontSize","fontSizeCache","rect","width","height","offset","left","paddingLeft","right","paddingRight","top","paddingTop","bottom","paddingBottom","textAlign","textBaseline","x","y","fontName","bk","em","measureText","toggleValue","isReadOnlyRecord","isDisabledRecord","getBooleanOptionOfRecord","getRowRecord","disabled","readOnly","replace","Editor","BaseAction_1","BaseAction","_readOnly","onChangeReadOnlyInternal","tagName","classList","text","html","element","add","textContent","innerHTML","toNodeList","arg","node","nodeType","nodeName","dom","slice","toNode","isFocusable","el","tabIndex","findNextSiblingFocusable","findPrevSiblingFocusable","enableFocus","disableFocus","appendHtml","empty","inner","dataset","disableBeforeTabIndex","children","Number","previousSibling","nextSibling","Column","utils","BaseColumn_1","Style_1","getIcon","bgColor","textValue","String","BaseHeader","_options","Inline","getWidth","breakWidth","itr","candidateIndex","chars","ret","beforeWidth","pop","charWidth","beforeContent","afterContent","before","after","_content","canDraw","onReady","_callback","draw","canvashelper","offsetLeft","offsetRight","offsetTop","offsetBottom","fillTextRect","canBreak","splitIndex","breakWord","allWidth","candidate","breakAll","action","cubicBezier","x2","y2","x3","y3","step","abs","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","setTimeout","duration","easing","startedAt","easingFn","canceledFlg","createAnim","resolve","reject","anim","EventTarget_1","STYLE_EVENT_TYPE","CHANGE_STYLE","EventTarget","_bgColor","_indicatorTopLeft","normalizeIndicator","_indicatorTopRight","_indicatorBottomRight","_indicatorBottomLeft","fireListeners","indicator","_","listeners","listenerData","listen","unlisten","hasListeners","_textAlign","_textBaseline","Rect","_left","_top","_width","_height","rect1","rect2","bounds","min","max","_right","_bottom","copy","intersection","x0","x1","y0","y1","contains","another","inPoint","ofCell","MultilineTextHeader","CheckHeader","SortHeader","Header","BaseHeader_1","CheckHeader_1","Header_1","MultilineTextHeader_1","SortHeader_1","TYPES","DEFAULT","SORT","CHECK","MULTILINETEXT","headerType","toUpperCase","headerCell","sort","bindCellKeyAction","bindCellClickAction","DG_EVENT_TYPE_1","cellId","mouseOver","mouseOut","isTarget","getLayoutCellId","getElement","cursor","acceptKeys","keyboardOptions","moveCellOnEnter","sel","selection","select","_disabled","onChangeDisabledInternal","MenuStyle","MultilineTextStyle","PercentCompleteBarStyle","IconStyle","ImageStyle","ButtonStyle","RadioStyle","CheckStyle","NumberStyle","EVENT_TYPE","ButtonStyle_1","CheckStyle_1","IconStyle_1","ImageStyle_1","MenuStyle_1","MultilineTextStyle_1","NumberStyle_1","PercentCompleteBarStyle_1","RadioStyle_1","columnStyle","StyleClassDef","iconPropKeys","getIconProps","ICON_PROP_KEYS","doms","props","className","tagProps","body","beforeStyle","defaultView","getComputedStyle","getPropertyValue","quoted","split","part","test","quote","clientWidth","isLiga","toSimpleArray","iconProps","workData","prop","toPropArray","isIconKey","normalize","toBoolean","toPx","isWhitespace","cp","isDigit","isDot","isUnit","isLowerLetter","isUpperLetter","isLetter","createError","calc","PRECEDENCE","parse","calcStr","lex","tokens","buildBinaryExpNode","stack","op","token","shift","deep","closeIndex","beforeOp","num","unit","exp","trim","len","charCodeAt","parseSign","parseNum","sign","parseUnit","parseFloat","tokenize","toPxInternal","calcNode","full","normalizePasteValue","parsePasteRangeBoxValues","normalizedValue","values","colCount","trimOnPaste","adjustCell","cell","line","char","processQuotedCell","parseValues","rowCount","getCellValue","offsetCol","offsetRow","_b","DataSource","isFieldAssessor","field","UPDATE_LENGTH","UPDATED_LENGTH","UPDATED_ORDER","ascOrderFn","v1","v2","descOrderFn","getValue","setPromiseBack","maybePromiseValue","promiseValue","setField","fieldSet","ss","_getIndex","sortedIndexMap","mapIndex","_sortedIndexMap","_get","_length","_source","getOriginal","getField","getOriginalField","hasField","hasOriginalField","setOriginalField","order","orderFn","sortPromise","rel","results","recordPromiseCallBackInternal","fieldGet","fieldPromiseCallBackInternal","_field","_value","_record","EMPTY","CheckHeaderAction","SortHeaderAction","ACTIONS","CheckHeaderAction_1","SortHeaderAction_1","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","headerAction","sortMethod","MultilineTextHeaderStyle","CheckHeaderStyle","SortHeaderStyle","CheckHeaderStyle_1","MultilineTextHeaderStyle_1","SortHeaderStyle_1","headerStyle","StdMultilineTextBaseStyle","StdTextBaseStyle_1","StdTextBaseStyle","_lineHeight","lineHeight","_autoWrapText","autoWrapText","_lineClamp","lineClamp","fill","getPath2D","Path2D","Path2DShim","pathModule","w","h","save","ud","upsideDown","offsetX","offsetY","xrate","yrate","translate","scale","path2d","restore","__importDefault","getChoices","setDefault","getDefault","theme","MATERIAL_DESIGN","BASIC","theme_1","BASIC_1","MATERIAL_DESIGN_1","themes_1","Theme","default","builtin","defTheme","themes","defaultTheme","drawInformationMarkBox","drawExclamationMarkBox","Rect_1","boxWidth","markHeight","getRect","fillStyle","boxRect","fillRect","fillColor","fillRectWithState","BaseMessage","_messageElement","detachMessageElement","_getMessageElement","createMessageElementInternal","attachMessageElement","attach","moveMessageElement","move","_detach","drawCellMessageInternal","MessageElement","EventHandler_1","dom_1","CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","_handler","rootElement","_rootElement","messageElement","createMessageDomElement","detach","_attachCell","getAttachCellsArea","getCellRange","frozenRowCount","frozenColCount","frozenRect","offsetHeight","offsetWidth","toFixed","LG_EVENT_TYPE","BEFORE_CHANGE_VALUE","CHANGED_VALUE","CHANGED_HEADER_VALUE","REJECTED_PASTE_VALUES","Action","actionBind_1","action_utils_1","_action","getState","mouseActiveCell","invalidateCellRange","onPasteCellRangeBox","onDeleteCellRangeBox","BaseInputEditor","Editor_1","open","onOpenCellInternal","input","onInputCellInternal","multi","selectionRange","normalizeValue","stopCellMoving","onChangeSelectCellInternal","selected","onGridScrollInternal","baseRect","getCellRect","rangeRect","getCellRangeRect","onSetInputAttrsInternal","doChangeValue","isSupportMultilineValue","setInputValue","handler","_e","MultilineTextColumn","MenuColumn","BranchGraphColumn","IconColumn","PercentCompleteBarColumn","ImageColumn","ButtonColumn","RadioColumn","CheckColumn","NumberColumn","BranchGraphColumn_1","ButtonColumn_1","CheckColumn_1","Column_1","IconColumn_1","ImageColumn_1","MenuColumn_1","MultilineTextColumn_1","NumberColumn_1","PercentCompleteBarColumn_1","RadioColumn_1","NUMBER","RADIO","BUTTON","IMAGE","columnType","buttonBgColor","_buttonBgColor","uncheckBgColor","checkBgColor","borderColor","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","_margin","margin","appearance","_appearance","DEFAULT_BAR_COLOR","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","checkColor","uncheckBorderColor","checkBorderColor","_checkColor","_uncheckBorderColor","_checkBorderColor","getCacheOrLoad","loadImage","LRUCache_1","allCache","src","console","error","img","Image","onload","onerror","url","warn","cacheName","cacheSize","cache","put","getCacheOrLoad0","LRUCache","label","caption","normalizeToFn","DrawGrid","hiDPI","paste_utils_1","NumberMap_1","Scrollable_1","canvases_1","cancelEvent","_vibrate","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startRow","startBottom","_getRowHeight","findAfter","candidateRow","ceil","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","drawRect","cellDrawing","drawCells","_getCellDrawing","dcContext","DrawCellContext","_putCellDrawing","pCol","_delayMode","_removeCellDrawing","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","beginPath","underlayBackgroundColor","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","shortCircuit","fullWidth","sumMin","others","autoCount","hasLimitsOnAuto","def","expr","newWidth","autoPx","strDefs","_colWidthDefineToPxWidth","_setColWidth","startCol","endCol","defaultColPxWidth","has","adj","getRowHeightInternal","rowHeightsMap","endRow","getRowsHeightInternal","_getScrollHeight","getScrollHeightInternal","_onKeyDownMove","_c","shiftKey","focusCell","focus","ctrlKey","metaKey","hMove","vMove","moveCellOnTab","newCell","_moveFocusCell","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","selectAllOnCtrlA","invalidate","vDir","hDir","shiftKeyFlg","makeVisibleCell","getOffsetInvalidateCells","extendRange","beforeRange","beforeRect","_setFocusCell","afterRange","afterRect","_updatedSelection","focusControl","selCol","selRow","editMode","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","clientX","pageX","scrollX","clientY","pageY","scrollY","getBoundingClientRect","_bindEvents","scrollable","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","useTouch","useTouchEnd","timeoutId","clearTimeout","defaultPrevented","targetTouches","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","moving","lastMoving","onKeyDown","onScroll","lastLeft","lastTop","moveX","scrollLeft","moveY","scrollTop","isFrozenCell","setFocusCursor","drawImage","redrawRect","_onScroll","onKeyDownMove","copyRange","getCopyRangeInternal","copyLines","copyLine","copyCellValue","strCellValue","onCopy","onPaste","rangeBoxValues","pasteCellEvent","onInput","onDelete","onFocus","focusedGrid","invalidateCell","onBlur","abstractX","abstractY","cellRect","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","events","touchmove","_mouseMove","passive","touchend","_mouseUp","touchcancel","mousemove","mouseup","_moveInternal","_upInternal","CellSelector","_getTargetCell","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","getColWidth","afterSize","_storeAutoColWidthExprs","updateScroll","setSafeInputValue","IGNORE_STORE_ATTRS","FocusControl","_scrollable","_input","lastInputValue","_isComposition","_compositionEnd","inputClear","storeLastInputValue","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","dummyInput","pasteText","clipboardData","getData","items","types","setData","_keyDownMoveCallback","setFocusRect","calcTop","getScrollBarSize","resetInputStatus","composition","attrs","removeNames","attr","_inputStatus","removeName","inputStatus","Selection","_sel","_focus","_start","_end","_callBeforeHooks","_wrapFireSelectedEvent","_setSelectCell","keepSelect","ignoreBeforeHook","_isWrapped","_updateGridRange","points","needChange","_layers","addDraw","level","DrawLayer","_level","_list","drawing","_rectFilter","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","getSelection","rectFilter","_getRectInternal","setRectFilter","_isOutOfRange","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","getCellRelativeRect","protectedSpace","initDocument","createRootElement","Scrollable","transform","alpha","NumberMap","cellTextOverflows","updateSize","bindEventsInternal","hasFocusGrid","cfg","config","newHeight","scrollHeight","scrollWidth","setScrollSize","getRowHeight","setRowHeight","_setRowHeight","setColWidth","getMaxColWidth","setMaxColWidth","maxwidth","getMinColWidth","setMinColWidth","minwidth","getCellsRect","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","frozenColsWidth","frozenRowsHeight","_getScrollableVisibleRect","oldEditMode","invalidateGridRect","cellsRect","invalidateTarget","visibleTop","visibleLeft","_range","getCellOverflowText","setCellOverflowText","overflowText","addDisposable","disposable","disposables","_absoluteY","_startRow","_endRow","strokeStyle","lineWidth","SCROLLBAR_SIZE","initDocumentVar","wrapper","wrapperStyle","overflow","pointerEvents","wrapperWidth","innerWidth","getScrollBarWidth","FilterDataSource","CachedDataSource","DataSource_1","CachedDataSource_1","FilterDataSource_1","sortArray","createArrayPromise","plist","setArrayField","compare","old","createArray","r1","r2","dummyPromise","catch","inMouse","StdMultilineTextBaseStyle_1","_sortArrowColor","sortArrowColor","_multiline","multiline","string","buildInlines","iconOf","path2DManager","Inline_1","InlineDrawer_1","InlineIcon_1","InlineImage_1","InlinePath2D_1","InlineSvg_1","isIconConstructorOption","InlineIcon","isInlineImageConstructorOption","InlineImage","svg","InlineSvg","path","isInlineSvgConstructorOption","InlinePath2D","registeredIcons","registeredIcon","InlineDrawer","drawWidth","drawHeight","clip","pos","drawRegisteredIcon","inline","il","icons_1","builtins","_draw","_arg","load","check","loads","_testStr","fontFaceSet","fonts","legacy","testStr","ready","imgs_1","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_offsetTop","_offsetLeft","_onloaded","_loadImage","drawInlineImageRect","drawButton","drawRadioButton","drawCheckbox","measureRadioButton","measureCheckbox","strokeCircle","fillCircle","strokeRoundRect","fillRoundRect","roundRect","strokeColorsRect","PI","radius","arc","closePath","stroke","borderColors","strokeRect","positions","preColor","pos1","moveTo","pos2","lineTo","strokeRectLines","fillText","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftX","topY","size","leftWidth","rightWidth","leftLeftPos","leftTopPos","ratio","checkSize","backgroundColor","shadow","blur","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","EmptyDataCache","newEmptyColumnData","newEmptyHeaderData","columns","seqId","define","headers","getHeader","rows","getBody","GridCanvasHelper","inlineUtils","color_1","INLINE_ELLIPSIS","getColor","getFont","getThemeColor","gridThemeColor","defaultThemeColor","drawInlines","inlines","drawInline","inlineWidths","reduce","inlineWidth","inlineToString","getOverflowInline","isAllowOverflow","getOverflowInlinesIndex","maxWidth","remWidth","breakWidthInlines","indexData","beforeInlines","afterInlines","truncateInlines","overflowInline","_inlineRect","trailingIcon","trailingIconInline","inlineDrawRect","trailingIconWidth","isOverflowInlines","truncInlines","sumWidth","trailingIconRect","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","diff","animElapsedTime","checkbox","positionOpt","ThemeResolver","_checkbox","_radioButton","_button","_header","_messages","_indicators","getCheckboxProp","getRadioButtonProp","getButtonProp","getMessageProp","getIndicatorsProp","_theme","createCalculator","calcWidth","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","frozenRowsColor","paddingNums","multilineText","multilines","multiInlines","rectHeight","buildedMultiInlines","procLineClamp","hasNext","procLine","lineRow","pad","buildedInline","_multiInlineRect","fillCell","defaultBgColor","fillCellWithState","getFillColorState","selectionBgColor","highlightBgColor","frozenRowsBgColor","border","startOffset","borderWithState","highlightBorderColor","frozenRowsBorderColor","buildCheckBoxInline","self","TEXT_OFFSET","CHECKBOX_OFFSET","radioButton","rgbMap","hexToNum","hex","parseInt","createRGB","g","testRGB","rateToByte","numberPattern","percentPattern","maybePercentPattern","buildRgbWithCommaRegExp","bytePattern","RegExp","buildRgbLv4RegExp","buildRgbaWithCommaRegExp","alphaPattern","buildRgbaLv4RegExp","colorToRGB0","3","tripleHexToRGB","g1","4","g2","5","b1","6","b2","sextupleHexToRGB","rgb","dummy","styleColor","styleColorToRGB","register","getIcons","ListGrid","tools","core","_getInternal","ListGrid_1","GridCanvasHelper_1","get_internal_1","getInternal","InlineMenuEditor","InlineInputEditor","SmallDialogInputEditor","ButtonAction","RadioEditor","CheckEditor","Action_1","ButtonAction_1","CheckEditor_1","InlineInputEditor_1","InlineMenuEditor_1","RadioEditor_1","SmallDialogInputEditor_1","ImmutableCheckEditor","ImmutableRadioEditor","ImmutableInputEditor","INPUT","columnAction","BUTTON_COLUMN_STATE_ID","CHECK_COLUMN_STATE_ID","_state","block","elapsed","cellKey","onChange","selrange","pasteValue","doGetCellValue","isRejectValue","detail","getColumnDefine","oldValue","newValue","BaseInputEditor_1","InlineInputElement_1","globalElement","bindGridCount","attachInput","editor","InlineInputElement","detachInput","gridFocus","_classList","_type","inputValue","_selected","setInputAttrs","input_value_handler_1","_bindInputEvents","_beforePropEditor","_activeData","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","_attaching","_isActive","stopPropagationOnly","_onKeydownEnter","_onKeydownTab","api","locals","___CSS_LOADER_EXPORT___","InlineMenuElement_1","type_1","menu_items_1","attachMenu","InlineMenuElement","detachMenu","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","getColumnType","hasOptions","normalizePasteValueStr","captionOpt","opt","ITEM_CLASSNAME","findItemParents","attachElement","menu","openMenu","emptyItemEl","valueItemEl","valueindex","span","optionToLi","focusEl","focusIndex","allHeight","transformOrigin","menuClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","bodyClickListenerId","_menu","_bindMenuEvents","deregisterBodyClickListener","_deregisterBodyClickListener","_registerBodyClickListener","_onBodyClick","capture","closeMenu","_doChangeValue","querySelectorAll","BranchGraphStyle_1","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","j","calcCommand","command","timelineData","cmd","from","branch","to","branches","fromTargetIndex","findBranchRootIndex","branchTargetFromIndex","branchPoint","targetLine","merge","fromTargetLine","commitMerge","commitTag","calcBranchesInfo","dataSource","allData","dataIndex","getAllColumnData","_cache","BranchGraphStyle","clearCache","Map","upLineIndexKey","downLineIndexKey","branchColors","branchLineWidth","circleSize","mergeStyle","branchXPoints","tl","textWidth","calcBranchXPoints","upLineIndex","downLineIndex","pointIndex","lineCap","upX","upRect","upY","bezierCurveTo","downX","downRect","downY","renderMerge","triangle_1","drawTriangleIndicator","KIND_PROCESS_MAP","themeColor","indicators","topLeftColor","themeSize","topLeftSize","drawPath","baseLeft","baseTop","topRightColor","topRightSize","baseRight","bottomRightColor","bottomRightSize","baseBottom","bottomLeftColor","bottomLeftSize","process","DEFAULT_BRANCH_COLORS","_name","_branchColors","_circleSize","_branchLineWidth","_mergeStyle","_caption","withCaption","active","_tagName","_className","_iconWidth","iconWidth","isNaN","Infinity","repeatArray","maxHeight","calcKeepAspectRatioSize","_map","_cacheSize","idx","withOptions","convertedValue","_convertInternal","basePadding","textPadding","iconPadding","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","_min","_max","_formatter","formatter","rate","barMaxWidth","MARGIN","barTop","barLeft","barSize","RADIO_COLUMN_STATE_ID","utils_2","_group","group","_checkAction","checkAction","actionCell","recordStartRow","getRecordStartRowByRecordIndex","getRecordIndexByRow","girdRecords","recordRowCount","targetRow","getAllRecordsFromGrid","showData","flag","SmallDialogInputElement_1","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_dialog","createDialogElement","_bindDialogEvents","dialog","unbindProps","errorMessage","activeData","_onInputValue","bindProps","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","DrawGrid_1","setRatio","devicePixelRatio","getAttribute","wh","_keys","_vals","_sorted","keyFrom","keyTo","indexFirst","elm","low","high","MAX_SCROLL","_p","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","_rCache","_fCache","rowCache","fCache","_setFieldCache","DataSourceIterator","_dataSource","_curIndex","_data","_getIndexData","movePrev","nest","FilterData","dc","original","_owner","_dataSourceItr","_filter","_filteredList","_queues","filteredList","queues","indexQueue","_findIndex","timeout","_findIndexWithTimeout","testTimeout","dataSourceItr","queue","_filterData","CHECK_HEADER_STATE_ID","checked","getHeaderValue","setHeaderValue","_sort","_executeSort","newState","hasTrueField","fieldRow","sortState","inlineCheck","contents","parser","PathCommandsParser","_ops","arcTo","ellipse","quadraticCurveTo","_y","_w","_h","_radii","CanvasRenderingContext2D","originalFill","apply","PathCommands_1","builder","argsProvider","_commands","PathCommands","buildPush","rotate","numArgs","ops","pathTokens","subsequentCommand","fst","log","mag","sqrt","pow","angle","acos","dot","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","cost","cos","sint","sin","rotClockwise","xPrime2","pointMul","rx2","ry2","lambda","factor","cPrime","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","lMx","lMy","reflected","lx","ly","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","_icon","letterSpacing","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","FontRuler","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","HAS_WEBKIT_FALLBACK_BUG","match","hasWebKitFallbackBug","callbacks","cb","display","computeStyle","el_","_path","buildSvgDataUrl","XMLSerializer","serializeToString","getSvgElement","DOMParser","parseFromString","svgElem","elmWidth","elmHeight","numElmWidth","numElmHeight","header","registers","getProp","superObj","defNames","convertForSuper","defaultValue","getChainSafeWithConvert","superTheme","hasProperty","colorsToColor","hasThemeProperty","extends","colors","colorsArrayToColor","cacheLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","getLinearGradient","data_1","layout_map_1","MessageHandler_1","style_1","style_2","LG_EVENT_TYPE_1","TooltipHandler_1","_getCellRange","layoutMap","_updateRect","_getCellValue","headerRowCount","_getField","_getCellMessage","promises","hasMessage","_getCellIcon0","retIcon","iconOpt","_getRecordIndexByRow","_hasField","_onDrawValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","_d","_f","_g","_j","_k","_l","_m","_o","_q","selRecordIndex","selId","getCellId","isSelectCell","flagBorder","borderColorCell","records","_borderWithState","headerIcon","_getCellIcon","_refreshHeader","headerEvents","layout","MultiLayoutMap","SimpleHeaderLayoutMap","headerObjects","ids","columnObjects","columnWidths","minWidth","headerRowHeight","_refreshRowCount","bodyRowCount","_tryWithUpdateDataSource","dataSourceEventIds","_setRecords","newDataSource","ofArray","_setDataSource","_onRangePaste","pasteRowCount","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","editable","startRowOffset","rejectedDetail","addRejectedDetail","processRejected","duplicate","actionRow","valuesRow","valuesCol","newEnd","_onRangeDelete","deleteRowCount","deleteColCount","_oldValue","allowRangePaste","MessageHandler","tooltipHandler","TooltipHandler","oldState","oldField","getHeaderField","newField","headerValues","getColumnAction","getHeaderDefine","getColumnIndexByField","getCellRangeByField","colObj","layoutRange","getBodyLayoutRangeById","focusGridCell","newFocus","makeVisibleGridCell","getHeaderCellRange","cellRange","hd","valueCallback","changeValueCallback","_setCellValue","doSetPasteValue","simple_header_layout_1","multi_layout_1","_emptyDataCache","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","headerField","colDef","prev","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","hbLayouut","normalizeLayout","_body","_columnCount","widthDef","bodyLayoutRow","recordIndex","layoutRow","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","ErrorMessage","InfoMessage","warning","WarningMessage","normalizeMessage","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","_getMessageInstanceOfMessage","_attach","instance","_move","onSelectMessage","setMessageData","newSel","messageUtils","BaseMessage_1","ErrorMessageElement_1","ErrorMessageElement","_message","_info","messages","errorBgColor","MessageElement_1","infoBgColor","WarningMessageElement_1","WarningMessageElement","warnBgColor","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","Tooltip","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","detachTooltipElement","attachTooltipElement","moveTooltipElement","_isAttachCell","getTooltipInstanceInfo","BaseTooltip_1","TooltipElement_1","BaseTooltip","createTooltipElementInternal","TooltipElement","_tooltipElement","_getTooltipElement","createTooltipDomElement","elementLeft","elementRight","cellCenter","maxWidthForLeft","maxWidthForRight","symbolManager","pasteUtils","amd"],"mappings":"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","file":"cheetahGrid.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 78);\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.emptyFn = exports.style = exports.event = exports.str = exports.obj = exports.browser = exports.cellInRange = exports.cellEquals = exports.array = exports.then = exports.getIgnoreCase = exports.getOrApply = exports.applyChainSafe = exports.getChainSafe = exports.isDescendantElement = exports.isNode = exports.isPromise = exports.extend = exports.defaults = exports.omit = exports.each = void 0;\r\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\r\nexports.isNode = isNode;\r\nlet arrayFind;\r\nlet arrayFindIndex;\r\nconst array = {\r\n    get find() {\r\n        if (arrayFind) {\r\n            return arrayFind;\r\n        }\r\n        if (Array.prototype.find) {\r\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFind = (arr, predicate) => {\r\n                const index = array.findIndex(arr, predicate);\r\n                return index >= 0 ? arr[index] : undefined;\r\n            };\r\n        }\r\n        return arrayFind;\r\n    },\r\n    get findIndex() {\r\n        if (arrayFindIndex) {\r\n            return arrayFindIndex;\r\n        }\r\n        if (Array.prototype.findIndex) {\r\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n        }\r\n        else {\r\n            arrayFindIndex = (arr, predicate) => {\r\n                const { length } = arr;\r\n                for (let i = 0; i < length; i++) {\r\n                    const value = arr[i];\r\n                    if (predicate(value, i, arr)) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            };\r\n        }\r\n        return arrayFindIndex;\r\n    },\r\n};\r\nexports.array = array;\r\nfunction analyzeUserAgent() {\r\n    if (isNode) {\r\n        return {\r\n            IE: false,\r\n            Edge: false,\r\n            Chrome: false,\r\n            Firefox: false,\r\n            Safari: false,\r\n        };\r\n    }\r\n    else {\r\n        const ua = window.navigator.userAgent.toLowerCase();\r\n        return {\r\n            IE: !!/(msie|trident)/.exec(ua),\r\n            Edge: ua.indexOf(\"edge\") > -1,\r\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\r\n            Firefox: ua.indexOf(\"firefox\") > -1,\r\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\r\n        };\r\n    }\r\n}\r\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\r\nfunction setReadonly(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value,\r\n    });\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        fn(obj[key], key, obj);\r\n    }\r\n}\r\nexports.each = each;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction isObject(obj) {\r\n    return obj === Object(obj);\r\n}\r\nfunction omit(source, omits) {\r\n    const result = {};\r\n    for (const key in source) {\r\n        if (omits.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                return source[key];\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.omit = omit;\r\nfunction defaults(source, defs) {\r\n    const keys = [];\r\n    const result = {};\r\n    for (const key in source) {\r\n        keys.push(key);\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    for (const key in defs) {\r\n        if (keys.indexOf(key) >= 0) {\r\n            continue;\r\n        }\r\n        Object.defineProperty(result, key, {\r\n            get() {\r\n                const val = source[key];\r\n                return val === undefined ? defs[key] : val;\r\n            },\r\n            set(val) {\r\n                source[key] = val;\r\n            },\r\n            configurable: true,\r\n            enumerable: true,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.defaults = defaults;\r\nfunction extend(...args) {\r\n    const result = {};\r\n    args.forEach((source) => {\r\n        for (const key in source) {\r\n            Object.defineProperty(result, key, {\r\n                get() {\r\n                    return source[key];\r\n                },\r\n                set(val) {\r\n                    source[key] = val;\r\n                },\r\n                configurable: true,\r\n                enumerable: true,\r\n            });\r\n        }\r\n    });\r\n    return result;\r\n}\r\nexports.extend = extend;\r\nfunction isDescendantElement(root, target) {\r\n    while (target.parentElement) {\r\n        const p = target.parentElement;\r\n        if (root === p) {\r\n            return true;\r\n        }\r\n        target = p;\r\n    }\r\n    return false;\r\n}\r\nexports.isDescendantElement = isDescendantElement;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nfunction applyChainSafe(obj, fn, ...names) {\r\n    let value = obj;\r\n    for (let i = 0; i < names.length && value != null; i++) {\r\n        value = fn(value, names[i]);\r\n    }\r\n    return value;\r\n}\r\nexports.applyChainSafe = applyChainSafe;\r\nfunction getChainSafe(obj, ...names) {\r\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\r\n}\r\nexports.getChainSafe = getChainSafe;\r\nfunction getOrApply(value, ...args) {\r\n    if (typeof value === \"function\") {\r\n        return value(...args);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nexports.getOrApply = getOrApply;\r\n/* eslint-enable @typescript-eslint/no-explicit-any */\r\nfunction endsWith(str, searchString, position) {\r\n    const subjectString = str.toString();\r\n    if (typeof position !== \"number\" ||\r\n        !isFinite(position) ||\r\n        Math.floor(position) !== position ||\r\n        position > subjectString.length) {\r\n        position = subjectString.length;\r\n    }\r\n    position -= searchString.length;\r\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\r\n    return lastIndex !== -1 && lastIndex === position;\r\n}\r\nfunction genChars(s) {\r\n    // Surrogate Code Point\r\n    // [\\uD800-\\uDBFF]\r\n    // Variation Selectors\r\n    // FVS [\\u180B-\\u180D]\r\n    // VS1VS16 [\\uFE00-\\uFE0F]\r\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\r\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction genWords(s) {\r\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\r\n    return {\r\n        next() {\r\n            const res = re.exec(s);\r\n            return res !== null ? res[0] : null;\r\n        },\r\n    };\r\n}\r\nfunction isPromise(data) {\r\n    return Boolean(data && typeof data.then === \"function\");\r\n}\r\nexports.isPromise = isPromise;\r\nfunction then(result, callback) {\r\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n}\r\nexports.then = then;\r\nfunction getMouseButtons(e) {\r\n    if (e.buttons != null) {\r\n        return e.buttons;\r\n    }\r\n    /*for legacy*/\r\n    if (e.which != null) {\r\n        if (e.which === 3) {\r\n            //right?\r\n            return 4;\r\n        }\r\n        if (e.which === 2) {\r\n            //middle?\r\n            return 4;\r\n        }\r\n        return e.which; //left or no\r\n    }\r\n    if (e.button === 0 || e.button === 1) {\r\n        return 1; //candidate left\r\n    }\r\n    if (e.button === 2) {\r\n        return 2; // right\r\n    }\r\n    return 0; //no or middle?\r\n}\r\nfunction getKeyCode(e) {\r\n    return e.keyCode || e.which;\r\n}\r\nfunction isTouchEvent(e) {\r\n    return !!e.changedTouches;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getIgnoreCase(obj, name) {\r\n    if (obj[name]) {\r\n        return obj[name];\r\n    }\r\n    const l = name.toLowerCase();\r\n    if (obj[l]) {\r\n        return obj[l];\r\n    }\r\n    const u = name.toLowerCase();\r\n    if (obj[u]) {\r\n        return obj[u];\r\n    }\r\n    for (const k in obj) {\r\n        if (k.toLowerCase() === l) {\r\n            return obj[k];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getIgnoreCase = getIgnoreCase;\r\nfunction cancel(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n}\r\nfunction toBoxArray(obj) {\r\n    if (!Array.isArray(obj)) {\r\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\r\n    }\r\n    if (obj.length === 3) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[2] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 2) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[1] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[1] /*left*/,\r\n        ];\r\n    }\r\n    if (obj.length === 1) {\r\n        return [\r\n            obj[0] /*top*/,\r\n            obj[0] /*right*/,\r\n            obj[0] /*bottom*/,\r\n            obj[0] /*left*/,\r\n        ];\r\n    }\r\n    return obj;\r\n}\r\nfunction cellEquals(a, b) {\r\n    return a.col === b.col && a.row === b.row;\r\n}\r\nexports.cellEquals = cellEquals;\r\nfunction cellInRange(range, col, row) {\r\n    return (range.start.col <= col &&\r\n        col <= range.end.col &&\r\n        range.start.row <= row &&\r\n        row <= range.end.row);\r\n}\r\nexports.cellInRange = cellInRange;\r\nexports.browser = {\r\n    IE,\r\n    Edge,\r\n    Chrome,\r\n    Firefox,\r\n    Safari,\r\n    // Chrome 16777216 (onl Chrome 33554431)\r\n    // FireFox 17895588\r\n    // IE 10737433\r\n    heightLimit: Chrome ? 16777216 : Firefox ? 17895588 : 10737433, // default IE limit\r\n};\r\nexports.obj = {\r\n    setReadonly,\r\n    isObject,\r\n};\r\nexports.str = {\r\n    endsWith,\r\n    genChars,\r\n    genWords,\r\n};\r\nexports.event = {\r\n    getMouseButtons,\r\n    getKeyCode,\r\n    isTouchEvent,\r\n    cancel,\r\n};\r\nexports.style = {\r\n    toBoxArray,\r\n};\r\nexports.emptyFn = Function.prototype;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCheckHeaderStateId = exports.getInlineMenuEditorStateId = exports.getInlineInputEditorStateId = exports.getSmallDialogInputEditorStateId = exports.getBranchGraphColumnStateId = exports.getColumnFadeinStateId = exports.getButtonColumnStateId = exports.getRadioColumnStateId = exports.getCheckColumnStateId = exports.getProtectedSymbol = exports.get = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst utils_1 = require(\"./utils\");\r\nconst Symbol = utils_1.isNode\r\n    ? global.Symbol\r\n    : window.Symbol\r\n        ? window.Symbol\r\n        : (() => {\r\n            function random() {\r\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\r\n                const cl = c.length;\r\n                let r = \"\";\r\n                for (let i = 0; i < 10; i++) {\r\n                    r += c[Math.floor(Math.random() * cl)];\r\n                }\r\n                return r;\r\n            }\r\n            return (name) => {\r\n                if (name) {\r\n                    return `#${name}_${random()}`;\r\n                }\r\n                else {\r\n                    return `#_${random()}`;\r\n                }\r\n            };\r\n        })();\r\nconst mem = {};\r\nfunction get(name) {\r\n    if (name) {\r\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\r\n    }\r\n    else {\r\n        return Symbol();\r\n    }\r\n}\r\nexports.get = get;\r\nfunction getProtectedSymbol() {\r\n    return get(\"protected\");\r\n}\r\nexports.getProtectedSymbol = getProtectedSymbol;\r\nfunction getCheckColumnStateId() {\r\n    return get(\"chkcol.stateID\");\r\n}\r\nexports.getCheckColumnStateId = getCheckColumnStateId;\r\nfunction getRadioColumnStateId() {\r\n    return get(\"rdcol.stateID\");\r\n}\r\nexports.getRadioColumnStateId = getRadioColumnStateId;\r\nfunction getButtonColumnStateId() {\r\n    return get(\"btncol.stateID\");\r\n}\r\nexports.getButtonColumnStateId = getButtonColumnStateId;\r\nfunction getColumnFadeinStateId() {\r\n    return get(\"col.fadein_stateID\");\r\n}\r\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\r\nfunction getBranchGraphColumnStateId() {\r\n    return get(\"branch_graph_col.stateID\");\r\n}\r\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\r\nfunction getSmallDialogInputEditorStateId() {\r\n    return get(\"small_dialog_input_editor.stateID\");\r\n}\r\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\r\nfunction getInlineInputEditorStateId() {\r\n    return get(\"inline_input_editor.stateID\");\r\n}\r\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\r\nfunction getInlineMenuEditorStateId() {\r\n    return get(\"inline_menu_editor.stateID\");\r\n}\r\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\r\nfunction getCheckHeaderStateId() {\r\n    return get(\"check_header.stateID\");\r\n}\r\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\r\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventHandler = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n/** @private */\r\nlet nextId = 1;\r\nclass EventHandler {\r\n    constructor() {\r\n        this._listeners = {};\r\n    }\r\n    on(target, type, listener, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ...options) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, listener, ...options);\r\n        }\r\n        const obj = {\r\n            target,\r\n            type,\r\n            listener,\r\n            options,\r\n        };\r\n        const id = nextId++;\r\n        this._listeners[id] = obj;\r\n        return id;\r\n    }\r\n    once(target, type, listener, ...options) {\r\n        const id = this.on(target, type, (...args) => {\r\n            this.off(id);\r\n            listener(...args);\r\n        }, ...options);\r\n        return id;\r\n    }\r\n    tryWithOffEvents(target, type, call) {\r\n        const list = [];\r\n        try {\r\n            (0, utils_1.each)(this._listeners, (obj) => {\r\n                if (obj.target === target && obj.type === type) {\r\n                    if (obj.target.removeEventListener) {\r\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n                    }\r\n                    list.push(obj);\r\n                }\r\n            });\r\n            call();\r\n        }\r\n        finally {\r\n            list.forEach((obj) => {\r\n                if (obj.target.addEventListener) {\r\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    off(id) {\r\n        if (id == null) {\r\n            return;\r\n        }\r\n        const obj = this._listeners[id];\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        delete this._listeners[id];\r\n        if (obj.target.removeEventListener) {\r\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n        }\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fire(target, type, ...args) {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                obj.listener.call(obj.target, ...args);\r\n            }\r\n        });\r\n    }\r\n    hasListener(target, type) {\r\n        let result = false;\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target === target && obj.type === type) {\r\n                result = true;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    clear() {\r\n        (0, utils_1.each)(this._listeners, (obj) => {\r\n            if (obj.target.removeEventListener) {\r\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n            }\r\n        });\r\n        this._listeners = {};\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._listeners = null;\r\n    }\r\n}\r\nexports.EventHandler = EventHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DG_EVENT_TYPE = void 0;\r\n/**\r\n * DrawGrid event types\r\n * @classdesc cheetahGrid.core.EVENT_TYPE\r\n * @memberof cheetahGrid.core\r\n */\r\nexports.DG_EVENT_TYPE = {\r\n    CLICK_CELL: \"click_cell\",\r\n    DBLCLICK_CELL: \"dblclick_cell\",\r\n    DBLTAP_CELL: \"dbltap_cell\",\r\n    MOUSEDOWN_CELL: \"mousedown_cell\",\r\n    MOUSEDOWN_GRID: 'mousedown_grid',\r\n    MOUSEUP_CELL: \"mouseup_cell\",\r\n    SELECTED_CELL: \"selected_cell\",\r\n    KEYDOWN: \"keydown\",\r\n    MOUSEMOVE_CELL: \"mousemove_cell\",\r\n    MOUSEENTER_CELL: \"mouseenter_cell\",\r\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\r\n    MOUSEOVER_CELL: \"mouseover_cell\",\r\n    MOUSEOUT_CELL: \"mouseout_cell\",\r\n    TOUCHSTART_CELL: \"touchstart_cell\",\r\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\r\n    INPUT_CELL: \"input_cell\",\r\n    PASTE_CELL: \"paste_cell\",\r\n    DELETE_CELL: \"delete_cell\",\r\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\r\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\r\n    RESIZE_COLUMN: \"resize_column\",\r\n    SCROLL: \"scroll\",\r\n    FOCUS_GRID: \"focus_grid\",\r\n    BLUR_GRID: \"blur_grid\",\r\n};\r\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"clip\";\r\n        this._appendRightPx = style.appendRightPx;\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    get appendRightPx() {\r\n        return this._appendRightPx;\r\n    }\r\n    set appendRightPx(appendRightPx) {\r\n        this._appendRightPx = appendRightPx;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadIcons = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction loadIcons(icon, context, helper, callback) {\r\n    let argIcon = undefined;\r\n    if (icon) {\r\n        if ((0, utils_1.isPromise)(icon)) {\r\n            icon.then((i) => {\r\n                loadIcons(i, context.toCurrentContext(), helper, callback);\r\n            });\r\n        }\r\n        else {\r\n            const iconList = icons.toNormalizeArray(icon);\r\n            iconList.forEach((i) => {\r\n                if (i.font && i.content) {\r\n                    helper.testFontLoad(i.font, i.content, context);\r\n                }\r\n            });\r\n            argIcon = iconList;\r\n        }\r\n    }\r\n    callback(argIcon, context);\r\n}\r\nexports.loadIcons = loadIcons;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseColumn = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst handlers_1 = require(\"../indicator/handlers\");\r\nconst { setReadonly } = utils_1.obj;\r\nconst COLUMN_FADEIN_STATE_ID = (0, symbolManager_1.getColumnFadeinStateId)();\r\nfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n    if (column.fadeinWhenCallbackInPromise != null) {\r\n        return column.fadeinWhenCallbackInPromise;\r\n    }\r\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\r\n}\r\nfunction getFadeinState(grid) {\r\n    let state = grid[COLUMN_FADEIN_STATE_ID];\r\n    if (!state) {\r\n        state = { cells: {} };\r\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nfunction _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n    return (point) => {\r\n        const state = getFadeinState(grid);\r\n        const stateKey = `${row}:${col}`;\r\n        if (point === 1) {\r\n            delete state.cells[stateKey];\r\n        }\r\n        else {\r\n            state.cells[stateKey] = {\r\n                opacity: point,\r\n            };\r\n        }\r\n        drawCellBase();\r\n        drawInternal();\r\n        const cellState = state.cells[stateKey];\r\n        if (cellState) {\r\n            //\r\n            const ctx = context.getContext();\r\n            ctx.globalAlpha = 1 - cellState.opacity;\r\n            try {\r\n                drawCellBase();\r\n            }\r\n            finally {\r\n                ctx.globalAlpha = 1;\r\n            }\r\n        }\r\n    };\r\n}\r\nconst fadeinMgr = {\r\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        // fadein animation\r\n        const state = getFadeinState(grid);\r\n        const activeFadeins = [\r\n            _generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n        ];\r\n        state.activeFadeins = activeFadeins;\r\n        (0, animate_1.animate)(500, (point) => {\r\n            activeFadeins.forEach((f) => f(point));\r\n            if (point === 1) {\r\n                delete state.activeFadeins;\r\n            }\r\n        });\r\n    },\r\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n        const state = getFadeinState(grid);\r\n        if (state.activeFadeins) {\r\n            state.activeFadeins.push(_generateFadeinPointAction(grid, col, row, context, drawInternal, drawCellBase));\r\n        }\r\n        else {\r\n            drawInternal();\r\n        }\r\n    },\r\n};\r\nclass BaseColumn {\r\n    constructor(option) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n        //Promisecallback\r\n        this._fadeinWhenCallbackInPromise = option === null || option === void 0 ? void 0 : option.fadeinWhenCallbackInPromise;\r\n    }\r\n    get fadeinWhenCallbackInPromise() {\r\n        return this._fadeinWhenCallbackInPromise;\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        var _a;\r\n        const { style, getRecord, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        const record = getRecord();\r\n        let promise;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            promise = record;\r\n        }\r\n        else if ((0, utils_1.isPromise)(cellValue)) {\r\n            promise = cellValue;\r\n        }\r\n        else {\r\n            const msg = info.getMessage();\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promise = msg;\r\n            }\r\n        }\r\n        //\r\n        if (promise) {\r\n            const start = Date.now();\r\n            return Promise.all([\r\n                record,\r\n                cellValue,\r\n                promise.then(() => cellValue).then(() => info.getMessage()),\r\n            ]).then(({ 0: record, 1: val, 2: message }) => {\r\n                const currentContext = context.toCurrentContext();\r\n                const drawRect = currentContext.getDrawRect();\r\n                if (!drawRect) {\r\n                    return;\r\n                }\r\n                const time = Date.now() - start;\r\n                const drawInternal = () => {\r\n                    const currentContext = context.toCurrentContext();\r\n                    const drawRect = currentContext.getDrawRect();\r\n                    if (!drawRect) {\r\n                        return;\r\n                    }\r\n                    const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\r\n                    this.drawMessageInternal(message, currentContext, actStyle, helper, grid, info);\r\n                    this.drawIndicatorsInternal(currentContext, actStyle, helper, grid, info);\r\n                };\r\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n                    drawInternal(); //\r\n                }\r\n                else {\r\n                    const { col, row } = context;\r\n                    if (time < 80) {\r\n                        //80msPromiseCallback\r\n                        fadeinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                    else {\r\n                        //\r\n                        fadeinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const actStyle = styleContents.of(style, record, this.StyleClass, context.col, context.row);\r\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\r\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\r\n            this.drawIndicatorsInternal(context, actStyle, helper, grid, info);\r\n            //\r\n            const { col, row } = context;\r\n            const stateKey = `${col}:${row}`;\r\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\r\n            if (cellState) {\r\n                const ctx = context.getContext();\r\n                ctx.globalAlpha = 1 - cellState.opacity;\r\n                try {\r\n                    drawCellBase();\r\n                }\r\n                finally {\r\n                    ctx.globalAlpha = 1;\r\n                }\r\n            }\r\n            return undefined;\r\n        }\r\n    }\r\n    convertInternal(value) {\r\n        return value != null ? value : \"\";\r\n    }\r\n    drawMessageInternal(message, context, style, helper, grid, info) {\r\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\r\n    }\r\n    drawIndicatorsInternal(context, style, helper, grid, info) {\r\n        var _a;\r\n        const { indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = style;\r\n        for (const [indicatorStyle, kind] of [\r\n            [indicatorTopLeft, 0 /* DrawIndicatorKind.topLeft */],\r\n            [indicatorTopRight, 1 /* DrawIndicatorKind.topRight */],\r\n            [indicatorBottomRight, 2 /* DrawIndicatorKind.bottomRight */],\r\n            [indicatorBottomLeft, 3 /* DrawIndicatorKind.bottomLeft */],\r\n        ]) {\r\n            if (indicatorStyle) {\r\n                (_a = (0, handlers_1.getDrawIndicator)(indicatorStyle)) === null || _a === void 0 ? void 0 : _a(context, indicatorStyle, kind, helper, grid, info);\r\n            }\r\n        }\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        return value;\r\n    }\r\n}\r\nexports.BaseColumn = BaseColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calcStartPosition = exports.calcBasePosition = exports.getFontSize = void 0;\r\nconst fontSizeCache = {};\r\nfunction getFontSize(ctx, font) {\r\n    const fontName = font || ctx.font;\r\n    if (fontSizeCache[fontName]) {\r\n        return fontSizeCache[fontName];\r\n    }\r\n    const bk = ctx.font;\r\n    try {\r\n        ctx.font = fontName;\r\n        const em = ctx.measureText(\"\").width;\r\n        return (fontSizeCache[fontName] = {\r\n            width: em,\r\n            height: em,\r\n        });\r\n    }\r\n    finally {\r\n        ctx.font = bk;\r\n    }\r\n}\r\nexports.getFontSize = getFontSize;\r\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    return calcStartPosition(ctx, rect, 0, 0, {\r\n        offset,\r\n        padding: {\r\n            left: paddingLeft,\r\n            right: paddingRight,\r\n            top: paddingTop,\r\n            bottom: paddingBottom,\r\n        },\r\n    });\r\n}\r\nexports.calcBasePosition = calcBasePosition;\r\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\r\n    const textAlign = ctx.textAlign || \"left\";\r\n    const textBaseline = ctx.textBaseline || \"middle\";\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    let x = rect.left + offset + paddingLeft;\r\n    if (textAlign === \"right\" || textAlign === \"end\") {\r\n        x = rect.right - width - offset - paddingRight;\r\n    }\r\n    else if (textAlign === \"center\") {\r\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\r\n    }\r\n    let y = rect.top + offset + paddingTop;\r\n    if (textBaseline === \"bottom\" ||\r\n        textBaseline === \"alphabetic\" ||\r\n        textBaseline === \"ideographic\") {\r\n        y = rect.bottom - height - offset - paddingBottom;\r\n    }\r\n    else if (textBaseline === \"middle\") {\r\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\r\n    }\r\n    return { x, y };\r\n}\r\nexports.calcStartPosition = calcStartPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toggleValue = exports.isReadOnlyRecord = exports.isDisabledRecord = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nfunction isDisabledRecord(option, grid, row) {\r\n    if (grid.disabled) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isDisabledRecord = isDisabledRecord;\r\nfunction isReadOnlyRecord(option, grid, row) {\r\n    if (grid.readOnly) {\r\n        return true;\r\n    }\r\n    return getBooleanOptionOfRecord(option, grid, row);\r\n}\r\nexports.isReadOnlyRecord = isReadOnlyRecord;\r\nfunction toggleValue(val) {\r\n    if (typeof val === \"number\") {\r\n        if (val === 0) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return \"true\";\r\n        }\r\n        else if (val === \"off\") {\r\n            return \"on\";\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return val.replace(/^(0*)0$/, \"$11\");\r\n        }\r\n        else if (val === \"true\") {\r\n            return \"false\";\r\n        }\r\n        else if (val === \"on\") {\r\n            return \"off\";\r\n        }\r\n        else if (/^0*1$/.exec(val)) {\r\n            return val.replace(/^(0*)1$/, \"$10\");\r\n        }\r\n    }\r\n    return !val;\r\n}\r\nexports.toggleValue = toggleValue;\r\nfunction getBooleanOptionOfRecord(option, grid, row) {\r\n    if (typeof option === \"function\") {\r\n        const record = grid.getRowRecord(row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return true;\r\n        }\r\n        return !!option(record);\r\n    }\r\n    return !!option;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Editor = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nclass Editor extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._readOnly = option.readOnly || false;\r\n    }\r\n    get editable() {\r\n        return true;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n    set readOnly(readOnly) {\r\n        this._readOnly = readOnly;\r\n        this.onChangeReadOnlyInternal();\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // abstruct\r\n    }\r\n}\r\nexports.Editor = Editor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.findNextSiblingFocusable = exports.findPrevSiblingFocusable = exports.isFocusable = exports.enableFocus = exports.disableFocus = exports.appendHtml = exports.toNodeList = exports.empty = exports.createElement = void 0;\r\nfunction createElement(tagName, { classList, text, html, } = {}) {\r\n    const element = document.createElement(tagName);\r\n    if (classList) {\r\n        if (Array.isArray(classList)) {\r\n            element.classList.add(...classList);\r\n        }\r\n        else {\r\n            element.classList.add(classList);\r\n        }\r\n    }\r\n    if (text) {\r\n        element.textContent = text;\r\n    }\r\n    else if (html) {\r\n        element.innerHTML = html;\r\n    }\r\n    return element;\r\n}\r\nexports.createElement = createElement;\r\nfunction empty(dom) {\r\n    let c;\r\n    while ((c = dom.firstChild)) {\r\n        dom.removeChild(c);\r\n    }\r\n}\r\nexports.empty = empty;\r\nfunction isNode(arg) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n    if (isNode(arg)) {\r\n        return arg;\r\n    }\r\n    const dom = createElement(\"div\", { html: arg });\r\n    return Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n    if (Array.isArray(arg)) {\r\n        const result = [];\r\n        arg.forEach((e) => {\r\n            result.push(...toNodeList(e));\r\n        });\r\n        return result;\r\n    }\r\n    const node = toNode(arg);\r\n    return Array.isArray(node) ? node : [node];\r\n}\r\nexports.toNodeList = toNodeList;\r\nfunction appendHtml(dom, inner) {\r\n    toNodeList(inner).forEach((node) => {\r\n        dom.appendChild(node);\r\n    });\r\n}\r\nexports.appendHtml = appendHtml;\r\nfunction disableFocus(el) {\r\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\r\n    el.tabIndex = -1;\r\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nexports.disableFocus = disableFocus;\r\nfunction enableFocus(el) {\r\n    if (\"disableBeforeTabIndex\" in el.dataset) {\r\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\r\n    }\r\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\nexports.enableFocus = enableFocus;\r\nfunction isFocusable(el) {\r\n    return (el.tabIndex != null && el.tabIndex > -1);\r\n}\r\nexports.isFocusable = isFocusable;\r\nfunction findPrevSiblingFocusable(el) {\r\n    let n = el.previousSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.previousSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\r\nfunction findNextSiblingFocusable(el) {\r\n    let n = el.nextSibling;\r\n    while (n && !isFocusable(n)) {\r\n        n = n.nextSibling;\r\n    }\r\n    return n;\r\n}\r\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Column = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Column extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    clone() {\r\n        return new Column(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, appendRightPx, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.text(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n                icons,\r\n                appendRightPx,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.Column = Column;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseHeader = void 0;\r\nconst styleContents = __importStar(require(\"../style\"));\r\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\r\nclass BaseHeader {\r\n    constructor(_options = {}) {\r\n        this.onDrawCell = this.onDrawCell.bind(this); //\r\n    }\r\n    get StyleClass() {\r\n        return BaseStyle_1.BaseStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        const { style, drawCellBase } = info;\r\n        const helper = grid.getGridCanvasHelper();\r\n        drawCellBase();\r\n        //\r\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\r\n    }\r\n    convertInternal(value) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        return value != null ? `${value}` : \"\";\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    getCopyCellValue(value, _grid, _cell) {\r\n        if (typeof value === \"function\") {\r\n            value = value();\r\n        }\r\n        return value != null ? value : \"\";\r\n    }\r\n}\r\nexports.BaseHeader = BaseHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inline = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nfunction getWidth(ctx, content) {\r\n    return ctx.measureText(content).width;\r\n}\r\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\r\n    const chars = [];\r\n    let ret = itr.next();\r\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\r\n        chars.push(ret);\r\n    }\r\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\r\n    if (beforeWidth > width) {\r\n        while (chars.length) {\r\n            const c = chars.pop();\r\n            beforeWidth -= getWidth(ctx, c || \"\");\r\n            if (beforeWidth <= width) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (beforeWidth < width) {\r\n        while (ret !== null) {\r\n            const charWidth = getWidth(ctx, ret);\r\n            if (beforeWidth + charWidth > width) {\r\n                break;\r\n            }\r\n            chars.push(ret);\r\n            beforeWidth += charWidth;\r\n            ret = itr.next();\r\n        }\r\n    }\r\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\r\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\r\n    return {\r\n        before: beforeContent ? new Inline(beforeContent) : null,\r\n        after: afterContent ? new Inline(afterContent) : null,\r\n    };\r\n}\r\nclass Inline {\r\n    constructor(content) {\r\n        this._content = content != null ? content : \"\";\r\n    }\r\n    width({ ctx }) {\r\n        return getWidth(ctx, this._content);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft,\r\n                right: offsetRight,\r\n                top: offsetTop,\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return !!this._content;\r\n    }\r\n    splitIndex(index) {\r\n        const content = this._content;\r\n        const itr = utils_1.str.genChars(content);\r\n        const chars = [];\r\n        let ret = itr.next();\r\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\r\n            chars.push(ret);\r\n        }\r\n        const beforeContent = chars.join(\"\");\r\n        const afterContent = content.slice(beforeContent.length);\r\n        return {\r\n            before: beforeContent ? new Inline(beforeContent) : null,\r\n            after: afterContent ? new Inline(afterContent) : null,\r\n        };\r\n    }\r\n    breakWord(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genWords(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    breakAll(ctx, width) {\r\n        const content = this._content;\r\n        const allWidth = this.width({ ctx });\r\n        const candidate = Math.floor((this._content.length * width) / allWidth);\r\n        const itr = utils_1.str.genChars(content);\r\n        return breakWidth(ctx, content, itr, candidate, width);\r\n    }\r\n    toString() {\r\n        return this._content;\r\n    }\r\n}\r\nexports.Inline = Inline;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./columns/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./columns/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./columns/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.animate = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction cubicBezier(x2, y2, x3, y3) {\r\n    let step;\r\n    const err = 0.0001;\r\n    x2 *= 3;\r\n    y2 *= 3;\r\n    x3 *= 3;\r\n    y3 *= 3;\r\n    return function (t) {\r\n        let p, a, b, c, d, x, s;\r\n        if (t < 0 || 1 < t) {\r\n            throw new Error(`${t}`);\r\n        }\r\n        p = step || t;\r\n        do {\r\n            a = 1 - p;\r\n            b = a * a;\r\n            c = p * p;\r\n            d = c * p;\r\n            x = x2 * b * p + x3 * a * c + d;\r\n            s = t - x;\r\n            p += s * 0.5;\r\n        } while (err < Math.abs(s));\r\n        step = p;\r\n        return y2 * b * p + y3 * a * c + d;\r\n    };\r\n}\r\nconst EASINGS = {\r\n    linear(p) {\r\n        return p;\r\n    },\r\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\r\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\r\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\r\n};\r\nconst raf = (utils_1.isNode\r\n    ? () => { }\r\n    : window.requestAnimationFrame ||\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        ((fn) => setTimeout(fn, 1)));\r\nfunction now() {\r\n    return Date.now();\r\n}\r\n/**\r\n * <pre>\r\n * Animates.\r\n * </pre>\r\n * @function\r\n * @param {number} duration animation time.\r\n * @param {function} step step\r\n * @param {function|string} easing easing\r\n * @returns {object} Deferred object.\r\n */\r\nfunction animate(duration, step, easing) {\r\n    const startedAt = now();\r\n    const easingFn = easing == null\r\n        ? EASINGS.easeInOut\r\n        : typeof easing === \"string\"\r\n            ? EASINGS[easing]\r\n            : easing;\r\n    let canceledFlg = false;\r\n    const createAnim = (resolve, reject) => {\r\n        const anim = () => {\r\n            const point = now() - startedAt;\r\n            if (canceledFlg) {\r\n                //cancel\r\n                if (reject) {\r\n                    reject();\r\n                }\r\n            }\r\n            else if (point >= duration) {\r\n                //end\r\n                step(1);\r\n                if (resolve) {\r\n                    resolve();\r\n                }\r\n            }\r\n            else {\r\n                step(easingFn(point / duration));\r\n                raf(anim);\r\n            }\r\n        };\r\n        return anim;\r\n    };\r\n    const cancel = () => {\r\n        canceledFlg = true;\r\n    };\r\n    if (typeof Promise !== \"undefined\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const result = new Promise((resolve, reject) => {\r\n            const anim = createAnim(resolve, reject);\r\n            step(0);\r\n            anim();\r\n        });\r\n        result.cancel = cancel;\r\n        return result;\r\n    }\r\n    else {\r\n        const anim = createAnim(() => { }, () => { });\r\n        step(0);\r\n        anim();\r\n        return {\r\n            cancel,\r\n        };\r\n    }\r\n}\r\nexports.animate = animate;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst STYLE_EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return STYLE_EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor, indicatorTopLeft, indicatorTopRight, indicatorBottomRight, indicatorBottomLeft, } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopLeft() {\r\n        return this._indicatorTopLeft;\r\n    }\r\n    set indicatorTopLeft(indicatorTopLeft) {\r\n        this._indicatorTopLeft = normalizeIndicator(indicatorTopLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorTopRight() {\r\n        return this._indicatorTopRight;\r\n    }\r\n    set indicatorTopRight(indicatorTopRight) {\r\n        this._indicatorTopRight = normalizeIndicator(indicatorTopRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomRight() {\r\n        return this._indicatorBottomRight;\r\n    }\r\n    set indicatorBottomRight(indicatorBottomRight) {\r\n        this._indicatorBottomRight = normalizeIndicator(indicatorBottomRight);\r\n        this.doChangeStyle();\r\n    }\r\n    get indicatorBottomLeft() {\r\n        return this._indicatorBottomLeft;\r\n    }\r\n    set indicatorBottomLeft(indicatorBottomLeft) {\r\n        this._indicatorBottomLeft = normalizeIndicator(indicatorBottomLeft);\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\nfunction normalizeIndicator(indicator) {\r\n    if (typeof indicator === \"string\") {\r\n        return { style: indicator };\r\n    }\r\n    return indicator;\r\n}\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventTarget = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\n/** @private */\r\nconst _ = (0, symbolManager_1.get)();\r\n/** @private */\r\nlet nextId = 1;\r\n/**\r\n * event target.\r\n */\r\nclass EventTarget {\r\n    constructor() {\r\n        this[_a] = {\r\n            listeners: {},\r\n            listenerData: {},\r\n        };\r\n    }\r\n    /**\r\n     * Adds an event listener.\r\n     * @param  {string} type The event type id.\r\n     * @param  {function} listener Callback method.\r\n     * @return {number} unique id for the listener.\r\n     */\r\n    listen(type, listener) {\r\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n        list.push(listener);\r\n        const id = nextId++;\r\n        this[_].listenerData[id] = {\r\n            type,\r\n            listener,\r\n            remove: () => {\r\n                delete this[_].listenerData[id];\r\n                const index = list.indexOf(listener);\r\n                list.splice(index, 1);\r\n                if (!this[_].listeners[type].length) {\r\n                    delete this[_].listeners[type];\r\n                }\r\n            },\r\n        };\r\n        return id;\r\n    }\r\n    /**\r\n     * Removes an event listener which was added with listen() by the id returned by listen().\r\n     * @param  {number} id the id returned by listen().\r\n     * @return {void}\r\n     */\r\n    unlisten(id) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        this[_].listenerData[id].remove();\r\n    }\r\n    addEventListener(type, listener) {\r\n        this.listen(type, listener);\r\n    }\r\n    removeEventListener(type, listener) {\r\n        if (!this[_]) {\r\n            return;\r\n        }\r\n        (0, utils_1.each)(this[_].listenerData, (obj, id) => {\r\n            if (obj.type === type && obj.listener === listener) {\r\n                this.unlisten(id);\r\n            }\r\n        });\r\n    }\r\n    hasListeners(type) {\r\n        if (!this[_]) {\r\n            return false;\r\n        }\r\n        return !!this[_].listeners[type];\r\n    }\r\n    /**\r\n     * Fires all registered listeners\r\n     * @param  {string}    type The type of the listeners to fire.\r\n     * @param  {...*} args fire arguments\r\n     * @return {*} the result of the last listener\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    fireListeners(type, ...args) {\r\n        if (!this[_]) {\r\n            return [];\r\n        }\r\n        const list = this[_].listeners[type];\r\n        if (!list) {\r\n            return [];\r\n        }\r\n        return list\r\n            .map((listener) => listener.call(this, ...args))\r\n            .filter((r) => r != null);\r\n    }\r\n    dispose() {\r\n        // @ts-expect-error -- ignore\r\n        delete this[_];\r\n    }\r\n}\r\nexports.EventTarget = EventTarget;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Rect = void 0;\r\nclass Rect {\r\n    constructor(left, top, width, height) {\r\n        this._left = left;\r\n        this._top = top;\r\n        this._width = width;\r\n        this._height = height;\r\n    }\r\n    static bounds(left, top, right, bottom) {\r\n        return new Rect(left, top, right - left, bottom - top);\r\n    }\r\n    static max(rect1, rect2) {\r\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\r\n    }\r\n    get left() {\r\n        return this._left;\r\n    }\r\n    set left(left) {\r\n        const { right } = this;\r\n        this._left = left;\r\n        this.right = right;\r\n    }\r\n    get top() {\r\n        return this._top;\r\n    }\r\n    set top(top) {\r\n        const { bottom } = this;\r\n        this._top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    set width(width) {\r\n        this._width = width;\r\n        this._right = undefined;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    set height(height) {\r\n        this._height = height;\r\n        this._bottom = undefined;\r\n    }\r\n    get right() {\r\n        return this._right !== undefined\r\n            ? this._right\r\n            : (this._right = this.left + this.width);\r\n    }\r\n    set right(right) {\r\n        this._right = right;\r\n        this.width = right - this.left;\r\n    }\r\n    get bottom() {\r\n        return this._bottom !== undefined\r\n            ? this._bottom\r\n            : (this._bottom = this.top + this.height);\r\n    }\r\n    set bottom(bottom) {\r\n        this._bottom = bottom;\r\n        this.height = bottom - this.top;\r\n    }\r\n    offsetLeft(offset) {\r\n        this._left += offset;\r\n        this._right = undefined;\r\n    }\r\n    offsetTop(offset) {\r\n        this._top += offset;\r\n        this._bottom = undefined;\r\n    }\r\n    copy() {\r\n        return new Rect(this.left, this.top, this.width, this.height);\r\n    }\r\n    intersection(rect) {\r\n        const x0 = Math.max(this.left, rect.left);\r\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n        if (x0 <= x1) {\r\n            const y0 = Math.max(this.top, rect.top);\r\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n            if (y0 <= y1) {\r\n                return Rect.bounds(x0, y0, x1, y1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    contains(another) {\r\n        return (this.left <= another.left &&\r\n            this.left + this.width >= another.left + another.width &&\r\n            this.top <= another.top &&\r\n            this.top + this.height >= another.top + another.height);\r\n    }\r\n    inPoint(x, y) {\r\n        return (this.left <= x &&\r\n            this.left + this.width >= x &&\r\n            this.top <= y &&\r\n            this.top + this.height >= y);\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.MultilineTextHeader = exports.CheckHeader = exports.SortHeader = exports.Header = exports.BaseHeader = void 0;\r\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\r\nObject.defineProperty(exports, \"BaseHeader\", { enumerable: true, get: function () { return BaseHeader_1.BaseHeader; } });\r\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\r\nObject.defineProperty(exports, \"CheckHeader\", { enumerable: true, get: function () { return CheckHeader_1.CheckHeader; } });\r\nconst Header_1 = require(\"./type/Header\");\r\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_1.Header; } });\r\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\r\nObject.defineProperty(exports, \"MultilineTextHeader\", { enumerable: true, get: function () { return MultilineTextHeader_1.MultilineTextHeader; } });\r\nconst SortHeader_1 = require(\"./type/SortHeader\");\r\nObject.defineProperty(exports, \"SortHeader\", { enumerable: true, get: function () { return SortHeader_1.SortHeader; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Header_1.Header(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new SortHeader_1.SortHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckHeader_1.CheckHeader(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\r\n};\r\nfunction of(headerType) {\r\n    if (!headerType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof headerType === \"string\") {\r\n        const key = headerType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return headerType;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        return TYPES.SORT;\r\n    }\r\n    return of(headerCell.headerType);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(e.row))) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            if ((0, utils_1.isPromise)(grid.getRowRecord(sel.row))) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // abstract\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MenuStyle = exports.MultilineTextStyle = exports.PercentCompleteBarStyle = exports.IconStyle = exports.ImageStyle = exports.ButtonStyle = exports.RadioStyle = exports.CheckStyle = exports.NumberStyle = exports.Style = exports.BaseStyle = exports.EVENT_TYPE = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\r\nObject.defineProperty(exports, \"ButtonStyle\", { enumerable: true, get: function () { return ButtonStyle_1.ButtonStyle; } });\r\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\r\nObject.defineProperty(exports, \"CheckStyle\", { enumerable: true, get: function () { return CheckStyle_1.CheckStyle; } });\r\nconst IconStyle_1 = require(\"./style/IconStyle\");\r\nObject.defineProperty(exports, \"IconStyle\", { enumerable: true, get: function () { return IconStyle_1.IconStyle; } });\r\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\r\nObject.defineProperty(exports, \"ImageStyle\", { enumerable: true, get: function () { return ImageStyle_1.ImageStyle; } });\r\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\r\nObject.defineProperty(exports, \"MenuStyle\", { enumerable: true, get: function () { return MenuStyle_1.MenuStyle; } });\r\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\r\nObject.defineProperty(exports, \"MultilineTextStyle\", { enumerable: true, get: function () { return MultilineTextStyle_1.MultilineTextStyle; } });\r\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\r\nObject.defineProperty(exports, \"NumberStyle\", { enumerable: true, get: function () { return NumberStyle_1.NumberStyle; } });\r\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\r\nObject.defineProperty(exports, \"PercentCompleteBarStyle\", { enumerable: true, get: function () { return PercentCompleteBarStyle_1.PercentCompleteBarStyle; } });\r\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\r\nObject.defineProperty(exports, \"RadioStyle\", { enumerable: true, get: function () { return RadioStyle_1.RadioStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\r\nexports.EVENT_TYPE = EVENT_TYPE;\r\nfunction of(columnStyle, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nrecord, StyleClassDef = Style_1.Style, col, row) {\r\n    if (columnStyle) {\r\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\r\n            return columnStyle;\r\n        }\r\n        else if (typeof columnStyle === \"function\") {\r\n            return of(columnStyle(record, col, row), record, StyleClassDef, col, row);\r\n        }\r\n        else if (record && columnStyle in record) {\r\n            return of(record[columnStyle], record, StyleClassDef, col, row);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new StyleClassDef(columnStyle);\r\n    }\r\n    else {\r\n        return StyleClassDef.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.iconPropKeys = exports.toNormalizeArray = exports.getIconProps = void 0;\r\nconst ICON_PROP_KEYS = [\r\n    \"content\",\r\n    \"font\",\r\n    \"color\",\r\n    \"className\",\r\n    \"tagName\",\r\n    \"isLiga\",\r\n    \"width\",\r\n    \"src\",\r\n    \"svg\",\r\n    \"name\",\r\n    \"path\",\r\n    \"offsetTop\",\r\n    \"offsetLeft\",\r\n];\r\nfunction quote(name) {\r\n    const quoted = [];\r\n    const split = name.split(/,\\s*/);\r\n    for (let i = 0; i < split.length; i++) {\r\n        const part = split[i].replace(/['\"]/g, \"\");\r\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\r\n            quoted.push(part);\r\n        }\r\n        else {\r\n            quoted.push(`'${part}'`);\r\n        }\r\n    }\r\n    return quoted.join(\",\");\r\n}\r\nconst doms = {};\r\nconst props = {};\r\nfunction getIconProps(tagName, className) {\r\n    const tagProps = props[tagName] || (props[tagName] = {});\r\n    if (tagProps[className]) {\r\n        return tagProps[className];\r\n    }\r\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n    // `classList.add()` cannot be used because it may be separated by spaces.\r\n    dom.className = className;\r\n    dom.classList.add(\"cheetah-grid-icon\");\r\n    document.body.appendChild(dom);\r\n    try {\r\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\r\n        let content = beforeStyle.getPropertyValue(\"content\");\r\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\r\n            if (content[0] === content[content.length - 1]) {\r\n                content = content.slice(1, -1);\r\n            }\r\n        }\r\n        let font = beforeStyle.getPropertyValue(\"font\");\r\n        if (!font) {\r\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\r\n        }\r\n        const color = beforeStyle.getPropertyValue(\"color\");\r\n        const width = dom.clientWidth;\r\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\r\n        return (tagProps[className] = {\r\n            content,\r\n            font,\r\n            color,\r\n            width,\r\n            isLiga,\r\n        });\r\n    }\r\n    finally {\r\n        document.body.removeChild(dom);\r\n    }\r\n}\r\nexports.getIconProps = getIconProps;\r\nfunction toPropArray(prop, count) {\r\n    const result = [];\r\n    if (Array.isArray(prop)) {\r\n        result.push(...prop);\r\n        for (let i = prop.length; i < count; i++) {\r\n            result.push(null);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < count; i++) {\r\n            result.push(prop);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction toSimpleArray(iconProps) {\r\n    if (!iconProps) {\r\n        return iconProps;\r\n    }\r\n    else if (Array.isArray(iconProps)) {\r\n        return iconProps;\r\n    }\r\n    const workData = {};\r\n    let count = 0;\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const prop = iconProps[k];\r\n        if (prop) {\r\n            if (Array.isArray(prop)) {\r\n                count = Math.max(count, prop.length);\r\n            }\r\n            else {\r\n                count = Math.max(count, 1);\r\n            }\r\n        }\r\n    });\r\n    ICON_PROP_KEYS.forEach((k) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const arr = toPropArray(iconProps[k], count);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        workData[k] = arr;\r\n    });\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const data = {};\r\n        ICON_PROP_KEYS.forEach((k) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const val = workData[k][i];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = val;\r\n        });\r\n        result.push(data);\r\n    }\r\n    return result;\r\n}\r\nfunction normalize(iconProps) {\r\n    const data = {};\r\n    for (const k in iconProps) {\r\n        if (k === \"className\") {\r\n            continue;\r\n        }\r\n        if (isIconKey(k)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            data[k] = iconProps[k];\r\n        }\r\n    }\r\n    if (iconProps.className) {\r\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\r\n        for (const k in prop) {\r\n            if (isIconKey(k)) {\r\n                if (iconProps[k] == null) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    data[k] = prop[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return data;\r\n}\r\nfunction toNormalizeArray(iconProps) {\r\n    const icons = toSimpleArray(iconProps);\r\n    if (!icons) {\r\n        return icons;\r\n    }\r\n    return icons.map((icon) => normalize(icon));\r\n}\r\nexports.toNormalizeArray = toNormalizeArray;\r\nexports.iconPropKeys = ICON_PROP_KEYS;\r\nfunction isIconKey(k) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toBoolean = void 0;\r\nfunction toBoolean(val) {\r\n    if (typeof val === \"string\") {\r\n        if (val === \"false\") {\r\n            return false;\r\n        }\r\n        else if (val === \"off\") {\r\n            return false;\r\n        }\r\n        else if (/^0+$/.exec(val)) {\r\n            return false;\r\n        }\r\n    }\r\n    return Boolean(val);\r\n}\r\nexports.toBoolean = toBoolean;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toPx = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst TYPE_PAREN = 0;\r\nconst TYPE_UNIT = 1;\r\nconst TYPE_OPERATOR = 2;\r\nconst TYPE_NUMBER = 3;\r\nconst NODE_TYPE_UNIT = 10;\r\nconst NODE_TYPE_BINARY_EXPRESSION = 11;\r\nconst NODE_TYPE_NUMBER = 12;\r\nconst TABULATION = 0x09;\r\nconst CARRIAGE_RETURN = 0x0d;\r\nconst LINE_FEED = 0x0a;\r\nconst FORM_FEED = 0x0c;\r\nconst SPACE = 0x20;\r\nconst PERCENT = 0x25;\r\nconst FULL_STOP = 0x2e;\r\nconst DIGIT_0 = 0x30;\r\nconst DIGIT_9 = 0x39;\r\nconst LATIN_CAPITAL_A = 0x41;\r\nconst LATIN_CAPITAL_Z = 0x5a;\r\nconst LATIN_SMALL_A = 0x61;\r\nconst LATIN_SMALL_Z = 0x7a;\r\nfunction isUpperLetter(cp) {\r\n    return cp >= LATIN_CAPITAL_A && cp <= LATIN_CAPITAL_Z;\r\n}\r\nfunction isLowerLetter(cp) {\r\n    return cp >= LATIN_SMALL_A && cp <= LATIN_SMALL_Z;\r\n}\r\nfunction isLetter(cp) {\r\n    return isLowerLetter(cp) || isUpperLetter(cp);\r\n}\r\nfunction isWhitespace(cp) {\r\n    return (cp === TABULATION ||\r\n        cp === LINE_FEED ||\r\n        cp === FORM_FEED ||\r\n        cp === CARRIAGE_RETURN ||\r\n        cp === SPACE);\r\n}\r\nfunction isDigit(cp) {\r\n    return cp >= DIGIT_0 && cp <= DIGIT_9;\r\n}\r\nfunction isDot(cp) {\r\n    return cp === FULL_STOP;\r\n}\r\nfunction isUnit(cp) {\r\n    return isLetter(cp) || cp === PERCENT;\r\n}\r\nfunction createError(calc) {\r\n    return new Error(`calc parse error: ${calc}`);\r\n}\r\n/**\r\n * tokenize\r\n * @param {string} calc calc expression\r\n * @returns {Array} tokens\r\n * @private\r\n */\r\nfunction tokenize(calc) {\r\n    const exp = calc.replace(/calc\\(/g, \"(\").trim();\r\n    const tokens = [];\r\n    const len = exp.length;\r\n    for (let index = 0; index < len; index++) {\r\n        const c = exp[index];\r\n        const cp = c.charCodeAt(0);\r\n        if (c === \"(\" || c === \")\") {\r\n            tokens.push({ value: c, type: TYPE_PAREN });\r\n        }\r\n        else if (c === \"*\" || c === \"/\") {\r\n            tokens.push({ value: c, type: TYPE_OPERATOR });\r\n        }\r\n        else if (c === \"+\" || c === \"-\") {\r\n            index = parseSign(c, index + 1) - 1;\r\n        }\r\n        else if (isDigit(cp) || isDot(cp)) {\r\n            index = parseNum(c, index + 1) - 1;\r\n        }\r\n        else if (isWhitespace(cp)) {\r\n            // skip\r\n        }\r\n        else {\r\n            throw createError(calc);\r\n        }\r\n    }\r\n    function parseSign(sign, start) {\r\n        if (start < len) {\r\n            const c = exp[start];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp) || isDot(cp)) {\r\n                return parseNum(sign + c, start + 1);\r\n            }\r\n        }\r\n        tokens.push({ value: sign, type: TYPE_OPERATOR });\r\n        return start;\r\n    }\r\n    function parseNum(num, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isDigit(cp)) {\r\n                num += c;\r\n            }\r\n            else if (c === \".\") {\r\n                if (num.indexOf(\".\") >= 0) {\r\n                    throw createError(calc);\r\n                }\r\n                num += c;\r\n            }\r\n            else if (isUnit(cp)) {\r\n                return parseUnit(num, c, index + 1);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (num === \".\") {\r\n            throw createError(calc);\r\n        }\r\n        tokens.push({ value: parseFloat(num), type: TYPE_NUMBER });\r\n        return index;\r\n    }\r\n    function parseUnit(num, unit, start) {\r\n        let index = start;\r\n        for (; index < len; index++) {\r\n            const c = exp[index];\r\n            const cp = c.charCodeAt(0);\r\n            if (isUnit(cp)) {\r\n                unit += c;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        tokens.push({ value: parseFloat(num), unit, type: TYPE_UNIT });\r\n        return index;\r\n    }\r\n    return tokens;\r\n}\r\nconst PRECEDENCE = {\r\n    \"*\": 3,\r\n    \"/\": 3,\r\n    \"+\": 2,\r\n    \"-\": 2,\r\n};\r\nfunction lex(tokens, calc) {\r\n    function buildBinaryExpNode(stack) {\r\n        const right = stack.pop();\r\n        const op = stack.pop();\r\n        const left = stack.pop();\r\n        if (!left ||\r\n            !left.nodeType ||\r\n            !op ||\r\n            op.type !== TYPE_OPERATOR ||\r\n            !right ||\r\n            !right.nodeType) {\r\n            throw createError(calc);\r\n        }\r\n        return {\r\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\r\n            left,\r\n            op,\r\n            right,\r\n        };\r\n    }\r\n    const stack = [];\r\n    while (tokens.length) {\r\n        const token = tokens.shift();\r\n        if (token.type === TYPE_PAREN && token.value === \"(\") {\r\n            let deep = 0;\r\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\r\n                if (t.type === TYPE_PAREN && t.value === \"(\") {\r\n                    deep++;\r\n                }\r\n                else if (t.type === TYPE_PAREN && t.value === \")\") {\r\n                    if (!deep) {\r\n                        return true;\r\n                    }\r\n                    deep--;\r\n                }\r\n                return false;\r\n            });\r\n            if (closeIndex === -1) {\r\n                throw createError(calc);\r\n            }\r\n            stack.push(lex(tokens.splice(0, closeIndex), calc));\r\n            tokens.shift();\r\n        }\r\n        else if (token.type === TYPE_OPERATOR) {\r\n            if (stack.length >= 3) {\r\n                const beforeOp = stack[stack.length - 2].value;\r\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\r\n                    stack.push(buildBinaryExpNode(stack));\r\n                }\r\n            }\r\n            stack.push(token);\r\n        }\r\n        else if (token.type === TYPE_UNIT) {\r\n            const { value: num, unit } = token;\r\n            stack.push({\r\n                nodeType: NODE_TYPE_UNIT,\r\n                value: num,\r\n                unit,\r\n            });\r\n        }\r\n        else if (token.type === TYPE_NUMBER) {\r\n            stack.push({\r\n                nodeType: NODE_TYPE_NUMBER,\r\n                value: token.value,\r\n            });\r\n        }\r\n    }\r\n    while (stack.length > 1) {\r\n        stack.push(buildBinaryExpNode(stack));\r\n    }\r\n    return stack[0];\r\n}\r\nfunction parse(calcStr) {\r\n    const tokens = tokenize(calcStr);\r\n    return lex(tokens, calcStr);\r\n}\r\nfunction calcNode(node, context) {\r\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\r\n        const left = calcNode(node.left, context);\r\n        const right = calcNode(node.right, context);\r\n        switch (node.op.value) {\r\n            case \"+\":\r\n                return left + right;\r\n            case \"-\":\r\n                return left - right;\r\n            case \"*\":\r\n                return left * right;\r\n            case \"/\":\r\n                return left / right;\r\n            default:\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_UNIT) {\r\n        switch (node.unit) {\r\n            case \"%\":\r\n                return (node.value * context.full) / 100;\r\n            case \"em\":\r\n                return node.value * context.em;\r\n            case \"px\":\r\n                return node.value;\r\n            default:\r\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\r\n        }\r\n    }\r\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\r\n        return node.value;\r\n    }\r\n    throw new Error(\"calc error.\");\r\n}\r\nfunction toPxInternal(value, context) {\r\n    const ast = parse(value);\r\n    return calcNode(ast, context);\r\n}\r\nfunction toPx(value, context) {\r\n    if (typeof value === \"string\") {\r\n        return toPxInternal(value.trim(), context);\r\n    }\r\n    return value - 0;\r\n}\r\nexports.toPx = toPx;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parsePasteRangeBoxValues = exports.normalizePasteValue = void 0;\r\nfunction normalizePasteValue(text) {\r\n    return text[text.length - 1] !== \"\\n\"\r\n        ? text\r\n        : text[text.length - 2] === \"\\r\"\r\n            ? text.slice(0, -2)\r\n            : text.slice(0, -1);\r\n}\r\nexports.normalizePasteValue = normalizePasteValue;\r\nfunction parsePasteRangeBoxValues(value, option) {\r\n    const normalizedValue = normalizePasteValue(value);\r\n    const { values, colCount } = parseValues(normalizedValue, option);\r\n    return {\r\n        colCount,\r\n        rowCount: values.length,\r\n        getCellValue(offsetCol, offsetRow) {\r\n            var _a, _b;\r\n            return (_b = (_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) !== null && _b !== void 0 ? _b : \"\";\r\n        },\r\n    };\r\n}\r\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\r\nfunction parseValues(text, { trimOnPaste }) {\r\n    const len = text.length;\r\n    const adjustCell = trimOnPaste\r\n        ? (cell) => cell.trim()\r\n        : (cell) => cell;\r\n    let colCount = 1;\r\n    let line = [];\r\n    const values = [line];\r\n    let cell = \"\";\r\n    for (let index = 0; index < len; index++) {\r\n        const char = text[index];\r\n        if (char === \"\\t\") {\r\n            line.push(adjustCell(cell));\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === \"\\n\") {\r\n            // End of line\r\n            cell = adjustCell(cell);\r\n            if (cell[cell.length - 1] === \"\\r\") {\r\n                cell = cell.slice(0, -1);\r\n            }\r\n            line.push(cell);\r\n            colCount = Math.max(colCount, line.length);\r\n            line = [];\r\n            values.push(line);\r\n            cell = \"\";\r\n            continue;\r\n        }\r\n        if (char === '\"' && !cell.trim()) {\r\n            const quoted = processQuotedCell(index + 1);\r\n            if (quoted) {\r\n                ({ cell } = quoted);\r\n                index = quoted.next - 1;\r\n                continue;\r\n            }\r\n        }\r\n        cell += char;\r\n    }\r\n    // End of text\r\n    line.push(adjustCell(cell));\r\n    colCount = Math.max(colCount, line.length);\r\n    return { values, colCount };\r\n    function processQuotedCell(start) {\r\n        let cell = \"\";\r\n        let index = start;\r\n        while (index < len) {\r\n            const char = text[index];\r\n            if (char !== '\"') {\r\n                cell += char;\r\n                index++;\r\n                continue;\r\n            }\r\n            if (text[index + 1] === '\"') {\r\n                // Escape\r\n                cell += '\"';\r\n                index += 2;\r\n                continue;\r\n            }\r\n            // Maybe end quote\r\n            let next = index + 1;\r\n            while (next < len) {\r\n                const c = text[next];\r\n                if (c.trim()) {\r\n                    // Not quoted. e.g. \"A\"B\r\n                    return null;\r\n                }\r\n                if (c === \"\\t\" || c === \"\\n\") {\r\n                    break;\r\n                }\r\n                // Allow spaces\r\n                next++;\r\n            }\r\n            // End quote\r\n            return { cell, next };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DataSource = void 0;\r\nconst sort = __importStar(require(\"../internal/sort\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst EventTarget_1 = require(\"../core/EventTarget\");\r\n/** @private */\r\nfunction isFieldAssessor(field) {\r\n    if (utils_1.obj.isObject(field)) {\r\n        if (field.get && field.set) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/** @private */\r\nconst EVENT_TYPE = {\r\n    UPDATE_LENGTH: \"update_length\",\r\n    UPDATED_LENGTH: \"updated_length\",\r\n    UPDATED_ORDER: \"updated_order\",\r\n};\r\n/** @private */\r\nfunction ascOrderFn(v1, v2) {\r\n    if (v1 === v2) {\r\n        return 0;\r\n    }\r\n    if (v1 == null) {\r\n        return v2 == null\r\n            ? // If both are nullish, consider a match.\r\n                0\r\n            : // Nulls first\r\n                -1;\r\n    }\r\n    if (v2 == null) {\r\n        // Nulls first\r\n        return 1;\r\n    }\r\n    return v1 > v2 ? 1 : -1;\r\n}\r\nfunction descOrderFn(v1, v2) {\r\n    return (ascOrderFn(v1, v2) * -1);\r\n}\r\n/** @private */\r\nfunction getValue(value, setPromiseBack) {\r\n    const maybePromiseValue = (0, utils_1.getOrApply)(value);\r\n    if ((0, utils_1.isPromise)(maybePromiseValue)) {\r\n        const promiseValue = maybePromiseValue.then((r) => {\r\n            setPromiseBack(r);\r\n            return r;\r\n        });\r\n        //\r\n        setPromiseBack(promiseValue);\r\n        return promiseValue;\r\n    }\r\n    else {\r\n        return maybePromiseValue;\r\n    }\r\n}\r\n/** @private */\r\nfunction getField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nsetPromiseBack) {\r\n    if (record == null) {\r\n        return undefined;\r\n    }\r\n    if ((0, utils_1.isPromise)(record)) {\r\n        return record.then((r) => getField(r, field, setPromiseBack));\r\n    }\r\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\r\n    if (fieldGet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    if (typeof fieldGet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = fieldGet(record);\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n    const ss = String(fieldGet).split(\".\");\r\n    if (ss.length <= 1) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const fieldResult = record[fieldGet];\r\n        return getValue(fieldResult, setPromiseBack);\r\n    }\r\n    const fieldResult = (0, utils_1.applyChainSafe)(record, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\r\n    return getValue(fieldResult, setPromiseBack);\r\n}\r\n/** @private */\r\nfunction setField(record, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (record == null) {\r\n        return false;\r\n    }\r\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\r\n    if (fieldSet in record) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    else if (typeof fieldSet === \"function\") {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return fieldSet(record, value);\r\n    }\r\n    else if (typeof fieldSet === \"string\") {\r\n        const ss = `${fieldSet}`.split(\".\");\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let obj = record;\r\n        const { length } = ss;\r\n        for (let i = 0; i < length; i++) {\r\n            const f = ss[i];\r\n            if (i === length - 1) {\r\n                obj[f] = value;\r\n            }\r\n            else {\r\n                obj = obj[f] || (obj[f] = {});\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        record[fieldSet] = value;\r\n    }\r\n    return true;\r\n}\r\n/** @private */\r\nfunction _getIndex(sortedIndexMap, index) {\r\n    if (!sortedIndexMap) {\r\n        return index;\r\n    }\r\n    const mapIndex = sortedIndexMap[index];\r\n    return mapIndex != null ? mapIndex : index;\r\n}\r\n/**\r\n * grid data source\r\n *\r\n * @classdesc cheetahGrid.data.DataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass DataSource extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new DataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(obj) {\r\n        var _a;\r\n        super();\r\n        this._sortedIndexMap = null;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\r\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\r\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    get(index) {\r\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\r\n    }\r\n    getField(index, field) {\r\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    hasField(index, field) {\r\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\r\n    }\r\n    setField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\r\n    }\r\n    sort(field, order) {\r\n        const sortedIndexMap = new Array(this._length);\r\n        const orderFn = order !== \"desc\" ? ascOrderFn : descOrderFn;\r\n        return sort\r\n            .sortPromise((index) => sortedIndexMap[index] != null\r\n            ? sortedIndexMap[index]\r\n            : (sortedIndexMap[index] = index), (index, rel) => {\r\n            sortedIndexMap[index] = rel;\r\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\r\n            .then(() => {\r\n            this._sortedIndexMap = sortedIndexMap;\r\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n        });\r\n    }\r\n    get length() {\r\n        return this._length;\r\n    }\r\n    set length(length) {\r\n        if (this._length === length) {\r\n            return;\r\n        }\r\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n            return;\r\n        }\r\n        this._length = length;\r\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n    }\r\n    get dataSource() {\r\n        return this;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    getOriginal(index) {\r\n        return getValue(this._get(index), (val) => {\r\n            this.recordPromiseCallBackInternal(index, val);\r\n        });\r\n    }\r\n    getOriginalField(index, field) {\r\n        if (field == null) {\r\n            return undefined;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return getField(record, field, (val) => {\r\n            this.fieldPromiseCallBackInternal(index, field, val);\r\n        });\r\n    }\r\n    hasOriginalField(index, field) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        if (typeof field === \"function\") {\r\n            return true;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        return Boolean(record && field in record);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const record = this.getOriginal(index);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return record.then((r) => setField(r, field, value));\r\n        }\r\n        return setField(record, field, value);\r\n    }\r\n    fieldPromiseCallBackInternal(_index, _field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    _value) {\r\n        //\r\n    }\r\n    recordPromiseCallBackInternal(_index, _record) {\r\n        //\r\n    }\r\n}\r\nexports.DataSource = DataSource;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nDataSource.EMPTY = new DataSource({\r\n    get() {\r\n        /*noop */\r\n    },\r\n    length: 0,\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ofCell = exports.of = exports.CheckHeaderAction = exports.SortHeaderAction = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\r\nObject.defineProperty(exports, \"CheckHeaderAction\", { enumerable: true, get: function () { return CheckHeaderAction_1.CheckHeaderAction; } });\r\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\r\nObject.defineProperty(exports, \"SortHeaderAction\", { enumerable: true, get: function () { return SortHeaderAction_1.SortHeaderAction; } });\r\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    SORT: new ImmutableSortHeaderAction(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new ImmutableCheckHeaderAction(),\r\n};\r\nfunction of(headerAction) {\r\n    if (!headerAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof headerAction === \"string\") {\r\n        const key = headerAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return headerAction;\r\n    }\r\n}\r\nexports.of = of;\r\nfunction ofCell(headerCell) {\r\n    if (headerCell.sort) {\r\n        if (typeof headerCell.sort === \"function\") {\r\n            const sortMethod = headerCell.sort;\r\n            // 0.9.0 Backward compatibility\r\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\r\n            return new ImmutableSortHeaderAction({ sort });\r\n        }\r\n        if (typeof headerCell.sort === \"string\") {\r\n            return new ImmutableSortHeaderAction({ sort: headerCell.sort });\r\n        }\r\n        return exports.ACTIONS.SORT;\r\n    }\r\n    return of(headerCell.headerAction);\r\n}\r\nexports.ofCell = ofCell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAction = void 0;\r\nclass BaseAction {\r\n    constructor(option = {}) {\r\n        this._disabled = !!option.disabled || false;\r\n    }\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = disabled;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new BaseAction(this);\r\n    }\r\n    bindGridEvent(_grid, _cellId) {\r\n        return [];\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // impl\r\n    }\r\n}\r\nexports.BaseAction = BaseAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextHeaderStyle = exports.CheckHeaderStyle = exports.SortHeaderStyle = exports.Style = exports.BaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\r\nObject.defineProperty(exports, \"BaseStyle\", { enumerable: true, get: function () { return BaseStyle_1.BaseStyle; } });\r\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\r\nObject.defineProperty(exports, \"CheckHeaderStyle\", { enumerable: true, get: function () { return CheckHeaderStyle_1.CheckHeaderStyle; } });\r\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\r\nObject.defineProperty(exports, \"MultilineTextHeaderStyle\", { enumerable: true, get: function () { return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle; } });\r\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\r\nObject.defineProperty(exports, \"SortHeaderStyle\", { enumerable: true, get: function () { return SortHeaderStyle_1.SortHeaderStyle; } });\r\nconst Style_1 = require(\"./style/Style\");\r\nObject.defineProperty(exports, \"Style\", { enumerable: true, get: function () { return Style_1.Style; } });\r\nfunction of(headerStyle, StyleClass) {\r\n    if (headerStyle) {\r\n        if (headerStyle instanceof Style_1.Style) {\r\n            return headerStyle;\r\n        }\r\n        else if (typeof headerStyle === \"function\") {\r\n            return of(headerStyle(), StyleClass);\r\n        }\r\n        return new StyleClass(headerStyle);\r\n    }\r\n    else {\r\n        return StyleClass.DEFAULT;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseStyle = void 0;\r\nconst EventTarget_1 = require(\"../../core/EventTarget\");\r\nconst EVENT_TYPE = {\r\n    CHANGE_STYLE: \"change_style\",\r\n};\r\nlet defaultStyle;\r\nclass BaseStyle extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return EVENT_TYPE;\r\n    }\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n    }\r\n    constructor({ bgColor } = {}) {\r\n        super();\r\n        this._bgColor = bgColor;\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(bgColor) {\r\n        this._bgColor = bgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    doChangeStyle() {\r\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n    }\r\n    clone() {\r\n        return new BaseStyle(this);\r\n    }\r\n}\r\nexports.BaseStyle = BaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdMultilineTextBaseStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nlet defaultStyle;\r\nclass StdMultilineTextBaseStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdMultilineTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new StdMultilineTextBaseStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.StdMultilineTextBaseStyle = StdMultilineTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fill = exports.getPath2D = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction getPath2D() {\r\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\r\n        return Path2D;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\r\n}\r\nexports.getPath2D = getPath2D;\r\nfunction fill(pathModule, ctx, x, y, w, h) {\r\n    ctx.save();\r\n    try {\r\n        const { width, height } = pathModule;\r\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\r\n        w = w || width;\r\n        h = h || height;\r\n        const xrate = w / width;\r\n        const yrate = h / (upsideDown ? -height : height);\r\n        x = x || 0;\r\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\r\n        ctx.translate(x, y);\r\n        ctx.scale(xrate, yrate);\r\n        if (offsetX !== 0 || offsetY !== 0) {\r\n            ctx.translate(offsetX, offsetY);\r\n        }\r\n        const Path2D = getPath2D();\r\n        const path2d = (pathModule.path2d =\r\n            pathModule.path2d || new Path2D(pathModule.d));\r\n        ctx.fill(path2d);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fill = fill;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getChoices = exports.setDefault = exports.getDefault = exports.of = exports.theme = exports.MATERIAL_DESIGN = exports.BASIC = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst theme_1 = require(\"./themes/theme\");\r\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\r\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\r\nconst themes_1 = require(\"./plugins/themes\");\r\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\r\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\r\nconst builtin = {\r\n    BASIC: exports.BASIC,\r\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\r\n};\r\nlet defTheme = exports.MATERIAL_DESIGN;\r\nexports.theme = { Theme: theme_1.Theme };\r\nfunction of(value) {\r\n    if (!value) {\r\n        return null;\r\n    }\r\n    if (typeof value === \"string\") {\r\n        const t = (0, utils_1.getIgnoreCase)(getChoices(), value);\r\n        if (t) {\r\n            return t;\r\n        }\r\n        return null;\r\n    }\r\n    if (value instanceof theme_1.Theme) {\r\n        return value;\r\n    }\r\n    return new theme_1.Theme(value);\r\n}\r\nexports.of = of;\r\nfunction getDefault() {\r\n    return defTheme;\r\n}\r\nexports.getDefault = getDefault;\r\nfunction setDefault(defaultTheme) {\r\n    defTheme = of(defaultTheme) || defTheme;\r\n}\r\nexports.setDefault = setDefault;\r\nfunction getChoices() {\r\n    return (0, utils_1.extend)(builtin, themes_1.themes);\r\n}\r\nexports.getChoices = getChoices;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawInformationMarkBox = exports.drawExclamationMarkBox = void 0;\r\nconst Rect_1 = require(\"../../internal/Rect\");\r\nfunction drawExclamationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw exclamation mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\r\n}\r\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\r\nfunction drawInformationMarkBox(context, style, helper) {\r\n    const { bgColor, color, boxWidth, markHeight } = style;\r\n    const ctx = context.getContext();\r\n    const rect = context.getRect();\r\n    // draw box\r\n    ctx.fillStyle = bgColor;\r\n    const boxRect = rect.copy();\r\n    boxRect.left = boxRect.right - (Number(boxWidth) || 24);\r\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n    // draw i mark\r\n    const fillColor = color;\r\n    const height = Number(markHeight) || 20;\r\n    const width = height / 5;\r\n    const left = boxRect.left + (boxRect.width - width) / 2;\r\n    const top = boxRect.top + (boxRect.height - height) / 2;\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\r\n        fillColor,\r\n    });\r\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\r\n}\r\nexports.drawInformationMarkBox = drawInformationMarkBox;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseMessage = void 0;\r\nclass BaseMessage {\r\n    constructor(grid) {\r\n        this._messageElement = null;\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachMessageElement();\r\n        if (this._messageElement) {\r\n            this._messageElement.dispose();\r\n        }\r\n        this._messageElement = null;\r\n    }\r\n    _getMessageElement() {\r\n        return (this._messageElement ||\r\n            (this._messageElement = this.createMessageElementInternal()));\r\n    }\r\n    attachMessageElement(col, row, message) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.attach(this._grid, col, row, message);\r\n    }\r\n    moveMessageElement(col, row) {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement.move(this._grid, col, row);\r\n    }\r\n    detachMessageElement() {\r\n        const messageElement = this._getMessageElement();\r\n        messageElement._detach();\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.BaseMessage = BaseMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createMessageDomElement() {\r\n    require(\"@/columns/message/internal/MessageElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"span\", {\r\n        classList: [MESSAGE_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass MessageElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createMessageDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, message) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = message.message;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { offsetHeight, offsetWidth } = element;\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${left.toFixed()}px`;\r\n        rootElement.style.width = `${width.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.MessageElement = MessageElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LG_EVENT_TYPE = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nexports.LG_EVENT_TYPE = (0, utils_1.extend)(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\r\n    BEFORE_CHANGE_VALUE: \"before_change_value\",\r\n    CHANGED_VALUE: \"changed_value\",\r\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\r\n    REJECTED_PASTE_VALUES: \"rejected_paste_values\",\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Action = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nclass Action extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._action = option.action || (() => { });\r\n    }\r\n    get editable() {\r\n        return false;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(action) {\r\n        this._action = action;\r\n    }\r\n    clone() {\r\n        return new Action(this);\r\n    }\r\n    getState(_grid) {\r\n        return {};\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = this.getState(grid);\r\n        const action = (cell) => {\r\n            if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            const record = grid.getRowRecord(cell.row);\r\n            this._action(record, (0, utils_1.extend)(cell, { grid }));\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox() {\r\n        // noop\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.Action = Action;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseInputEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass BaseInputEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        const input = (cell, value) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return;\r\n            }\r\n            this.onInputCellInternal(grid, cell, value);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.value);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                input({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                }, e.normalizeValue);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n                utils_1.event.cancel(e.event);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                this.onGridScrollInternal(grid);\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return false;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                    return;\r\n                }\r\n                const range = grid.getCellRange(cell.col, cell.row);\r\n                if (range.start.col !== range.end.col ||\r\n                    range.start.row !== range.end.row) {\r\n                    const { input } = cell;\r\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\r\n                    const rangeRect = grid.getCellRangeRect(range);\r\n                    input.style.top = `${(parseFloat(input.style.top) +\r\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\r\n                    input.style.left = `${(parseFloat(input.style.left) +\r\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\r\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\r\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\r\n                }\r\n                this.onSetInputAttrsInternal(grid, {\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                }, cell.input);\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => {\r\n            if (this.isSupportMultilineValue()) {\r\n                return value;\r\n            }\r\n            return value.replace(/\\r?\\n/g, \" \");\r\n        });\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\r\n    }\r\n    isSupportMultilineValue() {\r\n        return false;\r\n    }\r\n}\r\nexports.BaseInputEditor = BaseInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setInputValue = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nfunction setInputValue(input, value) {\r\n    const sign = input.type === \"number\" && value === \"-\";\r\n    if (sign) {\r\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\r\n        input.type = \"\";\r\n        let handler = new EventHandler_1.EventHandler();\r\n        const dispose = () => {\r\n            if (handler) {\r\n                handler.dispose();\r\n                handler = null;\r\n            }\r\n        };\r\n        handler.once(input, \"input\", (_e) => {\r\n            input.type = \"number\";\r\n            dispose();\r\n        });\r\n        handler.once(input, \"blur\", (_e) => {\r\n            dispose();\r\n        });\r\n    }\r\n    input.value = value !== null && value !== void 0 ? value : \"\";\r\n}\r\nexports.setInputValue = setInputValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.MultilineTextColumn = exports.MenuColumn = exports.BranchGraphColumn = exports.IconColumn = exports.PercentCompleteBarColumn = exports.ImageColumn = exports.ButtonColumn = exports.RadioColumn = exports.CheckColumn = exports.NumberColumn = exports.Column = void 0;\r\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\r\nObject.defineProperty(exports, \"BranchGraphColumn\", { enumerable: true, get: function () { return BranchGraphColumn_1.BranchGraphColumn; } });\r\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\r\nObject.defineProperty(exports, \"ButtonColumn\", { enumerable: true, get: function () { return ButtonColumn_1.ButtonColumn; } });\r\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\r\nObject.defineProperty(exports, \"CheckColumn\", { enumerable: true, get: function () { return CheckColumn_1.CheckColumn; } });\r\nconst Column_1 = require(\"./type/Column\");\r\nObject.defineProperty(exports, \"Column\", { enumerable: true, get: function () { return Column_1.Column; } });\r\nconst IconColumn_1 = require(\"./type/IconColumn\");\r\nObject.defineProperty(exports, \"IconColumn\", { enumerable: true, get: function () { return IconColumn_1.IconColumn; } });\r\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\r\nObject.defineProperty(exports, \"ImageColumn\", { enumerable: true, get: function () { return ImageColumn_1.ImageColumn; } });\r\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\r\nObject.defineProperty(exports, \"MenuColumn\", { enumerable: true, get: function () { return MenuColumn_1.MenuColumn; } });\r\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\r\nObject.defineProperty(exports, \"MultilineTextColumn\", { enumerable: true, get: function () { return MultilineTextColumn_1.MultilineTextColumn; } });\r\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\r\nObject.defineProperty(exports, \"NumberColumn\", { enumerable: true, get: function () { return NumberColumn_1.NumberColumn; } });\r\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\r\nObject.defineProperty(exports, \"PercentCompleteBarColumn\", { enumerable: true, get: function () { return PercentCompleteBarColumn_1.PercentCompleteBarColumn; } });\r\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\r\nObject.defineProperty(exports, \"RadioColumn\", { enumerable: true, get: function () { return RadioColumn_1.RadioColumn; } });\r\nconst TYPES = {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    DEFAULT: new Column_1.Column(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    NUMBER: new NumberColumn_1.NumberColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    CHECK: new CheckColumn_1.CheckColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    RADIO: new RadioColumn_1.RadioColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    IMAGE: new ImageColumn_1.ImageColumn(),\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\r\n};\r\nfunction of(columnType) {\r\n    if (!columnType) {\r\n        return TYPES.DEFAULT;\r\n    }\r\n    else if (typeof columnType === \"string\") {\r\n        const key = columnType.toUpperCase();\r\n        return TYPES[key] || of(null);\r\n    }\r\n    else {\r\n        return columnType;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ButtonStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { buttonBgColor } = style;\r\n        this._buttonBgColor = buttonBgColor;\r\n    }\r\n    get buttonBgColor() {\r\n        return this._buttonBgColor;\r\n    }\r\n    set buttonBgColor(buttonBgColor) {\r\n        this._buttonBgColor = buttonBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ButtonStyle(this);\r\n    }\r\n}\r\nexports.ButtonStyle = ButtonStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckStyle(this);\r\n    }\r\n}\r\nexports.CheckStyle = CheckStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass IconStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n    }\r\n    clone() {\r\n        return new IconStyle(this);\r\n    }\r\n}\r\nexports.IconStyle = IconStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        this._imageSizing = style.imageSizing;\r\n        this._margin = style.margin || 4;\r\n    }\r\n    get imageSizing() {\r\n        return this._imageSizing;\r\n    }\r\n    set imageSizing(imageSizing) {\r\n        this._imageSizing = imageSizing;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new ImageStyle(this);\r\n    }\r\n}\r\nexports.ImageStyle = ImageStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nclass MenuStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        const { appearance } = style;\r\n        this._appearance = appearance;\r\n    }\r\n    get appearance() {\r\n        return this._appearance || \"menulist-button\";\r\n    }\r\n    set appearance(appearance) {\r\n        this._appearance = appearance;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new MenuStyle(this);\r\n    }\r\n}\r\nexports.MenuStyle = MenuStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass MultilineTextStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textBaseline: \"top\" }));\r\n        this._lineHeight = style.lineHeight || \"1em\";\r\n        this._autoWrapText = style.autoWrapText || false;\r\n        this._lineClamp = style.lineClamp;\r\n    }\r\n    clone() {\r\n        return new MultilineTextStyle(this);\r\n    }\r\n    get lineHeight() {\r\n        return this._lineHeight;\r\n    }\r\n    set lineHeight(lineHeight) {\r\n        this._lineHeight = lineHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    get lineClamp() {\r\n        return this._lineClamp;\r\n    }\r\n    set lineClamp(lineClamp) {\r\n        this._lineClamp = lineClamp;\r\n        this.doChangeStyle();\r\n    }\r\n    get autoWrapText() {\r\n        return this._autoWrapText;\r\n    }\r\n    set autoWrapText(autoWrapText) {\r\n        this._autoWrapText = autoWrapText;\r\n        this.doChangeStyle();\r\n    }\r\n}\r\nexports.MultilineTextStyle = MultilineTextStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass NumberStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"right\" }));\r\n    }\r\n    clone() {\r\n        return new NumberStyle(this);\r\n    }\r\n}\r\nexports.NumberStyle = NumberStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarStyle = void 0;\r\nconst Style_1 = require(\"./Style\");\r\nlet defaultStyle;\r\nconst DEFAULT_BAR_COLOR = (num) => {\r\n    if (num > 80) {\r\n        return \"#20a8d8\";\r\n    }\r\n    if (num > 50) {\r\n        return \"#4dbd74\";\r\n    }\r\n    if (num > 20) {\r\n        return \"#ffc107\";\r\n    }\r\n    return \"#f86c6b\";\r\n};\r\nclass PercentCompleteBarStyle extends Style_1.Style {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new PercentCompleteBarStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\r\n        this._barHeight = style.barHeight || 3;\r\n    }\r\n    get barColor() {\r\n        return this._barColor;\r\n    }\r\n    set barColor(barColor) {\r\n        this._barColor = barColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barBgColor() {\r\n        return this._barBgColor;\r\n    }\r\n    set barBgColor(barBgColor) {\r\n        this._barBgColor = barBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get barHeight() {\r\n        return this._barHeight;\r\n    }\r\n    set barHeight(barHeight) {\r\n        this._barHeight = barHeight;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarStyle(this);\r\n    }\r\n}\r\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\r\n        this._checkColor = checkColor;\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this._checkBorderColor = checkBorderColor;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n    }\r\n    get checkColor() {\r\n        return this._checkColor;\r\n    }\r\n    set checkColor(checkColor) {\r\n        this._checkColor = checkColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBorderColor() {\r\n        return this._uncheckBorderColor;\r\n    }\r\n    set uncheckBorderColor(uncheckBorderColor) {\r\n        this._uncheckBorderColor = uncheckBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBorderColor() {\r\n        return this._checkBorderColor;\r\n    }\r\n    set checkBorderColor(checkBorderColor) {\r\n        this._checkBorderColor = checkBorderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new RadioStyle(this);\r\n    }\r\n}\r\nexports.RadioStyle = RadioStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getCacheOrLoad = exports.loadImage = void 0;\r\nconst LRUCache_1 = require(\"./LRUCache\");\r\nconst utils_1 = require(\"./utils\");\r\nconst allCache = {};\r\nfunction loadImage(src) {\r\n    if (typeof Promise === \"undefined\") {\r\n        console.error(\"Promise is not loaded. load Promise before this process.\");\r\n        return {\r\n            then() {\r\n                return this;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n    }\r\n    const img = new Image();\r\n    const result = new Promise((resolve) => {\r\n        img.onload = () => {\r\n            resolve(img);\r\n        };\r\n    });\r\n    img.onerror = () => {\r\n        const url = src.length > 200 ? `${src.slice(0, 200)}...` : src;\r\n        console.warn(`cannot load: ${url}`);\r\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\r\n    };\r\n    img.src = src;\r\n    return result;\r\n}\r\nexports.loadImage = loadImage;\r\nfunction getCacheOrLoad0(cache, src) {\r\n    return (0, utils_1.then)(src, (src) => {\r\n        const c = cache.get(src);\r\n        if (c) {\r\n            return c;\r\n        }\r\n        const result = loadImage(src).then((img) => {\r\n            cache.put(src, img);\r\n            return img;\r\n        });\r\n        cache.put(src, result);\r\n        return result;\r\n    });\r\n}\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n    const cache = allCache[cacheName] ||\r\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\r\n    return getCacheOrLoad0(cache, src);\r\n}\r\nexports.getCacheOrLoad = getCacheOrLoad;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.normalizeToFn = exports.normalize = void 0;\r\n/** @private */\r\nfunction extend(a, b) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const o = {};\r\n    for (const k in a) {\r\n        o[k] = a[k];\r\n    }\r\n    for (const k in b) {\r\n        o[k] = b[k];\r\n    }\r\n    return o;\r\n}\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalize(options) {\r\n    if (!options) {\r\n        return [];\r\n    }\r\n    if (Array.isArray(options)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return options.map(\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (e) => extend(e, { label: e.caption || e.label }));\r\n    }\r\n    if (typeof options === \"string\") {\r\n        return normalize(JSON.parse(options));\r\n    }\r\n    const result = [];\r\n    for (const k in options) {\r\n        result.push({\r\n            value: k,\r\n            label: options[k],\r\n        });\r\n    }\r\n    return result;\r\n}\r\nexports.normalize = normalize;\r\n/**\r\n * Normalize the given menu options.\r\n * @param {*} options menu options to given\r\n * @returns {Array} Normalized options\r\n * @private\r\n */\r\nfunction normalizeToFn(options) {\r\n    if (typeof options === \"function\") {\r\n        return (record) => normalize(options(record));\r\n    }\r\n    return () => normalize(options);\r\n}\r\nexports.normalizeToFn = normalizeToFn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DrawGrid = void 0;\r\nconst calc = __importStar(require(\"../internal/calc\"));\r\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\r\nconst style = __importStar(require(\"../internal/style\"));\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst paste_utils_1 = require(\"../internal/paste-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\nconst EventTarget_1 = require(\"./EventTarget\");\r\nconst NumberMap_1 = require(\"../internal/NumberMap\");\r\nconst Rect_1 = require(\"../internal/Rect\");\r\nconst Scrollable_1 = require(\"../internal/Scrollable\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\nconst { \r\n/** @private */\r\nisTouchEvent, \r\n/** @private */\r\ngetMouseButtons, \r\n/** @private */\r\ngetKeyCode, \r\n/** @private */\r\ncancel: cancelEvent, } = utils_1.event;\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n/** @private */\r\nfunction createRootElement() {\r\n    const element = document.createElement(\"div\");\r\n    element.classList.add(\"cheetah-grid\");\r\n    return element;\r\n}\r\n/** @private */\r\nconst KEY_BS = 8;\r\n/** @private */\r\nconst KEY_TAB = 9;\r\n/** @private */\r\nconst KEY_ENTER = 13;\r\n/** @private */\r\nconst KEY_END = 35;\r\n/** @private */\r\nconst KEY_HOME = 36;\r\n/** @private */\r\nconst KEY_LEFT = 37;\r\n/** @private */\r\nconst KEY_UP = 38;\r\n/** @private */\r\nconst KEY_RIGHT = 39;\r\n/** @private */\r\nconst KEY_DOWN = 40;\r\n/** @private */\r\nconst KEY_DEL = 46;\r\n/** @private */\r\nconst KEY_ALPHA_A = 65;\r\n/** @private */\r\nconst KEY_ALPHA_C = 67;\r\n/** @private */\r\nconst KEY_ALPHA_V = 86;\r\n//private methods\r\n/** @private */\r\nfunction _vibrate(e) {\r\n    if (navigator.vibrate && isTouchEvent(e)) {\r\n        navigator.vibrate(50);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetRowAt(absoluteY) {\r\n    const internal = this.getTargetRowAtInternal(absoluteY);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const findBefore = (startRow, startBottom) => {\r\n        let bottom = startBottom;\r\n        for (let row = startRow; row >= 0; row--) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const top = bottom - height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            bottom = top;\r\n        }\r\n        return null;\r\n    };\r\n    const findAfter = (startRow, startBottom) => {\r\n        let top = startBottom - _getRowHeight.call(this, startRow);\r\n        const { rowCount } = this[_];\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = top + height;\r\n            if (top <= absoluteY && absoluteY < bottom) {\r\n                return {\r\n                    top,\r\n                    row,\r\n                };\r\n            }\r\n            top = bottom;\r\n        }\r\n        return null;\r\n    };\r\n    const candidateRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\r\n    const bottom = _getRowsHeight.call(this, 0, candidateRow);\r\n    if (absoluteY >= bottom) {\r\n        return findAfter(candidateRow, bottom);\r\n    }\r\n    else {\r\n        return findBefore(candidateRow, bottom);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getTargetColAt(grid, absoluteX) {\r\n    let left = 0;\r\n    const { colCount } = grid[_];\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    let { top } = grid[_].scroll;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        const bottom = top + height;\r\n        if (bottom > absoluteY) {\r\n            return {\r\n                top,\r\n                row,\r\n            };\r\n        }\r\n        top = bottom;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    let { left } = grid[_].scroll;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        const right = left + width;\r\n        if (right > absoluteX) {\r\n            return {\r\n                left,\r\n                col,\r\n            };\r\n        }\r\n        left = right;\r\n    }\r\n    return null;\r\n}\r\n/** @private */\r\nfunction _getFrozenRowsRect(grid) {\r\n    if (!grid[_].frozenRowCount) {\r\n        return null;\r\n    }\r\n    const { top } = grid[_].scroll;\r\n    let height = 0;\r\n    const rowCount = grid[_].frozenRowCount;\r\n    for (let row = 0; row < rowCount; row++) {\r\n        height += _getRowHeight.call(grid, row);\r\n    }\r\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\r\n}\r\n/** @private */\r\nfunction _getFrozenColsRect(grid) {\r\n    if (!grid[_].frozenColCount) {\r\n        return null;\r\n    }\r\n    const { left } = grid[_].scroll;\r\n    let width = 0;\r\n    const colCount = grid[_].frozenColCount;\r\n    for (let col = 0; col < colCount; col++) {\r\n        width += _getColWidth(grid, col);\r\n    }\r\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\r\n}\r\n/** @private */\r\nfunction _getCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return null;\r\n    }\r\n    return grid[_].drawCells[row][col];\r\n}\r\n/** @private */\r\nfunction _putCellDrawing(grid, col, row, context) {\r\n    if (!grid[_].drawCells[row]) {\r\n        grid[_].drawCells[row] = {};\r\n    }\r\n    grid[_].drawCells[row][col] = context;\r\n}\r\n/** @private */\r\nfunction _removeCellDrawing(grid, col, row) {\r\n    if (!grid[_].drawCells[row]) {\r\n        return;\r\n    }\r\n    delete grid[_].drawCells[row][col];\r\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n        delete grid[_].drawCells[row];\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\r\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\r\n    if (drawRect.height > 0 && drawRect.width > 0) {\r\n        ctx.save();\r\n        try {\r\n            const cellDrawing = _getCellDrawing(this, col, row);\r\n            if (cellDrawing) {\r\n                cellDrawing.cancel();\r\n            }\r\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\r\n            const p = this.onDrawCell(col, row, dcContext);\r\n            if ((0, utils_1.isPromise)(p)) {\r\n                //\r\n                _putCellDrawing(this, col, row, dcContext);\r\n                const pCol = col;\r\n                dcContext._delayMode(this, () => {\r\n                    _removeCellDrawing(this, pCol, row);\r\n                });\r\n                p.then(() => {\r\n                    dcContext.terminate();\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n    const { colCount } = grid[_];\r\n    const drawOuter = (col, absoluteLeft) => {\r\n        //\r\n        if (col >= colCount - 1 &&\r\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\r\n            const outerLeft = absoluteLeft - visibleRect.left;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteLeft = 0;\r\n    if (initFrozenCol) {\r\n        let absoluteLeft = initFrozenCol.left;\r\n        const count = grid[_].frozenColCount;\r\n        for (let { col } = initFrozenCol; col < count; col++) {\r\n            const width = _getColWidth(grid, col);\r\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\r\n            absoluteLeft += width;\r\n            if (drawRight <= absoluteLeft) {\r\n                //\r\n                drawOuter(col, absoluteLeft);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteLeft = absoluteLeft;\r\n    }\r\n    let absoluteLeft = initCol.left;\r\n    for (let { col } = initCol; col < colCount; col++) {\r\n        const width = _getColWidth(grid, col);\r\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\r\n        absoluteLeft += width;\r\n        if (drawRight <= absoluteLeft) {\r\n            //\r\n            drawOuter(col, absoluteLeft);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(colCount - 1, absoluteLeft);\r\n}\r\n/** @private */\r\nfunction _getInitContext() {\r\n    return this._getInitContext();\r\n}\r\n/** @private */\r\nfunction _invalidateRect(grid, drawRect) {\r\n    const visibleRect = _getVisibleRect(grid);\r\n    const { rowCount } = grid[_];\r\n    const ctx = _getInitContext.call(grid);\r\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\r\n        row: rowCount,\r\n    };\r\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n        col: grid[_].colCount,\r\n    };\r\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\r\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n    const drawLayers = new DrawLayers();\r\n    const drawOuter = (row, absoluteTop) => {\r\n        //\r\n        if (row >= rowCount - 1 &&\r\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\r\n            const outerTop = absoluteTop - visibleRect.top;\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\r\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n            ctx.fill();\r\n            ctx.restore();\r\n        }\r\n    };\r\n    let skipAbsoluteTop = 0;\r\n    if (initFrozenRow) {\r\n        let absoluteTop = initFrozenRow.top;\r\n        const count = grid[_].frozenRowCount;\r\n        for (let { row } = initFrozenRow; row < count; row++) {\r\n            const height = _getRowHeight.call(grid, row);\r\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\r\n            absoluteTop += height;\r\n            if (drawBottom <= absoluteTop) {\r\n                //\r\n                drawOuter(row, absoluteTop);\r\n                drawLayers.draw(ctx);\r\n                return;\r\n            }\r\n        }\r\n        skipAbsoluteTop = absoluteTop;\r\n    }\r\n    let absoluteTop = initRow.top;\r\n    for (let { row } = initRow; row < rowCount; row++) {\r\n        const height = _getRowHeight.call(grid, row);\r\n        //\r\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\r\n        absoluteTop += height;\r\n        if (drawBottom <= absoluteTop) {\r\n            //\r\n            drawOuter(row, absoluteTop);\r\n            drawLayers.draw(ctx);\r\n            return;\r\n        }\r\n    }\r\n    drawOuter(rowCount - 1, absoluteTop);\r\n    drawLayers.draw(ctx);\r\n}\r\n/** @private */\r\nfunction _toPxWidth(grid, width) {\r\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n}\r\n/** @private */\r\nfunction _adjustColWidth(grid, col, orgWidth) {\r\n    const limits = _getColWidthLimits(grid, col);\r\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\r\n}\r\n/** @private */\r\nfunction _applyColWidthLimits(limits, orgWidth) {\r\n    if (!limits) {\r\n        return orgWidth;\r\n    }\r\n    if (limits.min) {\r\n        if (limits.min > orgWidth) {\r\n            return limits.min;\r\n        }\r\n    }\r\n    if (limits.max) {\r\n        if (limits.max < orgWidth) {\r\n            return limits.max;\r\n        }\r\n    }\r\n    return orgWidth;\r\n}\r\n/**\r\n * Gets the definition of the column width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {string|number} width definition\r\n * @private\r\n */\r\nfunction _getColWidthDefine(grid, col) {\r\n    const width = grid[_].colWidthsMap.get(col);\r\n    if (width) {\r\n        return width;\r\n    }\r\n    return grid.defaultColWidth;\r\n}\r\n/**\r\n * Gets the column width limits.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {number} col number of column\r\n * @returns {object|null} the column width limits\r\n * @private\r\n */\r\nfunction _getColWidthLimits(grid, col) {\r\n    const limit = grid[_].colWidthsLimit[col];\r\n    if (!limit) {\r\n        return null;\r\n    }\r\n    const result = {};\r\n    if (limit.min) {\r\n        result.min = _toPxWidth(grid, limit.min);\r\n        result.minDef = limit.min;\r\n    }\r\n    if (limit.max) {\r\n        result.max = _toPxWidth(grid, limit.max);\r\n        result.maxDef = limit.max;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Checks if the given width definition is `auto`.\r\n * @param {string|number} width width definition to check\r\n * @returns {boolean} `true ` if the given width definition is `auto`\r\n * @private\r\n */\r\nfunction isAutoDefine(width) {\r\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\r\n}\r\n/**\r\n * Creates a formula to calculate the auto width.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {string} formula\r\n * @private\r\n */\r\nfunction _calcAutoColWidthExpr(grid, shortCircuit = true) {\r\n    const fullWidth = grid[_].calcWidthContext.full;\r\n    let sumMin = 0;\r\n    const others = [];\r\n    let autoCount = 0;\r\n    const hasLimitsOnAuto = [];\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        const limits = _getColWidthLimits(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            if (limits) {\r\n                hasLimitsOnAuto.push(limits);\r\n                if (limits.min) {\r\n                    sumMin += limits.min;\r\n                }\r\n            }\r\n            autoCount++;\r\n        }\r\n        else {\r\n            let expr = def;\r\n            if (limits) {\r\n                const orgWidth = _toPxWidth(grid, expr);\r\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\r\n                if (orgWidth !== newWidth) {\r\n                    expr = `${newWidth}px`;\r\n                }\r\n                sumMin += newWidth;\r\n            }\r\n            others.push(expr);\r\n        }\r\n        if (shortCircuit && sumMin > fullWidth) {\r\n            // Returns 0px because it has consumed the full width.\r\n            return \"0px\";\r\n        }\r\n    }\r\n    if (hasLimitsOnAuto.length && others.length) {\r\n        const autoPx = (fullWidth -\r\n            _toPxWidth(grid, `calc(${others\r\n                .map((c) => (typeof c === \"number\" ? `${c}px` : c))\r\n                .join(\" + \")})`)) /\r\n            autoCount;\r\n        hasLimitsOnAuto.forEach((limits) => {\r\n            if (limits.min && autoPx < limits.min) {\r\n                others.push(limits.minDef);\r\n                autoCount--;\r\n            }\r\n            else if (limits.max && limits.max < autoPx) {\r\n                others.push(limits.maxDef);\r\n                autoCount--;\r\n            }\r\n        });\r\n        if (shortCircuit && autoCount <= 0) {\r\n            return `${autoPx}px`;\r\n        }\r\n    }\r\n    if (others.length) {\r\n        const strDefs = [];\r\n        let num = 0;\r\n        others.forEach((c) => {\r\n            if (typeof c === \"number\") {\r\n                num += c;\r\n            }\r\n            else {\r\n                strDefs.push(c);\r\n            }\r\n        });\r\n        strDefs.push(`${num}px`);\r\n        return `calc((100% - (${strDefs.join(\" + \")})) / ${autoCount})`;\r\n    }\r\n    else {\r\n        return `${100 / autoCount}%`;\r\n    }\r\n}\r\n/**\r\n * Calculate the pixels of width from the definition of width.\r\n * @param {DrawGrid} grid grid instance\r\n * @param {string|number} width width definition\r\n * @returns {number} the pixels of width\r\n * @private\r\n */\r\nfunction _colWidthDefineToPxWidth(grid, width) {\r\n    if (isAutoDefine(width)) {\r\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\r\n    }\r\n    return _toPxWidth(grid, width);\r\n}\r\n/** @private */\r\nfunction _getColWidth(grid, col) {\r\n    const width = _getColWidthDefine(grid, col);\r\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\r\n}\r\n/** @private */\r\nfunction _setColWidth(grid, col, width) {\r\n    if (width != null) {\r\n        grid[_].colWidthsMap.put(col, width);\r\n    }\r\n    else {\r\n        grid[_].colWidthsMap.remove(col);\r\n    }\r\n}\r\n/**\r\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\r\n * @param {DrawGrid} grid grid instance\r\n * @returns {void}\r\n * @private\r\n */\r\nfunction _storeAutoColWidthExprs(grid) {\r\n    let expr = null;\r\n    for (let col = 0; col < grid[_].colCount; col++) {\r\n        const def = _getColWidthDefine(grid, col);\r\n        if (isAutoDefine(def)) {\r\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid, false)));\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _getColsWidth(grid, startCol, endCol) {\r\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\r\n    const colCount = endCol - startCol + 1;\r\n    let w = defaultColPxWidth * colCount;\r\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n        w +=\r\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\r\n                defaultColPxWidth;\r\n    });\r\n    for (let col = startCol; col <= endCol; col++) {\r\n        if (grid[_].colWidthsMap.has(col)) {\r\n            continue;\r\n        }\r\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\r\n        if (adj !== defaultColPxWidth) {\r\n            w += adj - defaultColPxWidth;\r\n        }\r\n    }\r\n    return w;\r\n}\r\n/** @private */\r\nfunction _getRowHeight(row) {\r\n    const internal = this.getRowHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const height = this[_].rowHeightsMap.get(row);\r\n    if (height) {\r\n        return height;\r\n    }\r\n    return this[_].defaultRowHeight;\r\n}\r\n/** @private */\r\nfunction _setRowHeight(grid, row, height) {\r\n    if (height != null) {\r\n        grid[_].rowHeightsMap.put(row, height);\r\n    }\r\n    else {\r\n        grid[_].rowHeightsMap.remove(row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getRowsHeight(startRow, endRow) {\r\n    const internal = this.getRowsHeightInternal(startRow, endRow);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    const rowCount = endRow - startRow + 1;\r\n    let h = this[_].defaultRowHeight * rowCount;\r\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _getScrollWidth(grid) {\r\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\r\n}\r\n/** @private */\r\nfunction _getScrollHeight(row) {\r\n    const internal = this.getScrollHeightInternal(row);\r\n    if (internal != null) {\r\n        return internal;\r\n    }\r\n    let h = this[_].defaultRowHeight * this[_].rowCount;\r\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\r\n        h += height - this[_].defaultRowHeight;\r\n    });\r\n    return h;\r\n}\r\n/** @private */\r\nfunction _onScroll(grid, _e) {\r\n    const lastLeft = grid[_].scroll.left;\r\n    const lastTop = grid[_].scroll.top;\r\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\r\n    //\r\n    grid[_].scroll = {\r\n        left: grid[_].scrollable.scrollLeft,\r\n        top: grid[_].scrollable.scrollTop,\r\n    };\r\n    // If the focus is on the header, recalculate and move the focus position.\r\n    const { focus } = grid[_].selection;\r\n    const isFrozenCell = grid.isFrozenCell(focus.col, focus.row);\r\n    if (isFrozenCell &&\r\n        (((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.col) && moveX) || ((isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) && moveY))) {\r\n        grid.setFocusCursor(focus.col, focus.row);\r\n    }\r\n    const visibleRect = _getVisibleRect(grid);\r\n    if (Math.abs(moveX) >= visibleRect.width ||\r\n        Math.abs(moveY) >= visibleRect.height) {\r\n        //\r\n        _invalidateRect(grid, visibleRect);\r\n    }\r\n    else {\r\n        //\r\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n        if (moveX !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveX < 0) {\r\n                redrawRect.width = -moveX;\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenColsRect(grid);\r\n                    redrawRect.width += frozenRect.width;\r\n                }\r\n            }\r\n            else if (moveX > 0) {\r\n                redrawRect.left = redrawRect.right - moveX;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveX > 0) {\r\n                if (grid[_].frozenColCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\r\n                }\r\n            }\r\n        }\r\n        if (moveY !== 0) {\r\n            //\r\n            const redrawRect = visibleRect.copy();\r\n            if (moveY < 0) {\r\n                redrawRect.height = -moveY;\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    const frozenRect = _getFrozenRowsRect(grid);\r\n                    redrawRect.height += frozenRect.height;\r\n                }\r\n            }\r\n            else if (moveY > 0) {\r\n                redrawRect.top = redrawRect.bottom - moveY;\r\n            }\r\n            //\r\n            _invalidateRect(grid, redrawRect);\r\n            if (moveY > 0) {\r\n                if (grid[_].frozenRowCount > 0) {\r\n                    //\r\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/** @private */\r\n// eslint-disable-next-line complexity\r\nfunction _onKeyDownMove(e) {\r\n    var _a, _b, _c;\r\n    const { shiftKey } = e;\r\n    const keyCode = getKeyCode(e);\r\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\r\n    if (keyCode === KEY_LEFT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"W\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"W\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_UP) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"N\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_RIGHT) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, null, \"E\");\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_DOWN) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", null);\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\")) {\r\n                return;\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_HOME) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"N\", \"W\");\r\n        }\r\n        else {\r\n            move(this, null, \"W\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (keyCode === KEY_END) {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            move(this, \"S\", \"E\");\r\n        }\r\n        else {\r\n            move(this, null, \"E\");\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnTab === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnTab({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!hMove.call(this, \"W\", false)) {\r\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n                if (0 > row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!hMove.call(this, \"E\", false)) {\r\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n                if (this.rowCount <= row) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, 0, row, false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\r\n        let newCell = null;\r\n        if (typeof this.keyboardOptions.moveCellOnEnter === \"function\") {\r\n            newCell = this.keyboardOptions.moveCellOnEnter({\r\n                cell: focusCell,\r\n                grid: this,\r\n                event: e,\r\n            });\r\n        }\r\n        if (newCell) {\r\n            _moveFocusCell.call(this, newCell.col, newCell.row, false);\r\n        }\r\n        else if (shiftKey) {\r\n            if (!vMove.call(this, \"N\", false)) {\r\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n                if (0 > col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\r\n            }\r\n        }\r\n        else {\r\n            if (!vMove.call(this, \"S\", false)) {\r\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n                if (this.colCount <= col) {\r\n                    return;\r\n                }\r\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\r\n            }\r\n        }\r\n        cancelEvent(e);\r\n    }\r\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n        keyCode === KEY_ALPHA_A &&\r\n        (e.ctrlKey || e.metaKey)) {\r\n        this.selection.range = {\r\n            start: { col: 0, row: 0 },\r\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\r\n        };\r\n        this.invalidate();\r\n        cancelEvent(e);\r\n    }\r\n    function move(grid, vDir, hDir) {\r\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\r\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\r\n        _moveFocusCell.call(grid, col, row, shiftKey);\r\n    }\r\n    function vMove(vDir, shiftKeyFlg = shiftKey) {\r\n        const { col } = focusCell;\r\n        let row;\r\n        if (vDir === \"S\") {\r\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\r\n            if (this.rowCount <= row) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, this.rowCount - 1);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\r\n            if (row < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(col, 0);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n    function hMove(hDir, shiftKeyFlg = shiftKey) {\r\n        const { row } = focusCell;\r\n        let col;\r\n        if (hDir === \"E\") {\r\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\r\n            if (this.colCount <= col) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(this.colCount - 1, row);\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\r\n            if (col < 0) {\r\n                // Avoids the problem of the scroll position breaking due to a delayed scrolling event if user hold down the arrow keys.\r\n                this.makeVisibleCell(0, row);\r\n                return false;\r\n            }\r\n        }\r\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\r\n        return true;\r\n    }\r\n}\r\n/** @private */\r\nfunction _moveFocusCell(col, row, shiftKey) {\r\n    const offset = this.getOffsetInvalidateCells();\r\n    function extendRange(range) {\r\n        if (offset > 0) {\r\n            range.start.col -= offset;\r\n            range.start.row -= offset;\r\n            range.end.col += offset;\r\n            range.end.row += offset;\r\n        }\r\n        return range;\r\n    }\r\n    const beforeRange = extendRange(this.selection.range);\r\n    const beforeRect = this.getCellRangeRect(beforeRange);\r\n    this.selection._setFocusCell(col, row, shiftKey);\r\n    this.makeVisibleCell(col, row);\r\n    this.focusCell(col, row);\r\n    const afterRange = extendRange(this.selection.range);\r\n    const afterRect = this.getCellRangeRect(afterRange);\r\n    if (afterRect.intersection(beforeRect)) {\r\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\r\n        _invalidateRect(this, invalidateRect);\r\n    }\r\n    else {\r\n        _invalidateRect(this, beforeRect);\r\n        _invalidateRect(this, afterRect);\r\n    }\r\n}\r\n/** @private */\r\nfunction _updatedSelection() {\r\n    const { focusControl } = this[_];\r\n    const { col: selCol, row: selRow } = this[_].selection.select;\r\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\r\n        col: selCol,\r\n        row: selRow,\r\n    });\r\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\r\n    focusControl.editMode = editMode;\r\n    if (editMode) {\r\n        focusControl.storeInputStatus();\r\n        focusControl.setDefaultInputStatus();\r\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\r\n            col: selCol,\r\n            row: selRow,\r\n            input: focusControl.input,\r\n        });\r\n    }\r\n}\r\n/** @private */\r\nfunction _getMouseAbstractPoint(grid, evt) {\r\n    let e;\r\n    if (isTouchEvent(evt)) {\r\n        e = evt.changedTouches[0];\r\n    }\r\n    else {\r\n        e = evt;\r\n    }\r\n    const clientX = e.clientX || e.pageX + window.scrollX;\r\n    const clientY = e.clientY || e.pageY + window.scrollY;\r\n    const rect = grid[_].canvas.getBoundingClientRect();\r\n    if (rect.right <= clientX) {\r\n        return null;\r\n    }\r\n    if (rect.bottom <= clientY) {\r\n        return null;\r\n    }\r\n    const x = clientX - rect.left + grid[_].scroll.left;\r\n    const y = clientY - rect.top + grid[_].scroll.top;\r\n    return { x, y };\r\n}\r\n/** @private */\r\nfunction _bindEvents() {\r\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\r\n    const grid = this;\r\n    const { handler, element, scrollable } = grid[_];\r\n    const getCellEventArgsSet = (e) => {\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return {};\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return {\r\n                abstractPos,\r\n                cell,\r\n            };\r\n        }\r\n        const eventArgs = {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            event: e,\r\n        };\r\n        return {\r\n            abstractPos,\r\n            cell,\r\n            eventArgs,\r\n        };\r\n    };\r\n    const canResizeColumn = (col) => {\r\n        if (grid[_].disableColumnResize) {\r\n            return false;\r\n        }\r\n        const limit = grid[_].colWidthsLimit[col];\r\n        if (!limit || !limit.min || !limit.max) {\r\n            return true;\r\n        }\r\n        return limit.max !== limit.min;\r\n    };\r\n    handler.on(element, \"mousedown\", (e) => {\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs, cell } = eventArgsSet;\r\n        if (!abstractPos) {\r\n            return;\r\n        }\r\n        if (cell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_GRID, cell);\r\n        }\r\n        if (eventArgs) {\r\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\r\n                return;\r\n            }\r\n        }\r\n        if (getMouseButtons(e) !== 1 &&\r\n            // For mobile safari. If we do not post-process here, the keyboard will not start in Mobile Safari.\r\n            e.buttons !== 0) {\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            //\r\n            grid[_].columnResizer.start(resizeCol, e);\r\n        }\r\n        else {\r\n            //\r\n            grid[_].cellSelector.start(e);\r\n        }\r\n    });\r\n    handler.on(element, \"mouseup\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\r\n        }\r\n    });\r\n    let doubleTapBefore = null;\r\n    let longTouchId = null;\r\n    let useTouch = null;\r\n    function useTouchStart() {\r\n        if ((useTouch === null || useTouch === void 0 ? void 0 : useTouch.timeoutId) != null)\r\n            clearTimeout(useTouch.timeoutId);\r\n        useTouch = {};\r\n    }\r\n    function useTouchEnd() {\r\n        if (useTouch) {\r\n            if (useTouch.timeoutId != null)\r\n                clearTimeout(useTouch.timeoutId);\r\n            useTouch.timeoutId = setTimeout(() => {\r\n                useTouch = null;\r\n            }, 350);\r\n        }\r\n    }\r\n    handler.on(element, \"touchstart\", (e) => {\r\n        // Since it is an environment where touch start can be used, it blocks mousemove that occurs after this.\r\n        useTouchStart();\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (eventArgs) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.TOUCHSTART_CELL, eventArgs);\r\n        }\r\n        if (!doubleTapBefore) {\r\n            doubleTapBefore = eventArgs;\r\n            setTimeout(() => {\r\n                doubleTapBefore = null;\r\n            }, 350);\r\n        }\r\n        else {\r\n            if (eventArgs &&\r\n                eventArgs.col === doubleTapBefore.col &&\r\n                eventArgs.row === doubleTapBefore.row) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n            }\r\n            doubleTapBefore = null;\r\n            if (e.defaultPrevented) {\r\n                return;\r\n            }\r\n        }\r\n        if (e.targetTouches.length > 1) {\r\n            // If touchstart with multiple fingers,\r\n            // it is not considered as an operation event.\r\n            return;\r\n        }\r\n        longTouchId = setTimeout(() => {\r\n            //\r\n            longTouchId = null;\r\n            const abstractPos = _getMouseAbstractPoint(grid, e);\r\n            if (!abstractPos) {\r\n                return;\r\n            }\r\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n                //\r\n                grid[_].columnResizer.start(resizeCol, e);\r\n            }\r\n            else {\r\n                //\r\n                grid[_].cellSelector.start(e);\r\n            }\r\n        }, 500);\r\n    });\r\n    function cancel(_e) {\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            longTouchId = null;\r\n        }\r\n    }\r\n    handler.on(element, \"touchcancel\", (e) => {\r\n        cancel(e);\r\n        useTouchEnd();\r\n    });\r\n    handler.on(element, \"touchmove\", cancel);\r\n    handler.on(element, \"touchend\", (e) => {\r\n        useTouchEnd();\r\n        if (longTouchId) {\r\n            clearTimeout(longTouchId);\r\n            grid[_].cellSelector.select(e);\r\n            longTouchId = null;\r\n        }\r\n    });\r\n    let isMouseover = false;\r\n    let mouseEnterCell = null;\r\n    let mouseOverCell = null;\r\n    function onMouseenterCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseEnterCell = cell;\r\n    }\r\n    function onMouseleaveCell(related) {\r\n        const beforeMouseCell = mouseEnterCell;\r\n        mouseEnterCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    function onMouseoverCell(cell, related) {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n            related,\r\n        });\r\n        mouseOverCell = cell;\r\n    }\r\n    function onMouseoutCell(related) {\r\n        const beforeMouseCell = mouseOverCell;\r\n        mouseOverCell = null;\r\n        if (beforeMouseCell) {\r\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\r\n                col: beforeMouseCell.col,\r\n                row: beforeMouseCell.row,\r\n                related,\r\n            });\r\n        }\r\n        return beforeMouseCell || undefined;\r\n    }\r\n    const scrollElement = scrollable.getElement();\r\n    handler.on(scrollElement, \"mouseover\", (_e) => {\r\n        isMouseover = true;\r\n    });\r\n    handler.on(scrollElement, \"mouseout\", (_e) => {\r\n        isMouseover = false;\r\n        onMouseoutCell();\r\n    });\r\n    handler.on(element, \"mouseleave\", (_e) => {\r\n        onMouseleaveCell();\r\n    });\r\n    handler.on(element, \"mousemove\", (e) => {\r\n        if (useTouch) {\r\n            // Probably a mousemove event triggered by a touchstart. Therefore, this event is blocked.\r\n            return;\r\n        }\r\n        const eventArgsSet = getCellEventArgsSet(e);\r\n        const { abstractPos, eventArgs } = eventArgsSet;\r\n        if (eventArgs) {\r\n            const beforeMouseCell = mouseEnterCell;\r\n            if (beforeMouseCell) {\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n                if (beforeMouseCell.col !== eventArgs.col ||\r\n                    beforeMouseCell.row !== eventArgs.row) {\r\n                    const enterCell = {\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    };\r\n                    const outCell = onMouseoutCell(enterCell);\r\n                    const leaveCell = onMouseleaveCell(enterCell);\r\n                    onMouseenterCell(enterCell, leaveCell);\r\n                    if (isMouseover) {\r\n                        onMouseoverCell(enterCell, outCell);\r\n                    }\r\n                }\r\n                else if (isMouseover && !mouseOverCell) {\r\n                    onMouseoverCell({\r\n                        col: eventArgs.col,\r\n                        row: eventArgs.row,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                const enterCell = {\r\n                    col: eventArgs.col,\r\n                    row: eventArgs.row,\r\n                };\r\n                onMouseenterCell(enterCell);\r\n                if (isMouseover) {\r\n                    onMouseoverCell(enterCell);\r\n                }\r\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n            }\r\n        }\r\n        else {\r\n            onMouseoutCell();\r\n            onMouseleaveCell();\r\n        }\r\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n            return;\r\n        }\r\n        const { style } = element;\r\n        if (!abstractPos) {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n            return;\r\n        }\r\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n            style.cursor = \"col-resize\";\r\n        }\r\n        else {\r\n            if (style.cursor === \"col-resize\") {\r\n                style.cursor = \"\";\r\n            }\r\n        }\r\n    });\r\n    handler.on(element, \"click\", (e) => {\r\n        if (grid[_].columnResizer.lastMoving(e) ||\r\n            grid[_].cellSelector.lastMoving(e)) {\r\n            return;\r\n        }\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"contextmenu\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\r\n    });\r\n    handler.on(element, \"dblclick\", (e) => {\r\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\r\n            return;\r\n        }\r\n        const { eventArgs } = getCellEventArgsSet(e);\r\n        if (!eventArgs) {\r\n            return;\r\n        }\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n    });\r\n    grid[_].focusControl.onKeyDown((evt) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\r\n    });\r\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n    });\r\n    scrollable.onScroll((e) => {\r\n        _onScroll(grid, e);\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\r\n    });\r\n    grid[_].focusControl.onKeyDownMove((e) => {\r\n        _onKeyDownMove.call(grid, e);\r\n    });\r\n    grid.listen(\"copydata\", (range) => {\r\n        const copyRange = grid.getCopyRangeInternal(range);\r\n        const copyLines = [];\r\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\r\n            let copyLine = \"\";\r\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\r\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\r\n                let strCellValue;\r\n                if (typeof copyCellValue === \"string\") {\r\n                    strCellValue = copyCellValue;\r\n                }\r\n                else if (copyCellValue == null ||\r\n                    // Asynchronous data is treated as empty.\r\n                    (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise)) {\r\n                    strCellValue = \"\";\r\n                }\r\n                else {\r\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                    strCellValue = `${copyCellValue}`;\r\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\r\n                        // Ignore maybe object\r\n                        strCellValue = \"\";\r\n                    }\r\n                }\r\n                copyLine += /[\\t\\n]/.test(strCellValue)\r\n                    ? // Need quote\r\n                        `\"${strCellValue.replace(/\"/g, '\"\"')}\"`\r\n                    : strCellValue;\r\n                if (col < copyRange.end.col) {\r\n                    copyLine += \"\\t\";\r\n                }\r\n            }\r\n            copyLines.push(copyLine);\r\n        }\r\n        return copyLines.join(\"\\n\");\r\n    });\r\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), (r) => r != null));\r\n    grid[_].focusControl.onPaste(({ value, event }) => {\r\n        const { trimOnPaste } = grid;\r\n        const normalizedValue = (0, paste_utils_1.normalizePasteValue)(value);\r\n        const { col, row } = grid[_].selection.select;\r\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizedValue); // is multi cell values\r\n        let rangeBoxValues = null;\r\n        const pasteCellEvent = {\r\n            col,\r\n            row,\r\n            value,\r\n            normalizeValue: trimOnPaste ? normalizedValue.trim() : normalizedValue,\r\n            multi,\r\n            get rangeBoxValues() {\r\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = (0, paste_utils_1.parsePasteRangeBoxValues)(normalizedValue, {\r\n                    trimOnPaste,\r\n                })));\r\n            },\r\n            event,\r\n        };\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\r\n    });\r\n    grid[_].focusControl.onInput((value) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\r\n    });\r\n    grid[_].focusControl.onDelete((event) => {\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\r\n    });\r\n    grid[_].focusControl.onFocus((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\r\n        grid[_].focusedGrid = true;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n    grid[_].focusControl.onBlur((e) => {\r\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\r\n        grid[_].focusedGrid = false;\r\n        const { col, row } = grid[_].selection.select;\r\n        grid.invalidateCell(col, row);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n    if (grid[_].frozenRowCount <= 0) {\r\n        return -1;\r\n    }\r\n    const frozenRect = _getFrozenRowsRect(grid);\r\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\r\n        return -1;\r\n    }\r\n    const cell = grid.getCellAt(abstractX, abstractY);\r\n    const cellRect = grid.getCellRect(cell.col, cell.row);\r\n    if (abstractX < cellRect.left + offset) {\r\n        return cell.col - 1;\r\n    }\r\n    if (cellRect.right - offset < abstractX) {\r\n        return cell.col;\r\n    }\r\n    return -1;\r\n}\r\n/** @private */\r\nfunction _getVisibleRect(grid) {\r\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\r\n    return new Rect_1.Rect(left, top, width, height);\r\n}\r\n/** @private */\r\nfunction _getScrollableVisibleRect(grid) {\r\n    let frozenColsWidth = 0;\r\n    if (grid[_].frozenColCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenColsRect(grid);\r\n        frozenColsWidth = frozenRect.width;\r\n    }\r\n    let frozenRowsHeight = 0;\r\n    if (grid[_].frozenRowCount > 0) {\r\n        //\r\n        const frozenRect = _getFrozenRowsRect(grid);\r\n        frozenRowsHeight = frozenRect.height;\r\n    }\r\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\r\n}\r\n/** @private */\r\nfunction _toRelativeRect(grid, absoluteRect) {\r\n    const rect = absoluteRect.copy();\r\n    const visibleRect = _getVisibleRect(grid);\r\n    rect.offsetLeft(-visibleRect.left);\r\n    rect.offsetTop(-visibleRect.top);\r\n    return rect;\r\n}\r\n//end private methods\r\n//\r\n//\r\n//\r\n//\r\n/**\r\n * managing mouse down moving\r\n * @private\r\n */\r\nclass BaseMouseDownMover {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._events = {};\r\n        this._started = false;\r\n        this._moved = false;\r\n    }\r\n    moving(_e) {\r\n        return !!this._started;\r\n    }\r\n    lastMoving(e) {\r\n        // mouseupclick\r\n        if (this.moving(e)) {\r\n            return true;\r\n        }\r\n        const last = this._mouseEndPoint;\r\n        if (!last) {\r\n            return false;\r\n        }\r\n        const pt = _getMouseAbstractPoint(this._grid, e);\r\n        return pt != null && pt.x === last.x && pt.y === last.y;\r\n    }\r\n    _bindMoveAndUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        if (!isTouchEvent(e)) {\r\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\r\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\r\n        }\r\n        else {\r\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\r\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\r\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\r\n        }\r\n        this._started = true;\r\n        this._moved = false;\r\n    }\r\n    _mouseMove(e) {\r\n        if (!isTouchEvent(e)) {\r\n            if (getMouseButtons(e) !== 1) {\r\n                this._mouseUp(e);\r\n                return;\r\n            }\r\n        }\r\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\r\n        cancelEvent(e);\r\n    }\r\n    _moveInternal(_e) {\r\n        //protected\r\n        return false;\r\n    }\r\n    _mouseUp(e) {\r\n        const events = this._events;\r\n        const handler = this._handler;\r\n        handler.off(events.mousemove);\r\n        handler.off(events.touchmove);\r\n        handler.off(events.mouseup);\r\n        handler.off(events.touchend);\r\n        // handler.off(this._events.mouseleave);\r\n        handler.off(events.touchcancel);\r\n        this._started = false;\r\n        this._upInternal(e);\r\n        // mouseupclick\r\n        if (this._moved) {\r\n            //\r\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n            setTimeout(() => {\r\n                this._mouseEndPoint = null;\r\n            }, 10);\r\n        }\r\n    }\r\n    _upInternal(_e) {\r\n        //protected\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * managing cell selection operation with mouse\r\n * @private\r\n */\r\nclass CellSelector extends BaseMouseDownMover {\r\n    start(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._bindMoveAndUp(e);\r\n        this._cell = cell;\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    select(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return;\r\n        }\r\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\r\n        this._cell = cell;\r\n    }\r\n    _moveInternal(e) {\r\n        const cell = this._getTargetCell(e);\r\n        if (!cell) {\r\n            return false;\r\n        }\r\n        const { col: oldCol, row: oldRow } = this._cell;\r\n        const { col: newCol, row: newRow } = cell;\r\n        if (oldCol === newCol && oldRow === newRow) {\r\n            return false;\r\n        }\r\n        const grid = this._grid;\r\n        _moveFocusCell.call(grid, newCol, newRow, true);\r\n        //make visible\r\n        const makeVisibleCol = (() => {\r\n            if (newCol < oldCol && 0 < newCol) {\r\n                // move left\r\n                return newCol - 1;\r\n            }\r\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\r\n                // move right\r\n                return newCol + 1;\r\n            }\r\n            return newCol;\r\n        })();\r\n        const makeVisibleRow = (() => {\r\n            if (newRow < oldRow && 0 < newRow) {\r\n                // move up\r\n                return newRow - 1;\r\n            }\r\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\r\n                // move down\r\n                return newRow + 1;\r\n            }\r\n            return newRow;\r\n        })();\r\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\r\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n        }\r\n        this._cell = cell;\r\n        return true;\r\n    }\r\n    _getTargetCell(e) {\r\n        const grid = this._grid;\r\n        const abstractPos = _getMouseAbstractPoint(grid, e);\r\n        if (!abstractPos) {\r\n            return null;\r\n        }\r\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n        if (cell.col < 0 || cell.row < 0) {\r\n            return null;\r\n        }\r\n        return cell;\r\n    }\r\n}\r\n/**\r\n * managing row width changing operation with mouse\r\n * @private\r\n */\r\nclass ColumnResizer extends BaseMouseDownMover {\r\n    constructor(grid) {\r\n        super(grid);\r\n        this._x = -1;\r\n        this._preX = -1;\r\n        this._invalidateAbsoluteLeft = -1;\r\n        this._targetCol = -1;\r\n    }\r\n    start(col, e) {\r\n        let pageX;\r\n        if (!isTouchEvent(e)) {\r\n            ({ pageX } = e);\r\n        }\r\n        else {\r\n            ({ pageX } = e.changedTouches[0]);\r\n        }\r\n        this._x = pageX;\r\n        this._preX = 0;\r\n        this._bindMoveAndUp(e);\r\n        this._targetCol = col;\r\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n        cancelEvent(e);\r\n        _vibrate(e);\r\n    }\r\n    _moveInternal(e) {\r\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n        const x = pageX - this._x;\r\n        const moveX = x - this._preX;\r\n        this._preX = x;\r\n        const pre = this._grid.getColWidth(this._targetCol);\r\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n        if (afterSize < 10 && moveX < 0) {\r\n            afterSize = 10;\r\n        }\r\n        _storeAutoColWidthExprs(this._grid);\r\n        _setColWidth(this._grid, this._targetCol, afterSize);\r\n        const rect = _getVisibleRect(this._grid);\r\n        rect.left = this._invalidateAbsoluteLeft;\r\n        _invalidateRect(this._grid, rect);\r\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\r\n            col: this._targetCol,\r\n        });\r\n        return true;\r\n    }\r\n    _upInternal(_e) {\r\n        const grid = this._grid;\r\n        if (grid.updateScroll()) {\r\n            grid.invalidate();\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction setSafeInputValue(input, value) {\r\n    const { type } = input;\r\n    input.type = \"\";\r\n    input.value = value;\r\n    if (type) {\r\n        input.type = type;\r\n    }\r\n}\r\nconst IGNORE_STORE_ATTRS = [\"style\", \"readonly\"];\r\n/**\r\n * Manage focus\r\n * @private\r\n */\r\nclass FocusControl extends EventTarget_1.EventTarget {\r\n    constructor(grid, parentElement, scrollable, selection) {\r\n        super();\r\n        this._grid = grid;\r\n        this._scrollable = scrollable;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        const input = (this._input = document.createElement(\"input\"));\r\n        input.classList.add(\"grid-focus-control\");\r\n        input.readOnly = true;\r\n        parentElement.appendChild(input);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n            input.style.font = grid.font || \"16px sans-serif\";\r\n            this._isComposition = true;\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n            grid.focus();\r\n        });\r\n        let lastInputValue;\r\n        const inputClear = (storeLastInputValue) => {\r\n            lastInputValue = input.value;\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (lastInputValue !== \"\") {\r\n                setSafeInputValue(input, \"\");\r\n            }\r\n            if (!storeLastInputValue) {\r\n                lastInputValue = \"\";\r\n            }\r\n        };\r\n        const handleCompositionEnd = () => {\r\n            this._isComposition = false;\r\n            input.classList.remove(\"composition\");\r\n            input.style.font = \"\";\r\n            const { value } = input;\r\n            inputClear(false);\r\n            if (!input.readOnly) {\r\n                this.fireListeners(\"input\", value);\r\n            }\r\n            if (this._compositionEnd) {\r\n                clearTimeout(this._compositionEnd);\r\n                delete this._compositionEnd;\r\n            }\r\n        };\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\r\n        });\r\n        selection.listen(\"before_hook\", () => {\r\n            if (this._compositionEnd) {\r\n                handleCompositionEnd();\r\n            }\r\n        });\r\n        handler.on(input, \"keypress\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!input.readOnly && e.key && e.key.length === 1) {\r\n                if (e.ctrlKey || e.metaKey) {\r\n                    if (e.key === \"c\") {\r\n                        //copy! for Firefox & Safari\r\n                    }\r\n                    else if (e.key === \"v\") {\r\n                        //paste! for Firefox & Safari\r\n                    }\r\n                }\r\n                else {\r\n                    if (e.key === \" \") {\r\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\r\n                        return;\r\n                    }\r\n                    this.fireListeners(\"input\", e.key);\r\n                    cancelEvent(e);\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            var _a;\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                    cancelEvent(e);\r\n                }\r\n                return;\r\n            }\r\n            const keyCode = getKeyCode(e);\r\n            let stopCellMove = false;\r\n            const evt = {\r\n                keyCode,\r\n                event: e,\r\n                stopCellMoving() {\r\n                    stopCellMove = true;\r\n                },\r\n            };\r\n            this.fireListeners(\"keydown\", evt);\r\n            if (!input.readOnly && lastInputValue) {\r\n                // for Safari\r\n                this.fireListeners(\"input\", lastInputValue);\r\n            }\r\n            if (!stopCellMove)\r\n                this.fireKeyDownMove(keyCode, e);\r\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\r\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\r\n                this.fireListeners(\"delete\", e);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"keyup\", (_e) => {\r\n            if (this._isComposition) {\r\n                if (this._compositionEnd) {\r\n                    handleCompositionEnd();\r\n                }\r\n            }\r\n            inputClear(true);\r\n        });\r\n        handler.on(input, \"input\", (e) => {\r\n            if (e.data === \" \" || e.data === \"\") {\r\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\r\n                this.fireListeners(\"input\", e.data);\r\n            }\r\n            inputClear(true);\r\n        });\r\n        if (utils_1.browser.IE) {\r\n            handler.on(document, \"keydown\", (e) => {\r\n                if (e.target !== input) {\r\n                    return;\r\n                }\r\n                const keyCode = getKeyCode(e);\r\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n                    // When text is not selected copy-event is not emit, on IE.\r\n                    setSafeInputValue(input, \"dummy\");\r\n                    input.select();\r\n                    setTimeout(() => {\r\n                        setSafeInputValue(input, \"\");\r\n                    }, 100);\r\n                }\r\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\r\n                    // When input is read-only paste-event is not emit, on IE.\r\n                    if (input.readOnly) {\r\n                        input.readOnly = false;\r\n                        setTimeout(() => {\r\n                            input.readOnly = true;\r\n                            setSafeInputValue(input, \"\");\r\n                        }, 10);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (utils_1.browser.Edge) {\r\n            handler.once(document, \"keydown\", (e) => {\r\n                var _a;\r\n                if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                    return;\r\n                }\r\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\r\n                const dummyInput = document.createElement(\"input\");\r\n                grid.getElement().appendChild(dummyInput);\r\n                dummyInput.focus();\r\n                input.focus();\r\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\r\n            });\r\n        }\r\n        handler.on(document, \"paste\", (e) => {\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            let pasteText = undefined;\r\n            if (utils_1.browser.IE) {\r\n                // IE\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                pasteText = window.clipboardData.getData(\"Text\");\r\n            }\r\n            else {\r\n                const clipboardData = e.clipboardData;\r\n                if (clipboardData.items) {\r\n                    // Chrome & Firefox & Edge\r\n                    pasteText = clipboardData.getData(\"text/plain\");\r\n                }\r\n                else {\r\n                    // Safari\r\n                    if (-1 !==\r\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\r\n                        pasteText = clipboardData.getData(\"Text\");\r\n                    }\r\n                }\r\n            }\r\n            if (pasteText != null && pasteText.length) {\r\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\r\n            }\r\n        });\r\n        handler.on(document, \"copy\", (e) => {\r\n            if (this._isComposition) {\r\n                return;\r\n            }\r\n            if (!(0, utils_1.isDescendantElement)(parentElement, e.target)) {\r\n                return;\r\n            }\r\n            setSafeInputValue(input, \"\");\r\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), (r) => r != null);\r\n            if (data != null) {\r\n                cancelEvent(e);\r\n                if (utils_1.browser.IE) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    window.clipboardData.setData(\"Text\", data); // IE\r\n                }\r\n                else {\r\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\r\n                }\r\n            }\r\n        });\r\n        handler.on(input, \"focus\", (e) => {\r\n            this.fireListeners(\"focus\", e);\r\n        });\r\n        handler.on(input, \"blur\", (e) => {\r\n            this.fireListeners(\"blur\", e);\r\n        });\r\n    }\r\n    fireKeyDownMove(keyCode, e) {\r\n        var _a, _b, _c;\r\n        const fn = this._keyDownMoveCallback;\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        if (this._isComposition) {\r\n            return;\r\n        }\r\n        if (keyCode === KEY_LEFT ||\r\n            keyCode === KEY_UP ||\r\n            keyCode === KEY_RIGHT ||\r\n            keyCode === KEY_DOWN ||\r\n            keyCode === KEY_HOME ||\r\n            keyCode === KEY_END) {\r\n            fn(e);\r\n        }\r\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\r\n            keyCode === KEY_TAB) {\r\n            fn(e);\r\n        }\r\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\r\n            keyCode === KEY_ENTER) {\r\n            fn(e);\r\n        }\r\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\r\n            keyCode === KEY_ALPHA_A &&\r\n            (e.ctrlKey || e.metaKey)) {\r\n            fn(e);\r\n        }\r\n    }\r\n    onKeyDownMove(fn) {\r\n        this._keyDownMoveCallback = fn;\r\n    }\r\n    onKeyDown(fn) {\r\n        return this.listen(\"keydown\", fn);\r\n    }\r\n    onInput(fn) {\r\n        return this.listen(\"input\", fn);\r\n    }\r\n    onDelete(fn) {\r\n        return this.listen(\"delete\", fn);\r\n    }\r\n    onCopy(fn) {\r\n        return this.listen(\"copy\", fn);\r\n    }\r\n    onPaste(fn) {\r\n        return this.listen(\"paste\", fn);\r\n    }\r\n    onFocus(fn) {\r\n        return this.listen(\"focus\", fn);\r\n    }\r\n    onBlur(fn) {\r\n        return this.listen(\"blur\", fn);\r\n    }\r\n    focus() {\r\n        // this._input.value = '';\r\n        this._input.focus();\r\n    }\r\n    setFocusRect(rect) {\r\n        const input = this._input;\r\n        const top = this._scrollable.calcTop(rect.top);\r\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n    }\r\n    get editMode() {\r\n        return !this._input.readOnly;\r\n    }\r\n    set editMode(editMode) {\r\n        this._input.readOnly = !editMode;\r\n    }\r\n    resetInputStatus() {\r\n        var _a;\r\n        const el = this._input;\r\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const composition = el.classList.contains(\"composition\");\r\n        const attrs = el.attributes;\r\n        const removeNames = [];\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(attr.nodeName))) {\r\n                removeNames.push(attr.name);\r\n            }\r\n        }\r\n        removeNames.forEach((removeName) => {\r\n            el.removeAttribute(removeName);\r\n        });\r\n        for (const name in this._inputStatus) {\r\n            el.setAttribute(name, this._inputStatus[name]);\r\n        }\r\n        if (composition) {\r\n            el.classList.add(\"composition\");\r\n            el.style.font = this._grid.font || \"16px sans-serif\";\r\n        }\r\n        else {\r\n            el.classList.remove(\"composition\");\r\n        }\r\n        el.classList.remove(\"grid-focus-control--stored-status\");\r\n    }\r\n    storeInputStatus() {\r\n        const el = this._input;\r\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\r\n            return;\r\n        }\r\n        const inputStatus = (this._inputStatus = {});\r\n        const attrs = el.attributes;\r\n        for (let i = 0, n = attrs.length; i < n; i++) {\r\n            const attr = attrs[i];\r\n            if (IGNORE_STORE_ATTRS.indexOf(attr.name) >= 0)\r\n                continue;\r\n            inputStatus[attr.name] = attr.value;\r\n        }\r\n        el.classList.add(\"grid-focus-control--stored-status\");\r\n    }\r\n    setDefaultInputStatus() {\r\n        // \r\n        // this._input.style.font = this._grid.font || '16px sans-serif';\r\n    }\r\n    get input() {\r\n        return this._input;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this._handler.dispose();\r\n    }\r\n}\r\n/**\r\n * Selected area management\r\n */\r\nclass Selection extends EventTarget_1.EventTarget {\r\n    constructor(grid) {\r\n        super();\r\n        this._grid = grid;\r\n        this._sel = { col: 0, row: 0 };\r\n        this._focus = { col: 0, row: 0 };\r\n        this._start = { col: 0, row: 0 };\r\n        this._end = { col: 0, row: 0 };\r\n    }\r\n    get range() {\r\n        const start = this._start;\r\n        const end = this._end;\r\n        const startCol = Math.min(start.col, end.col);\r\n        const startRow = Math.min(start.row, end.row);\r\n        const endCol = Math.max(start.col, end.col);\r\n        const endRow = Math.max(start.row, end.row);\r\n        return {\r\n            start: {\r\n                col: startCol,\r\n                row: startRow,\r\n            },\r\n            end: {\r\n                col: endCol,\r\n                row: endRow,\r\n            },\r\n        };\r\n    }\r\n    set range(range) {\r\n        this._callBeforeHooks();\r\n        const startCol = Math.min(range.start.col, range.end.col);\r\n        const startRow = Math.min(range.start.row, range.end.row);\r\n        const endCol = Math.max(range.start.col, range.end.col);\r\n        const endRow = Math.max(range.start.row, range.end.row);\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._focus = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._start = {\r\n                col: startCol,\r\n                row: startRow,\r\n            };\r\n            this._end = {\r\n                col: endCol,\r\n                row: endRow,\r\n            };\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    get focus() {\r\n        const { col, row } = this._focus;\r\n        return { col, row };\r\n    }\r\n    get select() {\r\n        const { col, row } = this._sel;\r\n        return { col, row };\r\n    }\r\n    set select(cell) {\r\n        this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            const { col = 0, row = 0 } = cell;\r\n            this._setSelectCell(col, row);\r\n            this._setFocusCell(col, row, true, true);\r\n            _updatedSelection.call(this._grid);\r\n        });\r\n    }\r\n    _setSelectCell(col, row) {\r\n        this._wrapFireSelectedEvent(() => {\r\n            this._sel = { col, row };\r\n            this._start = { col, row };\r\n        });\r\n    }\r\n    _setFocusCell(col, row, keepSelect, ignoreBeforeHook) {\r\n        if (!ignoreBeforeHook)\r\n            this._callBeforeHooks();\r\n        this._wrapFireSelectedEvent(() => {\r\n            if (!keepSelect) {\r\n                this._setSelectCell(col, row);\r\n            }\r\n            this._focus = { col, row };\r\n            this._end = { col, row };\r\n        });\r\n    }\r\n    _wrapFireSelectedEvent(callback) {\r\n        if (this._isWrapped) {\r\n            callback();\r\n        }\r\n        else {\r\n            this._isWrapped = true;\r\n            try {\r\n                const before = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: false,\r\n                    after: null,\r\n                };\r\n                callback();\r\n                const after = {\r\n                    col: this._sel.col,\r\n                    row: this._sel.row,\r\n                    selected: true,\r\n                    before: {\r\n                        col: before.col,\r\n                        row: before.row,\r\n                    },\r\n                };\r\n                before.after = {\r\n                    col: after.col,\r\n                    row: after.row,\r\n                };\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\r\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\r\n            }\r\n            finally {\r\n                this._isWrapped = false;\r\n            }\r\n        }\r\n    }\r\n    _updateGridRange() {\r\n        const { rowCount, colCount } = this._grid;\r\n        const points = [this._sel, this._focus, this._start, this._end];\r\n        let needChange = false;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\r\n                needChange = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!needChange) {\r\n            return false;\r\n        }\r\n        this._wrapFireSelectedEvent(() => {\r\n            points.forEach((p) => {\r\n                p.col = Math.min(colCount - 1, p.col);\r\n                p.row = Math.min(rowCount - 1, p.row);\r\n            });\r\n        });\r\n        return true;\r\n    }\r\n    _callBeforeHooks() {\r\n        this.fireListeners(\"before_hook\");\r\n    }\r\n}\r\n/**\r\n * This class manages the drawing process for each layer\r\n */\r\n/** @private */\r\nclass DrawLayers {\r\n    constructor() {\r\n        this._layers = {};\r\n    }\r\n    addDraw(level, fn) {\r\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n        l.addDraw(fn);\r\n    }\r\n    draw(ctx) {\r\n        const list = [];\r\n        for (const k in this._layers) {\r\n            list.push(this._layers[k]);\r\n        }\r\n        list.sort((a, b) => a.level - b.level);\r\n        list.forEach((l) => l.draw(ctx));\r\n    }\r\n}\r\n/** @private */\r\nclass DrawLayer {\r\n    constructor(level) {\r\n        this._level = level;\r\n        this._list = [];\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    addDraw(fn) {\r\n        this._list.push(fn);\r\n    }\r\n    draw(ctx) {\r\n        this._list.forEach((fn) => {\r\n            ctx.save();\r\n            try {\r\n                fn(ctx);\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Context of cell drawing\r\n * @private\r\n */\r\nclass DrawCellContext {\r\n    //  private _grid: any;\r\n    //  private _onTerminate: any;\r\n    /**\r\n     * constructor\r\n     * @param {number} col index of column\r\n     * @param {number} row index of row\r\n     * @param {CanvasRenderingContext2D} ctx context\r\n     * @param {Rect} rect rect of cell area\r\n     * @param {Rect} drawRect rect of drawing area\r\n     * @param {boolean} drawing `true` if drawing is in progress\r\n     * @param {object} selection the selection\r\n     * @param {Array} drawLayers array of draw layers\r\n     * @private\r\n     */\r\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n        this._rectFilter = null;\r\n        this._col = col;\r\n        this._row = row;\r\n        this._mode = 0;\r\n        this._ctx = ctx;\r\n        this._rect = rect;\r\n        this._drawRect = drawRect;\r\n        this._drawing = drawing;\r\n        this._selection = selection;\r\n        this._drawLayers = drawLayers;\r\n        this._childContexts = [];\r\n    }\r\n    get drawing() {\r\n        if (this._mode === 0) {\r\n            return this._drawing;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    get row() {\r\n        return this._row;\r\n    }\r\n    get col() {\r\n        return this._col;\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n        this._childContexts.forEach((ctx) => {\r\n            ctx.cancel();\r\n        });\r\n    }\r\n    /**\r\n     * select status.\r\n     * @return {object} select status\r\n     */\r\n    getSelection() {\r\n        return {\r\n            select: this._selection.select,\r\n            range: this._selection.range,\r\n        };\r\n    }\r\n    /**\r\n     * Canvas context.\r\n     * @return {CanvasRenderingContext2D} Canvas context.\r\n     */\r\n    getContext() {\r\n        if (this._mode === 0) {\r\n            return this._ctx;\r\n        }\r\n        else {\r\n            return _getInitContext.call(this._grid);\r\n        }\r\n    }\r\n    /**\r\n     * Rectangle of cell.\r\n     * @return {Rect} rect Rectangle of cell.\r\n     */\r\n    getRect() {\r\n        const rectFilter = this._rectFilter;\r\n        return rectFilter\r\n            ? rectFilter(this._getRectInternal())\r\n            : this._getRectInternal();\r\n    }\r\n    setRectFilter(rectFilter) {\r\n        this._rectFilter = rectFilter;\r\n    }\r\n    /**\r\n     * Rectangle of Drawing range.\r\n     * @return {Rect} Rectangle of Drawing range.\r\n     */\r\n    getDrawRect() {\r\n        if (this._cancel) {\r\n            return null;\r\n        }\r\n        if (this._mode === 0) {\r\n            return this._drawRect;\r\n        }\r\n        else {\r\n            if (this._isOutOfRange()) {\r\n                return null;\r\n            }\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            return this._toRelativeDrawRect(absoluteRect);\r\n        }\r\n    }\r\n    _isOutOfRange() {\r\n        const { colCount, rowCount } = this._grid;\r\n        return colCount <= this._col || rowCount <= this._row;\r\n    }\r\n    /**\r\n     * get Context of current state\r\n     * @return {DrawCellContext} current DrawCellContext.\r\n     */\r\n    toCurrentContext() {\r\n        if (this._mode === 0) {\r\n            return this;\r\n        }\r\n        else {\r\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n            const rect = _toRelativeRect(this._grid, absoluteRect);\r\n            const drawRect = this._isOutOfRange()\r\n                ? null\r\n                : this._toRelativeDrawRect(absoluteRect);\r\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\r\n            // toCurrentContext  toCurrentContext\r\n            context.toCurrentContext = this.toCurrentContext.bind(this);\r\n            this._childContexts.push(context);\r\n            if (this._cancel) {\r\n                context.cancel();\r\n            }\r\n            context._rectFilter = this._rectFilter;\r\n            return context;\r\n        }\r\n    }\r\n    addLayerDraw(level, fn) {\r\n        this._drawLayers.addDraw(level, fn);\r\n    }\r\n    _toRelativeDrawRect(absoluteRect) {\r\n        const visibleRect = _getVisibleRect(this._grid);\r\n        let rect = absoluteRect.copy();\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        const grid = this._grid;\r\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\r\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\r\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\r\n        }\r\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\r\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\r\n        }\r\n        if (!rect.intersection(visibleRect)) {\r\n            return null;\r\n        }\r\n        rect.offsetLeft(-visibleRect.left);\r\n        rect.offsetTop(-visibleRect.top);\r\n        return rect;\r\n    }\r\n    _delayMode(grid, onTerminate) {\r\n        this._mode = 1;\r\n        this._ctx = null;\r\n        this._rect = null;\r\n        this._drawRect = null;\r\n        this._grid = grid;\r\n        this._onTerminate = onTerminate;\r\n    }\r\n    /**\r\n     * terminate\r\n     * @return {void}\r\n     */\r\n    terminate() {\r\n        var _a;\r\n        if (this._mode !== 0) {\r\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n    }\r\n    _getRectInternal() {\r\n        if (this._mode === 0) {\r\n            return this._rect;\r\n        }\r\n        else {\r\n            if (this._rect) {\r\n                return this._rect;\r\n            }\r\n            return this._grid.getCellRelativeRect(this._col, this._row);\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nconst protectedKey = _;\r\n/**\r\n * DrawGrid\r\n * @classdesc cheetahGrid.core.DrawGrid\r\n * @memberof cheetahGrid.core\r\n */\r\nclass DrawGrid extends EventTarget_1.EventTarget {\r\n    static get EVENT_TYPE() {\r\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\r\n    }\r\n    constructor(options = {}) {\r\n        super();\r\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, trimOnPaste, } = options;\r\n        const protectedSpace = (this[_] = {});\r\n        style.initDocument();\r\n        protectedSpace.element = createRootElement();\r\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\r\n        protectedSpace.handler = new EventHandler_1.EventHandler();\r\n        protectedSpace.selection = new Selection(this);\r\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable, protectedSpace.selection);\r\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\r\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\r\n            alpha: false,\r\n        });\r\n        protectedSpace.rowCount = rowCount;\r\n        protectedSpace.colCount = colCount;\r\n        protectedSpace.frozenColCount = frozenColCount;\r\n        protectedSpace.frozenRowCount = frozenRowCount;\r\n        protectedSpace.defaultRowHeight = defaultRowHeight;\r\n        protectedSpace.defaultColWidth = defaultColWidth;\r\n        protectedSpace.font = font;\r\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\r\n        protectedSpace.keyboardOptions = keyboardOptions;\r\n        protectedSpace.disableColumnResize = disableColumnResize;\r\n        protectedSpace.trimOnPaste = trimOnPaste !== null && trimOnPaste !== void 0 ? trimOnPaste : false;\r\n        /////\r\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\r\n        protectedSpace.colWidthsLimit = {};\r\n        protectedSpace.calcWidthContext = {\r\n            _: protectedSpace,\r\n            get full() {\r\n                return this._.canvas.width;\r\n            },\r\n            get em() {\r\n                return (0, canvases_1.getFontSize)(this._.context, this._.font).width;\r\n            },\r\n        };\r\n        protectedSpace.columnResizer = new ColumnResizer(this);\r\n        protectedSpace.cellSelector = new CellSelector(this);\r\n        protectedSpace.drawCells = {};\r\n        protectedSpace.cellTextOverflows = {};\r\n        protectedSpace.focusedGrid = false;\r\n        protectedSpace.element.appendChild(protectedSpace.canvas);\r\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\r\n        protectedSpace.scroll = {\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        this.updateScroll();\r\n        if (parentElement) {\r\n            parentElement.appendChild(protectedSpace.element);\r\n            this.updateSize();\r\n        }\r\n        else {\r\n            this.updateSize();\r\n        }\r\n        _bindEvents.call(this);\r\n        this.bindEventsInternal();\r\n    }\r\n    /**\r\n     * Get root element.\r\n     * @returns {HTMLElement} root element\r\n     */\r\n    getElement() {\r\n        return this[_].element;\r\n    }\r\n    /**\r\n     * Get canvas element.\r\n     */\r\n    get canvas() {\r\n        return this[_].canvas;\r\n    }\r\n    /**\r\n     * Focus the grid.\r\n     * @return {void}\r\n     */\r\n    focus() {\r\n        const { col, row } = this[_].selection.select;\r\n        this.focusCell(col, row);\r\n    }\r\n    hasFocusGrid() {\r\n        return this[_].focusedGrid;\r\n    }\r\n    /**\r\n     * Get the selection instance.\r\n     */\r\n    get selection() {\r\n        return this[_].selection;\r\n    }\r\n    /**\r\n     * Get the number of rows.\r\n     */\r\n    get rowCount() {\r\n        return this[_].rowCount;\r\n    }\r\n    /**\r\n     * Set the number of rows.\r\n     */\r\n    set rowCount(rowCount) {\r\n        this[_].rowCount = rowCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of columns.\r\n     */\r\n    get colCount() {\r\n        return this[_].colCount;\r\n    }\r\n    /**\r\n     * Set the number of columns.\r\n     */\r\n    set colCount(colCount) {\r\n        this[_].colCount = colCount;\r\n        this.updateScroll();\r\n        if (this[_].selection._updateGridRange()) {\r\n            const { col, row } = this[_].selection.focus;\r\n            this.makeVisibleCell(col, row);\r\n            this.setFocusCursor(col, row);\r\n        }\r\n    }\r\n    /**\r\n     * Get the number of frozen columns.\r\n     */\r\n    get frozenColCount() {\r\n        return this[_].frozenColCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen columns.\r\n     */\r\n    set frozenColCount(frozenColCount) {\r\n        this[_].frozenColCount = frozenColCount;\r\n    }\r\n    /**\r\n     * Get the number of frozen rows.\r\n     */\r\n    get frozenRowCount() {\r\n        return this[_].frozenRowCount;\r\n    }\r\n    /**\r\n     * Set the number of frozen rows.\r\n     */\r\n    set frozenRowCount(frozenRowCount) {\r\n        this[_].frozenRowCount = frozenRowCount;\r\n    }\r\n    /**\r\n     * Get the default row height.\r\n     *\r\n     */\r\n    get defaultRowHeight() {\r\n        return this[_].defaultRowHeight;\r\n    }\r\n    /**\r\n     * Set the default row height.\r\n     */\r\n    set defaultRowHeight(defaultRowHeight) {\r\n        this[_].defaultRowHeight = defaultRowHeight;\r\n    }\r\n    /**\r\n     * Get the default column width.\r\n     */\r\n    get defaultColWidth() {\r\n        return this[_].defaultColWidth;\r\n    }\r\n    /**\r\n     * Set the default column width.\r\n     */\r\n    set defaultColWidth(defaultColWidth) {\r\n        this[_].defaultColWidth = defaultColWidth;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     */\r\n    get font() {\r\n        return this[_].font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     */\r\n    set font(font) {\r\n        this[_].font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return this[_].underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * If set to true, trim the pasted text on pasting.\r\n     */\r\n    get trimOnPaste() {\r\n        return this[_].trimOnPaste;\r\n    }\r\n    set trimOnPaste(trimOnPaste) {\r\n        this[_].trimOnPaste = trimOnPaste;\r\n    }\r\n    get keyboardOptions() {\r\n        var _a;\r\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    set keyboardOptions(keyboardOptions) {\r\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    configure(name, value) {\r\n        const cfg = this[_].config || (this[_].config = {});\r\n        if (value != null) {\r\n            cfg[name] = value;\r\n        }\r\n        return cfg[name];\r\n    }\r\n    /**\r\n     * Apply the changed size.\r\n     * @return {void}\r\n     */\r\n    updateSize() {\r\n        //\r\n        const { canvas } = this[_];\r\n        canvas.style.width = \"\";\r\n        canvas.style.height = \"\";\r\n        const width = Math.floor(canvas.offsetWidth ||\r\n            canvas.parentElement.offsetWidth -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        const height = Math.floor(canvas.offsetHeight ||\r\n            canvas.parentElement.offsetHeight -\r\n                style.getScrollBarSize() /*for legacy*/);\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        //style\r\n        canvas.style.width = `${width}px`;\r\n        canvas.style.height = `${height}px`;\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n    }\r\n    /**\r\n     * Apply the changed scroll size.\r\n     * @return {boolean} `true` if there was a change in the scroll size\r\n     */\r\n    updateScroll() {\r\n        const { scrollable } = this[_];\r\n        const newHeight = _getScrollHeight.call(this);\r\n        const newWidth = _getScrollWidth(this);\r\n        if (newHeight === scrollable.scrollHeight &&\r\n            newWidth === scrollable.scrollWidth) {\r\n            return false;\r\n        }\r\n        scrollable.setScrollSize(newWidth, newHeight);\r\n        this[_].scroll = {\r\n            left: scrollable.scrollLeft,\r\n            top: scrollable.scrollTop,\r\n        };\r\n        const { focus } = this[_].selection;\r\n        this[_].focusControl.setFocusRect(this.getCellRect(focus.col, focus.row));\r\n        return true;\r\n    }\r\n    /**\r\n     * Get the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @return {number} The row height\r\n     */\r\n    getRowHeight(row) {\r\n        return _getRowHeight.call(this, row);\r\n    }\r\n    /**\r\n     * Set the row height of the given the row index.\r\n     * @param  {number} row The row index\r\n     * @param  {number} height The row height\r\n     * @return {void}\r\n     */\r\n    setRowHeight(row, height) {\r\n        _setRowHeight(this, row, height);\r\n    }\r\n    /**\r\n     * Get the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column width\r\n     */\r\n    getColWidth(col) {\r\n        return _getColWidth(this, col);\r\n    }\r\n    /**\r\n     * Set the column width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} width The column width\r\n     * @return {void}\r\n     */\r\n    setColWidth(col, width) {\r\n        _setColWidth(this, col, width);\r\n    }\r\n    /**\r\n     * Get the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column max width\r\n     */\r\n    getMaxColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.max) || undefined;\r\n    }\r\n    /**\r\n     * Set the column max width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} maxwidth The column max width\r\n     * @return {void}\r\n     */\r\n    setMaxColWidth(col, maxwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (maxwidth != null) {\r\n            obj.max = maxwidth;\r\n        }\r\n        else {\r\n            delete obj.max;\r\n        }\r\n    }\r\n    /**\r\n     * Get the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @return {number} The column min width\r\n     */\r\n    getMinColWidth(col) {\r\n        const obj = this[_].colWidthsLimit[col];\r\n        return (obj && obj.min) || undefined;\r\n    }\r\n    /**\r\n     * Set the column min width of the given the column index.\r\n     * @param  {number} col The column index\r\n     * @param  {number} minwidth The column min width\r\n     * @return {void}\r\n     */\r\n    setMinColWidth(col, minwidth) {\r\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n        if (minwidth != null) {\r\n            obj.min = minwidth;\r\n        }\r\n        else {\r\n            delete obj.min;\r\n        }\r\n    }\r\n    /**\r\n     * Get the rect of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRect(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n        const width = _getColWidth(this, col);\r\n        if (isFrozenCell && isFrozenCell.col) {\r\n            absoluteLeft += this[_].scroll.left;\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\r\n        const height = _getRowHeight.call(this, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            absoluteTop += this[_].scroll.top;\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    /**\r\n     * Get the relative rectangle of the cell.\r\n     * @param {number} col index of column, of the cell\r\n     * @param {number} row index of row, of the cell\r\n     * @returns {Rect} the rect of the cell.\r\n     */\r\n    getCellRelativeRect(col, row) {\r\n        return _toRelativeRect(this, this.getCellRect(col, row));\r\n    }\r\n    /**\r\n     * Get the rectangle of the cells area.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @returns {Rect} the rect of the cells.\r\n     */\r\n    getCellsRect(startCol, startRow, endCol, endRow) {\r\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let width = _getColsWidth(this, startCol, endCol);\r\n        if (isFrozenStartCell && isFrozenStartCell.col) {\r\n            const scrollLeft = this[_].scroll.left;\r\n            absoluteLeft += scrollLeft;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n                width -= scrollLeft;\r\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n            }\r\n        }\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let height = _getRowsHeight.call(this, startRow, endRow);\r\n        if (isFrozenStartCell && isFrozenStartCell.row) {\r\n            const scrollTop = this[_].scroll.top;\r\n            absoluteTop += scrollTop;\r\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n                height -= scrollTop;\r\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n            }\r\n        }\r\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\r\n    }\r\n    getCellRangeRect(range) {\r\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    isFrozenCell(col, row) {\r\n        const { frozenRowCount, frozenColCount } = this[_];\r\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\r\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\r\n        if (isFrozenRow || isFrozenCol) {\r\n            return {\r\n                row: isFrozenRow,\r\n                col: isFrozenCol,\r\n            };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getRowAt(absoluteY) {\r\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n        if (frozen) {\r\n            return frozen.row;\r\n        }\r\n        const row = _getTargetRowAt.call(this, absoluteY);\r\n        return row ? row.row : -1;\r\n    }\r\n    getColAt(absoluteX) {\r\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\r\n        if (frozen) {\r\n            return frozen.col;\r\n        }\r\n        const col = _getTargetColAt(this, absoluteX);\r\n        return col ? col.col : -1;\r\n    }\r\n    getCellAt(absoluteX, absoluteY) {\r\n        return {\r\n            row: this.getRowAt(absoluteY),\r\n            col: this.getColAt(absoluteX),\r\n        };\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    makeVisibleCell(col, row) {\r\n        const isFrozenCell = this.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n            return;\r\n        }\r\n        const rect = this.getCellRect(col, row);\r\n        const visibleRect = _getScrollableVisibleRect(this);\r\n        if (visibleRect.contains(rect)) {\r\n            return;\r\n        }\r\n        const { scrollable } = this[_];\r\n        if (!isFrozenCell || !isFrozenCell.col) {\r\n            if (rect.left < visibleRect.left) {\r\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n            }\r\n            else if (visibleRect.right < rect.right) {\r\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n            }\r\n        }\r\n        if (!isFrozenCell || !isFrozenCell.row) {\r\n            if (rect.top < visibleRect.top) {\r\n                scrollable.scrollTop -= visibleRect.top - rect.top;\r\n            }\r\n            else if (visibleRect.bottom < rect.bottom) {\r\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Moves the focus cursor to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    setFocusCursor(col, row) {\r\n        const { focusControl } = this[_];\r\n        const oldEditMode = focusControl.editMode;\r\n        focusControl.setFocusRect(this.getCellRect(col, row));\r\n        _updatedSelection.call(this);\r\n        if (oldEditMode && !focusControl.editMode) {\r\n            focusControl.resetInputStatus();\r\n        }\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {void}\r\n     */\r\n    focusCell(col, row) {\r\n        this.setFocusCursor(col, row);\r\n        // Failure occurs in IE if focus is not last\r\n        this[_].focusControl.focus();\r\n    }\r\n    /**\r\n     * Redraws the range of the given cell.\r\n     * @param  {number} col The column index of cell.\r\n     * @param  {number} row The row index of cell.\r\n     * @return {void}\r\n     */\r\n    invalidateCell(col, row) {\r\n        this.invalidateGridRect(col, row);\r\n    }\r\n    /**\r\n     * Redraws the range of the given cells.\r\n     * @param {number} startCol index of the starting column, of the cell\r\n     * @param {number} startRow index of the starting row, of the cell\r\n     * @param {number} endCol index of the ending column, of the cell\r\n     * @param {number} endRow index of the ending row, of the cell\r\n     * @return {void}\r\n     */\r\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n        const offset = this.getOffsetInvalidateCells();\r\n        if (offset > 0) {\r\n            startCol -= offset;\r\n            startRow -= offset;\r\n            endCol += offset;\r\n            endRow += offset;\r\n        }\r\n        const visibleRect = _getVisibleRect(this);\r\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n        const invalidateTarget = visibleRect.intersection(cellsRect);\r\n        if (invalidateTarget) {\r\n            const { frozenColCount, frozenRowCount } = this[_];\r\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\r\n                const frozenRect = _getFrozenColsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\r\n                }\r\n            }\r\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\r\n                const frozenRect = _getFrozenRowsRect(this);\r\n                if (frozenRect.intersection(invalidateTarget)) {\r\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n                }\r\n            }\r\n            _invalidateRect(this, invalidateTarget);\r\n        }\r\n    }\r\n    invalidateCellRange(range) {\r\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\r\n    }\r\n    /**\r\n     * Redraws the whole grid.\r\n     * @return {void}\r\n     */\r\n    invalidate() {\r\n        const visibleRect = _getVisibleRect(this);\r\n        _invalidateRect(this, visibleRect);\r\n    }\r\n    /**\r\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleRowCount() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\r\n        let count = 0;\r\n        const { rowCount } = this;\r\n        for (let row = startRow; row < rowCount; row++) {\r\n            const height = _getRowHeight.call(this, row);\r\n            const bottom = absoluteTop + height;\r\n            if (visibleRect.bottom < bottom) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteTop = bottom;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\r\n     * @returns {number}\r\n     */\r\n    get visibleColCount() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n        let count = 0;\r\n        const { colCount } = this;\r\n        for (let col = startCol; col < colCount; col++) {\r\n            const width = _getColWidth(this, col);\r\n            const right = absoluteLeft + width;\r\n            if (visibleRect.right < right) {\r\n                break;\r\n            }\r\n            count++;\r\n            absoluteLeft = right;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * Get the index of the first row in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get topRow() {\r\n        const { frozenRowCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleTop = frozenRowCount > 0\r\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\r\n            : visibleRect.top;\r\n        const initRow = _getTargetRowAt.call(this, visibleTop);\r\n        if (!initRow) {\r\n            return 0;\r\n        }\r\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\r\n    }\r\n    /**\r\n     * Get the index of the first column in the scrollable region that is visible.\r\n     * @returns {number}\r\n     */\r\n    get leftCol() {\r\n        const { frozenColCount } = this;\r\n        const visibleRect = _getVisibleRect(this);\r\n        const visibleLeft = frozenColCount > 0\r\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\r\n            : visibleRect.left;\r\n        const initCol = _getTargetColAt(this, visibleLeft);\r\n        if (!initCol) {\r\n            return 0;\r\n        }\r\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled vertically\r\n     */\r\n    get scrollTop() {\r\n        return this[_].scrollable.scrollTop;\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this[_].scrollable.scrollTop = scrollTop;\r\n    }\r\n    /**\r\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\r\n     */\r\n    get scrollLeft() {\r\n        return this[_].scrollable.scrollLeft;\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this[_].scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    /**\r\n     * Get the value of cell with the copy action.\r\n     * <p>\r\n     * Please implement\r\n     * </p>\r\n     *\r\n     * @protected\r\n     * @param col Column index of cell.\r\n     * @param row Row index of cell.\r\n     * @param range Copy range.\r\n     * @return {string} the value of cell\r\n     */\r\n    getCopyCellValue(_col, _row, _range) {\r\n        //Please implement get cell value!!\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Get the overflowed text in the cell rectangle, from the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @return {string | null} The text overflowing the cell rect.\r\n     */\r\n    getCellOverflowText(col, row) {\r\n        const key = `${col}:${row}`;\r\n        return this[_].cellTextOverflows[key] || null;\r\n    }\r\n    /**\r\n     * Set the overflowed text in the cell rectangle, to the given cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index\r\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\r\n     * @return {void}\r\n     */\r\n    setCellOverflowText(col, row, overflowText) {\r\n        const key = `${col}:${row}`;\r\n        if (overflowText) {\r\n            this[_].cellTextOverflows[key] =\r\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\r\n        }\r\n        else {\r\n            delete this[_].cellTextOverflows[key];\r\n        }\r\n    }\r\n    addDisposable(disposable) {\r\n        if (!disposable ||\r\n            !disposable.dispose ||\r\n            typeof disposable.dispose !== \"function\") {\r\n            throw new Error(\"not disposable!\");\r\n        }\r\n        const disposables = (this[_].disposables = this[_].disposables || []);\r\n        disposables.push(disposable);\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        super.dispose();\r\n        const protectedSpace = this[_];\r\n        protectedSpace.handler.dispose();\r\n        protectedSpace.scrollable.dispose();\r\n        protectedSpace.focusControl.dispose();\r\n        protectedSpace.columnResizer.dispose();\r\n        protectedSpace.cellSelector.dispose();\r\n        if (protectedSpace.disposables) {\r\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\r\n            protectedSpace.disposables = null;\r\n        }\r\n        const { parentElement } = protectedSpace.element;\r\n        if (parentElement) {\r\n            parentElement.removeChild(protectedSpace.element);\r\n        }\r\n    }\r\n    getAttachCellsArea(range) {\r\n        return {\r\n            element: this.getElement(),\r\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\r\n        };\r\n    }\r\n    onKeyDownMove(evt) {\r\n        _onKeyDownMove.call(this, evt);\r\n    }\r\n    bindEventsInternal() {\r\n        //nop\r\n    }\r\n    getTargetRowAtInternal(_absoluteY) {\r\n        // \r\n    }\r\n    getRowsHeightInternal(_startRow, _endRow) {\r\n        // \r\n    }\r\n    getRowHeightInternal(_row) {\r\n        // \r\n    }\r\n    getScrollHeightInternal(_row) {\r\n        // \r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col }) {\r\n        return col - 1;\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col }) {\r\n        return col + 1;\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ row }) {\r\n        return row - 1;\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ row }) {\r\n        return row + 1;\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 0;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        return range;\r\n    }\r\n    _getInitContext() {\r\n        const ctx = this[_].context;\r\n        //\r\n        ctx.fillStyle = \"white\";\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.textAlign = \"left\";\r\n        ctx.textBaseline = \"top\";\r\n        ctx.lineWidth = 1;\r\n        ctx.font = this.font || \"16px sans-serif\";\r\n        return ctx;\r\n    }\r\n    fireListeners(type, ...event) {\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.DrawGrid = DrawGrid;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getScrollBarSize = exports.initDocument = void 0;\r\nfunction getScrollBarWidth() {\r\n    const wrapper = document.createElement(\"div\");\r\n    const inner = document.createElement(\"div\");\r\n    const { style: wrapperStyle } = wrapper;\r\n    wrapperStyle.position = \"fixed\";\r\n    wrapperStyle.height = \"50px\";\r\n    wrapperStyle.width = \"50px\";\r\n    wrapperStyle.overflow = \"scroll\";\r\n    wrapperStyle.opacity = \"0\";\r\n    wrapperStyle.pointerEvents = \"none\";\r\n    const { style } = inner;\r\n    style.height = \"100%\";\r\n    style.width = \"100%\";\r\n    inner.textContent = \"x\";\r\n    wrapper.appendChild(inner);\r\n    document.body.appendChild(wrapper);\r\n    const wrapperWidth = wrapper.getBoundingClientRect().width;\r\n    const innerWidth = inner.getBoundingClientRect().width;\r\n    document.body.removeChild(wrapper);\r\n    return Math.ceil(wrapperWidth - innerWidth);\r\n}\r\nlet SCROLLBAR_SIZE;\r\nfunction initDocumentInternal() {\r\n    require(\"@/internal/style.css\");\r\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n    const style = document.createElement(\"style\");\r\n    style.setAttribute(\"type\", \"text/css\");\r\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\r\n    style.innerHTML = `\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n    document.head.appendChild(style);\r\n}\r\nlet initDocumentVar = initDocumentInternal;\r\nfunction initDocument() {\r\n    initDocumentVar();\r\n    initDocumentVar = Function.prototype;\r\n}\r\nexports.initDocument = initDocument;\r\nfunction getScrollBarSize() {\r\n    return SCROLLBAR_SIZE;\r\n}\r\nexports.getScrollBarSize = getScrollBarSize;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = exports.CachedDataSource = exports.DataSource = void 0;\r\nconst DataSource_1 = require(\"./data/DataSource\");\r\nObject.defineProperty(exports, \"DataSource\", { enumerable: true, get: function () { return DataSource_1.DataSource; } });\r\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\r\nObject.defineProperty(exports, \"CachedDataSource\", { enumerable: true, get: function () { return CachedDataSource_1.CachedDataSource; } });\r\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\r\nObject.defineProperty(exports, \"FilterDataSource\", { enumerable: true, get: function () { return FilterDataSource_1.FilterDataSource; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.sortPromise = exports.sort = exports.sortArray = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nfunction createArray(get, length) {\r\n    const array = new Array(length);\r\n    for (let i = 0; i < length; i++) {\r\n        array[i] = get(i);\r\n    }\r\n    return array;\r\n}\r\nfunction createArrayPromise(get, getField, length\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n) {\r\n    return new Promise((resolve) => {\r\n        const plist = [];\r\n        const array = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            const data = get(i);\r\n            const record = {\r\n                v: data,\r\n                f: data,\r\n            };\r\n            array[i] = record;\r\n            if ((0, utils_1.isPromise)(data)) {\r\n                plist.push(data.then((v) => {\r\n                    record.v = v;\r\n                    record.f = v;\r\n                }));\r\n            }\r\n        }\r\n        Promise.all(plist)\r\n            .then(() => getField == null\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                array\r\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                setArrayField(array, getField))\r\n            .then(resolve);\r\n    });\r\n}\r\nfunction setArrayField(array, getField) {\r\n    return new Promise((resolve) => {\r\n        const { length } = array;\r\n        const plist = [];\r\n        for (let i = 0; i < length; i++) {\r\n            const record = array[i];\r\n            const f = getField(record.v);\r\n            if ((0, utils_1.isPromise)(f)) {\r\n                plist.push(f.then((v) => {\r\n                    record.f = v;\r\n                }));\r\n            }\r\n            else {\r\n                record.f = f;\r\n            }\r\n        }\r\n        Promise.all(plist).then(() => resolve(array));\r\n    });\r\n}\r\nfunction sortArray(array, compare) {\r\n    Array.prototype.sort.call(array, compare);\r\n}\r\nexports.sortArray = sortArray;\r\nfunction sort(get, set, length, compare, getField) {\r\n    const old = createArray(get, length);\r\n    if (getField != null) {\r\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n    }\r\n    else {\r\n        old.sort(compare);\r\n    }\r\n    for (let i = 0; i < length; i++) {\r\n        set(i, old[i]);\r\n    }\r\n}\r\nexports.sort = sort;\r\nfunction sortPromise(get, set, length, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ncompare, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngetField) {\r\n    if (typeof Promise !== \"undefined\") {\r\n        return createArrayPromise(get, getField, length).then((array) => {\r\n            array.sort((r1, r2) => compare(r1.f, r2.f));\r\n            for (let i = 0; i < length; i++) {\r\n                set(i, array[i].v);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        sort(get, set, length, compare, getField);\r\n        const dummyPromise = {\r\n            then(fn) {\r\n                fn();\r\n                return dummyPromise;\r\n            },\r\n            catch() {\r\n                return dummyPromise;\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        };\r\n        return dummyPromise;\r\n    }\r\n}\r\nexports.sortPromise = sortPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.bindCellKeyAction = exports.bindCellClickAction = void 0;\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst KEY_ENTER = 13;\r\nconst KEY_SPACE = 32;\r\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    let inMouse;\r\n    return [\r\n        // click\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: e.col,\r\n                row: e.row,\r\n            });\r\n        }),\r\n        // mouse move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOver) {\r\n                if (!mouseOver({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                })) {\r\n                    return;\r\n                }\r\n            }\r\n            grid.getElement().style.cursor = \"pointer\";\r\n            inMouse = true;\r\n        }),\r\n        //MOUSEENTER'col-resize'move\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (inMouse && !grid.getElement().style.cursor) {\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }\r\n        }),\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (!isTarget(e.col, e.row)) {\r\n                return;\r\n            }\r\n            if (mouseOut) {\r\n                mouseOut({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }\r\n            grid.getElement().style.cursor = \"\";\r\n            inMouse = false;\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellClickAction = bindCellClickAction;\r\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\r\n    function isTarget(col, row) {\r\n        return grid.getLayoutCellId(col, row) === cellId;\r\n    }\r\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\r\n    return [\r\n        // enter key down\r\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n            var _a;\r\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\r\n                return;\r\n            }\r\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\r\n                // When moving with the enter key, no action is taken with the enter key.\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (!isTarget(sel.col, sel.row)) {\r\n                return;\r\n            }\r\n            action({\r\n                col: sel.col,\r\n                row: sel.row,\r\n            });\r\n            utils_1.event.cancel(e.event);\r\n        }),\r\n    ];\r\n}\r\nexports.bindCellKeyAction = bindCellKeyAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderStyle = void 0;\r\nconst StdTextBaseStyle_1 = require(\"./StdTextBaseStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nlet defaultStyle;\r\nclass CheckHeaderStyle extends StdTextBaseStyle_1.StdTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new CheckHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super((0, utils_1.defaults)(style, { textAlign: \"center\" }));\r\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this._checkBgColor = checkBgColor;\r\n        this._borderColor = borderColor;\r\n    }\r\n    get uncheckBgColor() {\r\n        return this._uncheckBgColor;\r\n    }\r\n    set uncheckBgColor(uncheckBgColor) {\r\n        this._uncheckBgColor = uncheckBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get checkBgColor() {\r\n        return this._checkBgColor;\r\n    }\r\n    set checkBgColor(checkBgColor) {\r\n        this._checkBgColor = checkBgColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get borderColor() {\r\n        return this._borderColor;\r\n    }\r\n    set borderColor(borderColor) {\r\n        this._borderColor = borderColor;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new CheckHeaderStyle(this);\r\n    }\r\n}\r\nexports.CheckHeaderStyle = CheckHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdTextBaseStyle = void 0;\r\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\r\nlet defaultStyle;\r\nclass StdTextBaseStyle extends StdBaseStyle_1.StdBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new StdTextBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._color = style.color;\r\n        this._font = style.font;\r\n        this._padding = style.padding;\r\n        this._textOverflow = style.textOverflow || \"ellipsis\";\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color) {\r\n        this._color = color;\r\n        this.doChangeStyle();\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n        this.doChangeStyle();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(padding) {\r\n        this._padding = padding;\r\n        this.doChangeStyle();\r\n    }\r\n    get textOverflow() {\r\n        return this._textOverflow;\r\n    }\r\n    set textOverflow(textOverflow) {\r\n        this._textOverflow = textOverflow;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdTextBaseStyle(this);\r\n    }\r\n}\r\nexports.StdTextBaseStyle = StdTextBaseStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass MultilineTextHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new MultilineTextHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeaderStyle(this);\r\n    }\r\n}\r\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderStyle = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass SortHeaderStyle extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._sortArrowColor = style.sortArrowColor;\r\n        this._multiline = style.multiline;\r\n    }\r\n    get sortArrowColor() {\r\n        return this._sortArrowColor;\r\n    }\r\n    set sortArrowColor(sortArrowColor) {\r\n        this._sortArrowColor = sortArrowColor;\r\n        this.doChangeStyle();\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new SortHeaderStyle(this);\r\n    }\r\n}\r\nexports.SortHeaderStyle = SortHeaderStyle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Style = void 0;\r\nconst StdMultilineTextBaseStyle_1 = require(\"./StdMultilineTextBaseStyle\");\r\nlet defaultStyle;\r\nclass Style extends StdMultilineTextBaseStyle_1.StdMultilineTextBaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._multiline = style.multiline;\r\n    }\r\n    get multiline() {\r\n        return !!this._multiline;\r\n    }\r\n    set multiline(multiline) {\r\n        this._multiline = multiline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new Style(this);\r\n    }\r\n}\r\nexports.Style = Style;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.buildInlines = exports.of = exports.iconOf = void 0;\r\nconst icons = __importStar(require(\"../icons\"));\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\r\nconst InlineIcon_1 = require(\"./InlineIcon\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\r\nconst InlineSvg_1 = require(\"./InlineSvg\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, drawWidth, drawHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nfunction isIconConstructorOption(icon) {\r\n    if (icon.font && icon.content) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineImageConstructorOption(icon) {\r\n    if (icon.src) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isInlineSvgConstructorOption(icon) {\r\n    if (icon.path) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction iconOf(icon) {\r\n    if (icon instanceof Inline_1.Inline) {\r\n        return icon;\r\n    }\r\n    if (!icon) {\r\n        return null;\r\n    }\r\n    if (isIconConstructorOption(icon)) {\r\n        return new InlineIcon_1.InlineIcon(icon);\r\n    }\r\n    if (isInlineImageConstructorOption(icon)) {\r\n        return new InlineImage_1.InlineImage({\r\n            src: icon.src,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            offsetTop: icon.offsetTop,\r\n            offsetLeft: icon.offsetLeft,\r\n        });\r\n    }\r\n    if (icon.svg) {\r\n        return new InlineSvg_1.InlineSvg({\r\n            svg: icon.svg,\r\n            width: icon.width,\r\n            height: icon.width,\r\n        });\r\n    }\r\n    if (isInlineSvgConstructorOption(icon)) {\r\n        return new InlinePath2D_1.InlinePath2D({\r\n            path: icon.path,\r\n            width: icon.width,\r\n            height: icon.width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    const registeredIcons = icons.get();\r\n    if (icon.name && registeredIcons[icon.name]) {\r\n        const registeredIcon = registeredIcons[icon.name];\r\n        const width = icon.width || Math.max(registeredIcon.width, registeredIcon.height);\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n                drawRegisteredIcon(ctx, registeredIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft,\r\n                        right: offsetRight,\r\n                        top: offsetTop,\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            },\r\n            width,\r\n            height: width,\r\n            color: icon.color,\r\n        });\r\n    }\r\n    return new InlineIcon_1.InlineIcon(icon);\r\n}\r\nexports.iconOf = iconOf;\r\nfunction of(content) {\r\n    if (content == null) {\r\n        return null;\r\n    }\r\n    if (content instanceof Inline_1.Inline) {\r\n        return content;\r\n    }\r\n    return new Inline_1.Inline(content);\r\n}\r\nexports.of = of;\r\nfunction buildInlines(icons, inline) {\r\n    const result = [];\r\n    if (icons) {\r\n        result.push(...icons\r\n            .map((icon) => iconOf(icon))\r\n            .filter((i) => i != null));\r\n    }\r\n    if (Array.isArray(inline)\r\n    // && inline.filter(il => il instanceof Inline).length <- ?\r\n    ) {\r\n        result.push(...inline.map((il) => of(il)).filter((i) => i != null));\r\n    }\r\n    else {\r\n        const il = of(inline);\r\n        if (il) {\r\n            result.push(il);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.buildInlines = buildInlines;\r\nfunction string(inline) {\r\n    return buildInlines(undefined, inline).join(\"\");\r\n}\r\nexports.string = string;\r\n","\"use strict\";\r\n/*eslint-disable camelcase*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = void 0;\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst builtins = {\r\n    get arrow_upward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\r\n        return {\r\n            d: \"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get arrow_downward() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\r\n        return {\r\n            d: \"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get edit() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\r\n        return {\r\n            d: \"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get add() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\r\n        return {\r\n            d: \"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\",\r\n            width: 48,\r\n            height: 48,\r\n        };\r\n    },\r\n    get star() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\r\n        return {\r\n            d: \"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_border() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n    get star_half() {\r\n        // return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\r\n        return {\r\n            d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\",\r\n            width: 24,\r\n            height: 24,\r\n        };\r\n    },\r\n};\r\nfunction get() {\r\n    return (0, utils_1.extend)(builtins, icons_1.icons);\r\n}\r\nexports.get = get;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = void 0;\r\nexports.icons = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineDrawer = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineDrawer extends Inline_1.Inline {\r\n    constructor({ draw, width, \r\n    // height,\r\n    color, }) {\r\n        super();\r\n        this._draw = draw;\r\n        this._width = width;\r\n        // this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        this._draw({\r\n            ctx,\r\n            canvashelper,\r\n            rect,\r\n            offset,\r\n            offsetLeft,\r\n            offsetRight,\r\n            offsetTop,\r\n            offsetBottom,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineDrawer = InlineDrawer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.load = exports.check = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst loads = {};\r\nlet load;\r\nexports.load = load;\r\nlet check;\r\nexports.check = check;\r\nif (utils_1.isNode) {\r\n    exports.load = load = function (_font, _testStr, callback) {\r\n        callback();\r\n    };\r\n    exports.check = check = function () {\r\n        return false;\r\n    };\r\n}\r\nelse {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const fontFaceSet = document.fonts;\r\n    const legacy = !fontFaceSet;\r\n    exports.load = load = legacy\r\n        ? function (font, testStr, callback) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                callback();\r\n                return;\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            }, () => {\r\n                loads[`${font} @ ${testStr}`] = true;\r\n                callback();\r\n            });\r\n        }\r\n        : function (font, _testStr, callback) {\r\n            if (loads.all || loads[font]) {\r\n                callback();\r\n                return;\r\n            }\r\n            fontFaceSet.ready.then(() => {\r\n                loads.all = true;\r\n            });\r\n            fontFaceSet.load(font).then(() => {\r\n                loads[font] = true;\r\n                callback();\r\n            });\r\n        };\r\n    exports.check = check = legacy\r\n        ? function (font, testStr) {\r\n            //for legacy(IE)\r\n            if (loads[`${font} @ ${testStr}`]) {\r\n                return true;\r\n            }\r\n            load(font, testStr, () => { });\r\n            return false;\r\n        }\r\n        : function (font, testStr) {\r\n            if (loads.all || loads[font]) {\r\n                return true;\r\n            }\r\n            if (!fontFaceSet.check(font)) {\r\n                load(font, testStr, () => { });\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineImage = void 0;\r\nconst Inline_1 = require(\"./Inline\");\r\nconst imgs_1 = require(\"../internal/imgs\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nclass InlineImage extends Inline_1.Inline {\r\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, offsetTop, offsetLeft, }) {\r\n        super();\r\n        this._inlineImgPromise = null;\r\n        this._inlineImg = null;\r\n        this._src = src;\r\n        this._width = width;\r\n        this._height = height;\r\n        this._imageLeft = imageLeft;\r\n        this._imageTop = imageTop;\r\n        this._imageWidth = imageWidth;\r\n        this._imageHeight = imageHeight;\r\n        this._offsetTop = offsetTop;\r\n        this._offsetLeft = offsetLeft;\r\n        this._onloaded = [];\r\n        if ((0, utils_1.isPromise)(src)) {\r\n            src.then((s) => {\r\n                this._src = s;\r\n                this._loadImage(s);\r\n            });\r\n        }\r\n        else {\r\n            this._loadImage(src);\r\n        }\r\n    }\r\n    _loadImage(src) {\r\n        const img = (this._inlineImgPromise = (0, imgs_1.getCacheOrLoad)(\"InlineImage\", 50, src));\r\n        if ((0, utils_1.isPromise)(img)) {\r\n            img.then((i) => {\r\n                this._inlineImg = i;\r\n                this._onloaded.forEach((fn) => fn());\r\n            });\r\n        }\r\n        else {\r\n            this._inlineImg = img;\r\n        }\r\n    }\r\n    width(_arg) {\r\n        var _a, _b;\r\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        return null;\r\n    }\r\n    canDraw() {\r\n        return !!this._inlineImg;\r\n    }\r\n    onReady(callback) {\r\n        if ((0, utils_1.isPromise)(this._src) || (0, utils_1.isPromise)(this._inlineImgPromise)) {\r\n            this._onloaded.push(() => callback());\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        var _a, _b;\r\n        const img = this._inlineImg;\r\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\r\n            offset: offset + 1,\r\n            padding: {\r\n                left: offsetLeft + ((_a = this._offsetLeft) !== null && _a !== void 0 ? _a : 0),\r\n                right: offsetRight,\r\n                top: offsetTop + ((_b = this._offsetTop) !== null && _b !== void 0 ? _b : 0),\r\n                bottom: offsetBottom,\r\n            },\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineImage = InlineImage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.themes = void 0;\r\nexports.themes = {};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawButton = exports.drawRadioButton = exports.drawCheckbox = exports.measureRadioButton = exports.measureCheckbox = exports.drawInlineImageRect = exports.fillTextRect = exports.strokeCircle = exports.fillCircle = exports.strokeRoundRect = exports.fillRoundRect = exports.roundRect = exports.strokeColorsRect = void 0;\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nconst { ceil, PI } = Math;\r\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n    function strokeRectLines(positions) {\r\n        for (let i = 0; i < borderColors.length; i++) {\r\n            const color = borderColors[i];\r\n            const preColor = borderColors[i - 1];\r\n            if (color) {\r\n                if (preColor !== color) {\r\n                    if (preColor) {\r\n                        ctx.strokeStyle = preColor;\r\n                        ctx.stroke();\r\n                    }\r\n                    const pos1 = positions[i];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(pos1.x, pos1.y);\r\n                }\r\n                const pos2 = positions[i + 1];\r\n                ctx.lineTo(pos2.x, pos2.y);\r\n            }\r\n            else {\r\n                if (preColor) {\r\n                    ctx.strokeStyle = preColor;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n        }\r\n        const preColor = borderColors[borderColors.length - 1];\r\n        if (preColor) {\r\n            ctx.strokeStyle = preColor;\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    if (borderColors[0] === borderColors[1] &&\r\n        borderColors[0] === borderColors[2] &&\r\n        borderColors[0] === borderColors[3]) {\r\n        if (borderColors[0]) {\r\n            ctx.strokeStyle = borderColors[0];\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        strokeRectLines([\r\n            { x: left, y: top },\r\n            { x: left + width, y: top },\r\n            { x: left + width, y: top + height },\r\n            { x: left, y: top + height },\r\n            { x: left, y: top },\r\n        ]);\r\n    }\r\n}\r\nexports.strokeColorsRect = strokeColorsRect;\r\nfunction roundRect(ctx, left, top, width, height, radius) {\r\n    ctx.beginPath();\r\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n    ctx.closePath();\r\n}\r\nexports.roundRect = roundRect;\r\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.fill();\r\n}\r\nexports.fillRoundRect = fillRoundRect;\r\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n    roundRect(ctx, left, top, width, height, radius);\r\n    ctx.stroke();\r\n}\r\nexports.strokeRoundRect = strokeRoundRect;\r\nfunction fillCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n}\r\nexports.fillCircle = fillCircle;\r\nfunction strokeCircle(ctx, left, top, width, height) {\r\n    const min = Math.min(width, height) / 2;\r\n    ctx.beginPath();\r\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\nexports.strokeCircle = strokeCircle;\r\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcBasePosition)(ctx, rect, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.fillText(text, pos.x, pos.y);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.fillTextRect = fillTextRect;\r\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\r\n    const rect = {\r\n        left,\r\n        top,\r\n        width,\r\n        height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    ctx.save();\r\n    try {\r\n        ctx.beginPath();\r\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n        //clip\r\n        ctx.clip();\r\n        //\r\n        const pos = (0, canvases_1.calcStartPosition)(ctx, rect, destWidth, destHeight, {\r\n            offset,\r\n            padding,\r\n        });\r\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawInlineImageRect = drawInlineImageRect;\r\n/**\r\n * Returns an object containing the width of the checkbox.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the checkbox\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureCheckbox(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureCheckbox = measureCheckbox;\r\n/**\r\n * Returns an object containing the width of the radio button.\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @return {Object} Object containing the width of the radio button\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction measureRadioButton(ctx) {\r\n    return {\r\n        width: (0, canvases_1.getFontSize)(ctx, null).width,\r\n    };\r\n}\r\nexports.measureRadioButton = measureRadioButton;\r\n/**\r\n * draw Checkbox\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n * @param  {boolean|number} check checkbox check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\r\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\r\n        if (check) {\r\n            ctx.lineWidth = ceil(boxSize / 10);\r\n            ctx.strokeStyle = uncheckBgColor;\r\n            let leftWidth = boxSize / 4;\r\n            let rightWidth = (boxSize / 2) * 0.9;\r\n            const leftLeftPos = x + boxSize * 0.2;\r\n            const leftTopPos = y + boxSize / 2;\r\n            if (checkPoint < 0.5) {\r\n                leftWidth *= checkPoint * 2;\r\n            }\r\n            ctx.beginPath();\r\n            ctx.moveTo(leftLeftPos, leftTopPos);\r\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n            if (checkPoint > 0.5) {\r\n                if (checkPoint < 1) {\r\n                    rightWidth *= (checkPoint - 0.5) * 2;\r\n                }\r\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawCheckbox = drawCheckbox;\r\n/**\r\n * draw Radio button\r\n * @param  {CanvasRenderingContext2D} ctx canvas context\r\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\r\n * @param  {boolean|number} check radio button check status\r\n * @param  {object} option option\r\n * @return {void}\r\n * @memberof cheetahGrid.tools.canvashelper\r\n */\r\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\r\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        const leftX = ceil(x);\r\n        const topY = ceil(y);\r\n        const size = ceil(boxSize);\r\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = borderColor;\r\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\r\n        if (check) {\r\n            const checkSize = (size * ratio) / 2;\r\n            const padding = (size - checkSize) / 2;\r\n            ctx.fillStyle = checkColor;\r\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\r\n        }\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawRadioButton = drawRadioButton;\r\n/**\r\n * draw Button\r\n */\r\nfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\r\n    ctx.save();\r\n    try {\r\n        ctx.fillStyle = bgColor;\r\n        if (shadow) {\r\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\r\n            ctx.shadowColor = color;\r\n            ctx.shadowBlur = blur; //\r\n            ctx.shadowOffsetX = ox;\r\n            ctx.shadowOffsetY = oy;\r\n        }\r\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\r\n    }\r\n    finally {\r\n        ctx.restore();\r\n    }\r\n}\r\nexports.drawButton = drawButton;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptyDataCache = exports.newEmptyColumnData = exports.newEmptyHeaderData = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nlet seqId = -1;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyHeaderData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        headerType: headerType.of(null), // default\r\n    };\r\n}\r\nexports.newEmptyHeaderData = newEmptyHeaderData;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction newEmptyColumnData() {\r\n    return {\r\n        id: seqId--,\r\n        define: {},\r\n        columnType: columns.type.of(null),\r\n        style: null,\r\n    };\r\n}\r\nexports.newEmptyColumnData = newEmptyColumnData;\r\nclass EmptyDataCache {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.headers = [];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.columns = [];\r\n    }\r\n    getHeader(col, row) {\r\n        const rows = this.headers[row] || (this.headers[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyHeaderData());\r\n    }\r\n    getBody(col, row) {\r\n        const rows = this.columns[row] || (this.columns[row] = []);\r\n        return rows[col] || (rows[col] = newEmptyColumnData());\r\n    }\r\n}\r\nexports.EmptyDataCache = EmptyDataCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GridCanvasHelper = void 0;\r\nconst calc = __importStar(require(\"./internal/calc\"));\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nconst fonts = __importStar(require(\"./internal/fonts\"));\r\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst canvases_1 = require(\"./internal/canvases\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst color_1 = require(\"./internal/color\");\r\nconst { toBoxArray } = utils_1.style;\r\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\r\nconst TEXT_OFFSET = 2;\r\nconst CHECKBOX_OFFSET = TEXT_OFFSET + 1;\r\nfunction invalidateCell(context, grid) {\r\n    const { col, row } = context;\r\n    grid.invalidateCell(col, row);\r\n}\r\nfunction getColor(color, col, row, grid, context) {\r\n    return (0, utils_1.getOrApply)(color, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getFont(font, col, row, grid, context) {\r\n    if (font == null) {\r\n        return undefined;\r\n    }\r\n    return (0, utils_1.getOrApply)(font, {\r\n        col,\r\n        row,\r\n        grid,\r\n        context,\r\n    });\r\n}\r\nfunction getThemeColor(grid, ...names) {\r\n    const gridThemeColor = (0, utils_1.getChainSafe)(grid.theme, ...names);\r\n    if (gridThemeColor == null) {\r\n        // use default theme\r\n        return (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n    }\r\n    if (typeof gridThemeColor !== \"function\") {\r\n        return gridThemeColor;\r\n    }\r\n    let defaultThemeColor;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return ((args) => {\r\n        const color = gridThemeColor(args);\r\n        if (color != null) {\r\n            // use grid theme\r\n            return color;\r\n        }\r\n        // use default theme\r\n        defaultThemeColor =\r\n            defaultThemeColor || (0, utils_1.getChainSafe)(themes.getDefault(), ...names);\r\n        return (0, utils_1.getOrApply)(defaultThemeColor, args);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    });\r\n}\r\nfunction testFontLoad(font, value, context, grid) {\r\n    if (font) {\r\n        if (!fonts.check(font, value)) {\r\n            fonts.load(font, value, () => invalidateCell(context, grid));\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n    function drawInline(inline, offsetLeft, offsetRight) {\r\n        if (inline.canDraw()) {\r\n            ctx.save();\r\n            try {\r\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n                ctx.font = inline.font() || ctx.font;\r\n                inline.draw({\r\n                    ctx,\r\n                    canvashelper,\r\n                    rect,\r\n                    offset,\r\n                    offsetLeft,\r\n                    offsetRight,\r\n                    offsetTop,\r\n                    offsetBottom,\r\n                });\r\n            }\r\n            finally {\r\n                ctx.restore();\r\n            }\r\n        }\r\n        else {\r\n            inline.onReady(() => grid.invalidateCell(col, row));\r\n            //noop\r\n        }\r\n    }\r\n    if (inlines.length === 1) {\r\n        //1\r\n        const inline = inlines[0];\r\n        drawInline(inline, 0, 0);\r\n    }\r\n    else {\r\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\r\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n        let offsetLeft = 0;\r\n        inlines.forEach((inline, index) => {\r\n            const inlineWidth = inlineWidths[index];\r\n            offsetRight -= inlineWidth;\r\n            drawInline(inline, offsetLeft, offsetRight);\r\n            offsetLeft += inlineWidth;\r\n        });\r\n    }\r\n}\r\nfunction buildInlines(icons, inline) {\r\n    return inlineUtils.buildInlines(icons, inline || \"\");\r\n}\r\nfunction inlineToString(inline) {\r\n    return inlineUtils.string(inline);\r\n}\r\nfunction getOverflowInline(textOverflow) {\r\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\r\n        return INLINE_ELLIPSIS;\r\n    }\r\n    textOverflow = textOverflow.trim();\r\n    if (textOverflow.length === 1) {\r\n        return inlineUtils.of(textOverflow[0]);\r\n    }\r\n    return INLINE_ELLIPSIS;\r\n}\r\nfunction isAllowOverflow(textOverflow) {\r\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\r\n}\r\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\r\n    const maxWidth = width - 3; /*buffer*/\r\n    let lineWidth = 0;\r\n    for (let i = 0; i < inlines.length; i++) {\r\n        const inline = inlines[i];\r\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\r\n        if (lineWidth + inlineWidth > maxWidth) {\r\n            return {\r\n                index: i,\r\n                lineWidth,\r\n                remWidth: maxWidth - lineWidth,\r\n            };\r\n        }\r\n        lineWidth += inlineWidth;\r\n    }\r\n    return null;\r\n}\r\nfunction isOverflowInlines(ctx, inlines, width) {\r\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\r\n}\r\nfunction breakWidthInlines(ctx, inlines, width) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            beforeInlines: inlines,\r\n            overflow: false,\r\n            afterInlines: [],\r\n        };\r\n    }\r\n    const { index, remWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const beforeInlines = inlines.slice(0, index);\r\n    const afterInlines = [];\r\n    if (inline.canBreak()) {\r\n        let { before, after } = inline.breakWord(ctx, remWidth);\r\n        if (!before && !beforeInlines.length) {\r\n            ({ before, after } = inline.breakAll(ctx, remWidth));\r\n        }\r\n        if (!before && !beforeInlines.length) {\r\n            // Always return one char\r\n            ({ before, after } = inline.splitIndex(1));\r\n        }\r\n        if (before) {\r\n            beforeInlines.push(before);\r\n        }\r\n        if (after) {\r\n            afterInlines.push(after);\r\n        }\r\n        afterInlines.push(...inlines.slice(index + 1));\r\n    }\r\n    else {\r\n        if (!beforeInlines.length) {\r\n            // Always return one char\r\n            beforeInlines.push(inline);\r\n        }\r\n        afterInlines.push(...inlines.slice(beforeInlines.length));\r\n    }\r\n    return {\r\n        beforeInlines,\r\n        overflow: true,\r\n        afterInlines,\r\n    };\r\n}\r\nfunction truncateInlines(ctx, inlines, width, option) {\r\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\r\n    if (!indexData) {\r\n        return {\r\n            inlines,\r\n            overflow: false,\r\n        };\r\n    }\r\n    const { index, lineWidth } = indexData;\r\n    const inline = inlines[index];\r\n    const overflowInline = getOverflowInline(option);\r\n    const ellipsisWidth = overflowInline.width({ ctx });\r\n    const remWidth = width - lineWidth - ellipsisWidth;\r\n    const result = inlines.slice(0, index);\r\n    if (inline.canBreak()) {\r\n        const { before } = inline.breakAll(ctx, remWidth);\r\n        if (before) {\r\n            result.push(before);\r\n        }\r\n    }\r\n    result.push(overflowInline);\r\n    return {\r\n        inlines: result,\r\n        overflow: true,\r\n    };\r\n}\r\nfunction _inlineRect(grid, ctx, inline, drawRect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    let inlines = buildInlines(icons, inline);\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let inlineDrawRect = drawRect;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n        inlineDrawRect = new Rect_1.Rect(drawRect.left, drawRect.top, width, drawRect.height);\r\n    }\r\n    if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, width)) {\r\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n        inlines = truncInlines;\r\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n    }\r\n    drawInlines(ctx, inlines, inlineDrawRect, offset, 0, 0, col, row, grid);\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let sumWidth = 0;\r\n        inlines.forEach((inline) => {\r\n            sumWidth += inline.width({ ctx });\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < sumWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += sumWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\n// eslint-disable-next-line complexity\r\nfunction _multiInlineRect(grid, ctx, multiInlines, drawRect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, trailingIcon, }) {\r\n    //style\r\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    ctx.font = font || ctx.font;\r\n    if (lineClamp === \"auto\") {\r\n        const rectHeight = drawRect.height - offset * 2 - 2; /*offset added by Inline#draw*/\r\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\r\n    }\r\n    const trailingIconInline = trailingIcon\r\n        ? inlineUtils.iconOf(trailingIcon)\r\n        : null;\r\n    let { width } = drawRect;\r\n    let trailingIconWidth = 0;\r\n    if (trailingIconInline) {\r\n        trailingIconWidth = trailingIconInline.width({ ctx });\r\n        width -= trailingIconWidth;\r\n    }\r\n    let buildedMultiInlines;\r\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\r\n        buildedMultiInlines = [];\r\n        const procLineClamp = lineClamp > 0\r\n            ? (inlines, hasNext) => {\r\n                if (buildedMultiInlines.length + 1 >= Number(lineClamp)) {\r\n                    if (inlines.length === 0 && hasNext) {\r\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    else {\r\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                        buildedMultiInlines.push(hasNext && !overflow\r\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\r\n                            : truncInlines);\r\n                        if (overflow || hasNext) {\r\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            : () => true;\r\n        const procLine = autoWrapText\r\n            ? (inlines, hasNext) => {\r\n                if (!procLineClamp(inlines, hasNext)) {\r\n                    return false;\r\n                }\r\n                while (inlines.length) {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\r\n                    buildedMultiInlines.push(beforeInlines);\r\n                    inlines = afterInlines;\r\n                }\r\n                return true;\r\n            }\r\n            : isAllowOverflow(textOverflow)\r\n                ? (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\r\n                    buildedMultiInlines.push(truncInlines);\r\n                    if (overflow) {\r\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\r\n                    }\r\n                    return true;\r\n                }\r\n                : (inlines, hasNext) => {\r\n                    if (!procLineClamp(inlines, hasNext)) {\r\n                        return false;\r\n                    }\r\n                    buildedMultiInlines.push(inlines);\r\n                    return true;\r\n                };\r\n        grid.setCellOverflowText(col, row, false);\r\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\r\n            const inline = multiInlines[lineRow];\r\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\r\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        grid.setCellOverflowText(col, row, false);\r\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\r\n    }\r\n    let paddingTop = 0;\r\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\r\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop += pad;\r\n        paddingBottom -= pad;\r\n    }\r\n    else if (ctx.textBaseline === \"bottom\" ||\r\n        ctx.textBaseline === \"alphabetic\" ||\r\n        ctx.textBaseline === \"ideographic\") {\r\n        const em = (0, canvases_1.getFontSize)(ctx, ctx.font).height;\r\n        const pad = (lineHeight - em) / 2;\r\n        paddingTop -= pad;\r\n        paddingBottom += pad;\r\n    }\r\n    buildedMultiInlines.forEach((buildedInline) => {\r\n        drawInlines(ctx, buildedInline, drawRect, offset, paddingTop, paddingBottom, col, row, grid);\r\n        paddingTop += lineHeight;\r\n        paddingBottom -= lineHeight;\r\n    });\r\n    if (trailingIconInline) {\r\n        // Draw trailing icon\r\n        let maxWidth = 0;\r\n        buildedMultiInlines.forEach((buildedInline) => {\r\n            let sumWidth = 0;\r\n            buildedInline.forEach((inline) => {\r\n                sumWidth += inline.width({ ctx });\r\n            });\r\n            maxWidth = Math.max(maxWidth, sumWidth);\r\n        });\r\n        const baseRect = new Rect_1.Rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n        const trailingIconRect = baseRect.copy();\r\n        if (width < maxWidth) {\r\n            trailingIconRect.left =\r\n                trailingIconRect.right - trailingIconWidth - offset;\r\n        }\r\n        else {\r\n            trailingIconRect.left += maxWidth;\r\n        }\r\n        trailingIconRect.right = baseRect.right;\r\n        drawInlines(ctx, [trailingIconInline], trailingIconRect, offset, 0, 0, col, row, grid);\r\n    }\r\n}\r\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\r\n    const startColorRGB = (0, color_1.colorToRGB)(startColor);\r\n    const endColorRGB = (0, color_1.colorToRGB)(endColor);\r\n    const getRGB = (colorName) => {\r\n        const start = startColorRGB[colorName];\r\n        const end = endColorRGB[colorName];\r\n        if (elapsedTime >= 1) {\r\n            return end;\r\n        }\r\n        if (elapsedTime <= 0) {\r\n            return start;\r\n        }\r\n        const diff = start - end;\r\n        return Math.ceil(start - diff * elapsedTime);\r\n    };\r\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\r\n}\r\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    borderColor = helper.getColor(borderColor, col, row, ctx);\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        uncheckBgColor = check\r\n            ? uncheckBgColor\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n        checkBgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : checkBgColor;\r\n    }\r\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n        uncheckBgColor,\r\n        checkBgColor,\r\n        borderColor,\r\n    });\r\n}\r\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\r\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\r\n    checkColor = helper.getColor(checkColor, col, row, ctx);\r\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\r\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\r\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\r\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\r\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\r\n    let bgColor = check ? checkBgColor : uncheckBgColor;\r\n    if (0 < animElapsedTime && animElapsedTime < 1) {\r\n        borderColor = check\r\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\r\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\r\n        bgColor = check\r\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\r\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\r\n    }\r\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\r\n        checkColor,\r\n        borderColor,\r\n        bgColor,\r\n    });\r\n}\r\nclass ThemeResolver {\r\n    constructor(grid) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this._grid = grid;\r\n    }\r\n    getThemeColor(...name) {\r\n        return getThemeColor(this._grid, ...name);\r\n    }\r\n    get font() {\r\n        return getThemeColor(this._grid, \"font\");\r\n    }\r\n    get underlayBackgroundColor() {\r\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\r\n    }\r\n    // color\r\n    get color() {\r\n        return getThemeColor(this._grid, \"color\");\r\n    }\r\n    get frozenRowsColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsColor\");\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        return getThemeColor(this._grid, \"defaultBgColor\");\r\n    }\r\n    get frozenRowsBgColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\r\n    }\r\n    get selectionBgColor() {\r\n        return getThemeColor(this._grid, \"selectionBgColor\");\r\n    }\r\n    get highlightBgColor() {\r\n        return getThemeColor(this._grid, \"highlightBgColor\");\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        return getThemeColor(this._grid, \"borderColor\");\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\r\n    }\r\n    get highlightBorderColor() {\r\n        return getThemeColor(this._grid, \"highlightBorderColor\");\r\n    }\r\n    get checkbox() {\r\n        const grid = this._grid;\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop) {\r\n            return getThemeColor(grid, \"checkbox\", prop);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const grid = this._grid;\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\");\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\");\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\");\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop) {\r\n            return getThemeColor(grid, \"radioButton\", prop);\r\n        }\r\n    }\r\n    get button() {\r\n        const grid = this._grid;\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\");\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\");\r\n                },\r\n            }));\r\n        function getButtonProp(prop) {\r\n            return getThemeColor(grid, \"button\", prop);\r\n        }\r\n    }\r\n    get header() {\r\n        const grid = this._grid;\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const grid = this._grid;\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getThemeColor(grid, \"messages\", prop);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const grid = this._grid;\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop) {\r\n            return getThemeColor(grid, \"indicators\", prop);\r\n        }\r\n    }\r\n}\r\nfunction strokeRect(ctx, color, left, top, width, height) {\r\n    if (!Array.isArray(color)) {\r\n        if (color) {\r\n            ctx.strokeStyle = color;\r\n            ctx.strokeRect(left, top, width, height);\r\n        }\r\n    }\r\n    else {\r\n        const borderColors = toBoxArray(color);\r\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n    }\r\n}\r\nclass GridCanvasHelper {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._theme = new ThemeResolver(grid);\r\n    }\r\n    createCalculator(context, font) {\r\n        return {\r\n            calcWidth(width) {\r\n                return calc.toPx(width, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.width;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).width;\r\n                    },\r\n                });\r\n            },\r\n            calcHeight(height) {\r\n                return calc.toPx(height, {\r\n                    get full() {\r\n                        const rect = context.getRect();\r\n                        return rect.height;\r\n                    },\r\n                    get em() {\r\n                        return (0, canvases_1.getFontSize)(context.getContext(), font).height;\r\n                    },\r\n                });\r\n            },\r\n        };\r\n    }\r\n    getColor(color, col, row, ctx) {\r\n        return getColor(color, col, row, this._grid, ctx);\r\n    }\r\n    toBoxArray(obj) {\r\n        return toBoxArray(obj);\r\n    }\r\n    toBoxPixelArray(value, context, font) {\r\n        if (typeof value === \"string\" || Array.isArray(value)) {\r\n            const calculator = this.createCalculator(context, font);\r\n            const box = toBoxArray(value);\r\n            return [\r\n                calculator.calcHeight(box[0]),\r\n                calculator.calcWidth(box[1]),\r\n                calculator.calcHeight(box[2]),\r\n                calculator.calcWidth(box[3]),\r\n            ];\r\n        }\r\n        return toBoxArray(value);\r\n    }\r\n    get theme() {\r\n        return this._theme;\r\n    }\r\n    drawWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n            //clip\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    drawBorderWithClip(context, draw) {\r\n        const drawRect = context.getDrawRect();\r\n        if (!drawRect) {\r\n            return;\r\n        }\r\n        const rect = context.getRect();\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            //clip\r\n            ctx.beginPath();\r\n            let clipLeft = drawRect.left;\r\n            let clipWidth = drawRect.width;\r\n            if (drawRect.left === rect.left) {\r\n                clipLeft += -1;\r\n                clipWidth += 1;\r\n            }\r\n            let clipTop = drawRect.top;\r\n            let clipHeight = drawRect.height;\r\n            if (drawRect.top === rect.top) {\r\n                clipTop += -1;\r\n                clipHeight += 1;\r\n            }\r\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n            ctx.clip();\r\n            draw(ctx);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    text(text, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, trailingIcon, appendRightPx, } = {}) {\r\n        let rect = context.getRect();\r\n        rect.width += appendRightPx !== null && appendRightPx !== void 0 ? appendRightPx : 0;\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width + (appendRightPx !== null && appendRightPx !== void 0 ? appendRightPx : 0), height);\r\n            }\r\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    multilineText(multilines, context, { padding, offset = TEXT_OFFSET, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, trailingIcon, } = {}) {\r\n        let rect = context.getRect();\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            if (padding) {\r\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\r\n                const left = rect.left + paddingNums[3];\r\n                const top = rect.top + paddingNums[0];\r\n                const width = rect.width - paddingNums[1] - paddingNums[3];\r\n                const height = rect.height - paddingNums[0] - paddingNums[2];\r\n                rect = new Rect_1.Rect(left, top, width, height);\r\n            }\r\n            const calculator = this.createCalculator(context, font);\r\n            lineHeight = calculator.calcHeight(lineHeight);\r\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n                trailingIcon,\r\n            });\r\n        });\r\n    }\r\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\r\n        const { col, row } = context;\r\n        if (!color) {\r\n            ({ color } = this.theme);\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell && isFrozenCell.row) {\r\n                color = this.theme.frozenRowsColor;\r\n            }\r\n        }\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n            ctx.textAlign = textAlign;\r\n            ctx.textBaseline = textBaseline;\r\n            ctx.font = font || ctx.font;\r\n            ctx.fillText(text, x, y);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        });\r\n    }\r\n    fillCellWithState(context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillCell(context, option);\r\n    }\r\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\r\n        const ctx = context.getContext();\r\n        ctx.save();\r\n        try {\r\n            const { col, row } = context;\r\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            ctx.fill();\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    fillRectWithState(rect, context, option = {}) {\r\n        option.fillColor = this.getFillColorState(context, option);\r\n        this.fillRect(rect, context, option);\r\n    }\r\n    getFillColorState(context, option = {}) {\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        if (!(0, utils_1.cellEquals)(sel.select, context) && (0, utils_1.cellInRange)(sel.range, col, row)) {\r\n            return this.theme.selectionBgColor;\r\n        }\r\n        if (option.fillColor) {\r\n            return option.fillColor;\r\n        }\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            return this.theme.highlightBgColor;\r\n        }\r\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n        if (isFrozenCell && isFrozenCell.row) {\r\n            return this.theme.frozenRowsBgColor;\r\n        }\r\n        return this.theme.defaultBgColor;\r\n    }\r\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawBorderWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n            if (lineWidth === 1) {\r\n                ctx.lineWidth = 1;\r\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n            }\r\n            else if (lineWidth === 2) {\r\n                ctx.lineWidth = 2;\r\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n            }\r\n            else {\r\n                ctx.lineWidth = lineWidth;\r\n                const startOffset = lineWidth / 2 - 1;\r\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\r\n            }\r\n        });\r\n    }\r\n    // Unused in main\r\n    borderWithState(context, option = {}) {\r\n        const rect = context.getRect();\r\n        const sel = context.getSelection();\r\n        const { col, row } = context;\r\n        //\r\n        if ((0, utils_1.cellEquals)(sel.select, context)) {\r\n            option.borderColor = this.theme.highlightBorderColor;\r\n            option.lineWidth = 2;\r\n            this.border(context, option);\r\n        }\r\n        else {\r\n            // header color\r\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\r\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n                option.borderColor = this.theme.frozenRowsBorderColor;\r\n            }\r\n            option.lineWidth = 1;\r\n            this.border(context, option);\r\n            //\r\n            const sel = this._grid.selection.select;\r\n            if (sel.col + 1 === col && sel.row === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n            else if (sel.col === col && sel.row + 1 === row) {\r\n                //\r\n                this.drawBorderWithClip(context, (ctx) => {\r\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    buildCheckBoxInline(check, context, option = {}) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        const ctx = context.getContext();\r\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n        return new InlineDrawer_1.InlineDrawer({\r\n            draw,\r\n            width: boxWidth + 3,\r\n            height: boxWidth + 1,\r\n            color: undefined,\r\n        });\r\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\r\n                offset: offset + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                padding: {\r\n                    left: offsetLeft + (CHECKBOX_OFFSET - TEXT_OFFSET),\r\n                    right: offsetRight,\r\n                    top: offsetTop,\r\n                    bottom: offsetBottom,\r\n                },\r\n            });\r\n        }\r\n    }\r\n    checkbox(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, uncheckBgColor, checkBgColor, borderColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                borderColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    radioButton(check, context, { animElapsedTime, offset = CHECKBOX_OFFSET, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, textAlign, textBaseline, } = {}) {\r\n        this.drawWithClip(context, (ctx) => {\r\n            const { col, row } = context;\r\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, {\r\n                animElapsedTime,\r\n                checkColor,\r\n                uncheckBorderColor,\r\n                checkBorderColor,\r\n                uncheckBgColor,\r\n                checkBgColor,\r\n                textAlign,\r\n                textBaseline,\r\n            }, { offset, padding: { left: CHECKBOX_OFFSET - TEXT_OFFSET } });\r\n        });\r\n    }\r\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = TEXT_OFFSET, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\r\n        const rect = context.getRect();\r\n        this.drawWithClip(context, (ctx) => {\r\n            font = getFont(font, context.col, context.row, this._grid, ctx);\r\n            const { col, row } = context;\r\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\r\n            const left = rect.left + paddingNums[3];\r\n            const top = rect.top + paddingNums[0];\r\n            const width = rect.width - paddingNums[1] - paddingNums[3];\r\n            const height = rect.height - paddingNums[0] - paddingNums[2];\r\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\r\n            canvashelper.drawButton(ctx, left, top, width, height, {\r\n                bgColor,\r\n                radius: rect.height / 8,\r\n                // offset,\r\n                shadow,\r\n            });\r\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\r\n                offset,\r\n                color,\r\n                textAlign,\r\n                textBaseline,\r\n                font,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n    testFontLoad(font, value, context) {\r\n        return testFontLoad(font, value, context, this._grid);\r\n    }\r\n}\r\nexports.GridCanvasHelper = GridCanvasHelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.colorToRGB = void 0;\r\nconst rgbMap = {};\r\nfunction styleColorToRGB(color) {\r\n    const dummy = document.createElement(\"div\");\r\n    const { style } = dummy;\r\n    style.color = color;\r\n    style.position = \"fixed\";\r\n    style.height = \"1px\";\r\n    style.width = \"1px\";\r\n    style.opacity = \"0\";\r\n    document.body.appendChild(dummy);\r\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\r\n    document.body.removeChild(dummy);\r\n    return colorToRGB0(styleColor || \"\");\r\n}\r\nfunction hexToNum(hex) {\r\n    return parseInt(hex, 16);\r\n}\r\nfunction createRGB(r, g, b, a = 1) {\r\n    return { r, g, b, a };\r\n}\r\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\r\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n}\r\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\r\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n}\r\nfunction testRGB({ r, g, b, a }) {\r\n    return (0 <= r &&\r\n        r <= 255 &&\r\n        0 <= g &&\r\n        g <= 255 &&\r\n        0 <= b &&\r\n        b <= 255 &&\r\n        0 <= a &&\r\n        a <= 1);\r\n}\r\nfunction rateToByte(r) {\r\n    return Math.ceil((r * 255) / 100);\r\n}\r\nconst numberPattern = /((?:\\+|-)?(?:\\d+(?:\\.\\d+)?|\\.\\d+))/.source;\r\nconst percentPattern = `${numberPattern}%`;\r\nconst maybePercentPattern = `${numberPattern}(%?)`;\r\nfunction buildRgbWithCommaRegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbLv4RegExp(bytePattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaWithCommaRegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${bytePattern}\\\\s*,\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction buildRgbaLv4RegExp(bytePattern, alphaPattern) {\r\n    return new RegExp(`^rgba?\\\\(\\\\s*${bytePattern}\\\\s+${bytePattern}\\\\s+${bytePattern}\\\\s*/\\\\s*${alphaPattern}\\\\s*\\\\)$`, \"i\");\r\n}\r\nfunction colorToRGB0(color) {\r\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\r\n        return tripleHexToRGB(color);\r\n    }\r\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\r\n        return sextupleHexToRGB(color);\r\n    }\r\n    let ret = buildRgbWithCommaRegExp(numberPattern).exec(color) ||\r\n        buildRgbLv4RegExp(numberPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbWithCommaRegExp(percentPattern).exec(color) ||\r\n            buildRgbLv4RegExp(percentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(numberPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(numberPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    ret =\r\n        buildRgbaWithCommaRegExp(percentPattern, maybePercentPattern).exec(color) ||\r\n            buildRgbaLv4RegExp(percentPattern, maybePercentPattern).exec(color);\r\n    if (ret) {\r\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[2])), rateToByte(Number(ret[3])), Number(ret[4]) / (ret[5] /* % */ ? 100 : 1));\r\n        if (testRGB(rgb)) {\r\n            return rgb;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction colorToRGB(color) {\r\n    if (typeof color !== \"string\") {\r\n        return createRGB(0, 0, 0, 0);\r\n    }\r\n    color = color.toLowerCase().trim();\r\n    if (rgbMap[color]) {\r\n        return rgbMap[color];\r\n    }\r\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n}\r\nexports.colorToRGB = colorToRGB;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.register = exports.getIcons = exports.GridCanvasHelper = exports.data = exports.themes = exports.headers = exports.columns = exports.ListGrid = exports.tools = exports.core = exports._getInternal = void 0;\r\nconst columns = __importStar(require(\"./columns\"));\r\nexports.columns = columns;\r\nconst core = __importStar(require(\"./core\"));\r\nexports.core = core;\r\nconst data = __importStar(require(\"./data\"));\r\nexports.data = data;\r\nconst headers = __importStar(require(\"./headers\"));\r\nexports.headers = headers;\r\nconst icons = __importStar(require(\"./icons\"));\r\nconst register = __importStar(require(\"./register\"));\r\nexports.register = register;\r\nconst themes = __importStar(require(\"./themes\"));\r\nexports.themes = themes;\r\nconst tools = __importStar(require(\"./tools\"));\r\nexports.tools = tools;\r\nconst ListGrid_1 = require(\"./ListGrid\");\r\nObject.defineProperty(exports, \"ListGrid\", { enumerable: true, get: function () { return ListGrid_1.ListGrid; } });\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nObject.defineProperty(exports, \"GridCanvasHelper\", { enumerable: true, get: function () { return GridCanvasHelper_1.GridCanvasHelper; } });\r\nvar get_internal_1 = require(\"./get-internal\");\r\nObject.defineProperty(exports, \"_getInternal\", { enumerable: true, get: function () { return get_internal_1.getInternal; } });\r\n/** @private */\r\nfunction getIcons() {\r\n    return icons.get();\r\n}\r\nexports.getIcons = getIcons;\r\n// backward compatibility\r\nexports.default = {\r\n    core,\r\n    tools,\r\n    // impl Grids\r\n    ListGrid: ListGrid_1.ListGrid,\r\n    // objects\r\n    columns,\r\n    headers,\r\n    themes,\r\n    data,\r\n    // helper\r\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\r\n    //plugin registers\r\n    register,\r\n    get icons() {\r\n        return getIcons();\r\n    },\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"default\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getDefault();\r\n    },\r\n    set(defaultTheme) {\r\n        themes.setDefault(defaultTheme);\r\n    },\r\n});\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nObject.defineProperty(themes, \"choices\", {\r\n    enumerable: false,\r\n    configurable: true,\r\n    get() {\r\n        return themes.getChoices();\r\n    },\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.of = exports.InlineMenuEditor = exports.InlineInputEditor = exports.SmallDialogInputEditor = exports.ButtonAction = exports.RadioEditor = exports.CheckEditor = exports.Action = exports.Editor = exports.BaseAction = exports.ACTIONS = void 0;\r\nconst Action_1 = require(\"./action/Action\");\r\nObject.defineProperty(exports, \"Action\", { enumerable: true, get: function () { return Action_1.Action; } });\r\nconst BaseAction_1 = require(\"./action/BaseAction\");\r\nObject.defineProperty(exports, \"BaseAction\", { enumerable: true, get: function () { return BaseAction_1.BaseAction; } });\r\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\r\nObject.defineProperty(exports, \"ButtonAction\", { enumerable: true, get: function () { return ButtonAction_1.ButtonAction; } });\r\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\r\nObject.defineProperty(exports, \"CheckEditor\", { enumerable: true, get: function () { return CheckEditor_1.CheckEditor; } });\r\nconst Editor_1 = require(\"./action/Editor\");\r\nObject.defineProperty(exports, \"Editor\", { enumerable: true, get: function () { return Editor_1.Editor; } });\r\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\r\nObject.defineProperty(exports, \"InlineInputEditor\", { enumerable: true, get: function () { return InlineInputEditor_1.InlineInputEditor; } });\r\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\r\nObject.defineProperty(exports, \"InlineMenuEditor\", { enumerable: true, get: function () { return InlineMenuEditor_1.InlineMenuEditor; } });\r\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\r\nObject.defineProperty(exports, \"RadioEditor\", { enumerable: true, get: function () { return RadioEditor_1.RadioEditor; } });\r\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\r\nObject.defineProperty(exports, \"SmallDialogInputEditor\", { enumerable: true, get: function () { return SmallDialogInputEditor_1.SmallDialogInputEditor; } });\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    get readOnly() {\r\n        return this._readOnly;\r\n    }\r\n}\r\nexports.ACTIONS = {\r\n    CHECK: new ImmutableCheckEditor(),\r\n    INPUT: new ImmutableInputEditor(),\r\n    RADIO: new ImmutableRadioEditor(),\r\n};\r\nfunction of(columnAction) {\r\n    if (!columnAction) {\r\n        return undefined;\r\n    }\r\n    else if (typeof columnAction === \"string\") {\r\n        const key = columnAction.toUpperCase();\r\n        return exports.ACTIONS[key] || of(null);\r\n    }\r\n    else {\r\n        return columnAction;\r\n    }\r\n}\r\nexports.of = of;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonAction = void 0;\r\nconst Action_1 = require(\"./Action\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonAction extends Action_1.Action {\r\n    getState(grid) {\r\n        let state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (!state) {\r\n            state = {};\r\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\r\n        }\r\n        return state;\r\n    }\r\n}\r\nexports.ButtonAction = ButtonAction;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckEditor extends Editor_1.Editor {\r\n    clone() {\r\n        return new CheckEditor(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[CHECK_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            if (ret) {\r\n                const onChange = () => {\r\n                    // checkbox animation\r\n                    (0, animate_1.animate)(200, (point) => {\r\n                        if (point === 1) {\r\n                            delete state.elapsed[cellKey];\r\n                        }\r\n                        else {\r\n                            state.elapsed[cellKey] = point;\r\n                        }\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                };\r\n                if ((0, utils_1.isPromise)(ret)) {\r\n                    state.block[cellKey] = true;\r\n                    ret.then(() => {\r\n                        delete state.block[cellKey];\r\n                        onChange();\r\n                    });\r\n                }\r\n                else {\r\n                    onChange();\r\n                }\r\n            }\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action: (_e) => {\r\n                    const selrange = grid.selection.range;\r\n                    const { col } = grid.selection.select;\r\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\r\n                        if (!isTarget(col, row)) {\r\n                            continue;\r\n                        }\r\n                        action({\r\n                            col,\r\n                            row,\r\n                        });\r\n                    }\r\n                },\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                grid.doGetCellValue(e.col, e.row, (value) => {\r\n                    const newValue = (0, action_utils_1.toggleValue)(value);\r\n                    if (`${newValue}`.trim() === pasteValue) {\r\n                        action({\r\n                            col: e.col,\r\n                            row: e.row,\r\n                        });\r\n                    }\r\n                    else if (isRejectValue(value, pasteValue)) {\r\n                        const record = grid.getRowRecord(e.row);\r\n                        if (!(0, utils_1.isPromise)(record)) {\r\n                            grid.fireListeners(\"rejected_paste_values\", {\r\n                                detail: [\r\n                                    {\r\n                                        col: e.col,\r\n                                        row: e.row,\r\n                                        record,\r\n                                        define: grid.getColumnDefine(e.col, e.row),\r\n                                        pasteValue,\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            const newValue = (0, action_utils_1.toggleValue)(value);\r\n            if (`${newValue}`.trim() === pasteValue) {\r\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\r\n            }\r\n            else if (isRejectValue(value, pasteValue)) {\r\n                context.reject();\r\n            }\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n}\r\nexports.CheckEditor = CheckEditor;\r\nfunction isRejectValue(oldValue, pasteValue) {\r\n    if ((oldValue != null ? `${oldValue}`.trim() : \"\") === pasteValue) {\r\n        return false;\r\n    }\r\n    const newValue = (0, action_utils_1.toggleValue)(oldValue);\r\n    return (`${newValue}`.trim() !== pasteValue &&\r\n        `${(0, action_utils_1.toggleValue)(newValue)}`.trim() !== pasteValue);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputEditor = void 0;\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst _ = (0, symbolManager_1.getInlineInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineInputElement_1.InlineInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nfunction doChangeValue(_grid) {\r\n    if (globalElement) {\r\n        globalElement.doChangeValue();\r\n    }\r\n}\r\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    clone() {\r\n        return new InlineInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(grid, _cell, _selected) {\r\n        doChangeValue(grid);\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(grid) {\r\n        doChangeValue(grid);\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n}\r\nexports.InlineInputEditor = InlineInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineInputElement = void 0;\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst CLASSNAME = \"cheetah-grid__inline-input\";\r\nfunction createInputElement() {\r\n    require(\"@/columns/action/internal/InlineInputElement.css\");\r\n    return (0, dom_1.createElement)(\"input\", { classList: CLASSNAME });\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { classList, type } = editor;\r\n    if (classList) {\r\n        input.classList.add(...classList);\r\n    }\r\n    input.type = type || \"\";\r\n}\r\nclass InlineInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._input = createInputElement();\r\n        this._bindInputEvents();\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const input = this._input;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const input = this._input;\r\n        const handler = this._handler;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                input.classList.remove(...classList);\r\n            }\r\n        }\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        input.style.top = `${rect.top.toFixed()}px`;\r\n        input.style.left = `${rect.left.toFixed()}px`;\r\n        input.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(input);\r\n        setInputAttrs(editor, grid, input);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        this._activeData = { grid, col, row, editor };\r\n        this._beforePropEditor = editor;\r\n        const focus = () => {\r\n            input.focus();\r\n            const end = input.value.length;\r\n            try {\r\n                if (typeof input.selectionStart !== \"undefined\") {\r\n                    input.selectionStart = end;\r\n                    input.selectionEnd = end;\r\n                    return;\r\n                }\r\n            }\r\n            catch (e) {\r\n                //ignore\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            if (document.selection) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const range = input.createTextRange();\r\n                range.collapse();\r\n                range.moveEnd(\"character\", end);\r\n                range.moveStart(\"character\", end);\r\n                range.select();\r\n            }\r\n        };\r\n        handler.tryWithOffEvents(input, \"blur\", () => {\r\n            focus();\r\n        });\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const input = this._input;\r\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\r\n                var _a;\r\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\r\n            });\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n    }\r\n    doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        const { grid, col, row } = this._activeData;\r\n        grid.doChangeValue(col, row, () => value);\r\n    }\r\n    _isActive() {\r\n        const input = this._input;\r\n        if (!input || !input.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindInputEvents() {\r\n        const handler = this._handler;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(input, \"click\", stopPropagationOnly);\r\n        handler.on(input, \"mousedown\", stopPropagationOnly);\r\n        handler.on(input, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"dblclick\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n        });\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(e);\r\n            }\r\n        });\r\n        handler.on(input, \"blur\", (_e) => {\r\n            this.doChangeValue();\r\n            this.detach();\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        var _a;\r\n        if (!this._isActive() || this._attaching) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n            grid.onKeyDownMove(e);\r\n        }\r\n    }\r\n    _onKeydownTab(e) {\r\n        var _a;\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid } = this._activeData;\r\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\r\n            return;\r\n        }\r\n        this.doChangeValue();\r\n        this.detach(true);\r\n        grid.onKeyDownMove(e);\r\n    }\r\n}\r\nexports.InlineInputElement = InlineInputElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuEditor = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\r\nconst type_1 = require(\"../type\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nconst _ = (0, symbolManager_1.getInlineMenuEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value, record) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\nclass InlineMenuEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._classList = option.classList;\r\n        this._options = (0, menu_items_1.normalizeToFn)(option.options);\r\n    }\r\n    dispose() {\r\n        // noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    set options(options) {\r\n        this._options = (0, menu_items_1.normalizeToFn)(options);\r\n    }\r\n    clone() {\r\n        return new InlineMenuEditor(this);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachMenu(true);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n                const record = grid.getRowRecord(cell.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                attachMenu(grid, cell, this, value, record);\r\n            });\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\r\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\r\n                    return;\r\n                }\r\n                const sel = grid.selection.select;\r\n                if (!isTarget(sel.col, sel.row)) {\r\n                    return;\r\n                }\r\n                if (open({\r\n                    col: sel.col,\r\n                    row: sel.row,\r\n                })) {\r\n                    e.stopCellMoving();\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\r\n                detachMenu();\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\r\n                detachMenu(true);\r\n            }),\r\n            // mouse move\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"pointer\";\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                if (!grid.getElement().style.cursor) {\r\n                    grid.getElement().style.cursor = \"pointer\";\r\n                }\r\n            }),\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                grid.getElement().style.cursor = \"\";\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, e.row) ||\r\n                    (0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                    return;\r\n                }\r\n                const record = grid.getRowRecord(e.row);\r\n                if ((0, utils_1.isPromise)(record)) {\r\n                    return;\r\n                }\r\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\r\n                if (pasteOpt) {\r\n                    utils_1.event.cancel(e.event);\r\n                    (0, utils_1.then)(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\r\n                        const range = grid.getCellRange(e.col, e.row);\r\n                        grid.invalidateCellRange(range);\r\n                    });\r\n                }\r\n                else {\r\n                    grid.fireListeners(\"rejected_paste_values\", {\r\n                        detail: [\r\n                            {\r\n                                col: e.col,\r\n                                row: e.row,\r\n                                record,\r\n                                define: grid.getColumnDefine(e.col, e.row),\r\n                                pasteValue: e.normalizeValue,\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n        else {\r\n            // unknown\r\n            context.reject();\r\n        }\r\n    }\r\n    onDeleteCellRangeBox(grid, cell) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const record = grid.getRowRecord(cell.row);\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            return;\r\n        }\r\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\r\n        if (pasteOpt) {\r\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\r\n        }\r\n    }\r\n    _pasteDataToOptionValue(value, grid, cell, record) {\r\n        const options = this._options(record);\r\n        const pasteOpt = _textToOptionValue(value, options);\r\n        if (pasteOpt) {\r\n            return pasteOpt;\r\n        }\r\n        const columnType = grid.getColumnType(cell.col, cell.row);\r\n        if (hasOptions(columnType)) {\r\n            // Find with caption.\r\n            const pasteValue = normalizePasteValueStr(value);\r\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\r\n            if (captionOpt) {\r\n                return _textToOptionValue(captionOpt.value, options);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nexports.InlineMenuEditor = InlineMenuEditor;\r\nfunction _textToOptionValue(value, options) {\r\n    const pasteValue = normalizePasteValueStr(value);\r\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\r\n    if (pasteOpt) {\r\n        return pasteOpt;\r\n    }\r\n    return undefined;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction normalizePasteValueStr(value) {\r\n    if (value == null) {\r\n        return \"\";\r\n    }\r\n    return `${value}`.trim();\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction hasOptions(columnType) {\r\n    if (columnType instanceof type_1.MenuColumn) {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (Array.isArray(columnType.options)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineMenuElement = void 0;\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\r\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\r\nfunction findItemParents(target) {\r\n    let el = target;\r\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\r\n        el = el.parentElement;\r\n        if (!el || el.classList.contains(CLASSNAME)) {\r\n            return null;\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction createMenuElement() {\r\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\r\n    return (0, dom_1.createElement)(\"ul\", { classList: CLASSNAME });\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n    menu.style.top = `${rect.top.toFixed()}px`;\r\n    menu.style.left = `${rect.left.toFixed()}px`;\r\n    menu.style.width = `${rect.width.toFixed()}px`;\r\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\r\n    element.appendChild(menu);\r\n}\r\nfunction optionToLi({ classList, label, value, html }, index) {\r\n    const item = (0, dom_1.createElement)(\"li\", { classList: ITEM_CLASSNAME });\r\n    item.tabIndex = 0;\r\n    item.dataset.valueindex = `${index}`;\r\n    if (classList) {\r\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n    }\r\n    if (label) {\r\n        const span = (0, dom_1.createElement)(\"span\", { text: label });\r\n        item.appendChild(span);\r\n    }\r\n    else if (html) {\r\n        (0, dom_1.appendHtml)(item, html);\r\n    }\r\n    if (value === \"\" || value == null) {\r\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\r\n    }\r\n    return item;\r\n}\r\nfunction openMenu(grid, editor, col, row, value, options, menu) {\r\n    const { classList } = editor;\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.empty)(menu);\r\n    menu.style.font = grid.font || \"16px sans-serif\";\r\n    let emptyItemEl = null;\r\n    let valueItemEl = null;\r\n    options.forEach((option, i) => {\r\n        const item = optionToLi(option, i);\r\n        menu.appendChild(item);\r\n        if (option.value === value) {\r\n            valueItemEl = item;\r\n            item.dataset.select = \"select\";\r\n        }\r\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n            emptyItemEl = item;\r\n        }\r\n    });\r\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n    if (classList) {\r\n        menu.classList.add(...classList);\r\n    }\r\n    const children = Array.prototype.slice.call(menu.children, 0);\r\n    const focusIndex = children.indexOf(focusEl);\r\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n    // Cover the right line\r\n    rect.width++;\r\n    // append for calculation\r\n    attachElement(element, rect, menu);\r\n    // Make the selection item at the middle\r\n    let offset = 0;\r\n    let allHeight = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const { offsetHeight } = children[i];\r\n        if (i < focusIndex) {\r\n            offset += offsetHeight;\r\n        }\r\n        allHeight += offsetHeight;\r\n    }\r\n    rect.offsetTop(-offset);\r\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n    attachElement(element, rect, menu);\r\n    // Control not to overflow the screen range\r\n    const menuClientRect = menu.getBoundingClientRect();\r\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\r\n    const orgMenuTop = menuClientRect.top - scaleDiff;\r\n    let menuTop = orgMenuTop;\r\n    const menuBottom = menuTop + allHeight;\r\n    const winBottom = window.innerHeight;\r\n    const winMargin = 20;\r\n    if (menuBottom > winBottom - winMargin) {\r\n        const diff = menuBottom - winBottom + winMargin;\r\n        menuTop -= diff;\r\n    }\r\n    if (menuTop < 0 /*winTop*/ + winMargin) {\r\n        menuTop = winMargin;\r\n    }\r\n    if (menuTop !== orgMenuTop) {\r\n        rect.offsetTop(-(orgMenuTop - menuTop));\r\n        // re update\r\n        attachElement(element, rect, menu);\r\n    }\r\n    if (focusEl) {\r\n        focusEl.focus();\r\n    }\r\n    menu.classList.remove(HIDDEN_CLASSNAME);\r\n    menu.classList.add(SHOWN_CLASSNAME);\r\n}\r\nfunction closeMenu(_grid, _col, _row, menu) {\r\n    menu.classList.remove(SHOWN_CLASSNAME);\r\n    menu.classList.add(HIDDEN_CLASSNAME);\r\n    (0, dom_1.disableFocus)(menu);\r\n}\r\nclass InlineMenuElement {\r\n    constructor() {\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        this._menu = createMenuElement();\r\n        this._bindMenuEvents();\r\n        let bodyClickListenerId;\r\n        const deregisterBodyClickListener = (this._deregisterBodyClickListener =\r\n            () => handler.off(bodyClickListenerId));\r\n        this._registerBodyClickListener = () => {\r\n            deregisterBodyClickListener();\r\n            bodyClickListenerId = handler.on(document.body, \"click\", this._onBodyClick.bind(this), { capture: true });\r\n        };\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const menu = this._menu;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._menu;\r\n        this._beforePropEditor = null;\r\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\r\n    }\r\n    attach(grid, editor, col, row, value, record) {\r\n        const menu = this._menu;\r\n        if (this._beforePropEditor) {\r\n            const { classList } = this._beforePropEditor;\r\n            if (classList) {\r\n                menu.classList.remove(...classList);\r\n            }\r\n        }\r\n        const options = editor.options(record);\r\n        openMenu(grid, editor, col, row, value, options, menu);\r\n        this._activeData = { grid, col, row, editor, options };\r\n        this._beforePropEditor = editor;\r\n        this._registerBodyClickListener();\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const { grid, col, row } = this._activeData;\r\n            const menu = this._menu;\r\n            closeMenu(grid, col, row, menu);\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._deregisterBodyClickListener();\r\n    }\r\n    _doChangeValue(valueindex) {\r\n        if (!this._isActive()) {\r\n            return;\r\n        }\r\n        const { grid, col, row, options } = this._activeData;\r\n        const option = options[Number(valueindex)];\r\n        if (option) {\r\n            const { value } = option;\r\n            grid.doChangeValue(col, row, () => value);\r\n        }\r\n    }\r\n    _isActive() {\r\n        const menu = this._menu;\r\n        if (!menu || !menu.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindMenuEvents() {\r\n        const handler = this._handler;\r\n        const menu = this._menu;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\r\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\r\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\r\n        handler.on(menu, \"click\", (e) => {\r\n            e.stopPropagation();\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const { valueindex } = item.dataset;\r\n            this._doChangeValue(valueindex || \"\");\r\n            this.detach(true);\r\n        });\r\n        handler.on(menu, \"keydown\", (e) => {\r\n            const item = findItemParents(e.target);\r\n            if (!item) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(menu, item, e);\r\n            }\r\n            else if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_UP) {\r\n                const n = (0, dom_1.findPrevSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_DOWN) {\r\n                const n = (0, dom_1.findNextSiblingFocusable)(item);\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n            else if (keyCode === KEY_TAB) {\r\n                this._onKeydownTab(menu, item, e);\r\n            }\r\n        });\r\n    }\r\n    _onBodyClick(e) {\r\n        const el = e.target;\r\n        if (!el) {\r\n            return;\r\n        }\r\n        if (this._menu.contains(el)) {\r\n            return;\r\n        }\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if (grid.getElement().contains(el)) {\r\n                return;\r\n            }\r\n        }\r\n        this.detach();\r\n    }\r\n    _onKeydownEnter(_menu, item, e) {\r\n        var _a;\r\n        const grid = this._isActive() ? this._activeData.grid : null;\r\n        const { valueindex } = item.dataset;\r\n        this._doChangeValue(valueindex || \"\");\r\n        this.detach(true);\r\n        utils_1.event.cancel(e);\r\n        if (grid) {\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                grid.onKeyDownMove(e);\r\n            }\r\n        }\r\n    }\r\n    _onKeydownTab(menu, item, e) {\r\n        var _a;\r\n        if (this._isActive()) {\r\n            const { grid } = this._activeData;\r\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\r\n                const { valueindex } = item.dataset;\r\n                this._doChangeValue(valueindex || \"\");\r\n                this.detach(true);\r\n                grid.onKeyDownMove(e);\r\n                return;\r\n            }\r\n        }\r\n        if (!e.shiftKey) {\r\n            if (!(0, dom_1.findNextSiblingFocusable)(item)) {\r\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findNextSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!(0, dom_1.findPrevSiblingFocusable)(item)) {\r\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\r\n                let n = items[items.length - 1];\r\n                if (!(0, dom_1.isFocusable)(n)) {\r\n                    n = (0, dom_1.findPrevSiblingFocusable)(n);\r\n                }\r\n                if (n) {\r\n                    n.focus();\r\n                    utils_1.event.cancel(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.InlineMenuElement = InlineMenuElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./InlineMenuElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{-webkit-transform:scale(.9);transform:scale(.9);-webkit-box-shadow:none;box-shadow:none;opacity:0;pointer-events:none;-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{-webkit-transform:translateY(-7px);transform:translateY(-7px);-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;-webkit-transition:all .15s ease-out;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;-webkit-transition:opacity 15ms linear;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst _ = (0, symbolManager_1.getBranchGraphColumnStateId)();\r\nfunction getAllColumnData(grid, field, callback) {\r\n    const { dataSource } = grid;\r\n    const allData = [];\r\n    let promise;\r\n    for (let index = 0; index < dataSource.length; index++) {\r\n        const data = dataSource.getField(index, field);\r\n        if ((0, utils_1.isPromise)(data)) {\r\n            const dataIndex = allData.length;\r\n            allData.push(undefined);\r\n            if (!promise) {\r\n                promise = data.then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n            else {\r\n                promise = promise\r\n                    .then(() => data)\r\n                    .then((d) => {\r\n                    allData[dataIndex] = d;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            allData.push(data);\r\n        }\r\n    }\r\n    if (promise) {\r\n        promise.then(() => callback(allData));\r\n    }\r\n    else {\r\n        callback(allData);\r\n    }\r\n}\r\nclass BranchLine {\r\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\r\n        this.fromIndex = fromIndex;\r\n        this.toIndex = toIndex;\r\n        this.colorIndex = colorIndex;\r\n        this.point = point;\r\n    }\r\n}\r\nclass BranchPoint {\r\n    constructor({ index, commit = false, lines = [], tag, }) {\r\n        this.index = index;\r\n        this.commit = commit;\r\n        this.lines = lines;\r\n        this.tag = tag;\r\n    }\r\n    static mergeLines(lines) {\r\n        const result = lines.filter((l) => l.fromIndex != null && l.toIndex != null);\r\n        const froms = lines.filter((l) => l.fromIndex != null && l.toIndex == null);\r\n        const tos = lines.filter((l) => l.fromIndex == null && l.toIndex != null);\r\n        froms.forEach((f) => {\r\n            for (let i = 0; i < tos.length; i++) {\r\n                const t = tos[i];\r\n                if (t.point) {\r\n                    continue;\r\n                }\r\n                if (f.colorIndex === t.colorIndex) {\r\n                    f.toIndex = t.toIndex;\r\n                    tos.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            result.push(f);\r\n        });\r\n        return result.concat(tos);\r\n    }\r\n    static merge(a, b) {\r\n        if (!a) {\r\n            return b;\r\n        }\r\n        return new BranchPoint({\r\n            index: a.index,\r\n            commit: a.commit || b.commit,\r\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n            tag: a.tag || b.tag,\r\n        });\r\n    }\r\n}\r\nfunction joinLine(timeline, branchIndex) {\r\n    const reverse = [...timeline].reverse();\r\n    for (let i = 0; i < reverse.length; i++) {\r\n        const f = reverse[i][branchIndex];\r\n        if (f) {\r\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\r\n                new BranchLine({\r\n                    toIndex: branchIndex,\r\n                    colorIndex: branchIndex,\r\n                }),\r\n            ]));\r\n            for (let j = 0; j < i; j++) {\r\n                const tl = reverse[j];\r\n                tl[branchIndex] = new BranchPoint({\r\n                    index: branchIndex,\r\n                    lines: [\r\n                        new BranchLine({\r\n                            fromIndex: branchIndex,\r\n                            toIndex: branchIndex,\r\n                            colorIndex: branchIndex,\r\n                        }),\r\n                    ],\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction branch({ timeline, branches }, from, to) {\r\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\r\n    let toIndex = branches.indexOf(to);\r\n    if (toIndex < 0) {\r\n        toIndex = branches.length;\r\n        branches.push(to);\r\n    }\r\n    function findBranchRootIndex() {\r\n        for (let index = timeline.length - 1; index >= 0; index--) {\r\n            const tl = timeline[index];\r\n            const from = tl[fromIndex];\r\n            if (from && from.commit) {\r\n                return index;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    if (fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n        });\r\n    }\r\n    else {\r\n        const fromTargetIndex = findBranchRootIndex();\r\n        if (fromTargetIndex === -1) {\r\n            return null;\r\n        }\r\n        const branchTargetFromIndex = fromTargetIndex + 1;\r\n        const branchPoint = new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    fromIndex,\r\n                    colorIndex: toIndex,\r\n                }),\r\n            ],\r\n        });\r\n        let point;\r\n        let result = null;\r\n        if (branchTargetFromIndex < timeline.length) {\r\n            const targetLine = timeline[branchTargetFromIndex];\r\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n        }\r\n        else {\r\n            point = branchPoint;\r\n            result = branchPoint;\r\n        }\r\n        const from = timeline[fromTargetIndex][fromIndex];\r\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\r\n            new BranchLine({\r\n                toIndex,\r\n                colorIndex: toIndex,\r\n                point,\r\n            }),\r\n        ]));\r\n        return result;\r\n    }\r\n}\r\nfunction commit({ timeline, branches }, name) {\r\n    const index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        return null;\r\n    }\r\n    const result = new BranchPoint({\r\n        index,\r\n        commit: true,\r\n    });\r\n    if (joinLine(timeline, index)) {\r\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\r\n            new BranchLine({\r\n                fromIndex: index,\r\n                colorIndex: index,\r\n            }),\r\n        ]));\r\n    }\r\n    return result;\r\n}\r\nfunction commitTag({ branches }, name, tag) {\r\n    let index = branches.indexOf(name);\r\n    if (index < 0) {\r\n        index = branches.length;\r\n        branches.push(name);\r\n    }\r\n    return new BranchPoint({\r\n        index,\r\n        tag,\r\n    });\r\n}\r\nfunction commitMerge({ timeline, branches }, from, to) {\r\n    const fromIndex = branches.indexOf(from);\r\n    const toIndex = branches.indexOf(to);\r\n    if (toIndex < 0 || fromIndex < 0) {\r\n        return new BranchPoint({\r\n            index: toIndex,\r\n            commit: true,\r\n        });\r\n    }\r\n    const result = new BranchPoint({\r\n        index: toIndex,\r\n        commit: true,\r\n        lines: [\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n            new BranchLine({\r\n                fromIndex: toIndex,\r\n                colorIndex: toIndex,\r\n            }),\r\n        ],\r\n    });\r\n    const froms = [...timeline];\r\n    const fromTargetLine = froms.pop();\r\n    if (fromTargetLine) {\r\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n            index: toIndex,\r\n            lines: [\r\n                new BranchLine({\r\n                    toIndex,\r\n                    colorIndex: fromIndex,\r\n                }),\r\n            ],\r\n        }));\r\n    }\r\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\r\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\r\n            new BranchLine({\r\n                fromIndex,\r\n                colorIndex: fromIndex,\r\n            }),\r\n        ]));\r\n    }\r\n    joinLine(timeline, toIndex);\r\n    return result;\r\n}\r\nfunction calcCommand(info, command) {\r\n    const { timeline } = info;\r\n    const timelineData = [];\r\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n    const commands = Array.isArray(command) ? command : [command];\r\n    commands.forEach((cmd) => {\r\n        if (!cmd) {\r\n            return;\r\n        }\r\n        let point;\r\n        if (cmd.command === \"branch\") {\r\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\r\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n            point = branch(info, from, to);\r\n        }\r\n        else if (cmd.command === \"commit\") {\r\n            const { branch } = cmd;\r\n            point = commit(info, branch);\r\n        }\r\n        else if (cmd.command === \"merge\") {\r\n            const { from, to } = cmd.branch;\r\n            point = commitMerge(info, from, to);\r\n        }\r\n        else if (cmd.command === \"tag\") {\r\n            const { branch, tag } = cmd;\r\n            point = commitTag(info, branch, tag);\r\n        }\r\n        if (point && point.index > -1) {\r\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n        }\r\n    });\r\n    timeline.push(timelineData);\r\n}\r\nfunction calcBranchesInfo(start, grid, field) {\r\n    const result = {\r\n        branches: [],\r\n        timeline: [],\r\n    };\r\n    getAllColumnData(grid, field, (data) => {\r\n        if (start !== \"top\") {\r\n            data = [...data].reverse();\r\n        }\r\n        data.forEach((command) => {\r\n            calcCommand(result, command);\r\n        });\r\n    });\r\n    return result;\r\n}\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n    let w = Math.max(width / branches.length + 1, 5);\r\n    timeline.forEach((tl) => {\r\n        tl.forEach((p, index) => {\r\n            if (index <= 0) {\r\n                // \r\n                return;\r\n            }\r\n            if (p.tag) {\r\n                const textWidth = ctx.measureText(p.tag).width;\r\n                if (w * index + radius * 2 + 4 + textWidth > width) {\r\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    const result = [];\r\n    let x = left;\r\n    branches.forEach(() => {\r\n        result.push(Math.ceil(x + radius));\r\n        x += w;\r\n    });\r\n    return result;\r\n}\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \r\n// margin,\r\nbranchColors, branchLineWidth, mergeStyle, }, { \r\n// width,\r\ncol, row, branches, }) {\r\n    if (upLineIndex != null || downLineIndex != null) {\r\n        ctx.strokeStyle = (0, utils_1.getOrApply)(branchColors, branches[colorIndex], colorIndex);\r\n        ctx.lineWidth = branchLineWidth;\r\n        ctx.lineCap = \"round\";\r\n        ctx.beginPath();\r\n        if (upLineIndex != null) {\r\n            const upX = branchXPoints[upLineIndex];\r\n            const upRect = grid.getCellRelativeRect(col, row - 1);\r\n            const upY = upRect.top + upRect.height / 2;\r\n            ctx.moveTo(upX, upY);\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\r\n            }\r\n            else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        else {\r\n            ctx.moveTo(x, y);\r\n        }\r\n        if (downLineIndex != null) {\r\n            const downX = branchXPoints[downLineIndex];\r\n            const downRect = grid.getCellRelativeRect(col, row + 1);\r\n            const downY = downRect.top + downRect.height / 2;\r\n            if (mergeStyle === \"bezier\") {\r\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\r\n            }\r\n            else {\r\n                ctx.lineTo(downX, downY);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n * BranchGraphColumn\r\n *\r\n * Data commands\r\n * - mastar branch or orphan branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * ```\r\n *\r\n * - commit\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * ```\r\n *\r\n * - branch\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - merge\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * ```\r\n *\r\n * - tag\r\n *\r\n * ```js\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * ```\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._start = option.start || \"bottom\";\r\n        this._cache = option.cache != null ? option.cache : false;\r\n    }\r\n    get StyleClass() {\r\n        return BranchGraphStyle_1.BranchGraphStyle;\r\n    }\r\n    clearCache(grid) {\r\n        delete grid[_];\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        if (this._cache) {\r\n            const state = grid[_] || (grid[_] = new Map());\r\n            const { col, row } = context;\r\n            const field = grid.getField(col, row);\r\n            if (!state.has(field)) {\r\n                state.set(field, calcBranchesInfo(this._start, grid, field));\r\n            }\r\n        }\r\n        return super.onDrawCell(cellValue, info, context, grid);\r\n    }\r\n    clone() {\r\n        return new BranchGraphColumn(this);\r\n    }\r\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a, _b;\r\n        const { col, row } = context;\r\n        const field = grid.getField(col, row);\r\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\r\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\r\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\r\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\r\n        const data = this._start !== \"top\"\r\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\r\n            : timeline[row - grid.frozenRowCount];\r\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const rect = context.getRect();\r\n        const radius = circleSize / 2;\r\n        const width = rect.width - margin * 2;\r\n        helper.drawWithClip(context, (ctx) => {\r\n            ctx.textAlign = \"left\";\r\n            ctx.textBaseline = \"middle\";\r\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n            const y = rect.top + rect.height / 2;\r\n            // draw join lines\r\n            data\r\n                .map((point, index) => point\r\n                ? point.lines.map((line) => ({\r\n                    colorIndex: line.colorIndex,\r\n                    upLineIndex: line[upLineIndexKey],\r\n                    downLineIndex: line[downLineIndexKey],\r\n                    pointIndex: index,\r\n                }))\r\n                : [])\r\n                .reduce((p, c) => p.concat(c), []) // flatMap\r\n                // order of overlap\r\n                .sort((a, b) => b.colorIndex - a.colorIndex)\r\n                .forEach((line) => {\r\n                const x = branchXPoints[line.pointIndex];\r\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n                    margin,\r\n                    branchXPoints,\r\n                    branchLineWidth,\r\n                    branchColors,\r\n                    mergeStyle,\r\n                }, {\r\n                    width,\r\n                    col,\r\n                    row,\r\n                    branches,\r\n                });\r\n            });\r\n            // draw commit points\r\n            data.forEach((p, index) => {\r\n                if (p && p.commit) {\r\n                    const x = branchXPoints[index];\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.beginPath();\r\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n                    ctx.fill();\r\n                    ctx.closePath();\r\n                }\r\n            });\r\n            // draw tags\r\n            data.forEach((p, index) => {\r\n                if (p && p.tag) {\r\n                    ctx.fillStyle = (0, utils_1.getOrApply)(branchColors, branches[index], index);\r\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.BranchGraphColumn = BranchGraphColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDrawIndicator = void 0;\r\nconst triangle_1 = require(\"./triangle\");\r\nfunction getDrawIndicator(indicatorStyle) {\r\n    const { style } = indicatorStyle;\r\n    if (style === \"triangle\") {\r\n        return triangle_1.drawTriangleIndicator;\r\n    }\r\n    return null;\r\n}\r\nexports.getDrawIndicator = getDrawIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.drawTriangleIndicator = void 0;\r\nconst KIND_PROCESS_MAP = {\r\n    [0 /* DrawIndicatorKind.topLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseLeft, baseTop);\r\n            ctx.lineTo(baseLeft + size, baseTop);\r\n            ctx.lineTo(baseLeft, baseTop + size);\r\n        },\r\n    },\r\n    [1 /* DrawIndicatorKind.topRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.topRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.topRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseTop = rect.top + 1;\r\n            ctx.moveTo(baseRight, baseTop);\r\n            ctx.lineTo(baseRight - size, baseTop);\r\n            ctx.lineTo(baseRight, baseTop + size);\r\n        },\r\n    },\r\n    [2 /* DrawIndicatorKind.bottomRight */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomRightColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomRightSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseRight = rect.right - 2;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseRight, baseBottom);\r\n            ctx.lineTo(baseRight - size, baseBottom);\r\n            ctx.lineTo(baseRight, baseBottom - size);\r\n        },\r\n    },\r\n    [3 /* DrawIndicatorKind.bottomLeft */]: {\r\n        themeColor(helper) {\r\n            return helper.theme.indicators.bottomLeftColor;\r\n        },\r\n        themeSize(helper) {\r\n            return helper.theme.indicators.bottomLeftSize;\r\n        },\r\n        drawPath(ctx, rect, size) {\r\n            const baseLeft = rect.left + 1;\r\n            const baseBottom = rect.bottom - 2;\r\n            ctx.moveTo(baseLeft, baseBottom);\r\n            ctx.lineTo(baseLeft + size, baseBottom);\r\n            ctx.lineTo(baseLeft, baseBottom - size);\r\n        },\r\n    },\r\n};\r\nfunction drawTriangleIndicator(context, style, kind, helper) {\r\n    const process = KIND_PROCESS_MAP[kind];\r\n    if (!process) {\r\n        return;\r\n    }\r\n    helper.drawBorderWithClip(context, (ctx) => {\r\n        const rect = context.getRect();\r\n        const color = style.color ||\r\n            helper.getColor(process.themeColor(helper), context.col, context.row, ctx);\r\n        const size = (style.size && Number(style.size)) ||\r\n            process.themeSize(helper) ||\r\n            rect.height / 6;\r\n        // draw triangle\r\n        ctx.fillStyle = color;\r\n        ctx.beginPath();\r\n        process.drawPath(ctx, rect, size);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    });\r\n}\r\nexports.drawTriangleIndicator = drawTriangleIndicator;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BranchGraphStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\r\n    switch (index % 3) {\r\n        case 0:\r\n            return \"#979797\";\r\n        case 1:\r\n            return \"#008fb5\";\r\n        case 2:\r\n            return \"#f1c109\";\r\n        default:\r\n    }\r\n    return \"#979797\";\r\n};\r\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle\r\n            ? defaultStyle\r\n            : (defaultStyle = new BranchGraphStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n        this._margin = style.margin || 4;\r\n        this._circleSize = style.circleSize || 16;\r\n        this._branchLineWidth = style.branchLineWidth || 4;\r\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\r\n    }\r\n    get branchColors() {\r\n        return this._branchColors;\r\n    }\r\n    set branchColors(branchColors) {\r\n        this._branchColors = branchColors;\r\n        this.doChangeStyle();\r\n    }\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n    set margin(margin) {\r\n        this._margin = margin;\r\n        this.doChangeStyle();\r\n    }\r\n    get circleSize() {\r\n        return this._circleSize;\r\n    }\r\n    set circleSize(circleSize) {\r\n        this._circleSize = circleSize;\r\n        this.doChangeStyle();\r\n    }\r\n    get branchLineWidth() {\r\n        return this._branchLineWidth;\r\n    }\r\n    set branchLineWidth(branchLineWidth) {\r\n        this._branchLineWidth = branchLineWidth;\r\n        this.doChangeStyle();\r\n    }\r\n    get mergeStyle() {\r\n        return this._mergeStyle;\r\n    }\r\n    set mergeStyle(mergeStyle) {\r\n        this._mergeStyle = mergeStyle;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new BranchGraphStyle(this);\r\n    }\r\n}\r\nexports.BranchGraphStyle = BranchGraphStyle;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\r\nconst Column_1 = require(\"./Column\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst BUTTON_COLUMN_STATE_ID = (0, symbolManager_1.getButtonColumnStateId)();\r\nclass ButtonColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._caption = option.caption;\r\n    }\r\n    get StyleClass() {\r\n        return ButtonStyle_1.ButtonStyle;\r\n    }\r\n    get caption() {\r\n        return this._caption;\r\n    }\r\n    withCaption(caption) {\r\n        const c = this.clone();\r\n        c._caption = caption;\r\n        return c;\r\n    }\r\n    clone() {\r\n        return new ButtonColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return this._caption || super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._caption || value;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        let active = false;\r\n        const state = grid[BUTTON_COLUMN_STATE_ID];\r\n        if (state) {\r\n            if (state.mouseActiveCell &&\r\n                (0, utils_1.cellInRange)(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\r\n                active = true;\r\n            }\r\n            else {\r\n                const { select } = context.getSelection();\r\n                if ((0, utils_1.cellInRange)(range, select.col, select.row)) {\r\n                    active = true;\r\n                }\r\n            }\r\n        }\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.button(textValue, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                bgColor: buttonBgColor,\r\n                color,\r\n                font,\r\n                padding,\r\n                shadow: active\r\n                    ? {\r\n                        color: \"rgba(0, 0, 0, 0.48)\",\r\n                        blur: 6,\r\n                        offsetY: 3,\r\n                    }\r\n                    : {},\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.ButtonColumn = ButtonColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst CHECK_COLUMN_STATE_ID = (0, symbolManager_1.getCheckColumnStateId)();\r\nclass CheckColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return CheckStyle_1.CheckStyle;\r\n    }\r\n    clone() {\r\n        return new CheckColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.checkbox(value, context, opt);\r\n    }\r\n}\r\nexports.CheckColumn = CheckColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IconColumn = void 0;\r\nconst icons = __importStar(require(\"../../internal/icons\"));\r\nconst Column_1 = require(\"./Column\");\r\nconst IconStyle_1 = require(\"../style/IconStyle\");\r\nfunction repeatArray(val, count) {\r\n    if (count === Infinity) {\r\n        count = 0;\r\n    }\r\n    const a = [];\r\n    for (let i = 0; i < count; i++) {\r\n        a.push(val);\r\n    }\r\n    return a;\r\n}\r\nclass IconColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._tagName = option.tagName || \"i\";\r\n        this._className = option.className;\r\n        this._content = option.content;\r\n        this._name = option.name;\r\n        this._iconWidth = option.iconWidth;\r\n    }\r\n    get StyleClass() {\r\n        return IconStyle_1.IconStyle;\r\n    }\r\n    clone() {\r\n        return new IconColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        const num = Number(value);\r\n        if (!isNaN(num)) {\r\n            const icon = {};\r\n            icons.iconPropKeys.forEach((k) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                icon[k] = style[k];\r\n            });\r\n            icon.className = this._className;\r\n            icon.tagName = this._tagName;\r\n            if (this._content) {\r\n                icon.content = this._content;\r\n            }\r\n            icon.name = this._name;\r\n            if (this._iconWidth) {\r\n                icon.width = this._iconWidth;\r\n            }\r\n            info.getIcon = () => repeatArray(icon, num);\r\n        }\r\n        else {\r\n            info.getIcon = () => null;\r\n        }\r\n        super.drawInternal(\"\", context, style, helper, grid, info);\r\n    }\r\n}\r\nexports.IconColumn = IconColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nconst imgs_1 = require(\"../../internal/imgs\");\r\nconst MAX_LRU_CACHE_SIZE = 50;\r\nfunction getImage(url) {\r\n    return (0, imgs_1.getCacheOrLoad)(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\r\n}\r\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n    let newWidth = width;\r\n    let newHeight = height;\r\n    if (newWidth > maxWidth) {\r\n        newWidth = maxWidth;\r\n        newHeight = (newWidth * height) / width;\r\n    }\r\n    if (newHeight > maxHeight) {\r\n        newHeight = maxHeight;\r\n        newWidth = (newHeight * width) / height;\r\n    }\r\n    return {\r\n        width: newWidth,\r\n        height: newHeight,\r\n    };\r\n}\r\nclass ImageColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return ImageStyle_1.ImageStyle;\r\n    }\r\n    onDrawCell(cellValue, info, context, grid) {\r\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\r\n    }\r\n    clone() {\r\n        return new ImageColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\r\n        if (value) {\r\n            const { textAlign, textBaseline, margin, bgColor } = style;\r\n            if (bgColor) {\r\n                drawCellBase({\r\n                    bgColor,\r\n                });\r\n            }\r\n            helper.drawWithClip(context, (ctx) => {\r\n                ctx.textAlign = textAlign;\r\n                ctx.textBaseline = textBaseline;\r\n                const rect = context.getRect();\r\n                if (style.imageSizing === \"keep-aspect-ratio\") {\r\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\r\n                    const pos = (0, canvases_1.calcStartPosition)(ctx, rect, width, height, {\r\n                        offset: margin,\r\n                    });\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\r\n                }\r\n                else {\r\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ImageColumn = ImageColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LRUCache = void 0;\r\nclass LRUCache {\r\n    constructor(cacheSize) {\r\n        this._list = [];\r\n        this._map = {};\r\n        this._cacheSize = cacheSize || 50;\r\n    }\r\n    get(key) {\r\n        const val = this._map[key];\r\n        if (val) {\r\n            const list = this._list;\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n            list.push(key);\r\n        }\r\n        return val;\r\n    }\r\n    put(key, value) {\r\n        const list = this._list;\r\n        const map = this._map;\r\n        if (map[key]) {\r\n            const idx = list.indexOf(key);\r\n            list.splice(idx, 1);\r\n        }\r\n        map[key] = value;\r\n        list.push(key);\r\n        if (list.length > this._cacheSize) {\r\n            const remKey = list.shift() || \"\";\r\n            delete map[remKey];\r\n        }\r\n    }\r\n}\r\nexports.LRUCache = LRUCache;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\r\nconst menu_items_1 = require(\"../../internal/menu-items\");\r\nclass MenuColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._options = (0, menu_items_1.normalize)(option.options);\r\n    }\r\n    get StyleClass() {\r\n        return MenuStyle_1.MenuStyle;\r\n    }\r\n    clone() {\r\n        return new MenuColumn(this);\r\n    }\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    withOptions(options) {\r\n        const c = this.clone();\r\n        c._options = (0, menu_items_1.normalize)(options);\r\n        return c;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\r\n        let { color } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const convertedValue = this._convertInternal(value);\r\n        const text = convertedValue != null ? String(convertedValue) : \"\";\r\n        helper.testFontLoad(font, text, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\r\n            const textPadding = basePadding.slice(0);\r\n            textPadding[1] += 26; // icon padding\r\n            const iconPadding = basePadding.slice(0);\r\n            iconPadding[1] += 8;\r\n            if (color == null && (value == null || value === \"\")) {\r\n                color = \"rgba(0, 0, 0, .38)\";\r\n            }\r\n            helper.text(text, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding: textPadding,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n            if (appearance === \"menulist-button\") {\r\n                // draw dropdown arrow icon\r\n                helper.text(\"\", context, {\r\n                    textAlign: \"right\",\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    icons: [\r\n                        {\r\n                            path: \"M0 2 5 7 10 2z\",\r\n                            width: 10,\r\n                            color: \"rgba(0, 0, 0, .54)\",\r\n                        },\r\n                    ],\r\n                    padding: iconPadding,\r\n                });\r\n            }\r\n            else if (appearance !== \"none\") {\r\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n                console.warn(`unsupported appearance:${appearance}`);\r\n            }\r\n        });\r\n    }\r\n    convertInternal(value) {\r\n        return value;\r\n    }\r\n    _convertInternal(value) {\r\n        const options = this._options;\r\n        for (let i = 0; i < options.length; i++) {\r\n            const option = options[i];\r\n            if (option.value === value) {\r\n                value = option.label;\r\n                break;\r\n            }\r\n        }\r\n        return super.convertInternal(value);\r\n    }\r\n    getCopyCellValue(value) {\r\n        return this._convertInternal(value);\r\n    }\r\n}\r\nexports.MenuColumn = MenuColumn;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextColumn = void 0;\r\nconst utils = __importStar(require(\"./columnUtils\"));\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\r\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\r\n    constructor(option = {}) {\r\n        super(option);\r\n    }\r\n    get StyleClass() {\r\n        return MultilineTextStyle_1.MultilineTextStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextColumn = MultilineTextColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberColumn = void 0;\r\nconst Column_1 = require(\"./Column\");\r\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\r\nlet defaultFotmat;\r\nclass NumberColumn extends Column_1.Column {\r\n    static get defaultFotmat() {\r\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n    }\r\n    static set defaultFotmat(fmt) {\r\n        defaultFotmat = fmt;\r\n    }\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._format = option.format;\r\n    }\r\n    get StyleClass() {\r\n        return NumberStyle_1.NumberStyle;\r\n    }\r\n    clone() {\r\n        return new NumberColumn(this);\r\n    }\r\n    get format() {\r\n        return this._format;\r\n    }\r\n    withFormat(format) {\r\n        const c = this.clone();\r\n        c._format = format;\r\n        return c;\r\n    }\r\n    convertInternal(value) {\r\n        const num = Number(value);\r\n        if (isNaN(num)) {\r\n            const convertedValue = super.convertInternal(value);\r\n            return convertedValue != null ? String(convertedValue) : \"\";\r\n        }\r\n        const format = this._format || NumberColumn.defaultFotmat;\r\n        return format.format(num);\r\n    }\r\n}\r\nexports.NumberColumn = NumberColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PercentCompleteBarColumn = void 0;\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst Column_1 = require(\"./Column\");\r\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\r\nconst MARGIN = 2;\r\nclass PercentCompleteBarColumn extends Column_1.Column {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._min = option.min || 0;\r\n        this._max = option.max || this._min + 100;\r\n        this._formatter = option.formatter || ((v) => v);\r\n    }\r\n    get StyleClass() {\r\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\r\n    }\r\n    clone() {\r\n        return new PercentCompleteBarColumn(this);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, info) {\r\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n        const { barColor, barBgColor, barHeight } = style;\r\n        let textValue = value != null ? String(value) : \"\";\r\n        if (utils_1.str.endsWith(textValue, \"%\")) {\r\n            textValue = textValue.slice(0, -1);\r\n        }\r\n        const num = Number(textValue);\r\n        if (isNaN(num)) {\r\n            return;\r\n        }\r\n        const rate = num < this._min\r\n            ? 0\r\n            : num > this._max\r\n                ? 1\r\n                : (num - this._min) / (this._max - this._min);\r\n        helper.drawWithClip(context, (ctx) => {\r\n            const rect = context.getRect();\r\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\r\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\r\n            const barLeft = rect.left + MARGIN;\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barBgColor, rate * 100) || \"#f0f3f5\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n            ctx.fill();\r\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n            ctx.fillStyle = (0, utils_1.getOrApply)(barColor, rate * 100) || \"#20a8d8\";\r\n            ctx.beginPath();\r\n            ctx.rect(barLeft, barTop, barSize, barHeight);\r\n            ctx.fill();\r\n        });\r\n    }\r\n}\r\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioColumn = void 0;\r\nconst BaseColumn_1 = require(\"./BaseColumn\");\r\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioColumn extends BaseColumn_1.BaseColumn {\r\n    get StyleClass() {\r\n        return RadioStyle_1.RadioStyle;\r\n    }\r\n    clone() {\r\n        return new RadioColumn(this);\r\n    }\r\n    convertInternal(value) {\r\n        return (0, utils_1.toBoolean)(value);\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\r\n        var _a;\r\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            checkColor,\r\n            uncheckBorderColor,\r\n            checkBorderColor,\r\n            uncheckBgColor,\r\n            checkBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        helper.radioButton(value, context, opt);\r\n    }\r\n}\r\nexports.RadioColumn = RadioColumn;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RadioEditor = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\r\nconst Editor_1 = require(\"./Editor\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_2 = require(\"../utils\");\r\nconst RADIO_COLUMN_STATE_ID = (0, symbolManager_1.getRadioColumnStateId)();\r\nclass RadioEditor extends Editor_1.Editor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._group = option.group;\r\n        this._checkAction = option.checkAction;\r\n    }\r\n    clone() {\r\n        return new RadioEditor(this);\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    get group() {\r\n        return this._group;\r\n    }\r\n    /** @deprecated Use checkAction instead. */\r\n    set group(group) {\r\n        this._group = group;\r\n    }\r\n    get checkAction() {\r\n        return this._checkAction;\r\n    }\r\n    set checkAction(checkAction) {\r\n        this._checkAction = checkAction;\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        let _state = grid[RADIO_COLUMN_STATE_ID];\r\n        if (!_state) {\r\n            _state = { block: {}, elapsed: {} };\r\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\r\n        }\r\n        const state = _state;\r\n        const action = (cell) => {\r\n            this._action(grid, cell);\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if ((0, action_utils_1.isDisabledRecord)(this.disabled, grid, e.row)) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n            // paste value\r\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n                if (e.multi) {\r\n                    // ignore multi cell values\r\n                    return;\r\n                }\r\n                const selectionRange = grid.selection.range;\r\n                if (!(0, utils_1.cellEquals)(selectionRange.start, selectionRange.end)) {\r\n                    // ignore multi paste values\r\n                    return;\r\n                }\r\n                if (!isTarget(e.col, e.row)) {\r\n                    return;\r\n                }\r\n                utils_1.event.cancel(e.event);\r\n                const pasteValue = e.normalizeValue.trim();\r\n                if (isRejectValue(pasteValue)) {\r\n                    // Not a boolean\r\n                    const record = grid.getRowRecord(e.row);\r\n                    if (!(0, utils_1.isPromise)(record)) {\r\n                        grid.fireListeners(\"rejected_paste_values\", {\r\n                            detail: [\r\n                                {\r\n                                    col: e.col,\r\n                                    row: e.row,\r\n                                    record,\r\n                                    define: grid.getColumnDefine(e.col, e.row),\r\n                                    pasteValue,\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n                    return;\r\n                }\r\n                action({\r\n                    col: e.col,\r\n                    row: e.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n    onPasteCellRangeBox(grid, cell, value, context) {\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n            return;\r\n        }\r\n        const pasteValue = value.trim();\r\n        if (isRejectValue(pasteValue)) {\r\n            // Not a boolean\r\n            context.reject();\r\n            return;\r\n        }\r\n        if (!(0, utils_2.toBoolean)(pasteValue)) {\r\n            return;\r\n        }\r\n        this._action(grid, {\r\n            col: cell.col,\r\n            row: cell.row,\r\n        });\r\n    }\r\n    onDeleteCellRangeBox() {\r\n        // noop\r\n    }\r\n    _action(grid, cell) {\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(cell.col, cell.row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n            (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n            state.block[cellKey]) {\r\n            return;\r\n        }\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            if ((0, utils_2.toBoolean)(value)) {\r\n                return;\r\n            }\r\n            if (this._checkAction) {\r\n                // User behavior\r\n                const record = grid.getRowRecord(cell.row);\r\n                this._checkAction(record, (0, utils_1.extend)(cell, { grid }));\r\n                return;\r\n            }\r\n            if (this._group) {\r\n                // Backward compatibility\r\n                const state = grid[RADIO_COLUMN_STATE_ID];\r\n                const targets = this._group({ grid, col: cell.col, row: cell.row });\r\n                targets.forEach(({ col, row }) => {\r\n                    const range = grid.getCellRange(col, row);\r\n                    const cellKey = `${range.start.col}:${range.start.row}`;\r\n                    if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                        (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row) ||\r\n                        state.block[cellKey]) {\r\n                        return;\r\n                    }\r\n                    actionCell(grid, col, row, col === cell.col && row === cell.row);\r\n                });\r\n                return;\r\n            }\r\n            // default behavior\r\n            const field = grid.getField(cell.col, cell.row);\r\n            const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(cell.row));\r\n            /** Original DataSource */\r\n            const { dataSource } = grid.dataSource;\r\n            const girdRecords = getAllRecordsFromGrid(grid);\r\n            for (let index = 0; index < dataSource.length; index++) {\r\n                const record = dataSource.get(index);\r\n                const showData = girdRecords.find((d) => d.record === record);\r\n                if (showData) {\r\n                    actionCell(grid, cell.col, showData.row, showData.row === recordStartRow);\r\n                }\r\n                else {\r\n                    // Hidden record\r\n                    (0, utils_1.then)(dataSource.getField(index, field), (value) => {\r\n                        if (!(0, utils_2.toBoolean)(value)) {\r\n                            return;\r\n                        }\r\n                        dataSource.setField(index, field, (0, action_utils_1.toggleValue)(value));\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.RadioEditor = RadioEditor;\r\nfunction getAllRecordsFromGrid(grid) {\r\n    const result = [];\r\n    const { rowCount, recordRowCount } = grid;\r\n    for (let targetRow = grid.frozenRowCount; targetRow < rowCount; targetRow += recordRowCount) {\r\n        const record = grid.getRowRecord(targetRow);\r\n        result.push({ row: targetRow, record });\r\n    }\r\n    return result;\r\n}\r\nfunction actionCell(grid, col, row, flag) {\r\n    grid.doGetCellValue(col, row, (value) => {\r\n        if ((0, utils_2.toBoolean)(value) === flag) {\r\n            return;\r\n        }\r\n        const state = grid[RADIO_COLUMN_STATE_ID];\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\r\n        if (ret) {\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            if ((0, utils_1.isPromise)(ret)) {\r\n                state.block[cellKey] = true;\r\n                ret.then(() => {\r\n                    delete state.block[cellKey];\r\n                    onChange();\r\n                });\r\n            }\r\n            else {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isRejectValue(pasteValue) {\r\n    return (0, action_utils_1.toggleValue)((0, action_utils_1.toggleValue)(pasteValue)) !== pasteValue;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputEditor = void 0;\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\r\nconst action_utils_1 = require(\"./action-utils\");\r\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\r\nconst _ = (0, symbolManager_1.getSmallDialogInputEditorStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[_];\r\n    if (!state) {\r\n        state = {};\r\n        utils_1.obj.setReadonly(grid, _, state);\r\n    }\r\n    return state;\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n    const state = getState(grid);\r\n    if (!globalElement) {\r\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\r\n    }\r\n    if (!state.element) {\r\n        state.element = globalElement;\r\n        bindGridCount++;\r\n        grid.addDisposable({\r\n            dispose() {\r\n                bindGridCount--;\r\n                if (!bindGridCount) {\r\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\r\n                    globalElement = null;\r\n                    state.element = null;\r\n                }\r\n            },\r\n        });\r\n    }\r\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n    if (globalElement) {\r\n        globalElement.detach(gridFocus);\r\n    }\r\n}\r\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\r\n    constructor(option = {}) {\r\n        super(option);\r\n        this._helperText = option.helperText;\r\n        this._inputValidator = option.inputValidator;\r\n        this._validator = option.validator;\r\n        this._classList = option.classList;\r\n        this._type = option.type;\r\n    }\r\n    dispose() {\r\n        //noop\r\n    }\r\n    get classList() {\r\n        if (!this._classList) {\r\n            return undefined;\r\n        }\r\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\r\n    }\r\n    set classList(classList) {\r\n        this._classList = classList;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n    get helperText() {\r\n        return this._helperText;\r\n    }\r\n    get inputValidator() {\r\n        return this._inputValidator;\r\n    }\r\n    get validator() {\r\n        return this._validator;\r\n    }\r\n    clone() {\r\n        return new SmallDialogInputEditor(this);\r\n    }\r\n    onInputCellInternal(grid, cell, inputValue) {\r\n        attachInput(grid, cell, this, inputValue);\r\n    }\r\n    onOpenCellInternal(grid, cell) {\r\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\r\n            attachInput(grid, cell, this, value);\r\n        });\r\n    }\r\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\r\n        // cancel input\r\n        detachInput();\r\n    }\r\n    onGridScrollInternal(_grid) {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeDisabledInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onChangeReadOnlyInternal() {\r\n        // cancel input\r\n        detachInput(true);\r\n    }\r\n    onSetInputAttrsInternal(grid, _cell, input) {\r\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const open = (cell) => {\r\n            if ((0, action_utils_1.isReadOnlyRecord)(this.readOnly, grid, cell.row) ||\r\n                (0, action_utils_1.isDisabledRecord)(this.disabled, grid, cell.row)) {\r\n                return false;\r\n            }\r\n            this.onOpenCellInternal(grid, cell);\r\n            return true;\r\n        };\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        return [\r\n            ...super.bindGridEvent(grid, cellId),\r\n            grid.listen('click_cell', (cell) => {\r\n                if (!isTarget(cell.col, cell.row)) {\r\n                    return;\r\n                }\r\n                open({\r\n                    col: cell.col,\r\n                    row: cell.row,\r\n                });\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmallDialogInputElement = void 0;\r\nconst utils_1 = require(\"../../../internal/utils\");\r\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../../internal/dom\");\r\nconst input_value_handler_1 = require(\"./input-value-handler\");\r\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\r\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\nfunction _focus(input, handler) {\r\n    const focus = () => {\r\n        input.focus();\r\n        const end = input.value.length;\r\n        try {\r\n            if (typeof input.selectionStart !== \"undefined\") {\r\n                input.selectionStart = end;\r\n                input.selectionEnd = end;\r\n                return;\r\n            }\r\n        }\r\n        catch (e) {\r\n            //ignore\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        if (document.selection) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const range = input.createTextRange();\r\n            range.collapse();\r\n            range.moveEnd(\"character\", end);\r\n            range.moveStart(\"character\", end);\r\n            range.select();\r\n        }\r\n    };\r\n    handler.tryWithOffEvents(input, \"blur\", () => {\r\n        focus();\r\n    });\r\n}\r\nfunction createDialogElement() {\r\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\r\n    const element = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const input = (0, dom_1.createElement)(\"input\", { classList: INPUT_CLASSNAME });\r\n    input.readOnly = true;\r\n    input.tabIndex = -1;\r\n    element.appendChild(input);\r\n    return element;\r\n}\r\nfunction bindProps(grid, dialog, input, editor) {\r\n    const { classList, helperText } = editor;\r\n    if (classList) {\r\n        dialog.classList.add(...classList);\r\n    }\r\n    if (helperText && typeof helperText !== \"function\") {\r\n        dialog.dataset.helperText = helperText;\r\n    }\r\n    setInputAttrs(editor, grid, input);\r\n}\r\nfunction unbindProps(_grid, dialog, input, editor) {\r\n    const { classList } = editor;\r\n    if (classList) {\r\n        dialog.classList.remove(...classList);\r\n    }\r\n    delete dialog.dataset.helperText;\r\n    input.type = \"\";\r\n}\r\nfunction setInputAttrs(editor, _grid, input) {\r\n    const { type } = editor;\r\n    input.type = type || \"\";\r\n}\r\nclass SmallDialogInputElement {\r\n    static setInputAttrs(editor, grid, input) {\r\n        setInputAttrs(editor, grid, input);\r\n    }\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._dialog = createDialogElement();\r\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\r\n        this._bindDialogEvents();\r\n    }\r\n    dispose() {\r\n        const dialog = this._dialog;\r\n        this.detach();\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._dialog;\r\n        // @ts-expect-error -- ignore\r\n        delete this._input;\r\n        this._beforePropEditor = null;\r\n        if (dialog.parentElement) {\r\n            dialog.parentElement.removeChild(dialog);\r\n        }\r\n    }\r\n    attach(grid, editor, col, row, value) {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        if (this._beforePropEditor) {\r\n            unbindProps(grid, dialog, input, this._beforePropEditor);\r\n        }\r\n        delete dialog.dataset.errorMessage;\r\n        dialog.classList.remove(SHOWN_CLASSNAME);\r\n        dialog.classList.add(HIDDEN_CLASSNAME);\r\n        input.readOnly = true;\r\n        input.tabIndex = 0;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        dialog.style.top = `${rect.top.toFixed()}px`;\r\n        dialog.style.left = `${rect.left.toFixed()}px`;\r\n        dialog.style.width = `${rect.width.toFixed()}px`;\r\n        input.style.height = `${rect.height.toFixed()}px`;\r\n        element.appendChild(dialog);\r\n        (0, input_value_handler_1.setInputValue)(input, value);\r\n        input.style.font = grid.font || \"16px sans-serif\";\r\n        const activeData = { grid, col, row, editor };\r\n        this._onInputValue(input, activeData);\r\n        if (!utils_1.browser.IE) {\r\n            _focus(input, handler);\r\n        }\r\n        else {\r\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\r\n            setTimeout(() => _focus(input, handler));\r\n        }\r\n        dialog.classList.add(SHOWN_CLASSNAME);\r\n        dialog.classList.remove(HIDDEN_CLASSNAME);\r\n        input.readOnly = false;\r\n        bindProps(grid, dialog, input, editor);\r\n        this._activeData = activeData;\r\n        this._beforePropEditor = editor;\r\n        this._attaching = true;\r\n        setTimeout(() => {\r\n            delete this._attaching;\r\n        });\r\n    }\r\n    detach(gridFocus) {\r\n        if (this._isActive()) {\r\n            const dialog = this._dialog;\r\n            const input = this._input;\r\n            dialog.classList.remove(SHOWN_CLASSNAME);\r\n            dialog.classList.add(HIDDEN_CLASSNAME);\r\n            input.readOnly = true;\r\n            input.tabIndex = -1;\r\n            const { grid, col, row } = this._activeData;\r\n            const range = grid.getCellRange(col, row);\r\n            grid.invalidateCellRange(range);\r\n            if (gridFocus) {\r\n                grid.focus();\r\n            }\r\n        }\r\n        this._activeData = null;\r\n        this._beforeValue = null;\r\n    }\r\n    _doChangeValue() {\r\n        if (!this._isActive()) {\r\n            return false;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        return (0, utils_1.then)(this._validate(value), (res) => {\r\n            if (res && value === input.value) {\r\n                const { grid, col, row } = this._activeData;\r\n                grid.doChangeValue(col, row, () => value);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    _isActive() {\r\n        const dialog = this._dialog;\r\n        if (!dialog || !dialog.parentElement) {\r\n            return false;\r\n        }\r\n        if (!this._activeData) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    _bindDialogEvents() {\r\n        const handler = this._handler;\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\r\n        handler.on(dialog, \"click\", stopPropagationOnly);\r\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\r\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\r\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\r\n        handler.on(input, \"compositionstart\", (_e) => {\r\n            input.classList.add(\"composition\");\r\n        });\r\n        handler.on(input, \"compositionend\", (_e) => {\r\n            input.classList.remove(\"composition\");\r\n            this._onInputValue(input);\r\n        });\r\n        const onKeyupAndPress = (_e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            this._onInputValue(input);\r\n        };\r\n        handler.on(input, \"keyup\", onKeyupAndPress);\r\n        handler.on(input, \"keypress\", onKeyupAndPress);\r\n        handler.on(input, \"keydown\", (e) => {\r\n            if (input.classList.contains(\"composition\")) {\r\n                return;\r\n            }\r\n            const keyCode = utils_1.event.getKeyCode(e);\r\n            if (keyCode === KEY_ESC) {\r\n                this.detach(true);\r\n                utils_1.event.cancel(e);\r\n            }\r\n            else if (keyCode === KEY_ENTER) {\r\n                this._onKeydownEnter(e);\r\n            }\r\n            else {\r\n                this._onInputValue(input);\r\n            }\r\n        });\r\n    }\r\n    _onKeydownEnter(e) {\r\n        if (this._attaching) {\r\n            return;\r\n        }\r\n        const input = this._input;\r\n        const { value } = input;\r\n        (0, utils_1.then)(this._doChangeValue(), (r) => {\r\n            var _a;\r\n            if (r && value === input.value) {\r\n                const grid = this._isActive() ? this._activeData.grid : null;\r\n                this.detach(true);\r\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\r\n                    grid.onKeyDownMove(e);\r\n                }\r\n            }\r\n        });\r\n        utils_1.event.cancel(e);\r\n    }\r\n    _onInputValue(input, activeData) {\r\n        const before = this._beforeValue;\r\n        const { value } = input;\r\n        if (before !== value) {\r\n            this._onInputValueChange(value, activeData);\r\n        }\r\n        this._beforeValue = value;\r\n    }\r\n    _onInputValueChange(after, activeData) {\r\n        activeData = (activeData || this._activeData);\r\n        const dialog = this._dialog;\r\n        const { grid, col, row, editor } = activeData;\r\n        if (typeof editor.helperText === \"function\") {\r\n            const helperText = editor.helperText(after, { grid, col, row });\r\n            if (helperText) {\r\n                dialog.dataset.helperText = helperText;\r\n            }\r\n            else {\r\n                delete dialog.dataset.helperText;\r\n            }\r\n        }\r\n        if (\"errorMessage\" in dialog.dataset) {\r\n            this._validate(after, true);\r\n        }\r\n    }\r\n    _validate(value, inputOnly) {\r\n        const dialog = this._dialog;\r\n        const input = this._input;\r\n        const { grid, col, row, editor } = this._activeData;\r\n        let message = \"\";\r\n        if (editor.inputValidator) {\r\n            message = editor.inputValidator(value, { grid, col, row });\r\n        }\r\n        return (0, utils_1.then)(message, (message) => {\r\n            if (!message && editor.validator && !inputOnly) {\r\n                message = editor.validator(value, { grid, col, row });\r\n            }\r\n            return (0, utils_1.then)(message, (message) => {\r\n                if (message && value === input.value) {\r\n                    dialog.dataset.errorMessage = message;\r\n                }\r\n                else {\r\n                    delete dialog.dataset.errorMessage;\r\n                }\r\n                return !message;\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.SmallDialogInputElement = SmallDialogInputElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./SmallDialogInputElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@-webkit-keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;-webkit-transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,-webkit-box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out;transition:padding .15s ease-out,box-shadow .15s ease-out,-webkit-box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{-webkit-box-shadow:none;box-shadow:none;padding:0;pointer-events:none;-webkit-animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;-webkit-box-shadow:0 1px 0 0 #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;-webkit-box-shadow:0 1px 0 0 #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENT_TYPE = exports.DrawGrid = void 0;\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nObject.defineProperty(exports, \"DrawGrid\", { enumerable: true, get: function () { return DrawGrid_1.DrawGrid; } });\r\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\r\nObject.defineProperty(exports, \"EVENT_TYPE\", { enumerable: true, get: function () { return DG_EVENT_TYPE_1.DG_EVENT_TYPE; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.transform = void 0;\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst handler = new EventHandler_1.EventHandler();\r\nlet ratio = 1;\r\nfunction setRatio() {\r\n    if (utils_1.isNode) {\r\n        ratio = 1;\r\n    }\r\n    else {\r\n        ratio = Math.ceil(window.devicePixelRatio || 1);\r\n        if (ratio > 1 && ratio % 2 !== 0) {\r\n            ratio += 1;\r\n        }\r\n    }\r\n}\r\nsetRatio();\r\nif (!utils_1.isNode) {\r\n    handler.on(window, \"resize\", setRatio);\r\n}\r\nfunction transform(canvas) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const { getAttribute, setAttribute } = canvas;\r\n    canvas.getAttribute = function (name) {\r\n        let result = getAttribute.call(this, name);\r\n        if (name === \"width\" || name === \"height\") {\r\n            result = `${Number(result) / ratio}`;\r\n        }\r\n        return result;\r\n    };\r\n    canvas.setAttribute = function (name, val) {\r\n        const wh = name === \"width\" || name === \"height\";\r\n        if (wh) {\r\n            val = `${Number(val) * ratio}`;\r\n        }\r\n        const result = setAttribute.call(this, name, val);\r\n        if (wh) {\r\n            ctx.scale(ratio, ratio);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(canvas, \"width\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"width\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    Object.defineProperty(canvas, \"height\", {\r\n        get() {\r\n            return Number(canvas.getAttribute(\"height\"));\r\n        },\r\n        set: (val) => {\r\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\r\n        },\r\n        configurable: true,\r\n        enumerable: true,\r\n    });\r\n    const { drawImage } = ctx;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ctx.drawImage = function (img, ...args) {\r\n        if (img !== canvas || ratio === 1) {\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        this.save();\r\n        try {\r\n            this.scale(1 / ratio, 1 / ratio);\r\n            if (args.length > 4) {\r\n                args[4] *= ratio;\r\n                args[5] *= ratio;\r\n            }\r\n            else {\r\n                args[0] *= ratio;\r\n                args[1] *= ratio;\r\n            }\r\n            return drawImage.call(this, img, ...args);\r\n        }\r\n        finally {\r\n            this.restore();\r\n        }\r\n    };\r\n    return canvas;\r\n}\r\nexports.transform = transform;\r\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/src/index.js??ref--5-2!./style.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberMap = void 0;\r\nconst indexFirst = (arr, elm) => {\r\n    let low = 0;\r\n    let high = arr.length - 1;\r\n    while (low <= high) {\r\n        const i = Math.floor((low + high) / 2);\r\n        if (arr[i] === elm) {\r\n            return i;\r\n        }\r\n        else if (arr[i] > elm) {\r\n            high = i - 1;\r\n        }\r\n        else {\r\n            low = i + 1;\r\n        }\r\n    }\r\n    return high < 0 ? 0 : high;\r\n};\r\nclass NumberMap {\r\n    constructor() {\r\n        this._keys = [];\r\n        this._vals = {};\r\n        this._sorted = false;\r\n    }\r\n    put(key, value) {\r\n        if (!(key in this._vals)) {\r\n            this._keys.push(key);\r\n            this._sorted = false;\r\n        }\r\n        this._vals[key] = value;\r\n    }\r\n    remove(key) {\r\n        delete this._vals[key];\r\n        const index = this._keys.indexOf(key);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this._keys.splice(index, 1);\r\n        this._sorted = false;\r\n    }\r\n    get(key) {\r\n        return this._vals[key];\r\n    }\r\n    has(key) {\r\n        return this._vals[key] != null;\r\n    }\r\n    each(keyFrom, keyTo, fn) {\r\n        const { _keys: keys } = this;\r\n        const { length } = keys;\r\n        if (!this._sorted) {\r\n            keys.sort((a, b) => {\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            this._sorted = true;\r\n        }\r\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n            const key = keys[i];\r\n            if (keyFrom <= key && key <= keyTo) {\r\n                fn(this.get(key), key);\r\n            }\r\n            else if (keyTo < key) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.NumberMap = NumberMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollable = void 0;\r\nconst style = __importStar(require(\"./style\"));\r\nconst EventHandler_1 = require(\"./EventHandler\");\r\nconst utils_1 = require(\"./utils\");\r\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\r\nclass Scrollable {\r\n    constructor() {\r\n        this._p = 1;\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        this._scrollable = document.createElement(\"div\");\r\n        this._scrollable.classList.add(\"grid-scrollable\");\r\n        this._height = 0;\r\n        this._width = 0;\r\n        this._endPointElement = document.createElement(\"div\");\r\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\r\n        this._update();\r\n        this._scrollable.appendChild(this._endPointElement);\r\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n        // this.scrollTop += delta < 0 ? point : -point;\r\n        // });\r\n    }\r\n    calcTop(top) {\r\n        const relativeTop = top - this.scrollTop;\r\n        return this._scrollable.scrollTop + relativeTop;\r\n    }\r\n    getElement() {\r\n        return this._scrollable;\r\n    }\r\n    setScrollSize(width, height) {\r\n        this._width = width;\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollWidth() {\r\n        return this._width;\r\n    }\r\n    set scrollWidth(width) {\r\n        this._width = width;\r\n        this._update();\r\n    }\r\n    get scrollHeight() {\r\n        return this._height;\r\n    }\r\n    set scrollHeight(height) {\r\n        this._height = height;\r\n        this._update();\r\n    }\r\n    get scrollLeft() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\r\n    }\r\n    set scrollLeft(scrollLeft) {\r\n        this._scrollable.scrollLeft = scrollLeft;\r\n    }\r\n    get scrollTop() {\r\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\r\n    }\r\n    set scrollTop(scrollTop) {\r\n        this._scrollable.scrollTop = scrollTop * this._p;\r\n    }\r\n    onScroll(fn) {\r\n        this._handler.on(this._scrollable, \"scroll\", fn);\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n    }\r\n    _update() {\r\n        let domHeight;\r\n        const { offsetHeight, offsetWidth } = this._scrollable;\r\n        if (this._height > MAX_SCROLL) {\r\n            const sbSize = style.getScrollBarSize();\r\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n            const rScrollRange = this._height - offsetHeight + sbSize;\r\n            this._p = vScrollRange / rScrollRange;\r\n            domHeight = MAX_SCROLL;\r\n        }\r\n        else {\r\n            this._p = 1;\r\n            domHeight = this._height;\r\n        }\r\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\r\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\r\n        // Sets the maximum value to the scroll position\r\n        // if the current scroll position exceeds the maximum value.\r\n        if (this.scrollTop > this.scrollHeight - offsetHeight) {\r\n            this.scrollTop = this.scrollHeight - offsetHeight;\r\n        }\r\n        if (this.scrollLeft > this.scrollWidth - offsetWidth) {\r\n            this.scrollLeft = this.scrollWidth - offsetWidth;\r\n        }\r\n    }\r\n}\r\nexports.Scrollable = Scrollable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CachedDataSource = void 0;\r\nconst DataSource_1 = require(\"./DataSource\");\r\n/** @private */\r\nfunction _setFieldCache(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfCache, index, field, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    const recCache = fCache[index] || (fCache[index] = new Map());\r\n    recCache.set(field, value);\r\n}\r\n/**\r\n * grid data source for caching Promise data\r\n *\r\n * @classdesc cheetahGrid.data.CachedDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass CachedDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    static ofArray(array) {\r\n        return new CachedDataSource({\r\n            get: (index) => array[index],\r\n            length: array.length,\r\n            source: array,\r\n        });\r\n    }\r\n    constructor(opt) {\r\n        super(opt);\r\n        this._rCache = {};\r\n        this._fCache = {};\r\n    }\r\n    getOriginal(index) {\r\n        if (this._rCache && this._rCache[index]) {\r\n            return this._rCache[index];\r\n        }\r\n        return super.getOriginal(index);\r\n    }\r\n    getOriginalField(index, field) {\r\n        const rowCache = this._fCache && this._fCache[index];\r\n        if (rowCache) {\r\n            const cache = rowCache.get(field);\r\n            if (cache) {\r\n                return cache;\r\n            }\r\n        }\r\n        return super.getOriginalField(index, field);\r\n    }\r\n    setOriginalField(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        const fCache = this._fCache;\r\n        if (fCache && fCache[index]) {\r\n            delete fCache[index]; // clear row cache\r\n        }\r\n        return super.setOriginalField(index, field, value);\r\n    }\r\n    clearCache() {\r\n        if (this._rCache) {\r\n            this._rCache = {};\r\n        }\r\n        if (this._fCache) {\r\n            this._fCache = {};\r\n        }\r\n    }\r\n    fieldPromiseCallBackInternal(index, field, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    value) {\r\n        _setFieldCache(this._fCache, index, field, value);\r\n    }\r\n    recordPromiseCallBackInternal(index, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    record) {\r\n        this._rCache[index] = record;\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n}\r\nexports.CachedDataSource = CachedDataSource;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FilterDataSource = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst DataSource_1 = require(\"./DataSource\");\r\nconst EventHandler_1 = require(\"../internal/EventHandler\");\r\n/** @private */\r\nclass DataSourceIterator {\r\n    constructor(dataSource) {\r\n        this._dataSource = dataSource;\r\n        this._curIndex = -1;\r\n        this._data = [];\r\n    }\r\n    hasNext() {\r\n        const next = this._curIndex + 1;\r\n        return this._dataSource.length > next;\r\n    }\r\n    next() {\r\n        const next = this._curIndex + 1;\r\n        const data = this._getIndexData(next);\r\n        this._curIndex = next;\r\n        return data;\r\n    }\r\n    movePrev() {\r\n        this._curIndex--;\r\n    }\r\n    _getIndexData(index, nest) {\r\n        const dataSource = this._dataSource;\r\n        const data = this._data;\r\n        if (index < data.length) {\r\n            return data[index];\r\n        }\r\n        if (dataSource.length <= index) {\r\n            return undefined;\r\n        }\r\n        const record = this._dataSource.get(index);\r\n        data[index] = record;\r\n        if ((0, utils_1.isPromise)(record)) {\r\n            record.then((val) => {\r\n                data[index] = val;\r\n            });\r\n            if (!nest) {\r\n                for (let i = 1; i <= 100; i++) {\r\n                    this._getIndexData(index + i, true);\r\n                }\r\n            }\r\n        }\r\n        return record;\r\n    }\r\n}\r\n/** @private */\r\nclass FilterData {\r\n    constructor(dc, original, filter) {\r\n        this._cancel = false;\r\n        this._owner = dc;\r\n        this._dataSourceItr = new DataSourceIterator(original);\r\n        this._filter = filter;\r\n        this._filteredList = [];\r\n        this._queues = [];\r\n    }\r\n    get(index) {\r\n        if (this._cancel) {\r\n            return undefined;\r\n        }\r\n        const filteredList = this._filteredList;\r\n        if (index < filteredList.length) {\r\n            return filteredList[index];\r\n        }\r\n        const queues = this._queues;\r\n        const indexQueue = queues[index];\r\n        if (indexQueue) {\r\n            return indexQueue;\r\n        }\r\n        return queues[index] || this._findIndex(index);\r\n    }\r\n    cancel() {\r\n        this._cancel = true;\r\n    }\r\n    _findIndex(index) {\r\n        if (window.Promise) {\r\n            const timeout = Date.now() + 100;\r\n            let count = 0;\r\n            return this._findIndexWithTimeout(index, () => {\r\n                count++;\r\n                if (count >= 100) {\r\n                    count = 0;\r\n                    return timeout < Date.now();\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return this._findIndexWithTimeout(index, () => false);\r\n    }\r\n    _findIndexWithTimeout(index, testTimeout) {\r\n        const filteredList = this._filteredList;\r\n        const filter = this._filter;\r\n        const dataSourceItr = this._dataSourceItr;\r\n        const queues = this._queues;\r\n        while (dataSourceItr.hasNext()) {\r\n            if (this._cancel) {\r\n                return undefined;\r\n            }\r\n            const record = dataSourceItr.next();\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                dataSourceItr.movePrev();\r\n                const queue = record.then((_value) => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n            if (filter(record)) {\r\n                filteredList.push(record);\r\n                if (index < filteredList.length) {\r\n                    return filteredList[index];\r\n                }\r\n            }\r\n            if (testTimeout()) {\r\n                const promise = new Promise((resolve) => {\r\n                    setTimeout(() => {\r\n                        resolve();\r\n                    }, 300);\r\n                });\r\n                const queue = promise.then(() => {\r\n                    queues[index] = null;\r\n                    return this.get(index);\r\n                });\r\n                queues[index] = queue;\r\n                return queue;\r\n            }\r\n        }\r\n        const dc = this._owner;\r\n        dc.length = filteredList.length;\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * grid data source for filter\r\n *\r\n * @classdesc cheetahGrid.data.FilterDataSource\r\n * @memberof cheetahGrid.data\r\n */\r\nclass FilterDataSource extends DataSource_1.DataSource {\r\n    static get EVENT_TYPE() {\r\n        return DataSource_1.DataSource.EVENT_TYPE;\r\n    }\r\n    constructor(dataSource, filter) {\r\n        super(dataSource);\r\n        this._filterData = null;\r\n        this._dataSource = dataSource;\r\n        this.filter = filter;\r\n        const handler = (this._handler = new EventHandler_1.EventHandler());\r\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            // reset\r\n            // eslint-disable-next-line no-self-assign\r\n            this.filter = this.filter;\r\n        });\r\n        (0, utils_1.each)(DataSource_1.DataSource.EVENT_TYPE, (type) => {\r\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\r\n        });\r\n    }\r\n    get filter() {\r\n        var _a;\r\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\r\n    }\r\n    set filter(filter) {\r\n        if (this._filterData) {\r\n            this._filterData.cancel();\r\n        }\r\n        this._filterData = filter\r\n            ? new FilterData(this, this._dataSource, filter)\r\n            : null;\r\n        this.length = this._dataSource.length;\r\n    }\r\n    getOriginal(index) {\r\n        if (!this._filterData) {\r\n            return super.getOriginal(index);\r\n        }\r\n        return this._filterData.get(index);\r\n    }\r\n    sort(field, order) {\r\n        return this._dataSource.sort(field, order);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    get source() {\r\n        return this._dataSource.source;\r\n    }\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n    dispose() {\r\n        this._handler.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexports.FilterDataSource = FilterDataSource;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.style = exports.type = exports.action = void 0;\r\nconst action = __importStar(require(\"./header/action\"));\r\nexports.action = action;\r\nconst style = __importStar(require(\"./header/style\"));\r\nexports.style = style;\r\nconst type = __importStar(require(\"./header/type\"));\r\nexports.type = type;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeaderAction = void 0;\r\nconst actionBind_1 = require(\"./actionBind\");\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst animate_1 = require(\"../../internal/animate\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\r\n    clone() {\r\n        return new CheckHeaderAction(this);\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        const state = getState(grid);\r\n        const action = ({ col, row }) => {\r\n            const range = grid.getCellRange(col, row);\r\n            const cellKey = `${range.start.col}:${range.start.row}`;\r\n            if (this.disabled || state.block[cellKey]) {\r\n                return;\r\n            }\r\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\r\n            const onChange = () => {\r\n                // checkbox animation\r\n                (0, animate_1.animate)(200, (point) => {\r\n                    if (point === 1) {\r\n                        delete state.elapsed[cellKey];\r\n                    }\r\n                    else {\r\n                        state.elapsed[cellKey] = point;\r\n                    }\r\n                    grid.invalidateCellRange(range);\r\n                });\r\n            };\r\n            onChange();\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    state.mouseActiveCell = {\r\n                        col: e.col,\r\n                        row: e.row,\r\n                    };\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                    return true;\r\n                },\r\n                mouseOut: (e) => {\r\n                    delete state.mouseActiveCell;\r\n                    const range = grid.getCellRange(e.col, e.row);\r\n                    grid.invalidateCellRange(range);\r\n                },\r\n            }),\r\n            ...(0, actionBind_1.bindCellKeyAction)(grid, cellId, {\r\n                action,\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.CheckHeaderAction = CheckHeaderAction;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeaderAction = void 0;\r\nconst BaseAction_1 = require(\"./BaseAction\");\r\nconst actionBind_1 = require(\"./actionBind\");\r\nclass SortHeaderAction extends BaseAction_1.BaseAction {\r\n    constructor(option = {}) {\r\n        var _a;\r\n        super(option);\r\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\r\n    }\r\n    get sort() {\r\n        return this._sort;\r\n    }\r\n    set sort(sort) {\r\n        this._sort = sort;\r\n        this.onChangeDisabledInternal();\r\n    }\r\n    clone() {\r\n        return new SortHeaderAction(this);\r\n    }\r\n    _executeSort(newState, grid) {\r\n        if (typeof this._sort === \"function\") {\r\n            this._sort({\r\n                order: newState.order || \"asc\",\r\n                col: newState.col,\r\n                row: newState.row,\r\n                grid,\r\n            });\r\n        }\r\n        else if (typeof this._sort === \"string\" &&\r\n            // v1.6.3 Backward compatibility\r\n            (this._sort !== \"true\" || hasTrueField(grid))) {\r\n            const field = this._sort;\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n        else {\r\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\r\n            const field = grid.getField(newState.col, fieldRow);\r\n            if (field == null) {\r\n                return;\r\n            }\r\n            grid.dataSource.sort(field, newState.order || \"asc\");\r\n        }\r\n    }\r\n    bindGridEvent(grid, cellId) {\r\n        function isTarget(col, row) {\r\n            return grid.getLayoutCellId(col, row) === cellId;\r\n        }\r\n        const action = (cell) => {\r\n            if (this.disabled) {\r\n                return;\r\n            }\r\n            const state = grid.sortState;\r\n            let newState;\r\n            const range = grid.getCellRange(cell.col, cell.row);\r\n            if (isTarget(state.col, cell.row)) {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\r\n                };\r\n            }\r\n            else {\r\n                newState = {\r\n                    col: range.start.col,\r\n                    row: range.start.row,\r\n                    order: \"asc\",\r\n                };\r\n            }\r\n            grid.sortState = newState;\r\n            this._executeSort(newState, grid);\r\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n        };\r\n        return [\r\n            ...(0, actionBind_1.bindCellClickAction)(grid, cellId, {\r\n                action,\r\n                mouseOver: (_e) => {\r\n                    if (this.disabled) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n            }),\r\n        ];\r\n    }\r\n}\r\nexports.SortHeaderAction = SortHeaderAction;\r\nfunction hasTrueField(grid) {\r\n    if (grid.dataSource.length > 0) {\r\n        const record = grid.dataSource.get(0);\r\n        return record != null && \"true\" in record;\r\n    }\r\n    return false;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StdBaseStyle = void 0;\r\nconst BaseStyle_1 = require(\"./BaseStyle\");\r\nlet defaultStyle;\r\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\r\n    static get DEFAULT() {\r\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n    }\r\n    constructor(style = {}) {\r\n        super(style);\r\n        this._textAlign = style.textAlign || \"left\";\r\n        this._textBaseline = style.textBaseline || \"middle\";\r\n    }\r\n    get textAlign() {\r\n        return this._textAlign;\r\n    }\r\n    set textAlign(textAlign) {\r\n        this._textAlign = textAlign;\r\n        this.doChangeStyle();\r\n    }\r\n    get textBaseline() {\r\n        return this._textBaseline;\r\n    }\r\n    set textBaseline(textBaseline) {\r\n        this._textBaseline = textBaseline;\r\n        this.doChangeStyle();\r\n    }\r\n    clone() {\r\n        return new StdBaseStyle(this);\r\n    }\r\n}\r\nexports.StdBaseStyle = StdBaseStyle;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CheckHeader = void 0;\r\nconst inlineUtils = __importStar(require(\"../../element/inlines\"));\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\r\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst CHECK_HEADER_STATE_ID = (0, symbolManager_1.getCheckHeaderStateId)();\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction getState(grid) {\r\n    let state = grid[CHECK_HEADER_STATE_ID];\r\n    if (!state) {\r\n        state = { elapsed: {}, block: {} };\r\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\r\n    }\r\n    return state;\r\n}\r\nclass CheckHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return CheckHeaderStyle_1.CheckHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new CheckHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, padding, color, font, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const { col, row } = context;\r\n        const range = grid.getCellRange(col, row);\r\n        const cellKey = `${range.start.col}:${range.start.row}`;\r\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\r\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\r\n        const opt = {\r\n            textAlign,\r\n            textBaseline,\r\n            borderColor,\r\n            checkBgColor,\r\n            uncheckBgColor,\r\n        };\r\n        if (elapsed != null) {\r\n            opt.animElapsedTime = elapsed;\r\n        }\r\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            let contents = [inlineCheck];\r\n            contents = contents.concat(inlineUtils.buildInlines(icons, value != null ? String(value) : \"\"));\r\n            helper.text(contents, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                textOverflow,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.CheckHeader = CheckHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Path2DShim = void 0;\r\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\r\nconst parser = new PathCommandsParser_1.PathCommandsParser();\r\nclass Path2DShim {\r\n    arc(...args) {\r\n        this._ops.push({ op: \"arc\", args });\r\n    }\r\n    arcTo(...args) {\r\n        this._ops.push({ op: \"arcTo\", args });\r\n    }\r\n    bezierCurveTo(...args) {\r\n        this._ops.push({ op: \"bezierCurveTo\", args });\r\n    }\r\n    closePath(...args) {\r\n        this._ops.push({ op: \"closePath\", args });\r\n    }\r\n    ellipse(...args) {\r\n        this._ops.push({ op: \"ellipse\", args });\r\n    }\r\n    lineTo(...args) {\r\n        this._ops.push({ op: \"lineTo\", args });\r\n    }\r\n    moveTo(...args) {\r\n        this._ops.push({ op: \"moveTo\", args });\r\n    }\r\n    quadraticCurveTo(...args) {\r\n        this._ops.push({ op: \"quadraticCurveTo\", args });\r\n    }\r\n    rect(...args) {\r\n        this._ops.push({ op: \"rect\", args });\r\n    }\r\n    constructor(arg) {\r\n        this._ops = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            // try {\r\n            this._ops = parser.parse(arg);\r\n            // } catch (e) {\r\n            // \tthrow e;\r\n            // }\r\n        }\r\n        else if (arg.hasOwnProperty(\"_ops\")) {\r\n            this._ops = [...arg._ops];\r\n        }\r\n        else {\r\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n        }\r\n    }\r\n    roundRect(_x, _y, _w, _h, _radii) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nexports.Path2DShim = Path2DShim;\r\nconst { CanvasRenderingContext2D } = window;\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nCanvasRenderingContext2D.prototype.fill = function (...args) {\r\n    if (args[0] instanceof Path2DShim) {\r\n        const path = args[0];\r\n        this.beginPath();\r\n        path._ops.forEach((op) => {\r\n            const fn = this[op.op];\r\n            fn.apply(this, op.args);\r\n        });\r\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n    }\r\n    else {\r\n        originalFill.apply(this, args);\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommandsParser = void 0;\r\nconst PathCommands_1 = require(\"./PathCommands\");\r\nfunction pathTokens(d) {\r\n    let idx = 0;\r\n    return {\r\n        next() {\r\n            let s = \"\";\r\n            while (d.length > idx) {\r\n                const c = d[idx];\r\n                idx++;\r\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\r\n                    if (s) {\r\n                        return s;\r\n                    }\r\n                }\r\n                else {\r\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\r\n                    if (type === \"str\") {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                        return c;\r\n                    }\r\n                    if (\"-+\".indexOf(c) > -1) {\r\n                        if (s) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    if (c === \".\") {\r\n                        if (s.indexOf(\".\") > -1) {\r\n                            idx--;\r\n                            return s;\r\n                        }\r\n                    }\r\n                    s += c;\r\n                }\r\n            }\r\n            return s || null;\r\n        },\r\n    };\r\n}\r\nfunction command(builder, cmd, argsProvider) {\r\n    if (cmd.toUpperCase() === \"M\" ||\r\n        cmd.toUpperCase() === \"L\" ||\r\n        cmd.toUpperCase() === \"T\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\r\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\r\n        builder.command(cmd, argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"Z\") {\r\n        builder.command(cmd);\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"C\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else if (cmd.toUpperCase() === \"A\") {\r\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\r\n        return cmd;\r\n    }\r\n    else {\r\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n        console.warn(`unsupported:${cmd}`);\r\n    }\r\n    return null;\r\n}\r\nclass PathCommandsParser {\r\n    constructor() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this._ops = [];\r\n        this._commands = new PathCommands_1.PathCommands(this);\r\n        const buildPush = (op) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        (...args) => {\r\n            this._ops.push({\r\n                op,\r\n                args,\r\n            });\r\n        };\r\n        this.moveTo = buildPush(\"moveTo\");\r\n        this.lineTo = buildPush(\"lineTo\");\r\n        this.closePath = buildPush(\"closePath\");\r\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\r\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\r\n        this.save = buildPush(\"save\");\r\n        this.translate = buildPush(\"translate\");\r\n        this.rotate = buildPush(\"rotate\");\r\n        this.scale = buildPush(\"scale\");\r\n        this.arc = buildPush(\"arc\");\r\n        this.restore = buildPush(\"restore\");\r\n        this.arcTo = buildPush(\"arcTo\");\r\n        this.ellipse = buildPush(\"ellipse\");\r\n        this.rect = buildPush(\"rect\");\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    command(name, ...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const numArgs = args || [];\r\n        for (let i = 0; i < args.length; i++) {\r\n            numArgs[i] -= 0;\r\n        }\r\n        const command = this._commands[name];\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        command.apply(this, numArgs);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    parse(d) {\r\n        const ops = (this._ops = []);\r\n        const tokens = pathTokens(d);\r\n        try {\r\n            let cmd;\r\n            let subsequentCommand = \"Z\";\r\n            while ((cmd = tokens.next())) {\r\n                if (!isNaN(Number(cmd))) {\r\n                    let fst = true;\r\n                    const argsProvider = {\r\n                        next() {\r\n                            if (fst) {\r\n                                fst = false;\r\n                                return cmd;\r\n                            }\r\n                            return tokens.next();\r\n                        },\r\n                    };\r\n                    subsequentCommand =\r\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\r\n                }\r\n                else {\r\n                    subsequentCommand =\r\n                        command(this, cmd, tokens) || \"Z\";\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(`Error: ${d}`);\r\n            throw e;\r\n        }\r\n        return ops;\r\n    }\r\n}\r\nexports.PathCommandsParser = PathCommandsParser;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PathCommands = void 0;\r\n/*eslint new-cap: \"off\"*/\r\nfunction mag(v) {\r\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1];\r\n}\r\nfunction ratio(u, v) {\r\n    return dot(u, v) / (mag(u) * mag(v));\r\n}\r\nfunction clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\nfunction angle(u, v) {\r\n    let sign = 1.0;\r\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\r\n        sign = -1.0;\r\n    }\r\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\r\n}\r\nfunction rotClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\nfunction rotCounterClockwise(v, angle) {\r\n    const cost = Math.cos(angle);\r\n    const sint = Math.sin(angle);\r\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\nfunction midPoint(u, v) {\r\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\nfunction meanVec(u, v) {\r\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\nfunction pointMul(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1]];\r\n}\r\nfunction scale(c, v) {\r\n    return [c * v[0], c * v[1]];\r\n}\r\nfunction sum(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n    // Convert from endpoint to center parametrization, as detailed in:\r\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n    if (rx === 0 || ry === 0) {\r\n        ctx.lineTo(x2, x1);\r\n        return;\r\n    }\r\n    phi *= Math.PI / 180.0;\r\n    rx = Math.abs(rx);\r\n    ry = Math.abs(ry);\r\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\r\n    const xPrime2 = pointMul(xPrime, xPrime);\r\n    let rx2 = Math.pow(rx, 2);\r\n    let ry2 = Math.pow(ry, 2);\r\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n    if (lambda > 1) {\r\n        rx *= lambda;\r\n        ry *= lambda;\r\n        rx2 = Math.pow(rx, 2);\r\n        ry2 = Math.pow(ry, 2);\r\n    }\r\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n    if (fA === fS) {\r\n        factor *= -1.0;\r\n    }\r\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\r\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\r\n    const x1UnitVector = [\r\n        (xPrime[0] - cPrime[0]) / rx,\r\n        (xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const x2UnitVector = [\r\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\r\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\r\n    ];\r\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n    const start = theta;\r\n    const end = theta + deltaTheta;\r\n    ctx.save();\r\n    ctx.translate(c[0], c[1]);\r\n    ctx.rotate(phi);\r\n    ctx.scale(rx, ry);\r\n    ctx.arc(0, 0, 1, start, end, !fS);\r\n    ctx.restore();\r\n}\r\nclass PathCommands {\r\n    constructor(ctx) {\r\n        let lMx;\r\n        let lMy;\r\n        let lx = 0;\r\n        let ly = 0;\r\n        let reflected;\r\n        let lastCommand = \"\";\r\n        function makeReflected() {\r\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\r\n                return { x: lx, y: ly };\r\n            }\r\n            return reflected;\r\n        }\r\n        this.M = (px, py) => {\r\n            ctx.moveTo(px, py);\r\n            lMx = px;\r\n            lMy = py;\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"M\";\r\n            return this;\r\n        };\r\n        this.m = (px, py) => this.M(px + lx, py + ly);\r\n        this.L = (px, py) => {\r\n            ctx.lineTo(px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"L\";\r\n            return this;\r\n        };\r\n        this.l = (px, py) => this.L(px + lx, py + ly);\r\n        this.H = (px) => this.L(px, ly);\r\n        this.h = (px) => this.H(px + lx);\r\n        this.V = (py) => this.L(lx, py);\r\n        this.v = (py) => this.V(py + ly);\r\n        this.Z = () => {\r\n            ctx.closePath();\r\n            lx = lMx;\r\n            ly = lMy;\r\n            lastCommand = \"Z\";\r\n            return this;\r\n        };\r\n        this.z = () => this.Z();\r\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cp2x,\r\n                y: 2 * py - cp2y,\r\n            };\r\n            lastCommand = \"C\";\r\n            return this;\r\n        };\r\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\r\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\r\n        this.S = (cpx, cpy, px, py) => {\r\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\r\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n        };\r\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n        this.Q = (cpx, cpy, px, py) => {\r\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            reflected = {\r\n                x: 2 * px - cpx,\r\n                y: 2 * py - cpy,\r\n            };\r\n            lastCommand = \"Q\";\r\n            return this;\r\n        };\r\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n        //T x y (or t dx dy)\r\n        this.T = (px, py) => {\r\n            const { x: cpx, y: cpy } = makeReflected();\r\n            return this.Q(cpx, cpy, px, py);\r\n        };\r\n        this.t = (px, py) => this.T(px + lx, py + ly);\r\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n            const x1 = lx;\r\n            const y1 = ly;\r\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n            lx = px;\r\n            ly = py;\r\n            lastCommand = \"A\";\r\n            return this;\r\n        };\r\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n    }\r\n}\r\nexports.PathCommands = PathCommands;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineIcon = void 0;\r\nconst fonts = __importStar(require(\"../internal/fonts\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nclass InlineIcon extends Inline_1.Inline {\r\n    constructor(icon) {\r\n        super();\r\n        this._icon = icon || {};\r\n    }\r\n    width({ ctx }) {\r\n        const icon = this._icon;\r\n        if (icon.width) {\r\n            return icon.width;\r\n        }\r\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\r\n            ctx.save();\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                ctx.font = icon.font || ctx.font;\r\n                return ctx.measureText(icon.content || \"\").width;\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n                ctx.restore();\r\n            }\r\n        }\r\n        return 0; //unknown\r\n    }\r\n    font() {\r\n        var _a;\r\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        const icon = this._icon;\r\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\r\n    }\r\n    onReady(callback) {\r\n        const icon = this._icon;\r\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\r\n            fonts.load(icon.font, icon.content || \"\", callback);\r\n        }\r\n    }\r\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        const icon = this._icon;\r\n        if (icon.content) {\r\n            ctx.canvas.style.letterSpacing = \"normal\";\r\n            try {\r\n                // eslint-disable-next-line no-self-assign\r\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\r\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\r\n                    offset: offset + 1,\r\n                    padding: {\r\n                        left: offsetLeft + (this._icon.offsetLeft || 0),\r\n                        right: offsetRight,\r\n                        top: offsetTop + (this._icon.offsetTop || 0),\r\n                        bottom: offsetBottom,\r\n                    },\r\n                });\r\n            }\r\n            finally {\r\n                ctx.canvas.style.letterSpacing = \"\";\r\n            }\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineIcon = InlineIcon;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler_1 = require(\"./FontRuler\");\r\nconst LastResortFonts = {\r\n    SERIF: \"serif\",\r\n    SANS_SERIF: \"sans-serif\",\r\n};\r\nconst watchRunners = {};\r\nclass FontWatchRunner {\r\n    static load(font, testStr, activeCallback, inactiveCallback) {\r\n        const c = watchRunners[font] || (watchRunners[font] = {});\r\n        testStr += \"\";\r\n        let runner;\r\n        if (c[testStr]) {\r\n            runner = c[testStr];\r\n        }\r\n        else {\r\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\r\n        }\r\n        runner.then(activeCallback, inactiveCallback);\r\n    }\r\n    constructor(font, testStr) {\r\n        this.activeCallbacks = [];\r\n        this.inactiveCallbacks = [];\r\n        this.status = null;\r\n        this.lastResortWidths_ = {};\r\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\r\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\r\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\r\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\r\n        //start\r\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] =\r\n            lastResortRulerB.getWidth();\r\n        lastResortRulerA.remove();\r\n        lastResortRulerB.remove();\r\n        this.started_ = Date.now();\r\n        this.check_();\r\n    }\r\n    then(activeCallback, inactiveCallback) {\r\n        if (this.status) {\r\n            if (this.status !== \"ng\") {\r\n                activeCallback();\r\n            }\r\n            else {\r\n                inactiveCallback();\r\n            }\r\n        }\r\n        else {\r\n            this.activeCallbacks.push(activeCallback);\r\n            this.inactiveCallbacks.push(inactiveCallback);\r\n        }\r\n    }\r\n    check_() {\r\n        const widthA = this.fontRulerA_.getWidth();\r\n        const widthB = this.fontRulerB_.getWidth();\r\n        if (this.isFallbackFont_(widthA, widthB) ||\r\n            this.isLastResortFont_(widthA, widthB)) {\r\n            if (Date.now() - this.started_ >= 3000) {\r\n                // timeout\r\n                if (this.isLastResortFont_(widthA, widthB)) {\r\n                    this.finish_(this.activeCallbacks);\r\n                    this.status = \"ok\";\r\n                }\r\n                else {\r\n                    this.finish_(this.inactiveCallbacks);\r\n                    this.status = \"ng\";\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this.check_();\r\n                }, 50);\r\n            }\r\n        }\r\n        else {\r\n            this.finish_(this.activeCallbacks);\r\n            this.status = \"ok\";\r\n        }\r\n    }\r\n    isFallbackFont_(a, b) {\r\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\r\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\r\n    }\r\n    widthsMatchLastResortWidths_(a, b) {\r\n        for (const font in LastResortFonts) {\r\n            if (LastResortFonts.hasOwnProperty(font)) {\r\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\r\n                    this.widthMatches_(b, LastResortFonts[font])) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    widthMatches_(width, lastResortFont) {\r\n        return width === this.lastResortWidths_[lastResortFont];\r\n    }\r\n    isLastResortFont_(a, b) {\r\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n    }\r\n    finish_(callbacks) {\r\n        setTimeout(() => {\r\n            this.fontRulerA_.remove();\r\n            this.fontRulerB_.remove();\r\n            callbacks.forEach((cb) => cb());\r\n        }, 0);\r\n    }\r\n}\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n        HAS_WEBKIT_FALLBACK_BUG =\r\n            !!match &&\r\n                (parseInt(match[1], 10) < 536 ||\r\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\r\n    }\r\n    return HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\nmodule.exports = FontWatchRunner;\r\n","\"use strict\";\r\n//see https://github.com/typekit/webfontloader\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FontRuler = void 0;\r\nfunction computeStyle(font) {\r\n    return [\r\n        {\r\n            display: \"block\",\r\n            position: \"absolute\",\r\n            top: \"-9999px\",\r\n            left: \"-9999px\",\r\n            width: \"auto\",\r\n            height: \"auto\",\r\n            margin: \"0\",\r\n            padding: \"0\",\r\n            \"white-space\": \"nowrap\",\r\n            font,\r\n        },\r\n        {\r\n            \"font-variant\": \"normal\",\r\n            \"font-size\": \"300px\",\r\n            \"font-style\": \"normal\",\r\n            \"font-weight\": \"400\",\r\n            \"line-height\": \"normal\",\r\n        },\r\n    ];\r\n}\r\nclass FontRuler {\r\n    constructor(font, testStr) {\r\n        const e = document.createElement(\"span\");\r\n        e.setAttribute(\"aria-hidden\", \"true\");\r\n        e.textContent = testStr || \"BESbswy\";\r\n        computeStyle(font).forEach((style) => {\r\n            for (const k in style) {\r\n                const key = k;\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                e.style[key] = style[key];\r\n            }\r\n        });\r\n        document.body.appendChild(e);\r\n        this.el_ = e;\r\n    }\r\n    getWidth() {\r\n        return this.el_.offsetWidth;\r\n    }\r\n    remove() {\r\n        document.body.removeChild(this.el_);\r\n    }\r\n}\r\nexports.FontRuler = FontRuler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlinePath2D = void 0;\r\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\r\nconst Inline_1 = require(\"./Inline\");\r\nconst canvases_1 = require(\"../internal/canvases\");\r\nclass InlinePath2D extends Inline_1.Inline {\r\n    constructor({ path, width, height, color }) {\r\n        super();\r\n        // IEPath2Dpolyfill\r\n        const Path2D = path2DManager.getPath2D();\r\n        this._path = new Path2D(path);\r\n        this._width = width;\r\n        this._height = height;\r\n        this._color = color;\r\n    }\r\n    width(_arg) {\r\n        return this._width;\r\n    }\r\n    font() {\r\n        return null;\r\n    }\r\n    color() {\r\n        var _a;\r\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    canDraw() {\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onReady(_callback) { }\r\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\r\n        offset++;\r\n        const padding = {\r\n            left: offsetLeft,\r\n            right: offsetRight,\r\n            top: offsetTop,\r\n            bottom: offsetBottom,\r\n        };\r\n        ctx.save();\r\n        try {\r\n            ctx.beginPath();\r\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n            //clip\r\n            ctx.clip();\r\n            //\r\n            const pos = (0, canvases_1.calcStartPosition)(ctx, rect, this._width, this._height, {\r\n                offset,\r\n                padding,\r\n            });\r\n            ctx.translate(pos.x, pos.y);\r\n            ctx.fill(this._path);\r\n        }\r\n        finally {\r\n            ctx.restore();\r\n        }\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlinePath2D = InlinePath2D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InlineSvg = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst InlineImage_1 = require(\"./InlineImage\");\r\nfunction buildSvgDataUrl(svg) {\r\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\r\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\r\n    return url;\r\n}\r\nfunction getSvgElement(svg) {\r\n    if (typeof svg === \"string\") {\r\n        const parser = new DOMParser();\r\n        return parser.parseFromString(svg, \"image/svg+xml\")\r\n            .children[0];\r\n    }\r\n    else {\r\n        return svg;\r\n    }\r\n}\r\nclass InlineSvg extends InlineImage_1.InlineImage {\r\n    constructor({ svg, width, height }) {\r\n        var _a, _b;\r\n        const svgElem = (0, utils_1.then)(svg, getSvgElement);\r\n        const elmWidth = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined\r\n            : undefined;\r\n        const elmHeight = !(0, utils_1.isPromise)(svgElem)\r\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined\r\n            : undefined;\r\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\r\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\r\n        super({\r\n            src: (0, utils_1.then)(svg, buildSvgDataUrl),\r\n            width: width || numElmWidth,\r\n            height: height || numElmHeight,\r\n            imageWidth: numElmWidth,\r\n            imageHeight: numElmHeight,\r\n        });\r\n    }\r\n    canBreak() {\r\n        return false;\r\n    }\r\n    toString() {\r\n        return \"\";\r\n    }\r\n}\r\nexports.InlineSvg = InlineSvg;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Header = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst Style_1 = require(\"../style/Style\");\r\nclass Header extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return Style_1.Style;\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, lineHeight, autoWrapText, lineClamp, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Header = Header;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultilineTextHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\r\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\r\n    }\r\n    clone() {\r\n        return new MultilineTextHeader(this);\r\n    }\r\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        const multilines = textValue\r\n            .replace(/\\r?\\n/g, \"\\n\")\r\n            .replace(/\\r/g, \"\\n\")\r\n            .split(\"\\n\");\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            helper.multilineText(multilines, context, {\r\n                textAlign,\r\n                textBaseline,\r\n                color,\r\n                font,\r\n                padding,\r\n                lineHeight,\r\n                autoWrapText,\r\n                lineClamp,\r\n                textOverflow,\r\n                icons,\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.MultilineTextHeader = MultilineTextHeader;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SortHeader = void 0;\r\nconst utils = __importStar(require(\"../../columns/type/columnUtils\"));\r\nconst BaseHeader_1 = require(\"./BaseHeader\");\r\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst canvases_1 = require(\"../../internal/canvases\");\r\nclass SortHeader extends BaseHeader_1.BaseHeader {\r\n    get StyleClass() {\r\n        return SortHeaderStyle_1.SortHeaderStyle;\r\n    }\r\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\r\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, padding, textOverflow, lineHeight, autoWrapText, lineClamp, sortArrowColor, multiline, } = style;\r\n        if (bgColor) {\r\n            drawCellBase({\r\n                bgColor,\r\n            });\r\n        }\r\n        const textValue = value != null ? String(value) : \"\";\r\n        helper.testFontLoad(font, textValue, context);\r\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n            const state = grid.sortState;\r\n            let order = undefined;\r\n            const { col, row } = context;\r\n            const range = grid.getCellRange(col, row);\r\n            if ((0, utils_1.cellInRange)(range, state.col, state.row)) {\r\n                ({ order } = state);\r\n            }\r\n            const ctx = context.getContext();\r\n            const arrowSize = (0, canvases_1.getFontSize)(ctx, font).width * 1.2;\r\n            const trailingIcon = {\r\n                name: order != null\r\n                    ? order === \"asc\"\r\n                        ? \"arrow_downward\"\r\n                        : \"arrow_upward\"\r\n                    : undefined,\r\n                width: arrowSize,\r\n                color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\r\n            };\r\n            if (multiline) {\r\n                const multilines = textValue\r\n                    .replace(/\\r?\\n/g, \"\\n\")\r\n                    .replace(/\\r/g, \"\\n\")\r\n                    .split(\"\\n\");\r\n                helper.multilineText(multilines, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    lineHeight,\r\n                    autoWrapText,\r\n                    lineClamp,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n            else {\r\n                helper.text(textValue, context, {\r\n                    textAlign,\r\n                    textBaseline,\r\n                    color,\r\n                    font,\r\n                    padding,\r\n                    textOverflow,\r\n                    icons,\r\n                    trailingIcon,\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.SortHeader = SortHeader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.icons = exports.icon = exports.theme = void 0;\r\nconst icons_1 = require(\"./plugins/icons\");\r\nconst themes_1 = require(\"./plugins/themes\");\r\nfunction register(obj, name, value) {\r\n    const old = obj[name];\r\n    obj[name] = value;\r\n    return old;\r\n}\r\nfunction registers(obj, values) {\r\n    for (const k in values) {\r\n        obj[k] = values[k];\r\n    }\r\n}\r\nfunction theme(name, theme) {\r\n    if (theme != null) {\r\n        return register(themes_1.themes, name, theme);\r\n    }\r\n    else {\r\n        return themes_1.themes[name];\r\n    }\r\n}\r\nexports.theme = theme;\r\nfunction icon(name, icon) {\r\n    if (icon != null) {\r\n        return register(icons_1.icons, name, icon);\r\n    }\r\n    else {\r\n        return icons_1.icons[name];\r\n    }\r\n}\r\nexports.icon = icon;\r\nfunction icons(icons) {\r\n    return registers(icons_1.icons, icons);\r\n}\r\nexports.icons = icons;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Theme = void 0;\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst symbolManager_1 = require(\"../internal/symbolManager\");\r\n//private symbol\r\nconst _ = (0, symbolManager_1.get)();\r\nfunction getProp(obj, superObj, names, defNames, convertForSuper, defaultValue) {\r\n    const value = (0, utils_1.getChainSafe)(obj, ...names) || (0, utils_1.getChainSafe)(superObj, ...names);\r\n    if (value) {\r\n        return value;\r\n    }\r\n    if (!defNames) {\r\n        return value || defaultValue;\r\n    }\r\n    const getChainSafeWithConvert = convertForSuper\r\n        ? (obj, ...names) => {\r\n            const value = (0, utils_1.getChainSafe)(obj, ...names);\r\n            if (!value) {\r\n                return value;\r\n            }\r\n            return convertForSuper(value);\r\n        }\r\n        : utils_1.getChainSafe;\r\n    return (getChainSafeWithConvert(obj, ...defNames) ||\r\n        getChainSafeWithConvert(superObj, ...defNames) ||\r\n        defaultValue);\r\n}\r\nclass Theme {\r\n    constructor(obj, superTheme) {\r\n        this._checkbox = null;\r\n        this._radioButton = null;\r\n        this._button = null;\r\n        this._header = null;\r\n        this._messages = null;\r\n        this._indicators = null;\r\n        this[_] = {\r\n            obj,\r\n            superTheme: superTheme,\r\n        };\r\n    }\r\n    get font() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"font\"]);\r\n    }\r\n    get underlayBackgroundColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\r\n    }\r\n    // color\r\n    get color() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"color\"]);\r\n    }\r\n    get frozenRowsColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\r\n    }\r\n    // background\r\n    get defaultBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\r\n    }\r\n    get frozenRowsBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get selectionBgColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\r\n    }\r\n    get highlightBgColor() {\r\n        if (this.hasProperty([\"highlightBgColor\"])) {\r\n            const { obj, superTheme } = this[_];\r\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return (args) => {\r\n            const color = args.row < args.grid.frozenRowCount\r\n                ? this.frozenRowsBgColor\r\n                : this.defaultBgColor;\r\n            if (typeof color === \"function\") {\r\n                return color(args);\r\n            }\r\n            return color;\r\n        };\r\n    }\r\n    // border\r\n    get borderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"borderColor\"]);\r\n    }\r\n    get frozenRowsBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get highlightBorderColor() {\r\n        const { obj, superTheme } = this[_];\r\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\r\n    }\r\n    get checkbox() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._checkbox ||\r\n            (this._checkbox = {\r\n                get uncheckBgColor() {\r\n                    return getCheckboxProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getCheckboxProp(\"checkBgColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get borderColor() {\r\n                    return getCheckboxProp(\"borderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n            }));\r\n        function getCheckboxProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"checkbox\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get radioButton() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._radioButton ||\r\n            (this._radioButton = {\r\n                get checkColor() {\r\n                    return getRadioButtonProp(\"checkColor\", [\"color\"]);\r\n                },\r\n                get uncheckBorderColor() {\r\n                    return getRadioButtonProp(\"uncheckBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get checkBorderColor() {\r\n                    return getRadioButtonProp(\"checkBorderColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get uncheckBgColor() {\r\n                    return getRadioButtonProp(\"uncheckBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n                get checkBgColor() {\r\n                    return getRadioButtonProp(\"checkBgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getRadioButtonProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"radioButton\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    get button() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._button ||\r\n            (this._button = {\r\n                get color() {\r\n                    return getButtonProp(\"color\", [\"color\"]);\r\n                },\r\n                get bgColor() {\r\n                    return getButtonProp(\"bgColor\", [\"defaultBgColor\"]);\r\n                },\r\n            }));\r\n        function getButtonProp(prop, defNames) {\r\n            return getProp(obj, superTheme, [\"button\", prop], defNames);\r\n        }\r\n    }\r\n    get header() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._header ||\r\n            (this._header = {\r\n                get sortArrowColor() {\r\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\r\n                },\r\n            }));\r\n    }\r\n    get messages() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._messages ||\r\n            (this._messages = {\r\n                get infoBgColor() {\r\n                    return getMessageProp(\"infoBgColor\");\r\n                },\r\n                get errorBgColor() {\r\n                    return getMessageProp(\"errorBgColor\");\r\n                },\r\n                get warnBgColor() {\r\n                    return getMessageProp(\"warnBgColor\");\r\n                },\r\n                get boxWidth() {\r\n                    return getMessageProp(\"boxWidth\");\r\n                },\r\n                get markHeight() {\r\n                    return getMessageProp(\"markHeight\");\r\n                },\r\n            }));\r\n        function getMessageProp(prop) {\r\n            return getProp(obj, superTheme, [\"messages\", prop]);\r\n        }\r\n    }\r\n    get indicators() {\r\n        const { obj, superTheme } = this[_];\r\n        return (this._indicators ||\r\n            (this._indicators = {\r\n                get topLeftColor() {\r\n                    return getIndicatorsProp(\"topLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topLeftSize() {\r\n                    return getIndicatorsProp(\"topLeftSize\");\r\n                },\r\n                get topRightColor() {\r\n                    return getIndicatorsProp(\"topRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get topRightSize() {\r\n                    return getIndicatorsProp(\"topRightSize\");\r\n                },\r\n                get bottomRightColor() {\r\n                    return getIndicatorsProp(\"bottomRightColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomRightSize() {\r\n                    return getIndicatorsProp(\"bottomRightSize\");\r\n                },\r\n                get bottomLeftColor() {\r\n                    return getIndicatorsProp(\"bottomLeftColor\", [\"borderColor\"], colorsToColor, \"#000\");\r\n                },\r\n                get bottomLeftSize() {\r\n                    return getIndicatorsProp(\"bottomLeftSize\");\r\n                },\r\n            }));\r\n        function getIndicatorsProp(prop, defNames, convertForSuper, defaultValue) {\r\n            return getProp(obj, superTheme, [\"indicators\", prop], defNames, convertForSuper, defaultValue);\r\n        }\r\n    }\r\n    hasProperty(names) {\r\n        const { obj, superTheme } = this[_];\r\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\r\n    }\r\n    extends(obj) {\r\n        return new Theme(obj, this);\r\n    }\r\n}\r\nexports.Theme = Theme;\r\nfunction hasThemeProperty(obj, names) {\r\n    if (obj instanceof Theme) {\r\n        return obj.hasProperty(names);\r\n    }\r\n    else {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        let o = obj;\r\n        if (!o) {\r\n            return false;\r\n        }\r\n        for (let index = 0; index < names.length; index++) {\r\n            const name = names[index];\r\n            o = o[name];\r\n            if (!o) {\r\n                return false;\r\n            }\r\n        }\r\n        return !!o;\r\n    }\r\n}\r\nfunction colorsToColor(colors) {\r\n    if (typeof colors === \"function\") {\r\n        return (arg) => {\r\n            const val = colors(arg);\r\n            return val ? colorsArrayToColor(val) : val;\r\n        };\r\n    }\r\n    return colorsArrayToColor(colors);\r\n    function colorsArrayToColor(\r\n    // eslint-disable-next-line @typescript-eslint/ban-types\r\n    colors) {\r\n        if (!Array.isArray(colors)) {\r\n            return colors;\r\n        }\r\n        return colors.find(Boolean) || undefined;\r\n    }\r\n}\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction DEFAULT_BG_COLOR(args) {\r\n    const { row, grid } = args;\r\n    if (row < grid.frozenRowCount) {\r\n        return \"#FFF\";\r\n    }\r\n    const index = grid.getRecordIndexByRow(row);\r\n    if (!(index & 1)) {\r\n        return \"#FFF\";\r\n    }\r\n    else {\r\n        return \"#F6F6F6\";\r\n    }\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n    let stop;\r\n    const stopsKey = [];\r\n    for (stop in colorStops) {\r\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\r\n    }\r\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\r\n    const ret = cacheLinearGradient[key];\r\n    if (ret) {\r\n        return ret;\r\n    }\r\n    const grad = context.createLinearGradient(left, top, left, bottom);\r\n    for (stop in colorStops) {\r\n        grad.addColorStop(Number(stop), colorStops[stop]);\r\n    }\r\n    return (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\r\n    const { left, top } = grid.getCellRelativeRect(col, 0);\r\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n    return getLinearGradient(context, left, top, left, bottom, {\r\n        0: \"#FFF\",\r\n        1: \"#D3D3D3\",\r\n    });\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"#000\",\r\n    // frozenRowsColor: '#000',\r\n    defaultBgColor: DEFAULT_BG_COLOR,\r\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: \"#000\",\r\n    // frozenRowsBorderColor: '#000',\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"#000\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"#000\",\r\n        uncheckBorderColor: \"#000\",\r\n        uncheckBgColor: \"#FFF\",\r\n        checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#000\",\r\n    },\r\n    underlayBackgroundColor: \"#F6F6F6\",\r\n};\r\n","\"use strict\";\r\n/*eslint no-bitwise:0*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n    const { row, grid: { frozenRowCount }, } = args;\r\n    if (frozenRowCount - 1 === row) {\r\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\r\n    }\r\n    else {\r\n        return [\"#f2f2f2\"];\r\n    }\r\n}\r\nfunction BORDER_COLOR(args) {\r\n    const { col, row, grid } = args;\r\n    const { colCount, frozenColCount, recordRowCount } = grid;\r\n    let top = \"#ccc7c7\";\r\n    let bottom = \"#ccc7c7\";\r\n    if (recordRowCount > 1) {\r\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\r\n        const endRow = startRow + recordRowCount - 1;\r\n        if (startRow !== row) {\r\n            top = null;\r\n        }\r\n        if (endRow !== row) {\r\n            bottom = null;\r\n        }\r\n    }\r\n    if (frozenColCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    if (colCount - 1 === col) {\r\n        return [top, \"#f2f2f2\", bottom, null];\r\n    }\r\n    return [top, null, bottom, null];\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nexports.default = {\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\r\n    defaultBgColor: \"#FFF\",\r\n    // frozenRowsBgColor: '#FFF',\r\n    selectionBgColor: \"#CCE0FF\",\r\n    borderColor: BORDER_COLOR,\r\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n    highlightBorderColor: \"#5E9ED6\",\r\n    checkbox: {\r\n        // uncheckBgColor: '#FFF',\r\n        checkBgColor: \"rgb(76, 73, 72)\",\r\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\r\n    },\r\n    radioButton: {\r\n        checkColor: \"rgb(76, 73, 72)\",\r\n        checkBorderColor: \"rgb(76, 73, 72)\",\r\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\r\n        // uncheckBgColor: \"#FFF\",\r\n        // checkBgColor: \"#FFF\",\r\n    },\r\n    button: {\r\n        color: \"#FFF\",\r\n        bgColor: \"#2196F3\",\r\n    },\r\n    header: {\r\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\r\n    },\r\n    indicators: {\r\n        topLeftColor: \"#ccc7c7\",\r\n    },\r\n    underlayBackgroundColor: \"#FFF\",\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.canvashelper = void 0;\r\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\r\nexports.canvashelper = canvashelper;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ListGrid = void 0;\r\nconst icons = __importStar(require(\"./internal/icons\"));\r\nconst themes = __importStar(require(\"./themes\"));\r\nconst data_1 = require(\"./data\");\r\nconst layout_map_1 = require(\"./list-grid/layout-map\");\r\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\r\nconst utils_1 = require(\"./internal/utils\");\r\nconst style_1 = require(\"./columns/style\");\r\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\r\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\r\nconst style_2 = require(\"./header/style\");\r\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\r\nconst Rect_1 = require(\"./internal/Rect\");\r\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\r\n//protected symbol\r\nconst symbolManager_1 = require(\"./internal/symbolManager\");\r\nconst paste_utils_1 = require(\"./internal/paste-utils\");\r\n/** @private */\r\nconst _ = (0, symbolManager_1.getProtectedSymbol)();\r\n//private methods\r\n/** @private */\r\nfunction _getCellRange(grid, col, row) {\r\n    return grid[_].layoutMap.getCellRange(col, row);\r\n}\r\n/** @private */\r\nfunction _updateRect(grid, col, row, context) {\r\n    context.setRectFilter((rect) => {\r\n        let { left, right, top, bottom } = rect;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\r\n        for (let c = col - 1; c >= startCol; c--) {\r\n            left -= grid.getColWidth(c);\r\n        }\r\n        for (let c = col + 1; c <= endCol; c++) {\r\n            right += grid.getColWidth(c);\r\n        }\r\n        for (let r = row - 1; r >= startRow; r--) {\r\n            top -= grid.getRowHeight(r);\r\n        }\r\n        for (let r = row + 1; r <= endRow; r++) {\r\n            bottom += grid.getRowHeight(r);\r\n        }\r\n        return Rect_1.Rect.bounds(left, top, right, bottom);\r\n    });\r\n}\r\n/** @private */\r\nfunction _getCellValue(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { caption } = grid[_].layoutMap.getHeader(col, row);\r\n        return typeof caption === \"function\" ? caption() : caption;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        return _getField(grid, field, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _setCellValue(grid, col, row, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvalue) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        // nop\r\n        return false;\r\n    }\r\n    else {\r\n        const { field } = grid[_].layoutMap.getBody(col, row);\r\n        if (field == null) {\r\n            return false;\r\n        }\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.setField(index, field, value);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getCellMessage(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const { message } = grid[_].layoutMap.getBody(col, row);\r\n        if (!message) {\r\n            return null;\r\n        }\r\n        if (!Array.isArray(message)) {\r\n            return _getField(grid, message, row);\r\n        }\r\n        const promises = [];\r\n        for (let index = 0; index < message.length; index++) {\r\n            const msg = _getField(grid, message[index], row);\r\n            if ((0, utils_1.isPromise)(msg)) {\r\n                promises.push(msg);\r\n            }\r\n            else if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                return msg;\r\n            }\r\n        }\r\n        if (!promises.length) {\r\n            return null;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            promises.forEach((p) => {\r\n                p.then((msg) => {\r\n                    if ((0, MessageHandler_1.hasMessage)(msg)) {\r\n                        resolve(msg);\r\n                    }\r\n                }, reject);\r\n            });\r\n        });\r\n    }\r\n}\r\nfunction _getCellIcon0(grid, icon, row) {\r\n    if (Array.isArray(icon)) {\r\n        return icon.map((i) => _getCellIcon0(grid, i, row));\r\n    }\r\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\r\n        return _getField(grid, icon, row);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const retIcon = {};\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const iconOpt = icon;\r\n    icons.iconPropKeys.forEach((k) => {\r\n        if (iconOpt[k]) {\r\n            const f = _getField(grid, iconOpt[k], row);\r\n            if (f != null) {\r\n                retIcon[k] = f;\r\n            }\r\n            else {\r\n                if (!_hasField(grid, iconOpt[k], row)) {\r\n                    retIcon[k] = iconOpt[k];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return retIcon;\r\n}\r\n/** @private */\r\nfunction _getCellIcon(grid, col, row) {\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        const { headerIcon } = grid[_].layoutMap.getHeader(col, row);\r\n        if (headerIcon == null) {\r\n            return null;\r\n        }\r\n        return headerIcon;\r\n    }\r\n    else {\r\n        const { icon } = grid[_].layoutMap.getBody(col, row);\r\n        if (icon == null) {\r\n            return null;\r\n        }\r\n        return _getCellIcon0(grid, icon, row);\r\n    }\r\n}\r\n/** @private */\r\nfunction _getField(grid, field, row) {\r\n    if (field == null) {\r\n        return null;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return null;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.getField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _hasField(grid, field, row) {\r\n    if (field == null) {\r\n        return false;\r\n    }\r\n    if (row < grid[_].layoutMap.headerRowCount) {\r\n        return false;\r\n    }\r\n    else {\r\n        const index = _getRecordIndexByRow(grid, row);\r\n        return grid[_].dataSource.hasField(index, field);\r\n    }\r\n}\r\n/** @private */\r\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\r\n    const helper = grid[_].gridCanvasHelper;\r\n    const drawCellBg = ({ bgColor, } = {}) => {\r\n        const fillOpt = {\r\n            fillColor: bgColor,\r\n        };\r\n        //cell\r\n        helper.fillCellWithState(context, fillOpt);\r\n    };\r\n    const drawCellBorder = () => {\r\n        if (context.col === grid.frozenColCount - 1) {\r\n            //\r\n            const rect = context.getRect();\r\n            helper.drawWithClip(context, (ctx) => {\r\n                const borderColor = context.row >= grid.frozenRowCount\r\n                    ? helper.theme.borderColor\r\n                    : helper.theme.frozenRowsBorderColor;\r\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.right - 2.5, rect.top);\r\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        _borderWithState(grid, helper, context);\r\n    };\r\n    const drawCellBase = ({ bgColor, } = {}) => {\r\n        drawCellBg({ bgColor });\r\n        drawCellBorder();\r\n    };\r\n    const info = {\r\n        getRecord: () => grid.getRowRecord(row),\r\n        getIcon: () => _getCellIcon(grid, col, row),\r\n        getMessage: () => _getCellMessage(grid, col, row),\r\n        messageHandler: grid[_].messageHandler,\r\n        style,\r\n        drawCellBase,\r\n        drawCellBg,\r\n        drawCellBorder,\r\n    };\r\n    return draw(cellValue, info, context, grid);\r\n}\r\n/** @private */\r\nfunction _borderWithState(grid, helper, context) {\r\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\r\n    const { col, row } = context;\r\n    const sel = grid.selection.select;\r\n    const { layoutMap } = grid[_];\r\n    const rect = context.getRect();\r\n    const option = {};\r\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\r\n    const selId = layoutMap.getCellId(sel.col, sel.row);\r\n    function isSelectCell(col, row) {\r\n        if (col === sel.col && row === sel.row) {\r\n            return true;\r\n        }\r\n        return (selId != null &&\r\n            layoutMap.getCellId(col, row) === selId &&\r\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\r\n    }\r\n    //\r\n    if (isSelectCell(col, row) &&\r\n        ((typeof helper.theme.highlightBorderColor == \"string\" &&\r\n            helper.theme.highlightBorderColor) ||\r\n            (typeof helper.theme.highlightBorderColor == \"function\" &&\r\n                helper.theme.highlightBorderColor(row, col)))) {\r\n        option.borderColor = helper.theme.highlightBorderColor;\r\n        option.lineWidth = 2;\r\n        helper.border(context, option);\r\n    }\r\n    else {\r\n        option.lineWidth = 1;\r\n        // header color\r\n        const isFrozenCell = grid.isFrozenCell(col, row);\r\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\r\n            option.borderColor = helper.theme.frozenRowsBorderColor;\r\n        }\r\n        let flagBorder = false;\r\n        if ((_b = layoutMap.getBody(col, row)) === null || _b === void 0 ? void 0 : _b.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_c = layoutMap.getBody(col, row)) === null || _c === void 0 ? void 0 : _c.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_e = (_d = layoutMap.getBody(col, row).style) === null || _d === void 0 ? void 0 : _d.borderColor) !== null && _e !== void 0 ? _e : \"\";\r\n            }\r\n            if (typeof ((_f = layoutMap.getBody(col, row)) === null || _f === void 0 ? void 0 : _f.style) == \"function\" &&\r\n                ((_g = grid[_].records) === null || _g === void 0 ? void 0 : _g.length)) {\r\n                borderColorCell = (_h = layoutMap.getBody(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _h === void 0 ? void 0 : _h.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if ((_j = layoutMap.getHeader(col, row)) === null || _j === void 0 ? void 0 : _j.style) {\r\n            let borderColorCell = \"\";\r\n            if (typeof ((_k = layoutMap.getHeader(col, row)) === null || _k === void 0 ? void 0 : _k.style) == \"object\") {\r\n                borderColorCell =\r\n                    (_m = (_l = layoutMap.getHeader(col, row).style) === null || _l === void 0 ? void 0 : _l.borderColor) !== null && _m !== void 0 ? _m : \"\";\r\n            }\r\n            if (typeof ((_o = layoutMap.getHeader(col, row)) === null || _o === void 0 ? void 0 : _o.style) == \"function\" &&\r\n                ((_p = grid[_].records) === null || _p === void 0 ? void 0 : _p.length)) {\r\n                borderColorCell = (_q = layoutMap.getHeader(col, row).style(grid[_].records[layoutMap.getRecordIndexByRow(row)], col, row)) === null || _q === void 0 ? void 0 : _q.borderColor;\r\n            }\r\n            if (borderColorCell) {\r\n                option.borderColor = borderColorCell;\r\n                helper.border(context, option);\r\n                flagBorder = true;\r\n            }\r\n        }\r\n        if (!flagBorder) {\r\n            helper.border(context, option);\r\n        }\r\n        //\r\n        if (col > 0 && isSelectCell(col - 1, row)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[1]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[1];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left - 0.5, rect.top);\r\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n        else if (row > 0 && isSelectCell(col, row - 1)) {\r\n            //\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\r\n                if (borderColors[0]) {\r\n                    ctx.lineWidth = 1;\r\n                    ctx.strokeStyle = borderColors[0];\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(rect.left, rect.top - 0.5);\r\n                    ctx.lineTo(rect.right, rect.top - 0.5);\r\n                    ctx.stroke();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshHeader(grid) {\r\n    var _b;\r\n    const protectedSpace = grid[_];\r\n    if (protectedSpace.headerEvents) {\r\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\r\n    }\r\n    const headerEvents = (grid[_].headerEvents = []);\r\n    headerEvents.forEach((id) => grid.unlisten(id));\r\n    let layoutMap;\r\n    if (protectedSpace.layout &&\r\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\r\n    }\r\n    else {\r\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_b = protectedSpace.header) !== null && _b !== void 0 ? _b : []);\r\n    }\r\n    layoutMap.headerObjects.forEach((cell) => {\r\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\r\n        headerEvents.push(...ids);\r\n        if (cell.style) {\r\n            if (cell.style instanceof style_2.BaseStyle) {\r\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n        if (cell.action) {\r\n            const ids = cell.action.bindGridEvent(grid, cell.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n    });\r\n    layoutMap.columnObjects.forEach((col) => {\r\n        if (col.action) {\r\n            const ids = col.action.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.columnType) {\r\n            const ids = col.columnType.bindGridEvent(grid, col.id);\r\n            headerEvents.push(...ids);\r\n        }\r\n        if (col.style) {\r\n            if (col.style instanceof style_1.BaseStyle) {\r\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n                    grid.invalidate();\r\n                });\r\n                headerEvents.push(id);\r\n            }\r\n        }\r\n    });\r\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\r\n        const column = layoutMap.columnWidths[col];\r\n        const { width, minWidth, maxWidth } = column;\r\n        if (width && (typeof width === \"string\" || width > 0)) {\r\n            grid.setColWidth(col, width);\r\n        }\r\n        else {\r\n            grid.setColWidth(col, null);\r\n        }\r\n        if (minWidth && (typeof minWidth === \"string\" || minWidth > 0)) {\r\n            grid.setMinColWidth(col, minWidth);\r\n        }\r\n        else {\r\n            grid.setMinColWidth(col, null);\r\n        }\r\n        if (maxWidth && (typeof maxWidth === \"string\" || maxWidth > 0)) {\r\n            grid.setMaxColWidth(col, maxWidth);\r\n        }\r\n        else {\r\n            grid.setMaxColWidth(col, null);\r\n        }\r\n    }\r\n    const { headerRowHeight } = grid[_];\r\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\r\n        const height = Array.isArray(headerRowHeight)\r\n            ? headerRowHeight[row]\r\n            : headerRowHeight;\r\n        if (height && height > 0) {\r\n            grid.setRowHeight(row, height);\r\n        }\r\n        else {\r\n            grid.setRowHeight(row, null);\r\n        }\r\n    }\r\n    grid.colCount = layoutMap.colCount;\r\n    _refreshRowCount(grid);\r\n    if (grid.frozenRowCount == 0) {\r\n        grid.frozenRowCount = layoutMap.headerRowCount;\r\n    }\r\n}\r\n/** @private */\r\nfunction _refreshRowCount(grid) {\r\n    const { layoutMap } = grid[_];\r\n    grid.rowCount =\r\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\r\n            layoutMap.headerRowCount;\r\n}\r\n/** @private */\r\nfunction _tryWithUpdateDataSource(grid, fn) {\r\n    const { dataSourceEventIds } = grid[_];\r\n    if (dataSourceEventIds) {\r\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n    }\r\n    fn(grid);\r\n    grid[_].dataSourceEventIds = [\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n            _refreshRowCount(grid);\r\n            grid.invalidate();\r\n        }),\r\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n            grid.invalidate();\r\n        }),\r\n    ];\r\n}\r\n/** @private */\r\nfunction _setRecords(grid, records = []) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        grid[_].records = records;\r\n        const newDataSource = (grid[_].dataSource =\r\n            data_1.CachedDataSource.ofArray(records));\r\n        grid.addDisposable(newDataSource);\r\n    });\r\n}\r\n/** @private */\r\nfunction _setDataSource(grid, dataSource) {\r\n    _tryWithUpdateDataSource(grid, () => {\r\n        if (dataSource) {\r\n            if (dataSource instanceof data_1.DataSource) {\r\n                grid[_].dataSource = dataSource;\r\n            }\r\n            else {\r\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\r\n                grid.addDisposable(newDataSource);\r\n            }\r\n        }\r\n        else {\r\n            grid[_].dataSource = data_1.DataSource.EMPTY;\r\n        }\r\n        grid[_].records = null;\r\n    });\r\n}\r\n/** @private */\r\nfunction _getRecordIndexByRow(grid, row) {\r\n    const { layoutMap } = grid[_];\r\n    return layoutMap.getRecordIndexByRow(row);\r\n}\r\n/** @private */\r\nfunction _onRangePaste(text, test = () => true) {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const values = (0, paste_utils_1.parsePasteRangeBoxValues)(text, {\r\n        trimOnPaste: this.trimOnPaste,\r\n    });\r\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\r\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let rejectedDetail = [];\r\n    const addRejectedDetail = (cell, record, define, pasteValue) => {\r\n        rejectedDetail.push({\r\n            col: cell.col,\r\n            row: cell.row,\r\n            record,\r\n            define,\r\n            pasteValue,\r\n        });\r\n    };\r\n    let timeout = null;\r\n    const processRejected = () => {\r\n        if (timeout)\r\n            clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            if (rejectedDetail.length > 0) {\r\n                this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.REJECTED_PASTE_VALUES, {\r\n                    detail: rejectedDetail,\r\n                });\r\n                rejectedDetail = [];\r\n            }\r\n        }, 100);\r\n    };\r\n    let reject = addRejectedDetail;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    let valuesRow = 0;\r\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\r\n        let valuesCol = 0;\r\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\r\n            const { action, id, define } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\r\n                (0, utils_1.then)(this.getRowRecord(row), (record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (oldValue) => {\r\n                        if (test({\r\n                            grid: this,\r\n                            record: record,\r\n                            col,\r\n                            row,\r\n                            value: cellValue,\r\n                            oldValue,\r\n                        })) {\r\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue, {\r\n                                reject() {\r\n                                    reject({ col, row }, record, define, cellValue);\r\n                                },\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            valuesCol++;\r\n            if (valuesCol >= values.colCount) {\r\n                valuesCol = 0;\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n        valuesRow++;\r\n        if (valuesRow >= values.rowCount) {\r\n            valuesRow = 0;\r\n        }\r\n    }\r\n    const newEnd = {\r\n        col: start.col + pasteColCount - 1,\r\n        row: start.row + pasteRowCount - 1,\r\n    };\r\n    this.selection.range = {\r\n        start,\r\n        end: newEnd,\r\n    };\r\n    this.invalidateCellRange(this.selection.range);\r\n    processRejected();\r\n    reject = (cell, record, define, pasteValue) => {\r\n        addRejectedDetail(cell, record, define, pasteValue);\r\n        processRejected();\r\n    };\r\n}\r\n/** @private */\r\nfunction _onRangeDelete() {\r\n    var _b;\r\n    const { layoutMap } = this[_];\r\n    const selectionRange = this.selection.range;\r\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\r\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\r\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\r\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\r\n    let hasEditable = false;\r\n    const actionColumnsBox = [];\r\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\r\n        const actionColumnsRow = [];\r\n        actionColumnsBox.push(actionColumnsRow);\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\r\n            actionColumnsRow[offsetCol] = body;\r\n            if (!hasEditable && ((_b = body.action) === null || _b === void 0 ? void 0 : _b.editable)) {\r\n                hasEditable = true;\r\n            }\r\n        }\r\n    }\r\n    if (!hasEditable) {\r\n        return;\r\n    }\r\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\r\n    const startRowOffset = start.row - startRow;\r\n    let duplicate = {};\r\n    let actionRow = startRowOffset;\r\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\r\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\r\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\r\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\r\n                duplicate[id] = true;\r\n                const col = start.col + offsetCol;\r\n                const row = start.row + offsetRow;\r\n                (0, utils_1.then)(this.getRowRecord(row), (_record) => {\r\n                    (0, utils_1.then)(_getCellValue(this, col, row), (_oldValue) => {\r\n                        action.onDeleteCellRangeBox(this, { col, row });\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        actionRow++;\r\n        if (actionRow >= layoutMap.bodyRowCount) {\r\n            actionRow = 0;\r\n            duplicate = {};\r\n        }\r\n    }\r\n    this.invalidateCellRange(selectionRange);\r\n}\r\n/**\r\n * ListGrid\r\n * @classdesc cheetahGrid.ListGrid\r\n * @memberof cheetahGrid\r\n */\r\nclass ListGrid extends DrawGrid_1.DrawGrid {\r\n    static get EVENT_TYPE() {\r\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\r\n    }\r\n    /**\r\n     * constructor\r\n     *\r\n     * @constructor\r\n     * @param options Constructor options\r\n     */\r\n    constructor(options = {}) {\r\n        var _b, _c;\r\n        super((0, utils_1.omit)(options, [\"colCount\", \"rowCount\"]));\r\n        this[_a] = this[_];\r\n        this.disabled = false;\r\n        this.readOnly = false;\r\n        const protectedSpace = this[_];\r\n        protectedSpace.header = options.header || [];\r\n        protectedSpace.layout = options.layout || [];\r\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\r\n        protectedSpace.frozenRowCount = (_b = options.frozenRowCount) !== null && _b !== void 0 ? _b : 0;\r\n        if (options.dataSource) {\r\n            _setDataSource(this, options.dataSource);\r\n        }\r\n        else {\r\n            _setRecords(this, options.records);\r\n        }\r\n        protectedSpace.allowRangePaste = (_c = options.allowRangePaste) !== null && _c !== void 0 ? _c : false;\r\n        _refreshHeader(this);\r\n        protectedSpace.sortState = {\r\n            col: -1,\r\n            row: -1,\r\n            order: undefined,\r\n        };\r\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\r\n        protectedSpace.theme = themes.of(options.theme);\r\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\r\n        this.invalidate();\r\n        protectedSpace.handler.on(window, \"resize\", () => {\r\n            this.updateSize();\r\n            this.updateScroll();\r\n            this.invalidate();\r\n        });\r\n    }\r\n    /**\r\n     * Dispose the grid instance.\r\n     * @returns {void}\r\n     */\r\n    dispose() {\r\n        const protectedSpace = this[_];\r\n        protectedSpace.messageHandler.dispose();\r\n        protectedSpace.tooltipHandler.dispose();\r\n        super.dispose();\r\n    }\r\n    /**\r\n     * Gets the define of the header.\r\n     */\r\n    get header() {\r\n        return this[_].header;\r\n    }\r\n    /**\r\n     * Sets the define of the header with the given data.\r\n     * <pre>\r\n     * column options\r\n     * -----\r\n     * caption: header caption\r\n     * field: field name\r\n     * width: column width\r\n     * minWidth: column min width\r\n     * maxWidth: column max width\r\n     * icon: icon definition\r\n     * message: message key name\r\n     * columnType: column type\r\n     * action: column action\r\n     * style: column style\r\n     * headerType: header type\r\n     * headerStyle: header style\r\n     * headerAction: header action\r\n     * headerField: header field name\r\n     * headerIcon: header icon definition\r\n     * sort: define sort setting\r\n     * -----\r\n     *\r\n     * multiline header\r\n     * -----\r\n     * caption: header caption\r\n     * columns: columns define\r\n     * -----\r\n     * </pre>\r\n     */\r\n    set header(header) {\r\n        this[_].header = header;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Gets the define of the layout.\r\n     */\r\n    get layout() {\r\n        return this[_].layout;\r\n    }\r\n    /**\r\n     * Sets the define of the layout with the given data.\r\n     */\r\n    set layout(layout) {\r\n        this[_].layout = layout;\r\n        _refreshHeader(this);\r\n    }\r\n    /**\r\n     * Get the row count per record\r\n     */\r\n    get recordRowCount() {\r\n        return this[_].layoutMap.bodyRowCount;\r\n    }\r\n    /**\r\n     * Get the records.\r\n     */\r\n    get records() {\r\n        return this[_].records || null;\r\n    }\r\n    /**\r\n     * Set the records from given\r\n     */\r\n    set records(records) {\r\n        if (records == null) {\r\n            return;\r\n        }\r\n        _setRecords(this, records);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the data source.\r\n     */\r\n    get dataSource() {\r\n        return this[_].dataSource;\r\n    }\r\n    /**\r\n     * Set the data source from given\r\n     */\r\n    set dataSource(dataSource) {\r\n        _setDataSource(this, dataSource);\r\n        _refreshRowCount(this);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * Get the theme.\r\n     */\r\n    get theme() {\r\n        return this[_].theme;\r\n    }\r\n    /**\r\n     * Set the theme from given\r\n     */\r\n    set theme(theme) {\r\n        this[_].theme = themes.of(theme);\r\n        this.invalidate();\r\n    }\r\n    /**\r\n     * If set to true to allow pasting of ranges.\r\n     */\r\n    get allowRangePaste() {\r\n        return this[_].allowRangePaste;\r\n    }\r\n    set allowRangePaste(allowRangePaste) {\r\n        this[_].allowRangePaste = allowRangePaste;\r\n    }\r\n    /**\r\n     * Get the font definition as a string.\r\n     * @override\r\n     */\r\n    get font() {\r\n        return super.font || this[_].gridCanvasHelper.theme.font;\r\n    }\r\n    /**\r\n     * Set the font definition with the given string.\r\n     * @override\r\n     */\r\n    set font(font) {\r\n        super.font = font;\r\n    }\r\n    /**\r\n     * Get the background color of the underlay.\r\n     * @override\r\n     */\r\n    get underlayBackgroundColor() {\r\n        return (super.underlayBackgroundColor ||\r\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\r\n    }\r\n    /**\r\n     * Set the background color of the underlay.\r\n     * @override\r\n     */\r\n    set underlayBackgroundColor(underlayBackgroundColor) {\r\n        super.underlayBackgroundColor = underlayBackgroundColor;\r\n    }\r\n    /**\r\n     * Get the sort state.\r\n     */\r\n    get sortState() {\r\n        return this[_].sortState;\r\n    }\r\n    /**\r\n     * Sets the sort state.\r\n     * If `null` to set, the sort state is initialized.\r\n     */\r\n    set sortState(sortState) {\r\n        const oldState = this.sortState;\r\n        let oldField;\r\n        if (oldState.col >= 0 && oldState.row >= 0) {\r\n            oldField = this.getHeaderField(oldState.col, oldState.row);\r\n        }\r\n        const newState = (this[_].sortState =\r\n            sortState != null\r\n                ? sortState\r\n                : {\r\n                    col: -1,\r\n                    row: -1,\r\n                    order: undefined,\r\n                });\r\n        let newField;\r\n        if (newState.col >= 0 && newState.row >= 0) {\r\n            newField = this.getHeaderField(newState.col, newState.row);\r\n        }\r\n        // bind header value\r\n        if (oldField != null && oldField !== newField) {\r\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\r\n        }\r\n        if (newField != null) {\r\n            this.setHeaderValue(newState.col, newState.row, newState.order);\r\n        }\r\n    }\r\n    /**\r\n     * Get the header values.\r\n     */\r\n    get headerValues() {\r\n        return this[_].headerValues || (this[_].headerValues = new Map());\r\n    }\r\n    /**\r\n     * Sets the header values.\r\n     */\r\n    set headerValues(headerValues) {\r\n        this[_].headerValues = headerValues || new Map();\r\n    }\r\n    /**\r\n     * Get the field of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The field object.\r\n     */\r\n    getField(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\r\n    }\r\n    /**\r\n     * Get the column define of the given column index.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The row index.\r\n     * @return {*} The column define object.\r\n     */\r\n    getColumnDefine(col, row) {\r\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\r\n    }\r\n    getColumnType(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).columnType;\r\n    }\r\n    getColumnAction(col, row) {\r\n        return this[_].layoutMap.getBody(col, row).action;\r\n    }\r\n    /**\r\n     * Get the header field of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The field object.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderField(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.field;\r\n    }\r\n    /**\r\n     * Get the header define of the given header cell.\r\n     * @param  {number} col The column index.\r\n     * @param  {number} row The header row index.\r\n     * @return {*} The header define object.\r\n     */\r\n    getHeaderDefine(col, row) {\r\n        const hd = this[_].layoutMap.getHeader(col, row);\r\n        return hd.define;\r\n    }\r\n    /**\r\n     * Get the record of the given row index.\r\n     * @param  {number} row The row index.\r\n     * @return {object} The record.\r\n     */\r\n    getRowRecord(row) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\r\n        }\r\n    }\r\n    /**\r\n     * Get the record index of the given row index.\r\n     * @param  {number} row The row index.\r\n     */\r\n    getRecordIndexByRow(row) {\r\n        return _getRecordIndexByRow(this, row);\r\n    }\r\n    /**\r\n     * Gets the row index starting at the given record index.\r\n     * @param  {number} index The record index.\r\n     */\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @return {number} The column index.\r\n     * @deprecated use `getCellRangeByField` instead\r\n     */\r\n    getColumnIndexByField(field) {\r\n        var _b;\r\n        const range = this.getCellRangeByField(field, 0);\r\n        return (_b = range === null || range === void 0 ? void 0 : range.start.col) !== null && _b !== void 0 ? _b : null;\r\n    }\r\n    /**\r\n     * Get the column index of the given field.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {number} The column index.\r\n     */\r\n    getCellRangeByField(field, index) {\r\n        const { layoutMap } = this[_];\r\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\r\n        if (colObj) {\r\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\r\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\r\n            return {\r\n                start: {\r\n                    col: layoutRange.start.col,\r\n                    row: startRow + layoutRange.start.row,\r\n                },\r\n                end: {\r\n                    col: layoutRange.end.col,\r\n                    row: startRow + layoutRange.end.row,\r\n                },\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Focus the cell.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    focusGridCell(field, index) {\r\n        var _b;\r\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\r\n        const newFocus = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        if (newFocus == null) {\r\n            return;\r\n        }\r\n        this.focusCell(newFocus.col, newFocus.row);\r\n        this.selection.select = newFocus;\r\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n        this.invalidateCell(newFocus.col, newFocus.row);\r\n    }\r\n    /**\r\n     * Scroll to where cell is visible.\r\n     * @param  {*} field The field.\r\n     * @param  {number} index The record index\r\n     * @return {void}\r\n     */\r\n    makeVisibleGridCell(field, index) {\r\n        var _b, _c, _d;\r\n        const cell = (_b = this.getCellRangeByField(field, index)) === null || _b === void 0 ? void 0 : _b.start;\r\n        this.makeVisibleCell((_c = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _c !== void 0 ? _c : 0, (_d = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _d !== void 0 ? _d : this[_].layoutMap.headerRowCount);\r\n    }\r\n    getGridCanvasHelper() {\r\n        return this[_].gridCanvasHelper;\r\n    }\r\n    /**\r\n     * Get cell range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     */\r\n    getCellRange(col, row) {\r\n        return _getCellRange(this, col, row);\r\n    }\r\n    /**\r\n     * Get header range information for a given cell.\r\n     * @param {number} col column index of the cell\r\n     * @param {number} row row index of the cell\r\n     * @returns {object} cell range info\r\n     * @deprecated use `getCellRange` instead\r\n     */\r\n    getHeaderCellRange(col, row) {\r\n        return this.getCellRange(col, row);\r\n    }\r\n    getCopyCellValue(col, row, range) {\r\n        const cellRange = _getCellRange(this, col, row);\r\n        const startCol = range\r\n            ? Math.max(range.start.col, cellRange.start.col)\r\n            : cellRange.start.col;\r\n        const startRow = range\r\n            ? Math.max(range.start.row, cellRange.start.row)\r\n            : cellRange.start.row;\r\n        if (startCol !== col || startRow !== row) {\r\n            return \"\";\r\n        }\r\n        const value = _getCellValue(this, col, row);\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            const headerData = this[_].layoutMap.getHeader(col, row);\r\n            return headerData.headerType.getCopyCellValue(value, this, { col, row });\r\n        }\r\n        const columnData = this[_].layoutMap.getBody(col, row);\r\n        return columnData.columnType.getCopyCellValue(value, this, { col, row });\r\n    }\r\n    onDrawCell(col, row, context) {\r\n        const { layoutMap } = this[_];\r\n        let draw;\r\n        let style;\r\n        if (row < layoutMap.headerRowCount) {\r\n            const hd = layoutMap.getHeader(col, row);\r\n            draw = hd.headerType.onDrawCell;\r\n            ({ style } = hd);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        else {\r\n            const column = layoutMap.getBody(col, row);\r\n            draw = column.columnType.onDrawCell;\r\n            ({ style } = column);\r\n            _updateRect(this, col, row, context);\r\n        }\r\n        const cellValue = _getCellValue(this, col, row);\r\n        if (this.rowCount <= row) {\r\n            // Depending on the FilterDataSource, the rowCount may be reduced.\r\n            return undefined;\r\n        }\r\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\r\n    }\r\n    doGetCellValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    valueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const value = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(value)) {\r\n                //\r\n                return false;\r\n            }\r\n            valueCallback(value);\r\n        }\r\n        return true;\r\n    }\r\n    doChangeValue(col, row, \r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    changeValueCallback) {\r\n        if (row < this[_].layoutMap.headerRowCount) {\r\n            // nop\r\n            return false;\r\n        }\r\n        else {\r\n            const record = this.getRowRecord(row);\r\n            if ((0, utils_1.isPromise)(record)) {\r\n                //\r\n                return false;\r\n            }\r\n            const before = _getCellValue(this, col, row);\r\n            if ((0, utils_1.isPromise)(before)) {\r\n                //\r\n                return false;\r\n            }\r\n            const after = changeValueCallback(before);\r\n            if (after === undefined) {\r\n                return false;\r\n            }\r\n            const { field } = this[_].layoutMap.getBody(col, row);\r\n            this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BEFORE_CHANGE_VALUE, {\r\n                col,\r\n                row,\r\n                record: record,\r\n                field: field,\r\n                value: after,\r\n                oldValue: before,\r\n            });\r\n            return (0, utils_1.then)(_setCellValue(this, col, row, after), (ret) => {\r\n                if (ret) {\r\n                    const { field } = this[_].layoutMap.getBody(col, row);\r\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\r\n                        col,\r\n                        row,\r\n                        record: record,\r\n                        field: field,\r\n                        value: after,\r\n                        oldValue: before,\r\n                    });\r\n                }\r\n                return ret;\r\n            });\r\n        }\r\n    }\r\n    doSetPasteValue(text, test) {\r\n        _onRangePaste.call(this, text, test);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getHeaderValue(col, row) {\r\n        const field = this.getHeaderField(col, row);\r\n        return this.headerValues.get(field);\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setHeaderValue(col, row, newValue) {\r\n        const field = this.getHeaderField(col, row);\r\n        const oldValue = this.headerValues.get(field);\r\n        this.headerValues.set(field, newValue);\r\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\r\n            col,\r\n            row,\r\n            field,\r\n            value: newValue,\r\n            oldValue,\r\n        });\r\n    }\r\n    getLayoutCellId(col, row) {\r\n        return this[_].layoutMap.getCellId(col, row);\r\n    }\r\n    bindEventsInternal() {\r\n        const grid = this;\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            const range = _getCellRange(this, e.col, e.row);\r\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\r\n            if (startCol !== endCol || startRow !== endRow) {\r\n                this.invalidateCellRange(range);\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\r\n            if (!this[_].allowRangePaste) {\r\n                return;\r\n            }\r\n            const { start, end } = this.selection.range;\r\n            if (!e.multi && (0, utils_1.cellEquals)(start, end)) {\r\n                return;\r\n            }\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangePaste.call(this, e.normalizeValue);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\r\n            const { start } = this.selection.range;\r\n            const { layoutMap } = this[_];\r\n            if (start.row < layoutMap.headerRowCount) {\r\n                return;\r\n            }\r\n            utils_1.event.cancel(e.event);\r\n            _onRangeDelete.call(this);\r\n        });\r\n    }\r\n    getMoveLeftColByKeyDownInternal({ col, row }) {\r\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\r\n        col = startCol;\r\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveRightColByKeyDownInternal({ col, row, }) {\r\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\r\n        col = endCol;\r\n        return super.getMoveRightColByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveUpRowByKeyDownInternal({ col, row }) {\r\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\r\n        row = startRow;\r\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\r\n    }\r\n    getMoveDownRowByKeyDownInternal({ col, row }) {\r\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\r\n        row = endRow;\r\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\r\n    }\r\n    getOffsetInvalidateCells() {\r\n        return 1;\r\n    }\r\n    getCopyRangeInternal(range) {\r\n        const { start } = this.getCellRange(range.start.col, range.start.row);\r\n        const { end } = this.getCellRange(range.end.col, range.end.row);\r\n        return { start, end };\r\n    }\r\n    fireListeners(type, ...event) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return super.fireListeners(type, ...event);\r\n    }\r\n}\r\nexports.ListGrid = ListGrid;\r\n_a = _;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = exports.SimpleHeaderLayoutMap = void 0;\r\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\r\nObject.defineProperty(exports, \"SimpleHeaderLayoutMap\", { enumerable: true, get: function () { return simple_header_layout_1.SimpleHeaderLayoutMap; } });\r\nvar multi_layout_1 = require(\"./internal/multi-layout\");\r\nObject.defineProperty(exports, \"MultiLayoutMap\", { enumerable: true, get: function () { return multi_layout_1.MultiLayoutMap; } });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SimpleHeaderLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nlet seqId = 0;\r\nclass SimpleHeaderLayoutMap {\r\n    constructor(header) {\r\n        this.bodyRowCount = 1;\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        this._columns = [];\r\n        this._headerCellIds = [];\r\n        this._headerObjects = this._addHeaders(0, header, []);\r\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\r\n            o[e.id] = e;\r\n            return o;\r\n        }, {});\r\n    }\r\n    get columnWidths() {\r\n        return this._columns;\r\n    }\r\n    get headerRowCount() {\r\n        return this._headerCellIds.length;\r\n    }\r\n    get colCount() {\r\n        return this._columns.length;\r\n    }\r\n    get headerObjects() {\r\n        return this._headerObjects;\r\n    }\r\n    get columnObjects() {\r\n        return this._columns;\r\n    }\r\n    getCellId(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            return this._columns[col].id;\r\n        }\r\n        //in header\r\n        return this._headerCellIds[row][col];\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._headerObjectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, _row) {\r\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        for (let col = 0; col < this.colCount; col++) {\r\n            if (id === this._columns[col].id) {\r\n                return {\r\n                    start: { col, row: 0 },\r\n                    end: { col, row: 0 },\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        const result = { start: { col, row }, end: { col, row } };\r\n        if (this.headerRowCount <= row) {\r\n            return result;\r\n        }\r\n        //in header\r\n        const id = this.getCellId(col, row);\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < this.colCount; c++) {\r\n            if (id !== this.getCellId(c, row)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = row - 1; r >= 0; r--) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.start.row = r;\r\n        }\r\n        for (let r = row + 1; r < this.headerRowCount; r++) {\r\n            if (id !== this.getCellId(col, r)) {\r\n                break;\r\n            }\r\n            result.end.row = r;\r\n        }\r\n        return result;\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            return row - this.headerRowCount;\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index;\r\n    }\r\n    _addHeaders(row, header, roots) {\r\n        const results = [];\r\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\r\n        header.forEach((hd) => {\r\n            const col = this._columns.length;\r\n            const id = seqId++;\r\n            const cell = {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n            results[id] = cell;\r\n            rowCells[col] = id;\r\n            for (let r = row - 1; r >= 0; r--) {\r\n                this._headerCellIds[r][col] = roots[r];\r\n            }\r\n            if (hd.columns) {\r\n                this._addHeaders(row + 1, hd.columns, [\r\n                    ...roots,\r\n                    id,\r\n                ]).forEach((c) => results.push(c));\r\n            }\r\n            else {\r\n                const colDef = hd;\r\n                this._columns.push({\r\n                    id: seqId++,\r\n                    field: colDef.field,\r\n                    width: colDef.width,\r\n                    minWidth: colDef.minWidth,\r\n                    maxWidth: colDef.maxWidth,\r\n                    icon: colDef.icon,\r\n                    message: colDef.message,\r\n                    columnType: columns.type.of(colDef.columnType),\r\n                    action: columns.action.of(colDef.action),\r\n                    style: colDef.style,\r\n                    define: colDef,\r\n                });\r\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\r\n                    this._headerCellIds[r][col] = id;\r\n                }\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n    _newRow(row) {\r\n        const newRow = (this._headerCellIds[row] = []);\r\n        if (!this._columns.length) {\r\n            return newRow;\r\n        }\r\n        const prev = this._headerCellIds[row - 1];\r\n        for (let col = 0; col < prev.length; col++) {\r\n            newRow[col] = prev[col];\r\n        }\r\n        return newRow;\r\n    }\r\n}\r\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MultiLayoutMap = void 0;\r\nconst columns = __importStar(require(\"../../../columns\"));\r\nconst headerAction = __importStar(require(\"../../../header/action\"));\r\nconst headerType = __importStar(require(\"../../../header/type\"));\r\nconst utils_1 = require(\"./utils\");\r\nfunction normalizeLayout(layout) {\r\n    if (Array.isArray(layout)) {\r\n        return {\r\n            header: layout,\r\n            body: layout,\r\n        };\r\n    }\r\n    return layout;\r\n}\r\nlet seqId = 0;\r\nclass LayoutObjectGrid {\r\n    constructor(layout, transform) {\r\n        this.objects = [];\r\n        this.objectGrid = [];\r\n        this.objectMap = {};\r\n        this.columnCount = 0;\r\n        this.columnWidths = [];\r\n        layout.forEach((rowLayout, row) => {\r\n            let col = 0;\r\n            rowLayout.forEach((cell) => {\r\n                var _a, _b;\r\n                const id = seqId++;\r\n                const obj = transform(cell, id);\r\n                this.objects.push(obj);\r\n                this.objectMap[id] = obj;\r\n                col = this._findStartCell(col, row);\r\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\r\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\r\n                const endRow = row + rowSpan;\r\n                const endCol = col + colSpan;\r\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\r\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\r\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\r\n                        objectGridRow[colIndex] = obj;\r\n                    }\r\n                }\r\n                if (colSpan === 1) {\r\n                    this._setWidthDataIfAbsent(col, cell);\r\n                }\r\n                this._useColumnIndex(endCol - 1);\r\n                col = endCol;\r\n            });\r\n        });\r\n    }\r\n    get rowCount() {\r\n        return this.objectGrid.length;\r\n    }\r\n    _findStartCell(col, row) {\r\n        const objectGridRow = this._getObjectGridRow(row);\r\n        for (let index = col; index < objectGridRow.length; index++) {\r\n            if (!objectGridRow[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return objectGridRow.length;\r\n    }\r\n    _getObjectGridRow(row) {\r\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\r\n    }\r\n    _useColumnIndex(col) {\r\n        if (this.columnCount > col) {\r\n            return;\r\n        }\r\n        this.columnCount = col + 1;\r\n    }\r\n    _setWidthDataIfAbsent(col, cell) {\r\n        if (!this.columnWidths[col]) {\r\n            if (cell.width != null ||\r\n                cell.maxWidth != null ||\r\n                cell.minWidth != null) {\r\n                this.columnWidths[col] = {\r\n                    width: cell.width,\r\n                    maxWidth: cell.maxWidth,\r\n                    minWidth: cell.minWidth,\r\n                };\r\n            }\r\n        }\r\n    }\r\n}\r\nclass MultiLayoutMap {\r\n    constructor(layout) {\r\n        this._columnWidths = [];\r\n        this._emptyDataCache = new utils_1.EmptyDataCache();\r\n        const hbLayouut = normalizeLayout(layout);\r\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\r\n            return {\r\n                id,\r\n                caption: hd.caption,\r\n                field: hd.headerField || hd.field,\r\n                headerIcon: hd.headerIcon,\r\n                style: hd.headerStyle,\r\n                headerType: headerType.ofCell(hd),\r\n                action: headerAction.ofCell(hd),\r\n                define: hd,\r\n            };\r\n        }));\r\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\r\n            return {\r\n                id,\r\n                field: colDef.field,\r\n                width: colDef.width,\r\n                minWidth: colDef.minWidth,\r\n                maxWidth: colDef.maxWidth,\r\n                icon: colDef.icon,\r\n                message: colDef.message,\r\n                columnType: columns.type.of(colDef.columnType),\r\n                action: columns.action.of(colDef.action),\r\n                style: colDef.style,\r\n                define: colDef,\r\n            };\r\n        }));\r\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\r\n        for (let col = 0; col < columnCount; col++) {\r\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\r\n            this._columnWidths[col] = widthDef;\r\n        }\r\n    }\r\n    get columnWidths() {\r\n        return this._columnWidths;\r\n    }\r\n    get headerRowCount() {\r\n        return this._header.rowCount;\r\n    }\r\n    get bodyRowCount() {\r\n        return this._body.rowCount;\r\n    }\r\n    get colCount() {\r\n        return this._columnCount;\r\n    }\r\n    get headerObjects() {\r\n        return this._header.objects;\r\n    }\r\n    get columnObjects() {\r\n        return this._body.objects;\r\n    }\r\n    getCellId(col, row) {\r\n        var _a, _b, _c, _d;\r\n        if (this.headerRowCount <= row) {\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        }\r\n        //in header\r\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\r\n    }\r\n    getHeader(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._header.objectMap[id] ||\r\n            this._emptyDataCache.getHeader(col, row));\r\n    }\r\n    getBody(col, row) {\r\n        const id = this.getCellId(col, row);\r\n        return (this._body.objectMap[id] ||\r\n            this._emptyDataCache.getBody(col, row));\r\n    }\r\n    getBodyLayoutRangeById(id) {\r\n        var _a;\r\n        for (let row = 0; row < this.bodyRowCount; row++) {\r\n            const objectGridRow = this._body.objectGrid[row];\r\n            if (!objectGridRow) {\r\n                continue;\r\n            }\r\n            for (let col = 0; col < this.colCount; col++) {\r\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\r\n                    return this._getCellRange(this._body, col, row, 0);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(`can not found body layout @id=${id}`);\r\n    }\r\n    getCellRange(col, row) {\r\n        if (this.headerRowCount <= row) {\r\n            const recordIndex = this.getRecordIndexByRow(row);\r\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\r\n            const bodyRow = row - this.headerRowCount;\r\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\r\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\r\n        }\r\n        //in header\r\n        return this._getCellRange(this._header, col, row, 0);\r\n    }\r\n    getRecordIndexByRow(row) {\r\n        if (row < this.headerRowCount) {\r\n            return -1;\r\n        }\r\n        else {\r\n            const bodyRow = row - this.headerRowCount;\r\n            return Math.floor(bodyRow / this.bodyRowCount);\r\n        }\r\n    }\r\n    getRecordStartRowByRecordIndex(index) {\r\n        return this.headerRowCount + index * this.bodyRowCount;\r\n    }\r\n    _getCellRange(\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    layout, col, layoutRow, offsetRow) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        const result = {\r\n            start: { col, row: layoutRow + offsetRow },\r\n            end: { col, row: layoutRow + offsetRow },\r\n        };\r\n        const { objectGrid } = layout;\r\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\r\n        if (id == null) {\r\n            return result;\r\n        }\r\n        for (let c = col - 1; c >= 0; c--) {\r\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\r\n                break;\r\n            }\r\n            result.start.col = c;\r\n        }\r\n        for (let c = col + 1; c < layout.columnCount; c++) {\r\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\r\n                break;\r\n            }\r\n            result.end.col = c;\r\n        }\r\n        for (let r = layoutRow - 1; r >= 0; r--) {\r\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\r\n                break;\r\n            }\r\n            result.start.row = r + offsetRow;\r\n        }\r\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\r\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\r\n                break;\r\n            }\r\n            result.end.row = r + offsetRow;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.MultiLayoutMap = MultiLayoutMap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MessageHandler = exports.hasMessage = void 0;\r\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\r\nconst InfoMessage_1 = require(\"./InfoMessage\");\r\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\r\nconst WarningMessage_1 = require(\"./WarningMessage\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst EMPTY_MESSAGE = {\r\n    type: \"error\",\r\n    message: null,\r\n};\r\nconst MESSAGE_INSTANCE_FACTORY = {\r\n    error(grid) {\r\n        return new ErrorMessage_1.ErrorMessage(grid);\r\n    },\r\n    info(grid) {\r\n        return new InfoMessage_1.InfoMessage(grid);\r\n    },\r\n    warning(grid) {\r\n        return new WarningMessage_1.WarningMessage(grid);\r\n    },\r\n};\r\nfunction normalizeMessage(message) {\r\n    if (!message || (0, utils_1.isPromise)(message)) {\r\n        return EMPTY_MESSAGE;\r\n    }\r\n    if (typeof message === \"string\") {\r\n        return {\r\n            type: \"error\",\r\n            message,\r\n            original: message,\r\n        };\r\n    }\r\n    const type = message.type || \"error\";\r\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\r\n        return {\r\n            type: type.toLowerCase(),\r\n            message: message.message,\r\n            original: message,\r\n        };\r\n    }\r\n    return {\r\n        type: \"error\",\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        message: `${message}`,\r\n        original: message,\r\n    };\r\n}\r\nfunction hasMessage(message) {\r\n    return !!normalizeMessage(message).message;\r\n}\r\nexports.hasMessage = hasMessage;\r\nclass MessageHandler {\r\n    constructor(grid, getMessage) {\r\n        this._attachInfo = null;\r\n        this._grid = grid;\r\n        this._messageInstances = {};\r\n        this._bindGridEvent(grid, getMessage);\r\n    }\r\n    dispose() {\r\n        var _a;\r\n        const messageInstances = this._messageInstances;\r\n        for (const k in messageInstances) {\r\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageInstances;\r\n        // @ts-expect-error -- ignore\r\n        delete this._attachInfo;\r\n    }\r\n    drawCellMessage(message, context, style, helper, grid, info) {\r\n        if (!hasMessage(message)) {\r\n            return;\r\n        }\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\r\n    }\r\n    _attach(col, row, message) {\r\n        const info = this._attachInfo;\r\n        const instance = this._getMessageInstanceOfMessage(message);\r\n        if (info && info.instance !== instance) {\r\n            info.instance.detachMessageElement();\r\n        }\r\n        instance.attachMessageElement(col, row, normalizeMessage(message));\r\n        this._attachInfo = { col, row, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || info.col !== col || info.row !== row) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveMessageElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachMessageElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _bindGridEvent(grid, getMessage) {\r\n        const onSelectMessage = (sel) => {\r\n            const setMessageData = (msg) => {\r\n                if (!hasMessage(msg)) {\r\n                    this._detach();\r\n                }\r\n                else {\r\n                    this._attach(sel.col, sel.row, msg);\r\n                }\r\n            };\r\n            const message = getMessage(sel.col, sel.row);\r\n            if ((0, utils_1.isPromise)(message)) {\r\n                this._detach();\r\n                message.then((msg) => {\r\n                    const newSel = grid.selection.select;\r\n                    if (newSel.col !== sel.col || newSel.row !== sel.row) {\r\n                        return;\r\n                    }\r\n                    setMessageData(msg);\r\n                });\r\n                return;\r\n            }\r\n            setMessageData(message);\r\n        };\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (!e.selected) {\r\n                return;\r\n            }\r\n            if (e.before.col === e.col && e.before.row === e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const sel = grid.selection.select;\r\n            this._move(sel.col, sel.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (!grid.hasFocusGrid()) {\r\n                return;\r\n            }\r\n            const sel = grid.selection.select;\r\n            if (sel.col !== e.col || sel.row !== e.row) {\r\n                return;\r\n            }\r\n            onSelectMessage(e);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\r\n            const sel = grid.selection.select;\r\n            onSelectMessage(sel);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\r\n            this._detach();\r\n        });\r\n    }\r\n    _getMessageInstanceOfMessage(message) {\r\n        const messageInstances = this._messageInstances;\r\n        const { type } = normalizeMessage(message);\r\n        return (messageInstances[type] ||\r\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\r\n    }\r\n}\r\nexports.MessageHandler = MessageHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst RED_A100 = \"#ff8a80\";\r\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new ErrorMessageElement_1.ErrorMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.errorBgColor, context.col, context.row, ctx) || RED_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.ErrorMessage = ErrorMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ErrorMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.ErrorMessageElement = ErrorMessageElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./MessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element--hidden{display:none}.cheetah-grid__message-element--shown{display:block}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./ErrorMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InfoMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst MessageElement_1 = require(\"./internal/MessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst GREY_L2 = \"#e0e0e0\";\r\nclass InfoMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new MessageElement_1.MessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawInformationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.infoBgColor, context.col, context.row, ctx) || GREY_L2,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.InfoMessage = InfoMessage;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessage = void 0;\r\nconst messageUtils = __importStar(require(\"./messageUtils\"));\r\nconst BaseMessage_1 = require(\"./BaseMessage\");\r\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\r\nconst utils_1 = require(\"../../internal/utils\");\r\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\r\nclass WarningMessage extends BaseMessage_1.BaseMessage {\r\n    createMessageElementInternal() {\r\n        return new WarningMessageElement_1.WarningMessageElement();\r\n    }\r\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\r\n        const { bgColor } = style;\r\n        const { select } = context.getSelection();\r\n        if (!(0, utils_1.cellInRange)(grid.getCellRange(context.col, context.row), select.col, select.row) ||\r\n            !grid.hasFocusGrid()) {\r\n            helper.drawBorderWithClip(context, (ctx) => {\r\n                messageUtils.drawExclamationMarkBox(context, {\r\n                    bgColor: helper.getColor(helper.theme.messages.warnBgColor, context.col, context.row, ctx) || DEEP_ORANGE_A100,\r\n                    color: bgColor,\r\n                    boxWidth: helper.theme.messages.boxWidth,\r\n                    markHeight: helper.theme.messages.markHeight,\r\n                }, helper);\r\n            });\r\n        }\r\n    }\r\n}\r\nexports.WarningMessage = WarningMessage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WarningMessageElement = void 0;\r\nconst MessageElement_1 = require(\"./MessageElement\");\r\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\r\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\r\nclass WarningMessageElement extends MessageElement_1.MessageElement {\r\n    constructor() {\r\n        super();\r\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\r\n        this._rootElement.classList.add(CLASSNAME);\r\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n    }\r\n}\r\nexports.WarningMessageElement = WarningMessageElement;\r\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./WarningMessageElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipHandler = void 0;\r\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\r\nconst Tooltip_1 = require(\"./Tooltip\");\r\nconst utils_1 = require(\"../internal/utils\");\r\nconst TOOLTIP_INSTANCE_FACTORY = {\r\n    \"overflow-text\"(grid) {\r\n        return new Tooltip_1.Tooltip(grid);\r\n    },\r\n};\r\nfunction getTooltipInstanceInfo(\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ngrid, col, row) {\r\n    //\r\n    // overflow text tooltip\r\n    const overflowText = grid.getCellOverflowText(col, row);\r\n    if (overflowText) {\r\n        return {\r\n            type: \"overflow-text\",\r\n            content: overflowText,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nclass TooltipHandler {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n        this._tooltipInstances = {};\r\n        this._bindGridEvent(grid);\r\n    }\r\n    dispose() {\r\n        const tooltipInstances = this._tooltipInstances;\r\n        for (const k in tooltipInstances) {\r\n            tooltipInstances[k].dispose();\r\n        }\r\n        // @ts-expect-error -- ignore\r\n        delete this._tooltipInstances;\r\n        this._attachInfo = null;\r\n    }\r\n    _attach(col, row) {\r\n        const info = this._attachInfo;\r\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\r\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\r\n            info.instance.detachTooltipElement();\r\n            this._attachInfo = null;\r\n        }\r\n        if (!instanceInfo) {\r\n            return;\r\n        }\r\n        const { instance } = instanceInfo;\r\n        instance.attachTooltipElement(col, row, instanceInfo.content);\r\n        const range = this._grid.getCellRange(col, row);\r\n        this._attachInfo = { range, instance };\r\n    }\r\n    _move(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info || !(0, utils_1.cellInRange)(info.range, col, row)) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.moveTooltipElement(col, row);\r\n    }\r\n    _detach() {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return;\r\n        }\r\n        const { instance } = info;\r\n        instance.detachTooltipElement();\r\n        this._attachInfo = null;\r\n    }\r\n    _isAttachCell(col, row) {\r\n        const info = this._attachInfo;\r\n        if (!info) {\r\n            return false;\r\n        }\r\n        return (0, utils_1.cellInRange)(info.range, col, row);\r\n    }\r\n    _bindGridEvent(grid) {\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.col, e.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._attach(e.col, e.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\r\n            if (e.related) {\r\n                if (this._isAttachCell(e.related.col, e.related.row)) {\r\n                    return;\r\n                }\r\n            }\r\n            this._detach();\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n            }\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\r\n            const info = this._attachInfo;\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this._move(info.range.start.col, info.range.start.row);\r\n        });\r\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\r\n            if (this._isAttachCell(e.col, e.row)) {\r\n                this._detach();\r\n                this._attach(e.col, e.row);\r\n            }\r\n        });\r\n    }\r\n    _getTooltipInstanceInfo(col, row) {\r\n        const grid = this._grid;\r\n        const tooltipInstances = this._tooltipInstances;\r\n        const info = getTooltipInstanceInfo(grid, col, row);\r\n        if (!info) {\r\n            return null;\r\n        }\r\n        const { type } = info;\r\n        const instance = tooltipInstances[type] ||\r\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\r\n        return {\r\n            instance,\r\n            type,\r\n            content: info.content,\r\n        };\r\n    }\r\n}\r\nexports.TooltipHandler = TooltipHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tooltip = void 0;\r\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\r\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\r\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\r\n    createTooltipElementInternal() {\r\n        return new TooltipElement_1.TooltipElement();\r\n    }\r\n}\r\nexports.Tooltip = Tooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseTooltip = void 0;\r\nclass BaseTooltip {\r\n    constructor(grid) {\r\n        this._grid = grid;\r\n    }\r\n    dispose() {\r\n        this.detachTooltipElement();\r\n        if (this._tooltipElement) {\r\n            this._tooltipElement.dispose();\r\n        }\r\n        this._tooltipElement = undefined;\r\n    }\r\n    _getTooltipElement() {\r\n        if (this._tooltipElement) {\r\n            return this._tooltipElement;\r\n        }\r\n        return (this._tooltipElement = this.createTooltipElementInternal());\r\n    }\r\n    attachTooltipElement(col, row, content) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.attach(this._grid, col, row, content);\r\n    }\r\n    moveTooltipElement(col, row) {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement.move(this._grid, col, row);\r\n    }\r\n    detachTooltipElement() {\r\n        const tooltipElement = this._getTooltipElement();\r\n        tooltipElement._detach();\r\n    }\r\n}\r\nexports.BaseTooltip = BaseTooltip;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TooltipElement = void 0;\r\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\r\nconst dom_1 = require(\"../../internal/dom\");\r\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\r\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\r\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\r\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\r\nfunction createTooltipDomElement() {\r\n    require(\"@/tooltip/internal/TooltipElement.css\");\r\n    const rootElement = (0, dom_1.createElement)(\"div\", {\r\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\r\n    });\r\n    const messageElement = (0, dom_1.createElement)(\"pre\", {\r\n        classList: [CONTENT_CLASSNAME],\r\n    });\r\n    rootElement.appendChild(messageElement);\r\n    return rootElement;\r\n}\r\nclass TooltipElement {\r\n    constructor() {\r\n        this._handler = new EventHandler_1.EventHandler();\r\n        const rootElement = (this._rootElement = createTooltipDomElement());\r\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\r\n    }\r\n    dispose() {\r\n        this.detach();\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            rootElement.parentElement.removeChild(rootElement);\r\n        }\r\n        this._handler.dispose();\r\n        // @ts-expect-error -- ignore\r\n        delete this._rootElement;\r\n        // @ts-expect-error -- ignore\r\n        delete this._messageElement;\r\n    }\r\n    attach(grid, col, row, content) {\r\n        const rootElement = this._rootElement;\r\n        const messageElement = this._messageElement;\r\n        rootElement.classList.remove(SHOWN_CLASSNAME);\r\n        rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n            messageElement.textContent = content;\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    move(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        if (this._attachCell(grid, col, row)) {\r\n            rootElement.classList.add(SHOWN_CLASSNAME);\r\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\r\n        }\r\n        else {\r\n            this._detach();\r\n        }\r\n    }\r\n    detach() {\r\n        this._detach();\r\n    }\r\n    _detach() {\r\n        const rootElement = this._rootElement;\r\n        if (rootElement.parentElement) {\r\n            // rootElement.parentElement.removeChild(rootElement);\r\n            rootElement.classList.remove(SHOWN_CLASSNAME);\r\n            rootElement.classList.add(HIDDEN_CLASSNAME);\r\n        }\r\n    }\r\n    _attachCell(grid, col, row) {\r\n        const rootElement = this._rootElement;\r\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\r\n        const { bottom: top, left, width } = rect;\r\n        const { frozenRowCount, frozenColCount } = grid;\r\n        if (row >= frozenRowCount && frozenRowCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\r\n            if (top < frozenRect.bottom) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (top < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        if (col >= frozenColCount && frozenColCount > 0) {\r\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\r\n            if (left < frozenRect.right) {\r\n                return false; //\r\n            }\r\n        }\r\n        else {\r\n            if (left < 0) {\r\n                return false; //\r\n            }\r\n        }\r\n        const { height: offsetHeight, width: offsetWidth, left: elementLeft, right: elementRight, } = element.getBoundingClientRect();\r\n        if (offsetHeight < top) {\r\n            return false; //\r\n        }\r\n        if (offsetWidth < left) {\r\n            return false; //\r\n        }\r\n        const cellCenter = left + width / 2;\r\n        rootElement.style.top = `${top.toFixed()}px`;\r\n        rootElement.style.left = `${cellCenter.toFixed()}px`;\r\n        rootElement.style.minWidth = `${width.toFixed()}px`;\r\n        const maxWidthForLeft = (elementLeft + cellCenter) * 2;\r\n        const winWidth = window.innerWidth;\r\n        const maxWidthForRight = (offsetWidth - cellCenter + (winWidth - elementRight)) * 2;\r\n        const maxWidth = Math.min(maxWidthForLeft, maxWidthForRight);\r\n        rootElement.style.maxWidth = `${maxWidth.toFixed()}px`;\r\n        if (rootElement.parentElement !== element) {\r\n            element.appendChild(rootElement);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.TooltipElement = TooltipElement;\r\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../../node_modules/postcss-loader/src/index.js??ref--5-2!./TooltipElement.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@-webkit-keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}@keyframes cheetah-grid__tooltip-element--shown-animation{0%{opacity:0;-webkit-transform:scale(.8) translateX(-60%);transform:scale(.8) translateX(-60%)}to{opacity:1;-webkit-transform:scale(1) translateX(-50%);transform:scale(1) translateX(-50%)}}.cheetah-grid__tooltip-element{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background-color:#232f34;padding:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.cheetah-grid__tooltip-element--hidden{opacity:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:opacity 75ms linear;transition:opacity 75ms linear}.cheetah-grid__tooltip-element--shown{opacity:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out;animation:cheetah-grid__tooltip-element--shown-animation .15s ease-out}.cheetah-grid__tooltip-element__content{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;width:100%;display:block;white-space:pre-wrap;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getInternal = void 0;\r\nfunction getInternal() {\r\n    console.warn(\"use internal!!\");\r\n    return {\r\n        color: require(\"./internal/color\"),\r\n        sort: require(\"./internal/sort\"),\r\n        calc: require(\"./internal/calc\"),\r\n        symbolManager: require(\"./internal/symbolManager\"),\r\n        path2DManager: require(\"./internal/path2DManager\"),\r\n        pasteUtils: require(\"./internal/paste-utils\"),\r\n    };\r\n}\r\nexports.getInternal = getInternal;\r\n"],"sourceRoot":""}